mysql = dbConnect("mysql", "dbname=MTAVC;host=localhost;port=3306;charset=utf8", "0VoDkApIvO", "PoDkOnEcKoRpOrAtIvA1334")

local VehicleTable 		=	{}
local maxveh			=  	0
local objeect 			= 	{}
local MailVeh 			= 	{}
local mrkBusiness		=	{}
local PlayerTable		=	{}
local OrderBiz			=	{}
local Capt 				= 	false
local PhoneObject		=	{}
local text3dTable		=	{}
local IDS 				= 	{}
local PTTimer			=	{}
local pckFreeEat		=	{}
local PlayerBusTimer	=	{}
local mrkWeaponMag		=	{}
local PCar 				=	{}
local AdmVeh			=	{}
local fishobj 			=	{}
local DonKoef			=	150
local rentVehTable 		=	{}
local rentTimer			=	{}
local FloodTable		=	{}

for i, n in pairs(getElementsByType("player")) do
	removeElementData(n, "Login")
end

local mrkRepairVeh		=	
{
	[1]={["x"]=38.37109375, 	["y"]=-1088.4140625, 	["z"]=10.423915863037},
	[2]={["x"]=-888.857421875, 	["y"]=-565.6904296875, 	["z"]=11.049599647522},
	[3]={["x"]=-735.4599609375, ["y"]=-1319.8720703125, ["z"]=11.054172515869},
	[4]={["x"]=201.25, 			["y"]=-504.173828125, 	["z"]=11.602198600769},
	[5]={["x"]=-847.30759375, 	["y"]=-900.73621875, 	["z"]=11.064968109131}
}

local BankomatsTable = 
{
	[1] = {["x"]=485.2119140625, 	["y"]=247.7255859375, 	["z"]=11.031339645386},
	[2] = {["x"]=392.3779296875, 	["y"]=-720.7197265625, 	["z"]=11.006278991699},
	[3] = {["x"]=187.935546875, 	["y"]=-477.521484375, 	["z"]=11.031339645386},
	[4] = {["x"]=-173.2080078125, 	["y"]=-1429.857421875, 	["z"]=10.426416397095},
	[5] = {["x"]=-315.4599609375, 	["y"]=1227.1337890625, 	["z"]=10.953682899475},
	[6] = {["x"]=-880.12109375, 	["y"]=-574.345703125, 	["z"]=11.031339645386},
	[7] = {["x"]=-721.9033203125, 	["y"]=-1325.015625, 	["z"]=11.031339645386},
	[8] = {["x"]=-1587.68359375, 	["y"]=-742.0126953125, 	["z"]=14.824739456177},
	[9] = {["x"]=63.8369140625, 	["y"]=946.3603515625, 	["z"]=10.80312538147}
}

function create3dtextlabel( x, y, z, text )
	if(x ~= nil) then
		if(y ~= nil) then
			if(y ~= nil) then
				if(text ~= nil) then
					local id = table.maxn(text3dTable) + 1
					text3dTable[id] = 
					{
						["x"]=x, ["y"]=y, ["z"]=z, ["Text"]=text, ["ID"]=id
					}
					for i, player in pairs(IDS) do
						if(getElementData(player, "Login") == true) then
							triggerClientEvent(player, "on3dTextAdd", player, text3dTable[id])
						end
					end
					return id
				end
			end
		end
	end
end

function edit3dtext( id, text )
	if(id ~= nil) then
		if(text ~= nil) then
			id = tonumber(id)
			if(text3dTable[id] ~= nil) then
				text3dTable[id]["Text"] = text
				for i, player in pairs(IDS) do
					if(getElementData(player, "Login") == true) then
						triggerClientEvent(player, "on3dTextAdd", player, text3dTable[id])
					end
				end
			end
		end
	end
end

function SED( elem, key, value )
	if(isElement(elem) == true) then
		if(key ~= nil) then
			if(value ~= nil) then
				setElementData(elem, key, value, false)
			else
    			outputServerLog("nil value")
			end
		else
			outputServerLog("nil key SED")
		end
	else
		outputServerLog("nil element SED")
	end
end

local rentCarPos = 
{
	[1] = {["x"]=-1173.7001953125,	["y"]=-942.3310546875, 		["z"]=14.826175689697},
	[2] = {["x"]=-4.1748046875,		["y"]=-1204.2763671875, 	["z"]=10.434156417847}
}

local SkinTable =
{
    [1]     =   {   ["ID"] = 303,   ["Price"] = 300    },
    [2]     =   {   ["ID"] = 13,    ["Price"] = 300    },
    [3]     =   {   ["ID"] = 14,    ["Price"] = 350    },
    [4]     =   {   ["ID"] = 15,    ["Price"] = 400    },
    [5]     =   {   ["ID"] = 144,   ["Price"] = 450    },
    [6]     =   {   ["ID"] = 19,    ["Price"] = 650    },
    [7]     =   {   ["ID"] = 66,    ["Price"] = 800    },
    [8]     =   {   ["ID"] = 180,   ["Price"] = 550    },
    [9]     =   {   ["ID"] = 299,   ["Price"] = 3500   },
    [10]    =   {   ["ID"] = 159,   ["Price"] = 380    },
    [11]    =   {   ["ID"] = 161,   ["Price"] = 385    },
    [12]    =   {   ["ID"] = 200,   ["Price"] = 410    },
    [13]    =   {   ["ID"] = 131,   ["Price"] = 800    },
    [14]    =   {   ["ID"] = 106,   ["Price"] = 900    },
    [15]    =   {   ["ID"] = 191,   ["Price"] = 1100   },
    [16]    =   {   ["ID"] = 56,    ["Price"] = 750    },
    [17]    =   {   ["ID"] = 59,    ["Price"] = 1800   },
    [18]    =   {   ["ID"] = 60,    ["Price"] = 2000   },
    [19]    =   {   ["ID"] = 44,    ["Price"] = 400    },
    [20]    =   {   ["ID"] = 47,    ["Price"] = 1100   },
    [21]    =   {   ["ID"] = 309,   ["Price"] = 500    },
    [22]    =   {   ["ID"] = 192,   ["Price"] = 2500   },
    [23]    =   {   ["ID"] = 193,   ["Price"] = 2900   },
    [24]    =   {   ["ID"] = 223,   ["Price"] = 2400   },
    [25]    =   {   ["ID"] = 226,   ["Price"] = 8000   },
    [26]    =   {   ["ID"] = 170,   ["Price"] = 1200   },
    [27]    =   {   ["ID"] = 270,   ["Price"] = 1100   },
    [28]    =   {   ["ID"] = 233,   ["Price"] = 750    },
    [29]    =   {   ["ID"] = 135,   ["Price"] = 500    },
    [30]    =   {   ["ID"] = 239,   ["Price"] = 520    },
    [31]    =   {   ["ID"] = 73,    ["Price"] = 700    },
    [32]    =   {   ["ID"] = 240,   ["Price"] = 900    },
    [33]    =   {   ["ID"] = 120,   ["Price"] = 2400   },
    [34]    =   {   ["ID"] = 184,   ["Price"] = 800    },
    [35]    =   {   ["ID"] = 206,   ["Price"] = 860    },
    [36]    =   {   ["ID"] = 25,    ["Price"] = 680    },
    [37]    =   {   ["ID"] = 211,   ["Price"] = 1300   },
    [38]    =   {   ["ID"] = 152,   ["Price"] = 1150   },
    [39]    =   {   ["ID"] = 91,    ["Price"] = 2800   },
    [40]    =   {   ["ID"] = 93,    ["Price"] = 1450   },
    [41]    =   {   ["ID"] = 62,    ["Price"] = 600    },
    [42]    =   {   ["ID"] = 78,    ["Price"] = 480    },
    [43]    =   {   ["ID"] = 23,    ["Price"] = 700    },
    [44]    =   {   ["ID"] = 27,    ["Price"] = 650   },
    [45]    =   {   ["ID"] = 100,   ["Price"] = 900    }
}

local AdminCommands = 
{
	[1] = 
	{
		[1] = {["String"]="/ahelp", ["Pole"]="-", ["Value"]="Список админ-команд"},
		[2] = {["String"]="/sp", ["Pole"]="[ID игрока]", ["Value"]="Слежка за игроком"},
		[3] = {["String"]="/stopspec", ["Pole"]="-", ["Value"]="Закончить слежку"},
		[4] = {["String"]="/ash", ["Pole"]="-", ["Value"]="ТП Автошкола"},
		[5] = {["String"]="/courier", ["Pole"]="-", ["Value"]="ТП Курьер"},
		[6] = {["String"]="/amail", ["Pole"]="-", ["Value"]="ТП Почтальон"},
		[7] = {["String"]="/elit", ["Pole"]="-", ["Value"]="ТП Центральный остров"},
		[8] = {["String"]="/bus", ["Pole"]="-", ["Value"]="ТП Автобусный парк"},
		[9] = {["String"]="/mer", ["Pole"]="-", ["Value"]="ТП Мэрия"},
		[10] = {["String"]="/taxipark", ["Pole"]="-", ["Value"]="ТП Таксопарк"},
		[11] = {["String"]="/gruz", ["Pole"]="-", ["Value"]="ТП Грузчики"},
		[12] = {["String"]="/army", ["Pole"]="-", ["Value"]="ТП Армия"},
		[13] = {["String"]="/afuel", ["Pole"]="-", ["Value"]="100 литров бензина в транспорт"},
		[14] = {["String"]="/int", ["Pole"]="[ID Интерьера]", ["Value"]="Изменить свой интерьер"},
		[15] = {["String"]="/shotel", ["Pole"]="-", ["Value"]="ТП Отель (спавн)"},
		[16] = {["String"]="/vcn", ["Pole"]="-", ["Value"]="ТП Vice City News"},
		[17] = {["String"]="/a", ["Pole"]="[Текст]", ["Value"]="Админ-чат"},
		[18] = {["String"]="/aero", ["Pole"]="-", ["Value"]="ТП Аэропорт (спавн)"},
		[19] = {["String"]="/agivevehlic", ["Pole"]="[id игрока] [0/1]", ["Value"]="Забрать или выдать права игроку"},
		[20] = {["String"]="/ans", ["Pole"]="[id игрока] [Текст]", ["Value"]="Ответить игроку от админки в пм"},
		[21] = {["String"]="/tp", ["Pole"]="[x] [y] [z]", ["Value"]="ТП по координатам"},
		[22] = {["String"]="/bus2", ["Pole"]="-", ["Value"]="ТП Автобусный парк 2"}
	},
	[2] = 
	{
		[1] = {["String"]="/jail", ["Pole"]="[id igroka] [vremya]", ["Value"]="Посадить игрока в деморган"},
		[2] = {["String"]="/mall", ["Pole"]="-", ["Value"]="ТП Сити Молл"},
		[3] = {["String"]="/armor", ["Pole"]="-", ["Value"]="Выдать себе армор"},
		[4] = {["String"]="/warn", ["Pole"]="[id игрока] [причина]", ["Value"]="Выдать предупреждение (кикает игрока и снимает с фракции)"},
		[5] = {["String"]="/repair", ["Pole"]="-", ["Value"]="Отремонтировать транспорт, в котором находишься"},
		[6] = {["String"]="/mute", ["Pole"]="[id игрока] [время] [причина]", ["Value"]="Выдать игроку затычку (разговор, /me, /do, /try)"},
		[7] = {["String"]="/goto", ["Pole"]="[id игрока]", ["Value"]="ТП к игроку"},
		[8] = {["String"]="/veh", ["Pole"]="[id]", ["Value"]="Создать транспортное средство"},
		[9] = {["String"]="/kill", ["Pole"]="-", ["Value"]="Смереть смертью"},
		[10] = {["String"]="/jail", ["Pole"]="[id] [время] [причина]", ["Value"] = "Посадить игрока в тюрьму"},
	},
	[3] = 
	{
		[1] = {["String"]="/aban", ["Pole"]="[id игрока] [кол-во дней] [причина]", ["Value"]="Выдать бан"},
		[2] = {["String"]="/aheal(/hp)", ["Pole"]="-", ["Value"]="Пополнить своё здоровье"},
		[3] = {["String"]="/aeat", ["Pole"]="-", ["Value"]="Пополнить свою еду"},
		[4] = {["String"]="/spawn", ["Pole"]="[ID игрока]", ["Value"]="Заспавнить себя (если id не введён) или игрока."},
		[5] = {["String"]="/asay", ["Pole"]="[Текст]", ["Value"]="От лица администратора в общий чат"},
		[6] = {["String"]="/skin", ["Pole"]="[id скина]", ["Value"]="Выдать себе временный скин"},
		[7] = {["String"]="/unjail", ["Pole"]="[id игрока]", ["Value"]="Выпустить игрока из тюрьмы"},
		[8] = {["String"]="/seteat", ["Pole"]="[id] [% сытости]", ["Value"] = "Выдать сытость"},
		[9] = {["String"]="/sethp", ["Pole"]="[id] [% хп]", ["Value"] = "Выдать армор"},
		[10] = {["String"]="/setarmor", ["Pole"]="[id] [% армор]", ["Value"] = "Выдать хп"}
	},
	[4] = 
	{
		[1] = {["String"]="/unwarn", ["Pole"]="[id игрока]", ["Value"]="Снять предупреждение (лайв)"},
		[2] = {["String"]="/camhack", ["Pole"]="-", ["Value"]="Включить камхак"},
		[3] = {["String"]="/camhackm", ["Pole"]="-", ["Value"]="Замедлить/ускорить камхак"},
		[4] = {["String"]="/templeader", ["Pole"]="[ID фракции]", ["Value"]="Встать на временную лидерку (0 < id < 10)"},
		[5] = {["String"]="/weapon", ["Pole"]="[id оружия]", ["Value"]="Выдать себе оружие"},
		[6] = {["String"]="/weather", ["Pole"]="[id погоды]", ["Value"]="Изменить погоду"},
		[7] = {["String"]="/hours", ["Pole"]="(/settime or /time)[Час]", ["Value"]="Изменить время на нужный час"},
		[8] = {["String"]="/get", ["Pole"]="[id игрока]", ["Value"]="ТП игрока к себе"}
	},
	[5] = 
	{
		[1] = {["String"]="/setleader", ["Pole"]="[id игрока] [id фракции]", ["Value"]="Поставить игрока на лидерку"},
		[2] = {["String"]="/id", ["Pole"]="[текст]", ["Value"]="Найти id игрока по нику"},
		[3] = {["String"]="/object", ["Pole"]="[id объекта", ["Value"]=""}
	},
	[6] = 
	{
		[1] = {["String"]="/ch", ["Pole"]="[Цена]", ["Value"]="Создать дом на координатах, где находится персонаж"},
		[2] = {["String"]="/sethvs", ["Pole"]="[id дома]", ["Value"]="Сделать \"Гараж\" на позиции игрока (учитывается угол поворота игрока)"},
		[3] = {["String"]="/sethouseprice", ["Pole"]="[id дома] [цена]", ["Value"]="Изменить цену для дома"},
		[4] = {["String"]="/makeadmin", ["Pole"]="[id игрока] [Уровень]", ["Value"]="Выдать игроку админку"}
	}
}

local ZpTable = 
{
	[1]		=	{	[1] = 0,	[2]=0,	[3]=0,	[4] = 0,	[5] = 0,	[6] = 0,	[7] = 0, [8] = 0,	[9] = 0,	[10] = 0},
	[2]		=	{	[1] = 0,	[2]=0,	[3]=0,	[4] = 0,	[5] = 0,	[6] = 0,	[7] = 0, [8] = 0,	[9] = 0,	[10] = 0},
	[3]		=	{	[1] = 0,	[2]=0,	[3]=0,	[4] = 0,	[5] = 0,	[6] = 0,	[7] = 0, [8] = 0,	[9] = 0,	[10] = 0},
	[4]		=	{	[1] = 0,	[2]=0,	[3]=0,	[4] = 0,	[5] = 0,	[6] = 0,	[7] = 0, [8] = 0,	[9] = 0,	[10] = 0},
	[5]		=	{	[1] = 650,	[2]=900,	[3]=1200,	[4] = 1400,	[5] = 1850,	[6] = 2150,	[7] = 2400, [8] = 2600,	[9] = 2800,	[10] = 3000},
	[6]		=	{	[1] = 500,	[2]=600,	[3]=800,	[4] = 1000,	[5] = 1300,	[6] = 1600,	[7] = 1900, [8] = 2150,	[9] = 2350,	[10] = 2600},
	[7]		=	{	[1] = 600,	[2]=750,	[3]=900,	[4] = 1200,	[5] = 1500,	[6] = 1800,	[7] = 2100, [8] = 2300,	[9] = 2600,	[10] = 2800},
	[8]		=	{	[1] = 550,	[2]=800,	[3]=1000,	[4] = 1300,	[5] = 1600,	[6] = 1900,	[7] = 2100, [8] = 2300,	[9] = 2600,	[10] = 2800},
	[9]		=	{	[1] = 500,	[2]=650,	[3]=800,	[4] = 1200,	[5] = 1500,	[6] = 1800,	[7] = 2000, [8] = 2200,	[9] = 2500,	[10] = 2750}
}

local mrkEda =
{
	[1] = {	["x"]=-902.7177734375, 	["y"]=799.73046875, 		["z"]=10.424116134644	},
	[2] = {	["x"]=420.650390625, 	["y"]=88.0595703125, 		["z"]=10.2223072052		}
}

mrkWeaponMag[1] = createMarker(-677.5859375, 1205.7431640625, 10.080532073975, "cylinder", 1.2, 220, 0, 0, 220, getRootElement())
mrkWeaponMag[2] = createMarker(-64.859375, -1481.6181640625, 9.450514793396, "cylinder", 1.2, 220, 0, 0, 220, getRootElement())

function onWeaponMag( hit, dim )
	if(getElementType(hit) == "player") then
		if(getElementData(hit, "Login") == true) then
			if(getElementData(hit, "Admin") ~= false) then
				if(getElementData(hit, "WeaponLicense") == true) then
					showPlayerDialog(hit, 83, 3, "Покупка оружия", "Название оружия\tСтоимость\tКоличество патрон\nDesert Eagle\t12.500$\t7/28\nM4\t15.000$\t30/90\nShotgun\t9.000$\t1/34\nAk-47\t14.000$\t30/90", "Купить", "Отмена")
				else
					addBox("Вам необходимо приобрести\nЛицензию на оружие.", hit, 255, 0, 0)
				end
			end
		end
	end
end

for i, n in pairs(mrkWeaponMag) do
	SED(mrkWeaponMag[i], "mrkMag", i)
	addEventHandler("onMarkerHit", n, onWeaponMag)
end

local CaptZone =
{
	["x1"] = -116.6015625,
	["y1"] = 853.333984375,
	["x2"] = -7.701171875,
	["y2"] = 1042.533203125,
	["Biz"] = 0
}

local CHT =	
{
	[1] =	{},
	[2]	=	{},
	[3] =	{},
	[4]	=	{}
}
local BusTimer			=	{}
local Faction = 
{
	[1]	=	{ ["Capture"] = 0 },
	[2]	=	{ ["Capture"] = 0 },
	[3] =	{ ["Capture"] = 0 },
	[4]	=	{ ["Capture"] = 0 }
}

function sendClientMessage( text, player, r, g, b, val )
	if(val == nil) then
		val = nil
	end
	if(r == nil) then
		r = 255
	end
	if(g == nil) then
		g = 255
	end
	if(b == nil) then
		b = 255
	end
	if(text == nil) then
		text = ""
	end
	if(player == nil) then
		player = getRootElement()
	end
	outputChatBox(text, player, r, g, b, val)
end


function math.round(number, decimals, method)
    decimals = decimals or 0
    local factor = 10 ^ decimals
    if (method == "ceil" or method == "floor") then return math[method](number * factor) / factor
    else return tonumber(("%."..decimals.."f"):format(number)) end
end

function createVeh( id, x, y, z, rx, ry, rz )
	maxveh = maxveh + 1
	VehicleTable[maxveh] = {}
	if( id > 399 and id < 612) then
		VehicleTable[maxveh]["Vehicle"] = createVehicle(id, x, y, z, rx, ry, rz)
		local veh = VehicleTable[maxveh]["Vehicle"]
		SED(veh, "ID", maxveh)
		SED(veh, "Fuel", 40)
		SED(veh, "sx", x)
		SED(veh, "sy", y)
		SED(veh, "sz", z)
        if(rz ~= nil) then
    		SED(veh, "srz",	rz)
        end
		setVehicleOverrideLights(veh, 1)
		return VehicleTable[maxveh]["Vehicle"]
	else return false
	end
end

local CMD_INTERVAL  = 300
local RETURN_INTERVAL = 150  
local TAB_INTERVAL = 3000

local GreenZone = 
{
	[1]={["x1"]=232.578125, 		["y1"]=-355.513671875, 		["x2"]=339.8134765625, 		["y2"]=-189.1806640625	},
	[2]={["x1"]=-764.69140625, 		["y1"]=-1371.2900390625, 	["x2"]=-609.0126953125, 	["y2"]=-1281.755859375	},
	[3]={["x1"]=40.29296875,		["y1"]=-865.63476562,		["x2"]=108.178710937,		["y2"]=-701.728515625	},
	[4]={["x1"]=249.7802734375, 	["y1"]=-115.536132,			["x2"]=265.832,				["y2"]=-75.25,			["Interior"]=5},
	[5]={["x1"]=251.234375,			["y1"]= -336.875976562,		["x2"]=343.204101562,		["y2"]= -292.29492187	},
	[6]={["x1"]=-1134.4521484375, 	["y1"]=1229.5830078125,		["x2"]=-1009.0615234375, 	["y2"]=1451.193359375	},
	[7]={["x1"]=-173.6982421875, 	["y1"]=-1199.7451171875,	["x2"]=-62.005859375, 		["y2"]=-1123.962890625	},
	[8]={["x1"]=-1542.53515625, 	["y1"]=-897.3740234375, 	["x2"]=-1323.1767578125, 	["y2"]=-787.279296875	}
}

local FactionSpawns = 
{
	[1]={ ["x"]=307.4990234375, 	["y"]=288.97265625, 	["z"]=16.176692962646 	},
	[2]={ ["x"]=-1073.9423828125, 	["y"]=-233.0791015625, 	["z"]=11.404360771179 	},
	[3]={ ["x"]=-1059.7705078125, 	["y"]=319.9892578125, 	["z"]=11.226167678833 	},
	[4]={ ["x"]=-130.7890625, 		["y"]=-1385.8798828125, ["z"]=10.419187545776 	},
	[5]={ ["x"]=358.380859375,		["y"]=206.8076171875,	["z"]=1008.3828125,		["Interior"]=3, ["Rot"]=270},
	[6]={ ["x"]=-518.568359375,		["y"]=775.6083984375,	["z"]=97.470069885254	},
	[7]={ ["x"]=-135.0732421875,	["y"]=-980.216796875,	["z"]=10.423469543457	},
	[8]={ ["x"]=509.5859375, 		["y"]=505.7294921875,	["z"]=11.260468482971	},
	[9]={ ["x"]=-1720.357421875, 	["y"]=-156.634765625, 	["z"]=14.827548980713	}
}

local StandartSpawns =
{
	[0]= { ["x"]=-1392.142578125, 	["y"]=-877.5107421875, 	["z"]=20.86149597168 	},
	[1]= { ["x"]=-145.5556640625,	["y"]=-1143.34375, 		["z"]=13.445375442505 	}
}

local FactionSkins = 
{
	[1] = {[1]=32, 	[2]=33,		[3]={}	},
	[2] = {[1]=125,	[2]=113,	[3]={}	},
	[3] = {[1]=124,	[2]=127,	[3]={}	},
	[4] = {[1]=121, [2]=123,	[3]={}	},
	[5] = {[1]={}, 	[2]={},		[3]={}	},
	[6] = {[1]=60, 	[2]=46,		[3]={}	},
	[7] = {[1]=272, [2]=70, 	[3]={}	},
	[8] = {[1]=264, [2]=283,	[3]={}	},
	[9] = {[1]=287, [2]=255, 	[3]={}	}
}

local mrksBusWork = 
{
	[1] = 
	{
		[1] = {["x"]=47.8125, 			["y"]=-996.8984375, ["z"]=10.178091049194},
		[2] = {["x"]=40.1142578125, 	["y"]=-1029.283203125, ["z"]=10.033022880554},
		[3] = {["x"]=-0.609375, 		["y"]=-1028.8427734375, ["z"]=10.034883499146},
		[4] = {["x"]=-54.7802734375, 	["y"]=-1027.828125, ["z"]=10.037142753601},
		[5] = {["x"]=-71.2802734375, 	["y"]=-1014.5126953125, ["z"]=10.044651985168},
		[6] = {["x"]=-74.9951171875, 	["y"]=-987.8759765625, ["z"]=10.03680229187},
		[7] = {["x"]=-79.30078125, 		["y"]=-976.45703125, ["z"]=10.037132263184},
		[8] = {["x"]=-94.8017578125, 	["y"]=-903.5546875, ["z"]=10.044855117798},
		[9] = {["x"]=-67.5703125, 		["y"]=-883.083984375, ["z"]=10.037915229797},
		[10] = {["x"]=7.3310546875, 	["y"]=-869.498046875, ["z"]=10.031182289124},
		[11] = {["x"]=94.271484375, 	["y"]=-841.775390625, ["z"]=10.031202316284},
		[12] = {["x"]=120.66796875, 	["y"]=-810.8212890625, ["z"]=10.03503704071},
		[13] = {["x"]=123.4970703125, 	["y"]=-803.140625, ["z"]=10.031199455261},
		[14] = {["x"]=159.23828125, 	["y"]=-719.287109375, ["z"]=10.036388397217},
		[15] = {["x"]=175.8134765625, 	["y"]=-627.5166015625, ["z"]=18.288593292236},
		[16] = {["x"]=179.5859375, 		["y"]=-545.0927734375, ["z"]=11.629448890686},
		[17] = {["x"]=183.8125, 		["y"]=-453.6064453125, ["z"]=10.605423927307},
		[18] = {["x"]=201.9091796875, 	["y"]=-364.5498046875, ["z"]=10.256289482117},
		[19] = {["x"]=203.716796875, 	["y"]=-355.2607421875, ["z"]=10.164639472961},
		[20] = {["x"]=272.9345703125, 	["y"]=-188.97265625, ["z"]= 10.672285079956},
		[21] = {["x"]=299.4970703125, 	["y"]=-186.681640625, ["z"]= 11.463621139526},
		[22] = {["x"]=370.759765625, 	["y"]=-244.044921875, ["z"]= 11.5348777771},
		[23] = {["x"]=353.9951171875, 	["y"]=-299.5146484375, ["z"]= 11.531694412231},
		[24] = {["x"]=325.36328125, 	["y"]=-325.9189453125, ["z"]= 11.535707473755},
		[25] = {["x"]=324.1962890625, 	["y"]=-332.4013671875, ["z"]= 11.53423500061},
		[26] = {["x"]=431.3662109375, 	["y"]=-361.228515625, ["z"]= 11.015341758728},
		[27] = {["x"]=464.185546875, 	["y"]=-314.63671875, ["z"]= 9.7449102401733},
		[28] = {["x"]=483.3583984375, 	["y"]=-139.6875, ["z"]=9.7394428253174},
		[29] = {["x"]=519.6337890625, 	["y"]=-79.5537109375, ["z"]=10.238880157471},
		[30] = {["x"]=515.2822265625, 	["y"]=-24.8935546875, ["z"]=10.622049331665},
		[31] = {["x"]=510.48046875, 	["y"]=-17.19921875, ["z"]=10.622361183167},
		[32] = {["x"]=503.10546875, 	["y"]=92.62890625, ["z"]=10.861793518066},
		[33] = {["x"]=504.626953125, 	["y"]=220.138671875, ["z"]=10.631502151489},
		[34] = {["x"]=515.76953125, 	["y"]=338.6240234375, ["z"]=10.626695632935},
		[35] = {["x"]=535.5771484375, 	["y"]=437.728515625, ["z"]=10.624719619751},
		[36] = {["x"]=544.486328125, 	["y"]=572.1728515625, ["z"]=10.656328201294},
		[37] = {["x"]=539.84375, 		["y"]=589.8056640625, ["z"]=10.643921852112},
		[38] = {["x"]=551.2109375, 		["y"]=742.1826171875, ["z"]=10.941865921021},
		[39] = {["x"]=549.6396484375, 	["y"]=917.7998046875, ["z"]=15.269828796387},
		[40] = {["x"]=502.97265625, 	["y"]=1077.6533203125, ["z"]=17.443695068359},
		[41] = {["x"]=523.9677734375, 	["y"]=1250.5859375, ["z"]=16.10711479187},
		[42] = {["x"]=459.4658203125, 	["y"]=1289.8349609375, ["z"]=17.181705474854},
		[43] = {["x"]=435.6396484375, 	["y"]=1287.0751953125, ["z"]=16.767009735107},
		[44] = {["x"]=298.228515625, 	["y"]=1286.4833984375, ["z"]=16.949949264526},
		[45] = {["x"]=214.634765625, 	["y"]=1252.5830078125, ["z"]=16.952739715576},
		[46] = {["x"]=278.5380859375, 	["y"]=1194.953125, ["z"]=17.657115936279},
		[47] = {["x"]=272.158203125, 	["y"]=1109.0625, ["z"]=16.791379928589},
		[48] = {["x"]=294.7470703125, 	["y"]=1039.6845703125, ["z"]=12.847757339478},
		[49] = {["x"]=304.125, 			["y"]=1016.634765625, ["z"]=12.639145851135},
		[50] = {["x"]=305.599609375, 	["y"]=862.0146484375, ["z"]=10.655495643616},
		[51] = {["x"]=216.85546875, 	["y"]=726.1796875, ["z"]=10.621254920959},
		[52] = {["x"]=193.1328125, 		["y"]=652.8056640625, ["z"]=10.621515274048},
		[53] = {["x"]=258.3740234375, 	["y"]=666.212890625, ["z"]=10.624775886536},
		[54] = {["x"]=323.0361328125, 	["y"]=664.919921875, ["z"]=10.624810218811},
		[55] = {["x"]=342.4033203125, 	["y"]=666.580078125, ["z"]=10.810967445374},
		[56] = {["x"]=374.9130859375, 	["y"]=649.40625, ["z"]=10.706328392029},
		[57] = {["x"]=369.6689453125, 	["y"]=520.12109375, ["z"]=11.195308685303},
		[58] = {["x"]=329.5087890625, 	["y"]=370.4921875, ["z"]=11.200820922852},
		[59] = {["x"]=336.3720703125, 	["y"]=253.8310546875, ["z"]=10.886775970459},
		[60] = {["x"]=297.3037109375, 	["y"]=248.3076171875, ["z"]=11.112108230591},
		[61] = {["x"]=276.05859375, 	["y"]=247.2607421875, ["z"]=10.626167297363},
		[62] = {["x"]=149.8330078125, 	["y"]=235.314453125, ["z"]=18.860750198364},
		[63] = {["x"]=-38.12890625, 	["y"]=106.8623046875, ["z"]=18.011112213135},
		[64] = {["x"]=-244.8115234375, 	["y"]=57.0908203125, ["z"]=25.908153533936},
		[65] = {["x"]=-589.064453125, 	["y"]=30.4248046875, ["z"]=25.907911300659},
		[66] = {["x"]=-852.481171875, 	["y"]=50.3038515625, ["z"]=8.9340839385986},
		[67] = {["x"]=-870.4482421875, 	["y"]=55.9287109375, ["z"]=8.9295310974121},
		[68] = {["x"]=-935.572265625, 	["y"]=120.6455078125, ["z"]=8.9323329925537},
		[69] = {["x"]=-893.455078125, 	["y"]=188.2958984375, ["z"]=8.9296703338623},
		[70] = {["x"]=-808.1142578125, 	["y"]=206.681640625, ["z"]=9.8264026641846},
		[71] = {["x"]=-751.138671875, 	["y"]=198.4501953125, ["z"]=10.831101417542},
		[72] = {["x"]=-744.2314453125, 	["y"]=170.4599609375, ["z"]=10.64296913147},
		[73] = {["x"]=-749.2958984375, 	["y"]=148.009765625, ["z"]=10.64204120636},
		[74] = {["x"]=-777.8994140625, 	["y"]=33.693359375, ["z"]=10.647372245789},
		[75] = {["x"]=-833.3369140625, 	["y"]=-78.017578125, ["z"]=10.646887779236},
		[76] = {["x"]=-862.810546875, 	["y"]=-188.2392578125, ["z"]=10.627913475037},
		[77] = {["x"]=-863.9306640625, 	["y"]=-267.4794921875, ["z"]=10.632155418396},
		[78] = {["x"]=-870.341015625, 	["y"]=-376.3798828125, ["z"]=10.64880657196},
		[79] = {["x"]=-868.58203125, 	["y"]=-380.1015625, ["z"]=10.641716957092},
		[80] = {["x"]=-856.68359375, 	["y"]=-494.880859375, ["z"]=10.648909568787},
		[81] = {["x"]=-806.033203125, 	["y"]=-515.2978515625, ["z"]=10.907472610474},
		[82] = {["x"]=-647.646484375, 	["y"]=-491.7978515625, ["z"]=10.781964302063},
		[83] = {["x"]=-559.1357421875, 	["y"]=-490.830078125, ["z"]=10.774666786194},
		[84] = {["x"]=-500.12453125, 	["y"]=-495.6423828125, ["z"]=10.767170906067},
		[85] = {["x"]=-476.923828125, 	["y"]=-492.615234375, ["z"]=10.773151397705},
		[86] = {["x"]=-261.7666015625, 	["y"]=-484.234375, ["z"]=10.785853385925},
		[87] = {["x"]=-54.30859375, 	["y"]=-458.1845703125, ["z"]=20.28731918335},
		[88] = {["x"]=137.26953125, 	["y"]=-452.158203125, ["z"]=10.987336158752},
		[89] = {["x"]=178.4189453125, 	["y"]=-465.6728515625, ["z"]=10.609707832336},
		[90] = {["x"]=175.4990234375, 	["y"]=-515.2333984375, ["z"]=10.77278137207},
		[91] = {["x"]=175.3759765625, 	["y"]=-555.9541015625, ["z"]=11.303262710571},
		[92] = {["x"]=171.01171875, 	["y"]=-633.232421875, ["z"]=17.825693130493},
		[93] = {["x"]=152.060546875, 	["y"]=-724.0693359375, ["z"]= 10.036426544189},
		[94] = {["x"]=101.0810546875, 	["y"]=-826.94921875, ["z"]=10.031215667725},
		[95] = {["x"]=45.65625, 		["y"]=-861.9052734375, ["z"]=10.031215667725},
		[96] = {["x"]=-71.4140625, 		["y"]=-876.19921875, ["z"]=10.032964706421},
		[97] = {["x"]=-70.728515625, 	["y"]=-878.41015625, ["z"]=10.031380653381},
		[98] = {["x"]=-106.2646484375, 	["y"]=-910.146484375, ["z"]=10.043213844299},
		[99] = {["x"]=-78.57421875, 	["y"]=-1045.8369140625, ["z"]=10.037419319153},
		[100] = {["x"]=-86.8212890625, 	["y"]=-1076.9794921875, ["z"]=10.024244308472},
		[101] = {["x"]=-146.935546875, 	["y"]=-1090.6044921875, ["z"]=10.02019405365},
		[102] = {["x"]=-200.3046875, 	["y"]=-1123.923828125, ["z"]=10.031179428101},
		[103] = {["x"]=-202.55859375, 	["y"]=-1144.12890625, ["z"]=10.031101226807},
		[104] = {["x"]=-202.9345703125, ["y"]=-1247.384765625, ["z"]=10.031303405762},
		[105] = {["x"]=-195.529296875, 	["y"]=-1332.1259765625, ["z"]=10.03121471405},
		[106] = {["x"]=-169.240234375, 	["y"]=-1419.119140625, ["z"]=10.031216621399},
		[107] = {["x"]=-151.3896484375, ["y"]=-1465.7236328125, ["z"]=10.031847953796},
		[108] = {["x"]=-137.7265625, 	["y"]=-1498.90234375, ["z"]=10.031181335449},
		[109] = {["x"]=-129.607421875, 	["y"]=-1509.3134765625, ["z"]=10.031111717224},
		[110] = {["x"]=-61.87109375, 	["y"]=-1572.54296875, ["z"]=9.9996633529663},
		[111] = {["x"]=-42.2958984375, 	["y"]=-1539.689453125, ["z"]=9.999340057373},
		[112] = {["x"]=-29.9228515625, 	["y"]=-1400.8681640625, ["z"]=10.033174514771},
		[113] = {["x"]=-23.615234375, 	["y"]=-1303.69921875, ["z"]=10.03782749176},
		[114] = {["x"]=-28.4091796875, 	["y"]=-1212.341796875, ["z"]=10.037660598755},
		[115] = {["x"]=-36.2626953125, 	["y"]=-1191.1640625, ["z"]=10.032312393188},
		[116] = {["x"]=-62.873046875, 	["y"]=-1057.9404296875, ["z"]=10.037678718567},
		[117] = {["x"]=-53.9736328125, 	["y"]=-1032.8828125, ["z"]=10.037182807922},
		[118] = {["x"]=39.04296875, 	["y"]=-1035.556640625, ["z"]=10.03058719635},
		[119] = {["x"]=47.6513671875, 	["y"]=-1000.81640625, ["z"]=10.184510231018}
	},
	[2] = 
	{
		[1] = 		{["x"]=-792.8134765625, 	["y"]= 561.0009765625, ["z"]= 10.449148178101},
		[2] = 		{["x"]=-701.66796875, 		["y"]= 551.4072265625, ["z"]= 10.459411621094},
		[3] = 		{["x"]=-699.603515625, 		["y"]= 445.9384765625, ["z"]= 10.450269699097},
		[4] = 		{["x"]=-717.4912109375, 	["y"]= 303.591796875, ["z"]= 10.450839996338},
		[5] = 		{["x"]=-765.0390625, ["y"]= 69.951171875, ["z"]= 10.449323654175},
		[6] = 		{["x"]=-869.3671875, ["y"]= -377.7109375, ["z"]= 10.452890396118 },
		[7] = 		{["x"]=-868.3046875, ["y"]= -401.142578125, ["z"]= 10.445757865906},
		[8] = 		{["x"]=-836.9853515625, ["y"]= -635.7412109375, ["z"]= 10.452080726624},
		[9] = 		{["x"]=-879.3076171875, ["y"]= -651.2421875, ["z"]= 10.639442443848},
		[10] =		{["x"]=-1127.6171875, ["y"]= -684.4404296875, ["z"]= 11.161047935486},
		[11] =		{["x"]=-1133.646484375, ["y"]= -726.65234375, ["z"]= 11.242699623108},
		[12] =		{["x"]=-1073.5390625, ["y"]= -866.8310546875, ["z"]= 13.128902435303 },
		[13] =		{["x"]=-1033.3681640625, ["y"]= -910.2373046875, ["z"]= 13.578476905823},
		[14] =		{["x"]=-915.390625, ["y"]= -1062.5234375, ["z"]= 14.23418712616},
		[15] =		{["x"]=-1017.216796875, ["y"]= -1074.5380859375, ["z"]= 14.224704742432},
		[16] =		{["x"]=-1178.962890625, ["y"]= -1074.2255859375, ["z"]= 14.233696937561},
		[17] =		{["x"]=-1199.42578125, ["y"]= -843.728515625, ["z"]= 14.221113204956},
		[18] =		{["x"]=-1253.654296875, ["y"]= -728.0869140625, ["z"]= 14.217726707458 },
		[19] =		{["x"]=-1255.556640625, ["y"]= -711.658203125, ["z"]= 14.218376159668},
		[20] =		{["x"]=-1301.1923828125, ["y"]= -688.59765625, ["z"]= 14.219317436218},
		[21] =		{["x"]=-1503.70703125, ["y"]= -688.3828125, ["z"]= 14.22061920166},
		[22] =		{["x"]=-1533.0634765625, ["y"]= -735.572265625, ["z"]= 14.213614463806},
		[23] =		{["x"]=-1506.0556640625, ["y"]= -785.166015625, ["z"]= 14.220132827759},
		[24] =		{["x"]=-1436.81640625, ["y"]= -787.2607421875, ["z"]= 14.235238075256 },
		[25] =		{["x"]=-1418.8798828125, ["y"]= -785.775390625, ["z"]= 14.22939491272},
		[26] =		{["x"]=-1226.0498046875, ["y"]= -785.59375, ["z"]= 14.219906806946},
		[27] =		{["x"]=-1204.345703125, ["y"]= -923.3662109375, ["z"]= 14.220977783203},
		[28] =		{["x"]=-1202.6337890625, ["y"]= -1059.4423828125, ["z"]= 14.206654548645},
		[29] =		{["x"]=-1027.9365234375, ["y"]= -1079.4501953125, ["z"]= 14.224625587463},
		[30] =		{["x"]=-965.0341796875, ["y"]= -1080.1115625, ["z"]= 14.222358703613 },
		[31] =		{["x"]=-920.607421875, ["y"]= -1079.1455078125, ["z"]= 14.222434997559},
		[32] =		{["x"]=-900.9951171875, ["y"]= -1124.39453125, ["z"]= 13.671506881714},
		[33] =		{["x"]=-933.4287109375, ["y"]= -1268.3759765625, ["z"]= 11.406661987305},
		[34] =		{["x"]=-986.6640625, ["y"]= -1395.8173828125, ["z"]= 11.140696525574},
		[35] =		{["x"]=-934.6865234375, ["y"]= -1433.236328125, ["z"]= 11.295182228088},
		[36] =		{["x"]=-879.0869140625, ["y"]= -1457.71484375, ["z"]= 11.29834651947 },
		[37] =		{["x"]=-863.1767578125, ["y"]= -1462.8701171875, ["z"]= 11.291675567627},
		[38] =		{["x"]=-761.62890625, ["y"]= -1494.1884765625, ["z"]= 10.78121471405},
		[39] =		{["x"]=-707.2529296875, ["y"]= -1488.2919921875, ["z"]= 10.781024932861},
		[40] =		{["x"]=-685.4580078125, ["y"]= -1410.908203125, ["z"]= 10.431493759155},
		[41] =		{["x"]=-711.9931640625, ["y"]= -1302.4970703125, ["z"]= 10.432308197021},
		[42] =		{["x"]=-743.0716015625, ["y"]= -1227.240234375, ["z"]= 10.429321289063 },
		[43] =		{["x"]=-754.44921875, ["y"]= -1204.0302734375, ["z"]= 10.429061889648},
		[44] =		{["x"]=-801.6474609375, ["y"]= -1044.1748046875, ["z"]= 10.441445350647},
		[45] =		{["x"]=-798.3291015625, ["y"]= -908.3583984375, ["z"]= 10.437063217163},
		[46] =		{["x"]=-824.6083984375, ["y"]= -533.1953125, ["z"]= 10.240825653076},
		[47] =		{["x"]=-733.8330078125, ["y"]= -496.8525390625, ["z"]= 13.065609931946},
		[48] =		{["x"]=-502.7158203125, ["y"]= -495.7119140625, ["z"]= 10.582869529724 },
		[49] =		{["x"]=-488.3955078125, ["y"]= -491.7685546875, ["z"]= 10.57782459259},
		[50] =		{["x"]=-306.640625, ["y"]= -486.7265625, ["z"]= 10.581901550293},
		[51] =		{["x"]=-162.7412109375, ["y"]= -473.8056640625, ["z"]= 11.717217445374},
		[52] =		{["x"]=66.9345703125, ["y"]= -451.4853515625, ["z"]= 10.713399887085},
		[53] =		{["x"]=212.40625, ["y"]= -452.9501953125, ["z"]= 11.250690460205},
		[54] =		{["x"]=259.0244140625, ["y"]= -385.091796875, ["z"]= 11.347105979919},
		[55] =		{["x"]=260.236328125, ["y"]= -382.2109375, ["z"]= 11.343871116638},
		[56] =		{["x"]=338.64453125, ["y"]= -321.9794921875, ["z"]= 11.484057426453},
		[57] =		{["x"]=369.4951171875, ["y"]= -225.087890625, ["z"]= 11.339159011841},
		[58] =		{["x"]=283.048828125, ["y"]= -177.5712890625, ["z"]= 10.914657592773},
		[59] =		{["x"]=254.326171875, ["y"]= -215.076171875, ["z"]= 10.42918586731},
		[60] =		{["x"]=217.005859375, ["y"]= -283.4521484375, ["z"]= 11.824463844299 },
		[61] =		{["x"]=213.6416015625, ["y"]= -298.9794921875, ["z"]= 11.997485160828},
		[62] =		{["x"]=181.55078125, ["y"]= -426.603515625, ["z"]= 10.409769058228},
		[63] =		{["x"]=82.337890625, ["y"]= -442.70703125, ["z"]= 10.99720287323},
		[64] =		{["x"]=-146.244140625, ["y"]= -461.19140625, ["z"]= 13.496290206909},
		[65] =		{["x"]=-237.763671875, ["y"]= -472.3271484375, ["z"]= 10.611783027649},
		[66] =		{["x"]=-251.587890625, ["y"]= -417.86328125, ["z"]= 10.705163002014 },
		[67] =		{["x"]=-276.626953125, ["y"]= -384.134765625, ["z"]= 10.693664550781},
		[68] =		{["x"]=-321.1787109375, ["y"]= -356.3271484375, ["z"]= 10.652772903442},
		[69] =		{["x"]=-441.029296875, ["y"]= -352.4609375, ["z"]= 10.621125221252},
		[70] =		{["x"]=-634.873046875, ["y"]= -410.794921875, ["z"]= 10.623157501221},
		[71] =		{["x"]=-646.3115234375, ["y"]= -472.2109375, ["z"]= 10.610920906067},
		[72] =		{["x"]=-661.5107421875, ["y"]= -478.58203125, ["z"]= 10.632915496826 },
		[73] =		{["x"]=-693.42578125, ["y"]= -483.693359375, ["z"]= 10.625884056091},
		[74] =		{["x"]=-821.9052734375, ["y"]= -508.3984375, ["z"]= 10.160326957703},
		[75] =		{["x"]=-841.9248046875, ["y"]= -353.6513671875, ["z"]= 10.430767059326},
		[76] =		{["x"]=-789.2177734375, ["y"]= -38.423828125, ["z"]= 10.428102493286},
		[77] =		{["x"]=-699.599609375, ["y"]= 272.044921875, ["z"]= 10.422160148621},
		[78] =		{["x"]=-672.6953125, ["y"]= 449.3720703125, ["z"]= 10.430849075317 },
		[79] =		{["x"]=-672.392578125, ["y"]= 469.78125, ["z"]= 10.43644618988},
		[80] =		{["x"]=-654.1484375, ["y"]= 632.76171875, ["z"]= 10.432704925537},
		[81] =		{["x"]=-550.3857421875, ["y"]= 667.634765625, ["z"]= 10.436546325684},
		[82] =		{["x"]=-469.248046875, ["y"]= 810.396484375, ["z"]= 10.428298950195},
		[83] =		{["x"]=-354.9501953125, ["y"]= 1082.646484375, ["z"]= 8.7061519622803},
		[84] =		{["x"]=-293.70703125, ["y"]= 1284.16796875, ["z"]= 11.123161315918 },
		[85] =		{["x"]=-297.1728515625, ["y"]= 1296.8759765625, ["z"]= 11.12511920929},
		[86] =		{["x"]=-408.9619140625, ["y"]= 1349.7490234375, ["z"]= 11.125540733337},
		[87] =		{["x"]=-576.3837890625, ["y"]= 1334.8388671875, ["z"]= 11.12547492981},
		[88] =		{["x"]=-761.916015625, ["y"]= 1316.552734375, ["z"]= 11.113024711609},
		[89] =		{["x"]=-777.33984375, ["y"]= 1363.822265625, ["z"]= 11.121388435364},
		[90] =		{["x"]=-829.8544921875, ["y"]= 1380.9580078125, ["z"]= 10.945820808411 },
		[91] =		{["x"]=-848.3154296875, ["y"]= 1377.8095703125, ["z"]= 10.938045501709},
		[92] =		{["x"]=-939.6416015625, ["y"]= 1374.3798828125, ["z"]= 10.134019851685},
		[93] =		{["x"]=-1000.673828125, ["y"]= 1381.837890625, ["z"]= 9.3200426101685},
		[94] =		{["x"]=-1032.3115234375, ["y"]= 1418.7841796875, ["z"]= 8.2079219818115},
		[95] =		{["x"]=-1046.548828125, ["y"]= 1394.982421875, ["z"]= 8.1995143890381},
		[96] =		{["x"]=-1048.7345703125, ["y"]= 1334.7841796875, ["z"]= 8.1996946334839 },
		[97] =		{["x"]=-1047.0849609375, ["y"]= 1326.60546875, ["z"]= 8.1904487609863},
		[98] =		{["x"]=-1039.6943359375, ["y"]= 1246.41015625, ["z"]= 8.1923551559448},
		[99] =		{["x"]=-1002.4013671875, ["y"]= 1285.8603515625, ["z"]= 9.3329420089722},
		[100] =		{["x"]=-940.1513671875, ["y"]= 1300.4736328125, ["z"]= 10.723773002625},
		[101] =		{["x"]=-870.2509765625, ["y"]= 1291.6015625, ["z"]= 10.763916969299},
		[102] =		{["x"]=-864.4111328125, ["y"]= 1208.7607421875, ["z"]= 10.746344566345 },
		[103] =		{["x"]=-861.5400390625, ["y"]= 1192.142578125, ["z"]= 10.747491836548},
		[104] =		{["x"]=-868.7333984375, ["y"]= 1080.0751953125, ["z"]= 10.443130493164},
		[105] =		{["x"]=-875.1611328125, ["y"]= 821.3193359375, ["z"]= 10.439335823059},
		[106] =		{["x"]=-780.2763671875, ["y"]= 752.4375, ["z"]= 10.443333625793},
		[107] =		{["x"]=-688.880859375, ["y"]= 746.158203125, ["z"]= 10.442049026489},
		[108] =		{["x"]=-679.0244140625, ["y"]= 679.642578125, ["z"]= 10.438767433167 },
		[109] =		{["x"]=-679.1474609375, ["y"]= 664.2041015625, ["z"]= 10.44668006897},
		[110] =		{["x"]=-685.5068359375, ["y"]= 588.197265625, ["z"]= 10.44997882843},
		[111] =		{["x"]=-712.6826171875, ["y"]= 568.599609375, ["z"]= 10.453676223755},
		[112] =		{["x"]=-754.8642578125, ["y"]= 566.580078125, ["z"]= 10.453708648682},
		[113] =		{["x"]=-819.517578125, ["y"]= 571.7607421875, ["z"]= 10.453722953796}
	}
}

local FactionName = 
{
	[1] = {[1]="La Cosa Nostra", [2]="La Cosa Nostra"},
	[2] = {[1]="Colombian Mafia", [2]="Colombian Mafia"},
	[3] = {[1]="Mexican cartel", [2]="Mexican cartel"},
	[4] = {[1]="Triada", [2]="Triada"},
	[5] = {[1]="City Hall of Vice", [2]="[City Hall]"},
	[6] = {[1]="Vice News", [2]="[Vice News]"},
	[7] = {[1]="Vice City Hospital", [2]="[EMS]"},
	[8] = {[1]="Vice City Police Department", [2]="[Police]"},
	[9]	= {[1]="Vice City Army", [2]="[Army]"}
}

local FactionRankName = 
{
	[1] = {[1]="Новицио", 		[2]="Ассосиато", 			[3]="Сомбаттенте", 		[4]="Cолдато", 		[5]="Боец", 				[6]="Сотто-Капо", 		[7]="Капо", 			[8]="Младший Босс", 	[9]="Консильере", 			[10]="Дон"			},
	[2] = {[1]="Гринго", 		[2]="Экстрано", 			[3]="Новато", 			[4]="Ординарто", 	[5]="Компробадо", 			[6]="Латино", 			[7]="Амиго", 			[8]="Солдато", 			[9]="Падро", 				[10]="Санто-падро"	},
	[3] = {[1]="Информатор", 	[2]="Килла", 				[3]="Соколы", 			[4]="Кобры", 		[5]="Новые Лос Сетас", 		[6]="Старейшие Кобры", 	[7]="Старые Сетас", 	[8]="Скорпион", 		[9]="Правая рука", 			[10]="Лидер картеля"},
	[4] = {[1]="Ксинрен", 		[2]="Жай", 					[3]="Си Ку Жай", 		[4]="Кван", 		[5]="Жингян", 				[6]="Хунч Кван", 		[7]="Шу Хай", 			[8]="ЧиЧанг Джа", 		[9]="Синг Фу", 				[10]="Лунг Тао"		},
	[5] = {[1]="Водитель", 		[2]="Охранник", 			[3]="Нач. Охраны", 		[4]="Секретарь", 	[5]="Ген. Прокурор", 		[6]="Советник по НБ", 	[7]="Лицензер", 		[8]="Советник по МЗ", 	[9]="Вице-губернатор", 		[10]="Губернатор"	},
	[6] = {[1]="Стажер", 		[2]="Пом. редакции", 		[3]="Техник", 			[4]="Репортер", 	[5]="Оператор", 			[6]="Ведущий", 			[7]="Режиссёр", 		[8]="Редактор", 		[9]="Главный редактор", 	[10]="Директор"		},
	[7] = {[1]="Интерн", 		[2]="Фельдшер", 			[3]="Участковый врач", 	[4]="Терапевт", 	[5]="Проктолог", 			[6]="Окулист", 			[7]="Хирург", 			[8]="Зав. отделением", 	[9]="Заместитель ГВ", 		[10]="Глав. врач"	},
	[8] = {[1]="Кадет", 		[2]="Офицер", 				[3]="Стар. Офицер", 	[4]="Сержант", 		[5]="Лейтенант", 			[6]="Капитан", 			[7]="Коммандер", 		[8]="Майор", 			[9]="Зам. начальника", 		[10]="Шериф"		},
	[9]	= {[1]="Рекрут",		[2]="Капрал",				[3]="Сержант",			[4]="Сержант-майор",[5]="Лейтенант",			[6]="Первый Лейтенант",	[7]="Капитан", 			[8]="Майор",			[9]="Полковник",			[10]="Генерал"		}
}

local FuelStation = 
{
	[1] = 	{["x"]=57.70703125, 		["y"]=-1075.2431640625, ["z"]=10.571338653564, 	["Zp"] = 1},
	[2] = 	{["x"]=39.0263671875, 		["y"]=-1058.6845703125, ["z"]=10.571255683899, 	["Zp"] = 1},
	[3] = 	{["x"]=-870.9267578125, 	["y"]=-581.7626953125, 	["z"]=10.639800071716, 	["Zp"] = 2},
	[4] = 	{["x"]=-862.0224609375, 	["y"]=-561.1953125, 	["z"]=10.641886711121,	["Zp"] = 2},
	[5] = 	{["x"]=-1610.2529296875, 	["y"]=-715.4169921875, 	["z"]=14.821483612061,	["Zp"] = 3},
	[6] = 	{["x"]=74.9814453125, 		["y"]=970.59765625, 	["z"]=10.805155754089,	["Zp"] = 4},
	[7]	= 	{["x"]=53.5078125, 			["y"]=961.4375, 		["z"]=10.805155754089,	["Zp"] = 4},
	[8] = 	{["x"]=-954.3662109375, 	["y"]=1337.3115234375, 	["z"]=10.722260475159,	["Zp"] = 5},
	[9] = 	{["x"]=-743.833984375, 		["y"]=-1357.6025390625, ["z"]=10.908172607422,	["Zp"] = 6},
	[10] = 	{["x"]=-712.5517578125, 	["y"]=-1355.673828125, 	["z"]=10.807598114014,	["Zp"] = 6},
	[11] = 	{["x"]=198.544921875, 		["y"]=-498.8154296875, 	["z"]=11.53725528717, 	["Zp"] = 7}
}


local AnimList = 
{
	[0] = {["Block"]="DANCING", 		["Anim"]="dnce_m_a"			},
	[1] = {["Block"]="DANCING", 		["Anim"]="dnce_m_b"			},
	[2] = {["Block"]="DANCING", 		["Anim"]="dnce_m_c"			},
	[3] = {["Block"]="DANCING", 		["Anim"]="dnce_m_d"			},
	[4] = {["Block"]="DANCING", 		["Anim"]="dnce_m_e"			},
	[5] = {["Block"]="DANCING", 		["Anim"]="dan_left_a"		},
	[6] = {["Block"]="on_lookers", 		["Anim"]="wave_loop"		},
	[7] = {["Block"]="beach", 			["Anim"]="bather"			},
	[8] = {["Block"]="ped", 			["Anim"]="walk_drunk"		},
	[9] = {["Block"]="ped", 			["Anim"]="crouch_roll_l"	},
	[10] = {["Block"]="ped", 			["Anim"]="endchat_03"		},
	[11] = {["Block"]="benchpress", 	["Anim"]="gym_bp_celebrate"	},
	[12] = {["Block"]="ped", 			["Anim"]="cower"			},
	[13] = {["Block"]="bomber", 		["Anim"]="bom_plant"		},
	[14] = {["Block"]="shop", 			["Anim"]="rob_shifty"		},
	[15] = {["Block"]="shop", 			["Anim"]="rob_loop_threat"	},
	[16] = {["Block"]="cop_ambient", 	["Anim"]="coplook_loop"		},
	[17] = {["Block"]="food", 			["Anim"]="eat_vomit_p"		},
	[18] = {["Block"]="food", 			["Anim"]="eat_burger"		},
	[19] = {["Block"]="sweet", 			["Anim"]="sweet_ass_slap"	},
	[20] = {["Block"]="dealer", 		["Anim"]="dealer_deal"		},
	[21] = {["Block"]="crack", 			["Anim"]="crckdeth2"		},
	[22] = {["Block"]="lowrider", 		["Anim"]="m_smklean_loop"	},
	[23] = {["Block"]="lowrider", 		["Anim"]="f_smklean_loop"	},
	[24] = {["Block"]="beach", 			["Anim"]="parksit_m_loop"	},
	[25] = {["Block"]="park", 			["Anim"]="tai_chi_loop"		},
	[26] = {["Block"]="bar", 			["Anim"]="dnk_stndf_loop"	},
	[27] = {["Block"]="dancing", 		["Anim"]="dan_right_a"		},
	[28] = {["Block"]="bsktball", 		["Anim"]="bball_def_loop"	},
	[29] = {["Block"]="misc", 			["Anim"]="plyr_shkhead"		},
	[30] = {["Block"]="bsktball", 		["Anim"]="bball_idle"		}
}

local CarInfo =
{
    [1] =   { ["ID"] = 492,  ["GosPrice"]=6500,		["Name"]="Ford Crown Victoria LTD"     	},
    [2] =   { ["ID"] = 496,  ["GosPrice"]=37000,	["Name"]="Renault Megane RS 275"        },
    [3] =   { ["ID"] = 481,  ["GosPrice"]=450, 		["Name"]="BMX"              			},
    [4] =   { ["ID"] = 402,  ["GosPrice"]=57200,    ["Name"]="Dodge Challenger Hellcat"     },
    [5] =   { ["ID"] = 541,  ["GosPrice"]=35000,    ["Name"]="BMW E36 M3"           		},
    [6] =   { ["ID"] = 415,  ["GosPrice"]=175995,   ["Name"]="Ferrari Testarossa"           },
    [7] =   { ["ID"] = 562,  ["GosPrice"]=9100,    	["Name"]="Nissan 240SX SE"              },
    [8] =   { ["ID"] = 545,  ["GosPrice"]=4800,		["Name"]="Chevrolet Master Sedan"       },
    [9] =   { ["ID"] = 411,  ["GosPrice"]=39800,    ["Name"]="Honda Acura NSX"              },
    [10] =  { ["ID"] = 551,  ["GosPrice"]=145700,   ["Name"]="Maserati Ghibli"      		},
    [11] =  { ["ID"] = 500,  ["GosPrice"]=27900,    ["Name"]="Jeep Wrangler"        		},
    [12] =  { ["ID"] = 405,  ["GosPrice"]=8200,     ["Name"]="Toyota Mark II"               },
    [13] =  { ["ID"] = 580,  ["GosPrice"]=180000,   ["Name"]="Rolls-Royce Phantom"       	},
    [14] =  { ["ID"] = 560,  ["GosPrice"]=12400,    ["Name"]="Mitsubishi Lancer IX"         },
    [15] =  { ["ID"] = 547,  ["GosPrice"]=9200,     ["Name"]="Subaru Legacy RS"             },
    [16] =  { ["ID"] = 540,  ["GosPrice"]=24200,    ["Name"]="Volkswagen Jetta"       		},
    [17] =  { ["ID"] = 554,  ["GosPrice"]=106000,   ["Name"]="Ford F-150"             		},
    [18] =  { ["ID"] = 477,  ["GosPrice"]=31800,    ["Name"]="Mazda RX-7"              		},
    [19] =  { ["ID"] = 445,  ["GosPrice"]=21600,    ["Name"]="Mercedes Benz 200D"           },
    [20] =  { ["ID"] = 579,  ["GosPrice"]=134000,   ["Name"]="Range Rover SVAutobiography"  },
    [21] =  { ["ID"] = 565,  ["GosPrice"]=13000,    ["Name"]="Honda Civic Type R Series"    },
    [22] =  { ["ID"] = 516,  ["GosPrice"]=20700,    ["Name"]="Volkswagen Passat B5.5"       },
    [23] =  { ["ID"] = 603,  ["GosPrice"]=39000,    ["Name"]="Ford Mustang MACH 1"  		},
    [24] =  { ["ID"] = 439,  ["GosPrice"]=52590,    ["Name"]="Chevrolet Camaro SS"          },
    [25] =  { ["ID"] = 555,  ["GosPrice"]=65500,    ["Name"]="Nissan Skyline 2000 GT-R"     },
    [26] =  { ["ID"] = 527,  ["GosPrice"]=9300,     ["Name"]="Honda Civic Gen 3"          	},
    [27] =  { ["ID"] = 507,  ["GosPrice"]=8700,     ["Name"]="Lexus LS400"          		},
    [28] =  { ["ID"] = 587,  ["GosPrice"]=40000,    ["Name"]="Chevrolet Camaro IROC-Z"      },
    [29] =  { ["ID"] = 526,  ["GosPrice"]=30000,    ["Name"]="Toyota Celica"          		},
    [30] =  { ["ID"] = 546,  ["GosPrice"]=41600,    ["Name"]="Ford Mondeo"          		},
    [31] =  { ["ID"] = 508,  ["GosPrice"]=48000,    ["Name"]="Ford F-4000 Motorhome"        },
    [32] =  { ["ID"] = 410,  ["GosPrice"]=16000,    ["Name"]="Smart Fortwo Electri."        },
    [33] =  { ["ID"] = 467,  ["GosPrice"]=12600,    ["Name"]="BMW M5 E28"          			},
    [34] =  { ["ID"] = 413,  ["GosPrice"]=18000,    ["Name"]="Ford E 250"          			},
    [35] =  { ["ID"] = 426,  ["GosPrice"]=8800,     ["Name"]="Ford Crown Victoria"          },
    [36] =  { ["ID"] = 436,  ["GosPrice"]=24000,    ["Name"]="Nissan Skyline GT-R R33"      },
    [37] =  { ["ID"] = 489,  ["GosPrice"]=295000,   ["Name"]="Brabus B11 2008"          	},
    [38] =  { ["ID"] = 440,  ["GosPrice"]=7300,     ["Name"]="Toyota Transit"          		},
    [39] =  { ["ID"] = 475,  ["GosPrice"]=44000,    ["Name"]="Chevrolet Chevelle"          	},
    [40] =  { ["ID"] = 495,  ["GosPrice"]=19900,    ["Name"]="Nissan Frontier"          	},
    [41] =  { ["ID"] = 561,  ["GosPrice"]=64000,    ["Name"]="Audi S4"          			},
    [42] =  { ["ID"] = 576,  ["GosPrice"]=61000,    ["Name"]="Dodge Charger"         		},
    [43] =  { ["ID"] = 451,  ["GosPrice"]=310000,   ["Name"]="Lamborghini Aventador"  		},
    [44] =  { ["ID"] = 558,  ["GosPrice"]=100000,   ["Name"]="Porsche 718 Cayman S"         }
}		

function isEventHandlerAdded( sEventName, pElementAttachedTo, func )
	if 
		type( sEventName ) == 'string' and 
		isElement( pElementAttachedTo ) and 
		type( func ) == 'function' 
	then
		local aAttachedFunctions = getEventHandlers( sEventName, pElementAttachedTo )
		if type( aAttachedFunctions ) == 'table' and #aAttachedFunctions > 0 then
			for i, v in ipairs( aAttachedFunctions ) do
				if v == func then
					return true
				end
			end
		end
	end
	return false
end

function rentMenu( hit, dim )
	if(hit ~= nil) then
		if(getElementType(hit) == "player") then
			if(getElementData(hit, "Login") == true) then
				local veh = getPedOccupiedVehicle(hit)
				if(veh == false or veh == nil) then
					showPlayerDialog(hit, 100, 1, "Аренда велосипеда", "Действительно ли Вы хотите арендовать велосипед?\nСтоимость аренда велосипеда: 50$\nЕсли в течение 5 минут за рулем велосипеда никого не будет,\nОн будет отправлен обратно на парковку.", "Да", "Нет")
				end
			end
		end
	end
end

function rentMenus( hit, dim )
	if(hit ~= nil) then
		if(getElementType(hit) == "player") then
			if(getElementData(hit, "Login") == true) then
				local veh = getPedOccupiedVehicle(hit)
				if(veh == false or veh == nil) then
					showPlayerDialog(hit, 101, 1, "Аренда велосипеда", "Действительно ли Вы хотите арендовать велосипед?\nСтоимость аренда велосипеда: 50$\nЕсли в течение 5 минут за рулем велосипеда никого не будет,\nОн будет отправлен обратно на парковку.", "Да", "Нет")
				end
			end
		end
	end
end

local BusVehTable 	= 	{}
local afd = getRealTime()
local payDay = afd.hour
local kickt = {}
local exitFromHouse = {}
spawnX, spawnY, spawnZ = -1392.142578125, -877.5107421875, 20.86149597168 
local pckBusinessExit = {}
local pckFuelStation = {}
local pckAsh = createPickup(263.6533203125, -112.3076171875, 1117.6081542969, 3, 1239, 0)
create3dtextlabel(263.6533203125, -112.3076171875, 1116.6081542969, "ПДД")
local workLoaderJob = createPickup(-682.1318359375, -1326.19921875, 11.029188156128, 3, 1275, 0)
local workBuilderJob = createPickup(279.31640625, -270.7236328125, 12.428287506104, 3, 1275, 0)
local weaponPoliceDep = createPickup(401.8701171875, -492.0556640625, 10.829787254333, 3, 348, 0)
local skinPoliceDep = createPickup(395.2646484375, -486.423828125, 10.829787254333, 3, 1275, 0)
local skinVCNews = createPickup(-518.4853515625, 775.431640625, 97.470069885254, 3, 1275, 0)
local skinVCHosp = createPickup(-138.19140625, -981.439453125, 10.42510509491, 3, 1275, 0)
local enterMer = createPickup(-347.45703125, 1291.7314453125, 12.453685760498, 3, 1318, 0)
local exitMer = createPickup(390.27734375, 173.69140625, 1008.3828125, 3, 1318, 0)
local mrkWorkMer = createMarker(369.966796875, 188.02734375, 1007.3893432617, "cylinder", 1.8, 220, 0, 0, 220, getRootElement())
local pckMerPass = createPickup(362.6923828125, 173.6318359375, 1008.3828125, 3, 1314, 0)
local workMail = createPickup(294.900390625, -297.62109375, 11.91587638855, 3, 1275, 0)
local enterAsh = createPickup(87.93359375, -804.25390625, 11.690776824951, 3, 1318, 0)
local exitAsh = createPickup(249.9130859375, -95.099609375, 1117.6081542969, 3, 1318, 0)
local pckFisherWork = createPickup(-664.9169921875, -1484.35546875, 13.769412994385, 3, 1275, 0)
local mrkAsh = createMarker(257.1533203125, -90.431640625, 1116.6081542969, "cylinder", 1.2, 220, 0, 0, 220, getRootElement())
local pckVCNEnter = createPickup(-507.5078125, 776.8779296875, 12.401481628418, 3, 1318, 0)
local pckVCNExit = createPickup(-548.53515625, 767.908203125, 97.470069885254, 3, 1318, 0)
local pckPoliceEnter = createPickup(509.181640625, 514.0771484375, 12.067852973938, 3, 1318, 0)
local pckPoliceExit = createPickup(396.0791015625, -473.4296875, 12.30421257019, 3, 1318, 0)
local pckSkinArmy	= createPickup(-1680.6318359375, -137.9814453125, 14.827548980713, 3, 1275, 0)
local mrkWeaponArmy = createMarker(-1634.0888671875, -138.0458984375, 13.827548980713, "cylinder", 1.6, 255, 0, 0, 220, getRootElement())
local pckSkinMaf1	= createPickup(296.8369140625, 288.4462890625, 17.680118560791, 3, 1275, 0)
local mrkWeaponMaf1 = createMarker(296.759765625, 292.1943359375, 16.683687210083, "cylinder", 1.6, 255, 0, 0, 220, getRootElement())
local pckSkinMaf2 = createPickup(-1061.62109375, -244.6171875, 12.054634094238, 3, 1275, 0)
local mrkWeaponMaf2 = createMarker(-1062.412109375, -261.767578125, 11.05069732666, "cylinder", 1.6, 255, 0, 0, 220, getRootElement())
local pckSkinMaf3 = createPickup(-1104.1162109375, 352.6572265625, 11.600259780884, 3, 1275, 0)
local mrkWeaponMaf3 = createMarker(-1097.42578125, 348.29296875, 10.441266059875, "cylinder", 1.6, 255, 0, 0, 220, getRootElement())
local pckSkinMaf4 = createPickup(-124.05078125, -1376.7724609375, 10.419187545776, 3, 1275, 0)
local mrkWeaponMaf4 = createMarker(-122.9443359375, -1391.744140625, 9.419187545776, "cylinder", 1.6, 255, 0, 0, 220, getRootElement())
local mrkBuyCar = createMarker(-1037.236328125, -846.498046875, 12.045195579529, "cylinder", 1.4, 220, 0, 0, 220, getRootElement())
local mrkSkinShop = createMarker(421.66015625, 1025.3154296875, 17.926605224609, "cylinder", 1.4, 220, 0, 0, 220, getRootElement())
local mrkRentVeh = {}
mrkRentVeh[1] = createMarker(16.77046875, -1199.2763671875, 9.434156417847, "cylinder", 1.4, 220, 0, 0, 220, getRootElement())
mrkRentVeh[2] = createMarker(-1182.0537109375, -923.833984375, 13.826175689697, "cylinder", 1.4, 220, 0, 0, 220, getRootElement())
create3dtextlabel(16.77046875, -1199.2763671875, 10.934156417847, "Аренда велосипеда")
create3dtextlabel(-1182.0537109375, -923.833984375, 15.226175689697, "Аренда велосипеда")
addEventHandler("onMarkerHit", mrkRentVeh[1], rentMenus)
addEventHandler("onMarkerHit", mrkRentVeh[2], rentMenu)
pckFuelStation[1] = createPickup(47.44140625, -1058.0634765625, 10.423915863037, 3, 1274, 0)
pckFuelStation[2] = createPickup(-860.220703125, -570.5458984375, 11.046189308167, 3, 1274, 0)
pckFuelStation[3] = createPickup(-1618.5029296875, -719.537109375, 14.821483612061, 3, 1274, 0)
pckFuelStation[4] = createPickup(66.2841796875, 969.9111328125, 10.80312538147, 3, 1274, 0)
pckFuelStation[5] = createPickup(-955.095703125, 1328.7998046875, 11.096260070801, 3, 1274, 0)
pckFuelStation[6] = createPickup(-715.2216796875, -1346.1845703125, 11.047629356384, 3, 1274, 0)
pckFuelStation[7] = createPickup(197.8623046875, -488.365234375, 11.16619682312, 3, 1274, 0)

setElementInterior(pckAsh, 5)
setElementInterior(weaponPoliceDep, 2)
setElementInterior(skinPoliceDep, 2)
setElementInterior(pckPoliceExit, 2)
setElementInterior(exitAsh, 5)
setElementInterior(pckMerPass, 3)
setElementInterior(mrkWorkMer, 3)
setElementInterior(exitMer, 3)
setElementInterior(mrkAsh, 5)

local PhoneNumbers		=	{}
local CourierVehTable 	= 	{}
local NameTable 		= 	{}
local PINTERVAL			= 	{}
local AdvertTable 		=	{} 
local TaxiVehTable 		= 	{}
local TINTERVAL 		= 	{}
local GPST 				= 	{}
local PrivateCar 		= 	{}
local AshCar			= 	{}
local Server 			= 	{}
local ArmyCar 			=	{}
local MedicCar			= 	{}
local VCNCar 			= 	{}
local PoliceCar			= 	{}
local MerCar			=	{}
local Maf1Car			=	{}
local Maf2Car			=	{}
local Maf3Car			=	{}
local Maf4Car			=	{}
local ArmyVeh			=	{}
local maxPhoneNumber 	=	100000
local FishBoat			=	{}

FishBoat[1] = createVeh(453, -599.248046875, -1507.041015625, 5.4499998092651, 0, 0, 250)
FishBoat[2] = createVeh(453, -576.7646484375, -1515.98828125, 5.4499998092651, 0, 0, 250)
FishBoat[3] = createVeh(453, -572.0849609375, -1507.8115234375, 5.4499998092651, 0, 0, 250)
FishBoat[4] = createVeh(453, -593.8662109375, -1497.5810546875, 5.5491027832031, 0, 0, 250)
FishBoat[5] = createVeh(453, -595.5126953125, -1519.446875, 5.4774689674377, 0, 0, 250)
FishBoat[6] = createVeh(453, -582.396484375, -1523.7041015625, 5.5841121673584, 0, 0, 250)
FishBoat[7] = createVeh(453, -583.8662109375, -1490.35546875, 5.4499998092651, 0, 0, 250)
FishBoat[8] = createVeh(453, -570.537109375, -1496.3486328125, 5.5957818031311, 0, 0, 250)

pckFreeEat[1] = createPickup(-169.2421875, -1160.5537109375, 13.445375442505, 3, 7510, 0) --shotel
pckFreeEat[2] = createPickup(-1437.2392578125, -860.296875, 14.853446960449, 3, 7510, 0) --aero
pckFreeEat[3] = createPickup(-690.4365234375, -1311.9443359375, 11.022104263306, 3, 7510, 0) --gruz
pckFreeEat[4] = createPickup(258.2138671875, -248.6396484375, 11.184450149536, 3, 7510, 0) --builder

ArmyVeh[1] = createVeh(470, -1721.625, -115.986328125, 14.824159622192, 0, 0, 270)
ArmyVeh[2] = createVeh(470, -1721.1201171875, -132.462890625, 14.824159622192, 0, 0, 270)
ArmyVeh[3] = createVeh(470, -1721.416015625, -177.359375, 14.827548980713, 0, 0, 270)
ArmyVeh[4] = createVeh(470, -1721.6650390625, -194.0986328125, 14.827548980713, 0, 0, 270)

Maf4Car[1] = createVeh(405, -118.6015625, -1354.930859375, 10.419187545776)
Maf4Car[2] = createVeh(405, -121.92578125, -1354.930859375, 10.419187545776)
Maf4Car[3] = createVeh(405, -125.083984375, -1354.930859375, 10.419187545776)
Maf4Car[4] = createVeh(405, -128.361328125, -1354.930859375, 10.419187545776)
Maf4Car[5] = createVeh(554, -131.552734375, -1354.930859375, 10.419187545776)
Maf4Car[6] = createVeh(554, -134.6767578125, -1354.930859375, 10.426847457886)

Maf3Car[1] = createVeh(405, -1100.416015625, 286.2841796875, 12.217784881592)
Maf3Car[2] = createVeh(405, -1105.6484375, 286.0615234375, 12.217784881592)
Maf3Car[3] = createVeh(405, -1110.7412109375, 286.017578125, 12.217784881592)
Maf3Car[4] = createVeh(405, -1110.25390625, 301.6787109375, 12.217784881592, 0, 0, 180)
Maf3Car[5] = createVeh(554, -1105.373046875, 302.3447265625, 12.217784881592, 0, 0, 180)
Maf3Car[6] = createVeh(554, -1100.5380859375, 301.8701171875, 12.217784881592, 0, 0, 180)

Maf2Car[1] = createVeh(405, -1068.685546875, -172.3525390625, 11.359453201294)
Maf2Car[2] = createVeh(405, -1063.099609375, -172.3681640625, 11.322673797607)
Maf2Car[3] = createVeh(405, -1057.4384765625, -172.5517578125, 11.285978317261)
Maf2Car[4] = createVeh(405, -1051.513671875, -172.7431640625, 11.24426651001)
Maf2Car[5] = createVeh(554, -1046.0361328125, -164.9365234375, 11.224673271179)
Maf2Car[6] = createVeh(554, -1038.9619140625, -164.794921875, 11.246463775635)

Maf1Car[1] = createVeh(405, 307.6220703125, 265.3330078125, 16.171447753906)
Maf1Car[2] = createVeh(405, 298.40625, 299.671875, 16.298547744751)
Maf1Car[3] = createVeh(405, 316.4345703125, 298.58984375, 13.484812736511, 0, 0, 270)
Maf1Car[4] = createVeh(405, 315.697265625, 302.6015625, 13.484812736511, 0, 0, 270)
Maf1Car[5] = createVeh(554, 292.046875, 307.275390625, 13.484812736511, 0, 0, 270)
Maf1Car[6] = createVeh(554, 290.845703125, 314.02734375, 13.484812736511, 0, 0, 270)

MerCar[1] = createVeh(445, -445.265625, 1225.078125, 9.6421871185303)
MerCar[2] = createVeh(445, -451.75, 1225.078125, 9.6421871185303)
MerCar[3] = createVeh(445, -457.85546875, 1225.078125, 9.6421871185303)
MerCar[4] = createVeh(579, -464.220703125, 1225.078125, 9.6421871185303)
MerCar[5] = createVeh(579, -469.6064453125, 1225.078125, 9.6421871185303)
MerCar[6] = createVeh(409, -474.7763671875, 1223.578125, 9.6421871185303)

PoliceCar[1] = createVeh(598, 493.5537109375, 504.3935546875, 11.461351394653)
PoliceCar[2] = createVeh(598, 497.21875, 504.1943359375, 11.41284942627)
PoliceCar[3] = createVeh(598, 503.0458984375, 504.578125, 11.339502334595)
PoliceCar[4] = createVeh(598, 515.71875, 504.212890625, 11.149386405945)
PoliceCar[5] = createVeh(598, 520.5224609375, 504.302734375, 11.04746055603)

VCNCar[1] = createVeh(582, -600.416015625, 780.458984375, 11.556198120117, 0, 0, 270)
VCNCar[2] = createVeh(582, -600.1650390625, 784.0712890625, 11.556198120117, 0, 0, 270)
VCNCar[3] = createVeh(582, -600.2666015625, 801.8095703125, 11.50799369812, 0, 0, 270)
VCNCar[4] = createVeh(582, -600.60546875, 808.607421875, 11.482615470886, 0, 0, 270)

MedicCar[1] = createVeh(416, -120.436953125, -918.5810546875, 10.423469543457, 0, 0, 100)
MedicCar[2] = createVeh(416, -118.4794921875, -924.431640625, 10.423469543457, 0, 0, 100)
MedicCar[3] = createVeh(416, -116.4736328125, -931.447265625, 10.423469543457, 0, 0, 100)
MedicCar[4] = createVeh(416, -115.6015625, -937.4111328125, 10.423469543457, 0, 0, 100)
MedicCar[5] = createVeh(416, -115.0234375, -944.490234375, 10.41622543335, 0, 0, 100)
MedicCar[6] = createVeh(416, -113.69921875, -949.4111328125, 10.41622543335, 0, 0, 100)

CourierVehTable[1] = createVeh(499, -922.5400390625, -1388.8212890625, 11.57614402771, 0, 0, 300)
CourierVehTable[2] = createVeh(499, -933.0087890625, -1386.0751953125, 11.592994689941, 0, 0, 300)
CourierVehTable[3] = createVeh(499, -942.5166015625, -1379.560546875, 11.588871955872, 0, 0, 300)
CourierVehTable[4] = createVeh(499, -953.8642578125, -1374.03515625, 11.642669677734, 0, 0, 300)

ArmyCar[1] = createVeh(433, -1608.607421875, -208.62890625, 14.824159622192, 0, 0, 90)
ArmyCar[2] = createVeh(433, -1608.607421875, -218.62890625, 14.824159622192, 0, 0, 90)
ArmyCar[3] = createVeh(433, -1608.607421875, -228.62890625, 14.824159622192, 0, 0, 90)
ArmyCar[4] = createVeh(433, -1608.607421875, -238.62890625, 14.824159622192, 0, 0, 90)

AshCar[1] = createVeh(546, 79.98046875, -761.611328125, 10.425338745117, 0, 0, 240)
AshCar[2] = createVeh(546, 81.751953125, -756.09375, 10.425338745117, 0, 0, 240)
AshCar[3] = createVeh(546, 83.998046875, -749.4189453125, 10.425338745117, 0, 0, 240)
AshCar[4] = createVeh(546, 87.509765625, -740.841796875, 10.425338745117, 0, 0, 240)
AshCar[5] = createVeh(546, 94.8876953125, -735.4765625, 10.425338745117, 0, 0, 150)
AshCar[6] = createVeh(546, 102.0146484375, -739.62109375, 10.425338745117, 0, 0, 150)
AshCar[7] = createVeh(546, 109.2392578125, -740.1376953125, 10.425338745117, 0, 0, 150)
AshCar[8] = createVeh(546, 114.6123046875, -744.5, 10.425338745117, 0, 0, 65)
AshCar[9] = createVeh(546, 110.73046875, -754.6435546875, 10.425338745117, 0, 0, 65)
AshCar[10] = createVeh(546, 106.806640625, -762.92578125, 10.425338745117, 0, 0, 65)

for i, n in pairs(FishBoat) do
	SED(n, "FishID", i)
end

for i, n in pairs(pckFreeEat) do
	SED(pckFreeEat[i], "FreeEat", i)
end

local query = dbQuery(mysql, "SELECT * FROM `Accounts` ORDER by `PhoneNumber` DESC LIMIT 0,1")
local result = dbPoll(query, -1)

if(result ~= nil) then
	if(result[1] ~= nil) then
		if(result[1]["PhoneNumber"] ~= nil) then
			if(result[1]["PhoneNumber"] > 99999) then
				maxPhoneNumber = result[1]["PhoneNumber"]
			end
		end
	end
end

local result = nil
local query = dbQuery(mysql, "SELECT * FROM `HotelCapture`")
local result = dbPoll(query, -1)

for i, n in pairs(CHT) do
	if(result ~= nil) then
		if(result[i] ~= nil) then
			if(result[i]["ID"] ~= nil) then
				CHT[i]["Mafia"]	= result[i]["Mafia"]
			else
				dbExec(mysql, "INSERT INTO `HotelCapture` (`ID`, `Mafia`) VALUES (?, ?)", i, i)
				CHT[i]["Mafia"]	= i
			end
		else
			dbExec(mysql, "INSERT INTO `HotelCapture` (`ID`, `Mafia`) VALUES (?, ?)", i, i)
			CHT[i]["Mafia"]	= i
		end
	else
		dbExec(mysql, "INSERT INTO `HotelCapture` (`ID`, `Mafia`) VALUES (?, ?)", i, i)
		CHT[i]["Mafia"]	= i
	end
end

for i, n in pairs(ArmyVeh) do
	SED(n, "ArmyVeh", i)
	SED(n, "Fuel", 100)
	setElementHealth(n, 1000)
end

for i, n in pairs(Maf4Car) do
	SED(n, "Maf4Car", i)
	SED(n, "Fuel", 100)
	setElementHealth(n, 1000)
	setVehicleColor(n, 40, 0, 0, 40, 0, 0)
end

for i, n in pairs(Maf3Car) do
	SED(n, "Maf3Car", i)
	SED(n, "Fuel", 100)
	setElementHealth(n, 1000)
	setVehicleColor(n, 0, 50, 60, 0, 50, 60)
end

for i, n in pairs(Maf2Car) do
	SED(n, "Maf2Car", i)
	SED(n, "Fuel", 100)
	setVehicleColor(n, 60, 30, 0, 60, 30, 0)
	setElementRotation(n, 0, 0, 180)
	setElementHealth(n, 1000)
end

for i, n in pairs(Maf1Car) do
	SED(n, "Maf1Car", i)
	SED(n, "Fuel", 100)
	setVehicleColor(n, 30, 0, 50, 30, 0, 50)
	setElementHealth(n, 1000)
end

for i, n in pairs(MerCar) do
	SED(n, "Fuel", 100)
	setElementHealth(n, 1000)
	setVehicleColor(n, 0, 0, 0, 0, 0, 0)
	SED(n, "MerID", i)
end

for i, n in pairs(PoliceCar) do
	SED(n, "PoliceID", i)
	SED(n, "Fuel", 100)
	setElementHealth(n, 1000)
end

for i, n in pairs(VCNCar) do
	SED(n, "VCNCar", i)
	SED(n, "Fuel", 100)
	setElementHealth(n, 1000)
end

for i, n in pairs(MedicCar) do
	SED(n, "MedicID", i)
	SED(n, "Fuel", 100)
	setElementHealth(n, 1000)
end

for i, n in pairs(pckFuelStation) do
	SED(n, "FuelStation", i)
end

for i, veh in pairs(ArmyCar) do
	SED(veh, "ArmyCar", i)
	setElementHealth(veh, 1000)
end

for i, veh in pairs(AshCar) do
	SED(veh, "AshCar", i)
	setElementHealth(veh, 1000)
end

for i, veh in pairs(CourierVehTable) do
	SED(veh, "CourierVehID", i)
	setElementHealth(veh, 1000)
end

for i, player in pairs(getElementsByType("player")) do
	SED(player, "ID", i)
	IDS[getElementData(player, "ID")] = player
	PINTERVAL[getElementData(player, "ID")] = getTickCount()
	TINTERVAL[getElementData(player, "ID")]	= getTickCount()
	setElementDimension(player, tonumber(getElementData(player, "ID")))
end

BusVehTable[1] = createVeh(431, 38,		-1010.1123046875, 10.423542022705)
BusVehTable[2] = createVeh(431, 26,		-1010.1123046875, 10.423542022705)
BusVehTable[3] = createVeh(431, 14,		-1010.1123046875, 10.423542022705)
BusVehTable[4] = createVeh(431, 2, 		-1010.1123046875, 10.423542022705)
BusVehTable[5] = createVeh(431, -10,	-1010.1123046875, 10.423542022705)
BusVehTable[6] = createVeh(431, -22,	-1010.1123046875, 10.423542022705)
BusVehTable[7] = createVeh(431, -34,	-1010.1123046875, 10.423542022705)
BusVehTable[8] = createVeh(431, -46,	-1010.1123046875, 10.423542022705)
BusVehTable[9] = createVeh(431, -868.958984375,		579.33203125, 		10.888244628906, 0, 0, 180)
BusVehTable[10] = createVeh(431, -862.0263671875,	579.33203125, 		10.888244628906, 0, 0, 180)
BusVehTable[11] = createVeh(431, -856.0849609375,	579.33203125, 		10.888244628906, 0, 0, 180)
BusVehTable[12] = createVeh(431, -850.166015625,	579.33203125, 		10.888244628906, 0, 0, 180)
BusVehTable[13] = createVeh(431, -844.6162109375,	579.33203125, 		10.888244628906, 0, 0, 180)
BusVehTable[14] = createVeh(431, -838.583984375,	579.33203125, 		10.888244628906, 0, 0, 180)
BusVehTable[15] = createVeh(431, -832.9453125,		579.33203125, 		10.888244628906, 0, 0, 180)
BusVehTable[16] = createVeh(431, -826.970703125,	579.33203125, 		10.888244628906, 0, 0, 180)
BusVehTable[17] = createVeh(431, -820.314453125,	579.33203125, 		10.888244628906, 0, 0, 180)
BusVehTable[18] = createVeh(431, -815.0654296875, 	552.7021484375, 	10.888244628906)
BusVehTable[19] = createVeh(431, -820.95703125, 	552.658203125, 		10.888244628906)
BusVehTable[20] = createVeh(431, -827.09765625, 	552.1796875, 		10.888244628906)
BusVehTable[21] = createVeh(431, -833.33984375, 	552.1220703125, 	10.888244628906)
BusVehTable[22] = createVeh(431, -838.3671875, 		552.314453125, 		10.888244628906)
BusVehTable[23] = createVeh(431, -844.439453125, 	552.5859375, 		10.888244628906)
BusVehTable[24] = createVeh(431, -850.0439453125, 	552.2373046875, 	10.888244628906)
BusVehTable[25] = createVeh(431, -856.2890625, 		552.45703125, 		10.888244628906)
BusVehTable[26] = createVeh(431, -862.712890625, 	552.1416015625, 	10.888244628906)
BusVehTable[27] = createVeh(431, -868.8046875, 		552.224609375, 		10.888244628906)
BusVehTable[28] = createVeh(431, -874.04296875, 	552.3271484375, 	10.888244628906)

TaxiVehTable[1] = createVeh(438, -205.7587890625, -1472.0361328125, 8.0708332061768, 0, 0, 280)
TaxiVehTable[2] = createVeh(438, -208.16015625, -1459.841796875, 8.0708332061768, 0, 0, 280)
TaxiVehTable[3] = createVeh(438, -211.634765625, -1448.7109375, 8.0708332061768, 0, 0, 280)
TaxiVehTable[4] = createVeh(438, -215.9765625, -1437.12890625, 8.0708332061768, 0, 0, 280)
TaxiVehTable[5] = createVeh(438, -220.2314453125, -1422.74609375, 8.0708332061768, 0, 0, 280)
TaxiVehTable[6] = createVeh(438, -223.640625, -1412.416015625, 8.0708332061768, 0, 0, 280)

MailVeh[1] = createVeh(462, 314.166015625, -315.28515625, 11.922214508057, 0, 0, 70)
MailVeh[2] = createVeh(462, 315.1376953125, -318.9521484375, 11.922214508057, 0, 0, 70)
MailVeh[3] = createVeh(462, 312.8857421875, -324.337890625, 11.922214508057, 0, 0, 70)
MailVeh[4] = createVeh(462, 307.9169921875, -328.619140625, 11.91587638855, 0, 0, 70)
MailVeh[5] = createVeh(462, 304.8154296875, -330.9580078125, 11.91587638855, 0, 0, 70)
MailVeh[6] = createVeh(462, 302.3974609375, -332.78125, 11.91587638855, 0, 0, 70)
MailVeh[7] = createVeh(462, 289.6416015625, -328.4814453125, 11.91587638855, 0, 0, 270)
MailVeh[8] = createVeh(462, 285.6484375, -323.8046875, 11.91587638855, 0, 0, 270)
MailVeh[9] = createVeh(462, 284.244140625, -319.982421875, 11.91587638855, 0, 0, 270)
MailVeh[10] = createVeh(462, 283.3505859375, -316.4794921875, 11.91587638855, 0, 0, 270)

function showRepair( hit, dim )
	if(getElementType(hit) == "player") then
		if(getElementData(hit, "Login") == true) then
			if(getPedOccupiedVehicleSeat(hit) == 0) then
				local veh = getPedOccupiedVehicle(hit)
				if(veh ~= false) then
					SED(hit, "mrkRepair", tonumber(getElementData(source, "mrkRepair")))
					showPlayerDialog(hit, 80, 1, "Починка авто", "Действительно ли Вы хотите отремонтировать Ваш транспорт?\nСтоимость починки составляет 250$", "Принять", "Отмена")
				end
			end
		end
	end
end

for i, n in pairs(mrkRepairVeh) do
	local mrk = createMarker(mrkRepairVeh[i]["x"], mrkRepairVeh[i]["y"], mrkRepairVeh[i]["z"]-1, "cylinder", 2.4, 0, 100, 255, 220, getRootElement())
	create3dtextlabel(mrkRepairVeh[i]["x"], mrkRepairVeh[i]["y"], mrkRepairVeh[i]["z"]-0.5, "[ПОЧИНКА АВТО]")
	addEventHandler("onMarkerHit", mrk, showRepair)
end

for i, veh in pairs(MailVeh) do
	setElementHealth(veh, 1000)
	SED(veh, "MailVeh", i)
	setVehicleColor(veh, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255)
end

for i, veh in pairs(BusVehTable) do
	SED(veh, "BusVehTable", i)
	setElementHealth(veh, 1000)
	if(i <= 8) then
		SED(veh, "BusPark", 1)
	else
		SED(veh, "BusPark", 2)
	end
end

for i, veh in pairs(TaxiVehTable) do
	setElementHealth(veh, 1000)
	SED(veh, "TaxiVehTable", i)
end

local HouseTable = {}
local HQ = dbQuery(mysql, "SELECT * from `House`")
local result = dbPoll(HQ, -1)
local houseit = 0

for i, n in pairs(result) do
	id = tonumber(result[i]["ID"])
	HouseTable[id] = {}
	HouseTable[id]["x"] 			= result[i]["x"]
	HouseTable[id]["y"] 			= result[i]["y"]
	HouseTable[id]["z"] 			= result[i]["z"]
	HouseTable[id]["Price"] 		= result[i]["Price"]
	HouseTable[id]["PID"] 			= result[i]["PID"]
	HouseTable[id]["Interior"] 		= result[i]["Interior"]
	HouseTable[id]["ID"]			= id
	HouseTable[id]["PName"]			= result[i]["PName"]
	HouseTable[id]["PayDay"]		= result[i]["PayDay"]
	if(result[i]["Open"] == 1) then
		HouseTable[id]["Open"]	= true
	else
		HouseTable[id]["Open"]	= false
	end
	if(result[i]["hx"] ~= 0) then
		HouseTable[id]["hx"] = result[i]["hx"]
		HouseTable[id]["hy"] = result[i]["hy"]
		HouseTable[id]["hz"] = result[i]["hz"]
		HouseTable[id]["hrx"] = result[i]["hrx"]
	else
		if(HouseTable[id]["Interior"] == 5) then
			HouseTable[id]["hx"] = 2233.9003
			HouseTable[id]["hy"] = -1114.3300
			HouseTable[id]["hz"] = 1051
			HouseTable[id]["hrx"] = 0
			exitFromHouse[id] = createPickup(2227.0791015625, -1117.2421875, 1050.8828125, 3, 1318, 0)
			setElementInterior(exitFromHouse[id], 5)
			setElementDimension(exitFromHouse[id], i)
			SED(exitFromHouse[id], "ExitFromHouse", true)
		elseif(HouseTable[id]["Interior"] == 11) then
			HouseTable[id]["hx"] = 2283.09765625
			HouseTable[id]["hy"] = -1138.0791015625
			HouseTable[id]["hz"] = 1050.8984375
			exitFromHouse[id] = createPickup(2283.001953125, -1140.220703125, 1050.8984375, 3, 1318, 0)
			setElementInterior(exitFromHouse[id], 11)
			setElementDimension(exitFromHouse[id], i)
			SED(exitFromHouse[id], "ExitFromHouse", true)
		end
	end
	if(HouseTable[id]["PID"] > 0) then
		HouseTable[id]["Blip"] 	= createBlip(result[i]["x"], result[i]["y"], result[i]["z"], 32, 2, 0, 0, 0, 0, 0, 250)
		HouseTable[id]["Pickup"] = createPickup(result[i]["x"], result[i]["y"], result[i]["z"], 3, 1272, 0)
		SED(HouseTable[id]["Pickup"], "ID", id)
	else
		HouseTable[id]["Blip"] 	= createBlip(result[i]["x"], result[i]["y"], result[i]["z"], 31, 2, 0, 0, 0, 0, 0, 250)
		HouseTable[id]["Pickup"] =  createPickup(result[i]["x"], result[i]["y"], result[i]["z"], 3, 1273, 0)
		SED(HouseTable[id]["Pickup"], "ID", id)
	end
	if(result[i]["vx"] ~= 0) then
		HouseTable[id]["vx"] = result[i]["vx"]
		HouseTable[id]["vy"] = result[i]["vy"]
		HouseTable[id]["vz"] = result[i]["vz"]
		HouseTable[id]["vrz"] = result[i]["vrz"]
	else
		HouseTable[id]["vx"] = 0
		HouseTable[id]["vy"] = 0
		HouseTable[id]["vz"] = 0
		HouseTable[id]["vrz"] = 0
	end
	if(result[i]["Car"] >= 400) then
		HouseTable[id]["Car"] = result[i]["Car"]
	else
		HouseTable[id]["Car"] = 0
	end
	houseit = houseit + 1
end

dbFree(HQ)

local HQ = dbQuery(mysql, "SELECT * FROM `Server` WHERE `Name` = 'Gruz'")
local result = dbPoll(HQ, -1)

if(result ~= nil) then
	if(result[1] ~= nil) then
		if(result[1]["Integ"] ~= nil) then
			Server["Gruz"] = tonumber(result[1]["Integ"])
		else
			Server["Gruz"] = 0
			dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Gruz', '0')")
		end
	else
		Server["Gruz"] = 0
		dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Gruz', '0')")
	end
else
	Server["Gruz"] = 0
	dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Gruz', '0')")
end

dbFree(HQ)

local HQ = dbQuery(mysql, "SELECT * FROM `Server` WHERE `Name` = 'ArmyGruz'")
local result = dbPoll(HQ, -1)

if(result ~= nil) then
	if(result[1] ~= nil) then
		if(result[1]["Integ"] ~= nil) then
			Server["ArmyGruz"] = tonumber(result[1]["Integ"])
		else
			Server["ArmyGruz"] = 0
			dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('ArmyGruz', '0')")
		end
	else
		Server["ArmyGruz"] = 0
		dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('ArmyGruz', '0')")
	end
else
	Server["ArmyGruz"] = 0
	dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('ArmyGruz', '0')")
end

dbFree(HQ)

local HQ = dbQuery(mysql, "SELECT * FROM `Server` WHERE `Name` = ?", "Maf1Gruz")
local result = dbPoll(HQ, -1)
if(result ~= nil) then
	if(result[1] ~= nil) then
		if(result[1]["Integ"] ~= nil) then
			Server["Maf1Gruz"] = result[1]["Integ"]
		else
			Server["Maf1Gruz"] = 0
			dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Maf1Gruz', 1000)")
		end
	else
		Server["Maf1Gruz"] = 0
		dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Maf1Gruz', 1000)")
	end
else
	Server["Maf1Gruz"] = 0
	dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Maf1Gruz', 1000)")
end
dbFree(HQ)

local HQ = dbQuery(mysql, "SELECT * FROM `Server` WHERE `Name` = ?", "Maf2Gruz")
local result = dbPoll(HQ, -1)
if(result ~= nil) then
	if(result[1] ~= nil) then
		if(result[1]["Integ"] ~= nil) then
			Server["Maf2Gruz"] = result[1]["Integ"]
		else
			Server["Maf2Gruz"] = 0
			dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Maf2Gruz', 1000)")
		end
	else
		Server["Maf2Gruz"] = 0
		dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Maf2Gruz', 1000)")
	end
else
	Server["Maf2Gruz"] = 0
	dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Maf2Gruz', 1000)")
end
dbFree(HQ)

local HQ = dbQuery(mysql, "SELECT * FROM `Server` WHERE `Name` = ?", "Maf3Gruz")
local result = dbPoll(HQ, -1)
if(result ~= nil) then
	if(result[1] ~= nil) then
		if(result[1]["Integ"] ~= nil) then
			Server["Maf3Gruz"] = result[1]["Integ"]
		else
			Server["Maf3Gruz"] = 0
			dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Maf3Gruz', 1000)")
		end
	else
		Server["Maf3Gruz"] = 0
		dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Maf3Gruz', 1000)")
	end
else
	Server["Maf3Gruz"] = 0
	dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Maf3Gruz', 1000)")
end
dbFree(HQ)

local HQ = dbQuery(mysql, "SELECT * FROM `Server` WHERE `Name` = ?", "Maf4Gruz")
local result = dbPoll(HQ, -1)
if(result ~= nil) then
	if(result[1] ~= nil) then
		if(result[1]["Integ"] ~= nil) then
			Server["Maf4Gruz"] = result[1]["Integ"]
		else
			Server["Maf4Gruz"] = 0
			dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Maf4Gruz', 1000)")
		end
	else
		Server["Maf4Gruz"] = 0
		dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Maf4Gruz', 1000)")
	end
else
	Server["Maf4Gruz"] = 0
	dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Maf4Gruz', 1000)")
end
dbFree(HQ)

local BusinessTable = 
{
	[10] = 	{["x"]=-1599.5537109375, 	["y"]=-732.73828125, 		["z"]=14.824739456177,	["px"]=-1599.9111328125,	["py"]=-727.3525390625,		["pz"]=14.824739456177, 	["Type"]=1, ["Owner"]=0},
	[11] = 	{["x"]=-872.2734375, 		["y"]=-561.580078125, 		["z"]=11.054003715515,	["px"]=-868.94140625,  		["py"]=-560.3349609375,		["pz"]=11.050278663635, 	["Type"]=1, ["Owner"]=0},
	[12] = 	{["x"]=-861.9931640625, 	["y"]=867.53515625, 		["z"]=11.045707702637,	["px"]=-864.8125,  			["py"]=867.4228515625,		["pz"]=11.045707702637, 	["Type"]=1, ["Owner"]=0},
	[13] = 	{["x"]=-510.8291015625, 	["y"]=1347.5927734375, 		["z"]=11.724113464355,	["px"]=-510.337890625,  	["py"]=1344.98828125,		["pz"]=11.724113464355, 	["Type"]=1, ["Owner"]=0},
	[14] = 	{["x"]=-729.353515625, 		["y"]=-1335.5751953125, 	["z"]=11.054172515869,	["px"]=-726.97265625,  		["py"]=-1338.7802734375,	["pz"]=11.054172515869, 	["Type"]=1, ["Owner"]=0},
	[15] = 	{["x"]=21.260742187,		["y"]=-949.3173828125,		["z"]=10.419666290283,	["px"]=-19.181640625, 		["py"]=-981.375,			["pz"]=10.415060997009,		["Type"]=1, ["Owner"]=0},
	[16] = 	{["x"]=108.4482421875,		["y"]=-1520.4208984375,		["z"]=10.394973754883,	["px"]=107.2041015625,  	["py"]=-1513.599609375,		["pz"]=10.394973754883,		["Type"]=1, ["Owner"]=0},
	[17] = 	{["x"]=246.0673828125,		["y"]=-878.4697265625,		["z"]=10.148986816406,	["px"]=248.265625,  		["py"]=-879.6123046875,		["pz"]=10.148986816406,		["Type"]=1, ["Owner"]=0},
	[18] = 	{["x"]=452.5947265625,		["y"]=-415.298828125,		["z"]=10.236227989197,	["px"]=446.6474609375,		["py"]=-413.89453125,		["pz"]=10.34434223175,		["Type"]=1, ["Owner"]=0},
	[20] = 	{["x"]=378.7861328125,		["y"]=228.0693359375,		["z"]=10.820665359497,	["px"]=379.3251953125,		["py"]=231.4697265625,		["pz"]=10.794984817505,		["Type"]=1, ["Owner"]=0},
	[21] = 	{["x"]=362.3603515625,		["y"]=1010.4296875,			["z"]=19.147615432739,	["px"]=348.5234375,			["py"]=978.3662109375,		["pz"]=12.237215042114,		["Type"]=1, ["Owner"]=0},
	[22] = 	{["x"]=74.83984375,			["y"]=954.005859375,		["z"]=10.80312538147,	["px"]=71.66015625, 		["py"]=960.7890625,			["pz"]=10.80312538147,		["Type"]=1, ["Owner"]=0},
	[23] = 	{["x"]=-1076.0791015625,	["y"]=-89.376953125,		["z"]=11.339686393738,	["px"]=-1072.3525390625,  	["py"]=-89.7060546875,		["pz"]=11.325350761414,		["Type"]=1, ["Owner"]=0},
	[101] = {["x"]=-287.66796875, 		["y"]=1313.7265625, 		["z"]=11.411743164063,	["px"]=-287.66796875, 		["py"]=1313.7265625, 		["pz"]=11.411743164063, 	["Type"]=3, ["Owner"]=0},	-- Пицца мэрия
	[102] = {["x"]=440.55859375, 		["y"]=433.9150390625,		["z"]=11.604499816895,	["px"]=440.55859375, 		["py"]=433.9150390625, 		["pz"]=11.604499816895, 	["Type"]=3, ["Owner"]=0},	-- Пицца пд
	[103] = {["x"]=21.8349609375, 		["y"]=-927.966796875, 		["z"]=10.419666290283,	["px"]=21.8349609375, 		["py"]=-927.966796875, 		["pz"]=10.419666290283, 	["Type"]=3, ["Owner"]=0},	-- Пицца автобусники
	[104] = {["x"]=431.197265625, 		["y"]=1011.423828125, 		["z"]=19.146541595459,	["px"]=431.197265625, 		["py"]=1011.423828125, 		["pz"]=19.146541595459, 	["Type"]=3,	["Owner"]=0},	-- Пицца Mall
	[105] = {["x"]=-833.7587890625, 	["y"]=-908.9306640625, 		["z"]=12.088490486145,	["px"]=-833.7587890625, 	["py"]=-908.9306640625, 	["pz"]=12.088490486145, 	["Type"]=3, ["Owner"]=0},	-- пицца мост груз-больница
	[106] = {["x"]=-1087.7568359375, 	["y"]=-670.0009765625, 		["z"]=11.752812385559,	["px"]=-1087.7568359375, 	["py"]=-670.0009765625, 	["pz"]=11.752812385559, 	["Type"]=3,	["Owner"]=0} 	-- Пицца Бичевня
}

for i, n in pairs(FuelStation) do
	if(BusinessTable[FuelStation[i]["Zp"]] == nil) then
		local id = FuelStation[i]["Zp"]
		BusinessTable[id] = {}
		BusinessTable[id]["x"] = FuelStation[i]["x"]
		BusinessTable[id]["y"] = FuelStation[i]["y"]
		BusinessTable[id]["z"] = FuelStation[i]["z"]
		BusinessTable[id]["Type"] = 2
	end
end

for i,n in pairs(BusinessTable) do
	if(BusinessTable[i]["Type"] ~= 2) then
		local pck = createPickup(BusinessTable[i]["x"], BusinessTable[i]["y"], BusinessTable[i]["z"], 3, 1318, 0)
		SED(pck, "BusinessID", i)
		SED(pck, "BusinessType", BusinessTable[i]["Type"])
		if(BusinessTable[i]["Type"] == 3) then
			create3dtextlabel(BusinessTable[i]["x"], BusinessTable[i]["y"], BusinessTable[i]["z"], "[ПИЦЦЕРИЯ]")
		elseif(BusinessTable[i]["Type"] == 1) then
			create3dtextlabel(BusinessTable[i]["x"], BusinessTable[i]["y"], BusinessTable[i]["z"], "[МАГАЗИН]")
		end
	end
	local query = dbQuery(mysql, "SELECT * FROM `Business` WHERE `ID` = ?", i)
	local pol = dbPoll(query, -1)
	if(pol[1] ~= nil) then
		if(pol[1]["Owner"] ~= nil) then
			BusinessTable[i]["Owner"] = pol[1]["Owner"]
			BusinessTable[i]["Products"] = pol[1]["Products"]
			BusinessTable[i]["Benzovoz"] = pol[1]["Benzovoz"]
			BusinessTable[i]["MaxProducts"] = pol[1]["MaxProducts"]
			BusinessTable[i]["P1"] = pol[1]["P1"]
			BusinessTable[i]["Money"] = pol[1]["Money"]
			OrderBiz[i] = {}
			OrderBiz[i]["Products"]	= pol[1]["OrderProducts"]
			OrderBiz[i]["Price"] = pol[1]["OrderPrice"]
			BusinessTable[i]["PayDay"] = pol[1]["PayDay"]
			local open = pol[1]["Open"]
			if(open == 1) then
				BusinessTable[i]["Open"] = true
			else
				BusinessTable[i]["Open"] = false
			end
			if(pol[1]["Owner"] ~= 0) then
				BusinessTable[i]["OwnerName"] = pol[1]["OwnerName"]
			else
				BusinessTable[i]["OwnerName"] = ""
			end
		else
			dbExec(mysql, "INSERT into `Business` (`ID`, `Owner`) VALUES (?, ?)", i, 0)
			BusinessTable[i]["Owner"] = 0
			BusinessTable[i]["Products"] = 0
			BusinessTable[i]["OwnerName"] = ""
			BusinessTable[i]["Benzovoz"] = 0
			BusinessTable[i]["MaxProducts"] = 100000
			BusinessTable[i]["Open"] = true
			BusinessTable[i]["P1"] = 50
			BusinessTable[i]["Money"] = 0
			OrderBiz[i] = {}
			OrderBiz[i]["Products"]	= 0
			OrderBiz[i]["Price"] = 0
			BusinessTable[i]["PayDay"] = 30
		end
	else
		dbExec(mysql, "INSERT into `Business` (`ID`, `Owner`) VALUES (?, ?)", i, 0)
		BusinessTable[i]["Owner"] = 0
		BusinessTable[i]["Products"] = 0
		BusinessTable[i]["OwnerName"] = ""
		BusinessTable[i]["Benzovoz"] = 0
		BusinessTable[i]["MaxProducts"] = 100000
		BusinessTable[i]["Open"] = true
		BusinessTable[i]["P1"] = 50
		BusinessTable[i]["Money"] = 0
		OrderBiz[i] = {}
		OrderBiz[i]["Products"]	= 0
		OrderBiz[i]["Price"] = 0
		BusinessTable[i]["PayDay"] = 30
	end
end

function customSpawnVehicle( veh )
	if(isElement(veh) == true) then
		local x, y, z, rz = getElementData(veh, "sx"), getElementData(veh, "sy"), getElementData(veh, "sz"), getElementData(veh, "srz")
		spawnVehicle(veh, x, y, z, 0, 0, rz)
		SED(veh, "Fuel", 100)
		local pl = getVehicleOccupants(veh)
		for i, n in pairs(pl) do
			removePedFromVehicle(n)
		end
		setVehicleOverrideLights(veh, 1)
		setVehicleEngineState(veh, false)
	end
end

function onMagazinHit( hit, dim )
	if(getElementType(hit) == "player") then
		if(getElementDimension(hit) == getElementDimension(source)) then
			if(getElementInterior(hit) == getElementInterior(source)) then
				local biz = getElementData(hit, "BusinessID")
				local x, y, z = getElementPosition(source)
				local x1, y1, z1 = getElementPosition(hit)
				local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
				if(getElementData(source, "mrkMagaz") ~= false) then
					if(BusinessTable[biz]["Open"] == true) then
						if(dist < 3) then
							showPlayerDialog(hit, 54, 3, "Покупка товаров в магазине", "Список товаров\tЦена\nТелефон\t150$\nЧипсы \"Phat Chips\"\t250$\nБатончик \"Black Candy\"\t500$" , "Купить", "Отмена")
						end
					else
						addBox("Магазин закрылся.\nПросьба покинуть здание.", hit, 255, 0, 0)
					end
				end
			end
		end
	end
end

local iterl = 0

function customDestroyVehicle(veh)
	if(isElement(veh) == true) then
		local occups = getVehicleOccupants(veh)
		for i, n in pairs(occups) do
			removePedFromVehicle(n)
		end
		local vehid = getElementData(veh, "ID")
		VehicleTable[vehid] = nil
		destroyElement(veh)
	end
end

function onEatPizzaHit( hit, dim )
	if(getElementType(hit) == "player") then
		if(getElementData(source, "mrkMagaz") ~= false) then
			if(getElementData(hit, "Login") == true) then
				showPlayerDialog(hit, 81, 3, "Покупка фастфуда", "Название продукта\tЦена\nПицца с \"Анастасами\"\t150$\nПицца \"Пеппеньезе\"\t250$\nБургер \"White Star\"\t400$", "Купить", "Отмена")
			end
		end
	end
end

for i, n in pairs(BusinessTable) do
	if(i > 9) then
		if(BusinessTable[i]["Type"] == 1) then
			iterl = iterl + 1
			pckBusinessExit[iterl] = createPickup(-25.7998046875, -141.0205078125, 1003.546875, 3, 1318, 0)
			setElementInterior(pckBusinessExit[iterl], 16)
			SED(pckBusinessExit[iterl], "BusExit", i)
			setElementDimension(pckBusinessExit[iterl], i)
			mrkBusiness[iterl] = createMarker(-18.01953125, -136.46796875, 1002.546875, "cylinder", 1.6, 220, 0, 0, 220)
			addEventHandler("onMarkerHit", mrkBusiness[iterl], onMagazinHit)
			SED(mrkBusiness[iterl], "mrkMagaz", i)
			setElementDimension(mrkBusiness[iterl], i)
			setElementInterior(mrkBusiness[iterl], 16)
		elseif(BusinessTable[i]["Type"] == 3) then
			iterl = iterl + 1
			pckBusinessExit[iterl] = createPickup(372.28515625, -133.072265625, 1001.4927978516, 3, 1318, 0)
			setElementInterior(pckBusinessExit[iterl], 5)
			SED(pckBusinessExit[iterl], "BusExit", i)
			setElementDimension(pckBusinessExit[iterl], i)
			mrkBusiness[iterl] = createMarker(374.87109375, -119.302734375, 1000.5001220703, "cylinder", 1.6, 220, 0, 0, 220)
			addEventHandler("onMarkerHit", mrkBusiness[iterl], onEatPizzaHit)
			SED(mrkBusiness[iterl], "mrkMagaz", i)
			setElementDimension(mrkBusiness[iterl], i)
			setElementInterior(mrkBusiness[iterl], 5)
		end
	end
end


function endPlayerWork( thePlayer, key, keyState )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "PWork") == 1) then
			if(getElementData(thePlayer, "VehicleDriverBus") ~= false) then
				showPlayerDialog(thePlayer, 71, 1, "Окончание рабочего дня", "Действительно ли Вы хотите завершить рабочий день?", "Да", "Нет")
			end
		end
        if(getElementData(thePlayer, "PWork") == 3) then
            if(getElementData(thePlayer, "CourierVehicle") ~= false) then
                showPlayerDialog(thePlayer, 71, 1, "Окончание рабочего дня", "Действительно ли Вы хотите завершить рабочий день?", "Да", "Нет")
            end
        end
        if(getElementData(thePlayer, "PWork") == 2) then
            if(getElementData(thePlayer, "TaxiVehicle") ~= false) then
                showPlayerDialog(thePlayer, 71, 1, "Окончание рабочего дня", "Действительно ли Вы хотите завершить рабочий день?", "Да", "Нет")
            end
        end
		if(getElementData(thePlayer, "NWork") > 0) then
			if(getElementData(thePlayer, "NWork") == 6) then
				if(getElementData(thePlayer, "MailVeh") ~= false) then
					showPlayerDialog(thePlayer, 71, 1, "Окончание рабочего дня", "Действительно ли Вы хотите завершить рабочий день?", "Да", "Нет")
				end
			end
		end
	end
end

function hitMrkAsh( hit, dim )
	if(getElementType(hit) == "player") then
		if(getElementData(hit, "AutoLicense") == 0) then
			if(getElementData(hit, "ASH") == false) then
				if(getElementData(hit, "Passport") > 0) then
					showPlayerDialog(hit, 33, 1, "Тест на автомобильную лицензию.", "Хотите ли Вы пройти тест на вождение?\nСтоимость одной попытки прохождения - 500$", "Начать", "Отмена")
				else
					addBox("Ошибка: Вам нужно получить паспорт.", hit, 255, 0, 0)
				end
			else
				addBox("Вы уже прошли тест.\nПожалуйста, идите к практической части.", hit, 255, 255, 0)
			end
		else
			addBox("У Вас уже есть лицензия на вождение.", hit, 255, 0, 0)
		end
	end
end

function onTabDown( player, key, state )
	if(getElementData(player, "Login") == true) then
		triggerClientEvent(player, "onGridPlayerOn", player, IDS)
	end 
end

function onTabUp( player, key, state )
	if(getElementData(player, "Login") == true) then
		triggerClientEvent(player, "onGridPlayerOff", player)
	end
end

function isPlayerInRectangle( thePlayer, xmin, ymin, xmax, ymax )	
	local x, y, z = getElementPosition(thePlayer)
	if(x >= xmin and y >= ymin and y <= ymax and x <= xmax) then
		return true
	else
		return false
	end
end

function onPlayerConnect()
	clearChatBox(source)
	setPlayerHudComponentVisible(source, "vehicle_name", false)
	setPlayerHudComponentVisible(source, "area_name", false)
	setPedWalkingStyle(source, 0)
	setCameraTarget(source, source)
	setPlayerBlurLevel(source, 0)
	for i=1,1000 do
		if(IDS[tonumber(i)] == nil) then
			IDS[tonumber(i)] = source
			SED(IDS[tonumber(i)], "ID", i)
			break
		end
	end
	SED(source, "NWork", 0)
	SED(source, "Lvl", 0)
	SED(source, "Exp", 0)
	local name = getPlayerName(source)
	local ch = string.len(name)
	if(ch >= 4 and ch <= 20) then
	for i=1,ch do
		local stl = string.sub(name, i, i)
		if(string.byte(stl) == 95 or (string.byte(stl) > 64 and string.byte(stl) < 91) or (string.byte(stl) > 96 and string.byte(stl) < 123) ) then
		else
			kickPlayer(source, "Nickname may be only A-Z, a-z and _", "Console")
			return false
		end
	end 
	local t = getPlayerName(source)
	if(NameTable[t] == nil) then
		NameTable[t] = source
		local str = t
		SED(source, "Name", str)
	else
		kickPlayer(source, "This account on server.")
		return false
	end
    if(getElementData(source, "Name") == false) then
    	SED(source, "Name", getPlayerName(source))
    end
	setElementDimension(source, tonumber(getElementData(source, "ID")))
	SED(source, "Login", false)
	PINTERVAL[getElementData(source, "ID")] = getTickCount()
	TINTERVAL[getElementData(source, "ID")] = getTickCount()
	else
		kickPlayer(source, "от 4 до 20 символов в нике")
	end
end

function deathTela( pl )
	customSpawnPlayer(pl)
	setElementHealth(pl, 30)
	if(getElementData(pl, "Food") ~= false) then
		SED(pl, "Food", 30)
		triggerClientEvent(pl, "Food", pl, getElementData(pl, "Food"))
	end
end

function onPlayerDeath( totalAmmo, killer, killerWeapon, bodypart, stealth )
	if(isElement(killer) == true) then
		if(killer ~= source) then
			if(CaptZone["Fact1"] ~= nil) then
				local xmin, ymin, xmax, ymax = CaptZone["x1"], CaptZone["y1"], CaptZone["x2"], CaptZone["y2"]
				if(isPlayerInRectangle(source, xmin, ymin, xmax, ymax) == true) then 
					if(isPlayerInRectangle(killer, xmin, ymin, xmax, ymax) == true) then
						local fact = getElementData(source, "Faction")
						if(fact == CaptZone["Fact1"]) then
							local kfact = getElementData(killer, "Faction")
							if(kfact == CaptZone["Fact2"]) then
								CaptZone["Frag2"] = CaptZone["Frag2"] + 1
							end
						elseif(fact == CaptZone["Fact2"]) then
							local kfact = getElementData(killer, "Faction")
							if(kfact == CaptZone["Fact1"]) then
								CaptZone["Frag1"] = CaptZone["Frag1"] + 1
							end
						end
					end
				end
			end
		end
	end
	if(getElementData(source, "NWork") == 7) then
		SED(source, "NWork", 0)
		addBox("Вы ушли к рыбам на корм", source, 255, 0, 0)
		local id = tonumber(getElementData(source, "ID"))
	    destroyElement(fishobj[id])
	    fishobj[id] = nil
	    toggleControl(source, "fire", true)
	    if(getElementData(source, "FishKG") ~= false) then
	    	removeElementData(source, "FishKG")
	    end
	    triggerClientEvent(source, "OnEndWorkFish", source)
	    triggerClientEvent(source, "onClientClearFish", source)
	    if(getElementData(source, "FishBoat") ~= false) then
			if(isElement(getElementData(source, "FishBoat"))) then
				local veh = getElementData(source, "FishBoat")
				customSpawnVehicle(veh)
				removeElementData(veh, "FishPlayer")
				removeElementData(source, "FishBoat")
			end
		end
	end
	if(getElementData(source, "PhonePlayer") ~= false) then
		if(getElementData(source, "AcceptedCall") == true) then
			local secPlayer = getElementData(source, "PhonePlayer")
			if(isElement(secPlayer) == true) then
				addBox("Абонент " .. getElementData(source, "Name") .. " вышел из зоны доступа сети.", secPlayer, 255, 255, 0)
				removeElementData(secPlayer, "PhonePlayer")
				removeElementData(secPlayer, "AcceptedCall")
				setPedAnimation(secPlayer, "BSKTBALL", "BBALL_idle_O", 1, false)
			end
			addBox("Звонок оборвался.", source, 255, 255, 0)
			removeElementData(source, "PhonePlayer")
			removeElementData(source, "AcceptedCall")
			local id = getElementData(source, "ID")
			local secid = getElementData(secPlayer, "ID")
			if(PhoneObject[id] ~= nil) then
				local obj = PhoneObject[id]
				exports.bone:detachElementFromBone(obj)
				destroyElement(obj)
				PhoneObject[id] = nil
			end
			if(PhoneObject[secid] ~= nil) then
				local obj = PhoneObject[secid]
				exports.bone:detachElementFromBone(obj)
				destroyElement(obj)
				PhoneObject[secid] = nil
			end
		else
			local secPlayer = getElementData(source, "PhonePlayer")
			if(isElement(secPlayer) == true) then
				addBox("Абонент " .. getElementData(source, "Name") .. " вышел из зоны доступа сети.", secPlayer, 255, 255, 0)
				removeElementData(secPlayer, "PhonePlayer")
				removeElementData(secPlayer, "AcceptedCall")
			end
			addBox("Звонок оборвался.", source, 255, 255, 0)
			if(PhoneObject[source] ~= nil) then
				local obj = PhoneObject[source]
				exports.bone:detachElementFromBone(obj)
				destroyElement(obj)
				PhoneObject[source] = nil
			end
			if(PhoneObject[secPlayer] ~= nil) then
				local obj = PhoneObject[secPlayer]
				exports.bone:detachElementFromBone(obj)
				destroyElement(obj)
				PhoneObject[secPlayer] = nil
			end
			removeElementData(source, "PhonePlayer")
			removeElementData(source, "AcceptedCall")
		end
	end
	if(getElementData(source, "mrkBenz1") ~= false) then
		local mrk = getElementData(source, "mrkBenz1")
		removeEventHandler("onMarkerHit", mrk, Benz1MarkerHit)
		destroyElement(mrk)
		removeElementData(source, "mrkBenz1")
		local blp = getElementData(source, "blpBenz1")
		destroyElement(blp)
		removeElementData(source, "blpBenz1")
	end
	if(getElementData(source, "LiveVCN") ~= false) then
		removeElementData(source, "LiveVCN")
		addBox("Вы вышли из машины и отключились от эфира", source, 0, 255, 60)
	end
	if(getElementData(source, "mrkArmyGruz") ~= false) then
		local mrk = getElementData(source, "mrkArmyGruz")
		if(isElement(mrk) == true) then
			removeEventHandler("onMarkerHit", mrk, onMrkArmyGruzHit)
			local blp = getElementData(source, "blpArmyGruz")
			destroyElement(mrk)
			destroyElement(blp)
			removeElementData(source, "mrkArmyGruz")
			removeElementData(source, "blpArmyGruz")
		end
	end
	if(getElementData(source, "mrkArmyGruzilo") ~= false) then
		local mrk = getElementData(source, "mrkArmyGruzilo")
		if(isElement(mrk) == true) then
			removeEventHandler("onMarkerHit", mrk, onHitGruzilo)
			local blp = getElementData(source, "blpArmyGruzilo")
			destroyElement(blp)
			destroyElement(mrk)
			removeElementData(source, "mrkArmyGruzilo")
			removeElementData(source, "blpArmyGruzilo")
		end
	end
	if(getElementData(source, "NWork") == 1) then
		triggerClientEvent(source, "ClearLoadWork", source)
		if(getElementData(source, "LoadPack") ~= nil and getElementData(source, "LoadPack") ~= false and getElementData(source, "LoadPack") ~= 0) then
			exports.bone:detachElementFromBone(getElementData(source, "LoadPack"))
			destroyElement(objeect[tonumber(getElementData(source, "ID"))])
			removeElementData(source, "LoadPack")
		end
		SED(source, "NWork", 0)
		if(tonumber(getElementData(source, "SummLoads")) ~= nil) then
			setElementMoney(source, tonumber(getElementData(source, "SummLoads")), "Работа на грузчиках")
			addBox("Вы потеряли сознание\nНа работе грузчиков.\nВам была выплачена зарплата\nВ размере: " .. tonumber(getElementData(source, "SummLoads")), source, 0, 255, 100)
		end
		removeElementData(source, "SummLoads")
	end
	if(getElementData(source, "PWork") == 3) then
		if(getElementData(source, "CourierVehicle") ~= nil and getElementData(source, "CourierVehicle") ~= false) then
			local veh = getElementData(source, "CourierVehicle")
			customSpawnVehicle(veh)
			removeElementData(veh, "CourierPlayer")
			removeElementData(source, "CourierVehicle")
			addBox("Вы потеряли сознание.\nВаш транспорт был эвакуирован.", source, 255, 0, 0)
		end
		if(getElementData(source, "mrkCourierStart") ~= false) then
			local mrk = getElementData(source, "mrkCourierStart")
			local blp = getElementData(source, "blpCourierStart")
			removeEventHandler("onMarkerHit", mrk, startCourierWork)
			destroyElement(mrk)
			destroyElement(blp)
			removeElementData(source, "mrkCourierStart")
			removeElementData(source, "blpCourierStart")
		end
		if(getElementData(source, "mrkCourierEnd") ~= false) then
			local mrk = getElementData(source, "mrkCourierEnd")
			local blp = getElementData(source, "blpCourierEnd")
			removeEventHandler("onMarkerHit", mrk, mrkCourEnd)
			destroyElement(mrk)
			destroyElement(blp)
			removeElementData(source, "mrkCourierEnd")
			removeElementData(source, "blpCourierEnd")
			removeElementData(source, "Gruz")
			removeElementData(source, "Coef")
		end
		SED(source, "NWork", 0)
		if(getElementData(source, "mrkCour") ~= false) then
			local mrk = getElementData(source, "mrkCour")
			local blp = getElementData(source, "blpCour")
			removeEventHandler("onMarkerHit", mrk, hitCourEnd)
			destroyElement(mrk)
			destroyElement(blp)
			removeElementData(source, "mrkCour")
			removeElementData(source, "blpCour")
			local bus = tonumber(getElementData(source, "courBiz"))
			OrderBiz[bus]["OrderCourier"] = nil
		end
	end
	if(killer ~= source and killer ~= false) then
		if(getElementData(killer, "Faction") ~= 8) then
			addBox("Ваш уровень розыска повышен!", killer, 255, 255, 0)
			setPlayerWantedLevel(killer, 2)
			SED(killer, "Wanted", 2)
		else
			if(getElementData(source, "Wanted") ~= nil and getElementData(source, "Wanted") ~= false) then
				if(tonumber(getElementData(source, "Wanted")) > 0) then
					setElementMoney(killer, 5000, "Убийство")
					addBox("Нарушитель обезврежен.", killer, 255, 255, 0)
					SED(source, "PoliceJail", tonumber(getElementData(source, "Wanted")) * 600)
					addBox("Вы были тяжело ранены в погоне\nИ оказались в тюрьме на " .. getElementData(source, "PoliceJail") .. " сек.", source, 255, 255, 0)
					setPlayerWantedLevel(source, 0)
					SED(source, "Wanted", 0)
					dbExec(mysql, "UPDATE `Accounts` SET `Wanted` = 0 WHERE `Name` = ?", getElementData(source, "Name"))
				end
			end
		end
	end
	if(getElementData(source, "PWork") == 1) then
		if(getElementData(source, "VehicleDriverBus") ~= false) then
			local veh = getElementData(source, "VehicleDriverBus")
			local id = getElementData(veh, "BusVehTable")
			setTimer(customSpawnVehicle, 3000, 1, veh)
			removeElementData(veh, "DriverPlayerBus")
			removeElementData(source, "VehicleDriverBus")
			removeElementData(source, "BusStage")
			removeElementData(source, "March")
			addBox("Вы потеряли сознание.\nАвтобус будет припаркован на эвакуаторе.", source, 255, 0, 0)
			if(getElementData(source, "mrkBus") ~= nil and getElementData(source, "mrkBus") ~= false) then
				removeEventHandler("onMarkerHit", getElementData(source, "mrkBus"), MarkerHit)
				destroyElement(getElementData(source, "mrkBus"))
				destroyElement(getElementData(source, "blpBus"))
			end
		end
	end
	setTimer(deathTela, 3000, 1, source)
	if(getElementData(source, "PWork") == 2) then
		if(getElementData(source, "TaxiVehicle") ~= nil and getElementData(source, "TaxiVehicle") ~= false) then
			local veh = getElementData(source, "TaxiVehicle")
			local id = getElementData(veh, "TaxiVehTable")
			customSpawnVehicle(veh)
			removeElementData(source, "TaxiVehicle")
			removeElementData(veh, "TaxiDriverPlayer")
		end
	end
	if(getElementData(source, "NWork") == 5) then
		if(objeect[tonumber(getElementData(source, "ID"))] ~= nil) then
			destroyElement(objeect[tonumber(getElementData(source, "ID"))])
			objeect[tonumber(getElementData(source, "ID"))] = nil
		end
		SED(source, "NWork", 0)
		triggerClientEvent(source, "BuilderEnd", source)
	end
	local veh = getElementData(source, "AshVeh")
	if(veh ~= false) then
		if(isElement(veh) == true) then
			if(getElementData(veh, "AshCar") ~= false) then
				if(getElementData(veh, "AshPlayer") ~= false) then
					local plr = getElementData(veh, "AshPlayer")
					removeElementData(plr, "AshVeh")
					removeElementData(veh, "AshPlayer")
					removeElementData(plr, "ASH")
				end
				setElementHealth(veh, 1000)
				addBox("Вы потеряли сознание.\nТест автошколы завершен.", source, 255, 0, 0)
				removeElementData(source, "AshStage")
				if(isElement(veh) == true) then
					setTimer(customSpawnVehicle, 3000, 1, veh)
				end
				local mrk = getElementData(source, "mrkAsh")
				local blp = getElementData(source, "blpAsh")
				destroyElement(mrk)
				destroyElement(blp)
				removeElementData(source, "mrkAsh")
				removeElementData(source, "blpAsh")
			end
		end
	end
	if(getElementData(source, "MailVeh") ~= false) then
		local veh = getElementData(source, "MailVeh")
		if(isElement(veh) == true) then
			customSpawnVehicle(veh)
			setElementHealth(veh, 1000)
			SED(veh, "Fuel", 40)
			removeElementData(veh, "MailPlayer")
		end
		removeElementData(source, "MailVeh")
		if(getElementData(source, "blpMail") ~= false) then
			local blp = getElementData(source, "blpMail")
			local mrk = getElementData(source, "mrkMail")
			local aff = getEventHandlers("onMarkerHit", mrk)
			destroyElement(mrk)
			destroyElement(blp)
			removeElementData(source, "blpMail")
			removeElementData(source, "mrkMail")
		end
		addBox("Вы потеряли сознание.\nТранспорт был эвакуирован.", source, 0, 100, 250)
	end
	toggleAllControls(source, true)
end

function textinchat(thePlayer, command, vehicleModel )
	local x, y, z = getElementPosition(thePlayer)
	sendClientMessage(x .. ", " .. y .. ", " .. z, thePlayer)
end

function kill( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 1) then
			setElementHealth(thePlayer, 0)
		end
	end
end

function createVehicleForPlayer(thePlayer, command, vehicleModel)
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 1) then
			if(vehicleModel ~= nil) then
				if(tonumber(vehicleModel) ~= nil) then
					if(tonumber(vehicleModel) > 399 and tonumber(vehicleModel) < 612) then
						local id = tonumber(getElementData(thePlayer, "ID"))
						if(AdmVeh[id] ~= nil) then
							if(isElement(AdmVeh[id]) == true) then
								local veh = AdmVeh[id]
								local vehid = getElementData(veh, "ID")
								destroyElement(veh)
								VehicleTable[vehid] = nil
							end
						end					   
						local posX,posY,posZ = getElementPosition(thePlayer)
						posX = posX + 5
						AdmVeh[id] = createVeh(tonumber(vehicleModel),posX,posY,posZ)
						addBox("Вы заспавнили " .. tonumber(vehicleModel), thePlayer, 0, 60, 255)
					end
				else
					addBox("Вы ввели некорректный ID машины.\nИспользуйте 400-611.", 255, 0, 0)
				end
			end
		end
	end
end

function changeWeather(thePlayer, command, weatherid)
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 3) then
			weatherid = tonumber(weatherid)
			if(weatherid ~= nil) then
				setWeather(weatherid)
				addBox("Вы изменили погоду на ".. weatherid, thePlayer, 0, 60, 255)
			else
				addBox("Ошибка: ID погоды введено некорректно.", thePlayer, 255, 0, 0)
			end
		end
	end
end

function changeTime(thePlayer, command, hours)
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 3) then
			setTime(hours, 0)
			addBox("Вы изменили время на " .. hours .. ":00", thePlayer, 0, 60, 255)
		end
	end
end

function giveDeapon(thePlayer, command, weaponid )
	if(getElementData(thePlayer, "Admin") ~= nil or getElementData(thePlayer, "Admin") ~= false) then
		if(tonumber(getElementData(thePlayer, "Admin")) > 3) then
			if(weaponid ~= nil) then
				if(tonumber(weaponid) ~= nil) then
					weaponid = tonumber(weaponid)
					if(weaponid >= 1 and weaponid <= 46) then
						giveWeapon(thePlayer, weaponid, 30)
						addBox("Вы выдали себе оружие " .. weaponid .. ".", thePlayer, 0, 60, 255)
					end
				else
					addBox("Ошибка: Вы ввели некорректный ID оружия.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: Вы не указали ID оружия.", thePlayer, 255, 0, 0)
			end
		end
	end
end

function aGoto( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 1) then
			if(IDS[tonumber(id)] == nil) then
				addBox("Ошибка: Данный ID не существует.", thePlayer, 255, 0, 0)
			else
				local secPlayer = IDS[tonumber(id)]
				if(getElementData(secPlayer, "Login") == true) then
					local interior = getElementInterior(secPlayer)
					local dim = getElementDimension(secPlayer)
					setElementInterior(thePlayer, interior)
					setElementDimension(thePlayer, dim)
					local x, y, z = getElementPosition(IDS[tonumber(id)])
					setElementPosition(thePlayer, x + 1, y, z)
					addBox("Вы телепортировались к " .. getElementData(IDS[tonumber(id)], "Name"), thePlayer, 0, 60, 255)
				else
					addBox("Ошибка: Данный игрок не авторизован", thePlayer, 255, 0, 0)
				end
			end
		end
	end
end

function setSkin( thePlayer, command, skinid )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 2) then
			local skinid = tonumber(skinid)
			setElementModel(thePlayer, skinid)
		end
	end
end

function aGet( thePlayer, command, id )
	if(getElementData(thePlayer, "Admin") ~= nil and getElementData(thePlayer, "Admin") ~= false) then
		local Admin = tonumber(getElementData(thePlayer, "Admin"))
		if(Admin > 3) then
			if(IDS[tonumber(id)] ~= nil) then
				local secPlayer = IDS[tonumber(id)]
				if(getElementData(secPlayer, "Login") == true) then
					local x, y, z = getElementPosition(thePlayer)
					local interior = getElementInterior(thePlayer)
					local dim = getElementDimension(thePlayer)
					setElementPosition(secPlayer, x, y, z)
					setElementInterior(secPlayer, interior)
					setElementDimension(secPlayer, dim)
				else
					addBox("Ошибка: Данный игрок не авторизован.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: Данный игрок не найден.", thePlayer, 255, 0, 0)
			end
		end
	end
end

function goTp( thePlayer, command, x, y, z )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			if(z == nil) then
				return 0
			end
			setElementPosition(thePlayer, x, y, z)
		end
	end
end

function UpdateFood( thePlayer )
	if(getElementData(thePlayer, "Login") == true) then
		triggerClientEvent(thePlayer, "Food", thePlayer, getElementData(thePlayer, "Food"))
	end
end

function spectateToPlayer( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 3) then
			if(IDS[tonumber(id)] == nil) then
				addBox("Ошибка: Игрок с таким id не найден.", thePlayer, 255, 0, 0)
			else
				if(IDS[tonumber(id)] == thePlayer) then
					addBox("Вы не можете следить сами за собой", thePlayer, 255, 0, 0)
				else
					local secPlayer = IDS[tonumber(id)]
					local dim = getElementDimension(secPlayer)
					local interior = getElementInterior(secPlayer)
					setElementDimension(thePlayer, dim)
					setElementInterior(thePlayer, interior)
					setCameraTarget(thePlayer, IDS[tonumber(id)])
					SED(thePlayer, "SID", getElementData(thePlayer, "ID"))
				end
			end
		end
	end
end

function onStopSpectating (thePlayer, command)
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 3) then
			setElementDimension(thePlayer, 0)
			setElementInterior(thePlayer, 0)
			setCameraTarget(thePlayer, thePlayer)
		end
	end
end

function tpToGruz( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			local veh = getPedOccupiedVehicle(thePlayer)
			if(veh == nil or veh == false) then
				setElementPosition(thePlayer, -729, -1280, 14)
			else
				setElementPosition(veh, -729, -1280, 14)
			end
		end
	end
end

function setSkin( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			if(id ~= nil) then
				if(tonumber(id) ~= nil) then
					id = tonumber(id)
					if(id >= 0 and id <= 312) then
						setElementModel(thePlayer, id)
						addBox("Вы установили себе " .. id .. " ид скина.", thePlayer, 0, 255, 60)
					end
				else
					addBox("Ошибка: Вы указали некорректный ид скина.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: Вы указали некорректный ид скина.", thePlayer, 255, 0, 0)
			end
		end
	end
end

function createdObject( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 4) then
			local x, y, z = getElementPosition( thePlayer )
			createObject(tonumber(id), x + 2, y, z)
		end
	end
end

function showPass( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true) then
		if(IDS[tonumber(id)] ~= false and IDS[tonumber(id)] ~= nil) then
			if(getElementData(IDS[tonumber(id)], "Login") == true) then
				if(getElementData(thePlayer, "Passport") == 2) then
					local x, y, z = getElementPosition(thePlayer)
					local x1, y1, z1 = getElementPosition(IDS[tonumber(id)])
					if(getDistanceBetweenPoints3D(x, y, z, x1, y1, z1) < 3) then
						local pl = IDS[tonumber(id)]
						local name = getElementData(thePlayer, "Name")
						local lvl = tonumber(getElementData(thePlayer, "Lvl"))
						local wanted = getElementData(thePlayer, "Wanted")
						local hid = tonumber(getElementData(thePlayer, "House"))
						local hm = tonumber(getElementData(thePlayer, "House"))
						if(hm > 0) then
							hm = "Дом: " .. hm .. " id"
							if(HouseTable[hid]["vx"] ~= 0) then
								hm = hm .. "\nГараж у дома: есть."
							else
								hm = hm .. "\nГараж у дома: отсутствует."
							end
						else
							hm = "Дом: отсутствует"
						end
						local str = "Имя Фамилия: " .. name .. "\nЛет в штате: " .. lvl .. "\nУровень розыска: " .. wanted .. "\n" .. hm
						showPlayerDialog(pl, 55500, 1, "Паспорт " .. name, str, "Принять", "Отмена" )
					else
						addBox("Ошибка: Вы слишком далеко от данного игрока", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: У Вас нет паспорта.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: Данный игрок не авторизован.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: Данный игрок не найден", thePlayer, 255, 0, 0)
		end
	end
end

function showLic( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true) then
		if(id ~= nil) then
			if(tonumber(id) ~= nil) then
				id = tonumber(id)
				if(IDS[id] ~= nil) then
					local secPlayer = IDS[id]
					if(getElementData(secPlayer, "Login") == true) then
						local x, y, z = getElementPosition(secPlayer)
						local xu, yu, zu = getElementPosition(thePlayer)
						local dist = getDistanceBetweenPoints3D(x, y, z, xu, yu, zu)
						if(dist < 20) then
							local str = ""
							if(getElementData(secPlayer, "AutoLicense") == 1) then
								str = "Водительская лицензия: есть"
							else
								str = "Водительская лицензия: отсутствует"
							end
							showPlayerDialog(secPlayer, 22200, 1, "Список лицензий", str, "Ок", "Отмена")
						else
							addBox("Ошибка: Игрок слишком далеко", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: Игрок не авторизован", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: ID не найден.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: ID введён некорректно", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: ID введён некорректнор", thePlayer, 255, 0, 0)
		end
	else
		addBox("Ошибка: Вы не авторизованы", thePlayer, 255, 0, 0)
	end
end

function tpToCourier( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			setElementPosition(thePlayer, -885.876953125, -1429.6162109375, 11.832637786865)
		end
	end
end

function invitePlayerFaction( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true) then
		if(id ~= nil) then
			if(tonumber(getElementData(thePlayer, "Faction")) > 0) then
				if(tonumber(getElementData(thePlayer, "Rank")) > 8) then
					if(tonumber(id) ~= nil and tonumber(id) ~= false) then
						local plid = tonumber(id)
						if(IDS[plid] ~= nil) then
							if(getElementData(IDS[plid], "Login") == true) then
								local secPlayer = IDS[plid]
								if(secPlayer ~= thePlayer) then
									local x, y, z = getElementPosition(thePlayer)
									local sX, sY, sZ = getElementPosition(secPlayer)
									local dist = getDistanceBetweenPoints3D(x, y, z, sX, sY, sZ)
									if(dist < 3) then
										local Level = getElementData(secPlayer, "Lvl")
										if(Level > 1) then
											if(tonumber(getElementData(secPlayer, "Faction")) < 1) then
												if(tonumber(getElementData(secPlayer, "Warn")) == 0) then
													local secName = getElementData(secPlayer, "Name")
													local factsp = tonumber(getElementData(thePlayer, "Faction"))
													SED(secPlayer, "Faction", factsp)
													SED(secPlayer, "Rank", 1)
													if(type(FactionSkins) ~= "table") then
														SED(secPlayer, "WorkSkin", FactionSkins[fastcp][1])
													else
														SED(secPlayer, "WorkSkin", getElementData(secPlayer, "Skin"))
													end
													customSpawnPlayer(secPlayer)
													addBox("Вы приняты в организацию\n" .. FactionName[factsp][1], secPlayer, 0, 60, 255)
													addBox("Вы приняли игрока\n" .. getElementData(secPlayer, "Name") .. " в свою организацию.", thePlayer, 0, 60, 255)
													dbExec(mysql, "UPDATE `Accounts` set `Faction` = '" .. factsp .."', `Rank` = '1', `WorkSkin` = ? WHERE `Name` = '" .. getElementData(secPlayer, "Name") .. "'", getElementData(secPlayer, "Skin"))
												else
													addBox("Ошибка: У этого игрока есть\nпредупреждение от администрации.", thePlayer, 255, 0, 0)
												end
											else
												addBox("Ошибка: Данный игрок уже\nнаходится в организации", thePlayer, 255, 0, 0)
											end
										else
											addBox("Ошибка: Уровень данного игрока\nслишком низкий.", thePlayer, 255, 0, 0)
										end
									else
										addBox("Ошибка: Данный игрок слишком далеко", thePlayer, 255, 0, 0)
									end
								else
									addBox("Ошибка: Вы не можете применить\nэто действие к самому себе.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: Данный игрок не авторизован", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: Вы ввели некорректный ID", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: Вы ввели некорректный ID", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: У вас нет доступа\nдля этого действия.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: Вы не находитесь в\nорганизации.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: Вы не ввели ID игрока", thePlayer, 255, 0, 0)
		end
	else
		addBox("Ошибка: Вы не авторизованы.", thePlayer, 255, 0, 0)
	end	
end

function leavePlayerFaction( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(tonumber(getElementData(thePlayer, "Faction")) > 0) then
			local rank = tonumber(getElementData(thePlayer, "Rank"))
			if(rank > 0 and rank < 10) then
				local plname = getElementData(thePlayer, "Name")
				local m = dbQuery(mysql, "UPDATE `Accounts` SET `Faction` = '0', `Rank` = '0' WHERE `Name` = '" .. plname .. "'")
				dbFree(m)
				SED(thePlayer, "Faction", 0)
				SED(thePlayer, "Rank", 0)
				spawnPlayer(thePlayer, -1392.142578125, -877.5107421875, 20.86149597168)
				setElementModel(thePlayer, getElementData(thePlayer, "Skin"))
				addBox("Вы уволились из организации", thePlayer, 0, 60, 255)
			else
				addBox("Уволить с лидерства Вас\nМожет только администратор.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: Вы не находитесь в организации", thePlayer, 255, 0, 0)
		end
	end
end

function setPlayerRank( thePlayer, command, id, rank )
	if(getElementData(thePlayer, "Login") == true) then
		if(tonumber(getElementData(thePlayer, "Faction")) > 0) then
			if(tonumber(getElementData(thePlayer, "Rank")) > 8) then
				if(tonumber(id) ~= nil) then
					if(IDS[tonumber(id)] ~= nil) then
						local secPlayer = IDS[tonumber(id)]
						if(getElementData(secPlayer, "Login") == true) then
							if(tonumber(getElementData(secPlayer, "Faction")) == tonumber(getElementData(thePlayer, "Faction"))) then
								if(thePlayer ~= secPlayer) then
									if(tonumber(getElementData(secPlayer, "Rank")) <= tonumber(getElementData(thePlayer, "Rank")) - 1) then
										if(tonumber(rank) ~= nil and tonumber(rank) <= (tonumber(getElementData(thePlayer, "Rank")) - 1) and tonumber(getElementData(thePlayer, "Rank")) > 0) then
											local x, y, z = getElementPosition(thePlayer)
											local sX, sY, sZ = getElementPosition(secPlayer)
											local range = getDistanceBetweenPoints3D(x, y, z, sX, sY, sZ)
											if(range < 5) then
												local m = dbQuery(mysql, "UPDATE `Accounts` SET `Rank` = '" .. rank .. "' WHERE `Name` = ?", getElementData(secPlayer, "Name"))
												dbFree(m)
												SED(secPlayer, "Rank", tonumber(rank))
												addBox("Ваш ранг изменён на " ..  FactionRankName[tonumber(getElementData(thePlayer, "Faction"))][tonumber(rank)], secPlayer, 255, 255, 0)
												local gd = FactionRankName[tonumber(getElementData(secPlayer, "Faction"))][tonumber(rank)]
												addBox("Вы изменили " .. getElementData(secPlayer, "Name") ..  " на " .. gd, thePlayer, 255, 255, 0)
											else
												addBox("Ошибка: Данный игрок слишком далеко от Вас.", thePlayer, 255, 0, 0)
											end
										else
											addBox("Ошибка: Ранг введён некорректно", thePlayer, 255, 0, 0)
										end
									else
										addBox("Ошибка: Данный игрок имеет слишком высокий ранг.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Ошибка: Вы не можете изменить ранг самому себе", thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: Данный игрок не находится в вашей фракции.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: Данный игрок не авторизован", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: Данный игрок не найден.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: Вы ввели некорректный ID", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: У вас нет доступа к этому действию", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: Вы не находитесь в организации", thePlayer, 255, 0, 0)
		end
	end
end

function uninvitePlayerFaction( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true) then
		if(tonumber(getElementData(thePlayer, "Faction")) > 0) then
			if(tonumber(getElementData(thePlayer, "Rank")) > 7) then
				if(tonumber(id) ~= nil) then
					if(IDS[tonumber(id)] ~= nil) then
						local secPlayer = IDS[tonumber(id)]
						if(secPlayer ~= thePlayer) then
							if(getElementData(secPlayer, "Login") == true) then
								if(tonumber(getElementData(secPlayer, "Faction")) == tonumber(getElementData(thePlayer, "Faction"))) then
									if(tonumber(getElementData(thePlayer, "Rank")) > tonumber(getElementData(secPlayer, "Rank"))) then
										local secName = getElementData(secPlayer, "Name")
										local theName = getElementData(thePlayer, "Name")
										SED(secPlayer, "Faction", 0)
										SED(secPlayer, "Rank", 0)
										local m = dbQuery(mysql, "UPDATE `Accounts` SET `Faction` = '0', `Rank` = '0' WHERE `Name` = '" .. secName .. "'")
										dbFree(m)
										addBox("Вы уволили игрока " .. secName .. " из организации", thePlayer, 0, 100, 255)
										addBox("Вы были уволены из организации игроком " .. theName, secPlayer, 0, 100, 255)
									else
										addBox("Ошибка: Ранг данного игрока слишком высок.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Ошибка: Данный игрок не находится в вашей организации.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: Данный игрок не авторизован", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: Вы не можете применить это действие к самому себе", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: Данный игрок не найден.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: ID игрока введён некорректно.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: Данная команда Вам недоступна.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: Вы не находитесь в организации.", thePlayer, 255, 0, 0)
		end
	else
		addBox("Ошибка: Вы не авторизованы.", thePlayer, 255, 0, 0)
	end
end

function onAdminTpKino( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			setElementPosition(thePlayer, -26.3671875, 964.310546875, 10.899536132813)
		end
	end
end

function onplayercveh( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		local x, y, z = getElementPosition(thePlayer)
		local id = getElementData(thePlayer, "ID")
		if(PCar[id] == nil) then
			PCar[id] = createVeh(579, x, y + 1, z)
		else
			local veh = PCar[id]
			if(isElement(veh)) then
				local vehid = getElementData(PCar[id], "ID")
				VehicleTable[vehid] = nil
				if(getVehicleOccupants(veh) ~= false) then
					local tas = getVehicleOccupants(veh)
					for i, n in pairs(tas) do
						removePedFromVehicle(n)
					end
				end
				destroyElement(veh)
				PCar[id] = nil
			end
			PCar[id] = createVeh(579, x, y + 1, z)
		end
		SED(PCar[id], "PCar", id)
	end
end

function onAdminDelVeh( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			local id = tonumber(getElementData(thePlayer, "ID"))
			if(AdmVeh[id] ~= nil) then
				local veh = AdmVeh[id]
				if(isElement(AdmVeh[id]) == true) then
					local vehid = getElementData(veh, "ID")
					customDestroyElement(veh)
					addBox("Вы успешно почистили\nВаш транспорт.", thePlayer, 0, 255, 100)
				end
			end
		end
	end
end

function anda( thePlayer, command, block, name )
	setPedAnimation(thePlayer, block, name)
end

function checkRent( thePlayer )
	if(isElement(thePlayer) == true) then
		local veh = getPedOccupiedVehicle(thePlayer)
		if(veh ~= rentVehTable[id]) then
			local id = tonumber(getElementData(thePlayer, "ID"))
			rentTimer[id] = nil
			if(isElement(rentVehTable[id]) == true) then
				customDestroyVehicle(rentVehTable[id])
				rentVehTable[id] = nil
				addBox("Ваш арендованный транспорт\nБыл припарков после 5 минут.", thePlayer, 255, 0, 0)
			end
		end
	end
end

addCommandHandler("anda",		anda)
addCommandHandler("clearveh",	onAdminDelVeh)
addCommandHandler("cveh", 		onplayercveh)
addCommandHandler("kino",		onAdminTpKino)
addCommandHandler("gruz",		tpToGruz)
addCommandHandler("veh", 		createVehicleForPlayer)
addCommandHandler("weather", 	changeWeather)
addCommandHandler("hours", 		changeTime)
addCommandHandler("weapon", 	giveDeapon)
addCommandHandler("goto", 		aGoto)
addCommandHandler("get", 		aGet)
addCommandHandler("tp", 		goTp)
addCommandHandler("skin", 		setSkin)
addCommandHandler("sp", 		spectateToPlayer)
addCommandHandler("skin", 		setSkin)
addCommandHandler("object",		createdObject)
addCommandHandler("save",		textinchat)
addCommandHandler("kill", 		kill)
addCommandHandler("showpass", 	showPass)
addCommandHandler("showlic", 	showLic)
addCommandHandler("courier",	tpToCourier)
addCommandHandler("invite", 	invitePlayerFaction)
addCommandHandler("leave", 		leavePlayerFaction)
addCommandHandler("setrank", 	setPlayerRank)
addCommandHandler("uninvite", 	uninvitePlayerFaction)
addEvent("onClickLogin", true)
addEvent("onRegister", true)
addEvent("onRightSpawn", true)
addEvent("onLeftSpawn", true)
addEvent("onChooseSpawn", true)
addEvent("onRightPerson", true)
addEvent("onLeftPerson", true)
addEvent("OnStartWorkingLoader", true)
addEvent("OnEndWorkingLoader", true)
addEvent("OnLoaderEnd", true)
addEvent("OnLoaderStart", true)
addEvent("onCourierWorkStart", true)
addEvent("onCourierWorkEnd", true)
addEvent("GUIWasOpened", true)
addEvent("CheckCourierCars", true)
addEvent("onCourierOrderEnd", true)
addEvent("onDialogResponse", true)
addEvent("onClientLoginStart", true)

function onMrkArmyGruzHit( hit, dim )
	if(getElementType(hit) == "player") then
		if(getPedOccupiedVehicle(hit) ~= false) then
			local veh = getPedOccupiedVehicle(hit)
			if(getElementData(veh, "ArmyCar") ~= false) then
				if(Server["Gruz"] > 0) then
					if(getPedOccupiedVehicleSeat(hit) == 0) then
						local str = "Готовы ли Вы загрузить машину?\nДоступно количество грузов: " .. Server["Gruz"] .. "\nВместимость Вашего транспорта: 250\nПри выборе, Ваш транспорт загрузится на максимум."
						showPlayerDialog(hit, 39, 2, "Государственная закупка?", str, "Загрузиться", "Отмена")
					end
				else
					addBox("На складе закончились продукты. Ожидайте погрузки.", hit, 255, 0, 0)
				end
			end
		end
	end
end

function onPlayerDisconnect ( )
	if(getElementData(source, "Login") == true) then
		local id = tonumber(getElementData(source, "ID"))
		if(PCar[id] ~= nil) then
			local veh = PCar[id]
			if(isElement(veh) == true) then
				local vehid = getElementData(veh, "ID")
				VehicleTable[vehid] = nil
				destroyElement(veh)
				PCar[id] = nil
			end
		end
		if(rentTimer[id] ~= nil) then
			killTimer(rentTimer[id])
			rentTimer[id] = nil
		end
		if(AdmVeh[id] ~= nil) then
			if(isElement(AdmVeh[id]) == true) then
				local veh = AdmVeh[id]
				local vehid = getElementData(veh, "ID")
				VehicleTable[vehid] = nil
				destroyElement(veh)
				AdmVeh[id] = nil
			end
		end
		local veh = getElementData(source, "FishBoat")
		if(veh ~= false) then
			if(isElement(veh) == true) then
				customSpawnVehicle(veh)
				removeElementData(veh, "FishPlayer")
			end
		end
	end
	if(getElementData(source, "SkillM4") ~= false) then
		local m4 = tonumber(getElementData(source, "SkillM4"))
		local ak47 = tonumber(getElementData(source, "SkillAk47"))
		local deagle = tonumber(getElementData(source, "SkillDeagle"))
		local shotgun = tonumber(getElementData(source, "SkillShotgun"))
		local accid = tonumber(getElementData(source, "AccID"))
		dbExec(mysql, "UPDATE `Accounts` SET `SkillM4` = ?, `SkillAk47` = ?, `SkillDeagle` = ?, `SkillShotgun` = ? WHERE `ID` = ?", m4, ak47, deagle, shotgun, accid)
	end
	if(getElementData(source, "House") ~= false) then
		local house = getElementData(source, "House")
		if(house > 0) then
			HouseTable[house]["OwnerPlayer"] = nil
		end
	end
	if(getElementData(source, "PoliceJail") ~= false) then
		if(getElementData(source, "PoliceJail") > 0) then
			dbExec(mysql, "UPDATE `Accounts` SET `PoliceJail` = ? WHERE `ID` = ?", getElementData(source, "PoliceJail"), getElementData(source, "AccID"))
		end
	end
	if(getElementData(source, "Material") ~= false) then
		dbExec(mysql, "UPDATE `Accounts` SET `Material` = ? WHERE `Name` = ?", getElementData(source, "Material"), getElementData(source, "Name"))
	end
	if(getElementData(source, "BusOwnID") ~= false) then
		if(getElementData(source, "BusOwnID") > 0) then
			local biz = tonumber(getElementData(source, "BusOwnID"))
			BusinessTable[biz]["OwnerPlayer"] = nil
		end
	end
	if(getElementData(source, "mrkCour") ~= false) then
		local mrk = getElementData(source, "mrkCour")
		local blp = getElementData(source, "blpCour")
		if(isElement(mrk) == true) then
			removeEventHandler("onMarkerHit", mrk, hitCourEnd)
			destroyElement(mrk)
			destroyElement(blp)
			removeElementData(source, "mrkCour")
			removeElementData(source, "blpCour")
			local bus = tonumber(getElementData(source, "courBiz"))
			OrderBiz[bus]["OrderCourier"] = nil
			local veh = getElementData(source, "CourierVehicle")
			customSpawnVehicle(veh)
			removeElementData(veh, "CourierPlayer")
		end
	end
	if(getElementData(source, "Login") == true) then
		if(getElementData(source, "Mute") > 0) then
			local time = getElementData(source, "Mute")
			dbExec(mysql, "UPDATE `Accounts` set `Mute` = ? WHERE `ID` = ?", time, getElementData(source, "AccID"))
		end
	end
	if(getElementData(source, "PhonePlayer") ~= false) then
		if(getElementData(source, "AcceptedCall") == true) then
			local secPlayer = getElementData(source, "PhonePlayer")
			if(isElement(secPlayer) == true) then
				addBox("Абонент " .. getElementData(source, "Name") .. " вышел из зоны доступа сети.", secPlayer, 255, 255, 0)
				removeElementData(secPlayer, "PhonePlayer")
				removeElementData(secPlayer, "AcceptedCall")
				setPedAnimation(secPlayer, "BSKTBALL", "BBALL_idle_O", 1, false)
				local id = getElementData(source, "ID")
				local secid = getElementData(secPlayer, "ID")
				if(PhoneObject[id] ~= nil) then
					local obj = PhoneObject[id]
					exports.bone:detachElementFromBone(obj)
					destroyElement(obj)
					PhoneObject[id] = nil
				end
				if(PhoneObject[secid] ~= nil) then
					local obj = PhoneObject[secid]
					exports.bone:detachElementFromBone(obj)
					destroyElement(obj)
					PhoneObject[secid] = nil
				end
			end
		else
			local secPlayer = getElementData(source, "PhonePlayer")
			if(isElement(secPlayer) == true) then
				addBox("Абонент " .. getElementData(source, "Name") .. " вышел из зоны доступа сети.", secPlayer, 255, 255, 0)
				removeElementData(secPlayer, "PhonePlayer")
				removeElementData(secPlayer, "AcceptedCall")
				setPedAnimation(secPlayer, "BSKTBALL", "BBALL_idle_O", 1, false)
			end
			if(PhoneObject[source] ~= nil) then
				local obj = PhoneObject[source]
				exports.bone:detachElementFromBone(obj)
				destroyElement(obj)
				PhoneObject[source] = nil
			end
			if(PhoneObject[secPlayer] ~= nil) then
				local obj = PhoneObject[secPlayer]
				exports.bone:detachElementFromBone(obj)
				destroyElement(obj)
				PhoneObject[secPlayer] = nil
			end
		end
	end
	if(getElementData(source, "PhoneNumber") ~= false) then
		if(getElementData(source, "PhoneNumber") ~= 0) then
			local number = tonumber(getElementData(source, "PhoneNumber"))
			PhoneNumbers[number] = nil
		end
	end
	if(getElementData(source, "Login") == true) then
		local hp = getElementHealth(source)
		dbExec(mysql, "UPDATE `Accounts` SET `Health` = ? WHERE `ID` = ?", hp, getElementData(source, "AccID"))
	end
	if(getElementData(source, "mrkArmyGruz") ~= false) then
		local mrk = getElementData(source, "mrkArmyGruz")
		local blp = getElementData(source, "blpArmyGruz")
		destroyElement(mrk)
		destroyElement(blp)
		removeElementData(source, "mrkArmyGruz")
		removeElementData(source, "blpArmyGruz")
	end
	local id = tonumber(getElementData(source, "ID"))
	if(id ~= nil) then
		if(PrivateCar[id] ~= nil) then
			local vehids = tonumber(getElementData(PrivateCar[id], "ID"))
			VehicleTable[vehids] = nil
			destroyElement(PrivateCar[id])
			PrivateCar[id] = nil
		end
		if(PhoneObject[id] ~= nil) then
			local obj = PhoneObject[id]
			destroyElement(obj)
			PhoneObject[id] = nil
		end
	end
	if(getElementData(source, "AshVeh") ~= false) then
		local veh = getElementData(source, "AshVeh")
		if(isElement(veh) == true) then
			customSpawnVehicle(veh)
			removeElementData(veh, "AshPlayer")
			SED(veh, "Fuel", 40)
			setElementHealth(veh, 1000)
		end
	end
	local blp = getElementData(source, "blpMail")
	local mrk = getElementData(source, "mrkMail")
	if(isElement(mrk) == true) then
		destroyElement(mrk)
		destroyElement(blp)
		removeElementData(source, "blpMail")
		removeElementData(source, "mrkMail")
	end
	if(getElementData(source, "MailVeh") ~= false) then
		local veh = getElementData(source, "MailVeh")
		if(veh ~= false) then
			if(isElement(veh) == true) then
				setElementHealth(veh, 1000)
				SED(veh, "Fuel", 40)
				removeElementData(veh, "MailPlayer")
				removeElementData(source, "MailVeh")
				setVehicleEngineState(veh, false)
				customSpawnVehicle(veh)
			end
		end
	end
	if(GPST[id] ~= nil) then
		removeEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
		destroyElement(GPST[id]["Pickup"])
		destroyElement(GPST[id]["Blip"])
		GPST[id] = nil
	end
	sep = "_"
	local t={}
    for str in string.gmatch(getPlayerName(source), "([^"..sep.."]+)") do
		table.insert(t, str)
    end
    local agh = #t
    if(agh == 2) then
    	if(NameTable[t[1].."_"..t[2]] ~= nil) then
    		NameTable[t[1].."_"..t[2]] = nil
    	end
    end
	for i, n in pairs(IDS) do
		if(getElementData(n, "Login") == true) then
			triggerClientEvent(n, "onGridMinus", n, getElementData(source, "ID"), source)
		end
	end
	IDS[getElementData(source, "ID")] = nil
	if(objeect[tonumber(getElementData(source, "ID"))] ~= nil) then
		local obj = objeect[tonumber(getElementData(source, "ID"))]
		if(isElement(obj) == true) then
			destroyElement(objeect[tonumber(getElementData(source, "ID"))])
			objeect[tonumber(getElementData(source, "ID"))] = nil
		end
	end
	getElementData(source, "Name")
	local sName = getElementData(source, "Name")
	if(getElementData(source, "Name") ~= false) then
		NameTable[sName] = nil
	end
	if(getElementData(source, "mrkCourierStart") ~= false) then
		local mrk = getElementData(source, "mrkCourierStart")
		local blp = getElementData(source, "blpCourierStart")
		if(isElement(mrk) == true) then
			destroyElement(getElementData(source, "mrkCourierStart"))
			destroyElement(getElementData(source, "blpCourierStart"))
			removeElementData(source, "mrkCourierStart")
			removeElementData(source, "blpCourierStart")
		end
	end
	if(getElementData(source, "mrkCourierStart") ~= false) then
		local mrk = getElementData(source, "mrkCourierStart")
		local blp = getElementData(source, "blpCourierStart")
		if(isElement(mrk) == true) then
			destroyElement(mrk)
			destroyElement(blp)
			removeElementData(source, "mrkCourierStart")
			removeElementData(source, "blpCourierStart")
		end
		local veh = getElementData(source, "CourierVehicle")
		if(veh ~= false) then
			if(isElement(veh) == true) then
				customSpawnVehicle(veh)
			end
		end
		removeElementData(veh, "CourierPlayer")
	else
		if(getElementData(source, "mrkCourierEnd") ~= false) then
			local mrk = getElementData(source, "mrkCourierEnd")
			local blp = getElementData(source, "blpCourierEnd")
			destroyElement(mrk)
			destroyElement(blp)
			local veh = getElementData(source, "CourierVehicle")
			customSpawnVehicle(veh)
			removeElementData(veh, "CourierPlayer")
		end
	end
	if(getElementData(source, "Gruz") ~= nil) then
		removeElementData(source, "Gruz")
		removeElementData(source, "Coef")
	end
	if(getElementData(source, "LicBy") ~= false) then
		removeElementData(source, "LicBy")
		removeElementData(source, "LicPrice")
	end
	if(getElementData(source, "HousePrice") ~= false) then
		removeElementData(source, "HousePrice")
		removeElementData(source, "HouseID")
		removeElementData(source, "PNameHouse")
		removeElementData(source, "SellPlayer")
	end
	PINTERVAL[getElementData(source, "ID")] = nil
	if(getElementData(source, "Admin") ~= nil and getElementData(source, "Admin") ~= false) then
		removeElementData(source, "Admin")
	end
	if(getElementData(source, "CourierVehicle") ~= nil and getElementData(source, "CourierVehicle") ~= false) then
		local veh = getElementData(source, "CourierVehicle")
		if(getElementType(veh) == "vehicle") then
			setTimer(spawnCurierVehicle, 3000, 1, veh)
			removeElementData(veh, "CourierPlayer")
			removeElementData(source, "CourierVehicle")
		end
	end
	if(getElementData(source, "VehicleDriverBus") ~= nil and getElementData(source, "VehicleDriverBus") ~= false) then
		local veh = getElementData(source, "VehicleDriverBus")
		if(isElement(veh) == true) then
			local id = getElementData(veh, "BusVehTable")
			setTimer(customSpawnVehicle, 3000, 1, veh)
			removeElementData(veh, "DriverPlayerBus")
			removeElementData(source, "VehicleDriverBus")
			removeElementData(source, "NWork")
			removeElementData(veh, "DriverPlayerBus")
		end
	end
	if(getElementData(source, "TaxiVehicle") ~= nil and getElementData(source, "TaxiVehicle") ~= false) then
		local veh = getElementData(source, "TaxiVehicle")
		if(isElement(veh) == true) then
			setTimer(spawnVehicle, 3000, 1, veh, -205 - (tonumber(getElementData(veh, "TaxiVehTable")) - 1) * 3, -1472 + (tonumber(getElementData(veh, "TaxiVehTable")) - 1) * 12, 9, 0, 0, 280)
			setTimer(setElementHealth, 3000, 1, veh, 1000)
			removeElementData(veh, "TaxiDriverPlayer")
		end
	end
	if(getElementData(source, "Login") == true) then
		if(getElementData(source, "Food") ~= false) then
			dbExec(mysql, "UPDATE `Accounts` SET `Food` = ? WHERE `Name` = ?", getElementData(source, "Food"), getElementData(source, "Name"))
		end 
	end
end

function spawnCurierVehicle( vehicle )
	if(getElementData(vehicle, "CourierVehID") == 1) then
		spawnVehicle(vehicle, -922.5400390625, -1388.8212890625, 11.27614402771, 0, 0, 300)
	elseif(getElementData(vehicle, "CourierVehID") == 2) then
		spawnVehicle(vehicle, -933.0087890625, -1386.0751953125, 11.592994689941, 0, 0, 300)
	elseif(getElementData(vehicle, "CourierVehID") == 3) then
		spawnVehicle(vehicle, -942.5166015625, -1379.560546875, 11.588871955872, 0, 0, 300)
	elseif(getElementData(vehicle, "CourierVehID") == 4) then
		spawnVehicle(vehicle, -953.8642578125, -1374.03515625, 11.642669677734, 0, 0, 300)
	end
end

function rightSpawn(  )
	local SpawnID = getElementData(client, "SpawnID")
	if(SpawnID < 2) then
		SpawnID = SpawnID + 1
	else
		SpawnID = 0
	end
	SED(client, "SpawnID", SpawnID)
	if(SpawnID == 0) then
		setElementPosition(client, -1392.142578125, -877.5107421875, 20.86149597168)
	elseif(SpawnID == 1) then
		setElementPosition(client, -1079.8935546875, 1330.126953125, 13.880573272705 )
	else
		setElementPosition(client, -145.5556640625, -1143.34375, 13.445375442505 )
	end
end

function leftSpawn( )
	local SpawnID = getElementData(client, "SpawnID")
	if(SpawnID > 0) then
		SpawnID = SpawnID - 1
	else
		SpawnID = 2
	end
	SED(source, "SpawnID", SpawnID)
	if(SpawnID == 0) then
		setElementPosition(client, -1392.142578125, -877.5107421875, 20.86149597168)
	elseif(SpawnID == 1) then
		setElementPosition(client, -1079.8935546875, 1330.126953125, 13.880573272705 )
	else
		setElementPosition(client, -145.5556640625, -1143.34375, 13.445375442505 )
	end
end

function chooseSpawn(  )
	local SpawnID = getElementData(client, "SpawnID")
	local Name = getElementData(client, "Name")
	addBox("Вы выбрали " .. SpawnID .. " спавн", client, 0, 60, 255)
	local gh = dbQuery(mysql, "UPDATE `Accounts` SET `SpawnID` = '".. SpawnID .. "', `Skin` = '" .. getElementData(client, "Skin") .. "', `WorkSkin` = ? WHERE `Name` = '".. Name .."'", getElementData(client, "Skin"))
	dbFree(gh)
	setElementDimension(client, 0)
end

function rightPerson(  )
	if(getElementData(client, "Sex") == 1) then
		local Skin = getElementData(client, "Skin")
		if(Skin < 22) then
			Skin = Skin + 1
		else
			Skin = 20
		end
		SED(client, "Skin", Skin)
		setElementModel(client, Skin)
	end
end

function leftPerson( )
	if(getElementData(source, "Sex") == 1) then
		if(Skin > 20) then
			Skin = Skin - 1
		else
			Skin = 22
		end
		SED(client, "Skin", Skin)
		setElementModel(client, Skin)
	end
end

function pickupPickUp( pickupid )
	if(pickupid == workLoaderJob ) then
		if(getPedOccupiedVehicle(source) == false) then
			if(getElementData(source, "NWork") == 0) then
				showPlayerDialog(source, 11, 1, "Устройство на работу грузчиком", "Действительно ли Вы хотите устроиться на работу грузчиком?", "Устроиться", "Отмена")
			elseif(getElementData(source, "NWork") == 1) then
				showPlayerDialog(source, 12, 1, "Увольнение с работы грузчика", "Действительно ли Вы хотите уволиться с работы грузчиком?", "Уволиться", "Отмена")
			else
				addBox("Ошибка: Вы уже трудоустроены.", source, 255, 0, 0)
			end
		end
	elseif(pickupid == pckFisherWork) then
		if(getPedOccupiedVehicle(source) == false) then
			if(getElementData(source, "NWork") == 0) then
				showPlayerDialog(source, 87, 1, "Устройство на работу рыболовом", "Действительно ли Вы хотите устроиться рыболовом?", "Устроиться", "Отмена")
			elseif(getElementData(source, "NWork") == 7) then
				showPlayerDialog(source, 88, 1, "Увольнение с работы рыболовом", "Действительно ли Вы хотите уволиться с работы рыболовом?", "Уволиться", "Отмена")
			else
				addBox("Ошибка: Вы уже трудоустроены.", source, 255, 0, 0)
			end
		end
	elseif(pickupid == pckSkinMaf1) then
		if(getPedOccupiedVehicle(source) == false) then
			if(getElementData(source, "Faction") == 1) then
				if(getElementData(source, "WorkSkin") ~= getElementModel(source)) then
					addBox("Вы переоделись в рабочую форму.", source, 0, 60, 255)
					setElementModel(source, getElementData(source, "WorkSkin"))
				else
					addBox("Вы переоделись в повседневную одежду", source, 0, 60, 255)
					setElementModel(source, tonumber(getElementData(source, "Skin")))
				end
			end
		end
	elseif(pickupid == pckWeaponMaf1) then
		if(getPedOccupiedVehicle(source) == false) then
			if(getElementData(source, "Faction") == 1) then
				setPedArmor(source, 100)
				giveWeapon(source, 31, 30)
				addBox("Вы забрали со склада броню и винтовку M4.", source, 0, 120, 255)
			end
		end
	elseif(pickupid == pckSkinMaf2) then
		if(getPedOccupiedVehicle(source) == false) then
			if(getElementData(source, "Faction") == 2) then
				if(getElementData(source, "WorkSkin") ~= getElementModel(source)) then
					addBox("Вы переоделись в рабочую форму.", source, 0, 60, 255)
					setElementModel(source, getElementData(source, "WorkSkin"))
				else
					addBox("Вы переоделись в повседневную одежду", source, 0, 60, 255)
					setElementModel(source, tonumber(getElementData(source, "Skin")))
				end
			end
		end
	elseif(pickupid == pckWeaponMaf2) then
		if(getPedOccupiedVehicle(source) == false) then
			if(getElementData(source, "Faction") == 2) then
				setPedArmor(source, 100)
				giveWeapon(source, 31, 30)
				addBox("Вы забрали со склада броню и винтовку M4.", source, 0, 120, 255)
			end
		end
		elseif(pickupid == pckSkinMaf3) then
		if(getPedOccupiedVehicle(source) == false) then
			if(getElementData(source, "Faction") == 3) then
				if(getElementData(source, "WorkSkin") ~= getElementModel(source)) then
					addBox("Вы переоделись в рабочую форму.", source, 0, 60, 255)
					setElementModel(source, getElementData(source, "WorkSkin"))
				else
					addBox("Вы переоделись в повседневную одежду", source, 0, 60, 255)
					setElementModel(source, tonumber(getElementData(source, "Skin")))
				end
			end
		end
	elseif(pickupid == pckWeaponMaf3) then
		if(getPedOccupiedVehicle(source) == false) then
			if(getElementData(source, "Faction") == 3) then
				setPedArmor(source, 100)
				giveWeapon(source, 31, 30)
				addBox("Вы забрали со склада броню и винтовку M4.", source, 0, 120, 255)
			end
		end
	elseif(pickupid == pckSkinMaf4) then
		if(getPedOccupiedVehicle(source) == false) then
			if(getElementData(source, "Faction") == 4) then
				if(getElementData(source, "WorkSkin") ~= getElementModel(source)) then
					addBox("Вы переоделись в рабочую форму.", source, 0, 60, 255)
					setElementModel(source, getElementData(source, "WorkSkin"))
				else
					addBox("Вы переоделись в повседневную одежду", source, 0, 60, 255)
					setElementModel(source, tonumber(getElementData(source, "Skin")))
				end
			end
		end
	elseif(pickupid == pckSkinArmy) then
		if(getPedOccupiedVehicle(source) == false) then
			if(getElementData(source, "Faction") == 9) then
				if(getElementData(source, "WorkSkin") ~= getElementModel(source)) then
					addBox("Вы переоделись в рабочую форму.", source, 0, 60, 255)
					setElementModel(source, getElementData(source, "WorkSkin"))
				else
					addBox("Вы переоделись в повседневную одежду", source, 0, 60, 255)
					setElementModel(source, tonumber(getElementData(source, "Skin")))
				end
			end
		end
	elseif(pickupid == weaponPoliceDep) then
		if(getPedOccupiedVehicle(source) == false) then
			if(getElementData(source, "Login") == true) then
				if(getElementData(source, "Faction") == 8) then
					setPedArmor(source, 100)
					giveWeapon(source, 24, 35)
					setPedStat(source, 71, 1000)
					setWeaponProperty("deagle", "pro", "flags", 0x000008)
				end
			end
		end
	elseif(pickupid == skinPoliceDep) then
		if(getPedOccupiedVehicle(source) == false) then
			if(getElementData(source, "Login") == true) then
				if(getElementData(source, "Faction") == 8) then
					if(getElementData(source, "WorkSkin") ~= getElementModel(source)) then
						addBox("Вы переоделись в рабочую форму.", source, 0, 60, 255)
						setElementModel(source, getElementData(source, "WorkSkin"))
					else
						addBox("Вы переоделись в повседневную одежду", source, 0, 60, 255)
						setElementModel(source, tonumber(getElementData(source, "Skin")))
					end
				end
			end
		end
	elseif(pickupid == skinVCNews) then
		if(getPedOccupiedVehicle(source) == false) then
			if(getElementData(source, "Login") == true) then
				if(getElementData(source, "Faction") == 6) then
					if(getElementData(source, "WorkSkin") ~= getElementModel(source)) then
						addBox("Вы переоделись в рабочую форму.", source, 0, 60, 255)
						setElementModel(source, getElementData(source, "WorkSkin"))
					else
						addBox("Вы переоделись в повседневную одежду.", source, 0, 60, 255)
						setElementModel(source, getElementData(source, "Skin"))
					end
				end
			end
		end
	elseif(pickupid == skinVCHosp) then
		if(getPedOccupiedVehicle(source) == false) then
			if(getElementData(source, "Login") == true) then
				if(getElementData(source, "Faction") == 7) then
					if(getElementData(source, "WorkSkin") ~= getElementModel(source)) then
						addBox("Вы переоделись в рабочую форму.", source, 0, 60, 255)
						setElementModel(source, getElementData(source, "WorkSkin"))
					else
						addBox("Вы переоделись в повседневную одежду.", source, 0, 60, 255)
						setElementModel(source, getElementData(source, "Skin"))
					end
				end
			end
		end
	elseif(getElementData(pickupid, "FreeEat") ~= false) then
		if(getElementData(source, "Login") == true) then
			if(getPedOccupiedVehicle(source) == false) then
				if(getElementData(source, "Lvl") == 1) then
					addBox("Вы подобрали и съели обед со стойки.", source, 0, 255, 100)
					SED(source, "Food", 100)
					UpdateFood(source)
				else
					addBox("Ошибка: Вы живете не первый год в штате.", source, 255, 255, 0)
				end
			end
		end
	elseif(getElementData(pickupid, "ExitFromHouse") ~= false) then
		local g = getElementData(source, "Hint")
		SED(source, "HTime", true)
		setElementInterior(source, 0)
		setElementPosition(source, HouseTable[g]["x"], HouseTable[g]["y"], HouseTable[g]["z"])
		setTimer(SED, 2000, 1, source, "HTime", false)
		setElementDimension(source, 0)
	elseif(pickupid == workBuilderJob) then
		if(getPedOccupiedVehicle(source) == false) then
			if(getElementData(source, "NWork") == 0) then
				showPlayerDialog(source, 15, 1, "Устройство на работу строителем.", "Действительно ли Вы хотите устроиться на работу строителем?", "Устроиться", "Отмена")
			elseif(getElementData(source, "NWork") == 5) then
				showPlayerDialog(source, 16, 1, "Увольнение с работы строителем", "Действительно ли Вы хотите уволиться с работы строителем?", "Уволиться", "Отмена")
			else
				addBox("Ошибка: Вы уже трудоустроены.", source, 255, 0, 0)
			end
		end
	elseif(pickupid == pckAsh) then
		if(getPedOccupiedVehicle(source) == false) then
			showPlayerDialog(source, 64000, 1, "Правила дорожного движения", "1. Общие правила.\n1.1. Правила, расположенные в данном обучении, являются единым порядком вождения Vice City.\n1.2. Лица, нарушившие порядок вождения, несут административную и уголовную ответственность Vice City.\n \n2. Водитель обязан\n2.1. Предоставлять документы (паспорт, лицензии):\n2.1.1. По мере требования полиции Vice City.\n2.1.2. По мере требования военных Vice City.\n(Перед требованием военный обязан показать паспорт)\n2.2. Соблюдать правила дорожного движения на всей территории Vice City.\n \n3. Государственные машины.\n3.1. При приближении машины с проблесковым маячком красного и синего цвета\nС включенным звуковым сигналом водитель обязан прижаться\nВправо и уступить дорогу данному транспорту.\n \n4. Пешеходы.\n4.1 Водитель обязан пропускать пешеходов на всей территории Vice City.\n \n5. Техническая часть\n5.1. Фары на транспортном средстве должны быть включены всё время,\nВне зависимости от видимости, времени суток и погодных условий.\n5.2. Максимальная вместимость бака всех транспортных средств - 100 литров.\n \n6. Регулирование скорости. \n6.1. Максимальная скорость движения по городу - 90 км/ч.", "Ок", "Отмена")
		end
	elseif(pickupid == enterMer) then
		if(getPedOccupiedVehicle(source) == false) then
			setElementInterior(source, 3)
			setElementPosition(source, 386.9130859375, 173.8310546875, 1008.3828125)
		end
	elseif(pickupid == exitMer) then
		if(getPedOccupiedVehicle(source) == false) then
			setElementInterior(source, 0)
			setElementPosition(source, -347, 1296, 12)
		end
	elseif(pickupid == pckMerPass) then
		if(getElementData(source, "Passport") ~= false) then
			if(getElementData(source, "Passport") == 0) then
				showPlayerDialog(source, 21, 1, "Получение паспорта.", "Действительно ли Вы хотите получить паспорт?\nСтоимость данной процедуры 350$.", "Подтвердить", "Отмена")
			else
				addBox("Ошибка: У Вас уже есть паспорт.", source, 255, 0, 0)
			end
		end
	elseif(pickupid == workMail) then
		if(getPedOccupiedVehicle(source) == false) then
			if(getElementData(source, "NWork") == 0) then
				showPlayerDialog(source, 30, 1, "Устройство на работу почтальоном.", "Действительно ли Вы хотите устроиться на работу почтальоном?", "Устроиться", "Отмена")
			elseif(getElementData(source, "NWork") == 6) then
				showPlayerDialog(source, 31, 1, "Увольнение с работы почтальоном", "Действительно ли Вы хотите уволиться с работы почтальоном?", "Уволиться", "Отмена")
			else
				addBox("Ошибка: Вы уже трудоустроены.", source, 255, 0, 0)
			end
		end
	elseif(pickupid == enterAsh) then
		if(getPedOccupiedVehicle(source) == false) then
			setElementInterior(source, 5)
			setElementPosition(source, 252.568359375, -95.251953125, 1117.6154785156)
			setElementRotation(source, 0, 0, 265)
			triggerClientEvent(source, "CameraUpdate", source, 265)
		end
	elseif(pickupid == exitAsh) then
		if(getPedOccupiedVehicle(source) == false) then
			setElementInterior(source, 0)
			setElementPosition(source, 91.1083984375, -806.0146484375, 11.225130081177)
		end
	elseif(pickupid == pckVCNEnter) then
		if(getPedOccupiedVehicle(source) == false) then
			setElementPosition(source, -548.5625, 770.2490234375, 97.470069885254)
			setElementRotation(source, 0, 0, 270)
		end
	elseif(pickupid == pckVCNExit) then
		if(getPedOccupiedVehicle(source) == false) then
			setElementPosition(source, -503.9404296875, 776.0419921875, 12.424789428711)
		end
	elseif(pickupid == pckPoliceEnter) then
		if(getPedOccupiedVehicle(source) == false) then
			setElementInterior(source, 2)
			setElementPosition(source, 394.1884765625, -474.8955078125, 12.30421257019)
		end
	elseif(pickupid == pckPoliceExit) then
		setElementInterior(source, 0)
		setElementPosition(source, 508.9794921875, 510.26171875, 11.989866256714)
	else
		if(getElementData(pickupid, "ID") ~= nil and getElementData(pickupid, "ID") ~= false) then
			if(getElementData(source, "HTime") ~= true) then
				if(getPedOccupiedVehicle(source) == false) then
					local id = tonumber(getElementData(pickupid, "ID"))
					if(HouseTable[id]["PID"] == 0) then
						local string = "Номер дома: " .. HouseTable[id]["ID"] .. "\nСтоимость: " .. HouseTable[id]["Price"] .. "$"
						showPlayerDialog(source, 7, 1, "Купить этот дом?", string, "Купить", "Отмена" )
						SED(source, "Dom", HouseTable[id]["ID"])
						SED(source, "Price", HouseTable[id]["Price"])
					else
						local str = "Номер дома: " .. HouseTable[id]["ID"] .."\nВладелец: " .. HouseTable[id]["PName"]
						showPlayerDialog(source, 10, 1, "", str, "Войти", "Отменить")
						SED(source, "Dom", HouseTable[id]["ID"])
					end
				end
			end
		end
		if(getElementData(pickupid, "BusinessID") ~= false) then
			if(getPedOccupiedVehicle(source) == false) then
				local id = tonumber(getElementData(pickupid, "BusinessID"))
				if(BusinessTable[id]["Type"] == 1) then
					if(getElementData(source, "CDBus") == false) then
						if(getElementData(source, "NWork") ~= 1) then
							if(BusinessTable[id]["Open"] == true) then
								local owner = tonumber(BusinessTable[id]["Owner"])
								setElementPosition(source, -26.01171875, -137.8369140625, 1003.546875)
								setElementRotation(source, 0, 0, 90)
								SED(source, "BusinessID", id)
								setElementInterior(source, 16)
								setElementDimension(source, id)
							else
								addBox("Ошибка: Данный магазин закрыт.", source, 255, 0, 0)
							end
						else
							addBox("Ошибка: Вы не можете зайти в магазин.", source, 255, 0, 0)
						end
					end
				elseif(BusinessTable[id]["Type"] == 3) then
					if(getElementData(source, "NWork") ~= 1) then
						setElementPosition(source, 371.78125, -130.24609375, 1001.4927978516)
						setElementRotation(source, 0, 0, 0)
						SED(source, "BusinessID", id)
						setElementInterior(source, 5)
						setElementDimension(source, id)
					else
						addBox("Ошибка: Вы не можете зайти в магазин.", source, 255, 0, 0)
					end
				end
			end
		end
		if(getElementData(pickupid, "BusExit") ~= false) then
			SED(source, "CDBus", 1)
			local id = tonumber(getElementData(source, "BusinessID"))
			if(id ~= nil) then
				removeElementData(source, "BusinessID")
				setElementPosition(source, BusinessTable[id]["x"], BusinessTable[id]["y"], BusinessTable[id]["z"])
				setElementInterior(source, 0)
				setElementDimension(source, 0)
				setTimer(function ( thePlayer )
					removeElementData(thePlayer, "CDBus")
				end, 3000, 1, source)
			end
		end
		if(getElementData(pickupid, "FuelStation") ~= false) then
			if(getPedOccupiedVehicle(source) == false) then
				local id = tonumber(getElementData(pickupid, "FuelStation"))
				SED(source, "FuelStation", id)
				if(BusinessTable[id]["Owner"] == 0) then
					showPlayerDialog(source, 40, 1, "Заправочная станция №" .. id, "У данного бизнеса нет владельца.\nСтоимость бизнеса: 500000$.\nХотите ли Вы приобрести его?", "Купить", "Отмена")
				else
					showPlayerDialog(source, 64000, 1, "Заправочная станция №" .. id, "Владелец бизнеса: " .. BusinessTable[id]["OwnerName"] .. "\nСтоимость бизнеса: 500000$.", "Ок", "Отмена")
				end
			end
		end
	end
end

function StartWorkingLoader(  )
	setElementModel(source, 16)
	SED(source, "NWork", 1)
end

function EndWorkingLoader(  )
	if(getElementData(client, "SummLoads") ~= false or getElementData(client, "SummLoads") ~= 0) then
		local mn = tonumber(getElementData(client, "SummLoads"))
		if(mn ~= nil) then
			setElementMoney(client, tonumber(getElementData(client, "SummLoads")), "Грузчик")
			addBox("Вы заработали " .. (tonumber(getElementData(client, "SummLoads"))) .. "$ за работу!", client, 0, 255, 100)
			removeElementData(client, "SummLoads")
		else
			addBox("Вы уволились с работы грузчиком.", client, 0, 60, 255)
		end
	else
	end
	if(objeect[tonumber(getElementData(client, "ID"))] ~= nil) then
		if(isElement(objeect[tonumber(getElementData(client, "ID"))]) == true) then
			destroyElement(objeect[tonumber(getElementData(client, "ID"))])
			objeect[tonumber(getElementData(client, "ID"))] = nil
			removeElementData(client, "LoadPack")
		end
	end
	setPedAnimation(client, "BSKTBALL", "BBALL_idle_O", 100, false)
	triggerClientEvent(client, "ClearLoadWork", client)
	setElementModel(client, getElementData(client, "Skin"))
	removeElementData(client, "SummLoads")
	SED(client, "NWork", 0)
end

function LoaderEnd( playa )
	local summ = math.random(7, 13)
	if(getElementData(client, "SummLoads") ~= nil and getElementData(client, "SummLoads") ~= false and getElementData(client, "SummLoads") ~= 0) then
		SED(client, "SummLoads", tonumber(getElementData(client, "SummLoads")) + summ)
	else
		SED(client, "SummLoads", summ)
	end
	Server["Gruz"] = Server["Gruz"] + 1
	addBox("Вы перенесли " .. summ .. " кг груза.\nВсего: " .. getElementData(client, "SummLoads") .. " кг.", client, 0, 255, 100)
	setPedAnimation(client, "carry", "putdwn", -1, false, false, false, false)
	exports.bone:detachElementFromBone(getElementData(client, "LoadPack"))
	if(objeect[tonumber(getElementData(source, "ID"))] ~= nil) then
		destroyElement(objeect[tonumber(getElementData(client, "ID"))])
		objeect[tonumber(getElementData(source, "ID"))] = nil
	end
	removeElementData(client, "LoadPack")
end

function LoaderStart( playa )
	setPedAnimation(client, "carry", "liftup", -1, false, false, true, false)
	setTimer(clan, 900, 1, client)
	objeect[tonumber(getElementData(client, "ID"))] = createObject(1279, 0, 0, 0)
	exports.bone:attachElementToBone(objeect[tonumber(getElementData(client, "ID"))],client, 12,0.3,0,0,-90,20,0)
	SED(client, "LoadPack", objeect[tonumber(getElementData(client, "ID"))])
end

function clan( thePlayer )
	setPedAnimation(thePlayer, "CARRY", "crry_prtial", 1, true, true, false) 
end

function hitMrkAshes( hit, dim )
	if(getElementType(hit) == "player") then
		if(getElementData(hit, "AshStage") ~= false) then
			if(getElementData(hit, "AshVeh") == getPedOccupiedVehicle(hit)) then
				if(getPedOccupiedVehicleSeat(hit) == 0) then
					if(getElementData(source, "ASHP") == hit) then
						local num = tonumber(getElementData(hit, "AshStage"))
						local mrk = getElementData(hit, "mrkAsh")
						local blp = getElementData(hit, "blpAsh")
						destroyElement(mrk)
						destroyElement(blp)
						if(num == 0) then
							mrk = createMarker(74.220703125, -851.8134765625, 10.277963638306, "checkpoint", 4, 220, 0, 0, 220, hit)
							setMarkerTarget(mrk, -93.9287109375, -889.162109375, 9.8428411483765)
							num = num + 1
							addEventHandler("onMarkerHit", mrk, hitMrkAshes)
							SED(mrk, "ASHP", hit)
							blp = createBlip(74.220703125, -851.8134765625, 10.277963638306, 0, 2, 220, 0, 0, 220, 10, 64000, hit)
							SED(hit, "mrkAsh", mrk)
							SED(hit, "blpAsh", blp)
							SED(hit, "AshStage", num)
						elseif(num == 1) then
							mrk = createMarker(-93.9287109375, -889.162109375, 9.8428411483765, "checkpoint", 4, 220, 0, 0, 220, hit)
							setMarkerTarget(mrk, -75.4013671875, -1071.0859375, 9.8420419692993)
							num = num + 1
							addEventHandler("onMarkerHit", mrk, hitMrkAshes)
							SED(mrk, "ASHP", hit)
							blp = createBlip(-93.9287109375, -889.162109375, 9.8428411483765, 0, 2, 220, 0, 0, 220, 10, 64000, hit)
							SED(hit, "mrkAsh", mrk)
							SED(hit, "blpAsh", blp)
							SED(hit, "AshStage", num)
						elseif(num == 2) then
							mrk = createMarker(-75.4013671875, -1071.0859375, 9.8420419692993, "checkpoint", 4, 220, 0, 0, 220, hit)
							setMarkerTarget(mrk, -203.30078125, -1195.28515625, 9.8356485366821)
							num = num + 1
							addEventHandler("onMarkerHit", mrk, hitMrkAshes)
							SED(mrk, "ASHP", hit)
							blp = createBlip(-75.4013671875, -1071.0859375, 9.8420419692993, 0, 2, 220, 0, 0, 220, 10, 64000, hit)
							SED(hit, "mrkAsh", mrk)
							SED(hit, "blpAsh", blp)
							SED(hit, "AshStage", num)
						elseif(num == 3) then
							mrk = createMarker(-203.30078125, -1195.28515625, 9.8356485366821, "checkpoint", 4, 220, 0, 0, 220, hit)
							setMarkerTarget(mrk, -162.4736328125, -1439.91796875, 9.8356714248657)
							num = num + 1
							addEventHandler("onMarkerHit", mrk, hitMrkAshes)
							SED(mrk, "ASHP", hit)
							blp = createBlip(-203.30078125, -1195.28515625, 9.8356485366821, 0, 2, 220, 0, 0, 220, 10, 64000, hit)
							SED(hit, "mrkAsh", mrk)
							SED(hit, "blpAsh", blp)
							SED(hit, "AshStage", num)
						elseif(num == 4) then
							mrk = createMarker(-162.4736328125, -1439.91796875, 9.8356714248657, "checkpoint", 4, 220, 0, 0, 220, hit)
							setMarkerTarget(mrk, -26.01171875, -1579.4306640625, 9.8263444900513)
							num = num + 1
							addEventHandler("onMarkerHit", mrk, hitMrkAshes)
							SED(mrk, "ASHP", hit)
							blp = createBlip(-162.4736328125, -1439.91796875, 9.8356714248657, 0, 2, 220, 0, 0, 220, 10, 64000, hit)
							SED(hit, "mrkAsh", mrk)
							SED(hit, "blpAsh", blp)
							SED(hit, "AshStage", num)
						elseif(num == 5) then
							mrk = createMarker(-26.01171875, -1579.4306640625, 9.8263444900513, "checkpoint", 4, 220, 0, 0, 220, hit)
							setMarkerTarget(mrk, 2.013671875, -1472.650390625, 9.8338928222656)
							num = num + 1
							addEventHandler("onMarkerHit", mrk, hitMrkAshes)
							SED(mrk, "ASHP", hit)
							blp = createBlip(-26.01171875, -1579.4306640625, 9.8263444900513, 0, 2, 220, 0, 0, 220, 10, 64000, hit)
							SED(hit, "mrkAsh", mrk)
							SED(hit, "blpAsh", blp)
							SED(hit, "AshStage", num)
						elseif(num == 6) then
							mrk = createMarker(2.013671875, -1472.650390625, 9.8338928222656, "checkpoint", 4, 220, 0, 0, 220, hit)
							setMarkerTarget(mrk, 100.1591796875, -1488.32421875, 9.818060874939)
							num = num + 1
							addEventHandler("onMarkerHit", mrk, hitMrkAshes)
							SED(mrk, "ASHP", hit)
							blp = createBlip(2.013671875, -1472.650390625, 9.8338928222656, 0, 2, 220, 0, 0, 220, 10, 64000, hit)
							SED(hit, "mrkAsh", mrk)
							SED(hit, "blpAsh", blp)
							SED(hit, "AshStage", num)
						elseif(num == 7) then
							mrk = createMarker(100.1591796875, -1488.32421875, 9.818060874939, "checkpoint", 4, 220, 0, 0, 220, hit)
							setMarkerTarget(mrk, 156.9296875, -1366.2216796875, 9.804313659668)
							num = num + 1
							addEventHandler("onMarkerHit", mrk, hitMrkAshes)
							SED(mrk, "ASHP", hit)
							blp = createBlip(100.1591796875, -1488.32421875, 9.818060874939, 0, 2, 220, 0, 0, 220, 10, 64000, hit)
							SED(hit, "mrkAsh", mrk)
							SED(hit, "blpAsh", blp)
							SED(hit, "AshStage", num)
						elseif(num == 8) then
							mrk = createMarker(156.9296875, -1366.2216796875, 9.804313659668, "checkpoint", 4, 220, 0, 0, 220, hit)
							setMarkerTarget(mrk, 183.109375, -1176.0009765625, 9.8046684265137)
							num = num + 1
							addEventHandler("onMarkerHit", mrk, hitMrkAshes)
							SED(mrk, "ASHP", hit)
							blp = createBlip(156.9296875, -1366.2216796875, 9.804313659668, 0, 2, 220, 0, 0, 220, 10, 64000, hit)
							SED(hit, "mrkAsh", mrk)
							SED(hit, "blpAsh", blp)
							SED(hit, "AshStage", num)
						elseif(num == 9) then
							mrk = createMarker(183.109375, -1176.0009765625, 9.8046684265137, "checkpoint", 4, 220, 0, 0, 220, hit)
							setMarkerTarget(mrk, 224.7177734375, -960.7177734375, 9.786046981811)
							num = num + 1
							addEventHandler("onMarkerHit", mrk, hitMrkAshes)
							SED(mrk, "ASHP", hit)
							blp = createBlip(183.109375, -1176.0009765625, 9.8046684265137, 0, 2, 220, 0, 0, 220, 10, 64000, hit)
							SED(hit, "mrkAsh", mrk)
							SED(hit, "blpAsh", blp)
							SED(hit, "AshStage", num)
						elseif(num == 10) then
							mrk = createMarker(224.7177734375, -960.7177734375, 9.7860469818115, "checkpoint", 4, 220, 0, 0, 220, hit)
							setMarkerTarget(mrk, 114.513671875, -910.4482421875, 9.7991123199463)
							num = num + 1
							addEventHandler("onMarkerHit", mrk, hitMrkAshes)
							SED(mrk, "ASHP", hit)
							blp = createBlip(224.7177734375, -960.7177734375, 9.7860469818115, 0, 2, 220, 0, 0, 220, 10, 64000, hit)
							SED(hit, "mrkAsh", mrk)
							SED(hit, "blpAsh", blp)
							SED(hit, "AshStage", num)
						elseif(num == 11) then
							mrk = createMarker(114.513671875, -910.4482421875, 9.7991123199463, "checkpoint", 4, 220, 0, 0, 220, hit)
							setMarkerTarget(mrk, 227.3466796875, -725.79296875, 9.8031854629517)
							num = num + 1
							addEventHandler("onMarkerHit", mrk, hitMrkAshes)
							SED(mrk, "ASHP", hit)
							blp = createBlip(114.513671875, -910.4482421875, 9.7991123199463, 0, 2, 220, 0, 0, 220, 10, 64000, hit)
							SED(hit, "mrkAsh", mrk)
							SED(hit, "blpAsh", blp)
							SED(hit, "AshStage", num)
						elseif(num == 12) then
							mrk = createMarker(227.3466796875, -725.79296875, 9.8031854629517, "checkpoint", 4, 220, 0, 0, 220, hit)
							setMarkerTarget(mrk, 171.8984375, -702.0556640625, 9.8348712921143)
							num = num + 1
							addEventHandler("onMarkerHit", mrk, hitMrkAshes)
							SED(mrk, "ASHP", hit)
							blp = createBlip(227.3466796875, -725.79296875, 9.8031854629517, 0, 2, 220, 0, 0, 220, 10, 64000, hit)
							SED(hit, "mrkAsh", mrk)
							SED(hit, "blpAsh", blp)
							SED(hit, "AshStage", num)
						elseif(num == 13) then
							mrk = createMarker(171.8984375, -702.0556640625, 9.8348712921143, "checkpoint", 4, 220, 0, 0, 220, hit)
							setMarkerTarget(mrk, 119.2353515625, -783.4541015625, 9.9899053573608)
							num = num + 1
							addEventHandler("onMarkerHit", mrk, hitMrkAshes)
							SED(mrk, "ASHP", hit)
							blp = createBlip(171.8984375, -702.0556640625, 9.8348712921143, 0, 2, 220, 0, 0, 220, 10, 64000, hit)
							SED(hit, "mrkAsh", mrk)
							SED(hit, "blpAsh", blp)
							SED(hit, "AshStage", num)
						elseif(num == 14) then
							mrk = createMarker(119.2353515625, -783.4541015625, 9.9899053573608, "checkpoint", 4, 220, 0, 0, 220, hit)
							setMarkerTarget(mrk, 101.0498046875, -748.7294921875, 9.9845876693726)
							num = num + 1
							addEventHandler("onMarkerHit", mrk, hitMrkAshes)
							SED(mrk, "ASHP", hit)
							blp = createBlip(119.2353515625, -783.4541015625, 9.9899053573608, 0, 2, 220, 0, 0, 220, 10, 64000, hit)
							SED(hit, "mrkAsh", mrk)
							SED(hit, "blpAsh", blp)
							SED(hit, "AshStage", num)
						elseif(num == 15) then
							mrk = createMarker(101.0498046875, -748.7294921875, 9.9845876693726, "checkpoint", 4, 220, 0, 0, 220, hit)
							setMarkerTarget(mrk, 101.0498046875, -748.7294921875, 9.9845876693726)
							num = num + 1
							addEventHandler("onMarkerHit", mrk, hitMrkAshes)
							SED(mrk, "ASHP", hit)
							blp = createBlip(101.0498046875, -748.7294921875, 9.9845876693726, 0, 2, 220, 0, 0, 220, 10, 64000, hit)
							SED(hit, "mrkAsh", mrk)
							SED(hit, "blpAsh", blp)
							SED(hit, "AshStage", num)
						elseif(num == 16) then
							local veh = getPedOccupiedVehicle(hit)
							local hp = getElementHealth(veh)
							if(hp > 700) then
								SED(hit, "AutoLicense", 1)
								dbExec(mysql, "UPDATE `Accounts` SET `AutoLicense` = ? WHERE `Name` = ?", 1, getElementData(hit, "Name"))
								addBox("Вы успешно сдали экзамен на вождение\nИ получили водительское удостоверение.", hit, 0, 255, 100)
							else
								addBox("Вы провалили практический заезд.\nПожалуйста, повторите попытку сдачи.", hit, 0, 255, 100)
							end
							removeElementData(hit, "AshVeh")
							removeElementData(veh, "AshPlayer")
							removeElementData(hit, "AshStage")
							removeElementData(hit, "ASH")
							local veh = getPedOccupiedVehicle(hit)
							removePedFromVehicle(hit)
							customSpawnVehicle(veh)
							num = nil
						end
					end
				else
				end
			else
			end
		else
		end
	end
end

function Benz1MarkerHit( hit, dim )
	if(isElement(hit) == true) then
		if(getElementType(hit) == "player") then
			local veh = getPedOccupiedVehicle(hit)
			if(getElementData(veh, "Benzovoz") ~= false) then
				if(getPedOccupiedVehicleSeat(hit) == 0) then
					local benz = getElementData(veh, "Benzovoz")
					local biz = getElementData(hit, "BusOwnID")
					if(benz == biz) then
						local mrk = getElementData(hit, "mrkBenz1")
						local blp = getElementData(hit, "blpBenz1")
						removeEventHandler("onMarkerHit", mrk, Benz1MarkerHit)
						destroyElement(mrk)
						destroyElement(blp)
						removeElementData(hit, "mrkBenz1")
						removeElementData(hit, "blpBenz1")
						showPlayerDialog(hit, 48, 2, "Покупка бензина.", "Введите количество бензина, которое Вы хотите купить.\nСтоимость: 5$/кг.\nВместимость Вашего транспорта: 4000 кг.", "Купить", "Отмена")
					end
				end
			end
		end
	end
end

function havelic( theVehicle, seat )
	if(seat == 0) then
		if(getElementData(theVehicle, "AshCar") ~= false) then
			if(getElementData(theVehicle, "AshCar") > 0) then
				if(getElementData(source, "ASH") ~= false) then
					if(getElementData(theVehicle, "AshPlayer") == false) then
						if(getElementData(source, "AshVeh") == false) then
							SED(theVehicle, "AshPlayer", source)
							SED(source, "AshVeh", theVehicle)
							local mrk = createMarker(105.1875, -811.9677734375, 9.988881111145, "checkpoint", 4, 220, 0, 0, 220, source)
							local blp = createBlip(105.1875, -811.9677734375, 9.988881111145, 0, 2, 220, 0, 0, 220, 10, 64000, source)
							SED(mrk, "ASHP", source)
							SED(source, "mrkAsh", mrk)
							SED(source, "blpAsh", blp)
							addEventHandler("onMarkerHit", mrk, hitMrkAshes)
							SED(source, "AshStage", 0)
							toggleControl ( source, "accelerate", true ) 
							toggleControl ( source, "brake_reverse", true )
							toggleControl ( source, "handbrake", true )
							SED(source, "ToggleVeh", true)
							addBox("Завести/заглушить машину - ctrl\nВключить/выключить фары - alt", source, 0, 100, 255)
						else
							setControlState(source, "enter_exit", true)
							addBox("Это не Ваш транспорт.", source, 255, 0, 0)
						end
					else
						if(getElementData(theVehicle, "AshPlayer") == source) then
							toggleControl ( source, "accelerate", true ) 
							toggleControl ( source, "brake_reverse", true )
							toggleControl ( source, "handbrake", true )
							SED(source, "ToggleVeh", true)
							addBox("Завести/заглушить машину - ctrl\nВключить/выключить фары - alt", source, 0, 100, 255)
						else
							setControlState(source, "enter_exit", true)
							addBox("Это не Ваш транспорт.", source, 255, 0, 0)
						end
					end
				else
					setControlState(source, "enter_exit", true)
					addBox("Вы не обучаетесь в автошколе.", source, 255, 0, 0)
				end
			end
		else
			local id = tonumber(getElementData(source, "ID"))
			if(getElementData(source, "AutoLicense") == 0) then
				addBox("Ошибка: У вас нет прав, чтобы сесть за руль.", source, 255, 0, 0)
				setControlState(source, "enter_exit", true)
			else
				if(getElementData(theVehicle, "BusVehTable") ~= nil and getElementData(theVehicle, "BusVehTable") ~= false) then
					if(getElementData(theVehicle, "BusVehTable") > 0) then
						if(getElementData(source, "PWork") == 1) then
							if(getElementData(theVehicle, "DriverPlayerBus") == false or getElementData(theVehicle, "DriverPlayerBus") == nil) then
								if(getElementData(source, "VehicleDriverBus") == false or getElementData(source, "VehicleDriverBus") == nil) then
									showPlayerDialog(source, 5, 1, "Аренда автобуса", "Действительно ли Вы хотите арендовать автобус?", "Аренда", "Отмена")
									return true
								else
									addBox("Ошибка: Это не ваш автобус!", source, 255, 0, 0)
									setControlState(source, "enter_exit", true)
								end
							elseif(getElementData(theVehicle, "DriverPlayerBus") ~= source) then
								addBox("Ошибка: Это не ваша машина!", source, 255, 0, 0)
								setControlState(source, "enter_exit", true)
							else
								toggleControl ( source, "accelerate", true ) 
								toggleControl ( source, "brake_reverse", true )
								toggleControl ( source, "handbrake", true )
								SED(source, "ToggleVeh", true)
								addBox("Завести/заглушить машину - ctrl\nВключить/выключить фары - alt", source, 0, 100, 255)
							end
						else
							addBox("Ошибка: Вы не работаете водителем автобуса!", source, 255, 0, 0)
							setControlState(source, "enter_exit", true)
						end
					end
				elseif(rentVehTable[id] == source) then
					toggleControl ( source, "accelerate", true ) 
					toggleControl ( source, "brake_reverse", true )
					toggleControl ( source, "handbrake", true )
					SED(source, "ToggleVeh", true)
					killTimer(rentTimer[id])
				elseif(getElementData(theVehicle, "TaxiVehTable") ~= nil and getElementData(theVehicle, "TaxiVehTable") ~= false) then
					if(getElementData(theVehicle, "TaxiVehTable") > 0) then
						if(getElementData(source, "PWork") == 2) then
							if(getElementData(theVehicle, "TaxiDriverPlayer") == false) then
								showPlayerDialog(source, 9, 1, "Аренда такси", "Действительно ли Вы хотите арендовать данное транспортное средство?\nСтоимость аренды: 100$. Если Вы закончите работу, транспорт вернется на стоянку.", "Аренда", "Отмена")
							elseif(getElementData(theVehicle, "TaxiDriverPlayer") == source) then
								toggleControl ( source, "accelerate", true ) 
								toggleControl ( source, "brake_reverse", true )
								toggleControl ( source, "handbrake", true )
								SED(source, "ToggleVeh", true)
								addBox("Завести/заглушить машину - ctrl\nВключить/выключить фары - alt", source, 0, 100, 255)
							else
								addBox("Ошибка: Это не Ваше такси!", source, 255, 0, 0)
								setControlState(source, "enter_exit", true)
							end
						else
							addBox("Ошибка: Вы не работаете в такси!", source, 255, 0, 0)
							setControlState(source, "enter_exit", true)
						end
					end
				elseif(getElementData(theVehicle, "MailVeh") ~= false) then
					if(getElementData(theVehicle, "MailVeh") > 0) then
						if(getElementData(source, "NWork") == 6) then
							if(getElementData(source, "MailVeh") == false) then
								if(getElementData(theVehicle, "MailPlayer") == false) then
									showPlayerDialog(source, 32, 1, "Аренда мопеда", "Действительно ли Вы хотите арендовать мопед?\nСтоимость аренды: 50$.\n \nЕсли мопед будет сломан, Вы заплатите штраф в 3 стоимости аренды.", "Аренда", "Отмена")
								elseif(getElementData(theVehicle, "MailPlayer") ~= source) then
									setControlState(source, "enter_exit", true)
									addBox("Данный транспорт уже арендован.", source, 255, 0, 0)
								else
									toggleControl ( source, "accelerate", true ) 
									toggleControl ( source, "brake_reverse", true )
									toggleControl ( source, "handbrake", true )
									SED(source, "ToggleVeh", true)
									addBox("Завести/заглушить машину - ctrl\nВключить/выключить фары - alt", source, 0, 100, 255)
								end
							elseif(getElementData(source, "MailVeh") == theVehicle) then
								toggleControl ( source, "accelerate", true ) 
								toggleControl ( source, "brake_reverse", true )
								toggleControl ( source, "handbrake", true )
								SED(source, "ToggleVeh", true)
								addBox("Завести/заглушить машину - ctrl\nВключить/выключить фары - alt", source, 0, 100, 255)
							else
								addBox("Это не Ваше транспортное средство.", source, 255, 0, 0)
								setControlState(source, "enter_exit", true)
							end
						else
							setControlState(source, "enter_exit", true)
							addBox("Вы не работаете почтальоном.", source, 255, 0, 0)
						end
					end
				elseif(getElementData(theVehicle, "ArmyCar") ~= false) then
					if(getElementData(source, "Faction") == 9) then
						if(getElementData(theVehicle, "ArmyGruz") == false) then
							toggleControl ( source, "accelerate", true ) 
					    	toggleControl ( source, "brake_reverse", true )
					    	toggleControl ( source, "handbrake", true )
					    	SED(source, "ToggleVeh", true)
					    	local mrk = createMarker(-662.0888671875, -1414.3330078125, 11.16068649292, "checkpoint", 2, 220, 0, 0, 220, source)
					    	local blp = createBlip(-662.0888671875, -1414.3330078125, 11.16068649292, 0, 2, 220, 0, 0, 220, 0, 16000, source)
					    	SED(source, "mrkArmyGruz", mrk)
					    	SED(source, "blpArmyGruz", blp)
					    	addEventHandler("onMarkerHit", mrk, onMrkArmyGruzHit)
					    	addBox("Завести/заглушить машину - ctrl\nВключить/выключить фары - alt", source, 0, 100, 255)
					    else
					    	toggleControl ( source, "accelerate", true ) 
					    	toggleControl ( source, "brake_reverse", true )
					    	toggleControl ( source, "handbrake", true )
					    	SED(source, "ToggleVeh", true)
					    	addBox("Ваша машина загружена, отправляйтесь на склад армии.", thePlayer, 0, 60, 255)
					    	local mrk = createMarker(-1632.87109375, -222.2001953125, 13.824159622192, "checkpoint", 2.0, 220, 0, 0, 220, source)
							local blp = createBlip(-1632.87109375, -222.2001953125, 14.824159622192, 0, 2, 220, 0, 0, 220, 14, 64000, source)
							SED(source, "mrkArmyGruzilo", mrk)
							SED(source, "blpArmyGruzilo", blp)
							addEventHandler("onMarkerHit", mrk, onHitGruzilo)
							addBox("Завести/заглушить машину - ctrl\nВключить/выключить фары - alt", source, 0, 100, 255)
					    end
					else
						setControlState(source, "enter_exit", true)
						addBox("Вы не состоите в армии.", source, 255, 0, 0)
					end
				elseif(getElementData(theVehicle, "Benzovoz") ~= false) then
					local Benz = getElementData(theVehicle, "Benzovoz")
					local biz = getElementData(source, "BusOwnID")
					if(biz == Benz) then
						toggleControl ( source, "accelerate", true ) 
					    toggleControl ( source, "brake_reverse", true )
					    toggleControl ( source, "handbrake", true )
					    SED(source, "ToggleVeh", true)
					    addBox("Завести/заглушить машину - ctrl\nВключить/выключить фары - alt", source, 0, 30, 255)
					    if(getElementData(theVehicle, "BenzKol") == false) then
						    local mrk = createMarker(-1006.5986328125, -1388.630859375, 10.581163406372, "cylinder", 2.4, 220, 0, 0, 220, source)
							SED(source, "mrkBenz1", mrk)
							addEventHandler("onMarkerHit", mrk, Benz1MarkerHit)
							local blp = createBlip(-1006.5986328125, -1388.630859375, 10.581163406372, 0, 2, 220, 0, 0, 220, 3, 64000, source)
							SED(source, "blpBenz1", blp)
						else
							addBox("У Вас в транспорте есть " .. getElementData(theVehicle, "BenzKol") .. " л. топлива\nОтправляйтесь на заправку.", source, 0, 60, 255)
							local mrk = ""
							local blp = ""
							if(biz == 1) then
								mrk = createMarker(49.9013671875, -1088.7578125, 10.423915863037, "cylinder", 2.4, 220, 0, 0, 220, source)
								blp = createBlip(49.9013671875, -1088.7578125, 10.423915863037, 0, 2.4, 220, 0, 0, 220, 10, 64000, source)
							elseif(biz == 2) then
								mrk = createMarker(-887.984375, -573.0234375, 11.047963142395, "cylinder", 2.4, 220, 0, 0, 220, source)
								blp = createBlip(-887.984375, -573.0234375, 11.047963142395, 0, 2.4, 220, 0, 0, 220, 10, 64000, source)
							elseif(biz == 3) then
								mrk = createMarker(-1616.8896484375, -736.66015625, 14.824739456177, "cylinder", 2.4, 220, 0, 0, 220, source)
								blp = createBlip(-1616.8896484375, -736.66015625, 14.824739456177, 0, 2.4, 220, 0, 0, 220, 10, 64000, source)
							elseif(biz == 4) then
								mrk = createMarker(55.244140625, 937.4443359375, 10.80312538147, "cylinder", 2.4, 220, 0, 0, 220, source)
								blp = createBlip(55.244140625, 937.4443359375, 10.80312538147, 0, 2.4, 220, 0, 0, 220, 10, 64000, source)
							elseif(biz == 5) then
								mrk = createMarker(-936.8505859375, 1347.3076171875, 11.096260070801, "cylinder", 2.4, 220, 0, 0, 220, source)
								blp = createBlip(-936.8505859375, 1347.3076171875, 11.096260070801, 0, 2.4, 220, 0, 0, 220, 10, 64000, source)
							elseif(biz == 6) then
								mrk = createMarker(-749.603515625, -1379.189453125, 11.343542098999, "cylinder", 2.4, 220, 0, 0, 220, source)
								blp = createBlip(-749.603515625, -1379.189453125, 11.343542098999, 0, 2.4, 220, 0, 0, 220, 10, 64000, source)
							elseif(biz == 7) then
								mrk = createMarker(204.884765625, -506.1201171875, 11.78320980072, "cylinder", 2.4, 220, 0, 0, 220, source)
								blp = createBlip(204.884765625, -506.1201171875, 11.78320980072, 0, 2.4, 220, 0, 0, 220, 10, 64000, source)
							end
							SED(source, "mrkBenz2", mrk)
							SED(source, "blpBenz2", blp)
							addEventHandler("onMarkerHit", mrk, Benz2MarkerHit)
						end
					else
						setControlState(source, "enter_exit", true)
						addBox("Это не Ваш бензовоз.", source, 255, 0, 0)
					end
				elseif(getElementData(theVehicle, "MedicID") ~= false) then
					if(getElementData(source, "Faction") == 7) then
						toggleControl ( source, "accelerate", true ) 
					    toggleControl ( source, "brake_reverse", true )
					    toggleControl ( source, "handbrake", true )
					    SED(source, "ToggleVeh", true)
					    addBox("Завести/заглушить машину - ctrl\nВключить/выключить фары - alt", source, 0, 100, 255)
					else
						setControlState(source, "enter_exit", true)
						addBox("Вы не имеете права сесть в данный транспорт.", source, 255, 0, 0)
					end
				elseif(getElementData(theVehicle, "VCNCar") ~= false) then
					if(getElementData(source, "Faction") == 6) then
						toggleControl ( source, "accelerate", true ) 
					    toggleControl ( source, "brake_reverse", true )
					    toggleControl ( source, "handbrake", true )
					    SED(source, "ToggleVeh", true)
					    addBox("Завести/заглушить машину - ctrl\nВключить/выключить фары - alt", source, 0, 100, 255)
					else
						setControlState(source, "enter_exit", true)
						addBox("Вы не имеете права сесть в данный транспорт.", source, 255, 0, 0)
					end
				elseif(getElementData(theVehicle, "PoliceID") ~= false) then
					if(getElementData(source, "Faction") == 8) then
						toggleControl ( source, "accelerate", true ) 
					    toggleControl ( source, "brake_reverse", true )
					    toggleControl ( source, "handbrake", true )
					    SED(source, "ToggleVeh", true)
					    addBox("Завести/заглушить машину - ctrl\nВключить/выключить фары - alt", source, 0, 100, 255)
					else
						setControlState(source, "enter_exit", true)
						addBox("Вы не имеете права сесть в данный транспорт.", source, 255, 0, 0)
					end
				elseif(getElementData(theVehicle, "MerID") ~= false) then
					if(getElementData(source, "Faction") == 5) then
						toggleControl ( source, "accelerate", true ) 
					    toggleControl ( source, "brake_reverse", true )
					    toggleControl ( source, "handbrake", true )
					    SED(source, "ToggleVeh", true)
					    addBox("Завести/заглушить машину - ctrl\nВключить/выключить фары - alt", source, 0, 100, 255)
					else
						setControlState(source, "enter_exit", true)
						addBox("Вы не имеете права сесть в данный транспорт.", source, 255, 0, 0)
					end
				elseif(getElementData(theVehicle, "Maf1Car") ~= false) then
					if(getElementData(source, "Faction") == 1) then
						toggleControl ( source, "accelerate", true ) 
					    toggleControl ( source, "brake_reverse", true )
					    toggleControl ( source, "handbrake", true )
					    SED(source, "ToggleVeh", true)
					    addBox("Завести/заглушить машину - ctrl\nВключить/выключить фары - alt", source, 0, 100, 255)
					else
						setControlState(source, "enter_exit", true)
						addBox("Вы не имеете права сесть в данный транспорт.", source, 255, 0, 0)
					end
				elseif(getElementData(theVehicle, "Maf2Car") ~= false) then
					if(getElementData(source, "Faction") == 2) then
						toggleControl ( source, "accelerate", true ) 
					    toggleControl ( source, "brake_reverse", true )
					    toggleControl ( source, "handbrake", true )
					    SED(source, "ToggleVeh", true)
					    addBox("Завести/заглушить машину - ctrl\nВключить/выключить фары - alt", source, 0, 100, 255)
					else
						setControlState(source, "enter_exit", true)
						addBox("Вы не имеете права сесть в данный транспорт.", source, 255, 0, 0)
					end
				elseif(getElementData(theVehicle, "Maf3Car") ~= false) then
					if(getElementData(source, "Faction") == 3) then
						toggleControl ( source, "accelerate", true ) 
					    toggleControl ( source, "brake_reverse", true )
					    toggleControl ( source, "handbrake", true )
					    SED(source, "ToggleVeh", true)
					    addBox("Завести/заглушить машину - ctrl\nВключить/выключить фары - alt", source, 0, 100, 255)
					else
						setControlState(source, "enter_exit", true)
						addBox("Вы не имеете права сесть в данный транспорт.", source, 255, 0, 0)
					end
				elseif(getElementData(theVehicle, "Maf4Car") ~= false) then
					if(getElementData(source, "Faction") == 4) then
						toggleControl ( source, "accelerate", true ) 
					    toggleControl ( source, "brake_reverse", true )
					    toggleControl ( source, "handbrake", true )
					    SED(source, "ToggleVeh", true)
					    addBox("Завести/заглушить машину - ctrl\nВключить/выключить фары - alt", source, 0, 100, 255)
					else
						setControlState(source, "enter_exit", true)
						addBox("Вы не имеете права сесть в данный транспорт.", source, 255, 0, 0)
					end
				elseif(getElementData(theVehicle, "ArmyVeh") ~= false) then
					if(getElementData(source, "Faction") == 9) then
						toggleControl ( source, "accelerate", true ) 
					    toggleControl ( source, "brake_reverse", true )
					    toggleControl ( source, "handbrake", true )
					    SED(source, "ToggleVeh", true)
					    addBox("Завести/заглушить машину - ctrl\nВключить/выключить фары - alt", source, 0, 100, 255)
					else
						setControlState(source, "enter_exit", true)
						addBox("Вы не имеете права сесть в данный транспорт.", source, 255, 0, 0)
					end
				elseif(getElementData(theVehicle, "CourierVehID") ~= nil and getElementData(theVehicle, "CourierVehID") ~= false) then
					if(getElementData(theVehicle, "CourierVehID") > 0) then
						if(getElementData(source, "PWork") == 3) then
							if(getElementData(theVehicle, "CourierPlayer") == source) then
								toggleControl ( source, "accelerate", true ) 
							    toggleControl ( source, "brake_reverse", true )
							    toggleControl ( source, "handbrake", true )
							    SED(source, "ToggleVeh", true)
							    addBox("Завести/заглушить машину - ctrl\nВключить/выключить фары - alt", source, 0, 100, 255)
							else
								if(getElementData(theVehicle, "CourierPlayer") == false or getElementData(theVehicle, "CourierPlayer") == nil) then
									showPlayerDialog(source, 22, 1, "Аренда грузового транспортного средства.", "Действительно ли Вы хотите арендовать данное т/c?\nСтоимость аренды: 1000$", "Арендовать", "Отмена")
								else
									addBox("Ошибка: Это не ваша машина!", source, 255, 0, 0)
									setControlState(source, "enter_exit", true)
								end
							end
						else
							setControlState(source, "enter_exit", true)
							addBox("Ошибка: Вы не работаете курьером\nИ не можете сесть в этот транспорт!", source, 255, 0, 0)
						end
					end
				elseif(getElementData(theVehicle, "PrivatePlayer") ~= false) then
					if(tonumber(getElementData(theVehicle, "PrivatePlayer")) == tonumber(getElementData(source, "ID"))) then
						addBox("Завести/заглушить машину - ctrl\nВключить/выключить фары - alt", source, 0, 100, 255)
						toggleControl ( source, "accelerate", true ) 
					    toggleControl ( source, "brake_reverse", true )
					    toggleControl ( source, "handbrake", true )
					    SED(source, "ToggleVeh", true)
					else
						addBox("Ошибка: Это не ваша машина!", source, 255, 0, 0)
						setControlState(source, "enter_exit", true)
					end
				elseif(getElementData(theVehicle, "FishID") ~= false) then
					if(getElementData(source, "NWork") == 7) then
						if(getElementData(theVehicle, "FishPlayer") == false) then
							if(getElementData(source, "FishBoat") == false) then
								showPlayerDialog(source, 89, 1, "Аренда рыболовной лодки", "Действительно ли Вы хотите арендовать рыболовную лодку?\nСтоимость аренды - 250$.", "Арендовать", "Отмена")
							else
								addBox("Ошибка: Это не ваша лодка!", source, 255, 0, 0)
								setControlState(source, "enter_exit", true)
							end
						elseif(getElementData(theVehicle, "FishPlayer") == source) then
							toggleControl ( source, "accelerate", true ) 
						    toggleControl ( source, "brake_reverse", true )
						    toggleControl ( source, "handbrake", true )
						    SED(source, "ToggleVeh", true)
						    addBox("Завести/заглушить лодку - CTRL", source, 0, 100, 255)
						else
							addBox("Ошибка: Вы не работаете рыболовом!", source, 255, 0, 0)
							setControlState(source, "enter_exit", true)
						end
					else
						addBox("Ошибка: Вы не работаете рыболовом!", source, 255, 0, 0)
						setControlState(source, "enter_exit", true)
					end
				else
					local model = getElementModel(theVehicle)
					toggleControl ( source, "accelerate", true ) 
				    toggleControl ( source, "brake_reverse", true )
				    toggleControl ( source, "handbrake", true )
				    SED(source, "ToggleVeh", true)
				    if(model ~= 481) then
					    addBox("Завести/заглушить машину - ctrl\nВключить/выключить фары - alt", source, 0, 100, 255)
					end
				end
			end
		end
	end
	if(seat == 0) then
		if(getElementModel(theVehicle) ~= 481) then
			setVehicleEngineState(theVehicle, false)
		end
	end
end

function clearEnter( player, seat, jacked )
	toggleControl ( player, "accelerate", false ) 
    toggleControl ( player, "brake_reverse", false )
    toggleControl ( player, "handbrake", false )
	setControlState(player, "enter_exit", false)
	if(seat == 0) then
		triggerClientEvent(player, "FuelUpdate", player, math.round(getElementData(source, "Fuel")))
	end
end

function playerInChat( message, type )
	if(getElementData(source, "Mute") == 0) then
		if type == 1 then
			if(getElementData(source, "Login") == true) then
				local mess = message
				cancelEvent()
				local name = getElementData(source, "Name")
				mess = string.gsub(message, "%s+", "")
				if(string.len(mess) > 0) then
					for i, n in pairs(IDS) do
						if(getElementData(IDS[i], "Login") == true) then
							local x, y, z = getElementPosition(IDS[i])
							local x1, y1, z1 = getElementPosition(source)
							local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
							if(dist < 30 or getCameraTarget(n) == source) then
								if(getElementDimension(source) == getElementDimension(n)) then
									if(getElementInterior(source) == getElementInterior(n)) then
										sendClientMessage(name .. " " .. message, n, 232, 183, 227)
									end
								end
							end
						end
					end
				else
					addBox("Ошибка: Вы не ввели сообщение.", source, 255, 0, 0)
				end
			end
		else
			if(getElementData(source, "LiveVCN") ~= false) then
				cancelEvent()
				local name = getElementData(source, "Name")
				for _, player in pairs(IDS) do
					if(getElementData(player, "Login") == true) then
						sendClientMessage("[VCN] " .. name .. ": " .. message, player, 0, 255, 60, false)
					end
				end
			else
				cancelEvent()
				local x1, y1, z1 = getElementPosition(source)
				local name = getElementData(source, "Name")
				if(getElementData(source, "AcceptedCall") == true) then
					if(getElementData(source, "PhonePlayer") ~= false) then
						local secPlayer = getElementData(source, "PhonePlayer")
						if(isElement(secPlayer) == true) then
							if(getElementData(secPlayer, "PhonePlayer") ~= false) then
								local thePlayer = getElementData(secPlayer, "PhonePlayer")
								if(isElement(thePlayer) == true) then
									if(thePlayer == source) then
										sendClientMessage("[ТЕЛ] " .. getElementData(source, "Name") .. ": " .. message, secPlayer, 255, 255, 0)
										for _, player in pairs(IDS) do
											local x, y, z = getElementPosition(player)
											if(getDistanceBetweenPoints3D(x, y, z, x1, y1, z1) < 20 or getCameraTarget(player) == source) then
												if(getElementDimension(source) == getElementDimension(player)) then
													if(getElementInterior(source) == getElementInterior(player)) then
														sendClientMessage( "[По телефону] " .. name .. ": " .. message, player, 255, 255, 255)
													end
												end
											end
										end
									end
								end
							end
						end
					end
				else
					mess = string.gsub(message, "%s+", "")
					if(string.len(mess) > 0) then
						local name = getElementData(source, "Name")
						local x1, y1, z1 = getElementPosition(source)
						if(getElementData(source, "NWork") == 0) then
							if(getPedOccupiedVehicle(source) == false) then
								if(isElement(source) == true) then
									setPedAnimation(source, "PED", "IDLE_chat", 1, true, true, true, true)
									setTimer(function ( thePlayer )
										if(isElement(thePlayer) == true) then
											setPedAnimation(thePlayer, "BSKTBALL", "BBALL_idle_O", 100, false)
										end
									end, 4000, 1, source) 
								end
							end
						end
						for _, player in pairs(IDS) do
							local x, y, z = getElementPosition(player)
							if(getDistanceBetweenPoints3D(x, y, z, x1, y1, z1) < 20 or getCameraTarget(player) == source) then
								if(getElementDimension(source) == getElementDimension(player)) then
									if(getElementInterior(source) == getElementInterior(player)) then
										sendClientMessage( name.. ": " .. message, player, 255, 255, 255)
									end
								end
							end
						end
					else
						addBox("Ошибка: Вы не ввели сообщение.", source, 255, 0, 0)
					end
				end
			end
		end
	else
		cancelEvent()
		local time = getElementData(source, "Mute")
		addBox("Вы не можете говорить ещё " .. time .. " сек.", source, 255, 0, 0)
	end
end

function startCourierWork( )
	addBox("Вы устроились на работу курьером!", client, 0, 60, 255)
	SED(client, "PWork", 3)
end

function onVehicleDeath(  )
	if(getElementData(source, "PCar") ~= false) then
		customDestroyVehicle(source)
	else
		if(getElementData(source, "CourierVehID") ~= nil and getElementData(source, "CourierVehID") ~= false) then
			setTimer(spawnCurierVehicle, 3000, 1, source)
		end
		if(getElementData(source, "CourierVehID") ~= nil and getElementData(source, "CourierVehID") ~= false and getElementData(source, "CourierPlayer") ~= false and getElementData(source, "CourierPlayer") ~= nil) then
			local player = getElementData(source, "CourierPlayer")
			local veh = source
			removeElementData(veh, "CourierPlayer")
			removeElementData(player, "CourierVehicle")
			if(getElementData(player, "mrkCourierEnd") ~= false) then
				local mrk = getElementData(player, "mrkCourierEnd")
				local blp = getElementData(player, "blpCourierEnd")
				removeEventHandler("onMarkerHit", mrk, mrkCourEnd)
				destroyElement(blp)
				destroyElement(mrk)
				removeElementData(player, "mrkCourierEnd")
				removeElementData(player, "blpCourierEnd")
				removeElementData(player, "Gruz")
				removeElementData(player, "Coef")
			end
			if(getElementData(player, "mrkCourierStart") ~= false) then
				local mrk = getElementData(player, "mrkCourierStart")
				local blp = getElementData(player, "blpCourierStart")
				removeEventHandler("onMarkerHit", mrk, startCourierWork)
				destroyElement(mrk)
				destroyElement(blp)
				removeElementData(player, "mrkCourierStart")
				removeElementData(player, "blpCourierStart")
			end
			if(getElementData(player, "mrkCour") ~= false) then
				local mrk = getElementData(player, "mrkCour")
				local blp = getElementData(player, "blpCour")
				removeEventHandler("onMarkerHit", mrk, hitCourEnd)
				destroyElement(mrk)
				destroyElement(blp)
				removeElementData(player, "mrkCour")
				removeElementData(player, "blpCour")
				local bus = tonumber(getElementData(player, "courBiz"))
				OrderBiz[bus]["OrderCourier"] = nil
			end
			addBox("Ваш транспорт уничтожен.\nОтправляйтесь за новым.", player, 255, 0, 0)
		end
		if(getElementData(source, "BusVehTable") ~= false) then
			setTimer(customSpawnVehicle, 3000, 1, source)
			if(getElementData(source, "DriverPlayerBus") ~= false) then
				local pl = getElementData(source, "DriverPlayerBus")
				addBox("Вы сломали автобус и заплатили штраф 1000$", pl, 255, 0, 0)
				setElementMoney(pl, -1000, "Поломка автобуса")
				removeElementData(pl, "VehicleDriverBus")
				removeElementData(source, "DriverPlayerBus")
				removeElementData(pl, "BusStage")
				setTimer(customSpawnVehicle, 3000, 1, source)
				if(getElementData(pl, "mrkBus") ~= nil and getElementData(pl, "mrkBus") ~= false) then
					removeEventHandler("onMarkerHit", getElementData(pl, "mrkBus"), MarkerHit)
					destroyElement(getElementData(pl, "mrkBus"))
					destroyElement(getElementData(pl, "blpBus"))
				end
			end
		end
		if(getElementData(source, "TaxiVehTable") ~= false) then
			setTimer(customSpawnVehicle, 3000, 1, source)
			if(getElementData(source, "TaxiDriverPlayer") ~= nil and getElementData(source, "TaxiDriverPlayer") ~= false) then
				local pl = getElementData(source, "TaxiDriverPlayer")
				setElementMoney(pl, -5000, "Поломка такси")
				removeElementData(pl, "TaxiVehicle")
				removeElementData(source, "TaxiDriverPlayer")
			end
		end
		if(getElementData(source, "MailVeh") ~= false) then
			if(getElementData(source, "MailPlayer") ~= false) then
				local thePlayer = getElementData(source, "MailPlayer")
				removeElementData(source, "MailPlayer")
				removeElementData(thePlayer, "MailVeh")
				setElementMoney(thePlayer, -1500, "Почтальон сломал транспорт.")
				addBox("Ваш транспорт уничтожен.\nШтраф 1500$.\nЧтобы продолжить работу,\nАрендуйте новый мопед.", thePlayer, 255, 0, 0)
				if(getElementData(thePlayer, "blpMail") ~= false) then
					local blp = getElementData(thePlayer, "blpMail")
					local mrk = getElementData(thePlayer, "mrkMail")
					local aff = getEventHandlers("onMarkerHit", mrk)
					destroyElement(mrk)
					destroyElement(blp)
					removeElementData(thePlayer, "mrkMail")
					removeElementData(thePlayer, "blpMail")
				end
			end
			setTimer(customSpawnVehicle, 3000, 1, source)
		end
		if(getElementData(source, "AshCar") ~= false) then
			if(getElementData(source, "AshPlayer") ~= false) then
				local plr = getElementData(source, "AshPlayer")
				removeElementData(plr, "AshVeh")
				removeElementData(source, "AshPlayer")
				if(isElement(plr) == true) then
					removeElementData(plr, "ASH")
					local mrk = getElementData(plr, "mrkAsh")
					local blp = getElementData(plr, "blpAsh")
					destroyElement(mrk)
					destroyElement(blp)
					removeElementData(plr, "mrkAsh")
					removeElementData(plr, "blpAsh")
					addBox("Вы провалили тест на вождение!", plr, 255, 0, 0)
				end
			end
			setElementHealth(source, 1000)
			setTimer(customSpawnVehicle, 3000, 1, source) 
		end
	end
end

function hitMrkMail( hit, dim )
	if(isElement(hit) == true) then
		if(getElementType(hit) == "player") then
			if(getElementData(hit, "mrkMail") == source) then
				if(getElementData(hit, "MailVeh") == getPedOccupiedVehicle(hit)) then
					if(getPedOccupiedVehicleSeat(hit) == 0) then
						if(getElementData(source, "Player") == hit) then
							removeEventHandler("onMarkerHit", source, hitMrkMail)
							destroyElement(source)
							local blp = getElementData(hit, "blpMail")
							destroyElement(blp)
							removeElementData(hit, "mrkMail")
							removeElementData(hit, "blpMail")
							addBox("Направляйтесь к дому,\nЧтобы доставить почту.\n(Маркер помечен на карте)", hit, 0, 100, 255)
							local h = math.random(1, houseit)
							local mrk = createMarker(HouseTable[h]["x"], HouseTable[h]["y"], HouseTable[h]["z"] - 1, "cylinder", 4, 220, 0, 0, 220, hit)
							SED(mrk, "Player", hit)
							local blp = createBlip(HouseTable[h]["x"], HouseTable[h]["y"], HouseTable[h]["z"] - 1, 0, 2, 220, 0, 0, 220, HouseTable[h]["z"] - 1, 64000, hit)
							SED(hit, "blpMail", blp)
							SED(hit, "mrkMail", mrk)
							SED(mrk, "Player", hit)
							addEventHandler("onMarkerHit", mrk, hitMrkMails)
						end
					end
				end
			end
		end
	end
end

function hitMrkMails( hit, dim )
	if(isElement(hit) == true) then
		if(getElementType(hit) == "player") then
			if(getElementData(hit, "mrkMail") == source) then
				local veh = getPedOccupiedVehicle(hit)
				if(veh ~= nil and veh ~= false) then
					if(getElementData(hit, "MailVeh") == getPedOccupiedVehicle(hit)) then
						if(getPedOccupiedVehicleSeat(hit) == 0) then
							removeEventHandler("onMarkerHit", source, hitMrkMails) 
							destroyElement(source)
							local blp = getElementData(hit, "blpMail")
							if(blp ~= false and blp ~= true) then
								destroyElement(blp)
							end
							removeElementData(hit, "blpMail")
							removeElementData(hit, "mrkMail")
							addBox("Вы успешно доставили посылку\nИ заработали 500$", hit, 0, 255, 100)
							setElementMoney(hit, 500, "Доставка посылки.")
							local mrkMail = createMarker(309.44921875, -299.9111328125, 10.922214508057, "cylinder", 4.0, 220, 0, 0, 220, hit)
							local blpMail = createBlip(309.44921875, -299.9111328125, 10.922214508057, 0, 2, 220, 0, 0, 220, 10, 64000, hit)
							addEventHandler("onMarkerHit", mrkMail, hitMrkMail)
							SED(hit, "mrkMail", mrkMail)
							SED(hit, "blpMail", blpMail)
							SED(mrkMail, "Player", hit)
							addBox("Вам необходимо вернуться на склад\nИ забрать новую посылку.\n(На карте создан маркер)", hit, 0, 100, 255)
						end
					end
				else
					local x, y, z = getElementPosition(hit)
					local x1, y1, z1 = getElementPosition(getElementData(hit, "MailVeh"))
					local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
					if(dist < 30) then
						removeEventHandler("onMarkerHit", source, hitMrkMails) 
						destroyElement(source)
						local blp = getElementData(hit, "blpMail")
						if(blp ~= false and blp ~= true) then
							destroyElement(blp)
						end
						removeElementData(hit, "blpMail")
						removeElementData(hit, "mrkMail")
						addBox("Вы успешно доставили посылку и заработали 500$", hit, 0, 60, 255)
						setElementMoney(hit, 500, "Доставка посылки.")
						local mrkMail = createMarker(309.44921875, -299.9111328125, 10.922214508057, "cylinder", 4.0, 220, 0, 0, 220, hit)
						local blpMail = createBlip(309.44921875, -299.9111328125, 10.922214508057, 0, 2, 220, 0, 0, 220, 10, 64000, hit)
						SED(mrkMail, "Player", hit)
						addEventHandler("onMarkerHit", mrkMail, hitMrkMail)
						SED(hit, "mrkMail", mrkMail)
						SED(hit, "blpMail", blpMail)
						addBox("Вам необходимо подъехать к складу.\n(На карте создан маркер)", hit, 0, 60, 255)
					else
						addBox("Ваш мопед слишком далеко от Вас.", hit, 255, 0, 0)
					end
				end
			end
		end
	end
end

function hitCourEnd( hit, dim )
	if(getElementType(hit) == "player") then
		if(getElementData(hit, "mrkCour") ~= false) then
			if(getElementData(hit, "mrkCour") == source) then
				if(getElementData(hit, "CourierVehicle") == getPedOccupiedVehicle(hit)) then
					if(getPedOccupiedVehicleSeat(hit) == 0) then
						local biz = tonumber(getElementData(hit, "courBiz"))
						local price = OrderBiz[biz]["Price"]
						local Products = tonumber(getElementData(hit, "courProd"))
						price = price - Products * 5
						setElementMoney(hit, price, "Курьер")
						BusinessTable[biz]["Products"] = BusinessTable[biz]["Products"] + Products
						OrderBiz[biz]["Products"] = 0
						OrderBiz[biz]["Price"] = 0
						OrderBiz[biz]["Courier"] = nil
						dbExec(mysql, "UPDATE `Business` SET `Products` = ?, `OrderProducts` = ?, `OrderPrice` = ? WHERE `ID` = ?", BusinessTable[biz]["Products"], 0, 0, biz)
						addBox("Вы успешно доставили груз и получили " .. price .. "$.", hit, 0, 100, 255)
						local mrk = getElementData(hit, "mrkCour")
						local blp = getElementData(hit, "blpCour")
						removeEventHandler("onMarkerHit", mrk, hitCourEnd)
						destroyElement(mrk)
						destroyElement(blp)
						removeElementData(hit, "mrkCour")
						removeElementData(hit, "blpCour")
						addBox("Отправляйтесь на склад, чтобы забрать груз.\n (Отмечено на мини-карте)", hit, 0, 60, 255)
						local mrk = createMarker(-1006.375, -1385.2783203125, 10.563765525818, "cylinder", 2.5, 220, 0, 0, 220, hit)
						local blp = createBlip(-1006.375, -1385.2783203125, 9.563765525818, 0, 2, 220, 0, 0, 220, 0, 65535, hit)
						SED(hit, "mrkCourierStart", mrk)
						SED(hit, "blpCourierStart", blp)
						SED(mrk, "courP", hit)
						addEventHandler("onMarkerHit", getElementData(hit, "mrkCourierStart"), courierStart)
					end
				end
			end
		end
	end
end

function courierStart( hit, dim )
	local types = getElementType(hit)
	if(types == "player") then
		if(hit ~= false and hit ~= nil) then
			if(getPedOccupiedVehicle(hit) == getElementData(hit, "CourierVehicle")) then
				if(getPedOccupiedVehicleSeat(hit) == 0) then
					if(getElementData(hit, "mrkCourierStart") == source) then
						local mrk = getElementData(hit, "mrkCourierStart")
						local blp = getElementData(hit, "blpCourierStart")
						removeEventHandler("onMarkerHit", mrk, courierStart)
						destroyElement(mrk)
						destroyElement(blp)
						removeElementData(hit, "mrkCourierStart")
						removeElementData(hit, "blpCourierStart")
						local inputtext = 3000
						local biztog = false
						local biz = 0
						local bizzak = {}
						local iter = 0
						for i, n in pairs(OrderBiz) do
							if(OrderBiz[i]["Products"] > 0) then
								if(OrderBiz[i]["Courier"] == nil) then
									biztog = true
									iter = iter + 1
									bizzak[iter] = {}
									bizzak[iter]["ID"] = i
									bizzak[iter]["Products"] = OrderBiz[i]["Products"]
									bizzak[iter]["Price"] = OrderBiz[i]["Price"]
								end
							end
						end
						if(biztog == false) then
							SED(hit, "Gruz", inputtext)
							local mrkCourierEnd = 0
							local blpCourierEnd = 0
							randomPos = math.random(1, 3)
							if(randomPos == 1) then
								mrkCourierEnd = createMarker(-183.0234375, -969.505859375, 9.423469543457, "cylinder", 2.5, 220, 0, 0, 220, hit)
								blpCourierEnd = createBlip(-183.0234375, -969.505859375, 9.423469543457, 0, 2, 220, 0, 0, 220, 0, 65535, hit)
								addBox("Заказ оформлен.\nВам необходимо отвезти груз в больницу!\nОплата: " .. randomPos * 200 .. "$.", hit, 0, 255, 100)
								SED(hit, "Coef", 1)
							elseif(randomPos == 2) then
								mrkCourierEnd = createMarker(-1558.248046875, 1270.552734375, 7.6996593475342, "cylinder", 2.5, 220, 0, 0, 220, hit)
								blpCourierEnd = createBlip(-1558.248046875, 1270.552734375, 7.6996593475342, 0, 2, 220, 0, 0, 220, 0, 65535, hit)
								addBox("Заказ оформлен.\nВам необходимо отвезти груз на стадион!\nОплата: " .. randomPos * 200 .. "$.", hit, 0, 255, 100)
								SED(hit, "Coef", 2)
							elseif(randomPos == 3) then
								mrkCourierEnd = createMarker(373.5146484375, 985.8154296875, 11.344575881958, "cylinder", 2.5, 220, 0, 0, 220, hit)
								blpCourierEnd = createBlip(373.5146484375, 985.8154296875, 11.344575881958, 0, 2, 220, 0, 0, 220, 0, 65535, hit)
								addBox("Заказ оформлен.\nВам необходимо отвезти груз в торговый центр!\nОплата: " .. randomPos * 200 .. "$.", hit, 0, 255, 100)
								SED(hit, "Coef", 3)
							end
							SED(hit, "mrkCourierEnd", mrkCourierEnd)
							SED(hit, "blpCourierEnd", blpCourierEnd)
							addEventHandler("onMarkerHit", mrkCourierEnd, mrkCourEnd)
						else
							local biz = bizzak[(math.random(1, #bizzak))]
							local bus = biz["ID"]
							local Products = biz["Products"]
							local price = biz["Price"]
							if(Products > 3000) then
								Products = 3000
							end
							OrderBiz[iter]["OrderCourier"] = hit
							local x, y, z = BusinessTable[bus]["px"], BusinessTable[bus]["py"],  BusinessTable[bus]["pz"]
							local mrk = createMarker(x, y, z, "checkpoint", 2.6, 220, 0, 0, 220, hit)
							local blp = createBlip(x, y, z, 0, 2, 220, 0, 0, 220, 0, 64000, hit)
							SED(hit, "mrkCour", mrk)
							SED(hit, "blpCour", blp)
							SED(hit, "courBiz", bus)
							SED(hit, "courProd", Products)
							addEventHandler("onMarkerHit", mrk, hitCourEnd)
							addBox("Ваша цель - отвезти груз до бизнеса.\n (Отмечено на карте)", hit, 0, 255, 100)
							addBox("Стоимость груза: " .. price .. "$.", hit, 0, 255, 100)
						end
					end
				end
			end
		end
	end
end

function onCourierOrderEnd( pay )
	setElementMoney(client, pay, "Курьер работа")
end

function updateTime()
	local realtime = getRealTime()
	local hours = realtime.hour
	if hours >= 24 then
		hours = hours - 24
	elseif hours < 0 then
		hours = hours + 24
	end
	minute = realtime.minute
	setTime(hours, minute)
	nextupdate = (60-realtime.second) * 1000
	setMinuteDuration( nextupdate )
	setTimer( setMinuteDuration, nextupdate + 5, 1, 60000 )
end

function Benz2MarkerHit( hit, dim )
	if(getElementType(hit) == "player") then
		local veh = getPedOccupiedVehicle(hit)
		if(veh ~= nil and veh ~= false) then
			local benz = getElementData(veh, "Benzovoz")
			local biz = getElementData(hit, "BusOwnID")
			if(benz == biz) then
				if(getPedOccupiedVehicleSeat(hit) == 0) then
					local benzkol = tonumber(getElementData(veh, "BenzKol"))
					if(benzkol ~= nil) then
						if(benzkol > 0) then
							local Products = BusinessTable[biz]["Products"]
							if(Products + benzkol > BusinessTable[biz]["MaxProducts"]) then
								BusinessTable[biz]["Products"] = BusinessTable[biz]["MaxProducts"]
								addBox("Склад максимально заполнен.", hit, 0, 60, 255)
							else
								addBox("Вы успешно доставили " .. benzkol .. " кг продуктов.", hit, 0, 255, 60)
								BusinessTable[biz]["Products"] = BusinessTable[biz]["Products"] + benzkol
								local mrk = createMarker(-1006.5986328125, -1388.630859375, 10.581163406372, "cylinder", 2.4, 220, 0, 0, 220, hit)
								SED(hit, "mrkBenz1", mrk)
								addEventHandler("onMarkerHit", mrk, Benz1MarkerHit)
								local blp = createBlip(-1006.5986328125, -1388.630859375, 10.581163406372, 0, 2, 220, 0, 0, 220, 3, 64000, hit)
								SED(hit, "blpBenz1", blp)
								addBox("Вы можете продолжить доставку.", hit, 0, 255, 60)
							end
							removeElementData(veh, "BenzKol")
							local mrk = getElementData(hit, "mrkBenz2")
							local blp = getElementData(hit, "blpBenz2")
							removeEventHandler("onMarkerHit", mrk, Benz2MarkerHit)
							destroyElement(mrk)
							destroyElement(blp)
							removeElementData(hit, "mrkBenz2")
							removeElementData(hit, "blpBenz2")
							dbExec(mysql, "UPDATE `Business` SET `Products` = ? WHERE `ID` = ?", BusinessTable[biz]["Products"], biz)
						end
					else
						addBox("Произошла системная ошибка, повторите попытку.", hit, 255, 0, 0)
						removeElementData(veh, "BenzKol")
					end
				end
			end
		end
	end
end

function endCapt(  )
	Capt = false
	local frag1 = CaptZone["Frag1"]
	local frag2 = CaptZone["Frag2"]
	local fact1 = CaptZone["Fact1"]
	local fact2 = CaptZone["Fact2"]
	local biz = CaptZone["Lisitem"]
	if(frag1 ~= 0 and frag2 ~= 0) then
		if(frag1 <= frag2) then
			for i, n in pairs(IDS) do
				if(getElementData(n, "Login") == true) then
					if(getElementData(n, "Faction") == fact2) then
						addBox("Вы успешно защитили свой бизнес.", n, 0, 60, 250)
					elseif(getElementData(n, "Faction") == fact1) then
						addBox("Вы провалили захват бизнеса.", n, 255, 0, 0)
					end
				end
			end
			CHT[biz]["Mafia"] = fact2
		else
			for i, n in pairs(IDS) do
				if(getElementData(n, "Login") == true) then
					if(getElementData(n, "Faction") == fact2) then
						addBox("Вы не защитили свой бизнес.", n, 255, 0, 0)
					elseif(getElementData(n, "Faction") == fact1) then
						addBox("Вы успешно захватили бизнес.", n, 0, 60, 250)
					end
				end
			end
			CHT[biz]["Mafia"] = fact1
		end
	elseif(frag1 == 0 and frag2 == 0) then
		for i, n in pairs(IDS) do
			if(getElementData(n, "Login") == true) then
				if(getElementData(n, "Faction") == fact2) then
					addBox("Вы успешно защитили свой бизнес.", n, 0, 60, 250)
				elseif(getElementData(n, "Faction") == fact1) then
					addBox("Вы провалили захват бизнеса.", n, 255, 0, 0)
				end
			end
		end
		CHT[biz]["Mafia"] = fact2
	else
		if(frag1 <= frag2) then
			for i, n in pairs(IDS) do
				if(getElementData(n, "Login") == true) then
					if(getElementData(n, "Faction") == fact2) then
						addBox("Вы успешно защитили свой бизнес.", n, 0, 60, 250)
					elseif(getElementData(n, "Faction") == fact1) then
						addBox("Вы провалили захват бизнеса.", n, 255, 0, 0)
					end
				end
			end
			CHT[biz]["Mafia"] = fact2
		else
			for i, n in pairs(IDS) do
				if(getElementData(n, "Login") == true) then
					if(getElementData(n, "Faction") == fact2) then
						addBox("Вы не защитили свой бизнес.", n, 255, 0, 0)
					elseif(getElementData(n, "Faction") == fact1) then
						addBox("Вы успешно захватили бизнес.", n, 0, 60, 250)
					end
				end
			end
			CHT[biz]["Mafia"] = fact1
		end
	end
	dbExec(mysql, "UPDATE `HotelCapture` SET `Mafia` = ? WHERE `ID` = ?", CHT[biz]["Mafia"], biz)
	CaptZone["Lisitem"] = nil
	CaptZone["Fact1"] = nil
	CaptZone["Fact2"] = nil
	CaptZone["Frag1"] = nil
	CaptZone["Frag2"] = nil
end

function pulseTime( )
	local Times = getRealTime()
	if(Times.hour ~= payDay) then
		payDay = Times.hour
		dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = 'Maf1Gruz'", Server["Maf1Gruz"])
		dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = 'Maf2Gruz'", Server["Maf2Gruz"])
		dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = 'Maf3Gruz'", Server["Maf3Gruz"])
		dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = 'Maf4Gruz'", Server["Maf4Gruz"])
		dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = 'ArmyGruz'", Server["ArmyGruz"])
		dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = 'Gruz'", Server["Gruz"])
		for i, n in pairs(HouseTable) do
			if(HouseTable[i]["PID"] > 0) then
				if(HouseTable[i]["PayDay"] > 1) then
					HouseTable[i]["PayDay"] = HouseTable[i]["PayDay"] - 1
					dbExec(mysql, "UPDATE `House` SET `PayDay` = ? WHERE `ID` = ?", HouseTable[i]["PayDay"], i)
				else
					local name = HouseTable[i]["PName"]
					local player = HouseTable[i]["OwnerPlayer"]
					if(player ~= nil) then
						SED(player, "House", 0)
						addBox("Вы потеряли Ваш дом\nЗа неуплату налогов.", player, 255, 0, 0)
						local id = getElementData(player, "ID")
						if(PrivateCar[id] ~= nil) then
							local veh = PrivateCar[id]
							local vehid = getElementData(veh, "ID")
							VehicleTable[vehid] = nil
							PrivateCar[id] = nil
							destroyElement(veh)
						end
					end
					HouseTable[i]["PayDay"] = 24
					HouseTable[i]["PID"] = 0
					HouseTable[i]["Car"] = 0
					HouseTable[i]["PName"] = ""
					HouseTable[i]["OwnerPlayer"] = nil
					dbExec(mysql, "UPDATE `House` SET `PayDay` = 24, `PID` = 0, `Car` = 0, `PName` = '' WHERE `ID` = ?", i)
					dbExec(mysql, "UPDATE `Accounts` SET `House` = 0 WHERE `ID` = ?", HouseTable[i]["PID"])
					destroyElement(HouseTable[i]["Pickup"])
					destroyElement(HouseTable[i]["Blip"])
					HouseTable[i]["Pickup"] = createPickup(HouseTable[i]["x"], HouseTable[i]["y"], HouseTable[i]["z"], 3, 1273, 0)
					HouseTable[i]["Blip"] = createBlip(HouseTable[i]["x"], HouseTable[i]["y"], HouseTable[i]["z"], 31, 2, 0, 0, 0, 0, 0, 250)
					SED(HouseTable[i]["Pickup"], "ID", house)
				end
			end
		end
		for i, player in pairs(IDS) do
			if(getElementData(player, "Login") == true) then
				if(getElementData(player, "VipType") > 0 and getElementData(player, "VipType") < 4) then
					getExp(player, 2)
				elseif(getElementData(player, "VipType") == 3) then
					getExp(player, 3)
				else
					getExp(player, 1)
				end
				local EXP = tonumber(getElementData(player, "Exp"))
				local Level = tonumber(getElementData(player, "Lvl"))
				local Money = 0
				local str = "Чек-лист штата Vice City\n------------------------------" .. "\nОпыт: " .. EXP .. " / " .. tostring(8 + ((Level - 1) * 4))
				if(tonumber(getElementData(player, "PayDay")) ~= nil) then
					if(getElementData(player, "VipType") > 0) then
						if(getElementData(player, "VipType") == 1) then
							SED(player, "PayDay", tonumber(getElementData(player, "VipType")) + 200)
						elseif(getElementData(player, "VipType") == 2) then
							SED(player, "PayDay", tonumber(getElementData(player, "VipType")) + 400)
						elseif(getElementData(player, "VipType") == 3) then
							SED(player, "PayDay", tonumber(getElementData(player, "VipType")) + 600)
						elseif(getElementData(player, "VipType") == 4) then
							SED(player, "PayDay", tonumber(getElementData(player, "VipType")) + 700)
						end
					end
					str = str .. "\nВаша заработная плата: " .. getElementData(player, "PayDay") .. "$"
					setElementMoney(player, tonumber(getElementData(player, "PayDay")), "Пейдей")
					removeElementData(player, "PayDay")
				else
					if(getElementData(player, "VipType") > 0) then
						if(getElementData(player, "VipType") == 1) then
							SED(player, "PayDay", 200)
						elseif(getElementData(player, "VipType") == 2) then
							SED(player, "PayDay", 400)
						elseif(getElementData(player, "VipType") == 3) then
							SED(player, "PayDay", 600)
						elseif(getElementData(player, "VipType") == 4) then
							SED(player, "PayDay", 700)
						end
						str = str .. "\nВаша заработная плата: " .. getElementData(player, "PayDay") .. "$"
						setElementMoney(player, tonumber(getElementData(player, "PayDay")), "Пейдей")
						removeElementData(player, "PayDay")
					end
				end
				if(getElementData(player, "Faction") >= 1 and getElementData(player, "Faction") <= 9) then
                    local fact = tonumber(getElementData(player, "Faction"))
                    local rank = tonumber(getElementData(player, "Rank"))
                    setElementMoney(player, ZpTable[fact][rank], "ЗП")
                    str = str .. "\nВыплата организации: " .. ZpTable[fact][rank] .. "$."
                end
				Money = tonumber(getElementData(player, "Money"))
				str = str .."\nДенег на счету: " .. Money
				str = str .. "\n------------------------------"
				addBox(str, player, 0, 100, 255)
				local Wanted = tonumber(getElementData(player, "Wanted"))
				if(Wanted > 0) then
					Wanted = Wanted - 1
					addBox("Ваш уровень розыска понижен.", player, 255, 255, 0)
					SED(player, "Wanted", Wanted)
					setPlayerWantedLevel(player, Wanted)
				end
				dbExec(mysql, "UPDATE `Accounts` SET `Exp` = ?, `Lvl` = ?, `Wanted` = ? WHERE `Name` = ?", EXP, Level, Wanted, getElementData(player, "Name"))
				triggerClientEvent(player, "onEXPUpdate", player, getElementData(player, "Exp"), getElementData(player, "Lvl"))
			else
			end
		end
		for i, n in pairs(BusinessTable) do
			if(BusinessTable[i]["Owner"] > 0) then
				if(BusinessTable[i]["PayDay"] > 1) then
					if(BusinessTable[i]["PayDay"] < 10) then
						local pl = BusinessTable[i]["OwnerPlayer"]
						if(pl ~= nil) then
							if(isElement(pl) == true) then
								if(getElementType(pl) == "player") then
									addBox("Не забывайте оплачивать налоги бизнеса!", pl, 255, 255, 0)
								end
							end
						end
					end
					BusinessTable[i]["PayDay"] = BusinessTable[i]["PayDay"] - 1
					dbExec(mysql, "UPDATE `Business` SET `PayDay` = ? WHERE `ID` = ?", BusinessTable[i]["PayDay"], i)
				else
					local name = BusinessTable[i]["OwnerName"]
					BusinessTable[i]["PayDay"] = 4
					BusinessTable[i]["Owner"] = 0
					BusinessTable[i]["OwnerName"] = ""
					BusinessTable[i]["Money"] = 0
					BusinessTable[i]["Products"] = 0
					if(i < 10) then
						BusinessTable[i]["Benzovoz"] = 0
						BusinessTable[i]["MaxProducts"] = 100000
						BusinessTable[i]["Open"] = true
					end
					local pl = BusinessTable[i]["OwnerPlayer"]
					if(pl ~= nil) then
						addBox("Вы не оплатили бизнес, и он был конфискован.", pl, 255, 0, 0)
						SED(pl, "BusOwnID", 0)
					end
					dbExec(mysql, "UPDATE `Business` SET `Owner` = ?, `OwnerName` = ?, `Benzovoz` = ?, `PayDay` = ?, `Money` = ?, `MaxProducts` = ?, `Open` = ?, `Products` = ? WHERE `ID` = ?", 0, "", 0, 4, 0, 100000, 1, 0, i)
					dbExec(mysql, "UPDATE `Accounts` SET `BusinessID` = ? WHERE `Name` = ?", 0, name)
				end
			end
		end
		if(Times.hour == 5) then
			dbExec(mysql, "UPDATE `Accounts` SET `Ban` = `Ban` - 1 WHERE `Ban` > 0")
			dbExec(mysql, "UPDATE `Accounts` SET `VipDay` = `VipDay` - 1 WHERE `VipDay` > 1")
			dbExec(mysql, "UPDATE `Accounts` SET `VipDay` = 0, `VipType` = 0 WHERE `VipDay` = 1")
			restartResource(getThisResource())
		end
	end
	for i, veh in pairs(VehicleTable) do
		if(VehicleTable[i]["Vehicle"] ~= false and VehicleTable[i]["Vehicle"] ~= nil) then
			local veh = VehicleTable[i]["Vehicle"]
			if(isElement(veh) == false) then
				VehicleTable[i] = nil
			else
				if(getVehicleEngineState(VehicleTable[i]["Vehicle"]) == true) then
					SED(VehicleTable[i]["Vehicle"], "Fuel", getElementData(VehicleTable[i]["Vehicle"], "Fuel") - 0.05)
					if(getElementData(VehicleTable[i]["Vehicle"], "Fuel") <= 0) then
						if(getElementModel(VehicleTable[i]["Vehicle"]) ~= 481) then
							setVehicleEngineState(VehicleTable[i]["Vehicle"], false)
						end
					end
				end
			end
		end
	end
	for i, player in pairs(IDS) do
		if(isElement(player) == true) then
			if(getElementData(player, "Login") == true) then
				if(getElementData(player, "Mute") > 0) then
					local time = getElementData(player, "Mute")
					time = time - 1
					if(time == 0) then
						SED(player, "Mute", 0)
						addBox("Затычка снята.", player, 255, 0, 0)
						dbExec(mysql, "UPDATE `Accounts` set `Mute` = ? WHERE `ID` = ?", time, getElementData(player, "AccID"))
					else
						SED(player, "Mute", time)
					end
				end
			end
			if(isElement(player) == true) then
				if(getPedOccupiedVehicle(player) ~= nil and getPedOccupiedVehicle(player) ~= false) then
					local a = getPedOccupiedVehicle(player)
					triggerClientEvent(player, "FuelUpdate", player, math.round(getElementData(a, "Fuel")))
				end
			end
			if(getElementData(IDS[i], "Login") == true) then
				if(getElementData(IDS[i], "Food") ~= false) then
					local food = getElementData(IDS[i], "Food")
					if(food - 0.025 >= 0) then
						SED(IDS[i], "Food", tonumber(getElementData(IDS[i], "Food") - 0.025))
						if(math.round(tonumber(food)) ~= math.round(tonumber(getElementData(IDS[i], "Food")))) then
							triggerClientEvent(IDS[i], "Food", IDS[i], math.round(tonumber(getElementData(IDS[i], "Food"))))
						end
					end
				end
				local secPlayer = IDS[i]
				if(getElementData(secPlayer, "PoliceJail") ~= false) then
					if(getElementData(secPlayer, "PoliceJail") > 0) then
						SED(secPlayer, "PoliceJail", tonumber(getElementData(secPlayer, "PoliceJail")) - 1)
					elseif(getElementData(secPlayer, "PoliceJail") == 0) then
						dbExec(mysql, "UPDATE `Accounts` SET `PoliceJail` = ? WHERE `ID` = ?", getElementData(secPlayer, "PoliceJail"), getElementData(secPlayer, "AccID"))
						removeElementData(secPlayer, "PoliceJail")
						setElementPosition(secPlayer, 509.013671875, 507.142578125, 11.002715110779)
						setElementInterior(secPlayer, 0)
						addBox("Вы отсидели свой срок.", secPlayer, 255, 255, 0)
					end
				end
			end
		end
	end
end

function healthForFood(  )
	for i, p in pairs(IDS) do
		if(getElementData(p, "Login") == true) then
			if(getElementData(p, "Food") <= 1) then
				setElementHealth(p, getElementHealth(p) - 1)
			end
		end
	end
end

setTimer(healthForFood, 6000, 0)

function showPlayerDialog( ... )
	if(arg[1] ~= nil) then
		if(arg[2] ~= nil) then
			if(tonumber(arg[2]) ~= nil) then
				if(tonumber(arg[2]) > 0) then
					if(arg[3] ~= nil) then
						if(tonumber(arg[3]) ~= nil) then
							if(arg[4] ~= nil) then
								if(arg[5] ~= nil) then
									if(arg[6] ~= nil) then
										if(arg[7] ~= nil) then
											triggerClientEvent(arg[1], "showPlayerDialog", arg[1], arg)
										end
									end
								end
							end
						end
					end
				end
			end
		end
	end
end

function gpsHit( hit, dim )
	if(getElementType(hit) == "player") then
		local id = getElementData(hit, "ID")
		if(GPST[id] ~= nil) then
			if(isElement(GPST[id]["Pickup"]) == true) then
				if(GPST[id]["Pickup"] ~= nil) then
					removeEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
					destroyElement(GPST[id]["Pickup"])
					destroyElement(GPST[id]["Blip"])
					GPST[id] = nil
					addBox("Вы достигли до точки назначения.", hit, 255, 0, 0)
				end
			end
		end
	end
end

function inputfunc(  player, key, keyState )
	if(getPedOccupiedVehicle(player) ~= false) then
		if(getElementData(player, "ToggleVeh") == true) then
			local veh = getPedOccupiedVehicle(player)
			if(getPedOccupiedVehicleSeat(player) == 0) then
				if(getVehicleEngineState(veh) == false) then
					if(getElementData(veh, "BusVehTable") == false) then
						if(getElementData(veh, "CourierVehID") == false) then
							if(getElementData(veh, "TaxiVehTable") == false) then
								if(getElementData(veh, "AshCar") == false) then
									if(getElementData(veh, "Fuel") > 0) then
										setVehicleEngineState(veh, true)
									else
										addBox("В транспорте закончился бензин", player, 255, 0, 0)
									end
								else
									if(getElementData(veh, "Fuel") > 0) then
										setVehicleEngineState(veh, true)
									else
										addBox("В транспорте закончился бензин", player, 255, 0, 0)
									end
								end
							else
								if(getElementData(veh, "TaxiVehTable") > 0) then
									if(getElementData(player, "PWork") == 2) then
										if(getElementData(player, "TaxiVehicle") == veh) then
											if(getElementData(veh, "Fuel") > 0) then
												setVehicleEngineState(veh, true)
											else
												addBox("Ошибка: В транспорте закончился бензин", player, 255, 0, 0)
											end
										else
										end
									else
										addBox("Ошибка: Вы не работаете таксистом.", player, 255, 0, 0)
									end
								end
							end
						else
							if(getElementData(veh, "CourierPlayer") == player) then
								if(getElementData(veh, "Fuel") > 0) then
									setVehicleEngineState(veh, true)
								end
							else
							end
						end
					else
						if(getElementData(veh, "DriverPlayerBus") == player) then
							if(getElementData(veh, "Fuel") > 0) then
								setVehicleEngineState(veh, true)
							end
						end
					end
				else
					if(getElementModel(veh) ~= 481) then
						setVehicleEngineState(veh, false)
					end
				end
			end
		end
	end
end

function mrkCourEnd( hit, dim )
	if(getElementType(hit) == "player") then
		if(getPedOccupiedVehicle(hit) == getElementData(hit, "CourierVehicle")) then
			if(getPedOccupiedVehicleSeat(hit) == 0) then
				if(getElementData(hit, "mrkCourierEnd") == source) then
					local gruzk = tonumber(getElementData(hit, "Coef")) * 1000
					setElementMoney(hit, gruzk, "Курьер")
					addBox("Поздравляем, Вы заработали " .. gruzk .. "$.\nОтправляйтесь на склад за новым заказом.", hit, 0, 255, 60)
					removeEventHandler("onMarkerHit", source, mrkCourEnd)
					destroyElement(source)
					local blp = getElementData(hit, "blpCourierEnd")
					destroyElement(blp)
					local mrkCourierStart = createMarker(-1006.375, -1385.2783203125, 10.563765525818, "cylinder", 2.5, 220, 0, 0, 220, hit)
					local blpCourierStart = createBlip(-1006.375, -1385.2783203125, 9.563765525818, 0, 2, 220, 0, 0, 220, 0, 65535, hit)
					addEventHandler("onMarkerHit", mrkCourierStart, courierStart)
					SED(mrkCourierStart, "courP", hit)
					SED(hit, "mrkCourierStart", mrkCourierStart)
					SED(hit, "blpCourierStart", blpCourierStart)
					removeElementData(hit, "mrkCourierEnd")
					removeElementData(hit, "blpCourierEnd")
					removeElementData(hit, "Coef")
				end
			end
		end
	end
end

function onHitGruzilo( hit, dim )
	if(getElementType(hit) == "player") then
		local veh = getPedOccupiedVehicle(hit)
		if(veh ~= false and veh ~= nil) then
			if(getPedOccupiedVehicleSeat(hit) == 0) then
				if(getElementData(veh, "ArmyCar") ~= false) then
					if(getElementData(veh, "ArmyGruz") ~= false) then
						if(getElementData(veh, "ArmyGruz") > 0) then
							local gruz = tonumber(getElementData(veh, "ArmyGruz"))
							if(Server["ArmyGruz"] == nil) then
								Server["ArmyGruz"] = 0
							end
							Server["ArmyGruz"] = Server["ArmyGruz"] + gruz
							removeElementData(veh, "ArmyGruz")
							addBox("Вы доставили " .. gruz .. " кг груза на военный склад!", hit, 0, 255, 60)
							addBox("На военном складе сейчас " .. gruz .. " кг груза.", hit, 0, 255, 60)
							local blip = getElementData(hit, "blpArmyGruzilo")
							local mrk = getElementData(hit, "mrkArmyGruzilo")
							removeEventHandler("onMarkerHit", mrk, onHitGruzilo)
							removeElementData(hit, "blpArmyGruzilo")
							removeElementData(hit, "mrkArmyGruzilo")
							destroyElement(mrk)
							destroyElement(blip)
							local mrk = createMarker(-662.0888671875, -1414.3330078125, 11.16068649292, "checkpoint", 2, 220, 0, 0, 220, hit)
					    	local blp = createBlip(-662.0888671875, -1414.3330078125, 11.16068649292, 0, 2, 220, 0, 0, 220, 0, 16000, hit)
					    	SED(hit, "mrkArmyGruz", mrk)
					    	SED(hit, "blpArmyGruz", blp)
					    	addEventHandler("onMarkerHit", mrk, onMrkArmyGruzHit)
						else
							addBox("Ваша машина оказалась пустой. Пожалуйста, снова отправляйтесь в порт.", hit, 0, 60, 255)
							removeElementData(veh, "ArmyGruz")
						end
					else
						addBox("Ваша машина оказалась пустой. Пожалуйста, снова отправляйтесь в порт.", hit, 0, 60, 255)
					end
				end
			end
		end
	end
end

function inputlalt( player, key, state )
	if(getElementData(player, "Login") == true) then
		local veh = getPedOccupiedVehicle(player)
		if(veh ~= false) then
			if(getPedOccupiedVehicleSeat(player) == 0) then
				if(getElementModel(veh) ~= 481) then
					if(getVehicleOverrideLights(veh) == 1) then
						setVehicleOverrideLights(veh, 2)
					else
						setVehicleOverrideLights(veh, 1)
					end
				end
			end
		end
	end
end

function onDialogResponse( dialogid, response, inputtext, listitem )
	if(dialogid == 3) then
		if(response == true) then
			SED(client, "PWork", 1)
			updatePlayerAccount(client, "Work", 1)
			addBox("Вы устроились на работу водителем автобуса.", client, 0, 60, 255)
		else
		end
	elseif(dialogid == 4) then
		if(response == true) then
			if(getElementData(client, "mrkBus") ~= false and getElementData(client, "mrkBus") ~= nil) then
				removeEventHandler("onMarkerHit", getElementData(client, "mrkBus"), MarkerHit)
				if(isElement(getElementData(client, "mrkBus")) == true) then
					destroyElement(getElementData(client, "mrkBus"))
					destroyElement(getElementData(client, "blpBus"))
					removeElementData(source, "BusStage")
					removeElementData(source, "March")
				end
				addBox("Вы уволились с работы водителем автобуса.", client, 0, 60, 255)
			end
			SED(client, "PWork", 0)
			updatePlayerAccount(client, "Work", 0)
			if(getElementData(client, "VehicleDriverBus") ~= false and getElementData(client, "VehicleDriverBus") ~= nil) then
				local veh = getElementData(client, "VehicleDriverBus")
				local id = getElementData(veh, "BusVehTable")
				setTimer(customSpawnVehicle, 100, 1, veh)
				removeElementData(veh, "DriverPlayerBus")
				removeElementData(client, "VehicleDriverBus")
				removeElementData(client, "BusStage")
			end
		else
		end
	elseif(dialogid == 5) then
		if(response == true) then
			if(tonumber(getElementData(client, "Money")) > 100) then
				local veh = getPedOccupiedVehicle(client)
				if(veh ~= false) then
					if(getElementData(veh, "BusVehTable") ~= false) then
						SED(veh, "DriverPlayerBus", client)
						SED(client, "VehicleDriverBus", veh)
						setElementMoney(client, -100, "Аренда автобуса")
						if(getElementData(veh, "BusPark") == 1) then
							SED(client, "March", 1) 
						else
							SED(client, "March", 2) 
						end
						createNextCP(client)
						toggleControl ( client, "accelerate", true ) 
						toggleControl ( client, "brake_reverse", true )
						toggleControl ( client, "handbrake", true )
						SED(client, "ToggleVeh", true)
						addBox("Вы успешно арендовали автобус.\nОтправляйтесь по чекпоинтам,\nУстановленным на пути.\n \nУдачи на дорогах и соблюдайте ПДД!", client, 0, 255, 100)
					else
						addBox("Произошла ошибка, повторите попытку.", client, 255, 0, 0)
						setControlState(source, "enter_exit", true)
					end
				else
					addBox("Произошла ошибка, повторите попытку.", client, 255, 0, 0)
					setControlState(source, "enter_exit", true)
				end
			else
				setControlState(client, "enter_exit", true)
				addBox("У вас недостаточно денег, чтобы арендовать данный транспорт", client, 255, 0, 0)
			end
		elseif(response == false) then
			setControlState(client, "enter_exit", true)
		end
	elseif(dialogid == 22) then
		if(response == true) then
			if(getElementData(client, "Money") >= 1000) then
				local veh = getPedOccupiedVehicle(client)
				if(veh ~= nil and veh ~= false) then
					SED(veh, "CourierPlayer", client)
					SED(client, "CourierVehicle", veh)
					setElementMoney(client, -1000, "Аренда курьер")
					toggleAllControls(client, true)
					addBox("Вы успешно арендовали грузовое\nТранспортное средство.", client, 0, 255, 60)
					addBox("Отправляйтесь на склад, чтобы забрать груз.\n(Отмечено на мини-карте)", client, 0, 60, 255)
					local mrk = createMarker(-1006.375, -1385.2783203125, 10.563765525818, "cylinder", 2.5, 220, 0, 0, 220, client)
					local blp = createBlip(-1006.375, -1385.2783203125, 9.563765525818, 0, 2, 220, 0, 0, 220, 0, 65535, client)
					SED(client, "mrkCourierStart", mrk)
					SED(client, "blpCourierStart", blp)
					SED(mrk, "courP", client)
					SED(veh, "CourierPlayer", client)
					toggleControl ( client, "accelerate", true ) 
					toggleControl ( client, "brake_reverse", true )
					toggleControl ( client, "handbrake", true )
					SED(client, "ToggleVeh", true)
					addEventHandler("onMarkerHit", getElementData(client, "mrkCourierStart"), courierStart)
				else
					addBox("Произошла ошибка.", client, 255, 0, 0)
				end
			else
				setControlState(client, "enter_exit", true)
				addBox("У Вас недостаточно денег для аренды данного т/c.", client, 255, 0, 0)
			end
		else
			addBox("Вы отказались от аренды грузового транспортного средства.", client, 255, 0, 0)
			setControlState(client, "enter_exit", true)
		end
	elseif(dialogid == 24) then
		if(response == true) then
			if(listitem >= 0) then
				setPedAnimation(client, AnimList[listitem]["Block"], AnimList[listitem]["Anim"], 4100, true)
				bindKey(client, "space", "down", function ( pl )
					setPedAnimation(pl, "BSKTBALL", "BBALL_idle_O", 1, false)
					unbindKey(pl, "space", "down")
				end, client)
			end
		else

		end
	elseif(dialogid == 49) then
		if(response == true) then
			local fuel = inputtext
			fuel = string.gsub(inputtext, "%s+", "")
			local ch = string.len(fuel)
			if(ch ~= 0) then
				local b = false
				for i=1,ch do
					local stl = string.sub(fuel, i, i)
					if((string.byte(stl) > 47 and string.byte(stl) < 58) ) then
					else
						b = true
						showPlayerDialog(client, 49, 2, "Заправка транспортного средства", "Введите количество литров\nКоторое Вы хотите заправить.\nЦена за литр: 50$", "Заправить", "Отмена")
						return false
					end
				end 
				if(b == false) then
					local fuel = math.round(inputtext)
					if(fuel > 0) then
						if(tonumber(getElementData(getPedOccupiedVehicle(client), "Fuel")) + fuel < 101) then
							local zp = getElementData(client, "Fstation")
							if(tonumber(getElementData(client, "Money")) - fuel * BusinessTable[zp]["P1"] > 0) then
								if(zp ~= false) then
									local pr = BusinessTable[zp]["Products"]
									if(pr - fuel * 5 >= 0) then
										BusinessTable[zp]["Products"] = BusinessTable[zp]["Products"] - fuel * 5
										BusinessTable[zp]["Money"] = BusinessTable[zp]["Money"] + fuel * BusinessTable[zp]["P1"]
										local veh = getPedOccupiedVehicle(client)
										SED(veh, "Fuel", tonumber(getElementData(veh, "Fuel")) + fuel)
										setElementMoney(client, fuel * BusinessTable[zp]["P1"] * (-1), "Покупка бенз")
										removeElementData(client, "Fstation")
										dbExec(mysql, "UPDATE `Business` SET `Money` = ?, `Products` = ? WHERE `ID` = ?", BusinessTable[zp]["Money"], BusinessTable[zp]["Products"], zp)
										addBox("Вы заправили " .. fuel .. " л. бензина.", client, 0, 255, 100)
									else
										addBox("Ошибка: На складе данной заправки недостаточно топлива.", client, 255, 0, 0)
									end
								else
									addBox("Ошибка: Произошла системная ошибка.", client, 255, 0, 0)
								end
							else
								addBox("Ошибка: У вас недостаточно денег", client, 255, 0, 0)
								removeElementData(client, "Fstation")
							end
						else
							addBox("Ошибка: Ваш транспорт не вмещает\nБольше 100 литров!", client, 255, 0, 0)
							removeElementData(client, "Fstation")
						end
					else
						addBox("Ошибка: Некорректно введено число.", client, 255, 0, 0)
						removeElementData(client, "Fstation")
					end
				else
					addBox("Ошибка: Некорректно введено число.", client, 255, 0, 0)
					removeElementData(client, "Fstation")
				end
			else
				addBox("Ошибка: Некорректно введено число.", client, 255, 0, 0)
				removeElementData(client, "Fstation")
			end
		else
			return false
		end
	elseif(dialogid == 6) then
		if(response == true) then
			SED(client, "PWork", 2)
            updatePlayerAccount(client, "Work", 2)
			addBox("Вы успешно устроились на работу в такси!", client, 0, 100, 255)
		end
	elseif(dialogid == 7) then
		if(response == true) then
			if(getPedOccupiedVehicle(client) == false or getPedOccupiedVehicle(client) == nil) then
				if(getElementData(client, "House") ~= nil and getElementData(client, "House") ~= false) then
					if(getElementData(client, "House") == 0) then
						if(tonumber(getElementData(client, "Price")) ~= nil) then
							if(tonumber(getElementData(client, "Money")) >= tonumber(getElementData(client, "Price"))) then
								local house = tonumber(getElementData(client, "Dom"))
								if(HouseTable[house]["PID"] == 0) then
									local str = dbPrepareString(mysql, "UPDATE `Accounts` SET `Money` = ?, `House` = ? WHERE `Name` = ?", getElementData(client, "Money"), getElementData(client, "Dom"), getElementData(client, "Name")) 
									dbExec(mysql, str)
									local str = dbPrepareString(mysql, "UPDATE `House` SET `PID` = ?, `PName` = ? WHERE `ID` = ?", getElementData(client, "AccID"), getElementData(client, "Name"), tonumber(getElementData(client, "Dom")))
									dbExec(mysql, str)
									setElementMoney(client, tonumber(getElementData(client, "Price")) * (-1), "Покупка дома")
									addBox("Вы приобрели дом №" .. getElementData(client, "Dom") .. ".\nПоздравляем с покупкой!", client, 0, 255, 100)
									destroyElement(HouseTable[house]["Pickup"])
									destroyElement(HouseTable[house]["Blip"])
									SED(client, "SpawnID", 1)
									updatePlayerAccount(client, "SpawnID", 1)
									HouseTable[house]["Pickup"] 	= createPickup(HouseTable[house]["x"], HouseTable[house]["y"], HouseTable[house]["z"], 3, 1272, 0)
									HouseTable[house]["Blip"] 	= createBlip(HouseTable[house]["x"], HouseTable[house]["y"],  HouseTable[house]["z"], 32, 2, 0, 0, 0, 0, 0, 250)
									HouseTable[house]["PID"]	= getElementData(client, "AccID")
									HouseTable[house]["PName"]	= getElementData(client, "Name")
									SED(HouseTable[house]["Pickup"], "ID", house)
									SED(client, "House", house)
								else
									addBox("Ошибка: Данный дом уже куплен.", client, 255, 0, 0)
								end
							else
								addBox("Ошибка: У Вас недостаточно денег,\nЧтобы совершить эту покупку.", client, 255, 0, 0)
							end
						else
							addBox("Произошла ошибка.\nОбратитесь к администрации.", client, 255, 0, 0)
						end
					elseif(getElementData(client, "House") > 0) then
						addBox("Ошибка: У Вас уже есть дом.", client, 255, 0, 0)
					end
				else
					addBox("Ошибка: У вас уже есть дом", client, 255, 0, 0)
				end
			end
		end
		removeElementData(client, "Dom")
		removeElementData(client, "Price")
	elseif(dialogid == 8) then
		if(response == true) then
			SED(client, "PWork", 0)
            updatePlayerAccount(client, "Work", 0)
			addBox("Вы уволились из работы в такси.", client, 0, 60, 255)
			if(getElementData(client, "TaxiVehicle") ~= nil and getElementData(client, "TaxiVehicle") ~= false) then
				local veh = getElementData(client, "TaxiVehicle")
				spawnVehicle(veh, -205 - (tonumber(getElementData(veh, "TaxiVehTable")) - 1) * 3, -1472 + (tonumber(getElementData(veh, "TaxiVehTable")) - 1) * 12, 9, 0, 0, 280)
				setElementHealth(veh, 1000)
				setTimer(setElementHealth, 3000, 1, veh, 1000)
				SED(veh, "TaxiDriverPlayer", nil)
				SED(client, "TaxiVehicle", nil)
			end
		end
	elseif(dialogid == 9) then
		if(response == true) then
			if(getElementData(client, "Money") >= 100) then
				setElementMoney(client, -100, "Аренда такси")
				local veh = getPedOccupiedVehicle(client)
				SED(veh, "TaxiDriverPlayer", client)
				SED(client, "TaxiVehicle", veh)
				dbExec(mysql, "UPDATE `Accounts` SET `Money` = ? WHERE `Name` = ?", getElementData(client, "Money"), getElementData(client, "Name"))
				toggleControl ( client, "accelerate", true ) 
				toggleControl ( client, "brake_reverse", true )
				toggleControl ( client, "handbrake", true )
				SED(client, "ToggleVeh", true)
				addBox("Вы успешно арендовали данное такси.", client, 0, 60, 255)
			else
				setControlState(client, "enter_exit", true)
				addBox("Ошибка: У вас недостаточно денег,\nЧтобы арендовать этот транспорт", client, 255, 0, 0)
			end
		elseif(response == false) then
			setControlState(client, "enter_exit", true)
		end
	elseif(dialogid == 10) then
		if(response == true) then
			local dom = tonumber(getElementData(client, "Dom"))
			if(HouseTable[dom]["Open"] == true) then
				setElementInterior(client, HouseTable[dom]["Interior"])
				setElementPosition(client, HouseTable[dom]["hx"], HouseTable[dom]["hy"], HouseTable[dom]["hz"])
				SED(client, "Hint", getElementData(client, "Dom"))
				setElementDimension(client, dom)
				removeElementData(client, "Dom")
			else
				addBox("Данный дом закрыт.", client, 255, 0, 0)
			end
		end
	elseif(dialogid == 11) then
		if(response == true) then
			triggerClientEvent(client, "LoaderWorkStart", client)
		end
	elseif(dialogid == 12) then
		if(response == true) then
			triggerClientEvent(client, "EndLoaderWork", client)
		end
	elseif(dialogid == 13) then
		if(response == true) then
			addBox("Вы устроились на работу курьером!", client, 0, 60, 255)
			SED(client, "PWork", 3)
            updatePlayerAccount(client, "Work", 3)
			addBox("Чтобы начать смену,\nВам необходимо арендовать грузовой транспорт.", client, 0, 90, 255)
		end
	elseif(dialogid == 14) then
		if(response == true) then
			addBox("Вы уволились с работы курьером!", client, 0, 60, 255)
			SED(client, "PWork", 0)
            updatePlayerAccount(client, "Work", 0)
			if(getElementData(client, "CourierVehicle") ~= false) then
				local veh = getElementData(client, "CourierVehicle")
				customSpawnVehicle(veh)
				removeElementData(veh, "CourierPlayer")
				removeElementData(client, "CourierVehicle")
			end
			if(getElementData(client, "mrkCourierStart") ~= false) then
				local mrk = getElementData(client, "mrkCourierStart")
				local blp = getElementData(client, "blpCourierStart")
				removeEventHandler("onMarkerHit", mrk, courierStart)
				destroyElement(mrk)
				destroyElement(blp)
				removeElementData(client, "mrkCourierStart")
				removeElementData(client, "blpCourierStart")
			end
			if(getElementData(client, "mrkCourierEnd") ~= false) then
				local mrk = getElementData(client, "mrkCourierEnd")
				local blp = getElementData(client, "blpCourierEnd")
				removeEventHandler("onMarkerHit", mrk, courierStart)
				destroyElement(mrk)
				destroyElement(blp)
				removeElementData(client, "mrkCourierEnd")
				removeElementData(client, "blpCourierEnd")
			end
			if(getElementData(client, "mrkCour") ~= false) then
				local mrk = getElementData(client, "mrkCour")
				local blp = getElementData(client, "blpCour")
				removeEventHandler("onMarkerHit", mrk, hitCourEnd)
				destroyElement(mrk)
				destroyElement(blp)
				removeElementData(client, "mrkCour")
				removeElementData(client, "blpCour")
				local bus = tonumber(getElementData(client, "courBiz"))
				OrderBiz[bus]["OrderCourier"] = nil
			end
		end
	elseif(dialogid == 15) then
		if(response == true) then
			addBox("Вы успешно устроились на работу строителем!", client, 0, 255, 100)
			SED(client, "NWork", 5)
			setElementModel(client, 16)
			triggerClientEvent(client, "BuilderStart", client)
		else
		end
	elseif(dialogid == 16) then
		if(response == true) then
			addBox("Вы уволились с работы строителем!", client, 0, 255, 100)
			SED(client, "NWork", 0)
			setElementModel(client, getElementData(client, "Skin"))
			triggerClientEvent(client, "BuilderEnd", client)
			if(objeect[tonumber(getElementData(client, "ID"))] ~= nil) then
				destroyElement(objeect[tonumber(getElementData(client, "ID"))])
				objeect[tonumber(getElementData(client, "ID"))] = nil
				setPedAnimation(client, nil, nil)
			end
		else
		end
	elseif(dialogid == 17) then
		if(response == true) then
			local secPlayer = getElementData(client, "SellPlayer")
			if(isElement(secPlayer) == true) then
				local secid = getElementData(secPlayer, "AccID")
				local money = tonumber(getElementData(client, "Money"))
				local price = tonumber(getElementData(client, "HousePrice"))
				if(money >= price) then
					local house = tonumber(getElementData(client, "HouseID"))
					if(secid == HouseTable[house]["PID"]) then
						if(HouseTable[house]["Car"] == 0) then
							local Name = getElementData(client, "PNameHouse")
							local fName = HouseTable[house]["PName"]
							if(Name == fName) then
								money = money - price
								setElementMoney(client, -price, "Покупка дома")
								SED(client, "House", house)
								HouseTable[house]["PName"] = getElementData(client, "Name")
								HouseTable[house]["OwnerPlayer"] = client
								local SecPlayer = getElementData(client, "SellPlayer")
								local SecMoney = getElementData(SecPlayer, "Money")
								SecMoney = SecMoney + price
								setElementMoney(SecPlayer, price, "Продажа дома")
								SED(SecPlayer, "House", 0)
								local qq = dbQuery(mysql, "SELECT `ID` from `Accounts` WHERE `Name` = ?", getElementData(client, "Name"))
								local result = dbPoll(qq, -1)
								dbFree(qq)
								HouseTable[house]["PID"] = result[1]["ID"]
								dbExec(mysql, "UPDATE `House` SET `PID` = ?, `PName` = ? WHERE `ID` = ?", result[1]["ID"], getElementData(client, "Name"), house)
								dbExec(mysql, "UPDATE `Accounts` SET `House` = ?, `Money` = ? WHERE `Name` = ?", 0, SecMoney, fName)
								dbExec(mysql, "UPDATE `Accounts` SET `House` = ?, `Money` = ? WHERE `Name` = ?", house, money, getElementData(client, "Name"))
								addBox("Вы успешно купили дом\nУ игрока " .. getElementData(secPlayer, "Name"), client, 0, 255, 100)
								addBox("Вы успешно продали домм\nИгроку " .. getElementData(client, "Name"), client, 0, 255, 100)
							else
								addBox("Ошибка #031", client, 255, 0, 0)
							end
						else
							addBox("Ошибка: Сначала продайте машину.", secPlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: Дом уже был продан.", client, 255, 0, 0)
					end
				else
					addBox("Ошибка: У Вас недостаточно денег.", client, 255, 0, 0)
				end
			else
				addBox("Ошибка: Продавец вышел из игры.", client, 255, 0, 0)
			end
		end
	elseif(dialogid == 18) then
		if(response == true) then
			local money = tonumber(getElementData(client, "Money"))
			local house = tonumber(getElementData(client, "House"))
			local price = tonumber(HouseTable[house]["Price"] / 2)
			local id = tonumber(getElementData(client, "ID"))
			money = money + price
			dbExec(mysql, "UPDATE `Accounts` set `House` = ? WHERE `Name` = ?", 0, getElementData(client, "Name"))
			dbExec(mysql, "UPDATE `House` SET `PID` = ?, `PName` = '' WHERE `ID` = ?", 0, house)
			HouseTable[house]["PName"] = ""
			HouseTable[house]["PID"] = 0
			HouseTable[house]["OwnerPlayer"] = nil
			destroyElement(HouseTable[house]["Pickup"])
			destroyElement(HouseTable[house]["Blip"])
			HouseTable[house]["Pickup"] = createPickup(HouseTable[house]["x"], HouseTable[house]["y"], HouseTable[house]["z"], 3, 1273, 0)
			HouseTable[house]["Blip"] = createBlip(HouseTable[house]["x"], HouseTable[house]["y"], HouseTable[house]["z"], 31, 2, 0, 0, 0, 0, 0, 250)
			SED(HouseTable[house]["Pickup"], "ID", house)
			setElementMoney(client, price, "Продажа дома в гос")
			SED(client, "House", 0)
			if(PrivateCar[id] ~= nil) then
				local veh = PrivateCar[id]
				local vehid = getElementData(veh, "ID")
				VehicleTable[vehid] = nil
				destroyElement(veh)
			end
			addBox("Вы успешно продали дом государству.", client, 0, 255, 100)
		end
		removeElementData(client, "HousePrice")
		removeElementData(client, "HouseID")
		removeElementData(client, "PNameHouse")
		removeElementData(client, "SellPlayer")
	elseif(dialogid == 19) then
		local secPlayer = getElementData(client, "LicBy")
		if(response == true) then
			local price = tonumber(getElementData(client, "LicPrice"))
			local money = tonumber(getElementData(client, "Money"))
			if(money >= price) then
				SED(client, "AutoLicense", 1)
				setElementMoney(client, -price, "Покупка лицензии")
				local secMoney = tonumber(getElementData(secPlayer, "Money") + (price / 2))
				setElementMoney(secPlayer, secMoney, "Продажа лицензии")
				dbExec(mysql, "UPDATE `Accounts` SET `Money` = ?, `AutoLicense` = ? WHERE `Name` = ?", money, getElementData(client, "AutoLicense"), getElementData(client, "Name"))
				dbExec(mysql, "UPDATE `Accounts` SET `Money` = ? WHERE `Name` = ?", secMoney, getElementData(secPlayer, "Name"))
				addBox("Вы успешно приобрели\nЛицензию на вождение", client, 0, 255, 100)
				addBox(getElementData(client, "Name") .. " приобрел\nУ Вас лицензию на вождение.", secPlayer, 0, 255, 100)
			else
				addBox("У Вас недостаточно денег,\nЧтобы совершить данную покупку.", client, 255, 0, 0)
				addBox("Данный игрок отказался от покупки.", secPlayer, 255, 0, 0)
			end
		else
			addBox("Данный игрок отказался от покупки.", secPlayer, 255, 0, 0)
		end
	elseif(dialogid == 20) then
		if(response == true) then
			if(listitem == 0) then
				if(getElementData(client, "Lvl") > 1) then
					if(tonumber(getElementData(client, "PWork")) == 1) then
						showPlayerDialog(client, 4, 1, "Увольнение с работы водителем автобуса", "Вы действительно хотите уволиться с работы водителем автобуса?\nПримечание: Если Вы это сделаете\nВаш арендованный транспорт пропадет.", "Уволиться", "Отмена")
					elseif(tonumber(getElementData(client, "PWork")) == 0) then
						showPlayerDialog(client, 3, 1, "Устройство на работу водителем автобуса", "Действительно ли вы хотите устроиться на работу водителем автобуса?\nПримечание: Вам необходимо будет арендовать транспорт.\nБез транспортного средства Вы не сможете зарабатывать.", "Устроиться", "Отмена")
					else
                        addBox("Ошибка: Вы уже трудоустроены.", client, 255, 0, 0)
                    end
				else
					addBox("Вам необходимо прожить 2 года в штате.", client, 255, 0, 0)
				end
			elseif(listitem == 1) then
				if(getElementData(client, "Lvl") > 1) then
					if(tonumber(getElementData(client, "PWork")) == 2) then
						showPlayerDialog(client, 8, 1, "Увольнение с работы водителем такси", "Вы действительно хотите уволиться с работы такси?", "Уволиться", "Отмена")
					elseif(tonumber(getElementData(client, "PWork")) == 0) then
						showPlayerDialog(client, 6, 1, "Устройство на работу водителем такси", "Вы действительно хотите устроиться на работу водителем такси?", "Устроиться", "Отмена")
					else
						addBox("Ошибка: Вы уже трудоустроены.", client, 255, 0, 0)
					end
				else
					addBox("Вам необходимо прожить 2 года в штате.", client, 255, 0, 0)
				end
			elseif(listitem == 2) then
				if(getElementData(client, "Lvl") > 2) then
					if(getElementData(client, "PWork") == 0) then
						showPlayerDialog(client, 13, 1, "Устройство на работу развозчиком", "Действительно ли Вы хотите устроиться на работу курьером?", "Устроиться", "Отмена")
					elseif(getElementData(client, "PWork") == 3) then
						showPlayerDialog(client, 14, 1, "Увольнение с работы развозчиком", "Действительно ли Вы хотите уволиться с работы курьером?", "Уволиться", "Отмена")
					else
						addBox("Ошибка: Вы уже трудоустроены.", client, 255, 0, 0)
					end
				else
					addBox("Вам необходимо прожить 3 года в штате.", client, 255, 0, 0)
				end
			end
		end
	elseif(dialogid == 21) then
		if(response == true) then
			if(isElement(client) == true) then
				local money = tonumber(getElementData(client, "Money"))
				if(money >= 5000) then
					setElementMoney(client, -350, "Покупка паспорта")
					SED(client, "Passport", 2)
					local name = getElementData(client, "Name")
					dbExec(mysql, "UPDATE `Accounts` SET `Passport` = 2 WHERE `Name` = ?", name)
					addBox("Поздравляем с получением с паспорта!", client, 0, 60, 255)
					addBox("Используйте /showpass [id],\nЧтобы показать паспорт другим игрокам.", client, 0, 60, 255)
				end
			end
		end
	elseif(dialogid == 25) then
		if(response == true) then
			local id = tonumber(getElementData(client, "ID"))
			if(GPST[id] ~= nil) then
				if(GPST[id]["Pickup"] ~= nil) then
					if(getElementType(GPST[id]["Pickup"]) == "marker") then
						removeEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
						destroyElement(GPST[id]["Pickup"])
						destroyElement(GPST[id]["Blip"])
						GPST[id] = nil
					end
				end
			end
			if(listitem == 0) then
				showPlayerDialog(client, 27, 3, "GPS-навигатор", "Важные места\nАэропорт\nАвтошкола\nАвтосалон\nТорговый центр\nStarfish Island\nМаяк", "Выбор", "Назад")
			elseif(listitem == 1) then
				showPlayerDialog(client, 26, 3, "GPS-навигатор", "Работа\nПорт\nСтройка\nПочта\nТакси парковка\nАвтобусная станция №1\nАвтобусная станция №2\nДоставка продуктов\nРыбалка", "Выбор", "Назад")
			elseif(listitem == 2) then
				showPlayerDialog(client, 28, 3, "GPS-навигатор", "Государственные учреждения\nVice City PD\nВоенная база\nБольница\nМэрия\nVice News", "Выбор", "Назад")
			elseif(listitem == 3) then
				showPlayerDialog(client, 82, 3, "GPS-навигатор", "Опасные районы\nLa Cosa Nostra\nColumbian Mafia\nMexican Cartel\nTriada", "Выбор", "Назад")
			elseif(listitem == 4) then
				local max = 5000
				local x, y, z = getElementPosition(client)
				local x2, y2, z2 = 0, 0, 0
				local iter = 1
				for i in pairs(FuelStation) do
					local x1, y1, z1 = FuelStation[iter]["x"], FuelStation[iter]["y"], FuelStation[iter]["z"]
					local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
					if(dist < max) then
						max = dist
						x2, y2, z2 = x1, y1, z1
					end
					iter = iter + 1
				end
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(x2, y2, z2, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]	= createBlip(x2, y2, z2, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
			elseif(listitem == 5) then
				local id = tonumber(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(450.587890625, 992.2109375, 18.274263381958, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]	= createBlip(450.587890625, 992.2109375, 18.274263381958, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
			elseif(listitem == 6) then
				local max = 5000
				local x, y, z = getElementPosition(client)
				local x2, y2, z2 = 0, 0, 0
				for i=10,23 do
					if(i ~= 19) then
						local x1, y1, z1 = BusinessTable[i]["x"], BusinessTable[i]["y"], BusinessTable[i]["z"]
						local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
						if(dist < max) then
							max = dist
							x2, y2, z2 = x1, y1, z1
						end
					end
				end
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(x2, y2, z2, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]	= createBlip(x2, y2, z2, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
			elseif(listitem == 7) then
				local max = 5000
				local x, y, z = getElementPosition(client)
				local x2, y2, z2 = 0, 0, 0
				for i=101,106 do
					local x1, y1, z1 = BusinessTable[i]["x"], BusinessTable[i]["y"], BusinessTable[i]["z"]
					local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
					if(dist < max) then
						max = dist
						x2, y2, z2 = x1, y1, z1
					end
				end
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(x2, y2, z2, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]	= createBlip(x2, y2, z2, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
			elseif(listitem == 8) then
				local max = 5000
				local x, y, z = getElementPosition(client)
				local x2, y2, z2 = 0, 0, 0
				local iter = 1
				for i in pairs(BankomatsTable) do
					local x1, y1, z1 = BankomatsTable[iter]["x"], BankomatsTable[iter]["y"], BankomatsTable[iter]["z"]
					local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
					if(dist < max) then
						max = dist
						x2, y2, z2 = x1, y1, z1
					end
					iter = iter + 1
				end
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(x2, y2, z2, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]	= createBlip(x2, y2, z2, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
			elseif(listitem == 9) then
				local id = tonumber(getElementData(client, "ID"))
				if(getElementData(client, "House") > 0) then
					local house = tonumber(getElementData(client, "House"))
					if(HouseTable[house]["Car"] > 0) then
						local veh = PrivateCar[id]
						local x, y, z = getElementPosition(veh)
						GPST[id] = {}
						GPST[id]["Pickup"] = createMarker(x, y, z, "checkpoint", 4, 220, 0, 0, 220, client)
						GPST[id]["Blip"]	= createBlip(x, y, z, 0, 2, 220, 0, 0, 220, 0, 64000, client)
						addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
					else
						addBox("Ошибка: У Вас нет машины.", client, 255, 0, 0)
					end
				else
					addBox("Ошибка: У Вас нет дома.", client, 255, 0, 0)
				end
			elseif(listitem == 10) then
				local id = tonumber(getElementData(client, "ID"))
				if(getElementData(client, "House") > 0) then
					local house = tonumber(getElementData(client, "House"))
					local x, y, z = HouseTable[house]["x"], HouseTable[house]["y"], HouseTable[house]["z"]
					GPST[id] = {}
					GPST[id]["Pickup"] = createMarker(x, y, z, "checkpoint", 4, 220, 0, 0, 220, client)
					GPST[id]["Blip"]	= createBlip(x, y, z, 0, 2, 220, 0, 0, 220, 0, 64000, client)
					addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
				else
					addBox("Ошибка: У Вас нет дома.", client, 255, 0, 0)
				end
			end
		end
	elseif(dialogid == 26) then
		if(response == true) then
			if(listitem == 0) then
				local id = tonumber(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(-692.6728515625, -1322.0732421875, 11.029188156128, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]= createBlip(-692.6728515625, -1322.0732421875, 11.029188156128, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
			elseif(listitem == 1) then
				local id = tonumber(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(256.7080078125, -232.1474609375, 11.027762413025, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]	= createBlip(256.7080078125, -232.1474609375, 11.027762413025, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
			elseif(listitem == 2) then
				local id = tonumber(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(298.8896484375, -306.373046875, 11.922214508057, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]	= createBlip(298.8896484375, -306.373046875, 11.922214508057, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
			elseif(listitem == 3) then
				local id = tonumber(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(-198.3896484375, -1449.7099609375, 8.0708332061768, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]= createBlip(-198.3896484375, -1449.7099609375, 8.0708332061768, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
			elseif(listitem == 4) then
				local id = tonumber(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(-8.0517578125, -995.0322265625, 10.418395996094, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]= createBlip(-8.0517578125, -995.0322265625, 10.418395996094, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
			elseif(listitem == 5) then
				local id = tonumber(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(-817.84765625, 565.0712890625, 10.888244628906, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]= createBlip(-817.84765625, 565.0712890625, 10.888244628906, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
			elseif(listitem == 6) then
				local id = tonumber(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(-906.556640625, -1401.59765625, 11.709150314331, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]= createBlip(-906.556640625, -1401.59765625, 11.709150314331, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
			elseif(listitem == 7) then
				local id = tonumber(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(-637.5, -1494.6474609375, 13.749481201172, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]= createBlip(-637.5, -1494.6474609375, 13.749481201172, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
			end
		else
			showPlayerDialog(client, 25, 3, "GPS-навигатор", "Меню\nВажные места\nРабота\nГосударственные учреждения\nОпасные учреждения\nБлижайшая АЗС\nБлижайший магазин одежды\nБлижайший 24/7\nБлижайшая закусочная\nБлижайший банкомат\nНайти моё авто\nНайти мой дом", "Выбор", "Отмена")
		end
	elseif(dialogid == 27) then
		if(response == true) then
			if(listitem == 0) then
				local id = tonumber(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(-1439.8828125, -827.697265625, 14.60027885437, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]	= createBlip(-1439.8828125, -827.697265625, 14.60027885437, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
			elseif(listitem == 1) then
				local id = tonumber(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(98.46484375, -809.4833984375, 10.425338745117, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]	= createBlip(98.46484375, -809.4833984375, 10.425338745117, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
			elseif(listitem == 2) then
				local id = tonumber(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(-1008.3798828125, -878.2578125, 12.849883079529, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]	= createBlip(-1008.3798828125, -878.2578125, 12.849883079529, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
			elseif(listitem == 3) then
				local id = tonumber(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(280.6123046875, 1130.9873046875, 20.291193008423, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]	= createBlip(280.6123046875, 1130.9873046875, 20.291193008423, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
			elseif(listitem == 4) then
				local id = tonumber(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(-347.2626953125, -473.8447265625, 11.052305221558, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]= createBlip(-347.2626953125, -473.8447265625, 11.052305221558, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
			elseif(listitem == 5) then
				local id = tonumber(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(445.5654296875, -1730.2333984375, 9.0785503387451, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]= createBlip(445.5654296875, -1730.2333984375, 9.0785503387451, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
			end
		else
			showPlayerDialog(client, 25, 3, "GPS-навигатор", "Меню\nВажные места\nРабота\nГосударственные учреждения\nОпасные районы\nБлижайшая АЗС\nБлижайший магазин одежды\nБлижайший 24/7\nБлижайшая закусочная\nБлижайший банкомат\nНайти моё авто\nНайти мой дом", "Выбор", "Отмена")
		end
	elseif(dialogid == 28) then
		if(response == true) then
			if(listitem == 0) then
				local id = tonumber(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(524.982421875, 508.12890625, 11.015137672424, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]	= createBlip(524.982421875, 508.12890625, 11.015137672424, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
			elseif(listitem == 1) then
				local id = tonumber(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(-1694.3046875, -314.25, 14.661310195923, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]	= createBlip(-1694.3046875, -314.25, 14.661310195923, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
			elseif(listitem == 2) then
				local id = tonumber(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(-102.58203125, -984.3037109375, 10.423469543457, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]	= createBlip(-102.58203125, -984.3037109375, 10.423469543457, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
			elseif(listitem == 3) then
				local id = tonumber(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(-320.447265625, 1332.6630859375, 11.560050964355, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]	= createBlip(-320.447265625, 1332.6630859375, 11.560050964355, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
			elseif(listitem == 4) then
				local id = tonumber(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(-495.0625, 773.287109375, 10.963483810425, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]	= createBlip(-495.0625, 773.287109375, 10.963483810425, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
			end
		else
			showPlayerDialog(client, 25, 3, "GPS-навигатор", "Меню\nВажные места\nРабота\nГосударственные учреждения\nОпасные районы\nБлижайшая АЗС\nБлижайший магазин одежды\nБлижайший 24/7\nБлижайшая закусочная\nБлижайший банкомат\nНайти моё авто\nНайти мой дом", "Выбор", "Отмена")
		end
	elseif(dialogid == 29) then
		if(response == true) then
			local price = tonumber(getElementData(client, "Sellvehprice"))
			local dom = tonumber(getElementData(client, "House"))
			if(dom > 0) then
				if(HouseTable[dom]["x"] ~= 0) then
					local veh = HouseTable[dom]["Car"]
					if(veh > 0) then
						local id = getElementData(client, "ID")
						if(PrivateCar[id] ~= nil) then
							local vehid = getElementData(PrivateCar[id], "ID")
							destroyElement(PrivateCar[id])
							VehicleTable[vehid] = nil
						end
						setElementMoney(client, price, "Продажа т/c в гос")
						dbExec(mysql, "UPDATE `House` SET `Car` = 0 WHERE `ID` = ?", dom)
						addBox("Вы успешно продали Ваш транспорт.\nВы получили: " .. price .. "$.", client, 0, 255, 100)
						HouseTable[dom]["Car"] = 0
						PrivateCar[id] = nil
					else
						addBox("Ошибка: У Вас нет машины.", client, 255, 0, 0)
					end
				else
					addBox("Ошибка: У Вас нет гаража.", client, 255, 0, 0)
				end
			else
				addBox("Ошибка: У Вас нет дома.", client, 255, 0, 0)
			end
		end
		removeElementData(client, "Sellvehprice")
	elseif(dialogid == 30) then
		if(response == true) then
			SED(client, "NWork", 6)
			addBox("Вы успешно устроились на работу почтальоном.", client, 0, 255, 100)
			addBox("Чтобы начать рабочий день, необходимо\nАрендовать мопед.", client, 0, 100, 255)
		end
	elseif(dialogid == 31) then
		if(response == true) then
			SED(client, "NWork", 0)
			addBox("Вы уволились с работы почтальоном.", client, 0, 60, 255)
			if(getElementData(client, "MailVeh") ~= false) then
				local veh = getElementData(client, "MailVeh")
				customSpawnVehicle(veh)
				setElementHealth(veh, 1000)
				SED(veh, "Fuel", 40)
				removeElementData(veh, "MailPlayer")
				removeElementData(client, "MailVeh")
				if(getElementData(client, "blpMail") ~= false) then
					local blp = getElementData(client, "blpMail")
					local mrk = getElementData(client, "mrkMail")
					local aff = getEventHandlers("onMarkerHit", mrk)
					destroyElement(mrk)
					destroyElement(blp)
					removeElementData(client, "blpMail")
					removeElementData(client, "mrkMail")
				end
			end
		end
	elseif(dialogid == 32) then
		if(response == true) then
			if(getElementData(client, "Money") >= 50) then
				setElementMoney(client, -50, "Аренда мопед")
				local veh = getPedOccupiedVehicle(client)
				SED(veh, "MailPlayer", client)
				SED(client, "MailVeh", veh)
				addBox("Вы успешно арендовали данный транспорт.", client, 0, 255, 100)
				local mrkMail = createMarker(309.44921875, -299.9111328125, 10.922214508057, "cylinder", 4.0, 220, 0, 0, 220, client)
				local blpMail = createBlip(309.44921875, -299.9111328125, 10.922214508057, 0, 2, 220, 0, 0, 220, 10, 64000, client)
				addEventHandler("onMarkerHit", mrkMail, hitMrkMail)
				SED(client, "mrkMail", mrkMail)
				SED(client, "blpMail", blpMail)
				SED(mrkMail, "Player", client)
				toggleControl ( client, "accelerate", true ) 
				toggleControl ( client, "brake_reverse", true )
				toggleControl ( client, "handbrake", true )
				addBox("Вам необходимо подъехать к складу.\n(На карте создан маркер)", client, 0, 255, 100)
				SED(client, "ToggleVeh", true)
			else
				setControlState(client, "enter_exit", true)
				addBox("У Вас недостаточно денег для аренды.", client, 255, 0, 0)
			end
		else
			setControlState(client, "enter_exit", true)
			addBox("Вы отказались от аренды мопеда.", client, 255, 0, 0)
		end
	elseif(dialogid == 33) then
		if(response == true) then
			if(getElementData(client, "Money") >= 5000) then
				setElementMoney(client, -500, "АШ-")
				showPlayerDialog(client, 34, 2, "Тестирование: Вопрос 1 из 5", "Какая максимальная скорость движения по городу?\n1. 60 км/ч.\n2. 120 км/ч\n3. 90 км/ч\n4. 30км/ч", "Отправить", "Отмена")
			else
				addBox("У Вас недостаточно денег\nЧтобы сдать тест на вождение.", client, 255, 0, 0)
			end
		else
			addBox("Вы отказались от прохождения теста.", client, 255, 0, 0)
		end
	elseif(dialogid == 34) then
		if(response == true) then
			if(tonumber(inputtext) ~= nil) then
				inputtext = tonumber(inputtext)
				if(inputtext == 3) then
					showPlayerDialog(client, 35, 2, "Тестирование: Вопрос 2 из 5", "Когда на транспортном средстве должны быть включены фары?\n1. Только днём.\n2. В любое время суток\n3. В условиях ограниченной видимости.\n4. Только ночью.", "Отправить", "Отмена")
				else
					addBox("Вы ошиблись и тест завершен.\nПожалуйста, повторите попытку.", client, 255, 0, 0)
				end
			else
				addBox("Вы довели компьютер до системной ошибки\nТестирование завершено.", client, 255, 0, 0)
			end
		else
			addBox("Вы отказались от прохождения теста.", client, 255, 0, 0)
			setElementMoney(client, 500, "АШ+")
		end
	elseif(dialogid == 35) then
		if(response == true) then
			if(tonumber(inputtext) ~= nil) then
				inputtext = tonumber(inputtext)
				if(inputtext == 2) then
					showPlayerDialog(client, 36, 2, "Тестирование: Вопрос 3 из 5", "Что необходимо делать, если слышен звукой сигнал?\n1. Снизить скорость\n2. Напасть на источник звука.\n3. Прижаться вправо и уступить дорогу.\n4. Выпрыгнуть из машины и плакать.", "Отправить", "Отмена")
				else
					addBox("Вы ошиблись и тест завершен.\nПожалуйста, повторите попытку.", client, 255, 0, 0)
				end
			else
				addBox("Вы довели компьютер до системной ошибки\nТестирование завершено.", client, 255, 0, 0)
			end
		else
			addBox("Вы отказались от прохождения теста.", client, 255, 0, 0)
			setElementMoney(client, 500, "АШ+")
		end
	elseif(dialogid == 36) then
		if(response == true) then
			if(tonumber(inputtext) ~= nil) then
				inputtext = tonumber(inputtext)
				if(inputtext == 3) then
					showPlayerDialog(client, 37, 2, "Тестирование: Вопрос 4 из 5", "Какая максимальная вместимость бака каждого транспортного средства?\n1. 60 литров\n2. 40 литров\n3. 70 литров\n4. 100 литров", "Отправить", "Отмена")
				else
					addBox("Вы ошиблись и тест завершен.\nПожалуйста, повторите попытку.", client, 255, 0, 0)
				end
			else
				addBox("Вы довели компьютер до системной ошибки\nТестирование завершено.", client, 255, 0, 0)
			end
		else
			addBox("Вы отказались от прохождения теста.", client, 255, 0, 0)
			setElementMoney(client, 500, "АШ+")
		end
	elseif(dialogid == 37) then
		if(response == true) then
			if(tonumber(inputtext) ~= nil) then
				inputtext = tonumber(inputtext)
				if(inputtext == 4) then
					showPlayerDialog(client, 38, 2, "Тестирование: Вопрос 5 из 5", "Когда нужно пропускать пешехода?\n1. Всегда\n2. На выделенных зонах\n3. Никогда\n4. Только на дороге", "Отправить", "Отмена")
				else
					addBox("Вы ошиблись и тест завершен.\nПожалуйста, повторите попытку.", client, 255, 0, 0)
				end
			else
				addBox("Вы довели компьютер до системной ошибки\nТестирование завершено.", client, 255, 0, 0)
			end
		else
			addBox("Вы отказались от прохождения теста.", client, 255, 0, 0)
			setElementMoney(client, 500, "АШ+")
		end
	elseif(dialogid == 38) then
		if(response == true) then
			if(tonumber(inputtext) ~= nil) then
				inputtext = tonumber(inputtext)
				if(inputtext == 1) then
					addBox("Поздравляем, Вы прошли устный тест.", client, 0, 60, 255)
					addBox("Пожалуйста, выйдите из здания и\nНачните практику, сев за автомобиль,\nНаходящийся на парковке.", client, 0, 60, 255)
					SED(client, "ASH", 1)
				else
					addBox("Вы ошиблись и тест завершен.\nПожалуйста, повторите попытку.", client, 255, 0, 0)
				end
			else
				addBox("Вы довели компьютер до системной ошибки\nТестирование завершено.", client, 255, 0, 0)
			end
		else
			addBox("Вы отказались от прохождения теста.", client, 255, 0, 0)
			setElementMoney(client, 500, "АШ+")
		end
	elseif(dialogid == 39) then
		local veh = getPedOccupiedVehicle(client)
		if(getElementData(veh, "ArmyCar") ~= false) then
			if(getElementData(veh, "ArmyGruz") == false) then
				if(response == true) then
					if(Server["Gruz"] == 0) then
						addBox("Транспорт не загружен,\nПоскольку склад пуст.", client, 255, 0)
					else
						inputtext = tonumber(inputtext)
						if(inputtext ~= nil) then
							if(inputtext > 0 and inputtext <= 250) then
								if(inputtext <= Server["Gruz"]) then
									SED(veh, "ArmyGruz", inputtext)
									Server["Gruz"] = Server["Gruz"] - inputtext
									addBox("Вы загрузили " .. inputtext ..  " кг груза.", client, 0, 60, 255)
								else
									SED(veh, "ArmyGruz", Server["Gruz"])
									Server["Gruz"] = 0
									addBox("Вы загрузили всё, что было на складе.\n(" .. getElementData(veh, "ArmyGruz") .. " шт продукции)", client, 0, 60, 255)
								end
								local mrk = getElementData(client, "mrkArmyGruz")
								if(isElement(mrk) == true) then
									local blp = getElementData(client, "blpArmyGruz")
									removeEventHandler("onMarkerHit", mrk, onMrkArmyGruzHit)
									destroyElement(mrk)
									destroyElement(blp)
									removeElementData(client, "mrkArmyGruz")
									removeElementData(client, "blpArmyGruz")
								end
								addBox("Отправляйтесь на склад,\nЧтобы доставить груз.", client, 0, 60, 255)
								local mrk = createMarker(-1632.87109375, -222.2001953125, 13.824159622192, "checkpoint", 2.0, 220, 0, 0, 220, client)
								local blp = createBlip(-1632.87109375, -222.2001953125, 14.824159622192, 0, 2, 220, 0, 0, 220, 14, 64000, client)
								SED(client, "mrkArmyGruzilo", mrk)
								SED(client, "blpArmyGruzilo", blp)
								addEventHandler("onMarkerHit", mrk, onHitGruzilo)
							else
								addBox("Ошибка: Вы ввели некорректное число", client, 255, 0, 0)
							end
						else
							addBox("Ошибка: Вы ввели некорректное число", client, 255, 0, 0)
						end
					end
				else
					addBox("Ошибка: Вы отказались от загрузки транспорта. Пожалуйста, подождите следующую погрузку.", client, 255, 0, 0)
				end
			end
		end
	elseif(dialogid == 40) then
		if(response == true) then
			local id = getElementData(client, "FuelStation")
			if(tonumber(id) ~= nil) then
				id = tonumber(id)
				if(id > 0 and id < 8) then
					if(BusinessTable[id]["Owner"] == 0) then
						local money = getElementData(client, "Money")
						if(money ~= false) then
							if(tonumber(money) ~= nil) then
								money = tonumber(money)
								if(money >= 500000) then
									if(getElementData(client, "BusOwnID") == false or getElementData(client, "BusOwnID") == 0) then
										if(BusinessTable[id]["Owner"] == 0) then
											SED(client, "BusOwnID", id)
											setElementMoney(client, -500000, "Покупка АЗС")
											BusinessTable[id]["Owner"] = getElementData(client, "AccID")
											BusinessTable[id]["OwnerName"] = getElementData(client, "Name")
											dbExec(mysql, "UPDATE `Business` SET `Owner` = ?, `OwnerName` = ? WHERE `ID` = ?", getElementData(client, "AccID"), getElementData(client, "Name"), id)
											dbExec(mysql, "UPDATE `Accounts` SET `BusinessID` = ? WHERE `Name` = ?", id, getElementData(client, "Name"))
											addBox("Вы успешно приобрели бизнес №" .. id, client, 0, 60, 255)
											BusinessTable[id]["OwnerPlayer"] = client
										else
											addBox("Ошибка: Данный бизнес уже куплен.", client, 255, 0, 0)
										end
									else
										addBox("Ошибка: У Вас уже есть бизнес.", client, 255, 0, 0)
									end
								else
									addBox("Ошибка: У Вас недостаточно денег\nЧтобы купить данный бизнес!", client, 255, 0, 0)
								end
							else
								addBox("Произошла ошибка.\nПожалуйста, повторите попытку. #6.24", client, 255, 0, 0)
							end
						else
							kickPlayer(client)
						end
					else
						addBox("Произошла ошибка.\nПожалуйста, повторите попытку. #6.23", client, 255, 0, 0)
					end
				else
					addBox("Произошла ошибка.\nПожалуйста, повторите попытку.#6.22", client, 255, 0, 0)
				end
			else
				addBox("Произошла ошибка.\nПожалуйста, повторите попытку.#6.21", client, 255, 0, 0)
			end
			removeElementData(client, "FuelStation")
		else
		end
	elseif(dialogid == 42) then
		if(response == true) then
			local biz = getElementData(client, "BusOwnID")
			if(biz > 0 and biz < 8) then
				if(listitem == 0) then
					showPlayerDialog(client, 43, 1, "Продажа бизнеса государству.", "Вы действительно хотите продать заправку государству?\nВы получите половину от стоимости покупки.\nВы получите: 2.200.000$", "Продать", "Отмена")
				elseif(listitem == 1) then
					if(BusinessTable[biz]["PayDay"] > 2) then
						showPlayerDialog(client, 44, 2, "Продажа бизнеса игроку.", "Введите ID игрока, которому Вы хотите продать бизнес.", "Продать", "Отмена")
					else
						addBox("Ошибка:\nБизнес должен быть оплачен более,\nЧем на 2 PayDay", client, 255, 0, 0)
					end
				elseif(listitem == 2) then
					if(BusinessTable[biz]["Benzovoz"] == 0) then
						showPlayerDialog(client, 47, 1, "Покупка бензовоза.", "Действительно ли Вы хотите купить бензовоз?\nСтоимость покупки: 100.000$", "Купить", "Отмена")
					else
						addBox("На Вашей заправке уже есть бензовоз.", client)
					end
				elseif(listitem == 3) then
					if(BusinessTable[biz]["Benzovoz"] == 0) then
						addBox("У Вашей заправки нет бензовоза.", client)
					else
						if(BusinessTable[biz]["BenzovozVeh"] == nil) then
							local veh = ""
							if(biz == 1) then
								veh = createVeh(414, 49.9013671875, -1088.7578125, 10.423915863037)
							elseif(biz == 2) then
								veh = createVeh(414, -887.984375, -573.0234375, 11.047963142395)
							elseif(biz == 3) then
								veh = createVeh(414, -1616.8896484375, -736.66015625, 14.824739456177)
							elseif(biz == 4) then
								veh = createVeh(414, 55.244140625, 937.4443359375, 10.80312538147)
							elseif(biz == 5) then
								veh = createVeh(414, -936.8505859375, 1347.3076171875, 11.096260070801)
							elseif(biz == 6) then
								veh = createVeh(414, -749.603515625, -1379.189453125, 11.343542098999)
							elseif(biz == 7) then
								veh = createVeh(414, 204.884765625, -506.1201171875, 11.78320980072)
							end
							BusinessTable[biz]["BenzovozVeh"] = veh
							SED(veh, "Benzovoz", biz)
							addBox("Вы заспавнили бензовоз.", client, 0, 60, 255)
						else
							local veh = BusinessTable[biz]["BenzovozVeh"]
							if(getElementHealth(veh) < 1000) then
								customSpawnVehicle(veh)
								addBox("Вы зареспавнили бензовоз.", client, 0, 255, 100)
							else
								addBox("Ваш бензовоз уже создан.", client, 255, 255, 0)
							end
						end
					end
				elseif(listitem == 4) then
					if(BusinessTable[biz]["Open"] == true) then
						BusinessTable[biz]["Open"] = false
						dbExec(mysql, "UPDATE `Business` set `Open` = 0 WHERE `ID` = ?", biz)
						addBox("Вы закрыли Вашу заправку.", client, 0, 60, 255)
					else
						BusinessTable[biz]["Open"] = true
						dbExec(mysql, "UPDATE `Business` set `Open` = 1 WHERE `ID` = ?", biz)
						addBox("Вы открыли Вашу заправку.", client, 0, 60, 255)
					end
				elseif(listitem == 5) then
					showPlayerDialog(client, 50, 2, "Стоимость бензина на заправке.", "Пожалуйста, введите стоимость бензина за литр.\nСтоимость не может быть менее 30$ и более 60$ за литр", "Выбор", "Отмена")
				elseif(listitem == 6) then
					local string1 = BusinessTable[biz]["Open"]
					if(string1 == true) then
						string1 = "Открыто."
					else
						string1 = "Закрыто."
					end
					local string2 = BusinessTable[biz]["Products"]
					local string3 = BusinessTable[biz]["Money"]
					local string4 = BusinessTable[biz]["MaxProducts"]
					local string5 = BusinessTable[biz]["Benzovoz"]
					if(string5 == 1) then
						string5 = "Куплен"
					else
						string5 = "Отсутствует"
					end
					local str = "Бизнес: " .. biz .. " id.\nСостояние: " .. string1 .. "\nКол-во продуктов на складе: " .. string2 .. "\nДенег на складе: " .. string3 .. "\nМаксимальное количество продуктов: " .. string4 .. "\nБензовоз: " .. string5
					showPlayerDialog(client, 64000, 1, "Статистика заправки.", str, "Принять", "Отмена")
				elseif(listitem == 7) then
					showPlayerDialog(client, 51, 2, "Вывод денег с бизнеса", "Введите сумму, которую Вы хотите вывести с бизнеса.\nДенег на складе: " .. BusinessTable[biz]["Money"] .. "$.", "Вывод", "Отмена")
				elseif(listitem == 8) then
					showPlayerDialog(client, 75, 2, "Оплата налога бизнеса", "Введите количество PayDay, на которое Вы хотите оплатить.\nОплачено на: " .. BusinessTable[biz]["PayDay"] .. "/720.\nСтоимость: 200$/PayDay.", "Оплата", "Отмена")
				elseif(listitem == 9) then
					local id = tonumber(getElementData(client, "ID"))
					if(GPST[id] ~= nil) then
						if(GPST[id]["Pickup"] ~= nil) then
							removeEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
							destroyElement(GPST[id]["Pickup"])
							destroyElement(GPST[id]["Blip"])
							GPST[id] = nil
						end
					end
					GPST[id] = {}
					if(biz == 1) then
						GPST[id]["Pickup"] = createMarker(49.9013671875, -1088.7578125, 9.423915863037, "cylinder", 2, 220, 0, 0, 220, client)
						GPST[id]["Blip"] = createBlip(49.9013671875, -1088.7578125, 9.423915863037, 0, 2, 220, 0, 0, 220, 0, 64000, client)
					elseif(biz == 2) then
						GPST[id]["Pickup"] = createMarker(-887.984375, -573.0234375, 10.047963142395, "cylinder", 2, 220, 0, 0, 220, client)
						GPST[id]["Blip"] = createBlip(-887.984375, -573.0234375, 10.047963142395, 0, 2, 220, 0, 0, 220, 0, 64000, client)
					elseif(biz == 3) then
						GPST[id]["Pickup"] = createMarker(-1616.8896484375, -736.66015625, 13.824739456177, "cylinder", 2, 220, 0, 0, 220, client)
						GPST[id]["Blip"] = createBlip(-1616.8896484375, -736.66015625, 13.824739456177, 0, 2, 220, 0, 0, 220, 0, 64000, client)
					elseif(biz == 4) then
						GPST[id]["Pickup"] = createMarker(55.244140625, 937.4443359375, 9.80312538147, "cylinder", 2, 220, 0, 0, 220, client)
						GPST[id]["Blip"] = createBlip(55.244140625, 937.4443359375, 9.80312538147, 0, 2, 220, 0, 0, 220, 0, 64000, client)
					elseif(biz == 5) then
						GPST[id]["Pickup"] = createMarker(-936.8505859375, 1347.3076171875, 10.096260070801, "cylinder", 2, 220, 0, 0, 220, client)
						GPST[id]["Blip"] = createBlip(-936.8505859375, 1347.3076171875, 10.096260070801, 0, 2, 220, 0, 0, 220, 0, 64000, client)
					elseif(biz == 6) then
						GPST[id]["Pickup"] = createMarker(-749.603515625, -1379.189453125, 10.343542098999, "cylinder", 2, 220, 0, 0, 220, client)
						GPST[id]["Blip"] = createBlip(-749.603515625, -1379.189453125, 10.343542098999, 0, 2, 220, 0, 0, 220, 0, 64000, client)
					elseif(biz == 7) then
						GPST[id]["Pickup"] = createMarker(204.884765625, -506.1201171875, 10.78320980072, "cylinder", 2, 220, 0, 0, 220, client)
						GPST[id]["Blip"] = createBlip(204.884765625, -506.1201171875, 10.78320980072, 0, 2, 220, 0, 0, 220, 0, 64000, client)
					end
					addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
				end
			end
		end
	elseif(dialogid == 43) then
		if(response == true) then
			if(getElementData(client, "BusOwnID") ~= false) then
				if(getElementData(client, "BusOwnID") > 0 and getElementData(client, "BusOwnID") < 8) then
					local id = getElementData(client, "BusOwnID")
					setElementMoney(client, 250000, "Продажа АЗС в гос")
					BusinessTable[id]["Owner"] = 0
					BusinessTable[id]["OwnerName"] = ""
					dbExec(mysql, "UPDATE `Business` SET `Owner` = 0, `OwnerName` = '', `Benzovoz` = '0', `PayDay` = 4, `P1` = 15 WHERE `ID` = ?", id)
					BusinessTable[id]["Benzovoz"] = 0
					BusinessTable[id]["P1"] = 50
					if(BusinessTable[id]["BenzovozVeh"] ~= nil) then
						local veh = BusinessTable[id]["BenzovozVeh"]
						local id = getElementData(BusinessTable[id]["BenzovozVeh"], "ID")
						VehicleTable[id] = nil
						destroyElement(veh)
						local id = getElementData(client, "BusOwnID")
						BusinessTable[id]["BenzovozVeh"] = nil
					end
					dbExec(mysql, "UPDATE `Accounts` SET `BusinessID` = 0 WHERE `ID` = ?", getElementData(client, "AccID"))
					SED(client, "BusOwnID", 0)
					addBox("Вы продали заправку государству\nВ половину стоимости.", client, 0, 60, 255)
					BusinessTable[id]["OwnerPlayer"] = nil
				end
			end
		end
	elseif(dialogid == 44) then
		if(response == true) then
			if(tonumber(inputtext) ~= nil) then
				inputtext = tonumber(inputtext)
				if(IDS[inputtext] ~= nil) then
					local secPlayer = IDS[inputtext]
					if(getElementData(secPlayer, "Login") == true) then
						local x, y, z = getElementPosition(secPlayer)
						local x1, y1, z1 = getElementPosition(client)
						if(getDistanceBetweenPoints3D(x, y, z, x1, y1, z1) < 20) then
							SED(client, "BusSellPlayer", secPlayer)
							showPlayerDialog(client, 45, 2, "Стоимость продажи бизнеса.", "Введите стоимость продажи бизнеса.", "Продать", "Отмена")
						else
							addBox("Ошибка: Данный игрок слишком далеко.", client, 255, 0, 0)
						end
					else
						addBox("Ошибка: Данный игрок не авторизован.", client, 255, 0, 0)
					end
				else
					addBox("Ошибка: Данный игрок не на сервере.", client, 255, 0, 0)
				end
			else
				addBox("Ошибка: Некорректно введён ID игрока.", client, 255, 0, 0)
			end
		end
	elseif(dialogid == 45) then
		if(response == true) then
			if(tonumber(inputtext) ~= nil) then
				local summ = tonumber(inputtext)
				if(summ > 2200000) then
					local secPlayer = getElementData(client, "BusSellPlayer")
					if(isElement(secPlayer) == true) then
						if(getElementData(secPlayer, "Login") == true) then
							local secMoney = getElementData(secPlayer, "Money")
							if(secMoney >= summ) then
								local x, y, z = getElementPosition(secPlayer)
								local x1, y1, z1 = getElementPosition(client)
								local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
								if(dist < 20) then
									local str = getElementData(client, "Name") .. " предлагает Вам купить заправку " .. getElementData(client, "BusOwnID") .. " id.\nСтоимость покупки: " .. summ .. "$." 
									showPlayerDialog(secPlayer, 46, 1, "Покупка заправки.", str, "Купить", "Отмена")
									SED(secPlayer, "BusBuyPlayer", client)
									SED(secPlayer, "BusBuyPrice", summ)
									SED(secPlayer, "BusBuyID", getElementData(client, "BusOwnID"))
								else
									removeElementData(client, "BusSellPlayer")
									addBox("Данный игрок слишком далеко от Вас.", client, 255, 0, 0)
								end
							else
								removeElementData(client, "BusSellPlayer")
								addBox("У данного игрока недостаточно денег для покупки.", client, 255, 0, 0)
							end
						else
							removeElementData(client, "BusSellPlayer")
							addBox("Выбранный Вами уже не авторизован.", client, 255, 0, 0)
						end
					else
						removeElementData(client, "BusSellPlayer")
						addBox("Выбранный Вами уже не в сети.", client, 255, 0, 0)
					end
				else
					addBox("Вы не можете продать бизнес менее\nЧем за половину государственной стоимости.", client, 255, 0, 0)
					showPlayerDialog(client, 45, 2, "Стоимость продажи бизнеса.", "Введите стоимость продажи бизнеса.", "Продать", "Отмена")
				end
			else
				addBox("Сумма введена некорректно\nПовторите попытку.", client, 255, 0, 0)
				showPlayerDialog(client, 45, 2, "Стоимость продажи бизнеса.", "Введите стоимость продажи бизнеса.", "Продать", "Отмена")
			end
		else
			addBox("Вы отменили продажу бизнеса.", client, 255, 0, 0)
			removeElementData(client, "BusSellPlayer")
		end
	elseif(dialogid == 46) then
		if(response == true) then
			local money = getElementData(client, "Money")
			local price = getElementData(client, "BusBuyPrice")
			local secPlayer = getElementData(client, "BusBuyPlayer")
			if(money >= price) then
				if(isElement(secPlayer) == true) then
					if(getElementData(secPlayer, "Login") == true) then
						local biz = getElementData(client, "BusBuyID")
						local theBiz = getElementData(secPlayer, "BusOwnID")
						local accid = getElementData(secPlayer, "AccID")
						if(accid == BusinessTable[biz]["Owner"]) then
							if(biz == theBiz) then
								BusinessTable[biz]["Owner"] = getElementData(client, "AccID")
								BusinessTable[biz]["OwnerName"] = getElementData(client, "Name")
								SED(secPlayer, "BusOwnID", 0)
								SED(client, "BusOwnID", biz)
								setElementMoney(client, money * (-1), "Покупка биз")
								setElementMoney(secPlayer, money, "Продажа биз")
								dbExec(mysql, "UPDATE `Business` SET `Owner` = ?, `OwnerName` = ?, `Benzovoz` = '0' WHERE `ID` = ?", BusinessTable[biz]["Owner"], BusinessTable[biz]["OwnerName"], biz)
								if(BusinessTable[id]["BenzovozVeh"] ~= nil) then
									local veh = BusinessTable[id]["BenzovozVeh"]
									local id = getElementData(BusinessTable[id]["BenzovozVeh"], "ID")
									VehicleTable[id] = nil
									destroyElement(veh)
									BusinessTable[biz]["BenzovozVeh"] = nil
								end
								BusinessTable[biz]["Benzovoz"] = 0
								dbExec(mysql, "UPDATE `Accounts` SET `BusinessID` = 0, `Money` = ? WHERE `ID` = ?", getElementData(secPlayer, "Money"), getElementData(secPlayer, "AccID"))
								dbExec(mysql, "UPDATE `Accounts` SET `BusinessID` = ?, `Money` = ? WHERE `ID` = ?", biz, getElementData(client, "Money"), getElementData(client, "AccID"))
								addBox("Вы успешно приобрели бизнес " .. biz .. " id.", client, 0, 60, 255)
								addBox("Вы успешно продали бизнес " .. biz .. " id.", secPlayer, 0, 60, 255)
								BusinessTable[biz]["OwnerPlayer"] = client
							else
								addBox("Ошибка: Данный бизнес уже продан.", client, 255, 0, 0)
							end
						else
							addBox("Ошибка: Данный бизнес уже продан", client, 255, 0, 0)
						end
					else
						addBox("Ошибка: игрок, который продавал Вам бизнес, не авторизован.", client, 255, 0, 0)
					end
				else
					addBox("Игрок, который продавал Вам бизнес, отключился.", client, 255, 0, 0)
				end
			else
				addBox("У Вас недостаточно денег для покупки данного бизнеса.", client, 255, 0, 0)
				addBox("У данного игрока недостаточно денег для покупки.", secPlayer, 255, 0, 0)
			end
		else
			local secPlayer = getElementData(client, "BusBuyPlayer")
			if(isElement(secPlayer) == true) then
				addBox("Игрок " .. getElementData(client, "Name") .. " отказался\nОт покупки Вашего бизнеса.", secPlayer, 220, 60, 0)
			end
		end
		removeElementData(client, "BusBuyPlayer")
		removeElementData(client, "BusBuyPrice")
		removeElementData(client, "BusBuyID")
	elseif(dialogid == 47) then
		if(response == true) then
			local biz = getElementData(client, "BusOwnID")
			if(biz > 0 and biz < 8) then
				if(getElementData(client, "Money") >= 100000) then
					setElementMoney(client, -5000, "Покупка бензовоз")
					dbExec(mysql, "UPDATE `Business` set `Benzovoz` = 1 WHERE `ID` = ?", biz)
					BusinessTable[biz]["Benzovoz"] = 1
					addBox("Вы приобрели бензовоз для своей заправки.", client, 255, 0, 0)
				else
					addBox("У Вас недостаточно денег для покупки.", client, 255, 0, 0)
				end
			else
				addBox("Произошла ошибка: Вы не владеете бизнесом.", client, 255, 0, 0)
			end
		end
	elseif(dialogid == 48) then
		if(response == true) then
			local biz = getElementData(client, "BusOwnID")
			local veh = getPedOccupiedVehicle(client)
			if(veh ~= nil and veh ~= false) then
				if(getElementData(veh, "Benzovoz") ~= false) then
					local benz = getElementData(veh, "Benzovoz")
					if(benz == biz) then
						local topl = tonumber(inputtext)
						if(topl ~= nil) then
							if(topl > 0 and topl <= 4000) then
								local money = getElementData(client, "Money")
								if(money >= topl * 5) then
									SED(veh, "BenzKol", topl)
									setElementMoney(client, topl * (-5), "Покупка топлива")
									addBox("Вы успешно купили " .. topl .. " топлива\nОтправляйтесь на заправку.", client, 0, 60, 255)
									local mrk = ""
									local blp = ""
									if(biz == 1) then
										mrk = createMarker(49.9013671875, -1088.7578125, 10.423915863037, "cylinder", 2.4, 220, 0, 0, 220, client)
										blp = createBlip(49.9013671875, -1088.7578125, 10.423915863037, 0, 2.4, 220, 0, 0, 220, 10, 64000, client)
									elseif(biz == 2) then
										mrk = createMarker(-887.984375, -573.0234375, 11.047963142395, "cylinder", 2.4, 220, 0, 0, 220, client)
										blp = createBlip(-887.984375, -573.0234375, 11.047963142395, 0, 2.4, 220, 0, 0, 220, 10, 64000, client)
									elseif(biz == 3) then
										mrk = createMarker(-1616.8896484375, -736.66015625, 14.824739456177, "cylinder", 2.4, 220, 0, 0, 220, client)
										blp = createBlip(-1616.8896484375, -736.66015625, 14.824739456177, 0, 2.4, 220, 0, 0, 220, 10, 64000, client)
									elseif(biz == 4) then
										mrk = createMarker(55.244140625, 937.4443359375, 10.80312538147, "cylinder", 2.4, 220, 0, 0, 220, client)
										blp = createBlip(55.244140625, 937.4443359375, 10.80312538147, 0, 2.4, 220, 0, 0, 220, 10, 64000, client)
									elseif(biz == 5) then
										mrk = createMarker(-936.8505859375, 1347.3076171875, 11.096260070801, "cylinder", 2.4, 220, 0, 0, 220, client)
										blp = createBlip(-936.8505859375, 1347.3076171875, 11.096260070801, 0, 2.4, 220, 0, 0, 220, 10, 64000, client)
									elseif(biz == 6) then
										mrk = createMarker(-749.603515625, -1379.189453125, 11.343542098999, "cylinder", 2.4, 220, 0, 0, 220, client)
										blp = createBlip(-749.603515625, -1379.189453125, 11.343542098999, 0, 2.4, 220, 0, 0, 220, 10, 64000, client)
									elseif(biz == 7) then
										mrk = createMarker(204.884765625, -506.1201171875, 11.78320980072, "cylinder", 2.4, 220, 0, 0, 220, client)
										blp = createBlip(204.884765625, -506.1201171875, 11.78320980072, 0, 2.4, 220, 0, 0, 220, 10, 64000, client)
									end
									SED(client, "mrkBenz2", mrk)
									SED(client, "blpBenz2", blp)
									addEventHandler("onMarkerHit", mrk, Benz2MarkerHit)
								else
									setTimer(function ( thePlayer )
										local mrk = createMarker(-1006.5986328125, -1388.630859375, 10.581163406372, "cylinder", 2.4, 220, 0, 0, 220, thePlayer)
										SED(thePlayer, "mrkBenz1", mrk)
										addEventHandler("onMarkerHit", mrk, Benz1MarkerHit)
										local blp = createBlip(-1006.5986328125, -1388.630859375, 10.581163406372, 0, 2, 220, 0, 0, 220, 3, 64000, thePlayer)
										SED(thePlayer, "blpBenz1", blp)
									end, 3000, 1, client)
									addBox("У Вас недостаточно денег для покупки топлива.", client, 255, 0, 0)
								end
							else
								setTimer(function ( thePlayer )
									local mrk = createMarker(-1006.5986328125, -1388.630859375, 10.581163406372, "cylinder", 2.4, 220, 0, 0, 220, thePlayer)
									SED(thePlayer, "mrkBenz1", mrk)
									addEventHandler("onMarkerHit", mrk, Benz1MarkerHit)
									local blp = createBlip(-1006.5986328125, -1388.630859375, 10.581163406372, 0, 2, 220, 0, 0, 220, 3, 64000, thePlayer)
									SED(thePlayer, "blpBenz1", blp)
								end, 3000, 1, client)
								addBox("Вы ввели некорректное количество топлива.", client, 255, 0, 0)
							end
						else
							setTimer(function ( thePlayer )
								local mrk = createMarker(-1006.5986328125, -1388.630859375, 10.581163406372, "cylinder", 2.4, 220, 0, 0, 220, thePlayer)
								SED(thePlayer, "mrkBenz1", mrk)
								addEventHandler("onMarkerHit", mrk, Benz1MarkerHit)
								local blp = createBlip(-1006.5986328125, -1388.630859375, 10.581163406372, 0, 2, 220, 0, 0, 220, 3, 64000, thePlayer)
								SED(thePlayer, "blpBenz1", blp)
							end, 3000, 1, client)
							addBox("Вы ввели некорректное количество топлива.", client, 255, 0, 0)
						end
					else
						setTimer(function ( thePlayer )
							local mrk = createMarker(-1006.5986328125, -1388.630859375, 10.581163406372, "cylinder", 2.4, 220, 0, 0, 220, thePlayer)
							SED(thePlayer, "mrkBenz1", mrk)
							addEventHandler("onMarkerHit", mrk, Benz1MarkerHit)
							local blp = createBlip(-1006.5986328125, -1388.630859375, 10.581163406372, 0, 2, 220, 0, 0, 220, 3, 64000, thePlayer)
							SED(thePlayer, "blpBenz1", blp)
						end, 3000, 1, client)
						addBox("Произошла ошибка, повторите попытку.", client, 255, 0, 0)
					end
				else
					setTimer(function ( thePlayer )
						local mrk = createMarker(-1006.5986328125, -1388.630859375, 10.581163406372, "cylinder", 2.4, 220, 0, 0, 220, thePlayer)
						SED(thePlayer, "mrkBenz1", mrk)
						addEventHandler("onMarkerHit", mrk, Benz1MarkerHit)
						local blp = createBlip(-1006.5986328125, -1388.630859375, 10.581163406372, 0, 2, 220, 0, 0, 220, 3, 64000, thePlayer)
						SED(thePlayer, "blpBenz1", blp)
					end, 3000, 1, client)
					addBox("Произошла ошибка, повторите попытку.", client, 255, 0, 0)
				end
			else
				setTimer(function ( thePlayer )
					local mrk = createMarker(-1006.5986328125, -1388.630859375, 10.581163406372, "cylinder", 2.4, 220, 0, 0, 220, thePlayer)
					SED(thePlayer, "mrkBenz1", mrk)
					addEventHandler("onMarkerHit", mrk, Benz1MarkerHit)
					local blp = createBlip(-1006.5986328125, -1388.630859375, 10.581163406372, 0, 2, 220, 0, 0, 220, 3, 64000, thePlayer)
					SED(thePlayer, "blpBenz1", blp)
				end, 3000, 1, client)
				addBox("Произошла ошибка, повторите попытку.", client, 255, 0, 0)
			end
		else
			setTimer(function ( thePlayer )
				local mrk = createMarker(-1006.5986328125, -1388.630859375, 10.581163406372, "cylinder", 2.4, 220, 0, 0, 220, thePlayer)
				SED(thePlayer, "mrkBenz1", mrk)
				addEventHandler("onMarkerHit", mrk, Benz1MarkerHit)
				local blp = createBlip(-1006.5986328125, -1388.630859375, 10.581163406372, 0, 2, 220, 0, 0, 220, 3, 64000, thePlayer)
				SED(thePlayer, "blpBenz1", blp)
			end, 3000, 1, client)
			addBox("Произошла ошибка, повторите попытку.", client, 255, 0, 0)
		end
	elseif(dialogid == 50) then
		if(response == true) then
			local biz = getElementData(client, "BusOwnID")
			if(biz > 0 and biz < 8) then
				inputtext = tonumber(inputtext)
				if(inputtext ~= nil) then
					if(inputtext >= 13 and inputtext <= 17) then
						BusinessTable[biz]["P1"] = inputtext
						addBox("Вы изменили стоимость за литр на " .. inputtext .. "$", client, 0, 60, 255)
						dbExec(mysql, "UPDATE `Business` set `P1` = ? WHERE `ID` = ?", inputtext, biz)
					else
						addBox("Вы ввели некорректную сумму.", client, 255, 0, 0)
					end
				else
					addBox("Вы ввели некорректную сумму.", client, 255, 0, 0)
				end
			end
		end
	elseif(dialogid == 51) then
		if(response == true) then
			local biz = getElementData(client, "BusOwnID")
			if(biz > 0 and biz < 8) then
				inputtext = tonumber(inputtext)
				if(inputtext ~= nil) then
					if(inputtext > 0) then
						if(inputtext <= BusinessTable[biz]["Money"]) then
							BusinessTable[biz]["Money"] = BusinessTable[biz]["Money"] - inputtext
							dbExec(mysql, "UPDATE `Business` SET `Money` = ? WHERE `ID` = ?", BusinessTable[biz]["Money"], biz)
							setElementMoney(client, inputtext, "Снятие денег с биза")
							addBox("Вы сняли со склада " .. inputtext .. "$.", client, 0, 220, 40)
						else
							addBox("На счету бизнеса недостаточно денег..", client, 255, 0, 0)
						end
					else
						addBox("Вы ввели некорректную сумму.", client, 255, 0, 0)
					end
				else
					addBox("Вы ввели некорректную сумму.", client, 255, 0, 0)
				end
			end
		end
	elseif(dialogid == 52) then
		local secPlayer = getElementData(client, "HealPlayer")
		if(response == true) then
			local price = getElementData(client, "HealMoney")
			local money = tonumber(getElementData(client, "Money"))
			if(money >= price) then
				local x, y, z = getElementPosition(client)
				local x1, y1, z1 = getElementPosition(secPlayer)
				local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
				if(dist < 10) then
					setElementHealth(client, 100)
					setElementMoney(client, price * (-1), "Покупка лечения")
					setElementMoney(secPlayer, price, "Продажа лечения")
					addBox("Вы вылечили игрока " .. getElementData(client, "Name") .. "\nЗа " .. price .. "$." , secPlayer, 0, 255, 60)
					addBox("Вы успешно прошли курс лечения за " .. price .. "$.", client, 0, 255, 60)
				else
					addBox("Вы отошли слишком далеко.", secPlayer, 255, 0, 0)
					addBox("Врач отошел слишком далеко.", client, 255, 0, 0)
				end
			else
				addBox("Игрок " .. getElementData(client, "Name") .. " отказался от Вашего лечения.", secPlayer, 255, 0, 0)
			end
		else
			addBox("Игрок " .. getElementData(client, "Name") .. " отказался от лечения.", secPlayer, 255, 0, 0)
		end
		removeElementData(client, "HealMoney")
		removeElementData(client, "HealPlayer")
	elseif(dialogid == 53) then
		local secPlayer = getElementData(client, "SexHealer")
		if(response == true) then
			if(isElement(secPlayer) == true) then
				local price = tonumber(getElementData(client, "SexPrice"))
				local money = tonumber(getElementData(client, "Money"))
				if(money >= price) then
					local sex = getElementData(client, "Sex")
					if(sex == 0) then
						SED(client, "Sex", 1)
						setElementMoney(client, price * (-1), "Смена пол-")
						setElementMoney(secPlayer, price, "Смена пол+")
						addBox("Вы сменили пол на мужской за " .. price .. "$.", client, 0, 60, 255)
						addBox("Вы успешно сменили пол игроку " .. getElementData(client, "Name") .. "\nЗа " .. price .. "$.", secPlayer, 0, 60, 255)
					else
						SED(client, "Sex", 0)
						setElementMoney(client, price * (-1), "Смена пол-")
						setElementMoney(secPlayer, price, "Смена пол+")
						addBox("Вы сменили пол на женский за " .. price .. "$.", client, 0, 60, 255)
						addBox("Вы успешно сменили пол игроку " .. getElementData(client, "Name") .. "\nЗа " .. price .. "$.", secPlayer, 0, 60, 255)
					end
					dbExec(mysql, "UPDATE `Accounts` SET `Sex` = ? WHERE `ID` = ?", getElementData(client, "Sex"), getElementData(client, "ID"))
				else
					addBox("У Вас недостаточно денег для данной операции.", client, 255, 0, 0)
					addBox("Игрок " .. getElementData(secPlayer, "Name") .. " отказался от смены пола.", secPlayer, 255, 0, 0)
				end
			else
				addBox("Врач, проводивший Вам операцию, отключился.", client, 255, 0, 0)
			end
		else
			if(isElement(secPlayer) == true) then
				addBox("Игрок " .. getElementData(client, "Name") .. " отказался от операции по смене пола.", secPlayer, 255, 0, 0)
			end
		end
		removeElementData(client, "SexHealer")
		removeElementData(client, "SexPrice")
	elseif(dialogid == 54) then
		if(response == true) then
			if(listitem == 0) then
				local money = tonumber(getElementData(client, "Money"))
				if(money >= 150) then
					if(getElementData(client, "PhoneNumber") == false or getElementData(client, "PhoneNumber") == 0) then
						local biz = tonumber(getElementData(client, "BusinessID"))
						if(biz ~= nil) then
							if(biz >= 10) then
								if(BusinessTable[biz]["Products"] >= 20) then
									if(BusinessTable[biz]["Owner"] > 0) then
										BusinessTable[biz]["Money"] = BusinessTable[biz]["Money"] + 1500
										dbExec(mysql, "UPDATE `Business` SET `Money` = ? WHERE `ID` = ?", BusinessTable[biz]["Money"], biz)
									end
									BusinessTable[biz]["Products"] = BusinessTable[biz]["Products"] - 20
									maxPhoneNumber = maxPhoneNumber + 1
									SED(client, "PhoneNumber", maxPhoneNumber)
									dbExec(mysql, "UPDATE `Accounts` SET `PhoneNumber` = ? WHERE `ID` = ?", maxPhoneNumber, getElementData(client, "AccID"))
									addBox("Вы успешно приобрели телефон с номером " .. maxPhoneNumber .. ".", client, 0, 60, 255)
									setElementMoney(client, -150, "Покупка телефон")
									PhoneNumbers[maxPhoneNumber] = client
								else
									addBox("Ошибка: В магазине недостаточно продуктов.", client, 255, 0, 0)
								end
							end
						end
					else
						addBox("У Вас уже есть мобильный телефон.", client, 255, 0, 0)
					end
				else
					addBox("У Вас недостаточно денег для покупки мобильного телефона.", client, 255, 0, 0)
				end
			elseif(listitem == 1) then
				local money = tonumber(getElementData(client, "Money"))
				if(money >= 250) then
					local biz = tonumber(getElementData(client, "BusinessID"))
					if(biz ~= nil) then
						if(biz >= 10) then
							if(BusinessTable[biz]["Products"] >= 60) then
								if(BusinessTable[biz]["Owner"] > 0) then
									BusinessTable[biz]["Products"] = BusinessTable[biz]["Products"] - 60
									BusinessTable[biz]["Money"] = BusinessTable[biz]["Money"] + 500
									dbExec(mysql, "UPDATE `Business` SET `Money` = ?, `Products` = ? WHERE `ID` = ?", BusinessTable[biz]["Money"], BusinessTable[biz]["Products"], biz)
								end
								addBox("Вы купили и съели пачку чипсов.", client, 0, 255, 100)
								setElementMoney(client, -250, "Покупка чипсов")
								local food = tonumber(getElementData(client, "Food"))
								if(food + 50 > 100) then
									SED(client, "Food", 100)
								else
									SED(client, "Food", food + 50)
								end
								UpdateFood(client)
							else
								addBox("Ошибка: В магазине недостаточно продуктов.", client, 255, 0, 0)
							end
						end
					end
				else
					addBox("У Вас недостаточно денег для покупки чипсов.", client, 255, 0, 0)
				end
			elseif(listitem == 2) then
				local money = tonumber(getElementData(client, "Money"))
				if(money >= 500) then
					local biz = tonumber(getElementData(client, "BusinessID"))
					if(biz ~= nil) then
						if(biz >= 10) then
							if(BusinessTable[biz]["Products"] >= 100) then
								if(BusinessTable[biz]["Owner"] > 0) then
									BusinessTable[biz]["Products"] = BusinessTable[biz]["Products"] - 100
									BusinessTable[biz]["Money"] = BusinessTable[biz]["Money"] + 1000
									dbExec(mysql, "UPDATE `Business` SET `Money` = ?, `Products` = ? WHERE `ID` = ?", BusinessTable[biz]["Money"], BusinessTable[biz]["Products"], biz)
								end
								addBox("Вы купили и съели батончик.", client, 0, 255, 100)
								setElementMoney(client, -500, "Покупка батончик")
								local food = tonumber(getElementData(client, "Food"))
								if(food + 70 > 100) then
									SED(client, "Food", 100)
								else
									SED(client, "Food", food + 70)
								end
								UpdateFood(client)
							else
								addBox("Ошибка: В магазине недостаточно продуктов.", client, 255, 0, 0)
							end
						end
					end
				else
					addBox("У Вас недостаточно денег для покупки батончика.", client, 255, 0, 0)
				end
			end
		end
	elseif(dialogid == 55) then
		if(response == true) then
			if(listitem == 0) then
				local string = "Название\tЗначение\nИмя персонажа:\t" .. getElementData(client, "Name") .."\nУровень:\t" .. getElementData(client, "Lvl") .. "\nОпыт:\t" .. getElementData(client, "Exp") .. "\nСытость:\t" .. math.round(getElementData(client, "Food")) .. "\nНаличные:\t" .. getElementData(client, "Money") .."$"
				if(getElementData(client, "House") ~= false) then
					if(tonumber(getElementData(client, "House")) ~= nil) then
						local dom = tonumber(getElementData(client, "House"))
						if(dom > 0) then
							if(HouseTable[dom]["vx"] ~= nil) then
								if(HouseTable[dom]["vx"] ~= 0) then
									string = string .. "\nДом:\t" .. dom .. "\nГараж:\tЕсть"
								else
									string = string .. "\nДом:\t" .. dom .. "\nГараж:\tОтсутствует"
								end
							else
								string = string .. "\nДом:\t" .. dom .. "\nГараж:\tОтсутствует"
							end
						else
							string = string .. "\nДом:\tОтсутствует\nГараж:\tОтсутствует" 
						end
					else
						string = string .. "\nДом:\tОтсутствует\nГараж:\tОтсутствует" 
					end
				else
					string = string .. "\nДом:\tОтсутствует\nГараж:\tОтсутствует" 
				end
				if(getElementData(client, "BusOwnID") ~= false) then
					if(getElementData(client, "BusOwnID") > 0) then
						string = string .. "\nБизнес:\t" .. getElementData(client, "BusOwnID") .. " id"
					else
						string = string .. "\nБизнес:\tОтсутствует"
					end
				else
					string = string .. "\nБизнес:\tОтсутствует"
				end
				if(getElementData(client, "Admin") > 0) then
					string = string .. "\nАдмин:\t" .. getElementData(client, "Admin")
				end
				showPlayerDialog(client, 64000, 3, "Статистика аккаунта", string, "Ок", "Отмена")
			elseif(listitem == 1) then
				showPlayerDialog(client, 64000, 3, "Список команд", "Команда\tЗначение\tНеобходимо\n/call [номер]\tПозвонить\tТелефон\n/accept\tПринять звонок\tТелефон\n/refuse\tОтклонить/Отключиться\tТелефон\n/fuel\tЗаправиться\tНаходиться в машине\n/b\tНон-рп чат\t-\n/s\tКрикнуть\t2 уровень\n/w\tШептать\t-\n/report\tНаписать в репорт\t-\n/shelp\tОбщая информация\t-", "Ок", "Отмена")
			elseif(listitem == 2) then
				showPlayerDialog(client, 58, 3, "Настройки аккаунта", "Название настройки\tСостояние\nТест\tОтключен", "Переключить", "Отмена")
			elseif(listitem == 3) then
				showPlayerDialog(client, 59, 3, "Безопасность аккаунта", "Название пункта\tСостояние\nПочта\tНе подключена.", "Настроить", "Отмена")
			elseif(listitem == 4) then
				showPlayerDialog(client, 56, 2, "Задать вопрос", "Текст жалобы или вопроса,\nКоторый бы вы хотели задать.", "Отправить", "Отмена")
			elseif(listitem == 5) then
				showPlayerDialog(client, 64000, 1, "Инфо", "Правил пока что не завезли", "Ок", "Отмена")
			elseif(listitem == 6) then
				showPlayerDialog(client, 57, 3, "Донат-меню", "Название\tСтоимость\nСменить имя\t50 VC\nКонвертировать в вирты\t1/1000\nСнять варн\t100р", "Выбор", "Отмена")
			end
		end
	elseif(dialogid == 56) then
		if(response == true) then
			if(inputtext ~= nil) then
				local a = #inputtext
				if(a > 0) then
					addBox("Ваш запрос администрации отправлен", client, 255, 255, 0)
					for i, n in pairs(IDS) do
						if(getElementData(n, "Login") == true) then
							if(getElementData(n, "Admin") > 0) then
								sendClientMessage(getElementData(client, "Name") .. " (" .. getElementData(client, "ID") .. ") в репорт: " .. inputtext, n, 255, 255, 0)
							end
						end
					end
				else
					addBox("Ошибка: Вы не ввели текст репорта.", client, 255, 0, 0)
				end
			else
				addBox("Ошибка: Вы не ввели текст репорта.", client, 255, 0, 0)
			end
		end
	elseif(dialogid == 57) then
	elseif(dialogid == 60) then
		if(response == true) then
			if(getElementData(client, "BusinessID") ~= false) then
				if(getElementDimension(client) == tonumber(getElementData(client, "BusinessID"))) then
					if(tonumber(getElementData(client, "BusOwnID")) == 0) then
						if(tonumber(getElementData(client, "Money")) >= 450000) then
							local bus = tonumber(getElementData(client, "BusinessID"))
							if(bus > 9) then
								SED(client, "BusOwnID", tonumber(getElementData(client, "BusinessID")))
								BusinessTable[bus]["Owner"] = tonumber(getElementData(client, "AccID"))
								BusinessTable[bus]["OwnerName"] = getElementData(client, "Name")
								BusinessTable[i]["OwnerPlayer"] = client
								setElementMoney(client, -450000, "Покупка биз")
								dbExec(mysql, "UPDATE `Business` SET `Owner` = ?, `OwnerName` = ? WHERE `ID` = ?", BusinessTable[bus]["Owner"], BusinessTable[bus]["OwnerName"], bus)
								dbExec(mysql, "UPDATE `Accounts` SET `BusinessID` = ? WHERE `Name` = ?", bus, getElementData(client, "Name"))
								addBox("Поздравляем, вы приобрели бизнес №" .. bus .. ".", client, 60, 255, 0)
							else
								addBox("Ошибка: Вы уже владеете бизнесом.", client, 255, 0, 0)
							end
						else
							addBox("Ошибка: У Вас недостаточно денег для покупки.", client, 255, 0, 0)
						end
					else
						addBox("Ошибка: Вы уже владеете бизнесом.", client, 255, 0, 0)
					end
				else
					addBox("Произошла ошибка, повторите попытку.", client, 255, 0, 0)
				end
			else
				addBox("Произошла ошибка, повторите попытку.", client, 255, 0, 0)
			end
		else
		end
	elseif(dialogid == 61) then
		if(response == true) then
			local biz = tonumber(getElementData(client, "BusOwnID"))
			local accid = tonumber(getElementData(client, "AccID"))
			if(biz >= 10) then
				if(accid == BusinessTable[biz]["Owner"]) then
					if(listitem == 0) then
						showPlayerDialog(client, 62, 1, "Продать бизнес государству.", "Вы действительно хотите продать бизнес государству?\nВы получите половину стоимости от Государственной стоимости бизнеса.\nВы получите: 1.125.000$", "Продать", "Отмена")
					elseif(listitem == 1) then
						if(BusinessTable[biz]["PayDay"] > 1) then
						showPlayerDialog(client, 63, 2, "Продать бизнес игроку.", "Введите ID игрока, которому Вы хотите продать бизнес.", "Выбор", "Отмена")
						else
							addBox("Ошибка:\nБизнес должен быть оплачен более,\nЧем на 2 PayDay", client, 255, 0, 0)
						end
					elseif(listitem == 2) then
						if(BusinessTable[biz]["Open"] == false) then
							BusinessTable[biz]["Open"] = true
							dbExec(mysql, "UPDATE `Business` SET `Open` = 1 WHERE `ID` = ?", biz)
							addBox("Вы открыли бизнес.", client, 0, 100, 255)
						else
							BusinessTable[biz]["Open"] = false
							dbExec(mysql, "UPDATE `Business` SET `Open` = 0 WHERE `ID` = ?", biz)
							addBox("Вы закрыли бизнес.", client, 0, 100, 255)
						end
					elseif(listitem == 3) then
						if(BusinessTable[biz]["Order"] ~= nil) then
							if(BusinessTable[biz]["Order"] == 0) then
								
							else
								addBox("Ошибка: У Вас уже есть заказ", client, 255, 0, 0)
							end
						else
							local x, y, z = -900, -1420, -11
							local x1, y1, z1 = BusinessTable[biz]["px"], BusinessTable[biz]["py"], BusinessTable[biz]["pz"]
							local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
							local koef = dist / 900
							if(koef > 0 and koef <= 1) then
								koef = 1
							elseif(koef > 1 and koef <= 2) then
								koef = 2
							elseif(koef > 2 and koef <= 3) then
								koef = 3
							else
								koef = 4
							end
							local price = 5 + koef
							local zakaz = math.round(tonumber(BusinessTable[biz]["Money"] / price))
							if(zakaz * price > BusinessTable[biz]["Money"]) then
								zakaz = zakaz - 1
							end
							showPlayerDialog(client, 66, 2, "Заказ продуктов в бизнес.", "Введите количество продуктов, которое хотите заказать.\nСтоимость за единицу товара: " .. price .. "$.\nМаксимальный доступный заказ: " .. zakaz .. " кг.", "Заказать", "Отмена")
						end
					elseif(listitem == 4) then
						showPlayerDialog(client, 67, 2, "Пополнение счёт бизнеса.", "Введите сумму, которую Вы хотели бы внести на счёт бизнеса.", "Ввод", "Отмена")
					elseif(listitem == 5) then
						showPlayerDialog(client, 68, 2, "Снятие денег со счёта бизнеса.", "Введите сумму, которую Вы хотите снять со счёта бизнеса.\nНа счету: " .. BusinessTable[biz]["Money"] .. "$.", "Ввод", "Отмена")
					elseif(listitem == 6) then
						showPlayerDialog(client, 75, 2, "Оплата налога", "Введите количество PayDay, на которое Вы хотите оплатить.\nСтоимость: 200$/PayDay.\nОплачено на: " .. BusinessTable[biz]["PayDay"] .. " PayDay.", "Оплата", "Отмена")
					elseif(listitem == 7) then
						local string1 = BusinessTable[biz]["Open"]
						if(string1 == true) then
							string1 = "Открыто."
						else
							string1 = "Закрыто."
						end
						local string2 = BusinessTable[biz]["Products"]
						local string3 = BusinessTable[biz]["Money"]
						local string4 = BusinessTable[biz]["MaxProducts"]
						local str = "Бизнес: " .. biz .. " id.\nСостояние: " .. string1 .. "\nКол-во продуктов на складе: " .. string2 .. "\nДенег на складе: " .. string3 .. "\nМаксимальное количество продуктов: " .. string4
						showPlayerDialog(client, 64000, 1, "Статистика бизнеса", str, "Ок", "Отмена")
					end
				else
					addBox("Ошибка: Обратитесь к администрации.", client, 255, 0, 0)
				end
			end
		end
	elseif(dialogid == 62) then
		if(response == true) then
			local bus = tonumber(getElementData(client, "BusOwnID"))
			local accid = tonumber(getElementData(client, "AccID"))
			if(accid == BusinessTable[bus]["Owner"]) then
				if(bus >= 10) then
					setElementMoney(client, 1125000, "Продажа биз в гос")
					BusinessTable[bus]["Owner"] = 0
					BusinessTable[bus]["OwnerName"] = ""
					SED(client, "BusOwnID", 0)
					dbExec(mysql, "UPDATE `Business` set `Owner` = ?, `OwnerName` = ? WHERE `ID` = ?", BusinessTable[bus]["Owner"], BusinessTable[bus]["OwnerName"], bus)
					dbExec(mysql, "UPDATE `Accounts` SET `BusinessID` = ? WHERE `Name` = ?", 0, getElementData(client, "Name"))
					addBox("Вы продали бизнес №" .. bus .. " государству\nВ половину стоимости.", client, 60, 255, 0)
					BusinessTable[bus]["OwnerPlayer"] = nil
				else
					addBox("Системная ошибка. Повторите попытку.", client, 255, 0, 0)
				end
			else
				addBox("Системная ошибка. Повторите попытку.", client, 255, 0, 0)
			end
		end
	elseif(dialogid == 63) then
		if(response == true) then
			local bus = tonumber(getElementData(client, "BusOwnID"))
			local accid = tonumber(getElementData(client, "AccID"))
			if(accid == BusinessTable[bus]["Owner"]) then
				if(tonumber(inputtext) ~= nil) then
					inputtext = tonumber(inputtext)
					if(IDS[inputtext] ~= nil) then
						local secPlayer = IDS[inputtext]
						local biz = tonumber(getElementData(secPlayer, "BusOwnID"))
						if(biz == 0) then
							if(getElementData(secPlayer, "Login") == true) then
								local x, y, z = getElementPosition(secPlayer)
								local x1, y1, z1 = getElementPosition(client)
								if(getDistanceBetweenPoints3D(x, y, z, x1, y1, z1) < 20) then
									SED(client, "BusSellPlayer", secPlayer)
									showPlayerDialog(client, 64, 2, "Стоимость продажи бизнеса.", "Введите стоимость продажи бизнеса.", "Продать", "Отмена")
								else
									addBox("Ошибка: Данный игрок слишком далеко.", client, 255, 0, 0)
								end
							else
								addBox("Ошибка: Данный игрок не авторизован.", client, 255, 0, 0)
							end
						else
							addBox("Ошибка: У данного игрока уже есть бизнес.", client, 255, 0, 0)
						end
					else
						addBox("Ошибка: Данный игрок не на сервере.", client, 255, 0, 0)
					end
				else
					addBox("Ошибка: Некорректно введён ID игрока.", client, 255, 0, 0)
				end
			else
				addBox("Системная ошибка. Повторите попытку.", client, 255, 0, 0)
			end
		end
	elseif(dialogid == 64) then
		if(response == true) then
			if(tonumber(inputtext) ~= nil) then
				local summ = tonumber(inputtext)
				if(summ > 1250000) then
					local secPlayer = getElementData(client, "BusSellPlayer")
					if(isElement(secPlayer) == true) then
						if(getElementData(secPlayer, "Login") == true) then
							local secMoney = getElementData(secPlayer, "Money")
							if(secMoney >= summ) then
								local x, y, z = getElementPosition(secPlayer)
								local x1, y1, z1 = getElementPosition(client)
								local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
								if(dist < 20) then
									local str = getElementData(client, "Name") .. " предлагает Вам купить бизнес №" .. getElementData(client, "BusOwnID") .. ".\nСтоимость покупки: " .. summ .. "$." 
									showPlayerDialog(secPlayer, 65, 1, "Покупка заправки.", str, "Купить", "Отмена")
									SED(secPlayer, "BusBuyPlayer", client)
									SED(secPlayer, "BusBuyPrice", summ)
									SED(secPlayer, "BusBuyID", getElementData(client, "BusOwnID"))
								else
									removeElementData(client, "BusSellPlayer")
									addBox("Ошибка: Данный игрок слишком далеко от Вас.", client, 255, 0, 0)
								end
							else
								removeElementData(client, "BusSellPlayer")
								addBox("Ошибка: У данного игрока недостаточно денег\nДля совершения покупки.", client, 255, 0, 0)
							end
						else
							removeElementData(client, "BusSellPlayer")
							addBox("Ошибка: Выбранный Вами уже не авторизован.", client, 255, 0, 0)
						end
					else
						removeElementData(client, "BusSellPlayer")
						addBox("Ошибка: Выбранный Вами уже не в сети.", client, 255, 0, 0)
					end
				else
					addBox("Ошибка: Вы не можете продать бизнес менее чем\nЗа половину государственной стоимости.", client, 255, 0, 0)
					showPlayerDialog(client, 45, 2, "Стоимость продажи бизнеса.", "Введите стоимость продажи бизнеса.", "Продать", "Отмена")
				end
			else
				addBox("Ошибка: Сумма введена некорректно\nПовторите попытку.", client, 255, 0, 0)
				showPlayerDialog(client, 45, 2, "Стоимость продажи бизнеса.", "Введите стоимость продажи бизнеса.", "Продать", "Отмена")
			end
		else
			addBox("Вы отменили продажу бизнеса.", client, 255, 0, 0)
			removeElementData(client, "BusSellPlayer")
		end
	elseif(dialogid == 65) then
		local secPlayer = getElementData(client, "BusBuyPlayer")
		if(response == true) then
			local money = getElementData(client, "Money")
			local price = getElementData(client, "BusBuyPrice")
			if(money >= price) then
				if(isElement(secPlayer) == true) then
					if(getElementData(secPlayer, "Login") == true) then
						local biz = getElementData(client, "BusBuyID")
						local theBiz = getElementData(secPlayer, "BusOwnID")
						local own = tonumber(getElementData(client, "BusOwnID"))
						if(own == 0) then
							if(biz == theBiz) then
								BusinessTable[biz]["Owner"] = getElementData(client, "AccID")
								BusinessTable[biz]["OwnerName"] = getElementData(client, "Name")
								SED(secPlayer, "BusOwnID", 0)
								SED(client, "BusOwnID", biz)
								setElementMoney(client, money * (-1), "Покупка биз")
								setElementMoney(secPlayer, money, "Продажа биз")
								dbExec(mysql, "UPDATE `Business` SET `Owner` = ?, `OwnerName` = ?, `Benzovoz` = '0' WHERE `ID` = ?", BusinessTable[biz]["Owner"], BusinessTable[biz]["OwnerName"], biz)
								dbExec(mysql, "UPDATE `Accounts` SET `BusinessID` = 0, `Money` = ? WHERE `ID` = ?", getElementData(secPlayer, "Money"), getElementData(secPlayer, "AccID"))
								dbExec(mysql, "UPDATE `Accounts` SET `BusinessID` = ?, `Money` = ? WHERE `ID` = ?", biz, getElementData(client, "Money"), getElementData(client, "AccID"))
								addBox("Вы успешно приобрели бизнес " .. biz .. " id.", client, 0, 60, 255)
								addBox("Вы успешно продали бизнес " .. biz .. " id.", secPlayer, 0, 60, 255)
							else
								addBox("Ошибка: Данный бизнес уже продан.", client, 255, 0, 0)
							end
						else
							addBox("Ошибка: У Вас уже есть бизнес.", client, 255, 0, 0)
							addBox("Ошибка: У данного игрока уже есть бизнес.", secPlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: Игрок, который продавал Вам бизнес,\nНе авторизован.", client, 255, 0, 0)
					end
				else
					addBox("Ошибка: Игрок, который продавал Вам бизнес, отключился.", client, 255, 0, 0)
				end
			else
				addBox("Ошибка: У Вас недостаточно денег\nЧтобы совершить покупку данного бизнеса.", client, 255, 0, 0)
				if(isElement(secPlayer) == true) then
					addBox("Ошибка: У данного игрока недостаточно денег для покупки.", secPlayer, 255, 0, 0)
				end
			end
		else
			local secPlayer = getElementData(client, "BusBuyPlayer")
			if(isElement(secPlayer) == true) then
				addBox("Игрок " .. getElementData(client, "Name") .. " отказался от\nПокупки Вашего бизнеса.", secPlayer, 220, 60, 0)
			end
		end
		removeElementData(client, "BusBuyPlayer")
		removeElementData(client, "BusBuyPrice")
		removeElementData(client, "BusBuyID")
	elseif(dialogid == 66) then
		if(response == true) then
			if(inputtext ~= nil) then
				if(tonumber(inputtext) ~= nil) then
					local biz = tonumber(getElementData(client, "BusOwnID"))
					inputtext = tonumber(inputtext)
					if(inputtext > 0) then
						if(OrderBiz[biz] == nil or OrderBiz[biz]["Products"] == 0) then
							local x, y, z = -900, -1420, -11
							local x1, y1, z1 = BusinessTable[biz]["px"], BusinessTable[biz]["py"], BusinessTable[biz]["pz"]
							local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
							local koef = dist / 900
							if(koef > 0 and koef <= 1) then
								koef = 1
							elseif(koef > 1 and koef <= 2) then
								koef = 2
							elseif(koef > 2 and koef <= 3) then
								koef = 3
							else
								koef = 4
							end
							local price = (koef) * inputtext / 2
							if(BusinessTable[biz]["Money"] >= price) then
								if(inputtext <= 3000) then
									if(BusinessTable[biz]["Products"] + inputtext <= BusinessTable[biz]["MaxProducts"]) then
										OrderBiz[biz] = {}
										OrderBiz[biz]["Products"] = inputtext
										BusinessTable[biz]["Money"] = BusinessTable[biz]["Money"] - price
										OrderBiz[biz]["Price"] = price
										dbExec(mysql, "UPDATE `Business` SET `OrderProducts` = ?, `OrderPrice` = ?, `Money` = ? WHERE `ID` = ?", OrderBiz[biz]["Products"], OrderBiz[biz]["Price"], BusinessTable[biz]["Money"], biz)
										addBox("Вы успешно сделали заказ на " .. price .. "$ за " .. inputtext .. " кг материала.", client, 0, 100, 255)
										BusinessTable[biz]["OwnerPlayer"] = client
									else
										addBox("Ошибка: Вы не можете заказать больше,\nЧем можно поместить на склад.", client, 255, 0, 0)
									end
								else
									addBox("Ошибка: Вы не можете заказать больше 3000 материалов.", client, 255, 0, 0)
								end
							else
								addBox("Ошибка: У Вас недостаточно денег,\nЧтобы сделать этот заказ.", client, 255, 0, 0)
							end
						else
							addBox("Ошибка: Вы уже сделали заказ ранее, ожидайте.", client, 255, 0, 0)
						end
					else
						addBox("Ошибка: Вы ввели некорректное число.", client, 255, 0, 0)
					end
				else
					addBox("Ошибка: Вы не ввели количество груза.", client, 255, 0, 0)
				end
			else
				addBox("Ошибка: Вы не ввели количество груза.", client, 255, 0, 0)
			end
		end
	elseif(dialogid == 67) then
		if(response == true) then
			if(inputtext ~= nil) then
				if(tonumber(inputtext) ~= nil) then
					inputtext = math.round(tonumber(inputtext))
					if(inputtext <= tonumber(getElementData(client, "Money"))) then
						local biz = tonumber(getElementData(client, "BusOwnID"))
						local accid = tonumber(getElementData(client, "AccID"))
						if(biz >= 10) then
							if(BusinessTable[biz]["Owner"] == accid) then
								if(inputtext > 0) then
									BusinessTable[biz]["Money"] = BusinessTable[biz]["Money"] + inputtext
									setElementMoney(client, inputtext * (-1), "На бизнес")
									dbExec(mysql, "UPDATE `Business` SET `Money` = ? WHERE `ID` = ?", BusinessTable[biz]["Money"], biz)
									addBox("Вы успешно внесли " .. inputtext .. "$ на счёт бизнеса.", client, 0, 100, 255)
								else
									addBox("Ошибка: Сумма введена некорректно.", client, 255, 0, 0)
								end
							else
								addBox("Системная ошибка.", client, 255, 0, 0)
							end
						else
							addBox("Системная ошибка.", client, 255, 0, 0)
						end
					else
						addBox("Ошибка: У Вас недостаточно денег.", client, 255, 0, 0)
					end
				else
					addBox("Ошибка: Сумма введена некорректно.", client, 255, 0, 0)
				end
			else
				addBox("Ошибка: Вы не ввели сумму.", client, 255, 0, 0)
			end
		end
	elseif(dialogid == 68) then
		if(response == true) then
			if(inputtext ~= nil) then
				if(tonumber(inputtext) ~= nil) then
					inputtext = math.round(tonumber(inputtext))
					if(inputtext > 0) then
						local biz = tonumber(getElementData(client, "BusOwnID"))
						local money = tonumber(getElementData(client, "Money"))
						if(inputtext <= BusinessTable[biz]["Money"]) then
							BusinessTable[biz]["Money"] = BusinessTable[biz]["Money"] - inputtext
							setElementMoney(client, inputtext, "От бизнеса")
							dbExec(mysql, "UPDATE `Business` SET `Money` = ? WHERE `ID` = ?", BusinessTable[biz]["Money"], biz)
							addBox("Вы сняли с бизнеса " .. inputtext .. "$.", client, 0, 100, 255)
						else
							addBox("Ошибка: ", client, 255, 0, 0)
						end
					else
						addBox("Ошибка: Сумма введена некорректно.", client, 255, 0, 0)
					end
				else
					addBox("Ошибка: Сумма введена некорректно.", client, 255, 0, 0)
				end
			else
				addBox("Ошибка: Сумма введена некорректно.", client, 255, 0, 0)
			end
		end
	elseif(dialogid == 69) then
		if(response == true) then
			if(getElementData(client, "Faction") >= 1 and getElementData(client, "Faction") <= 4) then
				if(Capt == false) then
					local listitem = getElementData(client, "Lisitem")
					if(CHT[listitem+1]["Mafia"] ~= getElementData(client, "Faction")) then
						Capt = true
						CaptZone["Fact1"] = getElementData(client, "Faction")
						CaptZone["Fact2"] = CHT[listitem+1]["Mafia"]
						CaptZone["Frag1"] = 0
						CaptZone["Frag2"] = 0
						CaptZone["Lisitem"] = listitem + 1
						for i, n in pairs(IDS) do
							if(getElementData(n, "Faction") == CaptZone["Fact1"] or getElementData(n, "Faction") == CaptZone["Fact2"]) then
								addBox("Началась битва за бизнес, время до конца 10:00", n, 255, 255, 0)
							end
						end
						setTimer(endCapt, 1000 * 600, 1)
					end
				end
			end
		end
		removeElementData(client, "Lisitem")
	elseif(dialogid == 70) then
		if(response == true) then
			if(getElementData(client, "Faction") >= 1 and getElementData(client, "Faction") <= 4) then
				if(Capt == false) then
					if(CHT[listitem+1]["Mafia"] ~= getElementData(client, "Faction")) then
						showPlayerDialog(client, 69, 1, "Вызов на битву за бизнес", "Вы действительно хотите вызвать " .. FactionName[listitem+1][1] .. " на битву за данный бизнес?", "Да", "Нет")
						SED(client, "Lisitem", listitem)
					else
						addBox("Ошибка: Вы не можете воевать за свой бизнес.", client, 255, 0, 0)
					end
				else
					addBox("Ошибка: Битва за бизнесы уже начата.", client, 255, 0, 0)
				end
			end
		end
	elseif(dialogid == 71) then
		if(response == true) then
			if(getElementData(client, "Login") == true) then
				if(getElementData(client, "PWork") == 1) then
					if(getElementData(client, "VehicleDriverBus") ~= false) then
						local veh = getElementData(client, "VehicleDriverBus")
						local x, y, z, rz = getElementData(veh, "sx"), getElementData(veh, "sy"), getElementData(veh, "sz"), getElementData(veh, "srz")
						setTimer(customSpawnVehicle, 100, 1, veh)
						if(getElementData(client, "mrkBus") ~= false) then
							local mrk = getElementData(client, "mrkBus")
							local blp = getElementData(client, "blpBus")
							if(isElement(mrk) == true) then
								removeEventHandler("onMarkerHit", mrk, MarkerHit)
								destroyElement(mrk)
								destroyElement(blp)
								removeElementData(client, "mrkBus")
								removeElementData(client, "blpBus")
							end
						end
						removeElementData(client, "BusStage")
						removeElementData(client, "March")
						removeElementData(veh, "DriverPlayerBus")
						removeElementData(client, "VehicleDriverBus")
						addBox("Вы закончили рабочий день.\nЧтобы устроиться на другую работу,\nВам нужно уволиться в том месте,\nГде Вы устраивались.", client, 0, 100, 255)
					end
				end
				if(getElementData(client, "NWork") > 0) then
					if(getElementData(client, "NWork") == 6) then
						if(getElementData(client, "MailVeh") ~= false) then
							local veh = getElementData(client, "MailVeh")
							if(isElement(veh) == true) then
								customSpawnVehicle(veh)
								setElementHealth(veh, 1000)
								SED(veh, "Fuel", 40)
								removeElementData(veh, "MailPlayer")
							end
							removeElementData(client, "MailVeh")
							if(getElementData(client, "blpMail") ~= false) then
								local blp = getElementData(client, "blpMail")
								local mrk = getElementData(client, "mrkMail")
								local aff = getEventHandlers("onMarkerHit", mrk)
								destroyElement(mrk)
								destroyElement(blp)
								removeElementData(client, "mrkMail")
								removeElementData(client, "blpMail")
							end
							addBox("Вы завершили свой рабочий день\nТранспорт был эвакуирован.", client, 0, 100, 250)
						end
					elseif(getElementData(client, "PWork") == 3) then
						if(getElementData(client, "PWork") == 3) then
							if(getElementData(client, "CourierVehicle") ~= nil and getElementData(client, "CourierVehicle") ~= false) then
								local veh = getElementData(client, "CourierVehicle")
								customSpawnVehicle(veh)
								removeElementData(veh, "CourierPlayer")
								removeElementData(client, "CourierVehicle")
								addBox("Вы закончили рабочий день.", client, 0, 60, 255)
							end
							if(getElementData(client, "mrkCourierStart") ~= false) then
								local mrk = getElementData(client, "mrkCourierStart")
								local blp = getElementData(client, "blpCourierStart")
								removeEventHandler("onMarkerHit", mrk, startCourierWork)
								destroyElement(mrk)
								destroyElement(blp)
								removeElementData(client, "mrkCourierStart")
								removeElementData(client, "blpCourierStart")
							end
							if(getElementData(client, "mrkCourierEnd") ~= false) then
								local mrk = getElementData(client, "mrkCourierEnd")
								local blp = getElementData(client, "blpCourierEnd")
								removeEventHandler("onMarkerHit", mrk, mrkCourEnd)
								destroyElement(mrk)
								destroyElement(blp)
								removeElementData(client, "mrkCourierEnd")
								removeElementData(client, "blpCourierEnd")
								removeElementData(client, "Gruz")
								removeElementData(client, "Coef")
							end
							if(getElementData(client, "mrkCour") ~= false) then
								local mrk = getElementData(client, "mrkCour")
								local blp = getElementData(client, "blpCour")
								removeEventHandler("onMarkerHit", mrk, hitCourEnd)
								destroyElement(mrk)
								destroyElement(blp)
								removeElementData(client, "mrkCour")
								removeElementData(client, "blpCour")
								local bus = tonumber(getElementData(client, "courBiz"))
								OrderBiz[bus]["OrderCourier"] = nil
							end
						end
					elseif(getElementData(client, "PWork") == 2) then
						if(getElementData(client, "TaxiVehicle") ~= false) then
							local veh = getElementData(client, "TaxiVehicle")
							local id = getElementData(veh, "TaxiVehTable")
							customSpawnVehicle(veh)
							removeElementData(client, "TaxiVehicle")
							removeElementData(veh, "TaxiDriverPlayer")
							addBox("Вы закончили свой рабочий день.", client, 0, 60, 255)
						end
					else
						addBox("Произошла ошибка, повторите попытку.", client, 255, 0, 0)
					end
				else
					if(getElementData(client, "PWork") == 1) then
						if(getElementData(client, "VehicleDriverBus") ~= false) then
							local veh = getElementData(client, "VehicleDriverBus")
							local x, y, z, rz = getElementData(veh, "sx"), getElementData(veh, "sy"), getElementData(veh, "sz"), getElementData(veh, "srz")
							setTimer(customSpawnVehicle, 100, 1, veh)
							if(getElementData(client, "mrkBus") ~= false) then
								local mrk = getElementData(client, "mrkBus")
								local blp = getElementData(client, "blpBus")
								if(isElement(mrk) == true) then
									removeEventHandler("onMarkerHit", mrk, MarkerHit)
									destroyElement(mrk)
									destroyElement(blp)
									removeElementData(client, "mrkBus")
									removeElementData(client, "blpBus")
								end
							end
							removeElementData(veh, "DriverPlayerBus")
							removeElementData(client, "VehicleDriverBus")
							addBox("Вы закончили рабочий день.", client, 0, 100, 255)
						end
					end
				end
			else
				addBox("Произошла ошибка, повторите попытку.", client, 255, 0, 0)
			end
		end
	elseif(dialogid == 72) then
		if(response == true) then
			local dom = tonumber(getElementData(client, "House"))
			if(dom > 0) then
				if(HouseTable[dom]["x"] ~= 0) then
					local veh = tonumber(HouseTable[dom]["Car"])
					if(veh == 0) then
						listitem = listitem + 1
						local price = CarInfo[listitem]["GosPrice"]
						if(price <= getElementData(client, "Money")) then
							HouseTable[dom]["Car"] = CarInfo[listitem]["ID"]
							setElementMoney(client, -CarInfo[listitem]["GosPrice"], "Покупка кар в магазине")
							dbExec(mysql, "UPDATE `House` SET `Car` = ? WHERE `ID` = ?", HouseTable[dom]["Car"], dom)
							local id = tonumber(getElementData(client, "ID"))
							PrivateCar[id] = createVeh(CarInfo[listitem]["ID"], HouseTable[dom]["vx"], HouseTable[dom]["vy"], HouseTable[dom]["vz"], 0, 0, HouseTable[dom]["vrz"])
							SED(PrivateCar[id], "PrivatePlayer", id)
							addBox("Приобретено: " .. CarInfo[listitem]["Name"] .. "\nСтоимость: " .. CarInfo[listitem]["GosPrice"] .. "$.", client, 0, 255, 100)
						else
							addBox("Ошибка:\nУ Вас недостаточно денег для покупки.", client, 255, 0, 0)
						end
					else
						addBox("Ошибка: У Вас уже есть машина.", client, 255, 0, 0)
					end
				else
					addBox("Ошибка: У Вас нет гаража.", client, 255, 0, 0)
				end
			else
				addBox("Ошибка: У Вас нет дома.", client, 255, 0, 0)
			end
		end
	elseif(dialogid == 73) then
		if(response == true) then
			local fact = getElementData(client, "Faction")
			if(fact >= 1 and fact <= 4) then
				local str = "Maf" .. fact .."Gruz"
				if(Server[str] >= 21) then
					Server[str] = Server[str] - 21
					if(listitem == 0) then
						giveWeapon(client, 24, 21)
						addBox("Вы забрали со склада Desert Eagle", client, 0, 255, 100)
					elseif(listitem == 1) then
						giveWeapon(client, 25, 8)
						addBox("Вы забрали со склада Shotgun", client, 0, 255, 100)
					else
						giveWeapon(client, 31, 60)
						addBox("Вы забрали со склада M4", client, 0, 255, 100)
					end
				else
					addBox("Ошибка: На складе недостаточно материалов.", client, 255, 0, 0)
				end
			end
		end
	elseif(dialogid == 74) then
		if(response == true) then
			local fact = getElementData(client, "Faction")
			if(fact == 9) then
				if(Server["ArmyGruz"] >= 21) then
					Server["ArmyGruz"] = Server["ArmyGruz"] - 21
					if(listitem == 0) then
						setPedArmor(client, 100)
						addBox("Вы забрали со склада бронежилет.", client, 0, 255, 100)
					elseif(listitem == 1) then
						setElementHealth(client, 100)
						addBox("Вы воспользовались армейской аптечкой.", client, 0, 255, 100)
					elseif(listitem == 2) then
						giveWeapon(client, 24, 21)
						addBox("Вы забрали со склада Desert Eagle", client, 0, 255, 100)
					elseif(listitem == 3) then
						giveWeapon(client, 25, 8)
						addBox("Вы забрали со склада Shotgun", client, 0, 255, 100)
					else
						giveWeapon(client, 31, 60)
						addBox("Вы забрали со склада M4", client, 0, 255, 100)
					end
				end
			else
				addBox("Ошибка: Вы не армии.", client, 255, 0, 0)
			end
		end
	elseif(dialogid == 75) then
		if(response == true) then
			local biz = tonumber(getElementData(client, "BusOwnID"))
			if(biz > 0) then
				local own = BusinessTable[biz]["OwnerPlayer"]
				if(own == client) then
					if(inputtext ~= nil) then
						inputtext = tonumber(inputtext)
						if(inputtext ~= nil) then
							inputtext = math.round(inputtext)
							if(inputtext > 0 and inputtext < 720) then
								local money = tonumber(getElementData(client, "Money"))
								if(money >= inputtext * 200) then
									if(BusinessTable[biz]["PayDay"] + inputtext <= 720) then
										BusinessTable[biz]["PayDay"] = BusinessTable[biz]["PayDay"] + inputtext
										dbExec(mysql, "UPDATE `Business` SET `PayDay` = ? WHERE `ID` = ?", BusinessTable[biz]["PayDay"], biz)
										setElementMoney(client, -inputtext * 200, "Пейдей биз")
										addBox("Вы оплатили бизнес до " .. BusinessTable[biz]["PayDay"] .. "/720.", client, 0, 100, 255)
									else
										BusinessTable[biz]["PayDay"] = 720
										dbExec(mysql, "UPDATE `Business` SET `PayDay` = ? WHERE `ID` = ?", 720, biz)
										setElementMoney(client, -inputtext * 200, "Пейдей биз")
										addBox("Вы оплатили бизнес на максимальное значение.", client, 0, 100, 255)
									end
								else
									addBox("Ошибка: У Вас недостаточно денег.", client, 255, 0, 0)
								end
							else
								addBox("Ошибка: Оплата может быть от 1 до 719.", client, 255, 0, 0)
							end
						else
							addBox("Произошла ошибка, сообщите администрации.", client, 255, 0, 0)
						end
					else
						addBox("Произошла ошибка, сообщите администрации.", client, 255, 0, 0)
					end
				else
					addBox("Произошла ошибка, сообщите администрации.", client, 255, 0, 0)
				end
			else
				addBox("Произошла ошибка, сообщите администрации.", client, 255, 0, 0)
			end
		end
	elseif(dialogid == 76) then
		if(response == true) then
			local adm = tonumber(getElementData(client, "Admin"))
			listitem = listitem + 1
			if(listitem <= adm) then
				local str = "Команда\tПеременные\tЗначение"
				for i=1,table.maxn(AdminCommands[listitem]) do
					str = str .. "\n" .. AdminCommands[listitem][i]["String"] .. "\t" .. AdminCommands[listitem][i]["Pole"] .. "\t" .. AdminCommands[listitem][i]["Value"]
				end
				showPlayerDialog(client, 64000, 3, "Список команд админа " .. listitem .. " уровня.", str, "Ок", "Отмена")
			end
		end
	elseif(dialogid == 77) then
		if(response == true) then
			if(listitem > -1) then
				listitem = listitem + 1
				local money = tonumber(getElementData(client, "Money"))
				if(money >= SkinTable[listitem]["Price"]) then
					setElementModel(client, SkinTable[listitem]["ID"])
					addBox("Вы приобрели одежду " .. SkinTable[listitem]["ID"] .. " id.", client, 255, 0)
					setElementMoney(client, SkinTable[listitem]["Price"] * (-1), "Покупка скин")
					updatePlayerAccount(client, "Skin", SkinTable[listitem]["ID"])
					SED(client, "Skin", SkinTable[listitem]["ID"])
				else
					addBox("Ошибка: У Вас недостаточно денег для покупки.", client, 255, 0, 0)
				end
			end
		end
	elseif(dialogid == 78) then
		if(response == true) then
			if(listitem > -1) then
				if(listitem == 0) then
					SED(client, "SpawnID", 0)
					updatePlayerAccount(client, "SpawnID", 0)
					addBox("Начальная точка: стандарт", client, 0, 255, 100)
				elseif(listitem == 1) then
					SED(client, "SpawnID", 1)
					updatePlayerAccount(client, "SpawnID", 1)
					addBox("Начальная точка: дом", client, 0, 255, 100)
				elseif(listitem == 2) then
					SED(client, "SpawnID", 2)
					updatePlayerAccount(client, "SpawnID", 2)
					addBox("Начальная точка: фракция", client, 0, 255, 100)
				end
			end
		end
	elseif(dialogid == 79) then
		if(response == true) then
			if(listitem > -1) then
				if(listitem == 0) then
					local money = tonumber(getElementData(client, "Money"))
					if(money >= 200) then
						addBox("Вы купили и съели пиццу с \"Анастасами\"", client, 0, 255, 100)
						setElementMoney(client, -200, "Покупка пицца")
						local food = tonumber(getElementData(client, "Food"))
						if(food + 30 > 100) then
							SED(client, "Food", 100)
						else
							SED(client, "Food", food + 30)
						end
						UpdateFood(client)
					else
						addBox("У Вас недостаточно денег для покупки пиццы.", client, 255, 0, 0)
					end
				elseif(listitem == 1) then
					local money = tonumber(getElementData(client, "Money"))
					if(money >= 500) then
						addBox("Вы купили и съели бургер.", client, 0, 255, 100)
						setElementMoney(client, -500, "Покупка бургер")
						local food = tonumber(getElementData(client, "Food"))
						if(food + 70 > 100) then
							SED(client, "Food", 100)
						else
							SED(client, "Food", food + 70)
						end
						UpdateFood(client)
					else
						addBox("У Вас недостаточно денег для покупки бургера.", client, 255, 0, 0)
					end
				elseif(listitem == 2) then
					local money = tonumber(getElementData(client, "Money"))
					if(money >= 800) then
						addBox("Вы купили и съели обед.", client, 0, 255, 100)
						setElementMoney(client, -800, "Покупка обед")
						local food = tonumber(getElementData(client, "Food"))
						SED(client, "Food", 100)
						UpdateFood(client)
					else
						addBox("У Вас недостаточно денег для покупки обеда.", client, 255, 0, 0)
					end
				end
			end
		end
	elseif(dialogid == 80) then
		if(response == true) then
			local veh = getPedOccupiedVehicle(client)
			if(veh ~= false) then
				local money = tonumber(getElementData(client, "Money"))
				if(money >= 250) then
					setElementMoney(client, -250, "Ремонт")
					setElementHealth(veh, 1000)
					addBox("Вы успешно отремонтировали Ваш транспорт.", client, 0, 255, 100)
					setVehicleDoorState(veh, 0, 0)
					setVehicleDoorState(veh, 1, 0)
					setVehicleDoorState(veh, 2, 0)
					setVehicleDoorState(veh, 3, 0)
					setVehicleDoorState(veh, 4, 0)
					setVehicleDoorState(veh, 5, 0)
					fixVehicle(veh)
				else
					addBox("У Вас недостаточно денег.", client, 255, 0, 0)
				end
			else
				addBox("Произошла ошибка.\nОбратитесь к администрации.", client, 255, 0, 0)
			end
		end
		removeElementData(client, "mrkRepair")
	elseif(dialogid == 81) then
		if(response == true) then
			if(listitem > -1) then
				if(listitem == 0) then
					local money = tonumber(getElementData(client, "Money"))
					if(money >= 150) then
						addBox("Вы купили и съели пиццу с \"Анастасами\"", client, 0, 255, 100)
						setElementMoney(client, -150, "Покупка пицца")
						local food = tonumber(getElementData(client, "Food"))
						if(food + 30 > 100) then
							SED(client, "Food", 100)
						else
							SED(client, "Food", food + 30)
						end
						UpdateFood(client)
					else
						addBox("У Вас недостаточно денег для покупки пиццы.", client, 255, 0, 0)
					end
				elseif(listitem == 1) then
					local money = tonumber(getElementData(client, "Money"))
					if(money >= 250) then
						addBox("Вы купили и съели пиццу \"Пеппеньезе\"", client, 0, 255, 100)
						setElementMoney(client, -250, "Покупка пицца")
						local food = tonumber(getElementData(client, "Food"))
						if(food + 70 > 100) then
							SED(client, "Food", 100)
						else
							SED(client, "Food", food + 70)
						end
						UpdateFood(client)
					else
						addBox("У Вас недостаточно денег для покупки пиццы.", client, 255, 0, 0)
					end
				elseif(listitem == 2) then
					local money = tonumber(getElementData(client, "Money"))
					if(money >= 400) then
						addBox("Вы купили и съели бургер.", client, 0, 255, 100)
						setElementMoney(client, -400, "Покупка бургер")
						local food = tonumber(getElementData(client, "Food"))
						SED(client, "Food", 100)
						UpdateFood(client)
					else
						addBox("У Вас недостаточно денег для покупки бургера.", client, 255, 0, 0)
					end
				end
			end
		end
	elseif(dialogid == 82) then
		if(response == true) then
			if(listitem == 0) then
				local id = tonumber(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(306.5087890625, 289.6396484375, 16.184661865234, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]	= createBlip(306.5087890625, 289.6396484375, 16.184661865234, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
			elseif(listitem == 1) then
				local id = tonumber(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(-1052.2666015625, -231.087890625, 11.404360771179, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]	= createBlip(-1052.2666015625, -231.087890625, 11.404360771179, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
			elseif(listitem == 2) then
				local id = tonumber(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(-1063.2958984375, 319.2548828125, 11.21955871582, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"] = createBlip(-1063.2958984375, 319.2548828125, 11.21955871582, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
			elseif(listitem == 3) then
				local id = tonumber(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(-149.7919921875, -1395.5693359375, 10.423043251038, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"] = createBlip(-149.7919921875, -1395.5693359375, 10.423043251038, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
			end
		else
			showPlayerDialog(client, 25, 3, "GPS-навигатор", "Меню\nВажные места\nРабота\nГосударственные учреждения\nОпасные районы\nБлижайший магазин одежды\nБлижайший 24/7\nБлижайшая закусочная\nБлижайший банкомат\nНайти моё авто\nНайти мой дом", "Выбор", "Отмена")
		end
	elseif(dialogid == 83) then
		if(response == true) then
			if(getElementData(client, "WeaponLicense") == true) then
				if(listitem == 0) then
					if(tonumber(getElementData(client, "Money")) >= 12500) then
						setElementMoney(client, -12500, "Покупка дигл")
						addBox("Вы приобрели Desert Eagle", client, 0, 255, 100)
						giveWeapon(client, 24, 35)
					else
						addBox("Ошибка: У Вас недостаточно денег.", client, 255, 0, 0)
					end
				elseif(listitem == 1) then
					if(tonumber(getElementData(client, "Money")) >= 15000) then
						setElementMoney(client, -15000, "Покупка М4")
						addBox("Вы приобрели M4", client, 0, 255, 100)
						giveWeapon(client, 31, 120)
					else
						addBox("Ошибка: У Вас недостаточно денег.", client, 255, 0, 0)
					end
				elseif(listitem == 2) then
					if(tonumber(getElementData(client, "Money")) >= 9000) then
						addBox("Вы приобрели Shotgun", client, 0, 255, 100)
						setElementMoney(client, -9000, "Покупка Шотган")
						giveWeapon(client, 25, 35)
					else
						addBox("Ошибка: У Вас недостаточно денег.", client, 255, 0, 0)
					end
				elseif(listitem == 3) then
					if(tonumber(getElementData(client, "Money")) >= 14000) then
						addBox("Вы приобрели AK-47", client, 0, 255, 100)
						setElementMoney(client, -14000, "Покупка ак-47")
						giveWeapon(client, 30, 120)
					else
						addBox("Ошибка: У Вас недостаточно денег.", client, 255, 0, 0)
					end
				end
			else
				addBox("Ошибка: У Вас нет лицензии.", client, 255, 60, 0)
			end
		end
	elseif(dialogid == 84) then
		local secPlayer = getElementData(client, "LicBy")
		if(response == true) then
			local price = tonumber(getElementData(client, "LicPrice"))
			local money = tonumber(getElementData(client, "Money"))
			if(money >= price) then
				SED(client, "WeaponLicense", true)
				setElementMoney(client, -price, "Покупка лицензии")
				local secMoney = tonumber(getElementData(secPlayer, "Money") + (price / 2))
				setElementMoney(secPlayer, secMoney, "Продажа лицензии")
				dbExec(mysql, "UPDATE `Accounts` SET `Money` = ?, `WeaponLicense` = ? WHERE `Name` = ?", money, 1, getElementData(client, "Name"))
				dbExec(mysql, "UPDATE `Accounts` SET `Money` = ? WHERE `Name` = ?", secMoney, getElementData(secPlayer, "Name"))
				addBox("Вы успешно приобрели\nЛицензию на оружие", client, 0, 255, 100)
				addBox(getElementData(client, "Name") .. " приобрел\nУ Вас лицензию на оружие.", secPlayer, 0, 255, 100)
			else
				addBox("У Вас недостаточно денег,\nЧтобы совершить данную покупку.", client, 255, 0, 0)
				addBox("Данный игрок отказался от покупки.", secPlayer, 255, 0, 0)
			end
		else
			addBox("Данный игрок отказался от покупки.", secPlayer, 255, 0, 0)
		end
	elseif(dialogid == 85) then 
		if(response == true) then
			if(listitem == 0) then
				if(getElementData(client, "House") > 0) then
					local house = tonumber(getElementData(client, "House"))
					local carid = 0
					local park = ""
					if(HouseTable[house]["vx"] ~= 0) then
						carid = HouseTable[house]["Car"]
						park = "Есть"
					else
						park = "Отсутствует"
					end
					local pd = HouseTable[house]["PayDay"]
					local str = "Дом: " .. house .. " id.\nГараж: " .. park
					if(carid ~= 0) then
						str = str .. "\nМашина: " .. carid .. " id."
					end
					str = str .. "\nОплачено налогов: " .. pd .. "/720."
					showPlayerDialog(client, 64000, 1, "Инфомация о доме", str, "Ок", "Отмена")
				else
					addBox("Ошибка: У Вас нет дома.", client, 255, 0, 0)
				end
			elseif(listitem == 1) then
				if(getElementData(client, "House") > 0) then
					local house = tonumber(getElementData(client, "House"))
					local id = tonumber(getElementData(client, "ID"))
					if(HouseTable[house]["hx"] ~= 0) then
						if(HouseTable[house]["Car"] > 0) then
							local veh = PrivateCar[id]
							if(isElement(veh) == true) then
								local vehid = getElementData(veh, "ID")
								for i, n in pairs(getVehicleOccupants(veh)) do
									removePedFromVehicle(n)
								end
								destroyElement(veh)
								VehicleTable[vehid] = nil
							end
							PrivateCar[id] = createVeh(HouseTable[house]["Car"], HouseTable[house]["vx"], HouseTable[house]["vy"], HouseTable[house]["vz"], 0, 0, HouseTable[house]["vrz"])
							SED(PrivateCar[id], "PrivatePlayer", id)
							addBox("Ваша машина успешно припаркована\nУ дома!", client, 0, 255, 100)
						else
							addBox("Ошибка: У Вас нет машины.", client, 255, 0, 0)
						end
					else
						addBox("Ошибка: У Вас нет гаража.", client, 255, 0, 0)
					end
				else
					addBox("Ошибка: У Вас нет дома.", client, 255, 0, 0)
				end
			elseif(listitem == 2) then
				showPlayerDialog(client, 86, 2, "Оплата налога за дом", "Введите количество часов, за которое\nВы хотите заплатить налог.\n \nНалог: 200$/Час.", "Оплата", "Отмена")
			elseif(listitem == 3) then
				if(getElementData(client, "House") > 0) then
					local house = getElementData(client, "House")
					local price = tonumber(HouseTable[house]["Price"] / 2) 
					local id = getElementData(client, "ID")
					if(PrivateCar[id] == nil) then
						showPlayerDialog(client, 18, 1, "Продать дом государству.", "Действительно ли Вы хотите продать дом государству?\nСтоимость продажи: " .. price .. "$", "Продать", "Отмена")
					else
						addBox("Ошибка: Сначала продайте авто.", client, 255, 0, 0)
					end
				else
					addBox("Ошибка: У Вас нет дома.", client, 255, 0, 0)
				end
			elseif(listitem == 4) then
				if(getElementData(client, "House") > 0) then
					local house = getElementData(client, "House")
					if(HouseTable[house]["Open"] == true) then
						addBox("Вы закрыли Ваш дом.", client, 0, 255, 60)
						HouseTable[house]["Open"] = false
						dbExec(mysql, "UPDATE `House` SET `Open` = 0 WHERE `ID` = ?", house)
					else
						addBox("Вы открыли Ваш дом.", client, 0, 255, 60)
						HouseTable[house]["Open"] = true
						dbExec(mysql, "UPDATE `House` SET `Open` = 1 WHERE `ID` = ?", house)
					end
				else
					addBox("Ошибка: У Вас нет дома.", client, 255, 0, 0)
				end
			else
				addBox("В разработке.", client, 255, 0, 0)
			end
		end
	elseif(dialogid == 86) then
		if(response == true) then
			local payday = inputtext
			if(getElementData(client, "House") > 0) then
				if(payday ~= nil) then
					if(tonumber(payday) ~= nil) then
						payday = math.round(payday)
						local house = getElementData(client, "House")
						local money = getElementData(client, "Money")
						if(money >= payday * 200) then
							if(HouseTable[house]["PayDay"] < 720) then
								if(HouseTable[house]["PayDay"] + payday <= 720) then
									setElementMoney(client, -payday * 200, "Оплата дома")
									addBox("Вы оплатили дом на " .. payday .. " PayDay.", client, 0, 255, 100)
									HouseTable[house]["PayDay"] = HouseTable[house]["PayDay"] + payday
									dbExec(mysql, "UPDATE `House` SET `PayDay` = ? WHERE `ID` = ?", HouseTable[house]["PayDay"], house)
								else
									payday = 720 - HouseTable[house]["PayDay"]
									setElementMoney(client, -payday * 200, "Оплата дома")
									addBox("Вы оплатили дом на максимум.", client, 0, 255, 100)
									HouseTable[house]["PayDay"] = HouseTable[house]["PayDay"] + payday
									dbExec(mysql, "UPDATE `House` SET `PayDay` = ? WHERE `ID` = ?", HouseTable[house]["PayDay"], house)
								end
							else
								addBox("Ваш дом уже оплачен на максимум.", client, 255, 255, 0)
							end
						else
							addBox("Ошибка: У Вас недостаточно денег.", clientr, 255, 0, 0)
						end
					else
						addBox("Ошибка: Количество введено некорректно.", client, 255, 0, 0)
					end
				else
					addBox("Ошибка: Вы не ввели количество.", client, 255, 0, 0)
				end
			else
				addBox("Ошибка: У Вас нет дома.", client, 255, 0, 0)
			end
		end
	elseif(dialogid == 87) then
		if(response == true) then
			if(getElementData(client, "NWork") == 0) then
				SED(client, "NWork", 7)
				addBox("Вы успешно устроились\nНа работу рыболовом.", client, 0, 255, 100)
				local id = tonumber(getElementData(client, "ID"))
				fishobj[id] = createObject(14401, 0, 0, 0)
				exports.bone:attachElementToBone(fishobj[id], client, 12, 0, 0.025, 0.1, 0, 270, 180)
				toggleControl(client, "fire", false)
			else
				addBox("Произошла ошибка.\nПовторите попытку.", client, 255, 0, 0)
			end
		end
	elseif(dialogid == 88) then 
		if(response == true) then
			if(getElementData(client, "NWork") == 7) then
				SED(client, "NWork", 0)
				local id = tonumber(getElementData(client, "ID"))
				destroyElement(fishobj[id])
				fishobj[id] = nil
				toggleControl(client, "fire", true)
				triggerClientEvent(client, "OnEndWorkFish", client)
				if(getElementData(client, "FishBoat") ~= false) then
					if(isElement(getElementData(client, "FishBoat"))) then
						local veh = getElementData(client, "FishBoat")
						customSpawnVehicle(veh)
						removeElementData(veh, "FishPlayer")
						removeElementData(client, "FishBoat")
					end
				end
				if(getElementData(client, "FishKG") ~= false) then
					local money = getElementData(client, "FishKG")
					money = math.floor(money)
					addBox("Вы заработали " .. money .. "$ за\n" .. getElementData(client, "FishKG") .. " кг пойманной рыбы.", client, 0, 255, 60)
					setElementMoney(client, money, "Зарплата рыболова")
			    	removeElementData(client, "FishKG")
			    else
			    	addBox("Вы уволились\nс работы рыболовом.", client, 0, 255, 100)
			    end
			else
				addBox("Произошла ошибка.\nПовторите попытку.", client, 255, 0, 0)
			end
		end
	elseif(dialogid == 89) then
		if(response == true) then
			local veh = getPedOccupiedVehicle(client)
			if(veh ~= false) then
				toggleControl(client, "accelerate", true ) 
				toggleControl(client, "brake_reverse", true )
				toggleControl(client, "handbrake", true )
				SED(client, "ToggleVeh", true)
				addBox("Завести лодку - CTRL", client, 0, 100, 255)
				setElementMoney(client, -250, "Аренда лодки")
				SED(veh, "FishPlayer", client)
				SED(client, "FishBoat", veh)
				triggerClientEvent(client, "onStartWorkFish", client, veh)
			end
		else
			setControlState(client, "enter_exit", true)
		end
	elseif(dialogid == 100) then
		if(response == true) then
			if(getElementData(client, "Money") >= 50) then
				local id = tonumber(getElementData(client, "ID"))
				if(rentVehTable[id] == nil) then
					rentTimer[id] = setTimer(checkRent, 5 * 60 * 1000, 1, client)
					rentVehTable[id] = createVeh(481, -1.037109375, -1203.8701171875, 10.434156417847, 0, 0, 90)
					setElementMoney(client, -50)
					addBox("Вы успешно арендовали велосипед.", client, 0, 60, 255)
				else
					killTimer(rentTimer[id])
					rentTimer[id] = setTimer(checkRent, 5 * 60 * 1000, 1, client)
					addBox("Ранее арендованный транспорт припаркован.", client, 255, 255, 0)
					customDestroyVehicle(rentVehTable[id])
					rentVehTable[id] = createVeh(481, rentCarPos[2]["x"], rentCarPos[2]["y"], rentCarPos[2]["z"], 0, 0, 90)
					setElementMoney(client, -50)
				end
			else
				addBox("Ошибка: У Вас недостаточно денег.", client, 255, 0, 0)
			end
		end
	elseif(dialogid == 101) then
		if(response == true) then
			if(getElementData(client, "Money") >= 50) then
				local id = tonumber(getElementData(client, "ID"))
				if(rentVehTable[id] == nil) then
					rentTimer[id] = setTimer(checkRent, 5 * 60 * 1000, 1, client)
					rentVehTable[id] = createVeh(481, -1.037109375, -1203.8701171875, 10.434156417847, 0, 0, 90)
					setElementMoney(client, -50)
					addBox("Вы успешно арендовали велосипед.", client, 0, 60, 255)
				else
					killTimer(rentTimer[id])
					rentTimer[id] = setTimer(checkRent, 5 * 60 * 1000, 1, client)
					addBox("Ранее арендованный транспорт припаркован.", client, 255, 255, 0)
					customDestroyVehicle(rentVehTable[id])
					rentVehTable[id] = createVeh(481, -1.037109375, -1203.8701171875, 10.434156417847, 0, 0, 90)
					setElementMoney(client, -50)
				end
			else
				addBox("Ошибка: У Вас недостаточно денег.", client, 255, 0, 0)
			end
		end
	end
end

function setElementMoney( thePlayer, money, reason )
	if(getElementData(thePlayer, "Login") == true) then
		if(reason == nil) then
			reason = "Без причины"
		end
		local name = getElementData(thePlayer, "Name")
		local mon = tonumber(getElementData(thePlayer, "Money"))
		money = tonumber(money) 
		mon = mon + money
		SED(thePlayer, "Money", mon)
		setPlayerMoney(thePlayer, mon)
		dbExec(mysql, "UPDATE `Accounts` SET `Money` = ? WHERE `Name` = ?", mon, name)
		local id = dbQuery(mysql, "SELECT `ID` from `MoneyLogs` ORDER BY `ID` DESC LIMIT 0, 1")
		local result = dbPoll(id, -1)
		if(result ~= nil) then
			if(result[1] ~= nil) then
				id = result[1]["ID"] + 1
			else
				id = 0
			end
		else
			id = 0
		end
		dbExec(mysql, "INSERT INTO `MoneyLogs` (`ID`, `PID`, `Name`, `Reason`, `Summ`) VALUES (?, ?, ?, ?, ?)", id, getElementData(thePlayer, "ID"), getElementData(thePlayer, "Name"), reason, money)
	end
end

function kickNotLogin( pl )
	if(pl ~= nil) then
		if(isElement(pl) == true) then
			if(getElementData(pl, "Login") ~= true) then
				kickPlayer(pl)
			end
		end
	end
end

function onClientLoginStart( )
	local name = getPlayerName(client)
	local srt = dbPrepareString(mysql, "SELECT `ID`, `Pass`, `Ban` FROM `Accounts` WHERE `Name` = ?", name)
	local mj = dbQuery(mysql, srt)
	local result = dbPoll(mj, -1)
	if(result ~= false) then
		local hg = 0
		for i, a in pairs(result) do
			hg = hg + 1
			break
		end
		if(hg > 0) then
			local serial = getPlayerSerial(source)
			if(result[1]["Serial"] ~= "") then
				kickt[tonumber(getElementData(client, "ID"))] = setTimer(kickNotLogin, 60000, 1, client)
				SED(client, "Pass", result[1]["Pass"])
				addBox("Добро пожаловать на сервер.\n \nУ вас есть 60 секунд\nЧтобы авторизоваться.", client, 0, 0, 255)
				if(result[1]["Ban"] > 0) then
					kickPlayer(client, "Ban " .. result[1]["Ban"])
				else
					triggerClientEvent(client, "onLoginUI", client)
					local id = getElementData(client, "ID")
					FloodTable[id] = 0
				end
			else
				if(result[1]["Serial"] == serial) then
					kickt[tonumber(getElementData(client, "ID"))] = setTimer(kickNotLogin, 60000, 1, client)
					SED(client, "Pass", result[1]["Pass"])
					addBox("Добро пожаловать на сервер.\n \nУ вас есть 60 секунд\nЧтобы авторизоваться.", client, 0, 0, 255)
					if(result[1]["Ban"] > 0) then
						kickPlayer(client, "Ban " .. result[1]["Ban"])
					else
						triggerClientEvent(client, "onLoginUI", client)
						local id = getElementData(client, "ID")
						FloodTable[id] = 0
					end
				else
					kickPlayer(source)
				end
			end
		else
			triggerClientEvent(client, "onRegisterUI", client)
			local id = getElementData(client, "ID")
			FloodTable[id] = 0
		end
	end
	for i, p in pairs(IDS) do
		if(isElement(p) == true) then
			if(isElement(client) == true) then
				triggerClientEvent(p, "onGridPlus", p, getElementData(client, "ID"), getElementData(client, "Name"), client)
			end
		end
	end
	for i, p in pairs(IDS) do
		if(isElement(p) == true) then
			if(isElement(client) == true) then
				triggerClientEvent(client, "onGridPlus", client, getElementData(p, "ID"), getElementData(p, "Name"), p)
			end
		end
	end
	dbFree(mj)
end

function MarkerHit( hitElement, matchingDimension )
	if(getElementType(hitElement) == "player") then
		if(getElementData(hitElement, "VehicleDriverBus") ~= false) then
			if(getPedOccupiedVehicle(hitElement) == getElementData(hitElement, "VehicleDriverBus")) then
				local veh = getPedOccupiedVehicle(hitElement)
				if(getPedOccupiedVehicleSeat(hitElement) == 0) then
					if(getElementData(source, "Player") == hitElement) then
						if(getElementData(hitElement, "PayDay") ~= false and getElementData(hitElement, "PayDay") ~= nil) then
							SED(hitElement, "PayDay", tonumber(getElementData(hitElement, "PayDay")) + 10)
						else
							SED(hitElement, "PayDay", 10)
						end
						createNextCP(hitElement)
					end
				end
			end
		end
	end
end

function markerA( pl, stage, ch)
	if(getElementData(pl, "BusStage") ~= false) then
		local stage = tonumber(getElementData(pl, "BusStage"))
		local march = tonumber(getElementData(pl, "March"))
		local mrkBus = createMarker(mrksBusWork[march][stage]["x"], mrksBusWork[march][stage]["y"], mrksBusWork[march][stage]["z"], "checkpoint", 4, 255, 255, 0, 225, pl)
		local blpBus = createBlip(mrksBusWork[march][stage]["x"], mrksBusWork[march][stage]["y"], mrksBusWork[march][stage]["z"], 0, 2, 255, 255, 0, 225, 0, 65000, pl)
		SED(pl, "mrkBus", mrkBus)
		SED(pl, "blpBus", blpBus)
		SED(mrkBus, "Player", pl)
		addEventHandler( "onMarkerHit", mrkBus, MarkerHit)
		setMarkerTarget(mrkBus, mrksBusWork[march][stage+1]["x"], mrksBusWork[march][stage+1]["y"], mrksBusWork[march][stage+1]["z"])
	end
end


function createNextCP( player )
	if(getElementData(player, "BusStage") == false) then
		SED(player, "BusStage", 1)
		local march = tonumber(getElementData(player, "March"))
		local mrkBus = createMarker(mrksBusWork[march][1]["x"], mrksBusWork[march][1]["y"], mrksBusWork[march][1]["z"], "checkpoint", 4, 255, 255, 0, 225, player)
		SED(mrkBus, "Player", player)
		local blpBus = createBlip(mrksBusWork[march][1]["x"], mrksBusWork[march][1]["y"], mrksBusWork[march][1]["z"], 0, 2, 255, 255, 0, 225, 0, 65000, player)
		setMarkerTarget(mrkBus, mrksBusWork[march][2]["x"], mrksBusWork[march][2]["y"], mrksBusWork[march][2]["z"])
		SED(player, "mrkBus", mrkBus)
		SED(player, "blpBus", blpBus)
		addEventHandler( "onMarkerHit", mrkBus, MarkerHit)
	else
		local stage = tonumber(getElementData(player, "BusStage"))
		local march = tonumber(getElementData(player, "March"))
		local mrkBus = getElementData(player, "mrkBus")
		local blpBus = getElementData(player, "blpBus")
		removeEventHandler("onMarkerHit", mrkBus, MarkerHit)
		destroyElement(mrkBus)
		destroyElement(blpBus)
		if(march == 1) then
			if(stage % 6 == 5) then
				stage = tonumber(getElementData(player, "BusStage")) + 1
				SED(player, "BusStage", stage)
				local mrkBus = createMarker(mrksBusWork[march][stage]["x"], mrksBusWork[march][stage]["y"], mrksBusWork[march][stage]["z"], "checkpoint", 4, 225, 0, 0, 225, player)
				local blpBus = createBlip(mrksBusWork[march][stage]["x"], mrksBusWork[march][stage]["y"], mrksBusWork[march][stage]["z"], 0, 2, 225, 0, 0, 225, 0, 65000, player)
				SED(mrkBus, "Player", player)
				SED(player, "mrkBus", mrkBus)
				SED(player, "blpBus", blpBus)
				addEventHandler( "onMarkerHit", mrkBus, MarkerHit)
				setMarkerTarget(mrkBus, mrksBusWork[march][stage+1]["x"], mrksBusWork[march][stage+1]["y"], mrksBusWork[march][stage+1]["z"])
			elseif(stage % 6 == 0 and stage ~= 118) then
				stage = tonumber(getElementData(player, "BusStage")) + 1
				SED(player, "BusStage", stage)
				setTimer(markerA, 10000, 1, player, stage)
				addBox("Пожалуйста, подождите пассажиров.", player, 255, 255, 0)
				for i, n in pairs(IDS) do
					if(getElementData(n, "Login") == true) then
						local x, y, z = getElementPosition(n)
						local x1, y1, z1 = getElementPosition(player)
						local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
						if(player ~= nil) then
							if(dist < 50) then
								sendClientMessage("Автобус отправляется через 10 секунд!", n, 0, 220, 100)
							end
						end
					end
				end
			elseif(stage == 118) then
				stage = 1
				SED(player, "BusStage", 1)
				setTimer(markerA, 10000, 1, player, stage)
			else
				if(stage < 119) then
					stage = tonumber(getElementData(player, "BusStage")) + 1
					SED(player, "BusStage", stage)
					local mrkBus = createMarker(mrksBusWork[march][stage]["x"], mrksBusWork[march][stage]["y"], mrksBusWork[march][stage]["z"], "checkpoint", 4, 255, 255, 0, 225, player)
					local blpBus = createBlip(mrksBusWork[march][stage]["x"], mrksBusWork[march][stage]["y"], mrksBusWork[march][stage]["z"], 0, 2, 255, 255, 0, 225, 0, 65000, player)
					SED(mrkBus, "Player", player)
					SED(player, "mrkBus", mrkBus)
					SED(player, "blpBus", blpBus)
					addEventHandler( "onMarkerHit", mrkBus, MarkerHit)
					setMarkerTarget(mrkBus, mrksBusWork[march][stage+1]["x"], mrksBusWork[march][stage+1]["y"], mrksBusWork[march][stage+1]["z"])
				else
					stage = 1
					SED(player, "BusStage", stage)
					local mrkBus = createMarker(mrksBusWork[march][stage]["x"], mrksBusWork[march][stage]["y"], mrksBusWork[march][stage]["z"], "checkpoint", 4, 255, 255, 0, 225, player)
					local blpBus = createBlip(mrksBusWork[march][stage]["x"], mrksBusWork[march][stage]["y"], mrksBusWork[march][stage]["z"], 0, 2, 255, 255, 0, 225, 0, 65000, player)
					SED(mrkBus, "Player", player)
					SED(player, "mrkBus", mrkBus)
					SED(player, "blpBus", blpBus)
					addEventHandler( "onMarkerHit", mrkBus, MarkerHit)
					setMarkerTarget(mrkBus, mrksBusWork[march][stage+1]["x"], mrksBusWork[march][stage+1]["y"], mrksBusWork[march][stage+1]["z"])
				end
			end
		else
			if(stage % 6 == 5) then
				stage = tonumber(getElementData(player, "BusStage")) + 1
				SED(player, "BusStage", stage)
				local mrkBus = createMarker(mrksBusWork[march][stage]["x"], mrksBusWork[march][stage]["y"], mrksBusWork[march][stage]["z"], "checkpoint", 4, 225, 0, 0, 225, player)
				local blpBus = createBlip(mrksBusWork[march][stage]["x"], mrksBusWork[march][stage]["y"], mrksBusWork[march][stage]["z"], 0, 2, 225, 0, 0, 225, 0, 65000, player)
				SED(mrkBus, "Player", player)
				SED(player, "mrkBus", mrkBus)
				SED(player, "blpBus", blpBus)
				addEventHandler( "onMarkerHit", mrkBus, MarkerHit)
				setMarkerTarget(mrkBus, mrksBusWork[march][stage+1]["x"], mrksBusWork[march][stage+1]["y"], mrksBusWork[march][stage+1]["z"])
			elseif(stage % 6 == 0 and stage ~= 112) then
				stage = tonumber(getElementData(player, "BusStage")) + 1
				SED(player, "BusStage", stage)
				setTimer(markerA, 10000, 1, player, stage)
				addBox("Пожалуйста, подождите пассажиров.", player, 255, 255, 0)
				for i, n in pairs(IDS) do
					if(getElementData(n, "Login") == true) then
						local x, y, z = getElementPosition(n)
						local x1, y1, z1 = getElementPosition(player)
						local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
						if(player ~= nil) then
							if(dist < 50) then
								sendClientMessage("Автобус отправляется через 10 секунд!", n, 0, 220, 100)
							end
						end
					end
				end
			elseif(stage == 112) then
				stage = 1
				SED(player, "BusStage", 1)
				setTimer(markerA, 10000, 1, player, stage)
			else
				if(stage < 113) then
					stage = tonumber(getElementData(player, "BusStage")) + 1
					SED(player, "BusStage", stage)
					local mrkBus = createMarker(mrksBusWork[march][stage]["x"], mrksBusWork[march][stage]["y"], mrksBusWork[march][stage]["z"], "checkpoint", 4, 255, 255, 0, 225, player)
					local blpBus = createBlip(mrksBusWork[march][stage]["x"], mrksBusWork[march][stage]["y"], mrksBusWork[march][stage]["z"], 0, 2, 255, 255, 0, 225, 0, 65000, player)
					SED(mrkBus, "Player", player)
					SED(player, "mrkBus", mrkBus)
					SED(player, "blpBus", blpBus)
					addEventHandler( "onMarkerHit", mrkBus, MarkerHit)
					setMarkerTarget(mrkBus, mrksBusWork[march][stage+1]["x"], mrksBusWork[march][stage+1]["y"], mrksBusWork[march][stage+1]["z"])
				else
					stage = 1
					SED(player, "BusStage", stage)
					local mrkBus = createMarker(mrksBusWork[march][stage]["x"], mrksBusWork[march][stage]["y"], mrksBusWork[march][stage]["z"], "checkpoint", 4, 255, 255, 0, 225, player)
					local blpBus = createBlip(mrksBusWork[march][stage]["x"], mrksBusWork[march][stage]["y"], mrksBusWork[march][stage]["z"], 0, 2, 255, 255, 0, 225, 0, 65000, player)
					SED(mrkBus, "Player", player)
					SED(player, "mrkBus", mrkBus)
					SED(player, "blpBus", blpBus)
					addEventHandler( "onMarkerHit", mrkBus, MarkerHit)
					setMarkerTarget(mrkBus, mrksBusWork[march][stage+1]["x"], mrksBusWork[march][stage+1]["y"], mrksBusWork[march][stage+1]["z"])
				end
			end
		end
	end
end

function customSpawnPlayer( player )
	if(isElement(player) == true) then
		if(getElementData(player, "PoliceJail") == false) then
			local spawnid = tonumber(getElementData(player, "SpawnID"))
			if(spawnid == 0) then
				local skin = tonumber(getElementData(player, "Skin"))
				local sper = math.random(0, 1)
				spawnPlayer(player, StandartSpawns[sper]["x"], StandartSpawns[sper]["y"], StandartSpawns[sper]["z"], 0, skin)
			elseif(spawnid == 1) then
				if(getElementData(player, "House") > 0) then
					local skin = tonumber(getElementData(player, "Skin"))
					local house = getElementData(player, "House")
					local id = getElementData(player, "ID")
					spawnPlayer(player, HouseTable[house]["hx"], HouseTable[house]["hy"], HouseTable[house]["hz"], 0, skin, HouseTable[house]["Interior"], id)
					SED(player, "Hint", house)
				else
					local skin = tonumber(getElementData(player, "Skin"))
					local sper = math.random(0, 1)
					spawnPlayer(player, StandartSpawns[sper]["x"], StandartSpawns[sper]["y"], StandartSpawns[sper]["z"], 0, skin)
					updatePlayerAccount(player, "SpawnID", 0)
					addBox("У Вас нет дома\nСпавн изменен на стандарт.", player, 255, 0, 0)
				end
			elseif(spawnid == 2) then
				local fac = tonumber(getElementData(player, "Faction"))
				if(fac > 0) then
					local inter = 0
					if(FactionSpawns[fac]["Interior"] ~= nil) then
						inter = FactionSpawns[fac]["Interior"]
					end
					local rot = 0
					if(FactionSpawns[fac]["Rot"] ~= nil) then
						rot = FactionSpawns[fac]["Rot"]
					end
					spawnPlayer(player, FactionSpawns[fac]["x"], FactionSpawns[fac]["y"], FactionSpawns[fac]["z"], rot, getElementData(player, "WorkSkin"), inter)
				else
					local skin = tonumber(getElementData(player, "Skin"))
					local sper = math.random(0, 1)
					spawnPlayer(player, StandartSpawns[sper]["x"], StandartSpawns[sper]["y"], StandartSpawns[sper]["z"], 0, skin)
					updatePlayerAccount(player, "SpawnID", 0)
					addBox("Вы больше не во фракции\nСпавн изменен на стандарт.", player, 255, 0, 0)
				end
			end
		else
			if(getElementData(player, "PoliceJail") > 0) then
				spawnPlayer(player, 391.4736328125, -507.255859375, 9.362735748291, 0, getElementData(player, "Skin"), 2)
				addBox("Вы оказались в тюрьме\nОсталось ждать " .. getElementData(player, "PoliceJail") .. " сек.", player, 255, 0, 0)
			end
		end
	end
end

function tpAutobus( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			setElementPosition(thePlayer, -182.03515625, -473.578125, 10.589839935303)
			setElementInterior(thePlayer, 0)
			setElementDimension(thePlayer, 0)
		end
	end
end

function tpAutopark( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			setElementPosition(thePlayer, -10, -1000, 10)
		end
	end
end

function onPlayerGov( thePlayer, command, ... )
	local rank = tonumber(getElementData(thePlayer, "Rank"))
	local fact = tonumber(getElementData(thePlayer, "Faction"))
	local arg = {...}
	local parameterCount = #arg
	if(fact ~= 0) then
		local str = FactionName[fact][2] .. " || " .. getElementData(thePlayer, "Name") .. " (" .. getElementData(thePlayer, "ID") .. ")" .. ":" 
		local string = table.concat( arg, " " )
		str = str .. " " .. string
		if(parameterCount > 0) then
			if(fact > 4 and rank > 8) then
				for d, player in pairs(getElementsByType("player")) do
					if(getElementData(player, "Login") ~= nil and getElementData(player, "Login") ~= false) then
						sendClientMessage( str, player, 0, 220, 220)
					end
				end
			else
				addBox("Ошибка: У Вас нет доступа к этой команде.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: Вы ничего не ввели!", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerCreateHouse(thePlayer, command, Price)
	if(getElementData(thePlayer, "Login") ~= false and getElementData(thePlayer, "Login") ~= nil) then
		if(getElementData(thePlayer, "Admin") ~= nil and getElementData(thePlayer, "Admin") ~= false) then
			if(getElementData(thePlayer, "Admin") == 6) then
				if(Price ~= nil) then
					if(tonumber(Price) > 0) then
						local x, y, z = getElementPosition(thePlayer)
						local max = table.maxn(HouseTable)
						max = max + 1
						HouseTable[max] = {}
						HouseTable[max]["x"] 		= x
						HouseTable[max]["y"] 		= y
						HouseTable[max]["z"] 		= z
						HouseTable[max]["Interior"] = 5
						HouseTable[max]["PID"] 		= 0
						HouseTable[max]["Price"] 	= Price
						HouseTable[max]["ID"]		= max
						HouseTable[max]["Pickup"] 	= createPickup(x, y, z, 3, 1273, 0)
						HouseTable[max]["Blip"]		= createBlip(x, y, z, 31, 2, 0, 0, 0, 0, 0, 250)
						HouseTable[max]["hx"] = 2233.9003
						HouseTable[max]["hy"] = -1114.3300
						HouseTable[max]["hz"] = 1051
						HouseTable[max]["hrx"] = 0
						HouseTable[max]["PayDay"] = 24
						HouseTable[max]["Open"] = false
						dbExec(mysql, "INSERT into `House` (`ID`, `x`, `y`, `z`, `Interior`, `PID`, `Price`, `PName`, `Car`) VALUES (?, ?, ?, ?, 5, 0, ?, '', 0)", max, x, y, z, Price)
						SED(HouseTable[max]["Pickup"], "ID", HouseTable[max]["ID"])
					else
						addBox("Ошибка: Цена дома указана некорректно.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: Вы не указали цену дома.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: Вам недоступна данная команда.", thePlayer, 255, 0, 0)
			end
		else
		end
	else
	end
end

function fuelBuy( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getPedOccupiedVehicle(thePlayer) ~= nil and getPedOccupiedVehicle(thePlayer) ~= false) then
			if(getPedOccupiedVehicleSeat(thePlayer) == 0) then
				local x, y, z = getElementPosition(getPedOccupiedVehicle(thePlayer))
				local dist = 0
				local veh = getPedOccupiedVehicle(thePlayer)
				local model = getElementModel(veh)
				if(model ~= 481) then
					for i, n in pairs(FuelStation) do
						dist = getDistanceBetweenPoints3D(x, y, z, FuelStation[i]["x"], FuelStation[i]["y"], FuelStation[i]["z"])
						if(dist < 15) then
							local station = FuelStation[i]["Zp"]
							if(BusinessTable[station]["Owner"] == 0) then
								local price = 15
								showPlayerDialog(thePlayer, 49, 2, "Заправка транспортного средства", "Введите количество литров\nКоторое Вы хотите заправить.\nЦена за литр: " .. price .. "$", "Заправить", "Отмена")
								SED(thePlayer, "Fstation", station)
							else
								if(BusinessTable[station]["Open"] == nil or BusinessTable[station]["Open"] == true) then
									local price = BusinessTable[station]["P1"]
									showPlayerDialog(thePlayer, 49, 2, "Заправка транспортного средства", "Введите количество литров\nКоторое Вы хотите заправить.\nЦена за литр: " .. price .. "$", "Заправить", "Отмена")
									SED(thePlayer, "Fstation", station)
								elseif(BusinessTable[station]["Open"] == false) then
									addBox("Данная заправка закрыта.", thePlayer, 255, 0, 0)
								end
							end
							break
						end
					end
				else
					addBox("Ошибка: Вы не можете этого сделать.", thePlayer, 255, 0, 0)
				end
			end
		end
	end
end

function healMedPlayer( thePlayer, command, id, money)
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") == 7) then
			if(tonumber(id) ~= false and tonumber(id) ~= nil) then
				id = tonumber(id)
				if(IDS[id] ~= nil and IDS[id] ~= false) then
					local secPlayer = IDS[id]
					if(tonumber(money) ~= nil) then
						money = tonumber(money)
						if(money >= 50 and money <= 5000) then
							local secMoney = tonumber(getElementData(secPlayer, "Money"))
							if(secMoney >= money) then
								if(getElementData(secPlayer, "Login") == true) then
									local x, y, z = getElementPosition(thePlayer)
									local x1, y1, z1 = getElementPosition(secPlayer)
									local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
									if(dist < 10) then
										SED(secPlayer, "HealPlayer", thePlayer)
										SED(secPlayer, "HealMoney", money)
										showPlayerDialog(secPlayer, 52, 1, "Прохождение лечения", "Врач " .. getElementData(thePlayer, "Name") .. " хочет провести Вам лечение.\nСтоимость услуги: " .. money .. "$", "Принять", "Отмена")
									else
										addBox("Ошибка: Этот игрок слишком далеко от вас.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Ошибка: Данный игрок не авторизован.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: У игрока недостаточно денег\nЧтобы совершить оплату данной услуги.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: Сумма может быть\nМежду 50$ и 5000$ соответственно.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: Ошибка: Вы не ввели сумму.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: Вы ввели некорректный ID игрока.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: Вы ввели некорректный ID игрока.", thePlayer, 255, 0, 0)
			end
		end
	end
end

function suspectPolicePlayer( thePlayer, command, ... )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") == 8) then
			local arg = {...}
			local parameterCount = #arg
			local tab = {}
			local id = arg[1]
			if(tonumber(id) ~= nil) then
				id = tonumber(id)
				id = math.round(id)
				local secPlayer = IDS[id]
				if(IDS[id] ~= nil) then
					if(getElementData(secPlayer, "Login") == true) then
						local x, y, z = getElementPosition(thePlayer)
						local x1, y1, z1 = getElementPosition(secPlayer)
						local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
						if(getElementData(thePlayer, "Faction") ~= getElementData(secPlayer, "Faction")) then
							if(dist < 200) then
								if(getElementData(secPlayer, "Wanted") ~= nil and getElementData(secPlayer, "Wanted") ~= false) then
									local WL = tonumber(getElementData(secPlayer, "Wanted"))
									if(WL < 6) then
										local num = arg[2]
										num = tonumber(num)
										if(num ~= nil) then
											if(num > 0 and num < 7) then
												WL = WL + num
												if(WL > 6) then
													WL = 6
												end
												local str = table.concat(arg, " ", 3)
												addBox("Вы были объявлены в розыск полицейским " .. getElementData(thePlayer, "Name") .. ".\nУровень розыска: " .. WL .. ".", secPlayer, 255, 255, 0)
												addBox("Причина: " .. str, secPlayer, 255, 255, 0)
												addBox("Вы объявили в розыск " .. getElementData(secPlayer, "Name") .. ".\nУровень розыска: " .. WL .. ".", thePlayer, 255, 255, 0)
												addBox("Причина: " .. str,thePlayer, 255, 255, 0)
												SED(secPlayer, "Wanted", WL)
												setPlayerWantedLevel(secPlayer, WL)
												dbExec(mysql, "UPDATE `Accounts` SET `Wanted` = ? WHERE `Name` = ?", WL, getElementData(secPlayer, "Name"))
											else
												addBox("Ошибка: Уровень розыска\nМожет быть более 1 и менее 6.", thePlayer, 255, 0, 0)
											end
										else
											addBox("Ошибка: /su [id] [ур] [причина]", thePlayer, 255, 0, 0)
										end
									else
										addBox("У данного игрока максимальный уровень розыска!", thePlayer, 255, 0, 0)
									end
								else
									local WL = 1
									addBox("Ваш уровень розыска увеличен: " .. WL, secPlayer, 255, 0, 0)
									SED(secPlayer, "Wanted", WL)
									setPlayerWantedLevel(secPlayer, WL)
								end
							else
								addBox("Ошибка: Данный игрок слишком далеко от Вас!", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: Вы не можете объявить\nВ розыск полицейского!", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: Данный игрок не авторизован.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: Данный игрок не найден.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: ID введён некорректно", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: Данная команда Вам недоступна.", thePlayer, 255, 0, 0)
		end
	end
end

function tempLeader( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true) then
		if(tonumber(getElementData(thePlayer, "Admin")) > 3) then
			if(id ~= nil) then
				if(tonumber(id) ~= nil and tonumber(id) ~= false) then
					id = tonumber(id)
					if(id > 0 and id <= 9) then
						id = tonumber(id)
						id = math.round(id)
						SED(thePlayer, "Faction", id)
						SED(thePlayer, "Rank", 10)
						addBox("Вы назначили себя лидером " .. id .. " id фракции.", thePlayer, 0, 60, 255)
					else
						SED(thePlayer, "Faction", 0)
						SED(thePlayer, "Rank", 0)
						addBox("Вы сняли себя с временной лидерки.", thePlayer, 0, 60, 255)
					end
				else
					addBox("Ошибка: Вы ввели некорректный ID фракции.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: Вы не ввели ID фракции.", thePlayer, 255, 0, 0)
			end
		end
	end
end

function onPlayerCommand( command )
	if(getElementData(source, "Login") == true) then
		local PID = getElementData(source, "ID")
		local Tick = getTickCount()
		if (Tick - PINTERVAL[PID] <= CMD_INTERVAL) then
	        if (Tick - PINTERVAL[PID]  <= RETURN_INTERVAL) then 
	            kickPlayer(source)
	        end 
	        cancelEvent()
	    end
	    PINTERVAL[PID] = Tick
	else
		cancelEvent()
	end
end

function onPlayerAdvert( thePlayer, command, ... )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Lvl") > 1) then
			if(getElementData(thePlayer, "Money") >= 50) then
				local arg = {...}
				local a = #arg
				local stri = table.concat( arg, " " )
				if(a > 0) then
					local adsf = "Текст: " .. table.concat( arg, " " )
					setElementMoney(thePlayer, -50, "Объявление")
					addBox("Ваше объявления отправлено\nИ будет обработано в ближайшее время.", thePlayer, 255, 255, 0)
					local max = 1
					for i, p in pairs(AdvertTable) do
						max = i + 1
					end
					local str = "Подано заявление на публикацию объявления (id: " .. max .. ")"
					for i, p in pairs(IDS) do
						if(getElementData(p, "Login") == true ) then
							if(getElementData(p, "Faction") == 6) then
								sendClientMessage(str, p, 220, 220, 0)
								sendClientMessage(adsf, p, 220, 220, 0)
							end
						end
					end
					AdvertTable[max] = {}
					AdvertTable[max]["Name"] = getElementData(thePlayer, "Name")
					AdvertTable[max]["String"] = stri
					AdvertTable[max]["Player"] = thePlayer
				else
					addBox("Ошибка: Вы не ввели текст для объявления", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: У Вас недостаточно денег.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: Для данного действия необходим минимум 2 уровень.", thePlayer)
		end
	end
end

function onPlayerAds( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") == 6) then
			local iter = 0
			local str = ""
			for i, p in pairs(AdvertTable) do
				iter = iter + 1
				str = str  .. "\n[" .. i .. "]: " .. AdvertTable[i]["String"]
			end
			if(iter > 0) then
				showPlayerDialog(thePlayer, 64000, 1, "Последние объявления на подачу.", str, "Ок", "Отмена")
			else
				showPlayerDialog(thePlayer, 64000, 1, "Последние объявления на подачу.", "Последних объявлений нет", "Ок", "Отмена")
			end
		else
			addBox("Ошибка: У вас нет доступа к данной команде.", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerEditAd( thePlayer, command, id, ... )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") == 6) then
			if(getElementData(thePlayer, "Rank") > 2) then
				if(tonumber(id) ~= false and tonumber(id) ~= nil) then
					id = tonumber(id)
					id = math.round(id)
					if(type(AdvertTable[id]) == "table") then
						local arg = { ... }
						local a = #arg 
						if(a > 0) then
							local str1 = "Объявление: " .. table.concat(arg, " ") .. " | " .. AdvertTable[id]["Name"]
							local str2 = "Опубликовал " .. FactionRankName[6][tonumber(getElementData(thePlayer, "Rank"))] .. " " .. FactionName[6][1] .. " " .. getElementData(thePlayer, "Name")
							for i, p in pairs(IDS) do
								if(getElementData(p, "Login") == true) then
									sendClientMessage(str1, p, 30, 180, 30)
									sendClientMessage(str2, p, 30, 180, 30)
								end
							end
							AdvertTable[id] = nil
							setElementMoney(thePlayer, 50, "Обработка объявления")
						end
					else
						addBox("Ошибка: Вы ввели некорректный ID объявления", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: Вы ввели некорректный ID объявление", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: У вас нет доступа к этой команде", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: У вас нет доступа к этой команде", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerDeleteAd( thePlayer, command, id, ... )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") == 6) then
			if(getElementData(thePlayer, "Rank") > 2) then
				if(tonumber(id) ~= false and tonumber(id) ~= nil) then
					id = tonumber(id)
					id = math.round(id)
					if(type(AdvertTable[id]) == "table") then
						local arg = { ... }
						local a = #arg 
						if(a > 0) then
							local string1 = FactionRankName[6][tonumber(getElementData(thePlayer, "Rank"))] .. " " .. FactionName[6][1] .. " " ..  getElementData(thePlayer, "Name") .. " отменил Ваше объявление."
							local string2 = "Причина: " .. table.concat(arg, " ")
							local string3 = FactionRankName[6][tonumber(getElementData(thePlayer, "Rank"))] .. " " .. FactionName[6][1] .. " " ..  getElementData(thePlayer, "Name") .. " отменил объявление (id " .. id.. ")"
							sendClientMessage(string1,AdvertTable[id]["Player"], 220, 220, 0)
							sendClientMessage(string2,AdvertTable[id]["Player"], 220, 220, 0)
							for i, p in pairs(IDS) do
								if(getElementData(IDS[i], "Login") == true) then
									if(getElementData(IDS[i], "Faction") == 6) then
										sendClientMessage(string3, IDS[i], 220, 220, 0)
										sendClientMessage(string2, IDS[i], 220, 220, 0)
									end
								end
							end
							AdvertTable[id] = nil
						else
							addBox("Ошибка: /addel [id] [причина]", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: Такого объявления не существует", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: ID объявление введено некорректно", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: У Вас нет доступа к этой команде", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: У вас нет доступа к данной команде", thePlayer, 255, 0, 0)
		end
	end
end

function onTaxiPark( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 1) then
			setElementPosition(thePlayer, -204.7705078125, -1421.9658203125, 8.0708332061768)
		end
	end
end

function onPlayerPay( thePlayer, command, id, summ )
	if(getElementData(thePlayer, "Login") == true) then
		if(tonumber(id) ~= nil and tonumber(id) ~= false) then
			if(tonumber(summ) ~= nil and tonumber(summ) ~= false) then
				id = tonumber(id)
				id = math.round(id)
				summ = tonumber(summ)
				summ = math.round(summ)
				if(summ > 0) then
					if(IDS[id] ~= nil) then
						if(getElementData(IDS[id], "Login") == true) then
							local pl = IDS[id]
							if(thePlayer ~= pl) then
								local x, y, z = getElementPosition(thePlayer)
								local x1, y1, z1 = getElementPosition(pl)
								local dist = getDistanceBetweenPoints3D(x,y,z, x1, y1, z1)
								if(dist < 10) then
									if(summ <= 10000) then
										if(getElementData(thePlayer, "Money") - summ > 0) then
											if(getElementData(thePlayer, "Lvl") > 1) then
												setElementMoney(thePlayer, summ * (-1), "Передано")
												setElementMoney(pl, summ, "Получено")
												addBox(getElementData(thePlayer, "Name") .. " передал Вам " .. summ .. "$", pl, 0, 220, 40)
												addBox("Вы передали " .. getElementData(pl, "Name") .. " " .. summ .. "$", thePlayer, 0, 220, 40)
											else
												if(summ <= 100) then
													setElementMoney(thePlayer, summ * (-1), "Передано")
													setElementMoney(pl, summ, "Получено")
													addBox(getElementData(thePlayer, "Name") .. " передал Вам " .. summ .. "$", pl, 0, 220, 40)
													addBox("Вы передали " .. getElementData(pl, "Name") .. " " .. summ .. "$", thePlayer, 0, 220, 40)
												else
													addBox("Ошибка: Вы не передать более 100 долларов\nНа 1 уровне.", thePlayer, 255, 0, 0)
												end
											end
										else
											addBox("Ошибка: У Вас недостаточно денег для передачи.", thePlayer, 255, 0, 0)
										end
									else
										addBox("Ошибка: Сумма не может быть более 20.000$.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Ошибка: Данный игрок слишком далеко от Вас!", thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: Вы не можете передать деньги самому себе.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: Данный игрок не авторизован", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: Данный игрок не найден", thePlayer, 255, 0, 0)
					end
				end
			end
		end
	end
end

function onSetLeader( thePlayer, command, id, fid )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 4) then
			if(tonumber(id) ~= nil) then
				if(tonumber(fid) ~= nil) then
					id = tonumber(id)
					fid = tonumber(fid)
					if(IDS[id] ~= nil) then
						local pl = IDS[id]
						if(getElementData(pl, "Login") == true) then
							if(getElementData(pl, "Lvl") > 2) then
								if(fid > 0 and fid < 10) then
									sendClientMessage("Администратор " .. getElementData(thePlayer, "Name") .. " назначил " .. getElementData(pl, "Name") .. " лидером организации " .. FactionName[fid][1], thePlayer, 255, 255, 0)
									SED(pl, "Faction", fid)
									SED(pl, "Rank", 10)
									if(type(FactionSkins[fid][2]) ~= "table") then
										SED(pl, "WorkSkin", FactionSkins[fid][2])
									else
										SED(pl, "WorkSkin", getElementData(pl, "Skin"))
									end
									dbExec(mysql, "UPDATE `Accounts` SET `Faction` = ?, `Rank` = '10', `WorkSkin` = ? WHERE `Name` = ?", fid, getElementData(pl, "WorkSkin"), getElementData(pl, "Name"))
									customSpawnPlayer(pl)
								else
									addBox("Вы сняли " .. getElementData(pl, "Name") .. "\nс должности лидера организации.", thePlayer, 255, 0, 0)
									SED(pl, "WorkSkin", getElementData(pl, "Skin"))
									setElementModel(pl, getElementData(pl, "Skin"))
									SED(pl, "Faction", 0)
									SED(pl, "Rank", 0)
									customSpawnPlayer(pl)
									dbExec(mysql, "UPDATE `Accounts` SET `Faction` = ?, `Rank` = ?, `WorkSkin` = ? WHERE `ID` = ?", 0, 0, getElementData(pl, "Skin"), getElementData(pl, "AccID"))
									addBox("Администратор " .. getElementData(thePlayer, "Name") .. " снял\nВас с поста лидера организации.", pl, 255, 255, 0)
								end
							else
								addBox("Ошибка: Минимальный уровень поступления на лидерку 3.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: Данный игрок не авторизован.", thePlayer, 255, 0, 0)
						end
					end
				else
					addBox("Ошибка: ID фракции введён некорректно.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: ID введён некорректно.", thePlayer, 255, 0, 0)
			end
		end
	end
end

function onPlayerGetCommands( thePlayer, command )
	sendClientMessage("/fuel 				- 	заправиться.",	thePlayer)
	sendClientMessage("/pay [id] [money] 	- 	передать деньги игроку.", thePlayer)
	sendClientMessage("/commands 			-	список команд.", thePlayer)
	sendClientMessage("/save 				- 	узнать текущие кооординаты.",thePlayer)
	sendClientMessage("/showlic [id] 		-	показать игроку лицензии.", thePlayer)
	sendClientMessage("/showpass [id]		- 	показать игроку паспорт.", thePlayer)
	sendClientMessage("/gps 				- 	координатор по карте.",	thePlayer)
	sendClientMessage("/me [Текст]			- 	произвести действие в чате", thePlayer)
	sendClientMessage("/try [Текст] 		- 	сделать попытку в чате от своего лица", thePlayer)
	sendClientMessage("/do [Текст]			-	совершить косвенное событие в чате.", thePlayer)
	sendClientMessage("/report [Текст]		-	отправить репорт.", thePlayer)
end

function onPlayerDo( thePlayer, command, ... )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Mute") == 0) then
			local name = getElementData(thePlayer, "Name")
			local x, y, z = getElementPosition(thePlayer)
			local arg = {...}
			local b = #arg
			local str = table.concat(arg, " ") ..  " (" ..name .. ")" 
			if(b > 0) then
				for i, n in pairs(IDS) do
					local x1, y1, z1 = getElementPosition(n)
					local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
					if(dist < 30 or getCameraTarget(n) == source) then
						local dim = getElementDimension(thePlayer)
						local dim2 = getElementDimension(n)
						if(dim == dim2) then
							local ints1 = getElementInterior(thePlayer)
							local ints2 = getElementInterior(n)
							if(ints1 == ints2) then
								sendClientMessage(str, n, 232, 183, 227)
							end
						end
					end
				end
			end
		end
	end
end

function onPlayerTry( thePlayer, command, ... )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Mute") == 0) then
			local name = getElementData(thePlayer, "Name")
			local x, y, z = getElementPosition(thePlayer)
			local arg = {...}
			local b = #arg
			if(b > 0) then
				local a = math.random(0, 1)
				local str = table.concat(arg, " ")
				if(a == 0) then
					str = name .. " " .. str .. " | #00DD33Удачно"
				else
					str = name .. " " .. str .. " | #DD2200Неудачно"
				end
				for i, n in pairs(IDS) do
					if(getElementData(n, "Login") == true) then
						local x1, y1, z1 = getElementPosition(n)
						local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
						if(dist < 30 or getCameraTarget(n) == source) then
							sendClientMessage(str, n, 232, 183, 227, true)
						end
					end
				end
			else
				addBox("Ошибка: Вы не ввели текст.", 255, 0, 0)
			end
		else
			addBox("Ошибка: У Вас затычка.", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerReport( thePlayer, command, ... )
	if(getElementData(thePlayer, "Login") == true) then
		local name = getElementData(thePlayer, "Name")
		local arg = {...}
		local b = #arg
		local str = table.concat(arg, " ")
		local a = string.find(str, "#")
		str = "Жалоба от " .. name .. " (" .. getElementData(thePlayer, "ID") ..  "): " .. str
		if(a == nil) then
			if(b > 0) then
				addBox("Ваш запрос администрации отправлен", thePlayer, 255, 255, 0)
				for i, n in pairs(IDS) do
					if(getElementData(n, "Login") == true) then
						if(getElementData(n, "Admin") > 0) then
							sendClientMessage(str, n, 255, 240, 0)
						end
					end
				end
			end
		end
	end
end

function onSetHousePrice( thePlayer, command, id, price )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") == 6) then
			if(id ~= nil) then
				if(price ~= nil) then
	 				if(tonumber(id) ~= nil) then
	 					if(tonumber(price) ~= nil) then
	 						id = tonumber(id)
	 						price = tonumber(price)
	 						if(id > 0) then
	 							if(price > 0) then
			 						if(HouseTable[id] ~= nil) then
			 							if(type(HouseTable[id]) == "table") then
			 								price = tonumber(price)
			 								HouseTable[id]["Price"] = price
			 								dbExec(mysql, "UPDATE `House` SET `Price` = ? WHERE `ID` = ?", price, id)
			 								addBox("Вы изменили стоимость " .. id .. " дома на " .. price .. "$", thePlayer, 0, 60, 255)
			 							end
			 						end
			 					end
		 					end
	 					end
	 				end
				end
			end
		end
	end
end

function onPlayerAEat( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 2) then
			SED(thePlayer, "Food", 100)
			triggerClientEvent(thePlayer, "Food", thePlayer, getElementData(thePlayer, "Food"))
			dbExec(mysql, "UPDATE `Accounts` set `Food` = ? WHERE `Name` = ?", getElementData(thePlayer, "Food"), getElementData(thePlayer, "Name"))
			addBox("Вы пополнили свою сытость.", thePlayer, 0, 255, 100)
		end
	end
end

function onPlayerSetLic( thePlayer, command, id, lic )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 3) then
			if(id ~= nil) then
				if(lic ~= nil) then
					if(tonumber(id) > 0) then
						if(tonumber(lic) == 0 or tonumber(lic) == 1) then
							id = tonumber(id)
							if(IDS[id] ~= nil) then
								local secPlayer = IDS[id]
								if(getElementData(secPlayer, "Login") == true) then
									lic = tonumber(lic)
									SED(secPlayer, "AutoLicense", lic)
									local Name = getElementData(secPlayer, "Name")
									dbExec(mysql, "UPDATE `Accounts` set `AutoLicense` = ? WHERE `Name` = ?", getElementData(secPlayer, "AutoLicense"), getElementData(secPlayer, "Name"))
									addBox("Вы задали " .. getElementData(secPlayer, "Name") .. " автомобильную лицензию " .. getElementData(secPlayer, "AutoLicense"), thePlayer)
									addBox("Администратор " .. getElementData(thePlayer, "Name") .. " сделал Вам автомобильную лицензию " .. getElementData(secPlayer, "AutoLicense"), secPlayer )
								end
							end
						end
					end
				end
			end
		end
	end
end

function onPlayerUseTalkie( thePlayer, command, ... )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") > 0) then
			local arg = {...}
			local a = #arg
			if(a > 0) then
				local str = "Рация " .. getElementData(thePlayer, "Name") .. ": " .. table.concat(arg, " ")
				for i, n in pairs(IDS) do
					if(getElementData(IDS[i], "Login") == true) then
						if(getElementData(thePlayer, "Faction") == getElementData(IDS[i], "Faction")) then
							sendClientMessage(str, IDS[i], 0, 160, 255)
						end
					end
				end
			end
		end
	end
end

function onPlayerChatDepart( thePlayer, command, ... )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") > 4) then
			local arg = {...}
			local a = #arg
			if(a > 0) then
				local string = FactionName[tonumber(getElementData(thePlayer, "Faction"))][2] .. " || " .. FactionRankName[tonumber(getElementData(thePlayer, "Faction"))][tonumber(getElementData(thePlayer, "Rank"))] .. " " .. getElementData(thePlayer, "Name") .. " (" .. getElementData(thePlayer, "ID") .. ")".. " : " .. table.concat(arg, " ")
				for i, n in pairs(IDS) do
					if(getElementData(n, "Login") == true) then
						if(getElementData(n, "Faction") > 4) then
							sendClientMessage(string, n, 0, 90, 255)
						end
					end
				end
			else
				addBox("Ошибка: Вы не ввели текст сообщения.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: Вы должны находиться\nв гос. организации.", thePlayer, 255, 0, 0)
		end
	end
end

function Avtorizovalsya( str )
	local sfm = dbPrepareString(mysql, "SELECT * FROM `Accounts` WHERE `Name` = ? AND `Pass` = ?", getElementData(client, "Name"), hash("sha256", str .. "abc"))
	local q = dbQuery(mysql, sfm)
	local result = dbPoll(q, -1)
	local a = 0
	for i, n in pairs(result) do
		a = 1
	end
	if(a == 1) then
		triggerClientEvent(client, "Avtoriz", client)
		local qu = dbQuery(mysql, "SELECT * FROM `Accounts` WHERE `Name` = ? AND `Pass` = ?", getElementData(client, "Name"), getElementData(client, "Pass"))
		local result = dbPoll(qu, -1)
		setPlayerNametagShowing(client, false)
		bindKey(client, "2", "down", endPlayerWork)
		SED(client, "Sex", result[1]["Sex"])
		SED(client, "AutoLicense", result[1]["AutoLicense"])
		SED(client, "SpawnID", result[1]["SpawnID"])
		SED(client, "Exp", result[1]["Exp"])
		SED(client, "Rank", result[1]["Rank"])
		SED(client, "Lvl", result[1]["Lvl"])
		SED(client, "Faction", result[1]["Faction"])
		SED(client, "AccID", result[1]["ID"])
		SED(client, "Skin", result[1]["Skin"])
		SED(client, "Money", result[1]["Money"])
		SED(client, "NWork", 0)
		SED(client, "PhoneNumber", result[1]["PhoneNumber"])
		SED(client, "Login", true)
		SED(client, "Admin", result[1]["Admin"])
		SED(client, "Wanted", result[1]["Wanted"])
		SED(client, "WorkSkin", result[1]["WorkSkin"])
		SED(client, "Food", result[1]["Food"])
		SED(client, "House", result[1]["House"])
		SED(client, "PWork", result[1]["Work"])
		SED(client, "SkillM4", result[1]["SkillM4"])
		SED(client, "SkillAk47", result[1]["SkillAk47"])
		SED(client, "SkillDeagle", result[1]["SkillDeagle"])
		SED(client, "SkillShotgun", result[1]["SkillShotgun"])
		SED(client, "SkillFish", result[1]["SkillFish"])
		SED(client, "Donate", result[1]["Donate"])
		SED(client, "VipDay", result[1]["VipDay"])
		SED(client, "VipType", result[1]["VipType"])
		toggleAllControls(client, true)
		if(getElementData(client, "FishBoat") ~= false) then
			removeElementData(client, "FishBoat")
		end
		SED(client, "Nrk", result[1]["NRK"])
		local serial = getPlayerSerial(source)
		if(result[1]["Serial"] == "") then
			dbExec(mysql, "UPDATE `Accounts` SET `Serial` = ? WHERE `Name` = ?", serial, result[1]["Name"])
		end
		triggerClientEvent(source, "LoadGreenZone", source, GreenZone)
		if(result[1]["WeaponLicense"] == 0) then
			SED(client, "WeaponLicense", false)
		else
			SED(client, "WeaponLicense", true)
		end
		if(result[1]["SkillDeagle"] == 100) then
			setPedStat(client, 71, 1000)
		end
		if(result[1]["SkillShotgun"] == 100) then
			setPedStat(client, 72, 1000)
		end
		if(result[1]["SkillAk47"] == 100) then
			setPedStat(client, 77, 1000)
		end
		if(result[1]["SkillM4"] == 100) then
			setPedStat(client, 78, 1000)
		end
		local house = tonumber(getElementData(client, "House"))
		if(house > 0) then
			HouseTable[house]["OwnerPlayer"] = client 
		end
		setPlayerWantedLevel(client, result[1]["Wanted"])
		SED(client, "Passport", result[1]["Passport"])
		setPlayerMoney(client, tonumber(result[1]["Money"]))
		SED(client, "BusOwnID", result[1]["BusinessID"])
		local id = result[1]["BusinessID"]
		if(id > 0) then
			BusinessTable[id]["OwnerPlayer"] = client
		end
		SED(client, "PoliceJail", result[1]["PoliceJail"])
		SED(client, "Warn", result[1]["Warn"])
		SED(client, "Mute", result[1]["Mute"])
		SED(client, "Material", result[1]["Material"])
		for i, n in pairs(text3dTable) do
			triggerClientEvent(client, "on3dTextAdd", client, n)
		end
		if(getElementData(client, "PhoneNumber") ~= 0) then
			local number = tonumber(getElementData(client, "PhoneNumber"))
			PhoneNumbers[number] = client
		else
			addBox("Найдено письмо в сумке:\n \nС тобой хочет связаться один человек,\nКогда ты приедешь на место.\nТебе необходимо купить телефон.\nОн сам найдет тебя.\n \nОт: Мистер СЖ.", client, 220, 0, 220)
		end
		if(getElementData(client, "PhonePlayer") ~= nil) then
			removeElementData(client, "PhonePlayer")
			removeElementData(client, "AcceptedCall")
		end
		if(getElementData(client, "PoliceJail") == 0) then
			removeElementData(client, "PoliceJail")
		end
		local id = tonumber(getElementData(client, "ID"))
		setPlayerNametagText(client, getElementData(client, "Name") .. " (" .. id .. ")")
		local name = getElementData(client, "Name")
		local strt = "Администратор " .. name .. " зашел в игру."
		if(getElementData(client, "Admin") > 0) then
			for i, n in pairs(IDS) do
				triggerClientEvent(n, "onGridPlus", n, getElementData(client, "ID"), getElementData(client, "Name"), client)
				if(getElementData(n, "Login") == true) then
					if(getElementData(n, "Admin") > 0) then
						sendClientMessage(strt, n, 240, 90, 0)
					end
				end
			end
		end
		bindKey(client, "F1", "down", onPlayerCheckMenu)
		bindKey(client, "lctrl", "down", inputfunc)
		bindKey(client, "lalt", "down", inputlalt)
		dbFree(qu)
		fadeCamera(client, true)
		setElementDimension(client, 0)
		customSpawnPlayer(client)
		setElementHealth(client, result[1]["Health"])
		triggerClientEvent(client, "onPlayerHUD", client, IDS, getElementData(client, "Lvl"), getElementData(client, "Exp"), getElementData(client, "Food"))
		triggerClientEvent(client, "onGridPlus", client, getElementData(client, "ID"), getElementData(client, "Name"), client)
		triggerClientEvent(client, "LoadGreenZone", client, GreenZone)
		local house = tonumber(getElementData(client, "House"))
		if(house ~= nil) then
			if(house > 0) then
				local vehid = HouseTable[house]["Car"]
				if(vehid >= 400 and vehid <= 612) then
					if(HouseTable[house]["vx"] ~= 0) then
						local x = HouseTable[house]["vx"]
						local y = HouseTable[house]["vy"]
						local z = HouseTable[house]["vz"]
						local vrz = HouseTable[house]["vrz"]
						PrivateCar[id] = createVeh(vehid, x, y, z, 0, 0, vrz)
						SED(PrivateCar[id], "PrivatePlayer", id)
						SED(PrivateCar[id], "PrivatePlayer", id)
					else
						addBox("Произошла серверная ошибка.\nСообщите об этом администрации.", client)
					end
				end
			end
		end
	else
		if(getElementData(client, "ErrorPass") == false) then
			SED(client, "ErrorPass", 1)
			triggerClientEvent(client, "onIncorrectPass", client, getElementData(client, "ErrorPass"))
		elseif(getElementData(client, "ErrorPass") == 1) then
			SED(client, "ErrorPass", 2)
			triggerClientEvent(client, "onIncorrectPass", client, getElementData(client, "ErrorPass"))
		else
			kickPlayer(client, "Incorret pass")
		end
	end
end

function Regaru( str, sex )
	if(str ~= nil) then
		local password = str
		password = string.gsub(str, "%s+", "")
		if(string.len(password) > 3 and string.len(password) < 24) then
			local ch = string.len(password)
			local adad = false
			for i=1,ch do
				local stl = string.sub(password, i, i)
				if(string.byte(stl) == 95 or (string.byte(stl) > 64 and string.byte(stl) < 91) or (string.byte(stl) > 96 and string.byte(stl) < 123) or (string.byte(stl) > 47 and string.byte(stl) < 58)) then
				else
					return false
				end
			end
			if(adad == false) then
				SED(client, "Sex", sex)
				local qu = dbQuery(mysql, "SELECT * FROM `Accounts` ORDER BY `ID` DESC LIMIT 0,1")
				local result = dbPoll(qu, -1)
				local id = tonumber(result[1]["ID"]) + 1
				dbFree(qu)
				if(getElementData(source, "Sex") == 1) then
					SED(client, "Skin", 20)
				else
					SED(client, "Skin", 55)
				end
				local ip = getPlayerIP(client)
				local t = getRealTime()
				local month = t.month + 1
				local monthday = t.monthday
				t.month = t.month + 1
				if(month < 10) then
					month = "0" .. month
				end
				if(monthday < 10) then
					monthday = "0" .. monthday
				end
				local datetoreg = monthday .. "." .. month .. "." .. t.year + 1900 .. " " .. t.hour .. ":" .. t.minute
				local stre = dbPrepareString(mysql, "INSERT INTO `Accounts` (`Name`, `ID`, `Pass`, `AutoLicense`, `SpawnID`, `Faction`, `Rank`, `Admin`, `Mail`, `Skin`, `Money`, `Lvl`, `Exp`, `Wanted`, `WorkSkin`, `Food`, `Passport`, `House`, `Sex`, `RegDate`, `IPReg`, `Serial`) VALUES (?, ?, ?, 0, 0, 0, 0, 0, 0, 20, 1500, 1, 0, 0, 20, 100, 0, 0, ?, ?, ?, '')", getElementData(client, "Name"), id, hash("sha256", password .. "abc"), sex, datetoreg, ip)
				dbExec(mysql, stre)
				bindKey(client, "2", "down", endPlayerWork, client)
				SED(client, "AccID", id)
				SED(client, "AutoLicense", 0)
				SED(client, "SpawnID", 0)
				SED(client, "LoadPack", 0)
				SED(client, "SpawnID", 1)
				SED(client, "SummLoads", 0)
				SED(client, "Money", 500)
				SED(client, "NWork", 0)
				SED(client, "Login", true)
				SED(client, "Faction", 0)
				SED(client, "Rank", 0)
				SED(client, "Lvl", 1)
				SED(client, "Exp", 0)
				SED(client, "Login", true)
				SED(client, "Food", 100)
				SED(client, "Passport", 0)
				SED(client, "House", 0)
				SED(client, "BusOwnID", 0)
				SED(client, "PhoneNumber", 0)
				SED(client, "Mute", 0)
				SED(client, "Warn", 0)
				SED(client, "Admin", 0)
				SED(client, "Material", 0)
				SED(client, "PWork", 0)
				SED(client, "SkillFish", 0)
				SED(client, "SkillM4", 0)
				SED(client, "SkillAk47", 0)
				SED(client, "SkillDeagle", 0)
				SED(client, "SkillShotgun", 0)
				SED(client, "Wanted", 0)
				SED(client, "Nrk", 0)
				SED(client, "WeaponLicense", false)
				SED(client, "Donate", 0)
				SED(client, "VipDay", 0)
				SED(client, "VipType", 0)
				triggerClientEvent(source, "LoadGreenZone", source, GreenZone)
				bindKey(client, "lctrl", "down", inputfunc)
				bindKey(client, "lalt", "down", inputlalt)
				setPlayerNametagShowing(client, false)
				setPlayerMoney(client, getElementData(client, "Money"))
				if(NameTable[names] == false or NameTable[names] ~= nil) then
					NameTable[names] = client
				end
				fadeCamera(client, true)
				spawnPlayer(client, spawnX, spawnY, spawnZ)
				setElementModel(client, getElementData(client, "Skin"))
				triggerClientEvent(client, "onSuccessRegister",client, IDS)
				for i, n in pairs(IDS) do
					triggerClientEvent(n, "onGridPlus", n, getElementData(client, "ID"), getElementData(client, "Name"), client)
				end
				for i, n in pairs(IDS) do
					triggerClientEvent(client, "onGridPlus", client, getElementData(IDS[i], "ID"), getElementData(IDS[i], "Name"), IDS[i])
				end
				for i, n in pairs(text3dTable) do
					triggerClientEvent(client, "on3dTextAdd", client, n)
				end
			end
		end
	end
end

function onPlayerAFuel( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			if(getPedOccupiedVehicle(thePlayer) ~= nil and getPedOccupiedVehicle(thePlayer) ~= false) then
				local veh = getPedOccupiedVehicle(thePlayer)
				SED(veh, "Fuel", 100)
				addBox("Вы заправили Ваш транспорт.", thePlayer, 0, 255, 100)
			end
		end
	end
end

function getExp( thePlayer, ch )
	if(getElementData(thePlayer, "Login") == true) then
		local lvl = getElementData(thePlayer, "Lvl")
		local exp = tonumber(getElementData(thePlayer, "Exp"))
		ch = tonumber(ch)
		if(ch < 100) then
			while(ch > 0) do
				local max = (lvl - 1) * 4 + 8
				if(ch + exp < max) then
					local oexp = exp + ch
					SED(thePlayer, "Exp", oexp)
					ch = 0
				elseif(ch + exp == max) then
					lvl = lvl + 1
					exp = 0
					SED(thePlayer, "Exp", exp)
					SED(thePlayer, "Lvl", lvl)
					ch = 0
					addBox("Вы прожили ещё один год в штате!", thePlayer, 0, 60, 255)
				else
					lvl = lvl + 1
					exp = 0
					SED(thePlayer, "Exp", exp)
					SED(thePlayer, "Lvl", lvl)
					local raz = max - exp
					ch = ch - raz
					addBox("Вы прожили ещё один год в штате!", thePlayer, 0, 60, 255)
				end
				dbExec(mysql, "UPDATE `Accounts` SET `Exp` = ?, `Lvl` = ? WHERE `Name` = ?", getElementData(thePlayer, "Exp"), getElementData(thePlayer, "Lvl"), getElementData(thePlayer, "Name"))
			end
		else
			addBox("Вы не можете выдать себе более 100 EXP", thePlayer, 255, 0, 0)
		end
	end
end

function giveExp( thePlayer, ch )
	if(getElementData(thePlayer, "Login") == true) then
		local lvl = getElementData(thePlayer, "Lvl")
		local exp = tonumber(getElementData(thePlayer, "Exp"))
		ch = tonumber(ch)
		if(ch < 100) then
			addBox("Вы выдали себе " .. ch .. " EXP", thePlayer, 0, 60, 255)
			while(ch > 0) do
				local max = (lvl - 1) * 4 + 8
				if(ch + exp < max) then
					local oexp = exp + ch
					SED(thePlayer, "Exp", oexp)
					ch = 0
				elseif(ch + exp == max) then
					lvl = lvl + 1
					exp = 0
					SED(thePlayer, "Exp", exp)
					SED(thePlayer, "Lvl", lvl)
					ch = 0
					addBox("Вы прожили ещё один год в штате!", thePlayer, 0, 60, 255)
				else
					lvl = lvl + 1
					exp = 0
					SED(thePlayer, "Exp", exp)
					SED(thePlayer, "Lvl", lvl)
					local raz = max - exp
					ch = ch - raz
					addBox("Вы прожили ещё один год в штате!", thePlayer, 0, 60, 255)
				end
				dbExec(mysql, "UPDATE `Accounts` SET `Exp` = ?, `Lvl` = ? WHERE `Name` = ?", getElementData(thePlayer, "Exp"), getElementData(thePlayer, "Lvl"), getElementData(thePlayer, "Name"))
			end
		else
			addBox("Вы не можете выдать себе более 100 EXP", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerGiveExp( thePlayer, command, id)
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 3) then
			giveExp(thePlayer, tonumber(id))
			triggerClientEvent(thePlayer, "onEXPUpdate", thePlayer, getElementData(thePlayer, "Exp"), getElementData(thePlayer, "Lvl"))
		end
	end
end

function onTpBuilder( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			setElementPosition(thePlayer, 273.193359375, -255.232421875, 12.428287506104)
		end
	end
end

function onPlayerInt( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 2) then
			if(id ~= nil) then
				if(tonumber(id) ~= nil) then
					id = tonumber(id)
					if(id >= 0) then
						setElementInterior(thePlayer, id)
					end
				end
			end
		end
	end
end

function onPlayerAHeal( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 2) then
			setElementHealth(thePlayer, 100)
			addBox("Вы пополнили своё здоровье.", thePlayer, 0, 255, 100)
		end
	end
end

function BuilderZp( zp )
	addBox("Вы заработали " .. zp * 10 .. "$ на работе строителем.", client, 0, 255, 100)
	setElementMoney(client, zp * 10, "Строитель")
end

function mrkBuildStart(  )
	setPedAnimation(client, "carry", "liftup", 1000, false, true, false, false)
	setTimer(setPedAnimation, 1000, 1, client, "carry", "crry_prtial", 1, true, true, false, true)
	objeect[tonumber(getElementData(client, "ID"))] = createObject(7507, 0, 0, 0, 0, 0, 0)
	exports.bone:attachElementToBone(objeect[tonumber(getElementData(client, "ID"))],client, 12, 0.15, -0.04, 0.05, -90, 20, 0)
end

function ClearBuilderGruz(  )
	if(objeect[tonumber(getElementData(client, "ID"))] ~= nil) then
		destroyElement(objeect[tonumber(getElementData(client, "ID"))])
		objeect[tonumber(getElementData(client, "ID"))] = nil
		removeElementData(client, "LoadPack")
	end
	setPedAnimation(client, "carry", "crry_prtial", 1, false, true, false, false)
	toggleControl(client, "enter_exit", true)
	toggleControl(client, "fire", true)
	toggleControl(client, "jump", true)
	toggleControl(client, "enter_passenger", true)
	toggleControl(client, "next_weapon", true)
	toggleControl(client, "previous_weapon", true)
	toggleControl(client, "aim_weapon", true)
	toggleControl(client, "sprint", true)
	toggleControl(client, "crouch", true)
end

function BuilderEndGruz( )
	setPedAnimation(client, "carry", "putdwn", 1000, false, true, false, false)
end

function onPlayerSellHouse( thePlayer, command, id, price )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "House") > 0) then
			if(tonumber(id) ~= false and tonumber(id) ~= nil) then
				if(tonumber(price) ~= nil) then
					id = tonumber(id)
					price = tonumber(price)
					if(IDS[id] ~= nil) then
						local secPlayer = IDS[id]
						if(getElementData(secPlayer, "Login") == true) then
							if(getElementData(secPlayer, "House") == 0) then
								local house = tonumber(getElementData(thePlayer, "House"))
								if(HouseTable[house]["PName"] == getElementData(thePlayer, "Name")) then
									if(HouseTable[house]["PayDay"] > 2) then
										if(price >= 20000) then
											local x, y, z = getElementPosition(secPlayer)
											local x1, y1, z1 = getElementPosition(thePlayer)
											local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
											if(dist < 3) then
												SED(secPlayer, "PNameHouse", getElementData(thePlayer, "Name"))
												SED(secPlayer, "SellPlayer", thePlayer)
												SED(secPlayer, "HousePrice", tonumber(price))
												SED(secPlayer, "HouseID", getElementData(thePlayer, "House"))
												showPlayerDialog(secPlayer, 17, 1, "Покупка дома", "Готовы ли Вы купить дом №" .. getElementData(thePlayer, "House") .. "\nСтоимость: " .. price .. "$\nВладелец: " .. getElementData(thePlayer, "Name"), "Покупка", "Отмена")
											else
												addBox("Данный игрок слишком далеко.", thePlayer, 255, 0, 0)
											end
										else
											addBox("Ошибка: Минимальная сумма продажи\n20.000$", thePlayer, 255, 0, 0)
										end
									else
										addBox("Дом должен быть оплачен больше чем на 2 часа.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Произошла ошибка #030\nСообщите об этом администрации.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: У данного игрока уже есть дом.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: Данный игрок не авторизован", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: ID введён некорректно", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: Сумма продажи введена\nНекорректно.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: ID введён некорректно", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: У Вас нет дома", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerSellGosHouse( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "House") > 0) then
			local house = getElementData(thePlayer, "House")
			local price = tonumber(HouseTable[house]["Price"] / 2) 
			local id = getElementData(thePlayer, "ID")
			if(PrivateCar[id] == nil) then
				showPlayerDialog(thePlayer, 18, 1, "Продать дом государству.", "Действительно ли Вы хотите продать дом государству?\nСтоимость продажи: " .. price .. "$", "Продать", "Отмена")
			else
				addBox("Ошибка: Сначала продайте авто.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: У Вас нет дома.", thePlayer, 255, 0, 0)
		end
	end
end

function onTpMer( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 2) then
			setElementPosition(thePlayer, -332.1826171875, 1335.70703125, 11.724113464355)
		end
	end
end

function onLicSell( thePlayer, command, id, licid, price )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") == 5) then
			if(getElementData(thePlayer, "Rank") > 6) then
				if(tonumber(id) ~= nil) then
					if(tonumber(id) > 0) then
						if(tonumber(price) ~= nil) then
							price = tonumber(price)
							if(price >= 1000) then
								if(tonumber(licid) ~= nil) then
									licid = tonumber(licid)
									if(licid == 0) then
										id = tonumber(id)
										if(price > 0) then
											if(IDS[id] ~= nil) then
												local secPlayer = IDS[id]
												if(getElementData(secPlayer, "Login") == true) then
													if(getElementData(secPlayer, "AutoLicense") == 0) then
														if(price <= tonumber(getElementData(secPlayer, "Money"))) then
															SED(secPlayer, "LicBy", thePlayer)
															SED(secPlayer, "LicPrice", price)
															showPlayerDialog(secPlayer, 19, 1, "Покупка лицензии на вождение.", "Действительно ли Вы хотите приобрести лицензию на вождение?\nСтоимость приобретения: " .. price .. "$\nЛицензер: " .. getElementData(thePlayer, "Name"), "Купить", "Отмена")
														else
															addBox("Ошибка: У данного игрока нет столько денег.", thePlayer, 255, 0, 0)
														end
													else
														addBox("Ошибка: У данного игрока\nУже есть лицензия на вождение", thePlayer, 255, 0, 0)
													end
												else
													addBox("Ошибка: Данный игрок не авторизован", thePlayer, 255, 0, 0)
												end
											else
												addBox("Ошибка: Данный игрок не найден.", thePlayer, 255, 0, 0)
											end
										else
											addBox("Ошибка: Вы указали некорректную\nсумму.", thePlayer, 255, 0, 0)
										end
									elseif(licid == 1) then
										id = tonumber(id)
										if(price > 0) then
											if(IDS[id] ~= nil) then
												local secPlayer = IDS[id]
												if(getElementData(secPlayer, "Login") == true) then
													if(getElementData(secPlayer, "WeaponLicense") == false) then
														if(price <= tonumber(getElementData(secPlayer, "Money"))) then
															SED(secPlayer, "LicBy", thePlayer)
															SED(secPlayer, "LicPrice", price)
															showPlayerDialog(secPlayer, 84, 1, "Покупка лицензии на вождение.", "Действительно ли Вы хотите приобрести лицензию на вождение?\nСтоимость приобретения: " .. price .. "$\nЛицензер: " .. getElementData(thePlayer, "Name"), "Купить", "Отмена")
														else
															addBox("Ошибка: У данного игрока нет столько денег.", thePlayer, 255, 0, 0)
														end
													else
														addBox("Ошибка: У данного игрока\nУже есть лицензия на оружие", thePlayer, 255, 0, 0)
													end
												else
													addBox("Ошибка: Данный игрок не авторизован", thePlayer, 255, 0, 0)
												end
											else
												addBox("Ошибка: Данный игрок не найден.", thePlayer, 255, 0, 0)
											end
										else
											addBox("Ошибка: Вы указали некорректную\nсумму.", thePlayer, 255, 0, 0)
										end
									else
										addBox("Ошибка: /licsell [licid] [Price].\n\"licid\":\n0 - Лицензия на вождение.\n1 - Лицензия на оружие.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Ошибка: /licsell [licid] [Price].\n\"licid\":\n0 - Лицензия на вождение.\n1 - Лицензия на оружие.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: Сумма не может быть менее 1000$", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: /licsell [licid] [Price].\n\"licid\":\n0 - Лицензия на вождение.\n1 - Лицензия на оружие.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: ID введён некорректно", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: /licsell [licid] [Price].\n\"licid\":\n0 - Лицензия на вождение.\n1 - Лицензия на оружие.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: У Вас нет доступа к данной команде.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: У Вас нет доступа к данной команде.", thePlayer, 255, 0, 0)
		end
	end
end

function onWorkMer( hitElement, dim )
	showPlayerDialog(hitElement, 20, 3, "Государственное трудоустройство", "Название работы\tЛет в штате\nВодитель автобуса\t2 года\nТаксист\t2 года\nРазвозчик продуктов\t3 года", "Выбор", "Отмена")
end

function onPlayerAnimList( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true)  then
		if(getElementData(thePlayer, "NWork") == 0) then
			if(tonumber(id) ~= nil and tonumber(id) ~= false) then
				id = tonumber(id)
				if(id >= 0 and id <= 30) then
					setPedAnimation(thePlayer, AnimList[id]["Block"], AnimList[id]["Anim"], 4100, true)
					bindKey(thePlayer, "space", "down", function ( pl )
						setPedAnimation(pl, "BSKTBALL", "BBALL_idle_O", 1, false)
						unbindKey(pl, "space", "down")
					end, thePlayer)
				else
					showPlayerDialog(thePlayer, 24, 3, "Список анимаций", "Список Анимаций\n1. Танец 1\n2. Танец 2\n3. Танец 3\n4. Танец 4\n5. Танец 5\n6. Танец 6\n7. Махать рукой\n8. Лечь на землю\n9. Походка пьяного\n10. Кувыркаться\n11. Попрощаться\n12. Читать рэп\n13. Укрыться\n14. Подложить бомбу\n15. Надеть маску\n16. Вытянуть руку перед собой\n17. Сложить руки вместе\n18. Съел что-то не то...\n19. Перекусить\n20. Шлёпнуть кому-то по заднице\n21. Предложить наркотики\n22. Эффект электрошокера\n23. Мужское курение\n24. Женское курение\n25. Присесть\n26. Восточное единоборство\n27. Выпить напиток\n28. Танец на одной ноге\n29. Поза вратаря\n30. Facepalm\n", "Выбор", "Отмена")
				end
			else
				showPlayerDialog(thePlayer, 24, 3, "Список анимаций", "Список Анимаций\n1. Танец 1\n2. Танец 2\n3. Танец 3\n4. Танец 4\n5. Танец 5\n6. Танец 6\n7. Махать рукой\n8. Лечь на землю\n9. Походка пьяного\n10. Кувыркаться\n11. Попрощаться\n12. Читать рэп\n13. Укрыться\n14. Подложить бомбу\n15. Надеть маску\n16. Вытянуть руку перед собой\n17. Сложить руки вместе\n18. Съел что-то не то...\n19. Перекусить\n20. Шлёпнуть кому-то по заднице\n21. Предложить наркотики\n22. Эффект электрошокера\n23. Мужское курение\n24. Женское курение\n25. Присесть\n26. Восточное единоборство\n27. Выпить напиток\n28. Танец на одной ноге\n29. Поза вратаря\n30. Facepalm\n", "Выбор", "Отмена")
			end
		else
			addBox("Вы не можете использовать анимации, находясь на работе.", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerGPS( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementInterior(thePlayer) == 0) then
			showPlayerDialog(thePlayer, 25, 3, "GPS-навигатор", "Меню\nВажные места\nРабота\nГосударственные учреждения\nОпасные районы\nБлижайшая АЗС\nБлижайший магазин одежды\nБлижайший 24/7\nБлижайшая закусочная\nБлижайший банкомат\nНайти моё авто\nНайти мой дом", "Выбор", "Отмена")
		else
			addBox("Сейчас Вы не можете этого сделать.", thePlayer, 180, 180, 180)
		end
	end
end

function onAdminSetHInt( thePlayer, command, id, inter )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") == 6) then
			if(id ~= nil) then
				if(inter ~= nil) then
					if(tonumber(id) ~= nil) then
						if(tonumber(inter) ~= nil) then
							id = tonumber(id)
							inter = tonumber(inter)
							if(id > 0) then
								if(inter > 0) then
									if(HouseTable[id] ~= nil) then
										if(HouseTable[id]["Pickup"] ~= nil) then
											if(inter == 5) then
												HouseTable[id]["Interior"] = inter
												dbExec(mysql, "UPDATE `House` SET `Interior` = ? WHERE `ID` = ?", inter, id)
												addBox("Вы указали " .. inter .. " интерьер для " .. id .. " дома.", thePlaye, 0, 60, 255)
												HouseTable[id]["hx"] = 2233.9003
												HouseTable[id]["hy"] = -1114.3300
												HouseTable[id]["hz"] = 1051
												HouseTable[id]["hrx"] = 0
											elseif(inter == 11) then
												HouseTable[id]["Interior"] = inter
												dbExec(mysql, "UPDATE `House` SET `Interior` = ? WHERE `ID` = ?", inter, id)
												addBox("Вы указали " .. inter .. " интерьер для " .. id .. " дома.", thePlayer, 0, 60, 255)
												HouseTable[id]["hx"] = 2283.09765625
												HouseTable[id]["hy"] = -1138.0791015625
												HouseTable[id]["hz"] = 1050.8984375
												HouseTable[id]["hrx"] = 0
											else
												addBox("Ошибка: Указывать можно только\n5 и 11 ID интерьера.", thePlayer, 255, 0, 0)
											end
										else
											addBox("Произошла ошибка #366.\nПожалуйста, сообщите об этом администрации.", thePlayer, 255, 0, 0)
										end
									else
										addBox("Ошибка: Такого дома не существует.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Ошибка: Вы указали некорректный интерьер", thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: Вы указали некорректный ID.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: Вы указали некорректный ID интерьера.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: Вы указали некорректный ID дома.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: Вы не указали ID интерьера.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: Вы не указали ID дома.", thePlayer, 255, 0, 0)
			end
		end
	end
end

function onPlayerAdminChat( thePlayer, command, ... )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			local name = getElementData(thePlayer, "Name")
			local arg = { ... }
			local n = #arg
			local string = "[AC] " .. name .. ": " .. table.concat(arg, " ")
			if(n > 0) then
				for i, n in pairs(IDS) do
					if(getElementData(n, "Login") ~= false) then
						if(getElementData(n, "Login") == true) then
							if(getElementData(n, "Admin") > 0) then
								sendClientMessage(string, n, 255, 120, 0)
							end
						else
						end
					end
				end
			else
				addBox("Ошибка: Вы не ввели текст.", thePlayer)
			end
		end
	end
end

function onAdminACommands( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			local adm = tonumber(getElementData(thePlayer, "Admin"))
			local str = "Уровень админки"
			for i=1,adm do
				str = str .. "\n" .. i .. " уровень"
			end
			showPlayerDialog(thePlayer, 76, 3, "Список админ-команд", str, "Ок", "Отмена")
		end
	end
end

function onPlayerSetHVS( thePlayer, command, hid )
	if(getElementData(thePlayer, "Login") == true) then
		if(tonumber(getElementData(thePlayer, "Admin")) == 6) then
			if(tonumber(hid) ~= nil) then
				hid = tonumber(hid)
				if(HouseTable[hid] ~= nil) then
					local x, y, z = getElementPosition(thePlayer)
					HouseTable[hid]["vx"] = x
					HouseTable[hid]["vy"] = y
					HouseTable[hid]["vz"] = z
					local rx, ry, rz = getElementRotation(thePlayer)
					HouseTable[hid]["vrz"]	= rz
					dbExec(mysql, "UPDATE `House` set `vx` = ?, `vy` = ?, `vz` = ?, `vrz` = ? WHERE `ID` = ?", x, y, z, rz, hid)
					addBox("Вы установили данную позицию\nКак точку спавна Т/С дому " .. hid .. " id.", thePlayer, 0, 60, 255)
				else
					addBox("Ошибка: Такого дома не существует.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: Вы не указали ID дома", thePlayer, 255, 0, 0)
			end
		end
	end
end

function onPlayerSHotel( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			setElementPosition(thePlayer, -153.263671875, -1140.78515625, 13.445375442505)
		end
	end
end

function onTpAero( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			setElementPosition(thePlayer, -1390.5634765625, -880.6474609375, 20.86149597168)
		end
	end
end

function onSellGosCar( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "House") ~= 0) then
			local house = tonumber(getElementData(thePlayer, "House"))
			if(HouseTable[house]["Car"] ~= 0) then
				local veh = HouseTable[house]["Car"]
				local price = 0
				for i, n in pairs(CarInfo) do
					if(CarInfo[i]["ID"] == veh) then
						price = CarInfo[i]["GosPrice"]
						break
					end
				end
				local stf = "Действительно ли Вы хотите продать своё т/с государству?\nВы получите половину от стоимости покупки.\nСумма, которую вы получите: " .. math.round(price / 2) .. "$." 
				showPlayerDialog(thePlayer, 29, 1, "Продажа домашнего транспорта", stf, "Продать", "Отмена")
				SED(thePlayer, "Sellvehprice", math.round(price / 2))
			else
				addBox("Ошибка: У Вас нет транспорта.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: У Вас нет дома.", thePlayer, 255, 0, 0)
		end
	end
end

function onAdminTpMail( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			setElementPosition(thePlayer, 299.3359375, -338.142578125, 11.91587638855) 
			setElementInterior(thePlayer, 0)
			setElementDimension(thePlayer, 0)
			addBox("Вы телепортировались на работу почтальонов.", thePlayer, 0, 60, 255)
		end
	end
end

function onAdminTpAsh( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") ~= false) then
			if(getElementData(thePlayer, "Admin") > 0) then
				setElementPosition(thePlayer, 103.6953125, -813.650390625, 10.426418304443)
				setElementInterior(thePlayer, 0)
				setElementDimension(thePlayer, 0)
			end
		end
	end
end

function onAdminTpArmy( thePlayer, command )
	if(getElementData(thePlayer, "Login") ~= nil) then
		if(getElementData(thePlayer, "Admin") > 0) then
			local veh = getPedOccupiedVehicle(thePlayer)
			if(veh ~= nil and veh ~= false) then
				setElementPosition(veh, -1691.4609375, -216.482421875, 14.824159622192)
			else
				setElementPosition(thePlayer, -1691.4609375, -216.482421875, 14.824159622192)
			end
		end
	end
end

function onPlayerExitVehicle( thePlayer, seat, jacker, forced )
	SED(thePlayer, "ToggleVeh", false)
	local id = getElementData(thePlayer, "ID")
	if(getElementData(thePlayer, "Faction") == 9) then
		if(getElementData(source, "ArmyCar") ~= false) then
			if(getElementData(thePlayer, "mrkArmyGruz") ~= false) then
				local mrk = getElementData(thePlayer, "mrkArmyGruz")
				if(isElement(mrk) == true) then
					if(isEventHandlerAdded("onMarkerHit", mrk, onMrkArmyGruzHit) == true) then
						removeEventHandler("onMarkerHit", mrk, onMrkArmyGruzHit)
					end
					local blp = getElementData(thePlayer, "blpArmyGruz")
					destroyElement(mrk)
					destroyElement(blp)
					removeElementData(thePlayer, "mrkArmyGruz")
					removeElementData(thePlayer, "blpArmyGruz")
				end
			end
			if(getElementData(thePlayer, "mrkArmyGruzilo") ~= false) then
				local mrk = getElementData(thePlayer, "mrkArmyGruzilo")
				local blp = getElementData(thePlayer, "blpArmyGruzilo")
				if(isElement(mrk) == true) then
					removeEventHandler("onMarkerHit", mrk, onHitGruzilo)
					destroyElement(mrk)
					destroyElement(blp)
					removeElementData(thePlayer, "mrkArmyGruzilo")
					removeElementData(thePlayer, "blpArmyGruzilo")
				end
			end
		end
	end
	if(rentVehTable[id] == source) then
		rentTimer[id] = setTimer(checkRent, 5 * 60 * 1000, 1)
		addBox("Вы покинули арендованный транспорт.\nЕсли Вы не вернетесь за руль\nВ течение 5 минут,\nТранспорт будет припаркован.", thePlayer, 255, 0, 0)
	end
	if(seat == 0) then
		setVehicleLocked(source, false)
	end
	local id = getElementData(thePlayer, "ID")
	if(source == PCar[id]) then
		customDestroyVehicle(source)
	end
	if(getElementData(thePlayer, "LiveVCN") ~= false) then
		removeElementData(thePlayer, "LiveVCN")
		addBox("Вы вышли из машины и отключились от эфира", thePlayer, 0, 255, 60)
	end
	if(getElementData(thePlayer, "mrkBenz1") ~= false) then
		local mrk = getElementData(thePlayer, "mrkBenz1")
		if(isElement(mrk) == true) then
			local blp = getElementData(thePlayer, "blpBenz1")
			removeEventHandler("onMarkerHit", mrk, Benz1MarkerHit)
			destroyElement(mrk)
			destroyElement(blp)
			removeElementData(thePlayer, "mrkBenz1")
			removeElementData(thePlayer, "blpBenz1")
		end
	end
	if(getElementData(thePlayer, "mrkBenz2") ~= false) then
		local mrk = getElementData(thePlayer, "mrkBenz2")
		if(isElement(mrk) == true) then
			local blp = getElementData(thePlayer, "blpBenz2")
			removeEventHandler("onMarkerHit", mrk, Benz2MarkerHit)
			destroyElement(mrk)
			destroyElement(blp)
			removeElementData(thePlayer, "mrkBenz2")
			removeElementData(thePlayer, "blpBenz2")
		end
	end
	if(getElementData(thePlayer, "VehicleDriverBus") ~= false) then
		if(getElementData(source, "DriverPlayerBus") ~= false) then
			local veh = getElementData(thePlayer, "VehicleDriverBus")
			local player = getElementData(source, "DriverPlayerBus")
			if(thePlayer == player) then
				if(veh == source) then
					local id = getElementData(thePlayer, "ID")
					addBox("У Вас есть 15 секунд\nЧтобы вернуться в автобус.", thePlayer, 255, 255, 0)
					PlayerBusTimer = setTimer(function ( pl, v )
						if(isElement(pl) == true) then
							if(getPedOccupiedVehicle(pl) ~= v) then
								if(getElementData(pl, "VehicleDriverBus") ~= false) then
									local veh = getElementData(pl, "VehicleDriverBus")
									if(veh == v) then
										local mrk = getElementData(pl, "mrkBus")
										if(isElement(mrk) == true) then
											local blp = getElementData(pl, "blpBus")
											customSpawnVehicle(v)
											removeElementData(v, "DriverPlayerBus")
											addBox("Ваш автобус был эвакуирован.", pl, 255, 255, 0)
											removeElementData(pl, "VehicleDriverBus")
											removeEventHandler("onMarkerHit", mrk, MarkerHit)
											destroyElement(mrk)
											destroyElement(blp)
											removeElementData(pl, "mrkBus")
											removeElementData(pl, "blpBus")
											removeElementData(pl, "BusStage")
											removeElementData(pl, "March")
										end
									end
								end
							end
						end
					end, 15000, 1, thePlayer, source)
				end
			end
		end
	end
end

function onPlayerAGL( thePlayer, command, id, proof)
	if(getElementData(thePlayer, "Login") ~= false) then
		if(getElementData(thePlayer, "Admin") > 3) then
			if(id ~= nil) then
				if(tonumber(id) ~= nil) then
					id = tonumber(id)
					if(IDS[id] ~= nil) then
						local secPlayer = IDS[id]
						if(getElementData(secPlayer, "Login") == true) then
							if(getElementData(secPlayer, "Admin") < 4) then
								if(proof ~= nil) then
									if(tonumber(proof) ~= nil) then
										proof = tonumber(proof)
										if(proof == 0) then
											if(getElementData(secPlayer, "AutoLicense") == 1) then
												addBox("Вы забрали у игрока " .. getElementData(secPlayer, "Name") .. " лицензию на вождение.", thePlayer, 0, 255, 60)
												addBox("Администратор " .. getElementData(thePlayer, "Name") .. " забрал у Вас лицензию на вождение.", secPlayer, 0, 60, 255)
												SED(secPlayer, "AutoLicense", 0)
												local veh = getPedOccupiedVehicle(secPlayer)
												if(veh ~= false and veh ~= nil) then
													removePedFromVehicle(secPlayer)
												end
												dbExec(mysql, "UPDATE `Accounts` SET `AutoLicense` = 0 WHERE `Name` = ?", getElementData(secPlayer, "Name"))
											else
												addBox("У этого игрока уже нет прав.", thePlayer, 255, 0, 0)
											end
										elseif(proof == 1) then
											if(getElementData(secPlayer, "AutoLicense") == 0) then
												addBox("Вы выдали лицензию на вождение игроку " .. getElementData(secPlayer, "Name"), thePlayer, 0, 60, 255)
												addBox("Администратор " .. getElementData(thePlayer, "Name") .. "\nВыдал Вам лицензию на вождение.", secPlayer, 0, 60, 255)
												SED(secPlayer, "AutoLicense", 1)
											else
												addBox("У этого игрока уже есть лицензия на вождение.", thePlayer, 255, 0, 0)
											end
										else
											addBox("Данный тип пока что не доступен для выдачи.", thePlayer, 255, 0, 0)
										end 
									else
										addBox("Вы указали некорректную выдачу прав.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Вы не указали,\nзабрать или отобрать лицензии.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Вы не можете изменить у администратора права.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Данный игрок не авторизован.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Такой ID не найден.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Вы допустили ошибку при вводе ID.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Вы допустили ошибку при вводе ID.", thePlayer, 255, 0, 0)
			end
		elseif(getElementData(thePlayer, "Admin") > 0 and getElementData(thePlayer, "Admin") < 4) then
			addBox("У Вас нет доступа к данной команде.", thePlayer, 255, 0, 0)
		end
	end
end

function onAdminSetAdmin( thePlayer, command, id, lvl )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") == 6) then
			if(id ~= nil) then
				if(tonumber(id) ~= nil) then
					if(lvl ~= nil) then
						if(tonumber(lvl) ~= nil) then
							id = tonumber(id)
							lvl = tonumber(lvl)
							if(IDS[id] ~= nil) then
								local secPlayer = IDS[id]
								if(getElementData(secPlayer, "Login") == true) then
									if(secPlayer ~= thePlayer) then
										SED(secPlayer, "Admin", lvl)
										dbExec(mysql, "UPDATE `Accounts` SET `Admin` = ? WHERE `Name` = ?", lvl, getElementData(secPlayer, "Name"))
										addBox("Ваш уровень админ. прав был\nИзменен на " .. lvl .. " адм. " .. getElementData(thePlayer, "Name"), secPlayer, 0, 255, 100)
										addBox("Вы изменили уровень админ. прав\nНа " .. lvl .. " для " .. getElementData(secPlayer, "Name"), thePlayer, 0, 255, 100)
									else
										addBox("Ошибка: Вы не можете изменить\nСвой уровень адм. прав.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Ошибка: Данный игрок не авторизован.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: Данный игрок не на сервере.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: Вы ввели некорректный уровень админ. прав.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: Вы не ввели уровень админ. прав.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: Вы ввели некорректный ID игрока.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: Вы не ввели ID игрока.", thePlayer, 255, 0, 0)
			end
		end
	end	
end

function onAdminTpVCN( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			setElementPosition(thePlayer, -496.162109375, 772.763671875, 10.951456069946)
		end
	end
end

function onPlayerUseFMenu( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "BusOwnID") > 0 and getElementData(thePlayer, "BusOwnID") < 8) then
			showPlayerDialog(thePlayer, 42, 3, "Управление заправкой", "Пункты управления бизнесом:\nПродать бизнес государству\nПродать бизнес игроку\nКупить бензовоз\nЗаспавнить бензовоз\nОткрыть/закрыть бизнес\nУстановить цену за топливо\nСтатистика бизнеса\nВывести деньги\nОплатить налог\nНайти бизнес", "Выбор", "Отмена")
		else
			addBox("У Вас нет заправки.", thePlayer, 255, 0, 0)
		end
	end
end

function onMedicChangeSex( thePlayer, command, id, summ )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") == 7) then
			if(getElementData(thePlayer, "Rank") > 3) then
				if(id ~= nil) then
					if(tonumber(id) ~= nil) then
						id = tonumber(id)
						if(summ ~= nil) then
							if(tonumber(summ) ~= nil) then
								summ = tonumber(summ)
								if(IDS[id] ~= nil) then
									local secPlayer = IDS[id]
									if(getElementData(secPlayer, "Login") == true) then
										local x, y, z = getElementPosition(secPlayer)
										local x1, y1, z1 = getElementPosition(thePlayer)
										local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
										if(dist < 10) then
											local money = tonumber(getElementData(secPlayer, "Money"))
											if(summ >= 500 and summ <= 10000) then
												if(money >= summ) then
													SED(secPlayer, "SexPrice", summ)
													SED(secPlayer, "SexHealer", thePlayer)
													showPlayerDialog(secPlayer, 53, 1, "Операция по смене пола.", "Врач " .. getElementData(thePlayer, "Name") .. " хочет провести Вам операцию по смене пола.\nСтоимость данной услуги: " .. summ .. "$.", "Принять", "Отмена")
												else
													addBox("Ошибка: У данного игрока слишком мало денег.", thePlayer, 255, 0, 0)
												end
											else
												addBox("Ошибка: Сумма может быть\nНе менее 500$ и не более 10000$", thePlayer, 255, 0, 0)
											end
										else
											addBox("Ошибка: Данный игрок слишком далеко от Вас.", thePlayer, 255, 0, 0)
										end
									else
										addBox("Ошибка: Данный игрок не авторизован.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Ошибка: Данный игрок не на сервере.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: Сумма введена некорректно.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: Вы не ввели сумму.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: Вы некорректно ввели ID игрока.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: Вы не ввели ID игрока.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: У Вас нет доступа к данной команде.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: У Вас нет доступа к данной команде.", thePlayer, 255, 0, 0)
		end
	end
end

function onAdminAsay( thePlayer, command, ... )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 2) then
			local arg = {...}
			local a = #arg
			if(a > 0) then
				local string = "Администратор " .. getElementData(thePlayer, "Name") .. " в чат: " .. table.concat(arg, " ")
				for i, n in pairs(IDS) do
					if(getElementData(n, "Login") == true) then
						sendClientMessage(string, n, 255, 60, 0)
					end
				end
			else
				addBox("Ошибка: Вы не ввели текст.", thePlayer, 255, 0, 0)
			end
		end
	end
end

function onPlayerNews( thePlayer, command, ... )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") == 6) then
			if(getElementData(thePlayer, "Rank") > 3) then
				if(getPedOccupiedVehicle(thePlayer) ~= false) then
					local veh = getPedOccupiedVehicle(thePlayer)
					if(getElementData(veh, "VCNCar") ~= false) then
						local arg = {...}
						local a = #arg
						if(a > 0) then
							local string = "[VCN] " .. getElementData(thePlayer, "Name") .. ": " .. table.concat(arg, " ")
							for i, n in pairs(IDS) do
								if(getElementData(n, "Login") == true) then
									sendClientMessage(string, n, 0, 240, 100)
								end
							end
						else
							addBox("Ошибка:Вы не ввели текст.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка:Вы находитесь не в машине VCN.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка:Вы не находитесь в машине VCN.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка:У Вас недостаточно прав,\nЧтобы использовать данную команду.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка:У Вас нет доступа к данной команде", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerLive( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") == 6) then
			if(getElementData(thePlayer, "Rank") > 3) then
				if(id ~= nil) then
					if(tonumber(id) ~= nil) then
						id = tonumber(id)
						if(IDS[id] ~= nil) then
							local secPlayer = IDS[id]
							if(getElementData(secPlayer, "Login") == true) then
								local veh = getPedOccupiedVehicle(secPlayer)
								if(veh ~= nil and veh ~= false) then
									if(veh == getPedOccupiedVehicle(thePlayer)) then
										if(getElementData(veh, "VCNCar") ~= false) then
											if(getElementData(secPlayer, "LiveVCN") == false) then
												SED(secPlayer, "LiveVCN", 1)
												addBox("Вы передали микрофон " .. getElementData(secPlayer, "Name"), thePlayer, 0, 255, 60)
												addBox(getElementData(thePlayer, "Name") .. " передал Вам микрофон.", secPlayer, 0, 255, 60)
											else
												removeElementData(secPlayer, "LiveVCN")
												addBox("Вы забрали микрофон " .. getElementData(secPlayer, "Name"), thePlayer, 0, 255, 60)
												addBox(getElementData(thePlayer, "Name") .. " забрал у Вас микрофон.", secPlayer, 0, 255, 60)
											end
										else
											addBox("Ошибка: Вы должны находиться в машине VCN,\nЧтобы сделать это.", thePlayer, 255, 40, 0)
										end
									else
										addBox("Ошибка: Вы должны находиться в одной машине.", thePlayer, 255, 40, 0)
									end
								else
									addBox("Ошибка: Данный игрок не находится в машине.", thePlayer, 255, 40, 0)
								end
							else
								addBox("Ошибка: Данный игрок не авторизован.", thePlayer, 255, 40, 0)
							end
						else
							addBox("Ошибка: Данный игрок не в сети.", thePlayer, 255, 40, 0)
						end
					else
						addBox("Ошибка: ID введен некорректно.", thePlayer, 255, 40, 0)
					end
				else
					addBox("Ошибка: Вы не ввели id игрока.", thePlayer, 255, 40, 0)
				end
			else
				addBox("Ошибка: У Вас нет доступа к данной команде.", thePlayer, 255, 40, 0)
			end
		else
			addBox("Ошибка: У Вас нет доступа к данной команде.", thePlayer, 255, 40, 0)
		end
	end
end

function onPlayerArrest( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") == 8) then
			if(getElementData(thePlayer, "Rank") > 1) then
				if(id ~= nil) then
					if(tonumber(id) ~= nil) then
						id = tonumber(id)
						if(IDS[id] ~= nil) then
							local secPlayer = IDS[id]
							if(getElementData(secPlayer, "Login") == true) then
								if(getElementData(secPlayer, "Wanted") ~= false) then
									local veh1 = getPedOccupiedVehicle(secPlayer)
									if(veh1 ~= false) then
										if(getElementData(veh1, "PoliceID") ~= false) then
											local veh2 = getPedOccupiedVehicle(thePlayer)
											if(thePlayer ~= secPlayer) then
												if(veh1 == veh2) then
													removePedFromVehicle(secPlayer)
													setElementPosition(secPlayer, 391.4736328125, -507.255859375, 9.362735748291)
													addBox("Игрок " .. getElementData(secPlayer, "Name") .. " отправлен Вами в тюрьму.", thePlayer, 255, 255, 0)
													addBox("Вы были отправлены в тюрьму полицейским " .. getElementData(thePlayer, "Name"), secPlayer, 255, 255, 0)
													SED(secPlayer, "PoliceJail", 600 * getElementData(secPlayer, "Wanted"))
													addBox("Время ожидания: " .. getElementData(secPlayer, "PoliceJail"), secPlayer, 255, 255, 0)
													SED(secPlayer, "Wanted", 0)
												else
													addBox("Ошибка: Вы должны находиться\nВ одной машине.", thePlayer, 255, 0, 0)
												end
											else
												addBox("Ошибка: Вы не можете арестовать\nСами себя.", thePlayer, 255, 0, 0)
											end
										else
											addBox("Ошибка: Данный игрок не находится\nВ полицейской машине.", thePlayer, 255, 0, 0)
										end
									else
										addBox("Ошибка: Вы не находитесь в машине.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Ошибка: Данный игрок не в розыске.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: Данный игрок не авторизован.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: Данный игрок не в сети.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: ID игрока введён некорректно.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: Вы не ввели ID игрока.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: У Вас нет доступа к этой команде.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: У Вас нет доступа к этой команде.", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerUnarrest( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") == 8) then
			if(getElementData(thePlayer, "Rank") > 4) then
				if(id ~= nil) then
					if(tonumber(id) ~= nil) then
						id = tonumber(id)
						if(IDS[id] ~= nil) then
							local secPlayer = IDS[id]
							if(getElementData(secPlayer, "Login") == true) then
								if(getElementData(secPlayer, "PoliceJail") ~= false) then
									if(getElementData(secPlayer, "PoliceJail") > 0) then
										dbExec(mysql, "UPDATE `Accounts` SET `PoliceJail` = ? WHERE `ID` = ?", getElementData(secPlayer, "PoliceJail"), getElementData(secPlayer, "AccID"))
										removeElementData(secPlayer, "PoliceJail")
										setElementPosition(secPlayer, 509.013671875, 507.142578125, 11.002715110779)
										setElementInterior(secPlayer, 0)
										addBox("Вы были досрочно освобождены\nПолицейским " .. getElementData(thePlayer, "Name") .. ".", secPlayer, 255, 255, 0)
										addBox("Вы досрочно освободили " .. getElementData(secPlayer, "Name") .. " из тюрьмы.", thePlayer, 255, 255, 0)
										for i, n in pairs(IDS) do
											if(getElementData(n, "Login") == true) then
												if(getElementData(n, "Faction") == 8) then
													if(n ~= thePlayer) then
														sendClientMessage("Полицейский " .. getElementData(thePlayer, "Name") .. " досрочно выпустил " .. getElementData(secPlayer, "Name") .. " из-под ареста.", n, 255, 255, 0)
													end
												end
											end 
										end
									else
										addBox("Ошибка: Данный игрок уже выпущен.", thePlayer, 255, 40, 0)
									end
								else
									addBox("Ошибка: Данный игрок не находится в тюрьме.", thePlayer, 255, 40, 0)
								end
							else
								addBox("Ошибка: Данный игрок не авторизован.", thePlayer, 255, 40, 0)
							end
						else
							addBox("Ошибка: Данный игрок не найден.", thePlayer, 255, 40, 0)
						end
					else
						addBox("Ошибка: Вы ввели некорректный ID.", thePlayer, 255, 40, 0)
					end
				else
					addBox("Ошибка: Вы не ввели ID.", thePlayer, 255, 40, 0)
				end
			else
				addBox("Ошибка: У Вас нет доступа к данной команде.", thePlayer, 255, 40, 0)
			end
		else
			addBox("Ошибка: У Вас нет доступа к данной команде.", thePlayer, 255, 40, 0)
		end
	end
end

function onPlayerPhoneCall( thePlayer, command, callnumber)
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "PhoneNumber") ~= false) then
			local number = tonumber(getElementData(thePlayer, "PhoneNumber"))
			if(number > 0) then
				if(callnumber ~= nil) then
					if(tonumber(callnumber) ~= nil) then
						callnumber = tonumber(callnumber)
						if(callnumber > 0) then
							if(PhoneNumbers[callnumber] ~= nil) then
								local secPlayer = PhoneNumbers[callnumber]
								if(isElement(secPlayer) == true) then
									if(secPlayer ~= thePlayer) then
										if(getElementData(secPlayer, "PhonePlayer") == false) then
											addBox("Вы позвонили на номер " .. callnumber .. ".\nОжидайте ответа.", thePlayer, 255, 255, 0)
											addBox(getElementData(thePlayer, "Name") .. " попытался до Вас дозвониться.", secPlayer, 255, 255, 0)
											addBox("Чтобы принять звонок, введите /accept,\nИли чтобы отклонить, введите /refuse", secPlayer, 255, 255, 0)
											SED(secPlayer, "PhonePlayer", thePlayer)
											SED(thePlayer, "PhonePlayer", secPlayer)
										else
											addBox("Абонент занят, повторите попытку позднее.", thePlayer, 255, 0, 0)
										end
									else
										addBox("Вы не можете позвонить самому себе.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Произошла ошибка связи,\nПовторите попытку позже.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Данный абонент находится\nВне зоны действия сети.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Номер телефона введён некорректно.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Номер телефона введён некорректно.", thePlayer, 255, 0, 0)
					end
				else
					addBox("/call [номер]", thePlayer, 255, 255, 0)
				end
			else
				addBox("У Вас нет мобильного телефона.", thePlayer, 255, 0, 0)
			end
		else
			addBox("У Вас нет мобильного телефона.", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerAccept( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "PhonePlayer") ~= false) then
			if(getElementData(thePlayer, "LiveVCN") == false) then
				local secPlayer = getElementData(thePlayer, "PhonePlayer")
				if(isElement(secPlayer) == true) then
					if(getElementData(thePlayer, "AcceptedCall") == false) then
						if(getElementData(secPlayer, "AcceptedCall") == false) then
							SED(secPlayer, "AcceptedCall", true)
							SED(thePlayer, "AcceptedCall", true)
							addBox(getElementData(thePlayer, "Name") .. " принял Ваш звонок.", secPlayer, 255, 255, 0)
							setPedAnimation(thePlayer, "ped", "phone_talk", 1, true, true, false, true)
							setPedAnimation(secPlayer, "ped", "phone_talk", 1, true, true, false, true)
							local id = getElementData(thePlayer, "ID")
							local secid = getElementData(secPlayer, "ID")
							PhoneObject[id] = createObject(16097, 0, 0, 0)
							PhoneObject[secid] = createObject(16097, 0, 0, 0)
							exports.bone:attachElementToBone(PhoneObject[id], thePlayer, 12,0.03,0.02,0.12,0,90,90)
							exports.bone:attachElementToBone(PhoneObject[secid], secPlayer, 12,0.03,0.02,0.12,0,90,90)
						else
							addBox("Ошибка: Данный абонент уже разговаривает.", thePlayer, 255, 0, 0)
							removeElementData(thePlayer, "PhonePlayer")
							if(getElementData(thePlayer, "AcceptedCall") ~= false) then
								removeElementData(thePlayer, "AcceptedCall")
							end
						end
					else
						addBox("Вы уже разговариваете.", thePlayer, 255, 255, 0)
					end
				else
					addBox("Произошла ошибка связи,\nАбонент вне зоны действия.", thePlayer, 255, 0, 0)
					removeElementData(thePlayer, "PhonePlayer")
					if(getElementData(thePlayer, "AcceptedCall") ~= false) then
						removeElementData(thePlayer, "AcceptedCall")
					end
				end
			else
				addBox("Вы не можете принять звонок в эфире.", thePlayer, 255, 0, 0)
			end
		else
			addBox("У Вас не было предложений, чтобы их принять.", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerRefuse( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "PhonePlayer") ~= false) then
			if(getElementData(thePlayer, "AcceptedCall") == true) then
				local secPlayer = getElementData(thePlayer, "PhonePlayer")
				if(isElement(secPlayer) == true) then
					removeElementData(secPlayer, "PhonePlayer")
					removeElementData(secPlayer, "AcceptedCall")
					addBox(getElementData(thePlayer, "Name") .. " завершил звонок.", secPlayer, 255, 255, 0)
				end
				setPedAnimation(secPlayer, "BSKTBALL", "BBALL_idle_O", 1, false)
				setPedAnimation(thePlayer, "BSKTBALL", "BBALL_idle_O", 100, false)
				addBox("Вы закончили разговор", thePlayer, 255, 255, 0)
				removeElementData(thePlayer, "PhonePlayer")
				removeElementData(thePlayer, "AcceptedCall")
				local id = getElementData(thePlayer, "ID")
				if(PhoneObject[id] ~= nil) then
					local obj = PhoneObject[id]
					exports.bone:detachElementFromBone(obj)
					destroyElement(obj)
					PhoneObject[thePlayer] = nil
				end
				local secid = getElementData(secPlayer, "ID")
				if(PhoneObject[secid] ~= nil) then
					local obj = PhoneObject[secid]
					exports.bone:detachElementFromBone(obj)
					destroyElement(obj)
					PhoneObject[secid] = nil
				end
			else
				local secPlayer = getElementData(thePlayer, "PhonePlayer")
				if(isElement(secPlayer) == true) then
					removeElementData(secPlayer, "PhonePlayer")
					removeElementData(secPlayer, "AcceptedCall")
					addBox(getElementData(thePlayer, "Name") .. " отказался от звонка.", secPlayer, 255, 255, 0)
				end
				addBox("Вы закончили разговор", thePlayer, 255, 255, 0)
				removeElementData(thePlayer, "PhonePlayer")
				removeElementData(thePlayer, "AcceptedCall")
				if(PhoneObject[thePlayer] ~= nil) then
					local obj = PhoneObject[thePlayer]
					exports.bone:detachElementFromBone(obj)
					destroyElement(obj)
					PhoneObject[thePlayer] = nil
				end
				if(PhoneObject[secPlayer] ~= nil) then
					local obj = PhoneObject[secPlayer]
					exports.bone:detachElementFromBone(obj)
					destroyElement(obj)
					PhoneObject[secPlayer] = nil
				end
			end
		else
			addBox("У Вас нет предложений,\nОт которых можно отказаться.", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerSms( thePlayer, command, numbersms, ... )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "PhoneNumber") > 0) then
			if(numbersms ~= nil) then
				if(tonumber(numbersms) ~= nil) then
					numbersms = tonumber(numbersms)
					if(numbersms > 0) then
						if(PhoneNumbers[numbersms] ~= nil) then
							local secPlayer = PhoneNumbers[numbersms]
							if(isElement(secPlayer) == true) then
								if(secPlayer ~= thePlayer) then
									local arg = {...}
									local a = #arg
									if(a > 0) then
										local num = math.round(tonumber(getElementData(thePlayer, "PhoneNumber")) / 1000)
										local num2 = math.round(tonumber(getElementData(thePlayer, "PhoneNumber")) % 1000)
										if(num2 < 100) then
											if(num2 < 10) then
												num2 = "00" .. num2
											else
												num2 = "0" .. num2
											end
										end
										local num1 = math.round(tonumber(getElementData(secPlayer, "PhoneNumber")) / 1000)
										local num12 = math.round(tonumber(getElementData(secPlayer, "PhoneNumber")) % 1000)
										if(num12 < 100) then
											if(num12 < 10) then
												num12 = "00" .. num12
											else
												num12 = "0" .. num12
											end
										end
										local string = "СМС от " .. num .. "-" .. num2 .. ": " .. table.concat(arg, " ")
										local string1 = "СМС для " .. num1 .. "-" .. num12 .. ": " .. table.concat(arg, " ")
										sendClientMessage(string, secPlayer, 255, 255, 0)
										sendClientMessage(string1, thePlayer, 255, 255, 0)
									else
										addBox("Вы не набрали текст сообщения.", thePlayer, 255, 255, 0)
									end
								else
									addBox("Вы не можете отправить СМС самому себе.", thePlayer, 255, 255, 0)
								end
							else
								addBox("Номер находится вне зоны действия сети.", thePlayer, 255, 255, 0)
							end
						else
							addBox("Номер находится вне зоны действия сети.", thePlayer, 255, 255, 0)
						end
					else
						addBox("Номер набран некорректно", thePlayer, 255, 255, 0)
					end
				else
					addBox("/sms [номер] [текст]", thePlayer, 255, 255, 0)
				end
			else
				addBox("Вы не набрали номер для смс.", thePlayer, 255, 255, 0)
			end
		else
			addBox("У Вас нет мобильного телефона.", thePlayer, 255, 255, 0)
		end
	end
end

function onPlayerAns( thePlayer, command, id, ... )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			if(id ~= nil) then
				if(tonumber(id) ~= nil) then
					id = tonumber(id)
					if(IDS[id] ~= nil) then
						local secPlayer = IDS[id]
						if(getElementData(secPlayer, "Login")) then
							local arg = {...}
							local a = #arg
							if(a > 0) then
								local string = "Ответ от адм. " .. getElementData(thePlayer, "Name") .. ": " .. table.concat(arg, " ")
								sendClientMessage(string, secPlayer, 255, 60, 0)
								local str = "Ответ от адм. " .. getElementData(thePlayer, "Name") .. " для " .. getElementData(secPlayer, "Name") .. ": " .. table.concat(arg, " ")
								for i, n in pairs(IDS) do
									if(getElementData(n, "Login") == true) then
										if(getElementData(n, "Admin") > 0) then
											sendClientMessage(string, n, 255, 60, 0)
										end
									end
								end
							else
								addBox("Ошибка: Вы не указали текст для ответа.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: Данный игрок не авторизован.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: Данный игрок не в сети.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: Вы указали некорректный ID игрока.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: Вы не указали ID игрока.", thePlayer, 255, 0, 0)
			end
		end
	end
end

function onPlayerGetId( thePlayer, command, text )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 4) then
			if(text ~= nil) then
				local integ = 0
				for i, n in pairs(IDS) do
					if(string.find(getElementData(n, "Name"), text) ~= nil) then
						integ = integ + 1
						if(integ == 0) then
							sendClientMessage("Игроки с похожими никами:", thePlayer, 180, 180, 0)
						end
						sendClientMessage(integ .. ": " .. getElementData(n, "Name") .. " (" .. getElementData(n, "ID") .. ")", thePlayer, 180, 180, 0)
					end
				end
				if(integ == 0) then
					addBox("Игроков с такими никами не найдено.", thePlayer, 180, 180, 0)
				end
			else
				addBox("Ошибка: Вы не ввели имя игрока.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: Данный команда Вам недоступна.", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerTriggerAdminDamage( thePlayer )
	for i, n in pairs(IDS) do
		if(isElement(thePlayer) == true) then
			if(getElementType(thePlayer) == "player") then
				if(getElementData(n, "Login") == true) then
					if(getElementData(n, "Admin") > 0) then
						sendClientMessage(getElementData(thePlayer, "Name") .. " (" .. getElementData(thePlayer, "ID") .. ") наносит урон в зелёной зоне.", n, 255, 60, 0)
					end
				end
			end
		end
	end
end

function onPlayerCheckMenu( thePlayer, command )
	local fact = getElementData(thePlayer, "Faction")
	local fname = ""
	local frank = ""
	local house = getElementData(thePlayer, "House")
	local bus = getElementData(thePlayer, "BusOwnID")
	if(bus == 0) then
		bus = "Отсутствует"
	end
	if(house == 0) then
		house = "Отсутствует"
	end
	if(fact > 0 and fact < 10) then
		fname = FactionName[fact][2]
		frank = FactionRankName[fact][getElementData(thePlayer, "Rank")]
	else
		fname = "Отсутствует"
		frank = "Отсутствует"
	end
	triggerClientEvent(thePlayer, "onPlayerCheckMenu", thePlayer, getElementData(thePlayer, "Lvl"), getElementData(thePlayer, "Exp"), getElementData(thePlayer, "Sex"), getElementData(thePlayer, "PhoneNumber"), fname, fact, frank, getElementData(thePlayer, "Money"), house, bus, getElementData(thePlayer, "PWork"), getElementData(thePlayer, "Rank"), getElementData(thePlayer, "Warn"), getElementData(thePlayer, "Donate"))
end

function onAdminUseSpawn( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") ~= false) then
		if(getElementData(thePlayer, "Admin") > 2) then
			if(id ~= nil) then
				if(tonumber(id) ~= nil) then
					id = tonumber(id)
					if(IDS[id] ~= nil) then
						local secPlayer = IDS[id]
						if(secPlayer ~= thePlayer) then
							if(getElementData(secPlayer, "Login") == true) then
								customSpawnPlayer(secPlayer)
								addBox("Вы заспавнили " .. getElementData(secPlayer, "Name") .. " (" .. getElementData(secPlayer, "ID") .. ")", thePlayer, 255, 255, 0)
								addBox("Администратор " .. getElementData(thePlayer, "Name") .. " заспавнил Вас.", secPlayer, 255, 255, 0)
							else
								addBox("Ошибка: Данный игрок не авторизован.", thePlayer, 255, 0, 0)
							end
						else
							customSpawnPlayer(thePlayer)
							addBox("Вы заспавнили себя.", thePlayer)
						end
					else
						addBox("Ошбика: Данный игрок не найден.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: ID введён некорректно", thePlayer, 255, 0, 0)
				end
			else
				customSpawnPlayer(thePlayer)
				addBox("Вы заспавнили себя.", thePlayer, 0, 60, 255)
			end
		end
	end
end

function onAdminUseMute( thePlayer, command, id, time, ... )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 1) then
			if(id ~= nil) then
				if(tonumber(id) ~= nil) then
					id = tonumber(id)
					local reason = {...}
					if(IDS[id] ~= nil) then
						local secPlayer = IDS[id]
						if(getElementData(secPlayer, "Login") == true) then
							if(secPlayer ~= thePlayer) then
								local adm = getElementData(secPlayer, "Admin")
								if(adm < getElementData(thePlayer, "Admin")) then
									if(time ~= nil) then
										if(tonumber(time) ~= nil) then
											time = tonumber(time)
											local a = #reason
											if(a > 0) then
												reason = table.concat( reason, " " )
												local secTime = getElementData(secPlayer, "Mute")
												if(time > 0) then
													if(secTime == 0) then
														SED(secPlayer, "Mute", time * 60)
														addBox("Вы выдали затычку игроку " .. getElementData(secPlayer, "Name") .. " (" .. getElementData(secPlayer, "ID") .. ")\nНа " .. time .. " мин по причине: " .. reason, thePlayer, 255, 0, 0)
														addBox("Администратор " .. getElementData(thePlayer, "Name") .. " выдал\nВам затычку на " .. time .. " мин по причине: " .. reason, secPlayer, 255, 0, 0)
														dbExec(mysql, "UPDATE `Accounts` set `Mute` = ? WHERE `ID` = ?", time, getElementData(secPlayer, "AccID"))
													else
														addBox("У данного игрока уже есть затычка.", thePlayer, 255, 0, 0)
													end
												elseif(time == 0) then
													if(secTime > 0) then
														SED(secPlayer, "Mute", 0)
														addBox("Администратор " .. getElementData(thePlayer, "Name") .. "\nСнял с Вас затычку по причине: " .. reason, secPlayer, 255, 0, 0)
														addBox("Вы сняли затычку с игрока " .. getElementData(secPlayer, "Name") .. "(" .. getElementData(secPlayer, "ID") .. ")\nПо причине: " .. reason, thePlayer, 255, 0, 0)
														dbExec(mysql, "UPDATE `Accounts` set `Mute` = ? WHERE `ID` = ?", time, getElementData(secPlayer, "AccID"))
													else
														addBox("Данный игрок не находится в муте.", thePlayer, 255, 0, 0)
													end
												else
													addBox("Ошибка: Время мута введено некорректно.", thePlayer, 255, 0, 0)
												end
											else
												addBox("Ошибка: Вы не ввели причину.", thePlayer, 255, 0, 0)
											end
										else
											addBox("Ошибка: Время мута введено некорректно.", thePlayer, 255, 0, 0)
										end
									else
										addBox("Ошибка: Вы не ввели время мута.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Ошибка: Данный игрок является администратором выше Вас.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: Вы не можете выдать затычку самому себе.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: Данный игрок не авторизован.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: Данный игрок не найден.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: ID игрока введён некорректно.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: Вы не ввели id игрока.", thePlayer, 255, 0, 0)
			end
		else
			addBox("У Вас нет доступа к данной команде.", thePlayer, 255, 0, 0)
		end
	end
end

function onAdminRepair( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 1) then
			local veh = getPedOccupiedVehicle(thePlayer)
			if(veh ~= false) then
				setElementHealth(veh, 1000)
				fixVehicle(veh)
				addBox("Вы отремонтировали Ваш транспорт.", thePlayer, 0, 200, 80)
			else
				addBox("Ошибка: Вы не находитесь в машине.", thePlayer, 255, 0, 0)
			end
		end
	end
end

function onAdminWarn( thePlayer, command, id, ... )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 1) then
			if(id ~= nil) then
				if(tonumber(id) ~= nil) then
					id = tonumber(id)
					local arg = {...}
					local a = #arg
					if(a > 0) then
						if(IDS[id] ~= nil) then
							local secPlayer = IDS[id]
							if(getElementData(secPlayer, "Login") == true) then
								if(secPlayer ~= thePlayer) then
									if(getElementData(secPlayer, "Admin") < getElementData(thePlayer, "Admin")) then
										local Warn = getElementData(secPlayer, "Warn")
										if(Warn == 0) then
											dbExec(mysql, "UPDATE `Accounts` SET `Warn` = 1, `Faction` = 0, `Rank` = 0, `WorkSkin` = 0 WHERE `Name` = ?", getElementData(secPlayer, "Name"))
										elseif(Warn == 1) then
											dbExec(mysql, "UPDATE `Accounts` SET `Warn` = 2 WHERE `Name` = ?", getElementData(secPlayer, "Name"))
										elseif(Warn == 2) then
											dbExec(mysql, "UPDATE `Accounts` SET `Warn` = 0, `Ban` = 30 WHERE `Name` = ?", getElementData(secPlayer, "Name"))
										end
										sendClientMessage("Администратор " .. getElementData(thePlayer, "Name") .. " выдал предупреждение [" .. Warn + 1 .. "/3] игроку " .. getElementData(secPlayer, "Name") .. ". Причина: " .. table.concat(arg, " "), getRootElement(), 255, 60, 0)
										kickPlayer(secPlayer, "Warn")
									else
										addBox("Ошибка: Вы не можете выдать предупреждение администратору.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Ошибка: Вы не можете выдать предупреждение самому себе.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: Данный игрок не авторизован", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: Данный игрок не найден.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: Вы не ввели причину предупреждения", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: ID игрока введён некорректно.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: Вы не ввели ID игрока.", thePlayer, 255, 0, 0)
			end
		end
	end
end

function onAdminUseArmor( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 1) then
			setPedArmor(thePlayer, 100)
		end
	end
end

function onPlayerBuyBusiness( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "BusinessID") ~= false) then
			local id = tonumber(getElementData(thePlayer, "BusinessID"))
			if(id ~= nil) then
				if(id >= 10) then
					local bus = tonumber(getElementData(thePlayer, "BusOwnID"))
					if(bus == 0) then
						if(BusinessTable[id]["Owner"] == 0) then
							showPlayerDialog(thePlayer, 60, 1, "Покупка бизнеса", "Действительно ли Вы хотите приобрести данный бизнес?\nСтоимость: 450.000$", "Купить", "Отмена")
						else
							addBox("Ошибка: У данного бизнеса уже есть владелец.", thePlayer, 255, 0, 0)
						end
					elseif(id == tonumber(getElementData(thePlayer, "BusOwnID"))) then
						addBox("Ошибка: Вы уже владеете этим бизнесом.", thePlayer, 255, 0, 0)
					else
						addBox("Ошибка: Вы не можете приобрести данный\nБизнес.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: Вы не находитесь в бизнесе.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: Вы не находитесь в бизнесе.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: Вы не находитесь в бизнесе.", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerBuyMenu( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "BusOwnID") >= 10) then
			showPlayerDialog(thePlayer, 61, 3, "Управление 24/7", "Пункт управления\nПродать бизнес государству\nПродать бизнес игроку\nОткрыть/закрыть бизнес\nВывесить заказ продуктов\nПополнить счёт бизнеса\nВывести деньги со счёта\nОплатить налог\nСтатистика", "Выбор", "Отмена")
		else
			addBox("Ошибка: У Вас нет магазина для управления.", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerTpAPark2( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			setElementPosition(thePlayer, -883.9658203125, 571.0732421875, 11.060119628906)
		end
	end
end

function onMafiaCapture( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") >= 1 and getElementData(thePlayer, "Faction") <= 4) then
			if(getElementData(thePlayer, "Rank") >= 9) then
				local ds = {}
				for i, n in pairs(CHT) do
					ds[i] = FactionName[CHT[i]["Mafia"]][1]
				end
				local string = "Бизнес\tКрыша\nОтель \"Тетрис\"\t" .. ds[1] .. "\nТЦ \"City Mall\"\t" .. ds[2] .. "\nАвтосалон \"Grotti\"\t" .. ds[3] .. "\nПорт\t" .. ds[4]
				showPlayerDialog(thePlayer, 70, 3, "Война за бизнесы", string, "Выбор", "Отмена")
			else
				addBox("Ошибка: У Вас нет доступа к данной команде.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: У Вас нет доступа к данной команде.", thePlayer, 255, 0, 0)
		end
	end
end

function onAdminBan( thePlayer, command, id, day, ... )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") >= 3) then
			if(id ~= nil) then
				if(tonumber(id) ~= nil) then
					id = tonumber(id)
					if(IDS[id] ~= nil) then
						local secPlayer = IDS[id]
						if(getElementData(secPlayer, "Login") == true) then
							if(secPlayer ~= thePlayer) then
								if(getElementData(secPlayer, "Admin") < getElementData(thePlayer, "Admin")) then
									if(day ~= nil) then
										if(tonumber(day) ~= nil) then
											day = tonumber(day)
											if(day > 0) then
												local arg = {...}
												local a = #arg
												if(a > 0) then
													local string = "Администратор " .. getElementData(thePlayer, "Name") .. " заблокировал игрока " .. getElementData(secPlayer, "Name") .. " на " .. day .. " дней. Причина: " .. table.concat(arg, " ")
													sendClientMessage(string, getRootElement(), 255, 60, 0)
													dbExec(mysql, "UPDATE `Accounts` SET `Ban` = ? WHERE `Name` = ?", day, getElementData(secPlayer, "Name"))
													kickPlayer(secPlayer, "Ban " .. day)
												else
													addBox("Ошибка: Вы не ввели причину бана.", thePlayer, 255, 0, 0)
												end
											else
												addBox("Ошибка: количество дней введено некорректно.", thePlayer, 255, 0, 0)
											end
										else
											addBox("Ошибка: количество дней введено некорректно.", thePlayer, 255, 0, 0)
										end
									else
										addBox("Ошибка: Вы не ввели количество дней.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Ошибка: Вы не можете заблокировать данного игрока.",  thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: Вы не можете забанить самого себя.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: Данный игрок не авторизован.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: Данный игрок не найден.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: ID введен некорректно.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: Вы не ввели ID игрока.", thePlayer, 255, 0, 0)
			end
		end
	end
end

function onAdminUnwarn( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") >= 4) then
			if(id ~= nil) then
				if(tonumber(id) ~= nil) then
					id = tonumber(id)
					if(IDS[id] ~= nil) then
						local secPlayer = IDS[id]
						if(getElementData(secPlayer, "Login") == true) then
							if(getElementData(secPlayer, "Warn") > 0) then
								local warn = tonumber(getElementData(secPlayer, "Warn"))
								SED(secPlayer, "Warn", warn - 1)
								addBox("Вы сняли предупреждение игроку " .. getElementData(secPlayer, "Name") .. ".\nОсталось ещё: " .. warn - 1, thePlayer, 255, 255, 0)
								addBox("Администратор " .. getElementData(thePlayer, "Name") .. " снял с Вас предупреждение.\nОсталось ещё: " .. warn - 1, secPlayer, 255, 255, 0)
								dbExec(mysql, "UPDATE `Accounts` SET `Warn` = ? WHERE `Name` = ?", warn - 1, getElementData(secPlayer, "Name"))
							else
								addBox("Ошибка: У этого игрока нет предупреждений.", thePlayer, 255, 255, 0)
							end
						else
							addBox("Ошибка: Данный игрок не авторизован.", thePlayer, 255, 255, 0)
						end
					else
						addBox("Ошибка: Данный игрок не найден.", thePlayer, 255, 255, 0)
					end
				else
					addBox("Ошибка: ID игрока введено некорректно.", thePlayer, 255, 255, 0)
				end
			else
				addBox("Ошибка: Вы не ввели ID игрока.", thePlayer, 255, 255, 0)
			end
		end
	end
end

function addBox( text, thePlayer,  r, g, b )
	triggerClientEvent(thePlayer, "onBoxAdd", thePlayer, text, r, g, b)
end

function hitBuyCar( hit, dim )
	if(getElementType(hit) == "player") then
		if(getElementData(hit, "Login") == true) then
			if(getElementData(hit, "House") > 0) then
				local dom = tonumber(getElementData(hit, "House"))
				if(HouseTable[dom]["vx"] ~= nil) then
					if(HouseTable[dom]["vx"] ~= 0) then
						if(HouseTable[dom]["Car"] == 0) then
							triggerClientEvent(hit, "onPlayerBuyCarMenu", hit, CarInfo, tonumber(getElementData(hit, "ID")))
							setElementDimension(hit, tonumber(getElementData(hit, "ID")))
						else
							addBox("Ошибка: У Вас уже есть авто.", hit, 255, 0, 0)
						end
					else
						addBox("Ошибка: У Вас нет гаража.", hit, 255, 0, 0)
					end
				else
					addBox("Ошибка: У Вас нет гаража.", hit, 255, 0, 0)
				end
			else
				addBox("Ошибка: У Вас нет дома.", hit, 255, 0, 0)
			end
		end
	end
end

function onAdminTpCarBuy( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			setElementPosition(thePlayer, -1004.224609375, -875.9716796875, 12.849883079529)
			setElementInterior(thePlayer, 0)
			setElementDimension(thePlayer, 0)
		end
	end
end

function hitWeaponArmy( hit, dim )
	if(isElement(hit) == true) then
		if(getElementType(hit) == "player") then
			if(getElementData(hit, "Login") == true) then
				local id = getElementData(hit, "ID")
				if(getElementData(hit, "Faction") >= 1 and getElementData(hit, "Faction") <= 4) then
					PTTimer[id] = setTimer(function ( player )
						if(isElement(player) == true) then
							local pt = math.random(1, 4)
							if(getElementData(hit, "Material") < 200) then
								if(Server["ArmyGruz"] > 0) then
									local ppt = tonumber(getElementData(player, "Material"))
									if(getElementData(player, "Material") < 200) then
										if(pt <= Server["ArmyGruz"]) then
											Server["ArmyGruz"] = Server["ArmyGruz"] - pt
											addBox("+" .. pt .. " мат.", player, 0, 255, 255)
										else
											pt = Server["ArmyGruz"]
											Server["ArmyGruz"] = 0
											addBox("+" .. pt .. " мат.", player, 0, 255, 255)
										end
										ppt = ppt + pt
										SED(player, "Material", ppt)
									else
										addBox("У Вас слишком много материалов.", player, 255, 0, 0)
									end
								else
									addBox("Склад пуст.", player, 255, 0, 0)
								end
							else
								addBox("У Вас слишком много материалов.", player, 255, 0, 0)
							end
						end
					end, 2000, 0, hit)
				elseif(getElementData(hit, "Faction") == 9) then
					showPlayerDialog(hit, 74, 3, "Склад", "Вещь\tКоличество\nБронежилет\t1 шт\nАптечка\t1 штука\nDesert Eagle\t21 патрон\nShotgun\t8 патрон\nМ4\t60 патрон", "Выбор", "Отмена")
				else
					addBox("Ошибка: Вы не можете этого сделать.", hit, 255, 0, 0)
				end
			end
		end
	end
end

function leaveWeaponArmy( hit, dim )
	if(isElement(hit) == true) then
		if(getElementType(hit) == "player") then
			local id = getElementData(hit, "ID")
			if(PTTimer[id] ~= nil) then
				if(isTimer(PTTimer[id]) == true) then
					killTimer(PTTimer[id])
					PTTimer[id] = nil
				end
			end
		end
	end
end

function onAdminTpMall( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			setElementPosition(thePlayer, 450.1708984375, 989.4169921875, 18.274263381958)
			setElementInterior(thePlayer, 0)
			setElementDimension(thePlayer, 0)
		end
	end
end

function onAdminSetHp( thePlayer, command, id, hp )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 2) then
			if(id ~= nil) then
				if(hp ~= nil) then
					if(tonumber(id) ~= nil) then
						if(tonumber(hp) ~= nil) then
							id = math.round(id)
							hp = math.round(hp)
							if(IDS[id] ~= nil) then
								local secPlayer = IDS[id]
								if(getElementData(secPlayer, "Login") == true) then
									if(hp >= 0 and hp <= 100) then
										setElementHealth(secPlayer, hp)
										addBox("Администратор изменил Вам здоровье.", secPlayer, 0, 255, 100)
										addBox("Вы изменили хп " .. getElementData(secPlayer, "Name"), thePlayer, 0, 255, 100)
									else
										addBox("Ошибка: ХП может быть от 0 до 100", thePlayer, 255, 0, 0)
									end
								else
									addBox("Ошибка: Данный игрок не авторизован.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: Данный игрок не найден.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: ХП введено некорректно.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: ID игрока введен некорректно.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: Вы не ввели хп.", thePlayer, 255, 0, 0)
				end
			else
				addBox("/sethp [id] [процент хп]", thePlayer, 255, 0, 0)
			end
		end
	end
end

function onAdminSetArmor( thePlayer, command, id, armor )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 2) then
			if(id ~= nil) then
				if(armor ~= nil) then
					if(tonumber(id) ~= nil) then
						if(tonumber(armor) ~= nil) then
							id = math.round(id)
							armor = math.round(armor)
							if(IDS[id] ~= nil) then
								local secPlayer = IDS[id]
								if(getElementData(secPlayer, "Login") == true) then
									if(armor >= 0 and armor <= 100) then
										setPedArmor(secPlayer, armor)
										addBox("Администратор изменил Вам броню.", secPlayer, 0, 255, 100)
										addBox("Вы изменили броню " .. getElementData(thePlayer, "Name"), thePlayer, 0, 255, 100)
									else
										addBox("Ошибка: Армор может быть от 0 до 100", thePlayer, 255, 0, 0)
									end
								else
									addBox("Ошибка: Данный игрок не авторизован.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: Данный игрок не найден.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: Армор введен некорректно.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: ID игрока введен некорректно.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: Вы не ввели армор.", thePlayer, 255, 0, 0)
				end
			else
				addBox("/setarmor [id] [процент армор]", thePlayer, 255, 0, 0)
			end
		end
	end
end

function onAdminRepair( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 1) then
			local veh = getPedOccupiedVehicle(thePlayer)
			if(veh ~= false) then
				setElementHealth(veh, 1000)
				setVehicleDoorState(veh, 0, 0)
				setVehicleDoorState(veh, 1, 0)
				setVehicleDoorState(veh, 2, 0)
				setVehicleDoorState(veh, 3, 0)
				setVehicleDoorState(veh, 4, 0)
				setVehicleDoorState(veh, 5, 0)
				addBox("Вы починили Ваш транспорт.", thePlayer, 0, 255, 100)
			end
		end
	end
end

function onPlayerShout( thePlayer, command, ... )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "NWork") == 0) then
			if(getElementData(thePlayer, "Lvl") > 1) then
				local arg = {...}
				local a = #arg
				if(a > 0) then
					for i, n in pairs(IDS) do
						local x, y, z = getElementPosition(n)
						local x1, y1, z1 = getElementPosition(thePlayer)
						local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
						if(getPedOccupiedVehicle(thePlayer) == false) then
							setPedAnimation(thePlayer, "on_lookers", "shout_01", -1, false, false, false, false)
						end
						if(dist < 60) then
							sendClientMessage(getElementData(thePlayer, "Name") .. " кричит: " .. table.concat(arg, " "), n, 255, 255, 255)
						end
					end
				else
					addBox("Ошибка: Вы не ввели текст.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: Вы не можете это сделать.\nНеобходимо прожить лет в штате: 2", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: Вы не можете кричать\nНа работе.", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerWepot( thePlayer, command, ... )
	if(getElementData(thePlayer, "Login") == true) then
		local arg = {...}
		local a = #arg
		if(a > 0) then
			for i, n in pairs(IDS) do
				local x, y, z = getElementPosition(n)
				local x1, y1, z1 = getElementPosition(thePlayer)
				local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
				if(dist < 6) then
					sendClientMessage(getElementData(thePlayer, "Name") .. " шепчет: " .. table.concat(arg, " "), n, 120, 120, 0)
				end
			end
		else
			addBox("Ошибка: Вы не ввели текст.", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerNChat( thePlayer, command, ... )
	if(getElementData(thePlayer, "Login") == true) then
		local arg = {...}
		local a = #arg
		if(a > 0) then
			for i, n in pairs(IDS) do
				local x, y, z = getElementPosition(n)
				local x1, y1, z1 = getElementPosition(thePlayer)
				local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
				if(dist < 20 or getCameraTarget(n) == source) then
					sendClientMessage("(( " .. getElementData(thePlayer, "Name") .. " : " .. table.concat(arg, " ") .. " ))", n, 240, 240, 240)
				end
			end
		else
			addBox("Ошибка: Вы не ввели текст.", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerCheckHelp( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		showPlayerDialog(thePlayer, 64000, 1, "Помощь по серверу", "Сытость.\n \nНа сервере есть понятие сытости. Её необходимо пополнять\nпостоянно, чтобы не погибнуть.\nКогда Ваша сытость достигает нуля, здоровье начинает убавляться.\nПополнить сытость можно в некоторых пиццериях и магазинах.\n \nЗдоровье.\n \nЗдоровье на момент альфа-тестирования пополнить могут только администраторы.\n \nТопливо\n \nУ каждого транспортного средства есть топливо.\nЧтобы пополнить топливо, необходимо ввести /fuel,\nНаходясь возле заправки.", "Ок", "Отмена")
	end
end

function onPlayerCheckHouseMenu( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "House") > 0) then
			showPlayerDialog(thePlayer, 85, 3, "Меню управления домом", "Пункты управления\nСтатистика дома\nРеспавн авто\nОплатить налог\nПродать дом государству\nОткрыть/закрыть дом", "Выбор", "Отмена")
		else
			addBox("Ошибка: У Вас нет дома.", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerFish( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			setElementPosition(thePlayer, -688.37109375, -1489.130859375, 12.260985374451)
			setElementDimension(thePlayer, 0)
			setElementInterior(thePlayer, 0)
		end
	end
end

function onPlayerLock( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getPedOccupiedVehicle(thePlayer) ~= false) then
			local veh = getPedOccupiedVehicle(thePlayer)
			if(veh ~= nil) then
				if(isVehicleLocked(veh) == true) then
					addBox("Вы открыли Ваш транспорт.", thePlayer, 0, 255, 100)
				else
					addBox("Вы закрыли Ваш транспорт.", thePlayer, 0, 255, 100)
				end
				setVehicleLocked(veh, not isVehicleLocked(veh))
			else
				addBox("Ошибка: Вы не в машине!", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: Вы не в машине!", thePlayer, 255, 0, 0)
		end
	end
end

function onAdminTpMost( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			setElementPosition(thePlayer, -837.888671875, 43.939453125, 9.5627288818359)
		end
	end
end

addCommandHandler("most", 			onAdminTpMost)
addCommandHandler("lock",			onPlayerLock)
addCommandHandler("fish",			onPlayerFish)
addCommandHandler("hmenu",			onPlayerCheckHouseMenu)
addCommandHandler("shelp",			onPlayerCheckHelp)
addCommandHandler("b",				onPlayerNChat)
addCommandHandler("w",				onPlayerWepot)
addCommandHandler("s",				onPlayerShout)
addCommandHandler("setarmor",		onAdminSetArmor, false)
addCommandHandler("sethp",			onAdminSetHp, false)
addCommandHandler("mall",			onAdminTpMall)
addCommandHandler("carbuy",			onAdminTpCarBuy)
addCommandHandler("unwarn",			onAdminUnwarn)
addCommandHandler("aban",			onAdminBan)
addCommandHandler("capture",		onMafiaCapture)
addCommandHandler("bus2",			onPlayerTpAPark2)
addCommandHandler("bmenu",			onPlayerBuyMenu)
addCommandHandler("buybusiness",	onPlayerBuyBusiness)
addCommandHandler("armor",			onAdminUseArmor)
addCommandHandler("warn",			onAdminWarn)
addCommandHandler("arepair",		onAdminRepair)
addCommandHandler("amute",			onAdminUseMute)
addCommandHandler("spawn", 			onAdminUseSpawn)
addCommandHandler("mm",				onPlayerCheckMenu)
addCommandHandler("mainmenu",		onPlayerCheckMenu)
addCommandHandler("menu",			onPlayerCheckMenu)
addCommandHandler("mn",				onPlayerCheckMenu)
addCommandHandler("id",				onPlayerGetId)
addCommandHandler("ans",			onPlayerAns)
addCommandHandler("sms",			onPlayerSms)
addCommandHandler("refuse",			onPlayerRefuse)
addCommandHandler("accept",			onPlayerAccept)
addCommandHandler("call",			onPlayerPhoneCall)
addCommandHandler("unarrest",		onPlayerUnarrest)
addCommandHandler("arrest",			onPlayerArrest)
addCommandHandler("live",			onPlayerLive)
addCommandHandler("news",			onPlayerNews)
addCommandHandler("asay", 			onAdminAsay)
addCommandHandler("changesex", 		onMedicChangeSex)
addCommandHandler("fmenu",			onPlayerUseFMenu)
addCommandHandler("vcn", 			onAdminTpVCN)
addCommandHandler("makeadmin", 		onAdminSetAdmin)
addCommandHandler("agivevehlic",	onPlayerAGL)
addCommandHandler("army", 			onAdminTpArmy)
addCommandHandler("ash",			onAdminTpAsh)
addCommandHandler("amail",			onAdminTpMail)
addCommandHandler("sellgoscar",		onSellGosCar)
addCommandHandler("aero", 			onTpAero)
addCommandHandler("shotel", 		onPlayerSHotel)
addCommandHandler("sethvs",			onPlayerSetHVS)
addCommandHandler("ahelp",			onAdminACommands)
addCommandHandler("a",				onPlayerAdminChat)
addCommandHandler("sethint",		onAdminSetHInt)
addCommandHandler("gps",			onPlayerGPS)
--addCommandHandler("anim", 			onPlayerAnimList)
--addCommandHandler("animlist",		onPlayerAnimList)
addCommandHandler("repairveh",			onAdminRepair)
addCommandHandler("licsell",		onLicSell)
addCommandHandler("mer",			onTpMer)
addCommandHandler("sellgoshouse",	onPlayerSellGosHouse)
addCommandHandler("sellhouse",		onPlayerSellHouse)
addCommandHandler("hp",				onPlayerAHeal)
addCommandHandler("int",			onPlayerInt)
addCommandHandler("builder",		onTpBuilder)
addCommandHandler("giveexp", 		onPlayerGiveExp)
addCommandHandler("afuel",			onPlayerAFuel)
addCommandHandler("d",				onPlayerChatDepart)
addCommandHandler("r",				onPlayerUseTalkie)
addCommandHandler("setlic", 		onPlayerSetLic)
addCommandHandler("aeat",			onPlayerAEat)
addCommandHandler("sethouseprice",	onSetHousePrice)
addCommandHandler("stopspec",		onStopSpectating)
addCommandHandler("report",			onPlayerReport)
addCommandHandler("try",			onPlayerTry)
addCommandHandler("do",				onPlayerDo)
addCommandHandler("commands",		onPlayerGetCommands)
addCommandHandler("setleader", 		onSetLeader)
addCommandHandler("pay",			onPlayerPay)
addCommandHandler("taxipark", 		onTaxiPark)
addCommandHandler("addel",			onPlayerDeleteAd)
addCommandHandler("edit", 			onPlayerEditAd)
addCommandHandler("ads",			onPlayerAds)
addCommandHandler("ad",				onPlayerAdvert)
addCommandHandler("templeader", 	tempLeader)
addCommandHandler("su",				suspectPolicePlayer)
addCommandHandler("heal", 			healMedPlayer)
addCommandHandler("ch", 			onPlayerCreateHouse)
addCommandHandler("gov", 			onPlayerGov)
addCommandHandler("elit", 			tpAutobus)
addCommandHandler("bus", 			tpAutopark)
addCommandHandler("fuel", 			fuelBuy)

setTimer( updateTime, 1800000, 0)
setTimer( pulseTime, 1000, 0)

addEventHandler("onPlayerChangeNick", root, function ( old, new, change )
	cancelEvent()
end)

function hitWeapMaf1( hit, dim )
	if(getElementType(hit) == "player") then
		if(getElementData(hit, "Faction") == 1) then
			if(getElementData(hit, "Material") > 0) then
				local mat = tonumber(getElementData(hit, "Material"))
				SED(hit, "Material", 0)
				addBox("Вы положили на склад " .. mat .. " мат.",hit, 0, 100, 255)
				Server["Maf1Gruz"] = Server["Maf1Gruz"]  + mat
			else
				showPlayerDialog(hit, 73, 3, "Выбор оружия", "Оружие\tКол-во\nDesert Eagle\t21 патрон\nShotgun\t8 патрон\nAK-47\t60 патрон", "Выбор", "Отмена")
			end
		else
			addBox("Ошибка: Вы не можете этого сделать.", hit, 255, 0, 0)
		end
	end
end

function hitWeapMaf2( hit, dim )
	if(getElementType(hit) == "player") then
		if(getElementData(hit, "Faction") == 2) then
			if(getElementData(hit, "Material") > 0) then
				local mat = tonumber(getElementData(hit, "Material"))
				SED(hit, "Material", 0)
				addBox("Вы положили на склад " .. mat .. " мат.",hit, 0, 100, 255)
				Server["Maf2Gruz"] = Server["Maf2Gruz"]  + mat
			else
				showPlayerDialog(hit, 73, 3, "Выбор оружия", "Оружие\tКол-во\nDesert Eagle\t21 патрон\nShotgun\t8 патрон\nAK-47\t60 патрон", "Выбор", "Отмена")
			end
		else
			addBox("Ошибка: Вы не можете этого сделать.", hit, 255, 0, 0)
		end
	end
end

function hitWeapMaf3( hit, dim )
	if(getElementType(hit) == "player") then
		if(getElementData(hit, "Faction") == 3) then
			if(getElementData(hit, "Material") > 0) then
				local mat = tonumber(getElementData(hit, "Material"))
				SED(hit, "Material", 0)
				addBox("Вы положили на склад " .. mat .. " мат.",hit, 0, 100, 255)
				Server["Maf3Gruz"] = Server["Maf3Gruz"]  + mat
			else
				showPlayerDialog(hit, 73, 3, "Выбор оружия", "Оружие\tКол-во\nDesert Eagle\t21 патрон\nShotgun\t8 патрон\nAK-47\t60 патрон", "Выбор", "Отмена")
			end
		else
			addBox("Ошибка: Вы не можете этого сделать.", hit, 255, 0, 0)
		end
	end
end

function hitWeapMaf4( hit, dim )
	if(getElementType(hit) == "player") then
		if(getElementData(hit, "Faction") == 4) then
			if(getElementData(hit, "Material") > 0) then
				local mat = tonumber(getElementData(hit, "Material"))
				SED(hit, "Material", 0)
				addBox("Вы положили на склад " .. mat .. " мат.",hit, 0, 100, 255)
				Server["Maf4Gruz"] = Server["Maf4Gruz"]  + mat
			else
				showPlayerDialog(hit, 73, 3, "Выбор оружия", "Оружие\tКол-во\nDesert Eagle\t21 патрон\nShotgun\t8 патрон\nAK-47\t60 патрон", "Выбор", "Отмена")
			end
		else
			addBox("Ошибка: Вы не можете этого сделать.", hit, 255, 0, 0)
		end
	end
end

function onPlayerHPay( thePlayer, command, payday )
	if(getElementData(thePlayer, "Login")) then
		if(getElementData(thePlayer, "House") > 0) then
			if(payday ~= nil) then
				if(tonumber(payday) ~= nil) then
					payday = math.round(payday)
					local house = getElementData(thePlayer, "House")
					local money = getElementData(thePlayer, "Money")
					if(money >= payday * 200) then
						if(HouseTable[house]["PayDay"] < 720) then
							if(HouseTable[house]["PayDay"] + payday <= 720) then
								setElementMoney(thePlayer, -payday * 200, "Оплата дома")
								addBox("Вы оплатили дом на " .. payday .. " PayDay.", thePlayer, 0, 255, 100)
								HouseTable[house]["PayDay"] = HouseTable[house]["PayDay"] + payday
								dbExec(mysql, "UPDATE `House` SET `PayDay` = ? WHERE `ID` = ?", HouseTable[house]["PayDay"], house)
							else
								payday = 720 - HouseTable[house]["PayDay"]
								setElementMoney(thePlayer, -payday * 200, "Оплата дома")
								addBox("Вы оплатили дом на максимум.", thePlayer, 0, 255, 100)
								HouseTable[house]["PayDay"] = HouseTable[house]["PayDay"] + payday
								dbExec(mysql, "UPDATE `House` SET `PayDay` = ? WHERE `ID` = ?", HouseTable[house]["PayDay"], house)
							end
						else
							addBox("Ваш дом уже оплачен на максимум.", thePlayer, 255, 255, 0)
						end
					else
						addBox("Ошибка: У Вас недостаточно денег.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: Количество введено некорректно.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: Вы не ввели количество.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: У Вас нет дома.", thePlayer, 255, 0, 0)
		end
	end
end

function updatePlayerAccount( thePlayer, name, value )
	if(getElementData(thePlayer, "Login") == true) then
		local accid = tonumber(getElementData(thePlayer, "AccID"))
		dbExec(mysql, "UPDATE `Accounts` SET `" .. name .. "` = ? WHERE `ID` = ?", value, accid)
	end
end

function hitSkinShop( hit, dim )
	if(getElementType(hit) == "player") then
		if(getElementData(hit, "Login") == true) then
			local x, y, z = getElementPosition(source)
			local x1, y1, z1 = getElementPosition(hit)
			local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
			if(dist < 2) then
				triggerClientEvent(hit, "onPlayerEnterSkinShop", hit, SkinTable)
				setElementPosition(hit, 422.779296875, 1018.189453125, 18.92015838623)
				setElementRotation(hit, 0, 0, 0)
				toggleAllControls(hit, false)
				setElementDimension(hit, getElementData(hit, "ID"))
			end
		end
	end
end

function onPlayerSetSpawn(thePlayer, command)
	if(getElementData(thePlayer, "Login") == true) then
		showPlayerDialog(thePlayer, 78, 3, "Выбор спавна", "Место при появлении\nСтандартный спавн\nДом\nФракция", "Выбор", "Отмена")
	end
end

function onAdminJail( thePlayer, command, id, min, ... )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 1) then
			if(id ~= nil) then
				if(tonumber(id) ~= nil) then
					id = math.round(id)
					if(min ~= nil) then
						if(tonumber(min) ~= nil) then
							min = math.round(min)
							local arg = {...}
							local a = #arg
							if(a > 0) then
								local reason = table.concat(arg, " ")
								if(min > 0 and min <= 180) then
									if(IDS[id] ~= nil) then
										local secPlayer = IDS[id]
										if(getElementData(secPlayer, "Login") == true) then
											if(secPlayer ~= thePlayer) then
												SED(secPlayer, "PoliceJail", min * 60)
												addBox("Вы посадили игрока " .. getElementData(secPlayer, "Name") .. "\nНа " .. min .. " мин.", thePlayer, 255, 255, 0)
												addBox("Вы были посажены в тюрьму на " .. min .. " минут.", secPlayer, 255, 255, 0)
												sendClientMessage("Администратор " .. getElementData(thePlayer, "Name") .. " посадил игрока " .. getElementData(secPlayer, "Name") .. "(" .. id .. ") на " .. min .. " мин.", getRootElement(), 255, 60, 0)
												sendClientMessage("Причина: " .. reason, getRootElement(), 255, 60, 0)
												setPlayerWantedLevel(secPlayer, 0)
												updatePlayerAccount(secPlayer, "Wanted", 0)
												updatePlayerAccount(secPlayer, "PoliceJail", min * 60)
												customSpawnPlayer(secPlayer)
											else
												addBox("Ошибка: Вы не можете посадить себя.", thePlayer, 255, 0, 0)
											end
										else
											addBox("Ошибка: Данный игрок не авторизован.", thePlayer, 255, 0, 0)
										end
									else
										addBox("Ошибка: Данный игрок не найден.", thePlayer, 255, 0, 0)
									end
								elseif(min == 0) then
									if(IDS[id] ~= nil) then
										local secPlayer = IDS[id]
										if(getElementData(secPlayer, "Login") == true) then 
											if(getElementData(secPlayer, "PoliceJail") > 0) then
												if(secPlayer ~= thePlayer) then
													removeElementData(secPlayer, "PoliceJail")
													addBox("Вы были освобождены досрочно.", secPlayer, 0, 100, 255)
													addBox("Вы освободили игрока " .. getElementData(secPlayer, "Name"), thePlayer, 0, 100, 255)
													updatePlayerAccount(secPlayer, "Wanted", 0)
													updatePlayerAccount(secPlayer, "PoliceJail", 0)
													customSpawnPlayer(secPlayer)
												else
													addBox("Ошибка: Вы не можете освободить себя", thePlayer, 255, 0, 0)
												end
											else
												addBox("Ошибка: Данный игрок не находится в тюрьме.", thePlayer, 255, 0, 0)
											end
										else
											addBox("Ошибка: Данный игрок не авторизован.", thePlayer, 255, 0, 0)
										end
									else
										addBox("Ошибка: Данный игрок не найден.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Ошибка: Время указано некорректно.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: Причина не указана.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: Время указано неверно.", thePlayer, 255, 0, 0)
						end 
					else
						addBox("Ошибка: Время не указано.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: ID указан неверно.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: /jail [id] [min] [reason]", thePlayer, 255, 0, 0)
			end
		end
	end
end

function onAdminUnJail( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 2) then
			if(id ~= nil) then
				if(tonumber(id) ~= nil) then
					id = math.round(id)
					if(IDS[id] ~= nil) then
						local secPlayer = IDS[id]
						if(getElementData(secPlayer, "Login") == true) then
							if(getElementData(secPlayer, "PoliceJail") ~= false) then
								removeElementData(secPlayer, "PoliceJail")
								addBox("Вы были досрочно освобождены", secPlayer, 255, 255, 0)
								addBox("Вы досрочно освободили " .. getElementData(secPlayer, "Name") .. "(" .. id .. ")", secPlayer, 255, 255, 0)
								customSpawnPlayer(secPlayer)
								updatePlayerAccount(secPlayer, "PoliceJail", 0)
							else
								addBox("Ошибка: Данный игрок не находится в тюрьме.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: Данный игрок не авторизован.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: Данный игрок не найден.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: ID введен некорректно.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: Вы не ввели ID.", thePlayer, 255, 0, 0)
			end
		end
	end
end

function onPlayerUpSkill( weapon )
	if(getElementData(client, "Login") == true) then
		if(weapon == 1) then
			if(getElementData(client, "SkillDeagle") ~= 100) then
				local weaponskill = tonumber(getElementData(client, "SkillDeagle")) + 1
				local weaponid = 24
				if(weaponskill < 100) then
					if(weaponskill % 10 == 0) then
						SED(client, "SkillDeagle", weaponskill)
						addBox("Навык владения Desert Eagle повышен.", client, 0, 255, 100)
					end
				elseif(weaponskill == 100) then
					setPedStat(client, 71, 1000)
					SED(client, "SkillDeagle", 100)
					addBox("Навык владения Desert Eagle максимален.", client, 0, 255, 100)
				end
			end
		elseif(weapon == 2) then
			if(getElementData(client, "SkillShotgun") ~= 100) then
				local weaponskill = tonumber(getElementData(client, "SkillShotgun")) + 1
				local weaponid = 25
				if(weaponskill < 100) then
					if(weaponskill % 10 == 0) then
						SED(client, "SkillShotgun", weaponskill)
						addBox("Навык владения Shotgun повышен.", client, 0, 255, 100)
					end
				elseif(weaponskill == 100) then
					setPedStat(client, 72, 1000)
					SED(client, "SkillShotgun", 100)
					addBox("Навык владения Shotgun максимален.", client, 0, 255, 100)
				end
			end
		elseif(weapon == 3) then
			if(getElementData(client, "SkillAk47") ~= 100) then
				local weaponskill = tonumber(getElementData(client, "SkillAk47")) + 1
				local weaponid = 30
				if(weaponskill < 100) then
					if(weaponskill % 10 == 0) then
						SED(client, "SkillAk47", weaponskill)
						addBox("Навык владения Ak-47 повышен.", client, 0, 255, 100)
					end
				elseif(weaponskill == 100) then
					setPedStat(client, 77, 1000)
					SED(client, "SkillAk47", 100)
					addBox("Навык владения Ak-47 максимален.", client, 0, 255, 100)
				end
			end
		elseif(weapon == 4) then
			if(getElementData(client, "SkillM4") ~= 100) then
				local weaponskill = tonumber(getElementData(client, "SkillM4")) + 1
				local weaponid = 31
				if(weaponskill < 100) then
					if(weaponskill % 10 == 0) then
						SED(client, "SkillM4", weaponskill)
						addBox("Навык владения M4 повышен.", client, 0, 255, 100)
					end
				elseif(weaponskill == 100) then
					setPedStat(client, 78, 1000)
					SED(client, "SkillM4", 100)
					addBox("Навык владения M4 максимален.", client, 0, 255, 100)
				end
			end
		end
	end
end

function onAdminSetEat( thePlayer, command, id, eat )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 2) then
			if(id ~= nil) then
				if(eat ~= nil) then
					if(tonumber(id) ~= nil) then
						if(tonumber(eat) ~= nil) then
							id = math.round(id)
							eat = math.round(eat)
							if(IDS[id] ~= nil) then
								local secPlayer = IDS[id]
								if(getElementData(secPlayer, "Login") == true) then
									if(eat >= 0 and eat <= 100) then
										SED(secPlayer, "Food", eat)
										UpdateFood(secPlayer)
										addBox("Администратор изменил Вам сытость.", secPlayer, 0, 255, 100)
										addBox("Вы изменили сытость " .. getElementData(secPlayer, "Name"), thePlayer, 0, 255, 100)
									else
										addBox("Ошибка: Сытость может быть от 0 до 100", thePlayer, 255, 0, 0)
									end
								else
									addBox("Ошибка: Данный игрок не авторизован.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: Данный игрок не найден.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: Сытость введена некорректно.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: ID игрока введен некорректно.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: Вы не ввели сытость.", thePlayer, 255, 0, 0)
				end
			else
				addBox("/seteat [id] [процент сытости]", thePlayer, 255, 0, 0)
			end
		end
	end
end

function onPlayerFixCar( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "House") > 0) then
			local house = tonumber(getElementData(thePlayer, "House"))
			local id = tonumber(getElementData(thePlayer, "ID"))
			if(HouseTable[house]["hx"] ~= 0) then
				if(HouseTable[house]["Car"] > 0) then
					local veh = PrivateCar[id]
					if(isElement(veh) == true) then
						local vehid = getElementData(veh, "ID")
						for i, n in pairs(getVehicleOccupants(veh)) do
							removePedFromVehicle(n)
						end
						destroyElement(veh)
						VehicleTable[vehid] = nil
					end
					PrivateCar[id] = createVeh(HouseTable[house]["Car"], HouseTable[house]["vx"], HouseTable[house]["vy"], HouseTable[house]["vz"], 0, 0, HouseTable[house]["vrz"])
					SED(PrivateCar[id], "PrivatePlayer", id)
					addBox("Ваша машина успешно припаркована\nУ дома!", thePlayer, 0, 255, 100)
				else
					addBox("Ошибка: У Вас нет машины.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: У Вас нет гаража.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: У Вас нет дома.", thePlayer, 255, 0, 0)
		end
	end
end

function onClientFished( kg, name, arg3 )
	if(client ~= nil) then
		if(client == arg3) then
			if(getElementData(client, "Login") == true) then
				if(getElementData(client, "FishBoat") ~= false) then
					local veh = getElementData(client, "FishBoat")
					if(isElement(veh) == true) then
						local kgtemp = tonumber(getElementData(client, "FishKG"))
						if(kgtemp == nil) then
							kgtemp = kg
						else
							kgtemp = kgtemp + kg
						end
						SED(client, "FishKG", kgtemp)
						addBox("Вы успешно поймали:\n" .. name .. ", " .. kg .. " кг.\nНа лодке уже " .. kgtemp .. " кг.", client, 0, 255, 60)
					end
				end
			end
		end
	end
end

function modeStop( stoppedRes, wasDeleted )
	for i, n in pairs(IDS) do
		if(getElementData(n, "Login") == true) then
			local hun = getElementData(n, "Food")
			local hp = getElementHealth(n)
			local name = getElementData(n, "Name")
			if(hun ~= false) then
				dbExec(mysql, "UPDATE `Accounts` SET `Food` = ?, `Health` = ? WHERE `Name` = ?", hun, hp, name)
			end
		end
	end
end

function onClientTryBuySkin( check )
	local tid = check
	if(SkinTable[tid] ~= nil) then
		local skin = SkinTable[tid]["ID"]
		local price = SkinTable[tid]["Price"]
		if(tonumber(getElementData(client, "Money")) >= price) then
			addBox("Вы приобрели одежду.", client, 0, 255, 60)
			triggerClientEvent(client, "onClientSkinShopEnd", client, skin)
			setElementMoney(client, -price, "Покупка скина")
			updatePlayerAccount(client, "Skin", skin)
		else
			addBox("У Вас недостаточно денег для покупки.", client, 255, 0, 0)
		end
	else
		addBox("Произошла ошибка, повторите попытку.", client, 255, 0, 0)
	end
end

function onClientTryBuyCar( id )
	if(id <= table.getn(CarInfo)) then
		local price = CarInfo[id]["GosPrice"]
		if(price <= getElementData(client, "Money")) then
			local dom = tonumber(getElementData(client, "House"))
			if(dom > 0) then
				if(HouseTable[dom]["x"] ~= 0) then
					local veh = tonumber(HouseTable[dom]["Car"])
					if(veh == 0) then
						local listitem = id
						local price = CarInfo[listitem]["GosPrice"]
						if(price <= getElementData(client, "Money")) then
							HouseTable[dom]["Car"] = CarInfo[listitem]["ID"]
							setElementMoney(client, -CarInfo[listitem]["GosPrice"], "Покупка кар в магазине")
							dbExec(mysql, "UPDATE `House` SET `Car` = ? WHERE `ID` = ?", HouseTable[dom]["Car"], dom)
							local id = tonumber(getElementData(client, "ID"))
							PrivateCar[id] = createVeh(CarInfo[listitem]["ID"], HouseTable[dom]["vx"], HouseTable[dom]["vy"], HouseTable[dom]["vz"], 0, 0, HouseTable[dom]["vrz"])
							SED(PrivateCar[id], "PrivatePlayer", id)
							addBox("Приобретено: " .. CarInfo[listitem]["Name"] .. "\nСтоимость: " .. CarInfo[listitem]["GosPrice"] .. "$.", client, 0, 255, 100)
							triggerClientEvent(client, "onClientBoughtCar", client)
						else
							addBox("Ошибка:\nУ Вас недостаточно денег для покупки.", client, 255, 0, 0)
						end
					else
						addBox("Ошибка: У Вас уже есть машина.", client, 255, 0, 0)
					end
				else
					addBox("Ошибка: У Вас нет гаража.", client, 255, 0, 0)
				end
			else
				addBox("Ошибка: У Вас нет дома.", client, 255, 0, 0)
			end
		else
			addBox("Ошибка: У Вас недостаточно денег.", client, 255, 0, 0)
		end
	else
		addBox("Произошла ошибка, повторите попытку.", client, 255, 0, 0)
	end
end

function onPlayerReportFromMenu( text )
	local name = getElementData(client, "Name")
	local str = text
	str = "Жалоба от " .. name .. " (" .. getElementData(client, "ID") ..  "): " .. str
	addBox("Ваш запрос администрации отправлен", client, 255, 255, 0)
	for i, n in pairs(IDS) do
		if(getElementData(n, "Login") == true) then
			if(getElementData(n, "Admin") > 0) then
				sendClientMessage(str, n, 255, 240, 0)
			end
		end
	end
end

function onPlayerDonateServerTrade( mon )
	if(client == source) then
		if(mon ~= nil) then
			mon = tonumber(mon)
			mon = math.floor(mon)
			local don = tonumber(getElementData(client, "Donate"))
			if(mon > 0) then
				if(don >= mon) then
					don = don - mon
					local query = dbQuery(mysql, "SELECT `Donate` FROM `Accounts` WHERE `Name` = ?", getElementData(client, "Name"))
					local result = dbPoll(query, -1)
					if(result[1] ~= nil) then
						if(result[1]["Donate"] ~= nil) then
							local don = result[1]["Donate"] - mon
							setElementMoney(client, mon * 150, "Донат")
							addBox("Вы обменяли\n" .. mon .. " VC на " .. mon * 150 .. "$.", client, 0, 255, 60)
							SED(client, "Donate", don)
							updatePlayerAccount(client, "Donate", don)
							SED(client, "Donate", don)
						else
							addBox("Ошибка: У Вас недостаточно VC.", client, 255, 0, 0)
						end
					else
						addBox("Ошибка: У Вас недостаточно VC.", client, 255, 0, 0)
					end
					dbFree(query)
				else
					addBox("Ошибка: У Вас недостаточно VC.", client, 255, 0, 0)
				end
			else
				addBox("Ошибка: Вы не ввели сумму обмена.", client, 255, 0, 0)
			end
		end
	end
end

function onPlayersChangeNick( arg1, Namer )
	if(arg1 == client) then
		if(Namer ~= nil) then
			if(type(Namer) == "string") then
				if(Namer ~= "") then
					if(string.len(Namer) > 3 and string.len(Namer) < 21) then
						local query = dbQuery(mysql, "SELECT `Donate` FROM `Accounts` WHERE `Name` = ?", getElementData(client, "Name"))
						local result = dbPoll(query, -1)
						if(result[1] ~= nil) then
							if(result[1]["Donate"] ~= nil) then
								local don = result[1]["Donate"]
								if(don >= 25) then
									dbFree(query)
									query = dbQuery(mysql, "SELECT COUNT(*) FROM `Accounts` WHERE `Name` = ?", Namer)
									local result = dbPoll(query, -1)
									if(result[1] ~= nil) then
										addBox("Ошибка: Данный ник занят.", client, 255, 0, 0)
										if(result[1]["COUNT(*)"] > 0) then
											addBox("Ошибка: Данный ник занят.", client, 255, 0, 0)
										elseif(result[1]["COUNT(*)"] == 0) then
											don = don - 25
											SED(client, "Donate", don)
											updatePlayerAccount(client, "Donate", don)
											dbExec(mysql, "UPDATE `Accounts` SET `Name` = ? WHERE `Name` = ?", Namer, getElementData(client, "Name"))
											if(getElementData(client, "BusOwnID") > 0) then
												dbExec(mysql, "UPDATE `Business` SET `OwnerName` = ? WHERE `ID` = ?", Namer, getElementData(client, "BusOwnID"))
											end
											if(getElementData(client, "House") > 0) then
												dbExec(mysql, "UPDATE `House` set `PName` = ? WHERE `ID` = ?", Namer, getElementData(client, "House"))
											end
											kickPlayer(client, "Change name")
										end
									else
										addBox("Ошибка: Данный ник занят.", client, 255, 0, 0)
									end
								else
									addBox("Ошибка: У Вас недостаточно денег\nЧтобы сменить своё имя.", client, 255, 0, 0)
								end
							end
						end
						dbFree(query)
					end
				end
			end
		end
	end
end

function onPlayerBuyLicense( arg1, arg2 )
	if(client == arg1) then
		if(arg2 ~= nil) then
			if(type(arg2) == "number") then
				arg2 = math.floor(arg2)
				if(arg2 > 0 and arg2 < 4) then
					local query = dbQuery(mysql, "SELECT `Donate` from `Accounts` WHERE `Name` = ?", getElementData(client, "Name"))
					local result = dbPoll(query, -1)
					if(result ~= nil) then
						if(result[1] ~= nil) then
							if(result[1]["Donate"] ~= nil) then
								local don = result[1]["Donate"]
								if(don >= 50) then
									if(arg2 == 1) then
										if(getElementData(client, "AutoLicense") == 0) then
											don = don - 50
											dbExec(mysql, "UPDATE `Accounts` SET `AutoLicense` = 1, `Donate` = ? WHERE `Name` = ?", don, getElementData(client, "Name"))
											SED(client, "AutoLicense", 1)
											SED(client, "Donate", don)
											addBox("Вы успешно приобрели\nЛицензию на вождение.", client, 0, 255, 60)
										else
											addBox("Ошибка: У Вас уже есть права.", client, 255, 0, 0)
										end
									elseif(arg2 == 2) then
										addBox("В разработке.", client, 255, 0, 0)
									elseif(arg2 == 3) then
										if(getElementData(client, "WeaponLicense") == false) then
											don = don - 50
											dbExec(mysql, "UPDATE `Accounts` SET `WeaponLicense` = 1, `Donate` = ? WHERE `Name` = ?", don, getElementData(client, "Name"))
											SED(client, "WeaponLicense", true)
											SED(client, "Donate", don)
											addBox("Вы успешно приобрели\nЛицензию на оружие.", client, 0, 255, 60)
										else
											addBox("Ошибка: У Вас уже есть\nЛицензия на оружие.", client, 255, 0, 0)
										end
									end
								else
									addBox("Ошибка: У Вас недостаточно VC.", client, 255, 0, 0)
								end
							end
						end
					end
					dbFree(query)
				end
			end
		end
	end
end

function onPlayerDonateUnwarn( arg1 )
	if(client) then
		if(arg1 == client) then
			local query = dbQuery(mysql, "SELECT `Donate` from `Accounts` WHERE `Name` = ?", getElementData(client, "Name"))
			local result = dbPoll(query, -1)
			if(result ~= nil) then
				if(result[1] ~= nil) then
					if(result[1]["Donate"] ~= nil) then
						local don = result[1]["Donate"]
						if(don >= 75) then
							don = don - 75
							local warn = tonumber(getElementData(client, "Warn"))
							if(warn > 0) then
								warn = warn - 1
								dbExec(mysql, "UPDATE `Accounts` SET `Warn` = ?, `Donate` = ? WHERE `Name` = ?", warn, don, getElementData(client, "Name"))
								SED(client, "Warn", warn)
								SED(client, "Donate", don)
								addBox("Вы успешно сняли предупреждение.", client, 0, 255, 60)
							else
								addBox("Ошибка: У Вас нет предупреждений.", client, 255, 0, 0)
							end
						else
							addBox("Ошибка: У Вас недостаточно VC.", client, 255, 0, 0)
						end
					else
						addBox("Произошла системная ошибка.", client, 255, 0, 0)
					end
				else
					addBox("Произошла системная ошибка.", client, 255, 0, 0)
				end
			else
				addBox("Произошла системная ошибка.", client, 255, 0, 0)
			end
		end
	end
end

function onPlayerDonateSkills( arg1, arg2 )
	if(client) then
		if(client == arg1) then
			if(type(arg2) == "number") then
				arg2 = math.floor(arg2)
				if(arg2 > 0) then
					if(arg2 == 1) then
						if(getElementData(client, "SkillAk47") < 100) then
							local query = dbQuery(mysql, "SELECT `Donate` from `Accounts` WHERE `Name` = ?", getElementData(client, "Name"))
							local result = dbPoll(query, -1)
							if(result ~= nil) then
								if(result[1] ~= nil) then
									if(result[1]["Donate"] ~= nil) then
										if(result[1]["Donate"] >= 15) then
											local don = result[1]["Donate"]
											don = don - 15
											SED(client, "SkillAk47", 100)
											updatePlayerAccount(client, "SkillAk47", 100)
											updatePlayerAccount(client, "Donate", don)
											SED(client, "Donate", don)
											addBox("Вы успешно приобрели\nНавыки владением АК-47.", client, 0, 255, 60)
											setPedStat(client, 77, 100)
										else
											addBox("Ошибка: У Вас недостаточно VC.", client, 255, 0, 0)
										end
									else
										addBox("Произошла системная ошибка", client, 255, 0, 0)
									end
								else
									addBox("Произошла системная ошибка", client, 255, 0, 0)
								end
							else
								addBox("Произошла системная ошибка", client, 255, 0, 0)
							end
							dbFree(query)
						else
							addBox("Ошибка: У Вас уже есть данные навыки.", client, 255, 0, 0)
						end
					elseif(arg2 == 2) then
						if(getElementData(client, "SkillDeagle") < 100) then
							local query = dbQuery(mysql, "SELECT `Donate` from `Accounts` WHERE `Name` = ?", getElementData(client, "Name"))
							local result = dbPoll(query, -1)
							if(result ~= nil) then
								if(result[1] ~= nil) then
									if(result[1]["Donate"] ~= nil) then
										if(result[1]["Donate"] >= 15) then
											local don = result[1]["Donate"]
											don = don - 15
											SED(client, "SkillDeagle", 100)
											updatePlayerAccount(client, "SkillDeagle", 100)
											updatePlayerAccount(client, "Donate", don)
											SED(client, "Donate", don)
											addBox("Вы успешно приобрели\nНавыки владением Desert Eagle.", client, 0, 255, 60)
											setPedStat(client, 71, 100)
										else
											addBox("Ошибка: У Вас недостаточно VC.", client, 255, 0, 0)
										end
									else
										addBox("Произошла системная ошибка", client, 255, 0, 0)
									end
								else
									addBox("Произошла системная ошибка", client, 255, 0, 0)
								end
							else
								addBox("Произошла системная ошибка", client, 255, 0, 0)
							end
							dbFree(query)
						else
							addBox("Ошибка: У Вас уже есть данные навыки.", client, 255, 0, 0)
						end
					elseif(arg2 == 3) then
						if(getElementData(client, "SkillM4") < 100) then
							local query = dbQuery(mysql, "SELECT `Donate` from `Accounts` WHERE `Name` = ?", getElementData(client, "Name"))
							local result = dbPoll(query, -1)
							if(result ~= nil) then
								if(result[1] ~= nil) then
									if(result[1]["Donate"] ~= nil) then
										if(result[1]["Donate"] >= 15) then
											local don = result[1]["Donate"]
											don = don - 15
											SED(client, "SkillM4", 100)
											updatePlayerAccount(client, "SkillM4", 100)
											updatePlayerAccount(client, "Donate", don)
											SED(client, "Donate", don)
											addBox("Вы успешно приобрели\nНавыки владением M4.", client, 0, 255, 60)
											setPedStat(client, 78, 100)
										else
											addBox("Ошибка: У Вас недостаточно VC.", client, 255, 0, 0)
										end
									else
										addBox("Произошла системная ошибка", client, 255, 0, 0)
									end
								else
									addBox("Произошла системная ошибка", client, 255, 0, 0)
								end
							else
								addBox("Произошла системная ошибка", client, 255, 0, 0)
							end
							dbFree(query)
						else
							addBox("Ошибка: У Вас уже есть данные навыки.", client, 255, 0, 0)
						end
					elseif(arg2 == 4) then
						if(getElementData(client, "SkillShotgun") < 100) then
							local query = dbQuery(mysql, "SELECT `Donate` from `Accounts` WHERE `Name` = ?", getElementData(client, "Name"))
							local result = dbPoll(query, -1)
							if(result ~= nil) then
								if(result[1] ~= nil) then
									if(result[1]["Donate"] ~= nil) then
										if(result[1]["Donate"] >= 15) then
											local don = result[1]["Donate"]
											don = don - 15
											SED(client, "SkillShotgun", 100)
											updatePlayerAccount(client, "SkillShotgun", 100)
											updatePlayerAccount(client, "Donate", don)
											SED(client, "Donate", don)
											addBox("Вы успешно приобрели\nНавыки владением Shotgun.", client, 0, 255, 60)
											setPedStat(client, 72, 100)
										else
											addBox("Ошибка: У Вас недостаточно VC.", client, 255, 0, 0)
										end
									else
										addBox("Произошла системная ошибка", client, 255, 0, 0)
									end
								else
									addBox("Произошла системная ошибка", client, 255, 0, 0)
								end
							else
								addBox("Произошла системная ошибка", client, 255, 0, 0)
							end
							dbFree(query)
						else
							addBox("Ошибка: У Вас уже есть данные навыки.", client, 255, 0, 0)
						end
					elseif(arg2 == 5) then
						if(getElementData(client, "SkillFish") < 100) then
							local query = dbQuery(mysql, "SELECT `Donate` from `Accounts` WHERE `Name` = ?", getElementData(client, "Name"))
							local result = dbPoll(query, -1)
							if(result ~= nil) then
								if(result[1] ~= nil) then
									if(result[1]["Donate"] ~= nil) then
										if(result[1]["Donate"] >= 15) then
											local don = result[1]["Donate"]
											don = don - 15
											SED(client, "SkillFish", 100)
											updatePlayerAccount(client, "SkillFish", 100)
											updatePlayerAccount(client, "Donate", don)
											SED(client, "Donate", don)
											addBox("Вы успешно приобрели\nНавыки рыболовства.", client, 0, 255, 60)
										else
											addBox("Ошибка: У Вас недостаточно VC.", client, 255, 0, 0)
										end
									else
										addBox("Произошла системная ошибка", client, 255, 0, 0)
									end
								else
									addBox("Произошла системная ошибка", client, 255, 0, 0)
								end
							else
								addBox("Произошла системная ошибка", client, 255, 0, 0)
							end
							dbFree(query)
						else
							addBox("Ошибка: У Вас уже есть данные навыки.", client, 255, 0, 0)
						end
					end
				end
			end
		end
	end
end

function onPlayerBuySub( arg1, arg2 )
	if(client) then
		if(arg1 == client) then
			if(arg2 ~= nil) then
				arg2 = tonumber(arg2)
				if(arg2 ~= nil) then
					if(arg2 > 0 and arg2 < 5) then
						local query = dbQuery(mysql, "SELECT `Donate` from `Accounts` WHERE `Name` = ?", getElementData(client, "Name"))
						local result = dbPoll(query, -1)
						if(result ~= nil) then
							if(result[1] ~= nil) then
								if(result[1]["Donate"] ~= nil) then
									local don = result[1]["Donate"]
									if(don >= arg2 * 200) then
										if(getElementData(client, "VipType") <= arg2) then
											don = don - arg2 * 200
											SED(client, "Donate", don)
											updatePlayerAccount(client, "Donate", don)
											SED(client, "VipDay", 30)
											SED(client, "VipType", arg2)
											updatePlayerAccount(client, "VipDay", 30)
											updatePlayerAccount(client, "VipType", arg2)
											if(arg2 == 1) then
												addBox("Вы успешно приобрели\nБазовую подписку!", client, 0, 255, 60)
											elseif(arg2 == 2) then
												addBox("Вы успешно приобрели\nПродвинутую подписку!", client, 0, 255, 60)
											elseif(arg2 == 3) then
												addBox("Вы успешно приобрели\nРасширенную подписку!", client, 0, 255, 60)
											elseif(arg2 == 4) then
												addBox("Вы успешно приобрели\nПремиальную подписку!", client, 0, 255, 60)
											end
										else
											addBox("Ошибка: У Вас уже приобретена\nПодписка, выше выбранного уровня", client, 255, 0, 0)
										end
									else
										addBox("Ошибка: У Вас недостаточно денег\nДля покупки премиума.", client, 255, 0, 0)
									end
								end
							end
						end
						dbFree(query)
					end
				end
			end
		end
	end
end

function onPlayerTryPromo( arg1, arg2 )
	if(client) then
		if(arg1 == client) then
			if(type(arg2) == "string") then
				if(string.len(arg2) > 2 and string.len(arg2) < 25) then
					if(arg2 == "ZBT") then
						local query = dbQuery(mysql, "SELECT Count(*) FROM `Promo` WHERE `Name` = ?", getElementData(client, "Name"))
						local men = dbPoll(query, -1)
						if(men ~= nil) then
							if(men[1] ~= nil) then
								if(men[1]["Count(*)"] == 0) then
									setElementMoney(client, 5000000, "Промокод")
									addBox("Вы успешно ввели промокод.", client, 0, 60, 255)
									local time = getRealTime()
									dbExec(mysql, "INSERT INTO `Promo` (`Name`, `Promo`, `Day`, `Month`, `Year`) VALUES (?, ?, ?, ?, ?)", getElementData(client, "Name"), arg2, time.monthday, time.month + 1, time.year + 1900)
								else
									addBox("Вы уже вводили данный промокод.", client, 255, 0, 0)
								end
							else
								addBox("Произошла системная ошибка.", client, 255, 0, 0)
							end
						else
							addBox("Ошибка: Вы уже вводили промокод.", client, 255, 0, 0)
						end
						dbFree(query)
					end
				end
			end
		end
	end
end

function ebaniyrot(  thePlayer, command, ... )
	local arg = {...}
	setPedAnimation(thePlayer, arg[1], arg[2])
end

addCommandHandler("eban", ebaniyrot)

addEvent("onPlayerTryPromo", true)
addEventHandler("onPlayerTryPromo", root, onPlayerTryPromo)
addEventHandler("onResourceStop", resourceRoot, modeStop)
addCommandHandler("fixcar",	onPlayerFixCar)
addCommandHandler("seteat", onAdminSetEat)
addCommandHandler("unjail", onAdminUnJail)
addCommandHandler("jail", onAdminJail)
addCommandHandler("setspawn", onPlayerSetSpawn)
addCommandHandler("hpay", onPlayerHPay)
addEventHandler("onMarkerHit", mrkSkinShop,	hitSkinShop)
addEventHandler("onMarkerHit", mrkWeaponMaf1, hitWeapMaf1)
addEventHandler("onMarkerHit", mrkWeaponMaf2, hitWeapMaf2)
addEventHandler("onMarkerHit", mrkWeaponMaf3, hitWeapMaf3)
addEventHandler("onMarkerHit", mrkWeaponMaf4, hitWeapMaf4)
addEventHandler("onMarkerHit", mrkWeaponArmy, hitWeaponArmy)
addEventHandler("onMarkerLeave", mrkWeaponArmy, leaveWeaponArmy)
addEvent("onPlayerBuySub", true) 
addEventHandler("onPlayerBuySub", root, onPlayerBuySub)
addEvent("onPlayerDonateSkills", true)
addEventHandler("onPlayerDonateSkills", root, onPlayerDonateSkills)
addEvent("onPlayerDonateUnwarn", true)
addEventHandler("onPlayerDonateUnwarn", root, onPlayerDonateUnwarn)
addEvent("onPlayerBuyLicense", true)
addEventHandler("onPlayerBuyLicense", root, onPlayerBuyLicense)
addEvent("onPlayersChangeNick", true)
addEventHandler("onPlayersChangeNick", root, onPlayersChangeNick)
addEvent("onPlayerDonateServerTrade", true)
addEventHandler("onPlayerDonateServerTrade", root, onPlayerDonateServerTrade)
addEvent("onPlayerReportFromMenu", true)
addEventHandler("onPlayerReportFromMenu", root, onPlayerReportFromMenu)
addEvent("onClientTryBuyCar", true) 
addEventHandler("onClientTryBuyCar", root, onClientTryBuyCar)
addEvent("onClientTryBuySkin", true)
addEventHandler("onClientTryBuySkin", root, onClientTryBuySkin)
addEvent("onClientFished", true)
addEventHandler("onClientFished", root, onClientFished)
addEvent("onPlayerUpSkill", true)
addEventHandler("onPlayerUpSkill", root, onPlayerUpSkill)
addEvent("AdminTriggerDamage", true)
addEventHandler("AdminTriggerDamage", root, onPlayerTriggerAdminDamage)
addEvent("BuilderEndGruz", true)
addEventHandler("BuilderEndGruz", root, BuilderEndGruz)
addEvent("ClearBuilderGruz", true)
addEventHandler("ClearBuilderGruz", root, ClearBuilderGruz)
addEvent("BuilderZP", true)
addEventHandler("BuilderZP", root, BuilderZp)
addEvent("Avtorizovalsya", true)
addEventHandler("Avtorizovalsya", root, Avtorizovalsya)
addEvent("Regaru", true)
addEventHandler("Regaru", root, Regaru)
addEvent("sendClientMessage", true)
addEventHandler("sendClientMessage", root, sendClientMessage)
addEvent("mrkBuildStart", true)
addEventHandler("mrkBuildStart", root, mrkBuildStart)
addEventHandler("onPlayerCommand", root, onPlayerCommand)
addEventHandler("onChooseSpawn", root, chooseSpawn)
addEventHandler( "onLeftSpawn", root, leftSpawn)
addEventHandler("onLeftPerson", root, rightPerson)
addEventHandler( "onRightPerson", root, rightPerson)
addEventHandler ( "onRightSpawn", root, rightSpawn)
addEventHandler ( "onPlayerQuit", root, onPlayerDisconnect )
addEventHandler("onPlayerPickupHit", root, pickupPickUp)
addEventHandler("OnStartWorkingLoader", root, StartWorkingLoader)
addEventHandler("OnEndWorkingLoader", root, EndWorkingLoader)
addEventHandler("OnLoaderEnd", root, LoaderEnd)
addEventHandler("OnLoaderStart", root, LoaderStart)
addEventHandler("onPlayerVehicleEnter", root, havelic)
addEventHandler("onVehicleStartEnter", root, clearEnter)
addEventHandler("onPlayerChat", root, playerInChat)
addEventHandler("onCourierWorkStart", root, startCourierWork)
addEventHandler("onVehicleExplode", root, onVehicleDeath )
addEventHandler("onCourierOrderEnd", root, onCourierOrderEnd)
addEventHandler("onResourceStart", root, updateTime)
addEventHandler("onDialogResponse", root, onDialogResponse)
addEventHandler("onPlayerJoin", getRootElement(), onPlayerConnect)
addEventHandler( "onPlayerWasted", root, onPlayerDeath)
addEventHandler("onClientLoginStart", root, onClientLoginStart)
addEventHandler("onMarkerHit", mrkWorkMer, onWorkMer)
addEventHandler("onMarkerHit", mrkAsh, hitMrkAsh)
addEventHandler("onVehicleExit", root, onPlayerExitVehicle)
addEventHandler("onMarkerHit", mrkBuyCar, hitBuyCar)
setFPSLimit(60)

function setPlayerCamHackEnabled( thePlayer, state )
	return triggerClientEvent( thePlayer,"onClientEnableCamMode", root, state )
end

function setPlayerCamHackDisabled( thePlayer )
	return triggerClientEvent( thePlayer,"onClientDisableCamMode", root )
end

addEventHandler( "onResourceStop", resourceRoot, 
	function( )
		for i,thePlayer in pairs( getElementsByType( "player" ) ) do
			if getElementData( thePlayer, "isPlayerInCamHackMode" ) then 
				setElementAlpha( thePlayer, 255 )
				setElementFrozen( thePlayer, false ) 
				setElementCollisionsEnabled( thePlayer, true ) 	
			end
		end
	end
)

addCommandHandler( "camhack", 
	function( thePlayer )
		if(getElementData(thePlayer, "Login") == true) then
			if(getElementData(thePlayer, "Admin") > 3) then
				if isPedInVehicle( thePlayer ) then
					if getVehicleOccupant( getPedOccupiedVehicle( thePlayer ) ) ~= thePlayer then
						if getElementData( thePlayer, "isPlayerInCamHackMode" ) then 
							setElementAlpha( thePlayer, 255 )
							setPlayerCamHackDisabled( thePlayer )
						else
							setElementAlpha( thePlayer, 0 )
							setPlayerCamHackEnabled( thePlayer, false )
						end
					end
				else
					if getElementData( thePlayer, "isPlayerInCamHackMode" ) then 
						setElementAlpha( thePlayer, 255 )
						setPlayerCamHackDisabled( thePlayer )
						setElementFrozen( thePlayer, false ) 
						setElementCollisionsEnabled( thePlayer, true ) 		
					else
						setElementAlpha( thePlayer, 0 )
						setPlayerCamHackEnabled( thePlayer, true )
						setElementFrozen( thePlayer, true ) 
						setElementCollisionsEnabled( thePlayer, false ) 			
					end
				end
			end
		end
	end
)