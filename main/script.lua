dbType = "mysql"
dbData = "dbname=MTAVC2;host=localhost;port=32514;charset=utf8"
dbLogin = "0Kirill"
dbPass = "MY_Super3002PassForKirill "

mysql = dbConnect(dbType, dbData, dbLogin, dbPass)

vehicleIDS = {
    602, 545, 496, 517, 401, 410, 518, 600, 527, 436, 589, 580, 419, 439, 533, 549, 526, 491, 474, 445, 467, 604, 426, 507, 547, 585, 405, 587,
    409, 466, 550, 492, 566, 546, 540, 551, 421, 516, 529, 592, 553, 577, 488, 511, 497, 548, 563, 512, 476, 593, 447, 425, 519, 520, 460, 417,
    469, 487, 513, 581, 510, 509, 522, 481, 461, 462, 448, 521, 468, 463, 586, 472, 473, 493, 595, 484, 430, 453, 452, 446, 454, 485, 552, 431,
    438, 437, 574, 420, 525, 408, 416, 596, 433, 597, 427, 599, 490, 432, 528, 601, 407, 428, 544, 523, 470, 598, 499, 588, 609, 403, 498, 514,
    524, 423, 532, 414, 578, 443, 486, 515, 406, 531, 573, 456, 455, 459, 543, 422, 583, 482, 478, 605, 554, 530, 418, 572, 582, 413, 440, 536,
    575, 534, 567, 535, 576, 412, 402, 542, 603, 475, 449, 537, 538, 570, 441, 464, 501, 465, 564, 568, 557, 424, 471, 504, 495, 457, 539, 483,
    508, 571, 500, 444, 556, 429, 411, 541, 559, 415, 561, 480, 560, 562, 506, 565, 451, 434, 558, 494, 555, 502, 477, 503, 579, 400, 404, 489,
    505, 479, 442, 458, 606, 607, 610, 590, 569, 611, 584, 608, 435, 450, 591, 594
}

function outputBug() 
  outputConsole("бд не обнаружена");
end

function getDBProxy(func) 
  if(mysql ~= false) then
    return func
  end 
  return outputBug;
end

dbPoll = getDBProxy(dbPoll)
dbQuery = getDBProxy(dbQuery)
dbFree = getDBProxy(dbFree)
dbExec = getDBProxy(dbExec)

local VehHandling 		=	{}
local TimerMenu			=	{}

function toch( ch )
	if(tonumber(ch) ~= nil) then
		ch = tonumber(ch)
		ch = math.floor(ch)
		return ch
	else
		return nil
	end
end

local ColorTable = {}
local coefmoney = 1
local maxquery = 0

if(mysql ~= false) then
  local id = dbQuery(mysql, "SELECT `ID` from `MoneyLogs` ORDER BY `ID` DESC LIMIT 0, 1")
  local result = dbPoll(id, -1)
  if(result ~= nil) then
    if(result[1] ~= nil) then
      maxquery = result[1]["ID"] + 1
    else
      maxquery = 0
    end
  else
    maxquery = 0
  end

  local aid = dbQuery(mysql, "SELECT `ID` from `alllogs` ORDER BY `ID` DESC LIMIT 0, 1")
  local result = dbPoll(aid, -1)
  if(result ~= nil) then
    if(result[1] ~= nil) then
      if(result[1]["ID"] ~= nil) then
        aid = result[1]["ID"]
      else
        aid = 1
      end
    else
      aid = 1
    end
  else
    aid = 1
  end

  for n, i in pairs(vehicleIDS) do
    local HQ = dbQuery(mysql, "SELECT * FROM `HModel` WHERE `ID` = ?", i)
    local result = dbPoll(HQ, -1)
    if(result ~= nil) then
      if(result[1] ~= nil) then
        for k, d in pairs(result) do
          if(VehHandling[d["ID"]] == nil) then
            VehHandling[d["ID"]] = {}
          end
          if(d["Property"] ~= "com1" and d["Property"] ~= "com2" and d["Property"] ~= "com3" and d["Property"] ~= "modelFlags" and d["Property"] ~= "handlingFlags") then
            if(VehHandling[d["ID"]] == nil) then
              VehHandling[d["ID"]] = {}
            end
            VehHandling[d["ID"]][d["Property"]] = d["Value"]
            local check = setModelHandling(d["ID"], d["Property"], d["Value"])
          elseif(d["Property"] == "modelFlags") then
            if(VehHandling[d["ID"]] == nil) then
              VehHandling[d["ID"]] = {}
            end
            VehHandling[d["ID"]][d["Property"]] = toch("0x" .. d["Value"])
          elseif(d["Property"] == "handlingFlags") then
            if(VehHandling[d["ID"]] == nil) then
              VehHandling[d["ID"]] = {}
            end
            VehHandling[d["ID"]][d["Property"]] = toch("0x" .. d["Value"])
          else
            if(VehHandling[d["ID"]] == nil) then
              VehHandling[d["ID"]] = {}
            end
            local tablo = getModelHandling(d["ID"])
            if(d["Property"] == "com1") then
              VehHandling[d["ID"]][d["Property"]] = d["Value"]
            elseif(d["Property"] == "com2") then
              VehHandling[d["ID"]][d["Property"]] = d["Value"]
            elseif(d["Property"] == "com3") then
              VehHandling[d["ID"]][d["Property"]] = d["Value"]
            end
          end
        end
      end
    end
    dbFree(HQ)
  end
end

function msgforcamera( msg, thePlayer, r, g, b, x, y, z, dist, fact)
	triggerClientEvent(thePlayer, "msgforcamera", thePlayer, msg, x, y, z, r, g, b, dist, fact)
end


local AshTimer			=	{}
local VehicleTable 		=	{}
local maxveh			=  	0
local objeect 			= 	{}
local MailVeh 			= 	{}
local mrkBusiness		=	{}
local PlayerTable		=	{}
local PObject 			=	{}
local OrderBiz			=	{}
local Capt 				= 	false
local PhoneObject		=	{}
local timura			=	{}
local text3dTable		=	{}
local attached3dtext	=	{}
local IDS 				= 	{}
local PromoTable		=	{}
local PTTimer			=	{}
local TimerCourier		=	{}
local TaxiTimer			=	{}
local TaxiAbuseTimer	=	{}
local PlayerBusTimer	=	{}
local afktimer			=	{}
local vehRentTimer		=	{}
local mrkWeaponMag		=	{}
local PCar 				=	{}
local AdmVeh			=	{}
local PayTimer			=	{}
local fishobj 			=	{}
local rentVehTable 		=	{}
local rentTimer			=	{}
local FloodTable		=	{}
local MatObject			= 	{}
local mrkWeaponMaf 		= 	{}
local FactOpenSkl		=	{}
local AFOS 				=	{}
local ZakazTaxi			=	{}
local ZakazPolice		=	{}
local ZakazEms			=	{}
local rentVehInfo		=	{}
local ServerPerem		=	{}
ServerPerem["Donate"] 	=	200
ServerPerem["Reports"]	=	{}
local mrkchello			= 	createMarker(-662.0888671875, -1414.3330078125, 10.16068649292, "cylinder", 2, 220, 0, 0, 220, getRootElement())
local mrkArmySkl		=	createMarker(-1646.451171875, -267.474609375, 13.827548980713, "cylinder", 2, 220, 0, 0, 220, getRootElement())
local mrkPoliceSkl		=	createMarker(-889.677734375, -701.314453125, 10.153549194336, "cylinder", 2, 220, 0, 0, 220, getRootElement())
local mrkHospitalSkl	=	createMarker(-177.2509765625, -983.19921875, 9.423469543457, "cylinder", 2, 220, 0, 0, 220, getRootElement())
local BusPriceMaf		=	25
local WeaponTable		=
{
	[24] = "Desert Eagle",
	[25] = "Shotgun",
	[30] = "Ak-47",
	[31] = "M4"
}

local mrkSklFaction		=	
{
	[8]	= {	["x"]=490.697265625, ["y"]=529.041015625, ["z"]=11.534009933472	}
}

for i=1,4 do
	FactOpenSkl[i] = true
end

for i=1,4 do
	AFOS[i] = true
end

local CaptCoord = 
{
	[1] = {["minx"]=-1325.7734375,	["miny"]=8.0048828125, 		["maxx"]=-1228.1591796875,	["maxy"]=181.9736328125	},
	[2] = {["minx"]=691.9453125, 	["miny"]=622.4560546875, 	["maxx"]=872.302734375, 	["maxy"]=940.48046875 	},
	[3] = {["minx"]=-118.2236328125,["miny"]=843.2451171875, 	["maxx"]=1.1494140625, 		["maxy"]=1041.9296875	}
}
local radararea = {}
for i,n in pairs(CaptCoord) do
	radararea[i] = createRadarArea(n["minx"], n["miny"], n["maxx"] - n["minx"], n["maxy"] - n["miny"], 120, 120, 120, 180, getRootElement())
end

for i, n in pairs(getElementsByType("player")) do
	local data = getAllElementData(n)
	for k, v in pairs(data) do
		if(k ~= "ID" and k ~= "Name") then
			removeElementData(n, k, v)
		end
	end
end

local GPSRent =
{
	[1]={["x"]=317.9892578125,		["y"]=1217.65234375, 	["z"]=17.46044921875},
	[2]={["x"]=-1170.3701171875, 	["y"]=-944.3173828125, 	["z"]=14.82617568969},
	[3]={["x"]=-396.2041015625, 	["y"]=909.560546875, 	["z"]=10.81372833252}
}

local rentCarVeh 		=	
{
	[1] = 
	{
		[1]=	{ ["x"] = 338.001953125,	["y"]=1228.1034375, 	["z"]=18.016465759277, ["Rot"]=270,	["Model"]=492, ["Price"]=250 	},
		[2]=	{ ["x"] = 338.001953125, 	["y"]=1220.4765625, 	["z"]=18.015149688721, ["Rot"]=270,	["Model"]=562, ["Price"]=360 	},
		[3]=	{ ["x"] = 338.001953125,	["y"]=1211.02578125, 	["z"]=18.015315628052, ["Rot"]=270,	["Model"]=545, ["Price"]=190 	},
		[4]=	{ ["x"] = 338.001953125, 	["y"]=1201.56640625, 	["z"]=18.016969299316, ["Rot"]=270,	["Model"]=405, ["Price"]=320 	},
		[5]=	{ ["x"] = 338.001953125, 	["y"]=1191.8447265625, 	["z"]=18.015510177612, ["Rot"]=270,	["Model"]=540, ["Price"]=660 	},
		[6]=	{ ["x"] = 338.001953125, 	["y"]=1182.427734375, 	["z"]=18.016595458984, ["Rot"]=270,	["Model"]=547, ["Price"]=360 	},
		[7]=	{ ["x"] = 338.001953125, 	["y"]=1175.6669921875, 	["z"]=18.016669845581, ["Rot"]=270,	["Model"]=445, ["Price"]=600 	},
		[8]=	{ ["x"] = 347.048828125, 	["y"]=1228.294921875, 	["z"]=21.008555603027, ["Rot"]=90,	["Model"]=410, ["Price"]=440 	},
		[9]=	{ ["x"] = 347.048828125,	["y"]=1221.154296875, 	["z"]=21.008555603027, ["Rot"]=90,	["Model"]=527, ["Price"]=370 	},
		[10]=	{ ["x"] = 347.048828125, 	["y"]=1212.00390625, 	["z"]=21.008555603027, ["Rot"]=90,	["Model"]=603, ["Price"]=1200 	},
		[11]=	{ ["x"] = 347.048828125, 	["y"]=1202.88671875, 	["z"]=21.008555603027, ["Rot"]=90,	["Model"]=492, ["Price"]=250 	},
		[12]=	{ ["x"] = 347.048828125, 	["y"]=1191.7353515625, 	["z"]=21.008555603027, ["Rot"]=90,	["Model"]=562, ["Price"]=360 	},
		[13]=	{ ["x"] = 347.048828125, 	["y"]=1183.3125, 		["z"]=21.008555603027, ["Rot"]=90,	["Model"]=545, ["Price"]=190 	},
	},
	[3] = 
	{
		[1]  = {["x"]=-1151.6259785625, ["y"]=-929.443359375, 	["z"]=14.526175689697, ["Rot"]=90, ["Model"]=492, ["Price"]= 250	},
		[2]  = {["x"]=-1151.6259785625, ["y"]=-939.771484375, 	["z"]=14.526175689697, ["Rot"]=90, ["Model"]=562, ["Price"]= 360	},
		[3]  = {["x"]=-1151.6259785625, ["y"]=-949.19140625, 	["z"]=14.526175689697, ["Rot"]=90, ["Model"]=545, ["Price"]= 190	},
		[4]  = {["x"]=-1151.6259785625, ["y"]=-959.4189453125, 	["z"]=14.526175689697, ["Rot"]=90, ["Model"]=405, ["Price"]= 320	},
		[5]  = {["x"]=-1132.6259785625, ["y"]=-976.5478515625, 	["z"]=14.526175689697, ["Rot"]=90, ["Model"]=540, ["Price"]= 660	},
		[6]  = {["x"]=-1151.6259785625, ["y"]=-979.6787109375, 	["z"]=14.526175689697, ["Rot"]=90, ["Model"]=547, ["Price"]= 360	},
		[7]  = {["x"]=-1151.6259785625, ["y"]=-989.025390625, 	["z"]=14.526175689697, ["Rot"]=90, ["Model"]=445, ["Price"]= 600	},
		[8]  = {["x"]=-1132.6259785625, ["y"]=-926.9091796875, 	["z"]=14.526175689697, ["Rot"]=90, ["Model"]=410, ["Price"]= 440	},
		[9]  = {["x"]=-1132.6259785625, ["y"]=-936.37890625, 	["z"]=14.526175689697, ["Rot"]=90, ["Model"]=527, ["Price"]= 370	},
		[10] = {["x"]=-1132.6259785625, ["y"]=-946.66015625, 	["z"]=14.526175689697, ["Rot"]=90, ["Model"]=603, ["Price"]= 1200	},
		[11] = {["x"]=-1132.6259785625, ["y"]=-956.5693359375, 	["z"]=14.526175689697, ["Rot"]=90, ["Model"]=492, ["Price"]= 250	},
		[12] = {["x"]=-1132.6259785625, ["y"]=-966.50390625, 	["z"]=14.526175689697, ["Rot"]=90, ["Model"]=562, ["Price"]= 360	}
	},
	[4] = 
	{
		[1] = { ["x"] = -404.71875,	["y"] = 921.3955078125, ["z"] = 11.01372833252,	["Rot"]=335, ["Model"]=492, ["Price"]=250	},
		[2] = { ["x"] = -400.71875,	["y"] = 919.82421875, 	["z"] = 11.01372833252,	["Rot"]=335, ["Model"]=562, ["Price"]=360	},
		[3] = { ["x"] = -396.71875,	["y"] = 918.4130859375, ["z"] = 11.01372833252,	["Rot"]=335, ["Model"]=545, ["Price"]=190	},
		[4] = { ["x"] = -392.71875,	["y"] = 916.375, 		["z"] = 11.01372833252,	["Rot"]=335, ["Model"]=405, ["Price"]=320	},
		[5] = { ["x"] = -388.71875,	["y"] = 914.50390625, 	["z"] = 11.01372833252,	["Rot"]=335, ["Model"]=540, ["Price"]=660	},
		[6] = { ["x"] = -384.71875,	["y"] = 912.3564453125, ["z"] = 11.01372833252,	["Rot"]=335, ["Model"]=547, ["Price"]=360	},
		[7] = { ["x"] = -380.71875,	["y"] = 910.5029296875, ["z"] = 11.01372833252,	["Rot"]=335, ["Model"]=445, ["Price"]=600	},
		[8] = { ["x"] = -376.71875,	["y"] = 909.0341796875, ["z"] = 11.01372833252,	["Rot"]=335, ["Model"]=410, ["Price"]=440	},
		[9] = { ["x"] = -372.71875,	["y"] = 907.3564453125, ["z"] = 11.01372833252,	["Rot"]=335, ["Model"]=527, ["Price"]=370	}
	}
}

ServerPerem["MechSpawns"] = 
{
	[1]	 = {	["x"]=337.18359375,		["y"]=1227.791015625,	["z"]=22.709907531738,		},
	[2]	 = {	["x"]=337.2763671875,	["y"]=1219.7412109375,	["z"]=22.709907531738,		},
	[3]	 = {	["x"]=337.166015625,	["y"]=1209.4482421875,	["z"]=22.709907531738,		},
	[4]	 = {	["x"]=337.0869140625,	["y"]=1201.556640625,	["z"]=22.709907531738,		},
	[5]	 = {	["x"]=337.009765625,	["y"]=1193.8017578125,	["z"]=22.709907531738,		},
	[6]	 = {	["x"]=336.9306640625,	["y"]=1185.8505859375,	["z"]=22.709907531738,		},
	[7]	 = {	["x"]=308.88671875,		["y"]=1157.14453125,	["z"]=22.709907531738,		},
	[8]	 = {	["x"]=308.8896484375,	["y"]=1166.48828125,	["z"]=22.709907531738,		},
	[9]	 = {	["x"]=308.9716796875,	["y"]=1177.23828125,	["z"]=22.709907531738,		},
	[10] = {	["x"]=308.607421875,	["y"]=1186.3408203125,	["z"]=22.709907531738,		},
	[11] = {	["x"]=308.6337890625,	["y"]=1192.322265625,	["z"]=22.709907531738,		},
	[12] = {	["x"]=308.6796875, 		["y"]=1203.015625,		["z"]=22.717222213745,		},
	[13] = {	["x"]=308.7216796875,	["y"]=1212.5478515625,	["z"]=23.346431732178,		},
	[14] = {	["x"]=308.7744140625,	["y"]=1224.8125,		["z"]=22.717222213745,		},
	[15] = {	["x"]=308.8115234375,	["y"]=1233.017578125,	["z"]=23.477699279785,		},
	[16] = {	["x"]=309.43359375,		["y"]=1245.1376953125,	["z"]=22.71457862854,		},
	[17] = {	["x"]=309.6123046875,	["y"]=1254.052734375,	["z"]=22.719106674194,		},
}

ServerPerem["Stols"] = 
{
	[1] = {["Sost"]=0, ["Players"]={}, ["Label"]=0},
	[2] = {["Sost"]=0, ["Players"]={}, ["Label"]=0},
	[3] = {["Sost"]=0, ["Players"]={}, ["Label"]=0},
	[4] = {["Sost"]=0, ["Players"]={}, ["Label"]=0},
	[5] = {["Sost"]=0, ["Players"]={}, ["Label"]=0}
}

ServerPerem["MechCars"] = 
{
	[1]		=	{["x"]=485.2861328125, 		["y"]=530.2705078125, 	["z"]=11.331716537476, ["rx"]=359.384765625, 	["ry"]=0.2032470703125, ["rz"]=180.543823242187	},
	[2]		=	{["x"]=332.8515625, 		["y"]=444.443359375, 	["z"]=11.193929672241, ["rx"]=353.83117675781, 	["ry"]=359.40124511719, ["rz"]=255.102783203125	},
	[3]		=	{["x"]=17.494140625, 		["y"]=163.529296875, 	["z"]=18.996671676636, ["rx"]=359.96154785156, 	["ry"]=0.0054931640625, ["rz"]=131.92932128906	},
	[4]		=	{["x"]=-1010.1357421875, 	["y"]=138.298828125, 	["z"]=10.602199554443, ["rx"]=351.11755371094, 	["ry"]=352.75451660156, ["rz"]=183.32336425781	},
	[5]		=	{["x"]=-1042.2138671875, 	["y"]=178.23046875, 	["z"]=10.991556167603, ["rx"]=0.0164794921875, 	["ry"]=359.99450683594, ["rz"]=267.53356933594	},
	[6]		=	{["x"]=-1004.3037109375, 	["y"]=227.8837890625, 	["z"]=10.991691589355, ["rx"]=359.9560546875, 	["ry"]=359.98901367188, ["rz"]=356.94580078125	},
	[7]		=	{["x"]=-873.8251953125, 	["y"]=341.3544921875, 	["z"]=10.989148139954, ["rx"]=0.0164794921875, 	["ry"]=359.99450683594, ["rz"]=181.64245605469	},
	[8]		=	{["x"]=-821.5908203125, 	["y"]=493.1298828125,	["z"]=10.656383514404, ["rx"]=0.0274658203125, 	["ry"]=359.99450683594, ["rz"]=91.318359375		},
	[9]		=	{["x"]=-566.3388671875, 	["y"]=997.76953125, 	["z"]=10.809536933899, ["rx"]=0.0164794921875, 	["ry"]=359.99450683594, ["rz"]=177.78625488281	},
	[10] 	=	{["x"]=-586.056640625,		["y"]=1247.0986328125, 	["z"]=10.808488845825, ["rx"]=0.0164794921875, 	["ry"]=359.99450683594, ["rz"]=180.94482421875	},
	[11] 	=	{["x"]=-174.044921875,		["y"]=-1008.0263671875, ["z"]=10.197889328003, ["rx"]=359.71435546875, 	["ry"]=359.99450683594, ["rz"]=18.402099609375	},
	[12] 	=	{["x"]=-1691.2275390625,	["y"]=-654.6572265625, 	["z"]=14.622596740723, ["rx"]=359.85717773438, 	["ry"]=359.99450683594, ["rz"]=0.9393310546875	},
	[13] 	=	{["x"]=-830.0966796875,		["y"]=-1256.712890625, 	["z"]=11.468477249146, ["rx"]=3.988037109375, 	["ry"]=359.52758789063, ["rz"]=336.39038085938	},
	[14]	=	{["x"]=-917.33984375, 		["y"]=999.298828125, 	["z"]=10.823314666748, ["rx"]=359.86267089844,	["ry"]=0.0054931640625, ["rz"]=180.00024414063	},
	[15]	=	{["x"]=-775.1240234375, 	["y"]=1284.83203125, 	["z"]=11.476740837097, ["rx"]=359.85717773438,	["ry"]=359.95056152344, ["rz"]=90.13806152344	},
	[16]	=	{["x"]=-1074.6611328125, 	["y"]=1279.046875, 		["z"]=8.4774055480957, ["rx"]=359.87365722656,	["ry"]=359.98901367188, ["rz"]=180.67041015625	},
	[17]	=	{["x"]=-766.7412109375, 	["y"]=145.0517578125, 	["z"]=10.755392074585, ["rx"]=0.4888916015625,	["ry"]=0.02197265625,	["rz"]=257.11303710938	},
	[18]	=	{["x"]=-769.609375, 		["y"]=123.1494140625, 	["z"]=10.760381698608, ["rx"]=0.4888916015625,	["ry"]=359.98901367188, ["rz"]=260.17272949219	},
	[19]	=	{["x"]=-974.0078125,		["y"]=-396.7109375, 	["z"]=10.685879707336, ["rx"]=359.86267089844,	["ry"]=359.99450683594, ["rz"]=5.60302734375	}
}

local randRentPos = 
{
	[1] = 
	{
		[1] = {["x"]=-1173.375, 		["y"]=-929.466796875, 	["z"]=14.826175689697	},
		[2] = {["x"]=-1173.107421875, 	["y"]=-932.2099609375, 	["z"]=14.826175689697	},
		[3] = {["x"]=-1173.087890625, 	["y"]=-935.2216796875, 	["z"]=14.826175689697	},
		[4] = {["x"]=-1173.0673828125, 	["y"]=-938.7109375, 	["z"]=14.826175689697	},
		[5] = {["x"]=-1173.046875, 		["y"]=-942.08984375, 	["z"]=14.826175689697	}
	},
	[2] = 
	{
		[1]={["x"]=0.578125,		["y"]=-1191.42578125, 	["z"]=10.426433563232	},
		[2]={["x"]=-5.1494140625,	["y"]=-1190.716796875, 	["z"]=10.426433563232	},
		[3]={["x"]=-10.453125,		["y"]=-1190.265625, 	["z"]=10.426433563232	},
		[4]={["x"]=-16.1884765625,	["y"]=-1189.77734375, 	["z"]=10.426433563232	}
	},
	[3]	=
	{
		[1]={["x"]=-1080.8828125, 	["y"]=1415.6396484375, 	["z"]=8.699686050415	},
		[2]={["x"]=-1078.130859375, ["y"]=1415.6962890625, 	["z"]=8.699686050415	},
		[3]={["x"]=-1075.841796875, ["y"]=1415.7001953125,	["z"]=8.699686050415	},
		[4]={["x"]=-1073.095703125, ["y"]=1415.703125,		["z"]=8.699686050415	},
		[5]={["x"]=-1070.96875,		["y"]=1415.7060546875,	["z"]=8.699686050415	},
		[6]={["x"]=-1068.5625, 		["y"]=1415.708984375,	["z"]=8.699686050415	},
		[7]={["x"]=-1068.1416015625,["y"]=1401.0966796875,	["z"]=8.699686050415	},
		[8]={["x"]=-1065.5400390625,["y"]=1400.955078125,	["z"]=8.699686050415	},
		[9]={["x"]=-1062.89453125,	["y"]=1400.9296875,		["z"]=8.699686050415	}
	},
	[4] = 
	{
		[1]	=	{["x"]=-1018.0234375, 		["y"]=-1147.763671875, 	["z"]=14.890312194824	},
		[2]	=	{["x"]=-1013.736328125,		["y"]=-1147.7490234375,	["z"]=14.890312194824	},
		[3]	=	{["x"]=-1010.3310546875,	["y"]=-1147.73828125, 	["z"]=14.890312194824	},
		[4]	=	{["x"]=-1006.6689453125,	["y"]=-1147.7255859375,	["z"]=14.890312194824	},
		[5]	=	{["x"]=-1002.4306640625,	["y"]=-1147.7119140625, ["z"]=14.890312194824	},
	}
}

local mrkRepairVeh		=	
{
	[1]={["x"]=38.37109375, 	["y"]=-1088.4140625, 	["z"]=10.423915863037},
	[2]={["x"]=-888.857421875, 	["y"]=-565.6904296875, 	["z"]=11.049599647522},
	[3]={["x"]=-735.4599609375, ["y"]=-1319.8720703125, ["z"]=11.054172515869},
	[4]={["x"]=201.25, 			["y"]=-504.173828125, 	["z"]=11.602198600769},
	[5]={["x"]=-847.30759375, 	["y"]=-900.73621875, 	["z"]=11.064968109131}
}

local BankomatsTable = 
{
	[1] = {["x"]=485.1923828125, 	["y"]=248.5341796875, 		["z"]=10.731339645386	},
	[2] = {["x"]=392.716796875,		["y"]=-719.42578125, 		["z"]=10.708721351624	},
	[3] = {["x"]=189.4501953125,	["y"]=-477.3916015625, 		["z"]=10.73182220459	},
	[4] = {["x"]=-175.0341796875,	["y"]=-1430.08984375, 		["z"]=10.126416397095	},
	[5] = {["x"]=-315.3203125,		["y"]=1227.5302734375, 		["z"]=10.655721855164	},
	[6] = {["x"]=-879.599609375,	["y"]=-573.66015625, 		["z"]=10.751417350769	},
	[7] = {["x"]=-721.7001953125, 	["y"]=-1325.0205078125, 	["z"]=10.754172515869	},
	[8] = {["x"]=-1588.548828125,	["y"]=-1061-742.04296875, 	["z"]=14.524739456177	},
	[9] = {["x"]=63.88671875, 		["y"]=946.423828125, 		["z"]=10.50312538147	},
	[10] = {["x"]=-1588.3095703125, ["y"]=-742.130859375,		["z"]=14.324739456177	},
	[11] = {["x"]=-983.5224609375,	["y"]=-1141.4072265625,		["z"]=15.062187194824	},
}

setGlitchEnabled("quickreload", true)
setGlitchEnabled("crouchbug", true)
setGlitchEnabled("fastfire", true)

local MafiaCapture = 
{
	[1] = {["MC"]=true},
	[2] = {["MC"]=true},
	[3] = {["MC"]=true},
	[4] = {["MC"]=true},
	[5] = {},
	[6] = {},
	[7] = {}
}

function create3dtextlabel( x, y, z, text, src )
	if(x ~= nil) then
		if(y ~= nil) then
			if(y ~= nil) then
				if(text ~= nil) then
					local id = table.maxn(text3dTable) + 1
					text3dTable[id] = 
					{
						["x"]=x, ["y"]=y, ["z"]=z, ["Text"]=text, ["ID"]=id, ["Resource"] = src
					}
					for i, player in pairs(IDS) do
						if(getElementData(player, "Login") == true) then
							triggerClientEvent(player, "on3dTextAdd", player, text3dTable[id])
						end
					end
					return id
				end
			end
		end
	end
end

function attach3dtexttoplayer( text, element, x, y, z )
	if(text ~= nil) then
		if(element ~= nil) then
			if(x ~= nil) then
				if(y ~= nil) then
					if(z ~= nil) then
						local id = getElementData(element, "ID")
						attached3dtext[id] = 
						{
							["x"]=x, ["y"]=y, ["z"]=z, ["Text"]=text, ["Element"] = element, ["ID"]=id
						}
						for i, player in pairs(IDS) do
							if(getElementData(player, "Login") == true) then
								if(player ~= element) then
									triggerClientEvent(player, "attach3dtext", player, attached3dtext[id])
								end
							end
						end
						return id
					end
				end
			end
		end
	end
end

function edit3dtext( id, text )
	if(id ~= nil) then
		if(text ~= nil) then
			id = toch(id)
			if(text3dTable[id] ~= nil) then
				text3dTable[id]["Text"] = text
				for i, player in pairs(IDS) do
					if(getElementData(player, "Login") == true) then
						triggerClientEvent(player, "on3dTextAdd", player, text3dTable[id])
					end
				end
			end
		end
	end
end

function SED( elem, key, value, ded )
	if(isElement(elem) == true) then
		if(key ~= nil) then
			if(value ~= nil) then
				setElementData(elem, key, value, false)
			else
				if(ded == nil) then
	    			outputServerLog("nil value")
	    		else
	    			outputServerLog("nil value" .. ded)
	    		end
			end
		else
			outputServerLog("nil key SED")
		end
	else
		outputServerLog("nil element SED")
	end
end

function SEP( elem, x, y, z )
	if(getElementType(elem) == "player") then
		SED(elem, "ABB", true)
		local ping = getPlayerPing(elem)
		if(ping > 55) then
			setTimer(function ( ra )
				if(isElement(ra)) then
					removeElementData(ra, "ABB")
				end
			end, 200, 1, elem)
		else
			setTimer(function ( ra )
				if(isElement(ra)) then
					removeElementData(ra, "ABB")
				end
			end, ping + 150, 1, elem)
		end
	end
	setElementPosition(elem, x, y, z)
end


local rentCarPos = 
{
	[1] = {["x"]=-1173.7001953125,	["y"]=-942.3310546875, 		["z"]=14.826175689697},
	[2] = {["x"]=-4.1748046875,		["y"]=-1204.2763671875, 	["z"]=10.434156417847}
}

local CarInfo =
{
    [1] =   { ["ID"] = 492,  ["GosPrice"]=11500,    ["Name"]="Ford Crown Victoria LTD",		["Speed"]=122	},
    [2] =   { ["ID"] = 496,  ["GosPrice"]=56000,    ["Name"]="Renault Megane RS 275",		["Speed"]=159	},
    [3] =   { ["ID"] = 402,  ["GosPrice"]=248000,   ["Name"]="Dodge Challenger Hellcat",	["Speed"]=238	},
    [4] =   { ["ID"] = 541,  ["GosPrice"]=54000,    ["Name"]="BMW E36 M3",					["Speed"]=184	},
    [5] =   { ["ID"] = 415,  ["GosPrice"]=780000,   ["Name"]="Ferrari Testarossa",			["Speed"]=276	},
    [6] =   { ["ID"] = 562,  ["GosPrice"]=42000,    ["Name"]="Nissan 300ZX",				["Speed"]=166	},
    [7] =   { ["ID"] = 545,  ["GosPrice"]=8000,     ["Name"]="Chevrolet Master Sedan",		["Speed"]=110	},
    [8] =   { ["ID"] = 411,  ["GosPrice"]=600000,   ["Name"]="BMW i8",						["Speed"]=284	},
    [9] =  	{ ["ID"] = 551,  ["GosPrice"]=86700,    ["Name"]="Toyota Camry XSE",			["Speed"]=194	},
    [10] =  { ["ID"] = 500,  ["GosPrice"]=64000,    ["Name"]="Jeep Wrangler",				["Speed"]=161	},
    [11] =  { ["ID"] = 405,  ["GosPrice"]=13000,    ["Name"]="Toyota Cresta",				["Speed"]=155	},
    [12] =  { ["ID"] = 580,  ["GosPrice"]=620000,   ["Name"]="Rolls-Royce Phantom",			["Speed"]=206	},
    [13] =  { ["ID"] = 560,  ["GosPrice"]=64400,    ["Name"]="Mitsubishi Lancer IX",		["Speed"]=168	},
    [14] =  { ["ID"] = 547,  ["GosPrice"]=11200,    ["Name"]="Subaru Legacy RS",			["Speed"]=132	},
    [15] =  { ["ID"] = 540,  ["GosPrice"]=45200,    ["Name"]="Volkswagen Jetta",			["Speed"]=165	},
    [16] =  { ["ID"] = 554,  ["GosPrice"]=156000,   ["Name"]="Ford F-150",					["Speed"]=174	},
    [17] =  { ["ID"] = 477,  ["GosPrice"]=67500,    ["Name"]="Mazda RX-7",					["Speed"]=207	},
    [18] =  { ["ID"] = 445,  ["GosPrice"]=41600,    ["Name"]="Mercedes Benz 200D",			["Speed"]=182	},
    [19] =  { ["ID"] = 579,  ["GosPrice"]=414000,   ["Name"]="Range Rover SVAutobiography",	["Speed"]=175	},
    [20] =  { ["ID"] = 565,  ["GosPrice"]=26000,    ["Name"]="Honda Civic Type R Series",	["Speed"]=183	},
    [21] =  { ["ID"] = 516,  ["GosPrice"]=38700,    ["Name"]="Volkswagen Passat B5.5",		["Speed"]=175	},
    [22] =  { ["ID"] = 603,  ["GosPrice"]=59000,    ["Name"]="Ford Mustang MACH 1",			["Speed"]=190	},
    [23] =  { ["ID"] = 439,  ["GosPrice"]=72590,    ["Name"]="Chevrolet Camaro SS",			["Speed"]=211	},
    [24] =  { ["ID"] = 555,  ["GosPrice"]=40500,    ["Name"]="Nissan Skyline 2000 GT-R",	["Speed"]=175	},
    [25] =  { ["ID"] = 527,  ["GosPrice"]=14300,    ["Name"]="Honda Civic Gen 3",			["Speed"]=117	},
    [26] =  { ["ID"] = 507,  ["GosPrice"]=70000,    ["Name"]="BMW M5",						["Speed"]=215	},
    [27] =  { ["ID"] = 587,  ["GosPrice"]=54000,    ["Name"]="Chevrolet Camaro IROC-Z",		["Speed"]=183	},
    [28] =  { ["ID"] = 526,  ["GosPrice"]=23000,    ["Name"]="Toyota Celica",				["Speed"]=163	},
    [29] =  { ["ID"] = 546,  ["GosPrice"]=51600,    ["Name"]="Ford Mondeo",					["Speed"]=175	},
    [30] =  { ["ID"] = 410,  ["GosPrice"]=20000,    ["Name"]="Smart Fortwo Electri.",		["Speed"]=144	},
    [31] =  { ["ID"] = 467,  ["GosPrice"]=22600,    ["Name"]="BMW M5 E28",					["Speed"]=144	},
    [32] =  { ["ID"] = 413,  ["GosPrice"]=19000,    ["Name"]="Ford E 250",					["Speed"]=113	},
    [33] =  { ["ID"] = 426,  ["GosPrice"]=26800,    ["Name"]="Ford Crown Victoria",			["Speed"]=159	},
    [34] =  { ["ID"] = 436,  ["GosPrice"]=41000,    ["Name"]="Nissan Skyline GT-R R33",		["Speed"]=180	},
    [35] =  { ["ID"] = 489,  ["GosPrice"]=760000,   ["Name"]="Brabus B11 2008",				["Speed"]=205	},
    [36] =  { ["ID"] = 440,  ["GosPrice"]=17300,    ["Name"]="Toyota Transit",				["Speed"]=113	},
    [37] =  { ["ID"] = 475,  ["GosPrice"]=44000,    ["Name"]="Chevrolet Chevelle",			["Speed"]=211	},
    [38] =  { ["ID"] = 495,  ["GosPrice"]=114000,   ["Name"]="Nissan Titan Warrior",		["Speed"]=176	},
    [39] =  { ["ID"] = 561,  ["GosPrice"]=52000,    ["Name"]="Audi S4",						["Speed"]=171	},
    [40] =  { ["ID"] = 576,  ["GosPrice"]=71000,    ["Name"]="Dodge Charger",				["Speed"]=185	},
    [41] =  { ["ID"] = 451,  ["GosPrice"]=700000,   ["Name"]="Lamborghini Aventador",		["Speed"]=270	},
    [42] =  { ["ID"] = 480,  ["GosPrice"]=295000,   ["Name"]="Porsche 911 GT2",				["Speed"]=221	},
    [43] =  { ["ID"] = 429,  ["GosPrice"]=685000,   ["Name"]="BMW M1 E26",					["Speed"]=238	}
}

for i,n in pairs(CarInfo) do
	local tablo = getModelHandling(n["ID"])
	CarInfo[i]["DriveType"] = tablo["driveType"]
end

function SET( obj, int )
	if(getElementType(obj) == "player") then
		for i,n in pairs(IDS) do
			if(getElementData(n, "Login") == true) then
				if(getElementData(n, "SID") == getElementData(obj, "ID")) then
					setElementInterior(n, int)
				end
			end
		end
	end
	setElementInterior(obj, int)
end

function SIDP( obj, int )
	if(getElementType(obj) == "player") then
		for i,n in pairs(IDS) do
			if(getElementData(n, "Login") == true) then
				if(getElementData(n, "SID") == getElementData(obj, "ID")) then
					setElementDimension(n, int)
				end
			end
		end
	end
	setElementDimension(obj, int)
end

local AdminCommands = 
{
	[1] = 
	{
		[1] = {["String"]="/ahelp", ["Pole"]="-", ["Value"]="Список админ-команд"},
		[2] = {["String"]="/sp", ["Pole"]="[ID игрока]", ["Value"]="Слежка за игроком"},
		[3] = {["String"]="/stopspec", ["Pole"]="-", ["Value"]="Закончить слежку"},
		[4] = {["String"]="/ash", ["Pole"]="-", ["Value"]="ТП Автошкола"},
		[5] = {["String"]="/courier", ["Pole"]="-", ["Value"]="ТП развозчик продуктов"},
		[6] = {["String"]="/amail", ["Pole"]="-", ["Value"]="ТП Развозчик пиццы"},
		[7] = {["String"]="/elit", ["Pole"]="-", ["Value"]="ТП Центральный остров"},
		[8] = {["String"]="/bus", ["Pole"]="-", ["Value"]="ТП Автобусный парк"},
		[9] = {["String"]="/mer", ["Pole"]="-", ["Value"]="ТП Мэрия"},
		[10] = {["String"]="/taxipark", ["Pole"]="-", ["Value"]="ТП Таксопарк"},
		[11] = {["String"]="/gruz", ["Pole"]="-", ["Value"]="ТП Грузчики"},
		[12] = {["String"]="/army", ["Pole"]="-", ["Value"]="ТП Армия"},
		[13] = {["String"]="/afuel", ["Pole"]="-", ["Value"]="100 литров бензина в транспорт"},
		[14] = {["String"]="/int", ["Pole"]="[ID Интерьера]", ["Value"]="Изменить свой интерьер"},
		[15] = {["String"]="/shotel", ["Pole"]="-", ["Value"]="ТП Отель (спавн)"},
		[16] = {["String"]="/vcn", ["Pole"]="-", ["Value"]="ТП Vice City News"},
		[17] = {["String"]="/a", ["Pole"]="[Текст]", ["Value"]="Админ-чат"},
		[18] = {["String"]="/aero", ["Pole"]="-", ["Value"]="ТП Аэропорт (спавн)"},
		[19] = {["String"]="/agivevehlic", ["Pole"]="[id игрока] [0/1]", ["Value"]="Забрать или выдать права игроку"},
		[20] = {["String"]="/ans", ["Pole"]="[id игрока] [Текст]", ["Value"]="Ответить игроку от админки в пм"},
		[21] = {["String"]="/tp", ["Pole"]="[x] [y] [z]", ["Value"]="ТП по координатам"},
		[22] = {["String"]="/bus2", ["Pole"]="-", ["Value"]="ТП Автобусный парк 2"}
	},
	[2] = 
	{
		[1] = {["String"]="/jail", ["Pole"]="[id] [время] [причина]", ["Value"] = "Посадить игрока в тюрьму"},
		[2] = {["String"]="/mall", ["Pole"]="-", ["Value"]="ТП Сити Молл"},
		[3] = {["String"]="/armor", ["Pole"]="-", ["Value"]="Выдать себе армор"},
		[4] = {["String"]="/warn", ["Pole"]="[id игрока] [причина]", ["Value"]="Выдать предупреждение (кикает игрока и снимает с фракции)"},
		[5] = {["String"]="/repairveh", ["Pole"]="-", ["Value"]="Отремонтировать транспорт, в котором находишься"},
		[6] = {["String"]="/amute", ["Pole"]="[id игрока] [время] [причина]", ["Value"]="Выдать игроку затычку (разговор, /me, /do, /try)"},
		[7] = {["String"]="/goto", ["Pole"]="[id игрока]", ["Value"]="ТП к игроку"},
		[8] = {["String"]="/veh", ["Pole"]="[id]", ["Value"]="Создать транспортное средство"},
		[9] = {["String"]="/kill", ["Pole"]="-", ["Value"]="Смереть смертью"}
	},
	[3] = 
	{
		[1] = {["String"]="/aban", ["Pole"]="[id игрока] [кол-во дней] [причина]", ["Value"]="Выдать бан"},
		[2] = {["String"]="/aheal(/hp)", ["Pole"]="-", ["Value"]="Пополнить своё здоровье"},
		[3] = {["String"]="/aeat", ["Pole"]="-", ["Value"]="Пополнить свою еду"},
		[4] = {["String"]="/spawn", ["Pole"]="[ID игрока]", ["Value"]="Заспавнить себя (если id не введён) или игрока."},
		[5] = {["String"]="/asay", ["Pole"]="[Текст]", ["Value"]="От лица администратора в общий чат"},
		[6] = {["String"]="/skin", ["Pole"]="[id скина]", ["Value"]="Выдать себе временный скин"},
		[7] = {["String"]="/unjail", ["Pole"]="[id игрока]", ["Value"]="Выпустить игрока из тюрьмы"},
		[8] = {["String"]="/seteat", ["Pole"]="[id] [% сытости]", ["Value"] = "Выдать сытость"},
		[9] = {["String"]="/sethp", ["Pole"]="[id] [% хп]", ["Value"] = "Выдать армор"},
		[10] = {["String"]="/setarmor", ["Pole"]="[id] [% армор]", ["Value"] = "Выдать хп"}
	},
	[4] = 
	{
		[1] = {["String"]="/unwarn", ["Pole"]="[id игрока]", ["Value"]="Снять предупреждение (лайв)"},
		[2] = {["String"]="/camhack", ["Pole"]="-", ["Value"]="Включить камхак"},
		[3] = {["String"]="/camhackm", ["Pole"]="-", ["Value"]="Замедлить/ускорить камхак"},
		[4] = {["String"]="/templeader", ["Pole"]="[ID фракции]", ["Value"]="Встать на временную лидерку (0 < id < 10)"},
		[5] = {["String"]="/weather", ["Pole"]="[id погоды]", ["Value"]="Изменить погоду"},
		[6] = {["String"]="/hours", ["Pole"]="(/settime or /time)[Час]", ["Value"]="Изменить время на нужный час"},
		[7] = {["String"]="/get", ["Pole"]="[id игрока]", ["Value"]="ТП игрока к себе"}
	},
	[5] = 
	{
		[1] = {["String"]="/setleader", ["Pole"]="[id игрока] [id фракции]", ["Value"]="Поставить игрока на лидерку"},
		[2] = {["String"]="/id", ["Pole"]="[текст]", ["Value"]="Найти id игрока по нику"},
		[3] = {["String"]="/object", ["Pole"]="[id объекта", ["Value"]="Поставить объект"},
		[4] = {["String"]="/weapon", ["Pole"]="[id оружия]", ["Value"]="Выдать себе оружие"}
	},
	[6] = 
	{
		[1] = {["String"]="/ch", ["Pole"]="[Цена]", ["Value"]="Создать дом на координатах, где находится персонаж"},
		[2] = {["String"]="/sethvs", ["Pole"]="[id дома]", ["Value"]="Сделать \"Гараж\" на позиции игрока (учитывается угол поворота игрока)"},
		[3] = {["String"]="/sethouseprice", ["Pole"]="[id дома] [цена]", ["Value"]="Изменить цену для дома"},
		[4] = {["String"]="/makeadmin", ["Pole"]="[id игрока] [Уровень]", ["Value"]="Выдать игроку админку"}
	}
}

local ZpTable =
{
    [1]     =   {   [1] = 0,    [2]=0,  	[3]=0,  	[4] = 0,    [5] = 0,    [6] = 0,    [7] = 0, 	[8] = 0,    [9] = 0,    [10] = 0},
    [2]     =   {   [1] = 0,    [2]=0,  	[3]=0,  	[4] = 0,    [5] = 0,    [6] = 0,    [7] = 0, 	[8] = 0,    [9] = 0,    [10] = 0},
    [3]     =   {   [1] = 0,    [2]=0,  	[3]=0,  	[4] = 0,    [5] = 0,    [6] = 0,    [7] = 0, 	[8] = 0,    [9] = 0,    [10] = 0},
    [4]     =   {   [1] = 0,    [2]=0,  	[3]=0,  	[4] = 0,    [5] = 0,    [6] = 0,    [7] = 0, 	[8] = 0,    [9] = 0,    [10] = 0},
    [5]     =   {   [1] = 650,  [2]=1000,   [3]=1400,   [4] = 1800, [5] = 2150, [6] = 2450, [7] = 2600, [8] = 2800, [9] = 3000, [10] = 3200},
    [6]     =   {   [1] = 600,  [2]=800,    [3]=1000,   [4] = 1300, [5] = 1600, [6] = 1900, [7] = 2150, [8] = 2350, [9] = 2650, [10] = 2900},
    [7]     =   {   [1] = 700,  [2]=950,    [3]=1200,   [4] = 1500, [5] = 1800, [6] = 2100, [7] = 2300, [8] = 2600, [9] = 2800, [10] = 3000},
    [8]     =   {   [1] = 650,  [2]=900,    [3]=1300,   [4] = 1600, [5] = 1900, [6] = 2100, [7] = 2300, [8] = 2600, [9] = 2800, [10] = 3100},
    [9]     =   {   [1] = 600,  [2]=950,    [3]=1200,   [4] = 1500, [5] = 1800, [6] = 2050, [7] = 2200, [8] = 2500, [9] = 2700, [10] = 3050}
}

local mrkEda =
{
	[1] = {	["x"]=-902.7177734375, 	["y"]=799.73046875, 		["z"]=10.424116134644	},
	[2] = {	["x"]=420.650390625, 	["y"]=88.0595703125, 		["z"]=10.2223072052		}
}

mrkWeaponMag[1] = createMarker(-677.5859375,		 1205.7431640625, 	10.080532073975, 	"cylinder", 1.2, 220, 0, 0, 220, getRootElement())
mrkWeaponMag[2] = createMarker(-64.859375,			 -1481.6181640625, 	9.450514793396, 	"cylinder", 1.2, 220, 0, 0, 220, getRootElement())
mrkNrk			= createMarker(-1195.5068359375,	 -5.9072265625, 	10.391767501831, 	"cylinder", 1.8, 220, 0, 0, 220, getRootElement())

function onWeaponMag( hit, dim )
	if(getElementType(hit) == "player") then
		if(getElementData(hit, "Login") == true) then
			if(getElementData(hit, "Admin") ~= false) then
				if(getElementData(source, "Mag") ~= false) then
					SED(hit, "weaponMag", getElementData(source, "Mag"))
				end
				showPlayerDialog(hit, 83, 3, "Покупка оружия", "Название оружия\tСтоимость\tКоличество патрон\nDesert Eagle\t12.500$\t7/28\nM4\t15.000$\t50/70\nShotgun\t9.000$\t1/34\nAk-47\t14.000$\t30/90\nБронежилет\t3.000$\t1/1", "Купить", "Отмена")
			end
		end
	end
end

for i, n in pairs(mrkWeaponMag) do
	if(i == 2) then
		SED(mrkWeaponMag[i], "Mag", 130)
	end
	SED(mrkWeaponMag[i], "mrkMag", i)
	addEventHandler("onMarkerHit", n, onWeaponMag)
end


local BusTimer			=	{}


function sendClientMessage( text, player, r, g, b, val )
	local msg = string.find(text, "#")
	if(msg == nil) then
		if(val == nil) then
			val = nil
		end
		if(r == nil) then
			r = 255
		end
		if(g == nil) then
			g = 255
		end
		if(b == nil) then
			b = 255
		end
		if(text == nil) then
			text = ""
		end
		if(player == nil) then
			player = getRootElement()
		end
		outputChatBox(text, player, r, g, b, val)
	end
end


function math.round(number, decimals, method)
    decimals = decimals or 0
    local factor = 10 ^ decimals
    if (method == "ceil" or method == "floor") then return math[method](number * factor) / factor
    else return tonumber(("%."..decimals.."f"):format(number)) end
end

function createVeh( id, x, y, z, rx, ry, rz )
	maxveh = maxveh + 1
	VehicleTable[maxveh] = {}
	if( id > 399 and id < 612) then
		VehicleTable[maxveh]["Vehicle"] = createVehicle(id, x, y, z, rx, ry, rz)
		local veh = VehicleTable[maxveh]["Vehicle"]
		SED(veh, "ID", maxveh)
		SED(veh, "Fuel", 100)
		SED(veh, "sx", x)
		SED(veh, "sy", y)
		SED(veh, "sz", z)
		SED(veh, "Engine", false)
        if(rz ~= nil) then
    		SED(veh, "srz",	rz)
        end
		setVehicleOverrideLights(veh, 1)
		if(VehHandling[id] ~= nil) then
			for i, n in pairs(VehHandling[id]) do
				if(n == VehHandling[id]["com1"]) then
					local tablo = {[1]=VehHandling[id]["com1"],[2]=VehHandling[id]["com2"],[3]=VehHandling[id]["com3"]}
					setVehicleHandling(VehicleTable[maxveh]["Vehicle"], "centerOfMass", tablo)
				else
					setVehicleHandling(VehicleTable[maxveh]["Vehicle"], i, n)
				end
			end
		end
		return VehicleTable[maxveh]["Vehicle"]
	else return false
	end
end

local CMD_INTERVAL  = 300
local RETURN_INTERVAL = 150  
local TAB_INTERVAL = 3000

local GreenZone = 
{
	[1] ={["x1"]=232.578125, 		["y1"]=-355.513671875, 		["x2"]=339.8134765625, 		["y2"]=-189.1806640625	},
	[2] ={["x1"]=-764.69140625, 	["y1"]=-1371.2900390625, 	["x2"]=-609.0126953125, 	["y2"]=-1281.755859375	},
	[3] ={["x1"]=40.29296875,		["y1"]=-865.63476562,		["x2"]=108.178710937,		["y2"]=-701.728515625	},
	[4] ={["x1"]=249.7802734375, 	["y1"]=-115.536132,			["x2"]=265.832,				["y2"]=-75.25,			["Interior"]=5},
	[5] ={["x1"]=251.234375,		["y1"]= -336.875976562,		["x2"]=343.204101562,		["y2"]= -292.29492187	},
	[6] ={["x1"]=-1134.4521484375, 	["y1"]=1229.5830078125,		["x2"]=-1009.0615234375, 	["y2"]=1451.193359375	},
	[7] ={["x1"]=-173.6982421875, 	["y1"]=-1199.7451171875,	["x2"]=-62.005859375, 		["y2"]=-1123.962890625	},
	[8] ={["x1"]=-1542.53515625, 	["y1"]=-897.3740234375, 	["x2"]=-1323.1767578125, 	["y2"]=-787.279296875	},
	[9] ={["x1"]=303.0888671875, 	["y1"]=1154.1962890625, 	["x2"]=365.962890625, 		["y2"]=1258.07421875	},
	[10]={["x1"]=-1188.458984375,	["y1"]=-1061.55859375,		["x2"]=-1129.486328125,		["y2"]=-912.04296875	},
	[11]={["x1"]=-418.810546875, 	["y1"]=908.6669921875,		["x2"]=-358.171875,			["y2"]=915.7802734375	},
	[12]={["x1"]=-1265.1328125,		["y1"]=-660.4638671875,		["x2"]=-1240.2451171875,	["y2"]=-648.4326171875,	["Interior"]=1},
	[13]={["x1"]=-191.05859375,		["y1"]=-1027.0947265625,	["x2"]=-115.8505859375,		["y2"]=-915.841796875,	},
	[14]={["x1"]=55.33203125, 		["y1"]=201.7666015625,		["x2"]=121.814453125, 		["y2"]=295.75390625,	},
	[15]={["x1"]=452.15625,			["y1"]=-94.2666015625,		["x2"]=509.8984375,			["y2"]=-29.41796875		}
}

local FactionSpawns = 
{
	[1]={ ["x"]=307.4990234375, 	["y"]=288.97265625, 	["z"]=16.176692962646 	},
	[2]={ ["x"]=-1073.9423828125, 	["y"]=-233.0791015625, 	["z"]=11.404360771179 	},
	[3]={ ["x"]=-1059.7705078125, 	["y"]=319.9892578125, 	["z"]=11.226167678833 	},
	[4]={ ["x"]=-130.7890625, 		["y"]=-1385.8798828125, ["z"]=10.419187545776 	},
	[5]={ ["x"]=358.380859375,		["y"]=206.8076171875,	["z"]=1008.3828125,		["Interior"]=3, ["Rot"]=270},
	[6]={ ["x"]=-529.0791015625,	["y"]=817.791015625,	["z"]=97.470069885254	},
	[7]={ ["x"]=-135.0732421875,	["y"]=-980.216796875,	["z"]=10.423469543457	},
	[8]={ ["x"]=370.3809375, 		["y"]=-478.1324921875,	["z"]=13.776368482971,	["Interior"]=2, ["Rot"]=135},
	[9]={ ["x"]=-1290.7646484375,	["y"]=-665.3349609375,	["z"]=999.53869628906,	["Interior"]=6,	["Rot"]=90}
}

local StandartSpawns =
{
	[0]= { ["x"]=-969.9501953125,  		["y"]=-1195.31640625, 	["z"]=15.032187461853, ["rz"]=97.332122802734  	},
	[1]= { ["x"]=-970.2353515625,  		["y"]=-1197.28125, 		["z"]=15.032187461853, ["rz"]=97.332122802734 	},
	[2]= { ["x"]=-970.080078125,		["y"]=-1200.2177734375,	["z"]=15.032187461853, ["rz"]=97.332122802734	},
	[3]= { ["x"]=-970.330078125,		["y"]=-1203.0927734375,	["z"]=15.032187461853, ["rz"]=97.332122802734	},
}

local FactionSkins = 
{
	[1] = {[1]=124,		[2]=125,	[3]=127,	[4]=98,		[5]=126,											[10]=113,	[11]=91				},
	[2] = {[1]=114,		[2]=115, 	[3]=175,	[4]=174,														[10]=173,	[11]=56				},
	[3] = {[1]=108,		[2]=109,	[3]=110,																	[10]=107,	[11]=257			},
	[4] = {[1]=121, 	[2]=122, 	[3]=123,																	[10]=294,	[11]=263			},
	[5] = {[1]=166, 	[2]=165,	[3]=163, 	[4]=133,	[5]=147,	[6]=164,	[7]=17,		[8]=187,		[10]=228,	[11]=40				},
	[6] = {[1]=217, 	[2]=217,	[3]=188,	[4]=186,														[10]=295,	[11]=216			},
	[7] = {[1]=274,  	[2]=275,	[3]=276,																	[10]=70, 	[11]=243			},
	[8] = {[1]=71, 		[2]=266, 	[3]=267,	[4]=280,	[5]=281,	[6]=283,	[7]=253, 	[8]=284,		[10]=288,	[11]=207, [12]=285	},
	[9] = {[1]=287,		[2]=35,		[3]=179,																	[10]=255, 	[11]=238			}
}

local mrksBusWork = 
{
	[1] = 
	{
		[1] = {["x"]=47.8125, 			["y"]=-996.8984375, ["z"]=10.178091049194},
		[2] = {["x"]=40.1142578125, 	["y"]=-1029.283203125, ["z"]=10.033022880554},
		[3] = {["x"]=-0.609375, 		["y"]=-1028.8427734375, ["z"]=10.034883499146},
		[4] = {["x"]=-54.7802734375, 	["y"]=-1027.828125, ["z"]=10.037142753601},
		[5] = {["x"]=-71.2802734375, 	["y"]=-1014.5126953125, ["z"]=10.044651985168},
		[6] = {["x"]=-74.9951171875, 	["y"]=-987.8759765625, ["z"]=10.03680229187},
		[7] = {["x"]=-79.30078125, 		["y"]=-976.45703125, ["z"]=10.037132263184},
		[8] = {["x"]=-94.8017578125, 	["y"]=-903.5546875, ["z"]=10.044855117798},
		[9] = {["x"]=-67.5703125, 		["y"]=-883.083984375, ["z"]=10.037915229797},
		[10] = {["x"]=7.3310546875, 	["y"]=-869.498046875, ["z"]=10.031182289124},
		[11] = {["x"]=94.271484375, 	["y"]=-841.775390625, ["z"]=10.031202316284},
		[12] = {["x"]=120.66796875, 	["y"]=-810.8212890625, ["z"]=10.03503704071},
		[13] = {["x"]=123.4970703125, 	["y"]=-803.140625, ["z"]=10.031199455261},
		[14] = {["x"]=159.23828125, 	["y"]=-719.287109375, ["z"]=10.036388397217},
		[15] = {["x"]=175.8134765625, 	["y"]=-627.5166015625, ["z"]=18.288593292236},
		[16] = {["x"]=179.5859375, 		["y"]=-545.0927734375, ["z"]=11.629448890686},
		[17] = {["x"]=183.8125, 		["y"]=-453.6064453125, ["z"]=10.605423927307},
		[18] = {["x"]=201.9091796875, 	["y"]=-364.5498046875, ["z"]=10.256289482117},
		[19] = {["x"]=203.716796875, 	["y"]=-355.2607421875, ["z"]=10.164639472961},
		[20] = {["x"]=272.9345703125, 	["y"]=-188.97265625, ["z"]= 10.672285079956},
		[21] = {["x"]=299.4970703125, 	["y"]=-186.681640625, ["z"]= 11.463621139526},
		[22] = {["x"]=370.759765625, 	["y"]=-244.044921875, ["z"]= 11.5348777771},
		[23] = {["x"]=353.9951171875, 	["y"]=-299.5146484375, ["z"]= 11.531694412231},
		[24] = {["x"]=325.36328125, 	["y"]=-325.9189453125, ["z"]= 11.535707473755},
		[25] = {["x"]=328.30859375, 	["y"]=-335.7685546875, ["z"]= 12.003061294556},
		[26] = {["x"]=431.3662109375, 	["y"]=-361.228515625, ["z"]= 11.015341758728},
		[27] = {["x"]=464.185546875, 	["y"]=-314.63671875, ["z"]= 9.7449102401733},
		[28] = {["x"]=483.3583984375, 	["y"]=-139.6875, ["z"]=9.7394428253174},
		[29] = {["x"]=519.6337890625, 	["y"]=-79.5537109375, ["z"]=10.238880157471},
		[30] = {["x"]=515.2822265625, 	["y"]=-24.8935546875, ["z"]=10.622049331665},
		[31] = {["x"]=510.48046875, 	["y"]=-17.19921875, ["z"]=10.622361183167},
		[32] = {["x"]=503.10546875, 	["y"]=92.62890625, ["z"]=10.861793518066},
		[33] = {["x"]=504.626953125, 	["y"]=220.138671875, ["z"]=10.631502151489},
		[34] = {["x"]=515.76953125, 	["y"]=338.6240234375, ["z"]=10.626695632935},
		[35] = {["x"]=535.5771484375, 	["y"]=437.728515625, ["z"]=10.624719619751},
		[36] = {["x"]=544.486328125, 	["y"]=572.1728515625, ["z"]=10.656328201294},
		[37] = {["x"]=539.84375, 		["y"]=589.8056640625, ["z"]=10.643921852112},
		[38] = {["x"]=551.2109375, 		["y"]=742.1826171875, ["z"]=10.941865921021},
		[39] = {["x"]=549.6396484375, 	["y"]=917.7998046875, ["z"]=15.269828796387},
		[40] = {["x"]=502.97265625, 	["y"]=1077.6533203125, ["z"]=17.443695068359},
		[41] = {["x"]=523.9677734375, 	["y"]=1250.5859375, ["z"]=16.10711479187},
		[42] = {["x"]=459.4658203125, 	["y"]=1289.8349609375, ["z"]=17.181705474854},
		[43] = {["x"]=435.6396484375, 	["y"]=1287.0751953125, ["z"]=16.767009735107},
		[44] = {["x"]=298.228515625, 	["y"]=1286.4833984375, ["z"]=16.949949264526},
		[45] = {["x"]=214.634765625, 	["y"]=1252.5830078125, ["z"]=16.952739715576},
		[46] = {["x"]=278.5380859375, 	["y"]=1194.953125, ["z"]=17.657115936279},
		[47] = {["x"]=272.158203125, 	["y"]=1109.0625, ["z"]=16.791379928589},
		[48] = {["x"]=294.7470703125, 	["y"]=1039.6845703125, ["z"]=12.847757339478},
		[49] = {["x"]=304.125, 			["y"]=1016.634765625, ["z"]=12.639145851135},
		[50] = {["x"]=305.599609375, 	["y"]=862.0146484375, ["z"]=10.655495643616},
		[51] = {["x"]=216.85546875, 	["y"]=726.1796875, ["z"]=10.621254920959},
		[52] = {["x"]=193.1328125, 		["y"]=652.8056640625, ["z"]=10.621515274048},
		[53] = {["x"]=258.3740234375, 	["y"]=666.212890625, ["z"]=10.624775886536},
		[54] = {["x"]=313.484375,   	["y"]=666.791015625, ["z"]=10.871550559998},
		[55] = {["x"]=337.6611328125,  	["y"]=666.1708984375,  ["z"]=10.885396957397},
		[56] = {["x"]=374.9130859375, 	["y"]=649.40625, ["z"]=10.706328392029},
		[57] = {["x"]=369.6689453125, 	["y"]=520.12109375, ["z"]=11.195308685303},
		[58] = {["x"]=329.5087890625, 	["y"]=370.4921875, ["z"]=11.200820922852},
		[59] = {["x"]=336.3720703125, 	["y"]=253.8310546875, ["z"]=10.886775970459},
		[60] = {["x"]=297.3037109375, 	["y"]=248.3076171875, ["z"]=11.112108230591},
		[61] = {["x"]=276.05859375, 	["y"]=247.2607421875, ["z"]=10.626167297363},
		[62] = {["x"]=149.8330078125, 	["y"]=235.314453125, ["z"]=18.860750198364},
		[63] = {["x"]=-38.12890625, 	["y"]=106.8623046875, ["z"]=18.011112213135},
		[64] = {["x"]=-244.8115234375, 	["y"]=57.0908203125, ["z"]=25.908153533936},
		[65] = {["x"]=-589.064453125, 	["y"]=30.4248046875, ["z"]=25.907911300659},
		[66] = {["x"]=-852.481171875, 	["y"]=50.3038515625, ["z"]=8.9340839385986},
		[67] = {["x"]=-870.4482421875, 	["y"]=55.9287109375, ["z"]=8.9295310974121},
		[68] = {["x"]=-935.572265625, 	["y"]=120.6455078125, ["z"]=8.9323329925537},
		[69] = {["x"]=-893.455078125, 	["y"]=188.2958984375, ["z"]=8.9296703338623},
		[70] = {["x"]=-808.1142578125, 	["y"]=206.681640625, ["z"]=9.8264026641846},
		[71] = {["x"]=-751.138671875, 	["y"]=198.4501953125, ["z"]=10.831101417542},
		[72] = {["x"]=-744.2314453125, 	["y"]=170.4599609375, ["z"]=10.64296913147},
		[73] = {["x"]=-749.2958984375, 	["y"]=148.009765625, ["z"]=10.64204120636},
		[74] = {["x"]=-777.8994140625, 	["y"]=33.693359375, ["z"]=10.647372245789},
		[75] = {["x"]=-833.3369140625, 	["y"]=-78.017578125, ["z"]=10.646887779236},
		[76] = {["x"]=-862.810546875, 	["y"]=-188.2392578125, ["z"]=10.627913475037},
		[77] = {["x"]=-863.9306640625, 	["y"]=-267.4794921875, ["z"]=10.632155418396},
		[78] = {["x"]=-870.341015625, 	["y"]=-376.3798828125, ["z"]=10.64880657196},
		[79] = {["x"]=-868.7275390625, 	["y"]=-388.3359375, ["z"]=10.887702941895},
		[80] = {["x"]=-856.68359375, 	["y"]=-494.880859375, ["z"]=10.648909568787},
		[81] = {["x"]=-806.033203125, 	["y"]=-515.2978515625, ["z"]=10.907472610474},
		[82] = {["x"]=-647.646484375, 	["y"]=-491.7978515625, ["z"]=10.781964302063},
		[83] = {["x"]=-559.1357421875, 	["y"]=-490.830078125, ["z"]=10.774666786194},
		[84] = {["x"]=-500.12453125, 	["y"]=-495.6423828125, ["z"]=10.767170906067},
		[85] = {["x"]=-476.923828125, 	["y"]=-492.615234375, ["z"]=10.773151397705},
		[86] = {["x"]=-261.7666015625, 	["y"]=-484.234375, ["z"]=10.785853385925},
		[87] = {["x"]=-54.30859375, 	["y"]=-458.1845703125, ["z"]=20.28731918335},
		[88] = {["x"]=137.26953125, 	["y"]=-452.158203125, ["z"]=10.987336158752},
		[89] = {["x"]=178.4189453125, 	["y"]=-465.6728515625, ["z"]=10.609707832336},
		[90] = {["x"]=175.4990234375, 	["y"]=-515.2333984375, ["z"]=10.77278137207},
		[91] = {["x"]=175.3759765625, 	["y"]=-555.9541015625, ["z"]=11.303262710571},
		[92] = {["x"]=171.01171875, 	["y"]=-633.232421875, ["z"]=17.825693130493},
		[93] = {["x"]=152.060546875, 	["y"]=-724.0693359375, ["z"]= 10.036426544189},
		[94] = {["x"]=101.0810546875, 	["y"]=-826.94921875, ["z"]=10.031215667725},
		[95] = {["x"]=45.65625, 		["y"]=-861.9052734375, ["z"]=10.031215667725},
		[96] = {["x"]=-71.4140625, 		["y"]=-876.19921875, ["z"]=10.032964706421},
		[97] = {["x"]=-90.857421875,   	["y"]=-887.98828125, ["z"]=10.270347595215},
		[98] = {["x"]=-106.2646484375, 	["y"]=-910.146484375, ["z"]=10.043213844299},
		[99] = {["x"]=-78.57421875, 	["y"]=-1045.8369140625, ["z"]=10.037419319153},
		[100] = {["x"]=-86.8212890625, 	["y"]=-1076.9794921875, ["z"]=10.024244308472},
		[101] = {["x"]=-146.935546875, 	["y"]=-1090.6044921875, ["z"]=10.02019405365},
		[102] = {["x"]=-200.3046875, 	["y"]=-1123.923828125, ["z"]=10.031179428101},
		[103] = {["x"]=-202.55859375, 	["y"]=-1144.12890625, ["z"]=10.031101226807},
		[104] = {["x"]=-202.9345703125, ["y"]=-1247.384765625, ["z"]=10.031303405762},
		[105] = {["x"]=-195.529296875, 	["y"]=-1332.1259765625, ["z"]=10.03121471405},
		[106] = {["x"]=-169.240234375, 	["y"]=-1419.119140625, ["z"]=10.031216621399},
		[107] = {["x"]=-151.3896484375, ["y"]=-1465.7236328125, ["z"]=10.031847953796},
		[108] = {["x"]=-137.7265625, 	["y"]=-1498.90234375, ["z"]=10.031181335449},
		[109] = {["x"]=-129.607421875, 	["y"]=-1509.3134765625, ["z"]=10.031111717224},
		[110] = {["x"]=-61.87109375, 	["y"]=-1572.54296875, ["z"]=9.9996633529663},
		[111] = {["x"]=-42.2958984375, 	["y"]=-1539.689453125, ["z"]=9.999340057373},
		[112] = {["x"]=-29.9228515625, 	["y"]=-1400.8681640625, ["z"]=10.033174514771},
		[113] = {["x"]=-23.615234375, 	["y"]=-1303.69921875, ["z"]=10.03782749176},
		[114] = {["x"]=-28.4091796875, 	["y"]=-1212.341796875, ["z"]=10.037660598755},
		[115] = {["x"]=-36.2626953125, 	["y"]=-1191.1640625, ["z"]=10.032312393188},
		[116] = {["x"]=-62.873046875, 	["y"]=-1057.9404296875, ["z"]=10.037678718567},
		[117] = {["x"]=-53.9736328125, 	["y"]=-1032.8828125, ["z"]=10.037182807922},
		[118] = {["x"]=39.04296875, 	["y"]=-1035.556640625, ["z"]=10.03058719635},
		[119] = {["x"]=47.6513671875, 	["y"]=-1000.81640625, ["z"]=10.184510231018}
	},
	[2] = 
	{
		[1] = 		{["x"]=-792.8134765625, 	["y"]= 561.0009765625, ["z"]= 10.449148178101},
		[2] = 		{["x"]=-701.66796875, 		["y"]= 551.4072265625, ["z"]= 10.459411621094},
		[3] = 		{["x"]=-699.603515625, 		["y"]= 445.9384765625, ["z"]= 10.450269699097},
		[4] = 		{["x"]=-717.4912109375, 	["y"]= 303.591796875, ["z"]= 10.450839996338},
		[5] = 		{["x"]=-765.0390625, ["y"]= 69.951171875, ["z"]= 10.449323654175},
		[6] = 		{["x"]=-869.3671875, ["y"]= -377.7109375, ["z"]= 10.452890396118 },
		[7] = 		{["x"]=-868.3046875, ["y"]= -401.142578125, ["z"]= 10.445757865906},
		[8] = 		{["x"]=-836.9853515625, ["y"]= -635.7412109375, ["z"]= 10.452080726624},
		[9] = 		{["x"]=-879.3076171875, ["y"]= -651.2421875, ["z"]= 10.639442443848},
		[10] =		{["x"]=-1127.6171875, ["y"]= -684.4404296875, ["z"]= 11.161047935486},
		[11] =		{["x"]=-1133.646484375, ["y"]= -726.65234375, ["z"]= 11.242699623108},
		[12] =		{["x"]=-1073.5390625, ["y"]= -866.8310546875, ["z"]= 13.128902435303 },
		[13] =		{["x"]=-1033.3681640625, ["y"]= -910.2373046875, ["z"]= 13.578476905823},
		[14] =		{["x"]=-915.390625, ["y"]= -1062.5234375, ["z"]= 14.23418712616},
		[15] =		{["x"]=-1017.216796875, ["y"]= -1074.5380859375, ["z"]= 14.224704742432},
		[16] =		{["x"]=-1178.962890625, ["y"]= -1074.2255859375, ["z"]= 14.233696937561},
		[17] =		{["x"]=-1199.42578125, ["y"]= -843.728515625, ["z"]= 14.221113204956},
		[18] =		{["x"]=-1253.654296875, ["y"]= -728.0869140625, ["z"]= 14.217726707458 },
		[19] =		{["x"]=-1255.556640625, ["y"]= -711.658203125, ["z"]= 14.218376159668},
		[20] =		{["x"]=-1301.1923828125, ["y"]= -688.59765625, ["z"]= 14.219317436218},
		[21] =		{["x"]=-1503.70703125, ["y"]= -688.3828125, ["z"]= 14.22061920166},
		[22] =		{["x"]=-1533.0634765625, ["y"]= -735.572265625, ["z"]= 14.213614463806},
		[23] =		{["x"]=-1506.0556640625, ["y"]= -785.166015625, ["z"]= 14.220132827759},
		[24] =		{["x"]=-1436.81640625, ["y"]= -787.2607421875, ["z"]= 14.235238075256 },
		[25] =		{["x"]=-1418.8798828125, ["y"]= -785.775390625, ["z"]= 14.22939491272},
		[26] =		{["x"]=-1226.0498046875, ["y"]= -785.59375, ["z"]= 14.219906806946},
		[27] =		{["x"]=-1204.345703125, ["y"]= -923.3662109375, ["z"]= 14.220977783203},
		[28] =		{["x"]=-1202.6337890625, ["y"]= -1059.4423828125, ["z"]= 14.206654548645},
		[29] =		{["x"]=-1027.9365234375, ["y"]= -1079.4501953125, ["z"]= 14.224625587463},
		[30] =		{["x"]=-965.0341796875, ["y"]= -1080.1115625, ["z"]= 14.222358703613 },
		[31] =		{["x"]=-920.607421875, ["y"]= -1079.1455078125, ["z"]= 14.222434997559},
		[32] =		{["x"]=-900.9951171875, ["y"]= -1124.39453125, ["z"]= 13.671506881714},
		[33] =		{["x"]=-933.4287109375, ["y"]= -1268.3759765625, ["z"]= 11.406661987305},
		[34] =		{["x"]=-986.6640625, ["y"]= -1395.8173828125, ["z"]= 11.140696525574},
		[35] =		{["x"]=-934.6865234375, ["y"]= -1433.236328125, ["z"]= 11.295182228088},
		[36] =		{["x"]=-879.0869140625, ["y"]= -1457.71484375, ["z"]= 11.29834651947 },
		[37] =		{["x"]=-863.1767578125, ["y"]= -1462.8701171875, ["z"]= 11.291675567627},
		[38] =		{["x"]=-761.62890625, ["y"]= -1494.1884765625, ["z"]= 10.78121471405},
		[39] =		{["x"]=-707.2529296875, ["y"]= -1488.2919921875, ["z"]= 10.781024932861},
		[40] =		{["x"]=-685.4580078125, ["y"]= -1410.908203125, ["z"]= 10.431493759155},
		[41] =		{["x"]=-711.9931640625, ["y"]= -1302.4970703125, ["z"]= 10.432308197021},
		[42] =		{["x"]=-743.0716015625, ["y"]= -1227.240234375, ["z"]= 10.429321289063 },
		[43] =		{["x"]=-754.44921875, ["y"]= -1204.0302734375, ["z"]= 10.429061889648},
		[44] =		{["x"]=-801.6474609375, ["y"]= -1044.1748046875, ["z"]= 10.441445350647},
		[45] =		{["x"]=-798.3291015625, ["y"]= -908.3583984375, ["z"]= 10.437063217163},
		[46] =		{["x"]=-824.6083984375, ["y"]= -533.1953125, ["z"]= 10.240825653076},
		[47] =		{["x"]=-733.8330078125, ["y"]= -496.8525390625, ["z"]= 13.065609931946},
		[48] =		{["x"]=-502.7158203125, ["y"]= -495.7119140625, ["z"]= 10.582869529724 },
		[49] =		{["x"]=-488.3955078125, ["y"]= -491.7685546875, ["z"]= 10.57782459259},
		[50] =		{["x"]=-306.640625, ["y"]= -486.7265625, ["z"]= 10.581901550293},
		[51] =		{["x"]=-162.7412109375, ["y"]= -473.8056640625, ["z"]= 11.717217445374},
		[52] =		{["x"]=66.9345703125, ["y"]= -451.4853515625, ["z"]= 10.713399887085},
		[53] =		{["x"]=212.40625, ["y"]= -452.9501953125, ["z"]= 11.250690460205},
		[54] =		{["x"]=259.0244140625, ["y"]= -385.091796875, ["z"]= 11.347105979919},
		[55] =		{["x"]=260.236328125, ["y"]= -382.2109375, ["z"]= 11.343871116638},
		[56] =		{["x"]=338.64453125, ["y"]= -321.9794921875, ["z"]= 11.484057426453},
		[57] =		{["x"]=369.4951171875, ["y"]= -225.087890625, ["z"]= 11.339159011841},
		[58] =		{["x"]=283.048828125, ["y"]= -177.5712890625, ["z"]= 10.914657592773},
		[59] =		{["x"]=254.326171875, ["y"]= -215.076171875, ["z"]= 10.42918586731},
		[60] =		{["x"]=217.005859375, ["y"]= -283.4521484375, ["z"]= 11.824463844299 },
		[61] =		{["x"]=213.6416015625, ["y"]= -298.9794921875, ["z"]= 11.997485160828},
		[62] =		{["x"]=181.55078125, ["y"]= -426.603515625, ["z"]= 10.409769058228},
		[63] =		{["x"]=82.337890625, ["y"]= -442.70703125, ["z"]= 10.99720287323},
		[64] =		{["x"]=-146.244140625, ["y"]= -461.19140625, ["z"]= 13.496290206909},
		[65] =		{["x"]=-237.763671875, ["y"]= -472.3271484375, ["z"]= 10.611783027649},
		[66] =		{["x"]=-251.587890625, ["y"]= -417.86328125, ["z"]= 10.705163002014 },
		[67] =		{["x"]=-276.626953125, ["y"]= -384.134765625, ["z"]= 10.693664550781},
		[68] =		{["x"]=-321.1787109375, ["y"]= -356.3271484375, ["z"]= 10.652772903442},
		[69] =		{["x"]=-441.029296875, ["y"]= -352.4609375, ["z"]= 10.621125221252},
		[70] =		{["x"]=-634.873046875, ["y"]= -410.794921875, ["z"]= 10.623157501221},
		[71] =		{["x"]=-646.3115234375, ["y"]= -472.2109375, ["z"]= 10.610920906067},
		[72] =		{["x"]=-661.5107421875, ["y"]= -478.58203125, ["z"]= 10.632915496826 },
		[73] =		{["x"]=-693.42578125, ["y"]= -483.693359375, ["z"]= 10.625884056091},
		[74] =		{["x"]=-821.9052734375, ["y"]= -508.3984375, ["z"]= 10.160326957703},
		[75] =		{["x"]=-841.9248046875, ["y"]= -353.6513671875, ["z"]= 10.430767059326},
		[76] =		{["x"]=-789.2177734375, ["y"]= -38.423828125, ["z"]= 10.428102493286},
		[77] =		{["x"]=-699.599609375, ["y"]= 272.044921875, ["z"]= 10.422160148621},
		[78] =		{["x"]=-672.6953125, ["y"]= 449.3720703125, ["z"]= 10.430849075317 },
		[79] =		{["x"]=-672.392578125, ["y"]= 469.78125, ["z"]= 10.43644618988},
		[80] =		{["x"]=-654.1484375, ["y"]= 632.76171875, ["z"]= 10.432704925537},
		[81] =		{["x"]=-550.3857421875, ["y"]= 667.634765625, ["z"]= 10.436546325684},
		[82] =		{["x"]=-469.248046875, ["y"]= 810.396484375, ["z"]= 10.428298950195},
		[83] =		{["x"]=-354.9501953125, ["y"]= 1082.646484375, ["z"]= 8.7061519622803},
		[84] =		{["x"]=-293.70703125, ["y"]= 1284.16796875, ["z"]= 11.123161315918 },
		[85] =		{["x"]=-297.1728515625, ["y"]= 1296.8759765625, ["z"]= 11.12511920929},
		[86] =		{["x"]=-408.9619140625, ["y"]= 1349.7490234375, ["z"]= 11.125540733337},
		[87] =		{["x"]=-576.3837890625, ["y"]= 1334.8388671875, ["z"]= 11.12547492981},
		[88] =		{["x"]=-761.916015625, ["y"]= 1316.552734375, ["z"]= 11.113024711609},
		[89] =		{["x"]=-777.33984375, ["y"]= 1363.822265625, ["z"]= 11.121388435364},
		[90] =		{["x"]=-829.8544921875, ["y"]= 1380.9580078125, ["z"]= 10.945820808411 },
		[91] =		{["x"]=-848.3154296875, ["y"]= 1377.8095703125, ["z"]= 10.938045501709},
		[92] =		{["x"]=-939.6416015625, ["y"]= 1374.3798828125, ["z"]= 10.134019851685},
		[93] =		{["x"]=-1000.673828125, ["y"]= 1381.837890625, ["z"]= 9.3200426101685},
		[94] =		{["x"]=-1032.3115234375, ["y"]= 1418.7841796875, ["z"]= 8.2079219818115},
		[95] =		{["x"]=-1046.548828125, ["y"]= 1394.982421875, ["z"]= 8.1995143890381},
		[96] =		{["x"]=-1048.7345703125, ["y"]= 1334.7841796875, ["z"]= 8.1996946334839 },
		[97] =		{["x"]=-1047.0849609375, ["y"]= 1326.60546875, ["z"]= 8.1904487609863},
		[98] =		{["x"]=-1039.6943359375, ["y"]= 1246.41015625, ["z"]= 8.1923551559448},
		[99] =		{["x"]=-1002.4013671875, ["y"]= 1285.8603515625, ["z"]= 9.3329420089722},
		[100] =		{["x"]=-940.1513671875, ["y"]= 1300.4736328125, ["z"]= 10.723773002625},
		[101] =		{["x"]=-870.2509765625, ["y"]= 1291.6015625, ["z"]= 10.763916969299},
		[102] =		{["x"]=-864.4111328125, ["y"]= 1208.7607421875, ["z"]= 10.746344566345 },
		[103] =		{["x"]=-861.5400390625, ["y"]= 1192.142578125, ["z"]= 10.747491836548},
		[104] =		{["x"]=-868.7333984375, ["y"]= 1080.0751953125, ["z"]= 10.443130493164},
		[105] =		{["x"]=-875.1611328125, ["y"]= 821.3193359375, ["z"]= 10.439335823059},
		[106] =		{["x"]=-780.2763671875, ["y"]= 752.4375, ["z"]= 10.443333625793},
		[107] =		{["x"]=-688.880859375, ["y"]= 746.158203125, ["z"]= 10.442049026489},
		[108] =		{["x"]=-679.0244140625, ["y"]= 679.642578125, ["z"]= 10.438767433167 },
		[109] =		{["x"]=-679.1474609375, ["y"]= 664.2041015625, ["z"]= 10.44668006897},
		[110] =		{["x"]=-685.5068359375, ["y"]= 588.197265625, ["z"]= 10.44997882843},
		[111] =		{["x"]=-712.6826171875, ["y"]= 568.599609375, ["z"]= 10.453676223755},
		[112] =		{["x"]=-754.8642578125, ["y"]= 566.580078125, ["z"]= 10.453708648682},
		[113] =		{["x"]=-819.517578125, ["y"]= 571.7607421875, ["z"]= 10.453722953796}
	}
}

local FactionName = 
{
	[1] = {[1]="La Cosa Nostra", [2]="La Cosa Nostra"},
	[2] = {[1]="Colombian Mafia", [2]="Colombian Mafia"},
	[3] = {[1]="Mexican cartel", [2]="Mexican cartel"},
	[4] = {[1]="Triada", [2]="Triada"},
	[5] = {[1]="City Hall of Vice", [2]="[City Hall]"},
	[6] = {[1]="Vice News", [2]="[VCN]"},
	[7] = {[1]="Vice City Hospital", [2]="[EMS]"},
	[8] = {[1]="Vice City Police Department", [2]="[Police]"},
	[9]	= {[1]="Vice City Army", [2]="[Army]"}
}

local FactionRankName = 
{
	[1] = {[1]="Новицио", 			[2]="Ассосиато", 			[3]="Сомбаттенте", 		[4]="Cолдато", 		[5]="Боец", 				[6]="Сотто-Капо", 		[7]="Капо", 			[8]="Младший Босс", 	[9]="Консильере", 			[10]="Дон"			},
	[2] = {[1]="Гринго", 			[2]="Экстрано", 			[3]="Новато", 			[4]="Ординарто", 	[5]="Компробадо", 			[6]="Латино", 			[7]="Амиго", 			[8]="Солдато", 			[9]="Падро", 				[10]="Санто-падро"	},
	[3] = {[1]="Информатор", 		[2]="Килла", 				[3]="Соколы", 			[4]="Кобры", 		[5]="Новые Лос Сетас", 		[6]="Старейшие Кобры", 	[7]="Старые Сетас", 	[8]="Скорпион", 		[9]="Правая рука", 			[10]="Лидер картеля"},
	[4] = {[1]="Ксинрен", 			[2]="Жай", 					[3]="Си Ку Жай", 		[4]="Кван", 		[5]="Жингян", 				[6]="Хунч Кван", 		[7]="Шу Хай", 			[8]="ЧиЧанг Джа", 		[9]="Синг Фу", 				[10]="Лунг Тао"		},
	[5] = {[1]="Водитель", 			[2]="Охранник", 			[3]="Нач. Охраны", 		[4]="Секретарь", 	[5]="Ген. Прокурор", 		[6]="Советник по НБ", 	[7]="Лицензер", 		[8]="Советник по МЗ", 	[9]="Вице-губернатор", 		[10]="Губернатор"	},
	[6] = {[1]="Стажер", 			[2]="Пом. редакции", 		[3]="Техник", 			[4]="Репортер", 	[5]="Оператор", 			[6]="Ведущий", 			[7]="Режиссёр", 		[8]="Редактор", 		[9]="Главный редактор", 	[10]="Директор"		},
	[7] = {[1]="Интерн", 			[2]="Фельдшер", 			[3]="Участковый врач", 	[4]="Терапевт", 	[5]="Проктолог", 			[6]="Окулист", 			[7]="Хирург", 			[8]="Зав. отделением", 	[9]="Заместитель ГВ", 		[10]="Глав. врач"	},
	[8] = {[1]="Студент академии",	[2]="Офицер", 				[3]="Офицер II", 		[4]="Офицер III", 	[5]="Офицер III+1", 		[6]="Сержант", 			[7]="Детектив", 		[8]="Лейтенант", 		[9]="Помощник Шефа", 		[10]="Шеф полиции"	},
	[9]	= {[1]="Рекрут",			[2]="Капрал",				[3]="Сержант",			[4]="Сержант-майор",[5]="Лейтенант",			[6]="Первый Лейтенант",	[7]="Капитан", 			[8]="Майор",			[9]="Полковник",			[10]="Генерал"		}
}

local FuelStation = 
{
	[1] = 	{["x"]=57.70703125, 		["y"]=-1075.2431640625, ["z"]=10.571338653564, 	["Zp"] = 1},
	[2] = 	{["x"]=39.0263671875, 		["y"]=-1058.6845703125, ["z"]=10.571255683899, 	["Zp"] = 1},
	[3] = 	{["x"]=-870.9267578125, 	["y"]=-581.7626953125, 	["z"]=10.639800071716, 	["Zp"] = 2},
	[4] = 	{["x"]=-862.0224609375, 	["y"]=-561.1953125, 	["z"]=10.641886711121,	["Zp"] = 2},
	[5] = 	{["x"]=-1610.2529296875, 	["y"]=-715.4169921875, 	["z"]=14.821483612061,	["Zp"] = 3},
	[6] = 	{["x"]=74.9814453125, 		["y"]=970.59765625, 	["z"]=10.805155754089,	["Zp"] = 4},
	[7]	= 	{["x"]=53.5078125, 			["y"]=961.4375, 		["z"]=10.805155754089,	["Zp"] = 4},
	[8] = 	{["x"]=-954.3662109375, 	["y"]=1337.3115234375, 	["z"]=10.722260475159,	["Zp"] = 5},
	[9] = 	{["x"]=-743.833984375, 		["y"]=-1357.6025390625, ["z"]=10.908172607422,	["Zp"] = 6},
	[10] = 	{["x"]=-712.5517578125, 	["y"]=-1355.673828125, 	["z"]=10.807598114014,	["Zp"] = 6},
	[11] = 	{["x"]=198.544921875, 		["y"]=-498.8154296875, 	["z"]=11.53725528717, 	["Zp"] = 7}
}

local mrkStation =
{
	[1] = {["x"]=56.50390625,		["y"]=-1079.095703125, 	["z"]=10.423915863037,	["Zp"]=1	},
	[2] = {["x"]=56.10546875,		["y"]=-1071.802734375, 	["z"]=10.43165397644,	["Zp"]=1	},
	[3] = {["x"]=61.03125,			["y"]=-1071.080078125, 	["z"]=10.43165397644,	["Zp"]=1	},
	[4] = {["x"]=60.931640625,		["y"]=-1078.44921875, 	["z"]=10.423915863037,	["Zp"]=1	},
	[5] = {["x"]=42.349609375,		["y"]=-1060.6298828125, ["z"]=10.423915863037,	["Zp"]=1	},
	[6] = {["x"]=34.9580078125,		["y"]=-1060.572265625, 	["z"]=10.423915863037,	["Zp"]=1	},
	[7] = {["x"]=34.376953125,		["y"]=-1055.2080078125, ["z"]=10.423915863037,	["Zp"]=1	},
	[8] = {["x"]=41.52734375,		["y"]=-1055.7578125, 	["z"]=10.423915863037,	["Zp"]=1	},
	[9] = {["x"]=-866.5048828125,	["y"]=-583.9462890625,	["z"]=11.054308891296,	["Zp"]=2	},
	[10] = {["x"]=-873.591796875,	["y"]=-584.9228515625,	["z"]=11.047645568848,	["Zp"]=2	},
	[11] = {["x"]=-874.4189453125,	["y"]=-580.9951171875,	["z"]=11.045912742615,	["Zp"]=2	},
	[12] = {["x"]=-867.6015625,		["y"]=-579.9384765625,	["z"]=11.050278663635,	["Zp"]=2	},
	[13] = {["x"]=-863.126953125,	["y"]=-565.4453125,		["z"]=11.050896644592,	["Zp"]=2	},
	[14] = {["x"]=-863.7880859375,	["y"]=-557.841796875,	["z"]=11.051538467407,	["Zp"]=2	},
	[15] = {["x"]=-859.904296875,	["y"]=-557.3203125,		["z"]=11.044237136841,	["Zp"]=2	},
	[16] = {["x"]=-858.9990234375,	["y"]=-564.6884765625,	["z"]=11.045331954956,	["Zp"]=2	},
	[17] = {["x"]=-1613.630859375,	["y"]=-719.2548828125,	["z"]=14.821483612061,	["Zp"]=3	},
	[18] = {["x"]=-1607.076171875,	["y"]=-715.3994140625,	["z"]=14.821483612061,	["Zp"]=3	},
	[19] = {["x"]=-1608.6220703125,	["y"]=-711.3798828125,	["z"]=14.821483612061,	["Zp"]=3	},
	[20] = {["x"]=-1615.51953125,	["y"]=-715.3994140625,	["z"]=14.821483612061,	["Zp"]=3	},
	[21] = {["x"]=78.75390625,		["y"]=972.123046875,	["z"]=10.80312538147,	["Zp"]=4	},
	[22] = {["x"]=71.8349609375,	["y"]=972.4873046875,	["z"]=10.80312538147,	["Zp"]=4	},
	[23] = {["x"]=71.6787109375,	["y"]=967.51953125,		["z"]=10.80312538147,	["Zp"]=4	},
	[24] = {["x"]=78.4150390625,	["y"]=967.41015625,		["z"]=10.80312538147,	["Zp"]=4	},
	[25] = {["x"]=55.1259765625,	["y"]=957.8486328125,	["z"]=10.80312538147,	["Zp"]=4	},
	[26] = {["x"]=54.7294921875,	["y"]=964.099609375,	["z"]=10.80312538147,	["Zp"]=4	},
	[27] = {["x"]=50.09765625,		["y"]=964.68359375,		["z"]=10.80312538147,	["Zp"]=4	},
	[28] = {["x"]=49.986328125,		["y"]=957.99609375,		["z"]=10.80312538147,	["Zp"]=4	},
	[29] = {["x"]=-952.4013671875,	["y"]=1333.59765625,	["z"]=11.096260070801,	["Zp"]=5	},
	[30] = {["x"]=-952.2958984375,	["y"]=1340.4541015625,	["z"]=11.1022605896,	["Zp"]=5	},
	[31] = {["x"]=-958.099609375,	["y"]=1340.7578125,		["z"]=11.1022605896,	["Zp"]=5	},
	[32] = {["x"]=-958.251953125,	["y"]=1333.4345703125,	["z"]=11.096260070801,	["Zp"]=5	},
	[33] = {["x"]=-743.9296875,		["y"]=-1353.15625,		["z"]=11.157481193542,	["Zp"]=6	},
	[34] = {["x"]=-746.4853515625,	["y"]=-1360.14453125,	["z"]=11.313439369202,	["Zp"]=6	},
	[35] = {["x"]=-741.677734375,	["y"]=-1361.8232421875,	["z"]=11.280728340149,	["Zp"]=6	},
	[36] = {["x"]=-738.9248046875,	["y"]=-1355.3115234375,	["z"]=11.13060760498,	["Zp"]=6	},
	[37] = {["x"]=-716.3671875,		["y"]=-1352.6318359375,	["z"]=11.047629356384,	["Zp"]=6	},
	[38] = {["x"]=-713.8623046875,	["y"]=-1359.06640625,	["z"]=11.047629356384,	["Zp"]=6	},
	[39] = {["x"]=-708.060546875,	["y"]=-1357.013671875,	["z"]=11.047629356384,	["Zp"]=6	},
	[40] = {["x"]=-710.5517578125,	["y"]=-1350.4755859375,	["z"]=11.047629356384,	["Zp"]=6	},
	[41] = {["x"]=195.62890625,		["y"]=-495.330078125,	["z"]=11.282247543335,	["Zp"]=7	},
	[42] = {["x"]=195.7041015625,	["y"]=-502.67578125,	["z"]=11.333477973938,	["Zp"]=7	},
	[43] = {["x"]=200.2451171875,	["y"]=-495.595703125,	["z"]=11.512843132019,	["Zp"]=7	}
}

local mrkColorVeh = 
{
	[1] = {	["x"]=326.912109375,	["y"]=430.8603515625, 		["z"]=11.176243782043	},
	[2] = {	["x"]=-9.748046875,		["y"]=-1257.2744140625, 	["z"]=10.426681518555	},
	[3] = {	["x"]=-872.4541015625,	["y"]=-117.5546875, 		["z"]=11.064699172974	}
}

local AnimList = 
{
	[0] = {["Block"]="DANCING", 		["Anim"]="dnce_m_a"			},
	[1] = {["Block"]="DANCING", 		["Anim"]="dnce_m_b"			},
	[2] = {["Block"]="DANCING", 		["Anim"]="dnce_m_c"			},
	[3] = {["Block"]="DANCING", 		["Anim"]="dnce_m_d"			},
	[4] = {["Block"]="DANCING", 		["Anim"]="dnce_m_e"			},
	[5] = {["Block"]="DANCING", 		["Anim"]="dan_left_a"		},
	[6] = {["Block"]="on_lookers", 		["Anim"]="wave_loop"		},
	[7] = {["Block"]="beach", 			["Anim"]="bather"			},
	[8] = {["Block"]="ped", 			["Anim"]="walk_drunk"		},
	[9] = {["Block"]="ped", 			["Anim"]="crouch_roll_l"	},
	[10] = {["Block"]="ped", 			["Anim"]="endchat_03"		},
	[11] = {["Block"]="benchpress", 	["Anim"]="gym_bp_celebrate"	},
	[12] = {["Block"]="ped", 			["Anim"]="cower"			},
	[13] = {["Block"]="bomber", 		["Anim"]="bom_plant"		},
	[14] = {["Block"]="shop", 			["Anim"]="rob_shifty"		},
	[15] = {["Block"]="shop", 			["Anim"]="rob_loop_threat"	},
	[16] = {["Block"]="food", 			["Anim"]="eat_vomit_p"		},
	[17] = {["Block"]="food", 			["Anim"]="eat_burger"		},
	[18] = {["Block"]="sweet", 			["Anim"]="sweet_ass_slap"	},
	[19] = {["Block"]="dealer", 		["Anim"]="dealer_deal"		},
	[20] = {["Block"]="crack", 			["Anim"]="crckdeth2"		},
	[21] = {["Block"]="lowrider", 		["Anim"]="m_smklean_loop"	},
	[22] = {["Block"]="lowrider", 		["Anim"]="f_smklean_loop"	},
	[23] = {["Block"]="beach", 			["Anim"]="parksit_m_loop"	},
	[24] = {["Block"]="park", 			["Anim"]="tai_chi_loop"		},
	[25] = {["Block"]="bar", 			["Anim"]="dnk_stndf_loop"	},
	[26] = {["Block"]="dancing", 		["Anim"]="dan_right_a"		},
	[27] = {["Block"]="bsktball", 		["Anim"]="bball_def_loop"	},
	[28] = {["Block"]="misc", 			["Anim"]="plyr_shkhead"		},
	[29] = {["Block"]="bsktball", 		["Anim"]="bball_idle"		}
}

function isEventHandlerAdded( sEventName, pElementAttachedTo, func )
	if 
		type( sEventName ) == 'string' and 
		isElement( pElementAttachedTo ) and 
		type( func ) == 'function' 
	then
		local aAttachedFunctions = getEventHandlers( sEventName, pElementAttachedTo )
		if type( aAttachedFunctions ) == 'table' and #aAttachedFunctions > 0 then
			for i, v in ipairs( aAttachedFunctions ) do
				if v == func then
					return true
				end
			end
		end
	end
	return false
end

function rentMenu( hit, dim )
	if(hit ~= nil) then
		if(getElementType(hit) == "player") then
			if(getElementData(hit, "Login") == true) then
				local veh = getPedOccupiedVehicle(hit)
				if(veh == false or veh == nil) then
					showPlayerDialog(hit, 100, 1, "Аренда велосипеда", "Действительно ли Вы хотите арендовать велосипед?\nСтоимость аренды велосипеда: 50$\nЕсли в течение 5 минут за рулем велосипеда никого не будет,\nОн будет отправлен обратно на парковку.", "Да", "Нет")
				end
			end
		end
	end
end

function rentMenuk( hit, dim )
	if(hit ~= nil) then
		if(getElementType(hit) == "player") then
			if(getElementData(hit, "Login") == true) then
				local veh = getPedOccupiedVehicle(hit)
				if(veh == false or veh == nil) then
					showPlayerDialog(hit, 115, 1, "Аренда велосипеда", "Действительно ли Вы хотите арендовать велосипед?\nСтоимость аренды велосипеда: 50$\nЕсли в течение 5 минут за рулем велосипеда никого не будет,\nОн будет отправлен обратно на парковку.\n#ee3300 * Рядом с велосипедом будет создан GPS-маркер", "Да", "Нет")
				end
			end
		end
	end
end

function rentMenud( hit, dim )
	if(hit ~= nil) then
		if(getElementType(hit) == "player") then
			if(getElementData(hit, "Login") == true) then
				local veh = getPedOccupiedVehicle(hit)
				if(veh == false or veh == nil) then
					showPlayerDialog(hit, 116, 1, "Аренда велосипеда", "Действительно ли Вы хотите арендовать велосипед?\nСтоимость аренды велосипеда: 50$\nЕсли в течение 5 минут за рулем велосипеда никого не будет,\nОн будет отправлен обратно на парковку.\n#ee3300 * Рядом с велосипедом будет создан GPS-маркер", "Да", "Нет")
				end
			end
		end
	end
end

rentVehInfo[1] = {}

for i, n in pairs(rentCarVeh[1]) do
	rentVehInfo[1][i] = {}
	rentVehInfo[1][i]["Car"] = createVeh(n["Model"], n["x"], n["y"], n["z"], 0, 0, n["Rot"])
	local veh = rentVehInfo[1][i]["Car"]
	SED(veh, "rentCar", true)
	SED(veh, "rentPrice", n["Price"])
end

rentVehInfo[3] = {}

for i, n in pairs(rentCarVeh[3]) do
	rentVehInfo[3][i] = {}
	rentVehInfo[3][i]["Car"] = createVeh(n["Model"], n["x"], n["y"], n["z"], 0, 0, n["Rot"])
	local veh = rentVehInfo[3][i]["Car"]
	SED(veh, "rentCar", true)
	SED(veh, "rentPrice", n["Price"])
end

rentVehInfo[4] = {}

for i, n in pairs(rentCarVeh[4]) do
	rentVehInfo[4][i] = {}
	rentVehInfo[4][i]["Car"] = createVeh(n["Model"], n["x"], n["y"], n["z"], 0, 0, n["Rot"])
	local veh = rentVehInfo[4][i]["Car"]
	SED(veh, "rentCar", true)
	SED(veh, "rentPrice", n["Price"])
end

function rentMenus( hit, dim )
	if(hit ~= nil) then
		if(getElementType(hit) == "player") then
			if(getElementData(hit, "Login") == true) then
				local veh = getPedOccupiedVehicle(hit)
				if(veh == false or veh == nil) then
					showPlayerDialog(hit, 101, 1, "Аренда велосипеда", "Действительно ли Вы хотите арендовать велосипед?\nСтоимость аренда велосипеда: 50$\nЕсли в течение 5 минут за рулем велосипеда никого не будет,\nОн будет отправлен обратно на парковку.", "Да", "Нет")
				end
			end
		end
	end
end

local SkinTable =
{
    [1]     =   {   ["ID"] = 303,   ["Price"] = 500    },
    [2]     =   {   ["ID"] = 13,    ["Price"] = 600    },
    [3]     =   {   ["ID"] = 14,    ["Price"] = 650    },
    [4]     =   {   ["ID"] = 15,    ["Price"] = 500    },
    [5]     =   {   ["ID"] = 144,   ["Price"] = 550    },
    [6]     =   {   ["ID"] = 19,    ["Price"] = 750    },
    [7]     =   {   ["ID"] = 66,    ["Price"] = 900    },
    [8]     =   {   ["ID"] = 180,   ["Price"] = 750    },
    [9]     =   {   ["ID"] = 299,   ["Price"] = 5200   },
    [10]    =   {   ["ID"] = 159,   ["Price"] = 680    },
    [11]    =   {   ["ID"] = 161,   ["Price"] = 785    },
    [12]    =   {   ["ID"] = 200,   ["Price"] = 410    },
    [13]    =   {   ["ID"] = 131,   ["Price"] = 1200   },
    [14]    =   {   ["ID"] = 106,   ["Price"] = 1000   },
    [15]    =   {   ["ID"] = 191,   ["Price"] = 1500   },
    [16]    =   {   ["ID"] = 56,    ["Price"] = 1150   },
    [17]    =   {   ["ID"] = 59,    ["Price"] = 2400   },
    [18]    =   {   ["ID"] = 60,    ["Price"] = 3100   },
    [19]    =   {   ["ID"] = 44,    ["Price"] = 700    },
    [20]    =   {   ["ID"] = 47,    ["Price"] = 1700   },
    [21]    =   {   ["ID"] = 309,   ["Price"] = 800    },
    [22]    =   {   ["ID"] = 192,   ["Price"] = 2800   },
    [23]    =   {   ["ID"] = 193,   ["Price"] = 3111   },
    [24]    =   {   ["ID"] = 223,   ["Price"] = 3100   },
    [25]    =   {   ["ID"] = 226,   ["Price"] = 10000  },
    [26]    =   {   ["ID"] = 170,   ["Price"] = 1800   },
    [27]    =   {   ["ID"] = 270,   ["Price"] = 1600   },
    [28]    =   {   ["ID"] = 233,   ["Price"] = 1050   },
    [29]    =   {   ["ID"] = 135,   ["Price"] = 1000   },
    [30]    =   {   ["ID"] = 239,   ["Price"] = 1000   },
    [31]    =   {   ["ID"] = 73,    ["Price"] = 1200   },
    [32]    =   {   ["ID"] = 240,   ["Price"] = 1300   },
    [33]    =   {   ["ID"] = 120,   ["Price"] = 2900   },
    [34]    =   {   ["ID"] = 184,   ["Price"] = 1000   },
    [35]    =   {   ["ID"] = 206,   ["Price"] = 1160   },
    [36]    =   {   ["ID"] = 25,    ["Price"] = 1280   },
    [37]    =   {   ["ID"] = 211,   ["Price"] = 1500   },
    [38]    =   {   ["ID"] = 152,   ["Price"] = 1650   },
    [39]    =   {   ["ID"] = 91,    ["Price"] = 3200   },
    [40]    =   {   ["ID"] = 93,    ["Price"] = 1950   },
    [41]    =   {   ["ID"] = 62,    ["Price"] = 800    },
    [42]    =   {   ["ID"] = 78,    ["Price"] = 980    },
    [43]    =   {   ["ID"] = 23,    ["Price"] = 1200   },
    [44]    =   {   ["ID"] = 27,    ["Price"] = 1150   },
    [45]    =   {   ["ID"] = 201,   ["Price"] = 1350   },
    [46]    =   {   ["ID"] = 178,   ["Price"] = 1050   },
    [47]    =   {   ["ID"] = 148,   ["Price"] = 1650   },
    [48]    =   {   ["ID"] = 79,    ["Price"] = 950    },
    [49]    =   {   ["ID"] = 157,   ["Price"] = 1250   },
    [50]    =   {   ["ID"] = 225,   ["Price"] = 1350   },
    [51]    =   {   ["ID"] = 87,    ["Price"] = 1550   },
    [52]    =   {   ["ID"] = 76,    ["Price"] = 1850   },
    [53]    =   {   ["ID"] = 100,   ["Price"] = 2300   }
}

local BusVehTable 	= 	{}
local afd = getRealTime()
local payDay = afd.hour
local payMin = false
local kickt = {}
local exitFromHouse = {}
spawnX, spawnY, spawnZ = -1392.142578125, -877.5107421875, 20.86149597168 
local pckBusinessExit = {}
ServerPerem["Malibot"] = createPed(171, 469.3447265625, -52.037109375, 11.445568084717)
setElementRotation(ServerPerem["Malibot"], 0, 0, 220)
setPedAnimation(ServerPerem["Malibot"], "int_shop", "shop_cashier", 4200, true)

ServerPerem["MalibotT"] = setTimer(function ( ped )
	if(isElement(ped)) then
		setPedAnimation(ped, "int_shop", "shop_cashier", 2000, true, false)
		SEP(ped, 469.3447265625, -52.037109375, 11.445568084717)
		setElementRotation(ped, 0, 0, 220)
	else
		killTimer(ServerPerem["MalibotT"])
		ServerPerem["MalibotT"] = nil
	end
end, 1950, 0, ServerPerem["Malibot"])

local pckFuelStation = {}
local pckArmyEnter = createPickup(-1721.3603515625, -156.2041015625, 14.827548980713, 3, 1318, 0)
local pckArmyExit = createPickup(-1312.896484375, -651.998046875, 999.53125, 3, 1318, 0)
SET(pckArmyExit, 6)
local pckAsh = createPickup(263.6533203125, -112.3076171875, 1117.6081542969, 3, 1239, 0)
local mafint = {}
for i=1,4 do
	mafint[i] = {}
end
mafint[1][1] = createPickup(297.1259765625, 288.0439453125, 17.675939559937, 3, 1318, 0)
mafint[1][2] = createPickup(1123.685546875, -97.7001953125, 998.50579833984, 3, 1318, 0)
mafint[2][1] = createPickup(-1120.3876953125, -182.138671875, 11.364170074463, 3, 1318, 0)
mafint[2][2] = createPickup(1123.685546875, -97.7001953125, 998.50579833984, 3, 1318, 0)
mafint[3][1] = createPickup(-1068.7919921875, 343.423828125, 11.21955871582, 3, 1318, 0)
mafint[3][2] = createPickup(1123.685546875, -97.7001953125, 998.50579833984, 3, 1318, 0)
mafint[4][1] = createPickup(-123.5947265625, -1384.4443359375, 10.419187545776, 3, 1318, 0)
mafint[4][2] = createPickup(1123.685546875, -97.7001953125, 998.50579833984, 3, 1318, 0)
for i,n in pairs(mafint) do
	SET(mafint[i][2], 2)
	SIDP(mafint[i][2], i)
	SED(mafint[i][1], "mafint1", i)
	SED(mafint[i][2], "mafint2", i)
end
create3dtextlabel(263.6533203125, -112.3076171875, 1116.6081542969, "ПДД")
local weaponPoliceDep = createPickup(401.8701171875, -492.0556640625, 10.829787254333, 3, 348, 0)
local skinPoliceDep = createPickup(404.2099609375, -489.9560546875, 12.30421257019, 3, 1275, 0)
SIDP(weaponPoliceDep, 1)
SIDP(skinPoliceDep, 1)
local pckEatArmy = createPickup(-1299.0888671875, -651.8759765625, 999.53125, 3, 7510, 0)
local pckHospEnter = createPickup(-139.8173828125, -982.0869140625, 10.42399597168, 3, 1318, 0)
local pckHospExit = createPickup(-1240.248046875, -657.9931640625, 999.5703125, 3, 1318, 0)
SET(pckHospExit, 1)
SET(pckEatArmy, 6)
create3dtextlabel(-1299.0888671875, -651.8759765625, 999.53125, "ВОЕННЫЕ ОБЕДЫ")
local skinVCNews = createPickup(-518.4853515625, 775.431640625, 97.470069885254, 3, 1275, 0)
local skinVCHosp = createPickup(-1264.5673828125, -649.1796875, 999.5703125, 3, 1275, 0)
SET(skinVCHosp, 1)
local enterMer = createPickup(-347.45703125, 1291.7314453125, 12.453685760498, 3, 1318, 0)
local exitMer = createPickup(390.27734375, 173.69140625, 1008.3828125, 3, 1318, 0)
local mrkWorkMer = createMarker(369.966796875, 188.02734375, 1007.3893432617, "cylinder", 1.8, 220, 0, 0, 220, getRootElement())
local pckMerPass = createPickup(359.2421875, 167.263671875, 1008.3828125, 3, 1314, 0)
create3dtextlabel(359.2421875, 167.263671875, 1008.3828125, "ПОЛУЧЕНИЕ ПАСПОРТА")
local workMail = createPickup(294.900390625, -297.62109375, 11.91587638855, 3, 1275, 0)
local enterAsh = createPickup(87.93359375, -804.25390625, 11.690776824951, 3, 1318, 0)
local exitAsh = createPickup(249.9130859375, -95.099609375, 1117.6081542969, 3, 1318, 0)
local mrkAsh = createMarker(257.1533203125, -90.431640625, 1116.6081542969, "cylinder", 1.2, 220, 0, 0, 220, getRootElement())
local pckVCNEnter = createPickup(-507.5078125, 776.8779296875, 12.401481628418, 3, 1318, 0)
local pckVCNExit = createPickup(-548.53515625, 767.908203125, 97.470069885254, 3, 1318, 0)
local pckPoliceEnter = createPickup(-873.0908203125, -684.67578125, 11.269529342651, 3, 1318, 0)
local pckPoliceExit = createPickup(396.0791015625, -473.4296875, 12.30421257019, 3, 1318, 0)
SIDP(pckPoliceExit, 1)
local pckPoliceUp = createPickup(379.5263671875, -493.2890625, 12.297367095947, 3, 1318, 0)
SIDP(pckPoliceUp, 1)
local pckPoliceDown = createPickup(-886.57421875, -669.8173828125, 25.416595458984, 3, 1318, 0)
ServerPerem["pckmer"] = createPickup(358.9521484375, 199.8642578125, 1008.3828125, 3, 1275, 0)
SET(ServerPerem["pckmer"], 3)
local pckSkinArmy	= createPickup(-1680.6318359375, -137.9814453125, 14.827548980713, 3, 1275, 0)
local mrkWeaponArmy = createMarker(-1284.662109375, -649.8525390625, 998.53125, "cylinder", 1.6, 255, 0, 0, 220, getRootElement())
SET(mrkWeaponArmy, 6)
create3dtextlabel(-1284.662109375, -649.8525390625, 999.93125, "ВОЕННАЯ АМУНИЦИЯ")
mrkWeaponMaf[1] = createMarker(296.759765625, 292.1943359375, 16.683687210083, "cylinder", 1.6, 255, 0, 0, 220, getRootElement())
mrkWeaponMaf[2] = createMarker(-1062.412109375, -261.767578125, 11.05069732666, "cylinder", 1.6, 255, 0, 0, 220, getRootElement())
mrkWeaponMaf[3] = createMarker(-1097.42578125, 348.29296875, 10.441266059875, "cylinder", 1.6, 255, 0, 0, 220, getRootElement())
mrkWeaponMaf[4] = createMarker(-122.9443359375, -1391.744140625, 9.419187545776, "cylinder", 1.6, 255, 0, 0, 220, getRootElement())
local mrkBuyCar = createMarker(-1037.236328125, -846.498046875, 12.045195579529, "cylinder", 1.4, 220, 0, 0, 220, getRootElement())
local mrkSkinShop = createMarker(421.66015625, 1025.3154296875, 17.926605224609, "cylinder", 1.4, 220, 0, 0, 220, getRootElement())
ServerPerem["merweap"] = createMarker(359.0009765625, 213.375, 1007.3828125, "cylinder", 1.4, 220, 0, 0, 220, getRootElement())
create3dtextlabel(359.0009765625, 213.375, 1007.3828125, "Обмундирование мэрии")
SET(ServerPerem["merweap"], 3)
local mrkRentVeh = 	{}

createBlip(-855.48828125, -682.1953125, 11.205850601196, 30, 0.3, 255, 255, 255, 255, 0, 250)
createBlip(313.6142578125, 290.736328125, 16.141876220703, 58, 0.3, 255, 255, 255, 255, 0, 250)
createBlip(-1058.8369140625, -199.818359375, 11.396335601807, 60, 0.3, 255, 255, 255, 255, 0, 250)
createBlip(-1078.701171875, 321.2275390625, 11.21955871582, 61, 0.3, 255, 255, 255, 255, 0, 250)
createBlip(-130.1787109375, -1385.595703125, 10.419187545776, 59, 0.3, 255, 255, 255, 255, 0, 250)
createBlip(-335.859375, 1296.275390625, 12.459300994873, 35, 0.3, 255, 255, 255, 255, 0, 250)
createBlip(-500.171875, 774.6640625, 11.711654663086, 12, 0.3, 255, 255, 255, 255, 0, 250)
createBlip(-133.185546875, -979.8544921875, 10.423469543457, 22, 0.3, 255, 255, 255, 255, 0, 250)
createBlip(-1008.517578125, -868.81640625, 13.010986328125, 55, 0.3, 255, 255, 255, 255, 0, 250)
createBlip(-685.048828125, -1322.7666015625, 11.029188156128, 54, 0.3, 255, 255, 255, 255, 0, 250)
createBlip(-636.68359375, -1487.470703125, 13.583561897278, 9, 0.3, 255, 255, 255, 255, 0, 250)
createBlip(300.6279296875, -312.3603515625, 11.922214508057, 51, 0.3, 255, 255, 255, 255, 0, 250)
createBlip(-885.595703125, -1421.3291015625, 11.845725059509, 51, 0.3, 255, 255, 255, 255, 0, 250)
createBlip(95.3857421875, -809.2177734375, 10.425338745117, 36, 0.3, 255, 255, 255, 255, 0, 250)
createBlip(-1680.271484375, -218.1630859375, 14.827548980713, 6, 0.3, 255, 255, 255, 255, 0, 250)
createBlip(317.9892578125, 1217.65234375, 17.46044921875, 55, 0.3, 255, 255, 255, 255, 0, 250)
createBlip(-1170.3701171875, -944.3173828125, 14.826175689697, 55, 0.3, 255, 255, 255, 255, 0, 250)
createBlip(-396.2041015625, 909.560546875, 10.81372833252, 55, 0.3, 255, 255, 255, 255, 0, 250)
createBlip(414.6748046875, 1038.890625, 18.929637908936, 45, 0.3, 255, 255, 255, 255, 0, 250)
mrkRentVeh[4] = createMarker(-1021.970703125, -1147.72265625, 13.890312194824, "cylinder", 1.4, 220, 0, 0, 220, getRootElement())
create3dtextlabel(-1021.970703125, -1147.72265625, 14.590312194824, "Аренда велосипеда")
create3dtextlabel(-1021.970703125, -1147.72265625, 14.440312194824, "Стоимость: #ff660050$.")
addEventHandler("onMarkerHit", mrkRentVeh[4], rentMenud)
pckFuelStation[1] = createPickup(47.44140625, -1058.0634765625, 10.423915863037, 3, 1274, 0)
pckFuelStation[2] = createPickup(-860.220703125, -570.5458984375, 11.046189308167, 3, 1274, 0)
pckFuelStation[3] = createPickup(-1618.5029296875, -719.537109375, 14.821483612061, 3, 1274, 0)
pckFuelStation[4] = createPickup(66.2841796875, 969.9111328125, 10.80312538147, 3, 1274, 0)
pckFuelStation[5] = createPickup(-955.095703125, 1328.7998046875, 11.096260070801, 3, 1274, 0)
pckFuelStation[6] = createPickup(-715.2216796875, -1346.1845703125, 11.047629356384, 3, 1274, 0)
pckFuelStation[7] = createPickup(197.8623046875, -488.365234375, 11.16619682312, 3, 1274, 0)

SET(pckAsh, 5)
SET(weaponPoliceDep, 2)
SET(skinPoliceDep, 2)
SET(pckPoliceExit, 2)
SET(pckPoliceUp, 2)
SET(exitAsh, 5)
SET(pckMerPass, 3)
SET(mrkWorkMer, 3)
SET(exitMer, 3)
SET(mrkAsh, 5)

local PhoneNumbers		=	{}
local CourierVehTable 	= 	{}
local NameTable 		= 	{}
local PINTERVAL			= 	{}
local AdvertTable 		=	{} 
local TaxiVehTable 		= 	{}
local TINTERVAL 		= 	{}
local GPST 				= 	{}
local PrivateCar 		= 	{}
local AshCar			= 	{}
local Server 			= 	{}
local ArmyCar 			=	{}
local MedicCar			= 	{}
local VCNCar 			= 	{}
local PoliceCar			= 	{}
local MerCar			=	{}
local Maf1Car			=	{}
local Maf2Car			=	{}
local Maf3Car			=	{}
local Maf4Car			=	{}
local ArmyVeh			=	{}
local maxPhoneNumber 	=	100000
local FishBoat			=	{}

FishBoat[1] = createVeh(453, -599.248046875, -1507.041015625, 5.4499998092651, 0, 0, 250)
FishBoat[2] = createVeh(453, -576.7646484375, -1515.98828125, 5.4499998092651, 0, 0, 250)
FishBoat[3] = createVeh(453, -572.0849609375, -1507.8115234375, 5.4499998092651, 0, 0, 250)
FishBoat[4] = createVeh(453, -593.8662109375, -1497.5810546875, 5.5491027832031, 0, 0, 250)
FishBoat[5] = createVeh(453, -595.5126953125, -1519.446875, 5.4774689674377, 0, 0, 250)
FishBoat[6] = createVeh(453, -582.396484375, -1523.7041015625, 5.5841121673584, 0, 0, 250)
FishBoat[7] = createVeh(453, -583.8662109375, -1490.35546875, 5.4499998092651, 0, 0, 250)
FishBoat[8] = createVeh(453, -570.537109375, -1496.3486328125, 5.5957818031311, 0, 0, 250)

ArmyVeh[1] = createVeh(470, -1721.625, -115.986328125, 14.824159622192, 0, 0, 270)
ArmyVeh[2] = createVeh(470, -1721.1201171875, -132.462890625, 14.824159622192, 0, 0, 270)
ArmyVeh[3] = createVeh(470, -1721.416015625, -177.359375, 14.827548980713, 0, 0, 270)
ArmyVeh[4] = createVeh(470, -1721.6650390625, -194.0986328125, 14.827548980713, 0, 0, 270)
ArmyVeh[5] = createVeh(400, -1743.775390625, -211.3671875, 14.941987991333, 0, 0, 270)
ArmyVeh[6] = createVeh(400, -1745.572265625, -226.181640625, 14.94166469574, 0, 0, 270)
ArmyVeh[7] = createVeh(563, -1765.771484375, -234.826171875, 19.482578277588, 0, 0, 270)
ArmyVeh[8] = createVeh(431, -1688.0986328125, -291.05859375, 14.926104545593, 0, 0, 0)

Maf4Car[1] = createVeh(405, -153.87109375, -1389.8408203125, 10.419187545776)
Maf4Car[2] = createVeh(405, -153.6416015625, -1380.8994140625, 10.419187545776)
Maf4Car[3] = createVeh(405, -153.6416015625, -1369.9130859375, 10.419187545776)
Maf4Car[4] = createVeh(405, -153.9033203125, -1360.3662109375, 10.419187545776)
Maf4Car[5] = createVeh(554, -144.0048828125, -1364.6650390625, 10.419187545776)
Maf4Car[6] = createVeh(554, -146.66015625, -1385.0458984375, 10.419187545776)


Maf3Car[1] = createVeh(405, -1100.416015625, 286.2841796875, 12.217784881592)
Maf3Car[2] = createVeh(405, -1105.6484375, 286.0615234375, 12.217784881592)
Maf3Car[3] = createVeh(405, -1110.7412109375, 286.017578125, 12.217784881592)
Maf3Car[4] = createVeh(405, -1110.25390625, 301.6787109375, 12.217784881592, 0, 0, 180)
Maf3Car[5] = createVeh(554, -1105.373046875, 302.3447265625, 12.217784881592, 0, 0, 180)
Maf3Car[6] = createVeh(554, -1100.5380859375, 301.8701171875, 12.217784881592, 0, 0, 180)

Maf2Car[1] = createVeh(405, -1068.685546875, -172.3525390625, 11.359453201294)
Maf2Car[2] = createVeh(405, -1063.099609375, -172.3681640625, 11.322673797607)
Maf2Car[3] = createVeh(405, -1057.4384765625, -172.5517578125, 11.285978317261)
Maf2Car[4] = createVeh(405, -1051.513671875, -172.7431640625, 11.24426651001)
Maf2Car[5] = createVeh(554, -1046.0361328125, -164.9365234375, 11.224673271179)
Maf2Car[6] = createVeh(554, -1038.9619140625, -164.794921875, 11.246463775635)

Maf1Car[1] = createVeh(405, 307.6220703125, 265.3330078125, 16.171447753906)
Maf1Car[2] = createVeh(405, 298.40625, 299.671875, 16.298547744751)
Maf1Car[3] = createVeh(405, 316.4345703125, 298.58984375, 13.484812736511, 0, 0, 270)
Maf1Car[4] = createVeh(405, 315.697265625, 302.6015625, 13.484812736511, 0, 0, 270)
Maf1Car[5] = createVeh(554, 292.046875, 307.275390625, 13.484812736511, 0, 0, 270)
Maf1Car[6] = createVeh(554, 290.845703125, 314.02734375, 13.484812736511, 0, 0, 270)

MerCar[1] = createVeh(445, -445.265625, 1225.078125, 9.6421871185303)
MerCar[2] = createVeh(445, -451.75, 1225.078125, 9.6421871185303)
MerCar[3] = createVeh(445, -457.85546875, 1225.078125, 9.6421871185303)
MerCar[4] = createVeh(579, -464.220703125, 1225.078125, 9.6421871185303)
MerCar[5] = createVeh(579, -469.6064453125, 1225.078125, 9.6421871185303)
MerCar[6] = createVeh(409, -474.7763671875, 1223.578125, 9.6421871185303)

PoliceCar[1] = createVeh(596, -863.384765625, -666.29296875, 11.218256950378)
PoliceCar[2] = createVeh(596, -859.3134765625, -665.921875, 11.200000762939)
PoliceCar[3] = createVeh(523, -855.4384765625, -665.3857421875, 11.182938575745)
PoliceCar[4] = createVeh(523, -854.109375, -664.857421875, 11.177675247192)
PoliceCar[5] = createVeh(597, -851.37890625, -664.943359375, 11.164859771729)
PoliceCar[6] = createVeh(597, -847.984375, -664.990234375, 11.14902973175)
PoliceCar[7] = createVeh(598, -845.078125, -671.6875, 11.136763572693, 0, 0, 270)
PoliceCar[8] = createVeh(598, -844.2255859375, -675.75, 11.133115768433, 0, 0, 270)
PoliceCar[9] = createVeh(599, -844.5703125, -680.0380859375, 11.131694793701, 0, 0, 270)
PoliceCar[10] = createVeh(427, -893.7421875, -716.853515625, 11.141982078552, 0, 0, 180)
PoliceCar[11] = createVeh(525, -885.9140625, -716.791015625, 11.1300573349, 0, 0, 180)
PoliceCar[12] = createVeh(525, -895.5458984375, -699.2431640625, 11.154342651367)
PoliceCar[13] = createVeh(497, -879.595703125, -689.1201171875, 25.362586975098)

VCNCar[1] = createVeh(582, -600.416015625, 780.458984375, 11.556198120117, 0, 0, 270)
VCNCar[2] = createVeh(582, -600.1650390625, 784.0712890625, 11.556198120117, 0, 0, 270)
VCNCar[3] = createVeh(582, -600.2666015625, 801.8095703125, 11.50799369812, 0, 0, 270)
VCNCar[4] = createVeh(582, -600.60546875, 808.607421875, 11.482615470886, 0, 0, 270)

MedicCar[1] = createVeh(416, -120.436953125, -918.5810546875, 10.423469543457, 0, 0, 100)
MedicCar[2] = createVeh(416, -118.4794921875, -924.431640625, 10.423469543457, 0, 0, 100)
MedicCar[3] = createVeh(416, -116.4736328125, -931.447265625, 10.423469543457, 0, 0, 100)
MedicCar[4] = createVeh(416, -115.6015625, -937.4111328125, 10.423469543457, 0, 0, 100)
MedicCar[5] = createVeh(416, -115.0234375, -944.490234375, 10.41622543335, 0, 0, 100)
MedicCar[6] = createVeh(416, -113.69921875, -949.4111328125, 10.41622543335, 0, 0, 100)
MedicCar[7] = createVeh(400, -200.736328125, -946.6044921875, 10.430963516235, 0, 0, 180)
MedicCar[8] = createVeh(400, -197.251953125, -945.48046875, 10.434222221375, 0, 0, 180)
MedicCar[9] = createVeh(400, -194.068359375, -944.892578125, 10.433151245117, 0, 0, 180)

CourierVehTable[1] = createVeh(499, -922.5400390625, -1388.3212890625, 11.57614402771, 0, 0, 300)
CourierVehTable[2] = createVeh(499, -933.0087890625, -1384.0751953125, 11.592994689941, 0, 0, 300)
CourierVehTable[3] = createVeh(499, -942.5166015625, -1379.560546875, 11.588871955872, 0, 0, 300)
CourierVehTable[4] = createVeh(499, -953.8642578125, -1374.03515625, 11.642669677734, 0, 0, 300)
CourierVehTable[5] = createVeh(499, -915.625, -1391.4755859375, 11.57580280304, 0, 0, 300)
CourierVehTable[6] = createVeh(499, -911.18359375, -1393.6474609375, 11.599380493164, 0, 0, 300)
CourierVehTable[7] = createVeh(499, -906.046875, -1396.5888671875, 11.628121376038, 0, 0, 300)
CourierVehTable[8] = createVeh(499, -899.8359375, -1399.408203125, 11.682426452637, 0, 0, 300)

ArmyCar[1] = createVeh(433, -1608.607421875, -208.62890625, 14.824159622192, 0, 0, 90)
ArmyCar[2] = createVeh(433, -1608.607421875, -218.62890625, 14.824159622192, 0, 0, 90)
ArmyCar[3] = createVeh(433, -1608.607421875, -228.62890625, 14.824159622192, 0, 0, 90)
ArmyCar[4] = createVeh(433, -1608.607421875, -238.62890625, 14.824159622192, 0, 0, 90)

AshCar[1] = createVeh(546, 79.98046875, -761.611328125, 10.425338745117, 0, 0, 240)
AshCar[2] = createVeh(546, 81.751953125, -756.09375, 10.425338745117, 0, 0, 240)
AshCar[3] = createVeh(546, 83.998046875, -749.4189453125, 10.425338745117, 0, 0, 240)
AshCar[4] = createVeh(546, 87.509765625, -740.841796875, 10.425338745117, 0, 0, 240)
AshCar[5] = createVeh(546, 94.8876953125, -735.4765625, 10.425338745117, 0, 0, 150)
AshCar[6] = createVeh(546, 102.0146484375, -739.62109375, 10.425338745117, 0, 0, 150)
AshCar[7] = createVeh(546, 109.2392578125, -740.1376953125, 10.425338745117, 0, 0, 150)
AshCar[8] = createVeh(546, 114.6123046875, -744.5, 10.425338745117, 0, 0, 65)
AshCar[9] = createVeh(546, 110.73046875, -754.6435546875, 10.425338745117, 0, 0, 65)
AshCar[10] = createVeh(546, 106.806640625, -762.92578125, 10.425338745117, 0, 0, 65)

for i, n in pairs(FishBoat) do
	SED(n, "FishID", i)
end

if(mysql ~= false) then 
  local query = dbQuery(mysql, "SELECT * FROM `Accounts` ORDER by `PhoneNumber` DESC LIMIT 0,1")
  local result = dbPoll(query, -1)

  if(result ~= nil) then
    if(result[1] ~= nil) then
      if(result[1]["PhoneNumber"] ~= nil) then
        if(result[1]["PhoneNumber"] > 99999) then
          maxPhoneNumber = result[1]["PhoneNumber"]
        end
      end
    end
  end

end

local result = nil


for i, n in pairs(ArmyVeh) do
	SED(n, "ArmyVeh", i)
	SED(n, "Fuel", 100)
	setElementHealth(n, 1000)
	setVehicleColor(n, 105, 131, 57, 255, 20, 147)
	SED(n, "FactionCar", true)
end

for i, n in pairs(Maf4Car) do
	SED(n, "Maf4Car", i)
	SED(n, "Fuel", 100)
	setElementHealth(n, 1000)
	setVehicleColor(n, 40, 0, 0, 40, 0, 0)
	if(i >= 5) then
		SED(n, "MafYash", 0)
	end
	SED(n, "FactionCar", true)
end

for i, n in pairs(Maf3Car) do
	SED(n, "Maf3Car", i)
	SED(n, "Fuel", 100)
	setElementHealth(n, 1000)
	setVehicleColor(n, 0, 50, 60, 0, 50, 60)
	if(i >= 5) then
		SED(n, "MafYash", 0)
	end
	SED(n, "FactionCar", true)
end

for i, n in pairs(Maf2Car) do
	SED(n, "Maf2Car", i)
	SED(n, "Fuel", 100)
	setVehicleColor(n, 60, 30, 0, 60, 30, 0)
	setElementRotation(n, 0, 0, 180)
	setElementHealth(n, 1000)
	if(i >= 5) then
		SED(n, "MafYash", 0)
	end
	SED(n, "FactionCar", true)
end

for i, n in pairs(Maf1Car) do
	SED(n, "Maf1Car", i)
	SED(n, "Fuel", 100)
	setVehicleColor(n, 30, 0, 50, 30, 0, 50)
	setElementHealth(n, 1000)
	if(i >= 5) then
		SED(n, "MafYash", 0)
	end
	SED(n, "FactionCar", true)
end


for i, n in pairs(MerCar) do
	SED(n, "Fuel", 100)
	setElementHealth(n, 1000)
	setVehicleColor(n, 0, 0, 0, 0, 0, 0)
	SED(n, "MerID", i)
	SED(n, "FactionCar", true)
end

for i, n in pairs(PoliceCar) do
	SED(n, "PoliceID", i)
	SED(n, "Fuel", 100)
	setElementHealth(n, 1000)
	setVehicleColor(n, 20, 65, 10, 255, 255, 255)
	setVehiclePlateText(n, "KENZIE" .. i)
	SED(n, "FactionCar", true)
end

for i, n in pairs(VCNCar) do
	SED(n, "VCNCar", i)
	SED(n, "Fuel", 100)
	setElementHealth(n, 1000)
	SED(n, "FactionCar", true)
end

for i, n in pairs(MedicCar) do
	SED(n, "MedicID", i)
	SED(n, "Fuel", 100)
	setElementHealth(n, 1000)
	SED(n, "FactionCar", true)
end

for i, n in pairs(pckFuelStation) do
	SED(n, "FuelStation", i)
	local x, y, z = getElementPosition(n)
	create3dtextlabel(x, y, z, "Бизнес: заправочная станция")
end

for i, veh in pairs(ArmyCar) do
	SED(veh, "ArmyCar", i)
	setElementHealth(veh, 1000)
	SED(veh, "FactionCar", true)
end

for i, veh in pairs(AshCar) do
	SED(veh, "AshCar", i)
	setElementHealth(veh, 1000)
end

for i, veh in pairs(CourierVehTable) do
	SED(veh, "CourierVehID", i)
	setElementHealth(veh, 1000)
end

for i, player in pairs(getElementsByType("player")) do
	SED(player, "ID", i)
	IDS[getElementData(player, "ID")] = player
	PINTERVAL[getElementData(player, "ID")] = getTickCount()
	TINTERVAL[getElementData(player, "ID")]	= getTickCount()
	SIDP(player, toch(getElementData(player, "ID")))
end

BusVehTable[1] = createVeh(431, 38,		-1010.1123046875, 10.423542022705)
BusVehTable[2] = createVeh(431, 26,		-1010.1123046875, 10.423542022705)
BusVehTable[3] = createVeh(431, 14,		-1010.1123046875, 10.423542022705)
BusVehTable[4] = createVeh(431, 2, 		-1010.1123046875, 10.423542022705)
BusVehTable[5] = createVeh(431, -10,	-1010.1123046875, 10.423542022705)
BusVehTable[6] = createVeh(431, -22,	-1010.1123046875, 10.423542022705)
BusVehTable[7] = createVeh(431, -34,	-1010.1123046875, 10.423542022705)
BusVehTable[8] = createVeh(431, -46,	-1010.1123046875, 10.423542022705)
BusVehTable[9] = createVeh(431, -868.958984375,		579.33203125, 		10.888244628906, 0, 0, 180)
BusVehTable[10] = createVeh(431, -862.0263671875,	579.33203125, 		10.888244628906, 0, 0, 180)
BusVehTable[11] = createVeh(431, -856.0849609375,	579.33203125, 		10.888244628906, 0, 0, 180)
BusVehTable[12] = createVeh(431, -850.166015625,	579.33203125, 		10.888244628906, 0, 0, 180)
BusVehTable[13] = createVeh(431, -844.6162109375,	579.33203125, 		10.888244628906, 0, 0, 180)
BusVehTable[14] = createVeh(431, -838.583984375,	579.33203125, 		10.888244628906, 0, 0, 180)
BusVehTable[15] = createVeh(431, -832.9453125,		579.33203125, 		10.888244628906, 0, 0, 180)
BusVehTable[16] = createVeh(431, -826.970703125,	579.33203125, 		10.888244628906, 0, 0, 180)
BusVehTable[17] = createVeh(431, -820.314453125,	579.33203125, 		10.888244628906, 0, 0, 180)
BusVehTable[18] = createVeh(431, -815.0654296875, 	552.7021484375, 	10.888244628906)
BusVehTable[19] = createVeh(431, -820.95703125, 	552.658203125, 		10.888244628906)
BusVehTable[20] = createVeh(431, -827.09765625, 	552.1796875, 		10.888244628906)
BusVehTable[21] = createVeh(431, -833.33984375, 	552.1220703125, 	10.888244628906)
BusVehTable[22] = createVeh(431, -838.3671875, 		552.314453125, 		10.888244628906)
BusVehTable[23] = createVeh(431, -844.439453125, 	552.5859375, 		10.888244628906)
BusVehTable[24] = createVeh(431, -850.0439453125, 	552.2373046875, 	10.888244628906)
BusVehTable[25] = createVeh(431, -856.2890625, 		552.45703125, 		10.888244628906)
BusVehTable[26] = createVeh(431, -862.712890625, 	552.1416015625, 	10.888244628906)
BusVehTable[27] = createVeh(431, -868.8046875, 		552.224609375, 		10.888244628906)
BusVehTable[28] = createVeh(431, -874.04296875, 	552.3271484375, 	10.888244628906)

TaxiVehTable[1] = createVeh(420, -205.7587890625, -1472.0361328125, 8.0708332061768, 0, 0, 280)
TaxiVehTable[2] = createVeh(420, -208.16015625, -1459.841796875, 8.0708332061768, 0, 0, 280)
TaxiVehTable[3] = createVeh(420, -211.634765625, -1448.7109375, 8.0708332061768, 0, 0, 280)
TaxiVehTable[4] = createVeh(420, -215.9765625, -1437.12890625, 8.0708332061768, 0, 0, 280)
TaxiVehTable[5] = createVeh(420, -220.2314453125, -1422.74609375, 8.0708332061768, 0, 0, 280)
TaxiVehTable[6] = createVeh(420, -223.640625, -1412.416015625, 8.0708332061768, 0, 0, 280)

MailVeh[1] = createVeh(462, 314.166015625, -315.28515625, 11.922214508057, 0, 0, 70)
MailVeh[2] = createVeh(462, 315.1376953125, -318.9521484375, 11.922214508057, 0, 0, 70)
MailVeh[3] = createVeh(462, 312.8857421875, -324.337890625, 11.922214508057, 0, 0, 70)
MailVeh[4] = createVeh(462, 307.9169921875, -328.619140625, 11.91587638855, 0, 0, 70)
MailVeh[5] = createVeh(462, 304.8154296875, -330.9580078125, 11.91587638855, 0, 0, 70)
MailVeh[6] = createVeh(462, 302.3974609375, -332.78125, 11.91587638855, 0, 0, 70)
MailVeh[7] = createVeh(462, 289.6416015625, -328.4814453125, 11.91587638855, 0, 0, 270)
MailVeh[8] = createVeh(462, 285.6484375, -323.8046875, 11.91587638855, 0, 0, 270)
MailVeh[9] = createVeh(462, 284.244140625, -319.982421875, 11.91587638855, 0, 0, 270)
MailVeh[10] = createVeh(462, 283.3505859375, -316.4794921875, 11.91587638855, 0, 0, 270)

function showRepair( hit, dim )
	if(getElementType(hit) == "player") then
		if(getElementData(hit, "Login") == true) then
			if(getPedOccupiedVehicleSeat(hit) == 0) then
				local veh = getPedOccupiedVehicle(hit)
				if(veh ~= false) then
					showPlayerDialog(hit, 80, 1, "Починка авто", "Действительно ли Вы хотите отремонтировать Ваш транспорт?\nСтоимость починки составляет 250$", "Принять", "Отмена")
				end
			end
		end
	end
end

for i, n in pairs(mrkRepairVeh) do
	local mrk = createMarker(mrkRepairVeh[i]["x"], mrkRepairVeh[i]["y"], mrkRepairVeh[i]["z"]-1, "cylinder", 2.4, 0, 100, 255, 220, getRootElement())
	create3dtextlabel(mrkRepairVeh[i]["x"], mrkRepairVeh[i]["y"], mrkRepairVeh[i]["z"]-0.5, "[ПОЧИНКА АВТО]")
	addEventHandler("onMarkerHit", mrk, showRepair)
end

for i, veh in pairs(MailVeh) do
	setElementHealth(veh, 1000)
	SED(veh, "MailVeh", i)
	setVehicleColor(veh, 165, 165, 0, 165, 30, 0)
end

for i, veh in pairs(BusVehTable) do
	SED(veh, "BusVehTable", i)
	setElementHealth(veh, 1000)
	if(i <= 8) then
		SED(veh, "BusPark", 1)
	else
		SED(veh, "BusPark", 2)
	end
end

for i, veh in pairs(TaxiVehTable) do
	setElementHealth(veh, 1000)
	SED(veh, "TaxiVehTable", i)
end

local HouseTable = {}
if(mysql ~= false) then
 HQ = dbQuery(mysql, "SELECT * from `House`")
end
local result = dbPoll(HQ, -1)
local houseit = 0

if(result ~= null) then
  for i, n in pairs(result) do
    id = toch(result[i]["ID"])
    HouseTable[id] = {}
    HouseTable[id]["x"] 			= result[i]["x"]
    HouseTable[id]["y"] 			= result[i]["y"]
    HouseTable[id]["z"] 			= result[i]["z"]
    HouseTable[id]["Price"] 		= result[i]["Price"]
    HouseTable[id]["PID"] 			= result[i]["PID"]
    HouseTable[id]["Interior"] 		= result[i]["Interior"]
    HouseTable[id]["ID"]			= id
    HouseTable[id]["PName"]			= result[i]["PName"]
    HouseTable[id]["PayDay"]		= result[i]["PayDay"]
    HouseTable[id]["Color1"]		= result[i]["ColorID1"]
    HouseTable[id]["Color2"]		= result[i]["ColorID2"]
    HouseTable[id]["Color3"]		= result[i]["ColorID3"]
    HouseTable[id]["Color4"]		= result[i]["ColorID4"]
    HouseTable[id]["Fuel1"]			= result[i]["Fuel1"]
    HouseTable[id]["Fuel2"]			= result[i]["Fuel2"]
    HouseTable[id]["Fuel3"]			= result[i]["Fuel3"]
    HouseTable[id]["Fuel4"]			= result[i]["Fuel4"]
    local pckExitGarage = createPickup(-1291.740234375, -696.0654296875, 999.578125, 3, 1318, 0)
    SET(pckExitGarage, 8)
    SIDP(pckExitGarage, id)
    SED(pckExitGarage, "pckExitGarage", true)
    if(result[i]["Open"] == 1) then
      HouseTable[id]["Open"]	= true
    else
      HouseTable[id]["Open"]	= false
    end
    if(result[i]["hx"] ~= 0) then
      HouseTable[id]["hx"] = result[i]["hx"]
      HouseTable[id]["hy"] = result[i]["hy"]
      HouseTable[id]["hz"] = result[i]["hz"]
      HouseTable[id]["hrx"] = result[i]["hrx"]
    else
      if(HouseTable[id]["Interior"] == 11) then
        HouseTable[id]["hx"] = 2283.09765625
        HouseTable[id]["hy"] = -1138.0791015625
        HouseTable[id]["hz"] = 1050.8984375
        exitFromHouse[id] = createPickup(2283.001953125, -1140.220703125, 1050.8984375, 3, 1318, 0)
        SET(exitFromHouse[id], 11)
        SIDP(exitFromHouse[id], id)
        SED(exitFromHouse[id], "ExitFromHouse", true)
      elseif(HouseTable[id]["Interior"] == 5) then
        HouseTable[id]["hx"] = 1333.310546875
        HouseTable[id]["hy"] = -95.3466796875
        HouseTable[id]["hz"] = 1001
        HouseTable[id]["hrx"] = 180
        exitFromHouse[id] = createPickup(1332.6904296875, -93.052734375, 1001, 3, 1318, 0)
        SET(exitFromHouse[id], 5)
        SIDP(exitFromHouse[id], id)
        SED(exitFromHouse[id], "ExitFromHouse", true)
      elseif(HouseTable[id]["Interior"] == 4) then
        HouseTable[id]["hx"] = 1322.33984375 
        HouseTable[id]["hy"] = -87.537109375
        HouseTable[id]["hz"] = 999.50744628906
        HouseTable[id]["hrx"] = 90
        exitFromHouse[id] = createPickup(1325.5048828125, -87.52734375, 999.5, 3, 1318, 0)
        SET(exitFromHouse[id], 4)
        SIDP(exitFromHouse[id], id)
        SED(exitFromHouse[id], "ExitFromHouse", true)
      elseif(HouseTable[id]["Interior"] == 3) then
        HouseTable[id]["hx"] = 1317.6494140625
        HouseTable[id]["hy"] = -99.7177734375
        HouseTable[id]["hz"] = 1001
        HouseTable[id]["hrx"] = 270
        exitFromHouse[id] = createPickup(1313.46484375, -100.23046875, 1001.0013427734, 3, 1318, 0)
        SET(exitFromHouse[id], 3)
        SIDP(exitFromHouse[id], id)
        SED(exitFromHouse[id], "ExitFromHouse", true)
      end
    end
    if(HouseTable[id]["PID"] > 0) then
      HouseTable[id]["Blip"] 	= createBlip(result[i]["x"], result[i]["y"], result[i]["z"], 32, 2, 0, 0, 0, 0, 0, 250)
      HouseTable[id]["Pickup"] = createPickup(result[i]["x"], result[i]["y"], result[i]["z"], 3, 1272, 0)
      SED(HouseTable[id]["Pickup"], "ID", id)
    else
      HouseTable[id]["Blip"] 	= createBlip(result[i]["x"], result[i]["y"], result[i]["z"], 31, 2, 0, 0, 0, 0, 0, 250)
      HouseTable[id]["Pickup"] =  createPickup(result[i]["x"], result[i]["y"], result[i]["z"], 3, 1273, 0)
      SED(HouseTable[id]["Pickup"], "ID", id)
    end
    if(result[i]["vx"] ~= 0) then
      HouseTable[id]["vx"] = result[i]["vx"]
      HouseTable[id]["vy"] = result[i]["vy"]
      HouseTable[id]["vz"] = result[i]["vz"]
      HouseTable[id]["vrz"] = result[i]["vrz"]
    else
      HouseTable[id]["vx"] = 0
      HouseTable[id]["vy"] = 0
      HouseTable[id]["vz"] = 0
      HouseTable[id]["vrz"] = 0
    end
    if(result[i]["Car1"] >= 400) then
      HouseTable[id]["Car1"] = result[i]["Car1"]
    else
      HouseTable[id]["Car1"] = 0
    end
    if(result[i]["Car2"] >= 400) then
      HouseTable[id]["Car2"] = result[i]["Car2"]
    else
      HouseTable[id]["Car2"] = 0
    end
    if(result[i]["Car3"] >= 400) then
      HouseTable[id]["Car3"] = result[i]["Car3"]
    else
      HouseTable[id]["Car3"] = 0
    end
    if(result[i]["Car4"] >= 400) then
      HouseTable[id]["Car4"] = result[i]["Car4"]
    else
      HouseTable[id]["Car4"] = 0
    end
    houseit = houseit + 1
  end
end

dbFree(HQ)

local HQ = dbQuery(mysql, "SELECT * FROM `Server` WHERE `Name` = 'Gruz'")
local result = dbPoll(HQ, -1)

if(result ~= nil) then
	if(result[1] ~= nil) then
		if(result[1]["Integ"] ~= nil) then
			Server["Gruz"] = toch(result[1]["Integ"])
		else
			Server["Gruz"] = 0
			dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Gruz', '0')")
		end
	else
		Server["Gruz"] = 0
		dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Gruz', '0')")
	end
else
	Server["Gruz"] = 0
	dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Gruz', '0')")
end

dbFree(HQ)

query = dbQuery(mysql, "SELECT * FROM `Server` WHERE `Name` = 'FishGruz'")
result = dbPoll(query, -1)

if(result ~= nil) then
	if(result[1] ~= nil) then
		if(result[1]["Integ"] ~= nil) then
			Server["FishGruz"] = toch(result[1]["Integ"])
		else
			Server["FishGruz"] = 0
			dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('FishGruz', '0')")
		end
	else
		Server["FishGruz"] = 0
		dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('FishGruz', '0')")
	end
else
	Server["FishGruz"] = 0
	dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('FishGruz', '0')")
end

dbFree(query)


local query = dbQuery(mysql, "SELECT * FROM `Server` WHERE `Name` = 'HospitalGruz'")
local result = dbPoll(query, -1)

if(result ~= nil) then
	if(result[1] ~= nil) then
		if(result[1]["Integ"] ~= nil) then
			Server["HospitalGruz"] = result[1]["Integ"]
		else
			Server["HospitalGruz"] = 0
			dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('HospitalGruz', '0')")
		end
	else
		Server["HospitalGruz"] = 0
		dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('HospitalGruz', '0')")
	end
else
	Server["HospitalGruz"] = 0
	dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('HospitalGruz', '0')")
end

dbFree(query)

local query = dbQuery(mysql, "SELECT * FROM `Server` WHERE `Name` = 'PoliceGruz'")
local result = dbPoll(query, -1)

if(result ~= nil) then
	if(result[1] ~= nil) then
		if(result[1]["Integ"] ~= nil) then
			Server["PoliceGruz"] = result[1]["Integ"]
		else
			Server["PoliceGruz"] = 0
			dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('PoliceGruz', '0')")
		end
	else
		Server["PoliceGruz"] = 0
		dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('PoliceGruz', '0')")
	end
else
	Server["PoliceGruz"] = 0
	dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('PoliceGruz', '0')")
end

dbFree(query)

local HQ = dbQuery(mysql, "SELECT * FROM `pnames`")
local result = dbPoll(HQ, -1)

if(result ~= nil) then
	for i, n in pairs(result) do
		local id = n["ID"] 
		PromoTable[id] 			= {}
		PromoTable[id]["Name"]	= n["Name"]
		PromoTable[id]["Value"]	= n["Value"]
		PromoTable[id]["Exp"]	= n["Exp"]
		PromoTable[id]["Toggle"] = n["Toggle"]
		PromoTable[id]["Day"] = n["Day"]
		PromoTable[id]["Month"] = n["Month"]
		PromoTable[id]["Year"] = n["Year"]
		local query = dbQuery(mysql, "SELECT COUNT(*) FROM `PromoTable` WHERE `promo` = ?", n["Name"])
		local res = dbPoll(query, -1)
		PromoTable[id]["Activations"] = res[1]["COUNT(*)"]
	end
end

local HQ = dbQuery(mysql, "SELECT * FROM `Server` WHERE `Name` = 'ArmyGruz'")
local result = dbPoll(HQ, -1)

if(result ~= nil) then
	if(result[1] ~= nil) then
		if(result[1]["Integ"] ~= nil) then
			Server["ArmyGruz"] = toch(result[1]["Integ"])
		else
			Server["ArmyGruz"] = 0
			dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('ArmyGruz', '0')")
		end
	else
		Server["ArmyGruz"] = 0
		dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('ArmyGruz', '0')")
	end
else
	Server["ArmyGruz"] = 0
	dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('ArmyGruz', '0')")
end

dbFree(HQ)

local HQ = dbQuery(mysql, "SELECT * FROM `Server` WHERE `Name` = ?", "Maf1Mat")
local result = dbPoll(HQ, -1)
if(result ~= nil) then
	if(result[1] ~= nil) then
		if(result[1]["Integ"] ~= nil) then
			Server["Maf1Mat"] = result[1]["Integ"]
		else
			Server["Maf1Mat"] = 0
			dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Maf1Mat', 1000)")
		end
	else
		Server["Maf1Mat"] = 0
		dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Maf1Mat', 1000)")
	end
else
	Server["Maf1Mat"] = 0
	dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Maf1Mat', 1000)")
end
dbFree(HQ)

for i=1,4 do
	local HQ = dbQuery(mysql, "SELECT * FROM `Server` WHERE `Name` = ?", "FactOpenSkl"..i)
	local result = dbPoll(HQ, -1)
	if(result ~= nil) then
		if(result[1] ~= nil) then
			if(result[1]["Name"] ~= nil) then
				if(result[1]["Integ"] == 0) then
					FactOpenSkl[i] = false
				else
					FactOpenSkl[i] = true
				end
			else
				FactOpenSkl[i] = false
				dbExec(mysql, "INSERT INTO `Server` (`Name`, `Integ`) VALUES ('FactOpenSkl" .. i .. "', '0')")
			end
		else
			FactOpenSkl[i] = false
			dbExec(mysql, "INSERT INTO `Server` (`Name`, `Integ`) VALUES ('FactOpenSkl" .. i .. "', '0')")
		end
	else
		FactOpenSkl[i] = false
		dbExec(mysql, "INSERT INTO `Server` (`Name`, `Integ`) VALUES ('FactOpenSkl" .. i .. "', '0')")
	end
	dbFree(HQ)
end

local HQ = dbQuery(mysql, "SELECT * FROM `Server` WHERE `Name` = ?", "Maf1NRK")
local result = dbPoll(HQ, -1)

if(result ~= nil) then
	if(result[1] ~= nil) then
		if(result[1]["Integ"] ~= nil) then
			Server["Maf1NRK"] = result[1]["Integ"]
		else
			Server["Maf1NRK"] = 0
			dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Maf1NRK', 0)")
		end
	else
		Server["Maf1NRK"] = 0
		dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Maf1NRK', 0)")
	end
else
	Server["Maf1NRK"] = 0
	dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Maf1NRK', 0)")
end
dbFree(HQ)

local HQ = dbQuery(mysql, "SELECT * FROM `Server` WHERE `Name` = ?", "Maf2Mat")
local result = dbPoll(HQ, -1)
if(result ~= nil) then
	if(result[1] ~= nil) then
		if(result[1]["Integ"] ~= nil) then
			Server["Maf2Mat"] = result[1]["Integ"]
		else
			Server["Maf2Mat"] = 0
			dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Maf2Mat', 1000)")
		end
	else
		Server["Maf2Mat"] = 0
		dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Maf2Mat', 1000)")
	end
else
	Server["Maf2Mat"] = 0
	dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Maf2Mat', 1000)")
end
dbFree(HQ)

local HQ = dbQuery(mysql, "SELECT * FROM `Server` WHERE `Name` = ?", "Maf2NRK")
local result = dbPoll(HQ, -1)

if(result ~= nil) then
	if(result[1] ~= nil) then
		if(result[1]["Integ"] ~= nil) then
			Server["Maf2NRK"] = result[1]["Integ"]
		else
			Server["Maf2NRK"] = 0
			dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Maf2NRK', 0)")
		end
	else
		Server["Maf2NRK"] = 0
		dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Maf2NRK', 0)")
	end
else
	Server["Maf2NRK"] = 0
	dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Maf2NRK', 0)")
end
dbFree(HQ)

local HQ = dbQuery(mysql, "SELECT * FROM `Server` WHERE `Name` = ?", "Maf3Mat")
local result = dbPoll(HQ, -1)
if(result ~= nil) then
	if(result[1] ~= nil) then
		if(result[1]["Integ"] ~= nil) then
			Server["Maf3Mat"] = result[1]["Integ"]
		else
			Server["Maf3Mat"] = 0
			dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Maf3Mat', 1000)")
		end
	else
		Server["Maf3Mat"] = 0
		dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Maf3Mat', 1000)")
	end
else
	Server["Maf3Mat"] = 0
	dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Maf3Mat', 1000)")
end
dbFree(HQ)

local HQ = dbQuery(mysql, "SELECT * FROM `Server` WHERE `Name` = ?", "Maf3NRK")
local result = dbPoll(HQ, -1)

if(result ~= nil) then
	if(result[1] ~= nil) then
		if(result[1]["Integ"] ~= nil) then
			Server["Maf3NRK"] = result[1]["Integ"]
		else
			Server["Maf3NRK"] = 0
			dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Maf3NRK', 0)")
		end
	else
		Server["Maf3NRK"] = 0
		dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Maf3NRK', 0)")
	end
else
	Server["Maf3NRK"] = 0
	dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Maf3NRK', 0)")
end
dbFree(HQ)

local HQ = dbQuery(mysql, "SELECT * FROM `Server` WHERE `Name` = ?", "Maf4Mat")
local result = dbPoll(HQ, -1)
if(result ~= nil) then
	if(result[1] ~= nil) then
		if(result[1]["Integ"] ~= nil) then
			Server["Maf4Mat"] = result[1]["Integ"]
		else
			Server["Maf4Mat"] = 0
			dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Maf4Mat', 1000)")
		end
	else
		Server["Maf4Mat"] = 0
		dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Maf4Mat', 1000)")
	end
else
	Server["Maf4Mat"] = 0
	dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Maf4Mat', 1000)")
end
dbFree(HQ)

local HQ = dbQuery(mysql, "SELECT * FROM `Server` WHERE `Name` = ?", "Maf4NRK")
local result = dbPoll(HQ, -1)

if(result ~= nil) then
	if(result[1] ~= nil) then
		if(result[1]["Integ"] ~= nil) then
			Server["Maf4NRK"] = result[1]["Integ"]
		else
			Server["Maf4NRK"] = 0
			dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Maf4NRK', 0)")
		end
	else
		Server["Maf4NRK"] = 0
		dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Maf4NRK', 0)")
	end
else
	Server["Maf4NRK"] = 0
	dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Maf4NRK', 0)")
end
dbFree(HQ)

local query = dbQuery(mysql, "SELECT * FROM `Server` WHERE `Name` = ?", "Maf1Money")
local result = dbPoll(query, -1)
if(result ~= nil) then
	if(result[1] ~= nil) then
		if(result[1]["Integ"] ~= nil) then
			Server["Maf1Money"] = result[1]["Integ"]
		else
			Server["Maf1Money"] = 0
			dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Maf1Money', 0)")
		end
	else
		Server["Maf1Money"] = 0
		dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Maf1Money', 0)")
	end
else
	Server["Maf1Money"] = 0
	dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Maf1Money', 0)")
end
dbFree(query)

local query = dbQuery(mysql, "SELECT * FROM `Server` WHERE `Name` = ?", "Maf2Money")
local result = dbPoll(query, -1)
if(result ~= nil) then
	if(result[1] ~= nil) then
		if(result[1]["Integ"] ~= nil) then
			Server["Maf2Money"] = result[1]["Integ"]
		else
			Server["Maf2Money"] = 0
			dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Maf2Money', 0)")
		end
	else
		Server["Maf2Money"] = 0
		dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Maf2Money', 0)")
	end
else
	Server["Maf2Money"] = 0
	dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Maf2Money', 0)")
end
dbFree(query)

local query = dbQuery(mysql, "SELECT * FROM `Server` WHERE `Name` = ?", "Maf3Money")
local result = dbPoll(query, -1)
if(result ~= nil) then
	if(result[1] ~= nil) then
		if(result[1]["Integ"] ~= nil) then
			Server["Maf3Money"] = result[1]["Integ"]
		else
			Server["Maf3Money"] = 0
			dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Maf3Money', 0)")
		end
	else
		Server["Maf3Money"] = 0
		dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Maf3Money', 0)")
	end
else
	Server["Maf3Money"] = 0
	dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Maf3Money', 0)")
end
dbFree(query)

local query = dbQuery(mysql, "SELECT * FROM `Server` WHERE `Name` = ?", "Maf4Money")
local result = dbPoll(query, -1)
if(result ~= nil) then
	if(result[1] ~= nil) then
		if(result[1]["Integ"] ~= nil) then
			Server["Maf4Money"] = result[1]["Integ"]
		else
			Server["Maf4Money"] = 0
			dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Maf4Money', 0)")
		end
	else
		Server["Maf4Money"] = 0
		dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Maf4Money', 0)")
	end
else
	Server["Maf4Money"] = 0
	dbExec(mysql, "INSERT into `Server` (`Name`, `Integ`) VALUES ('Maf4Money', 0)")
end
dbFree(query)

local BusinessTable = 
{
	[10] = 	{["x"]=-1599.5537109375, 	["y"]=-732.73828125, 		["z"]=14.824739456177,	["px"]=-1599.9111328125,	["py"]=-727.3525390625,		["pz"]=14.824739456177, 	["Type"]=1, ["Owner"]=0},
	[11] = 	{["x"]=-872.2734375, 		["y"]=-561.580078125, 		["z"]=11.054003715515,	["px"]=-868.94140625,  		["py"]=-560.3349609375,		["pz"]=11.050278663635, 	["Type"]=1, ["Owner"]=0},
	[12] = 	{["x"]=-861.9931640625, 	["y"]=867.53515625, 		["z"]=11.045707702637,	["px"]=-864.8125,  			["py"]=867.4228515625,		["pz"]=11.045707702637, 	["Type"]=1, ["Owner"]=0},
	[13] = 	{["x"]=-510.8291015625, 	["y"]=1347.5927734375, 		["z"]=11.724113464355,	["px"]=-510.337890625,  	["py"]=1344.98828125,		["pz"]=11.724113464355, 	["Type"]=1, ["Owner"]=0},
	[14] = 	{["x"]=-729.353515625, 		["y"]=-1335.5751953125, 	["z"]=11.054172515869,	["px"]=-726.97265625,  		["py"]=-1338.7802734375,	["pz"]=11.054172515869, 	["Type"]=1, ["Owner"]=0},
	[15] = 	{["x"]=21.260742187,		["y"]=-949.3173828125,		["z"]=10.419666290283,	["px"]=-19.181640625, 		["py"]=-981.375,			["pz"]=10.415060997009,		["Type"]=1, ["Owner"]=0},
	[16] = 	{["x"]=108.4482421875,		["y"]=-1520.4208984375,		["z"]=10.394973754883,	["px"]=107.2041015625,  	["py"]=-1513.599609375,		["pz"]=10.394973754883,		["Type"]=1, ["Owner"]=0},
	[17] = 	{["x"]=246.0673828125,		["y"]=-878.4697265625,		["z"]=10.148986816406,	["px"]=248.265625,  		["py"]=-879.6123046875,		["pz"]=10.148986816406,		["Type"]=1, ["Owner"]=0},
	[18] = 	{["x"]=452.5947265625,		["y"]=-415.298828125,		["z"]=10.236227989197,	["px"]=446.6474609375,		["py"]=-413.89453125,		["pz"]=10.34434223175,		["Type"]=1, ["Owner"]=0},
	[20] = 	{["x"]=378.7861328125,		["y"]=228.0693359375,		["z"]=10.820665359497,	["px"]=379.3251953125,		["py"]=231.4697265625,		["pz"]=10.794984817505,		["Type"]=1, ["Owner"]=0},
	[21] = 	{["x"]=362.3603515625,		["y"]=1010.4296875,			["z"]=19.147615432739,	["px"]=348.5234375,			["py"]=978.3662109375,		["pz"]=12.237215042114,		["Type"]=1, ["Owner"]=0},
	[22] = 	{["x"]=74.83984375,			["y"]=954.005859375,		["z"]=10.80312538147,	["px"]=71.66015625, 		["py"]=960.7890625,			["pz"]=10.80312538147,		["Type"]=1, ["Owner"]=0},
	[23] = 	{["x"]=-1076.0791015625,	["y"]=-89.376953125,		["z"]=11.339686393738,	["px"]=-1072.3525390625,  	["py"]=-89.7060546875,		["pz"]=11.325350761414,		["Type"]=1, ["Owner"]=0},
	[24] =	{["x"]=-979.35546875,		["y"]=-1141.2939453125,		["z"]=15.06218719482,	["px"]=-971.5625,			["py"]=-1113.25,			["pz"]=14.89783859252,		["Type"]=1, ["Owner"]=0},
	[101] = {["x"]=-287.66796875, 		["y"]=1313.7265625, 		["z"]=11.411743164063,	["px"]=-287.66796875, 		["py"]=1313.7265625, 		["pz"]=11.411743164063, 	["Type"]=3, ["Owner"]=0},	-- Пицца мэрия
	[102] = {["x"]=440.55859375, 		["y"]=433.9150390625,		["z"]=11.604499816895,	["px"]=440.55859375, 		["py"]=433.9150390625, 		["pz"]=11.604499816895, 	["Type"]=3, ["Owner"]=0},	-- Пицца пд
	[103] = {["x"]=21.8349609375, 		["y"]=-927.966796875, 		["z"]=10.419666290283,	["px"]=21.8349609375, 		["py"]=-927.966796875, 		["pz"]=10.419666290283, 	["Type"]=3, ["Owner"]=0},	-- Пицца автобусники
	[104] = {["x"]=431.197265625, 		["y"]=1011.423828125, 		["z"]=19.146541595459,	["px"]=425.419921875,  		["py"]=979.3916015625, 		["pz"]=12.344575881958, 	["Type"]=3,	["Owner"]=0},	-- Пицца Mall
	[105] = {["x"]=-833.7587890625, 	["y"]=-908.9306640625, 		["z"]=12.088490486145,	["px"]=-827.6669921875,   	["py"]=-909.8251953125, 	["pz"]=11.071008682251, 	["Type"]=3, ["Owner"]=0},	-- пицца мост груз-больница
	[106] = {["x"]=-1087.7568359375, 	["y"]=-670.0009765625, 		["z"]=11.752812385559,	["px"]=-1087.7568359375, 	["py"]=-670.0009765625, 	["pz"]=11.752812385559, 	["Type"]=3,	["Owner"]=0}, 	-- Пицца Бичевня
	[120] = {["x"]=424.0341796875,		["y"]=1039.513671875,		["z"]=18.926605224609,	["px"]=447.54296875,		["py"]=976.1337890625,		["pz"]=12.344575881958,		["Type"]=4,	["Owner"]=0},	-- Магазин одежды
	[130] = {["x"]=-65.171875,			["y"]=-1476.263671875,		["z"]=10.407315254211,	["px"]=-54.75390625,		["py"]=-1481.77734375,		["pz"]=10.402487754822,		["Type"]=5,	["Owner"]=0},	-- Магазин оружия
	[150] = {["x"]=207.111328125,		["y"]=-476.25,				["z"]=11.031169891357,	["px"]=208.2109375,			["py"]=-483.2197265625,		["pz"]=11.571377754211,		["Type"]=7,	["Owner"]=0},	-- Сеть ремонта автомобилей
	[1000] = {["x"]=487.0693359375,		["y"]=-55.0615234375,		["z"]=11.445568084717,	["px"]=492.7392578125, 		["py"]=-93.23828125,		["pz"]=10.26060962677,		["Type"]=6,	["Owner"]=0}	-- Малибу
}


for i, n in pairs(FuelStation) do
	if(BusinessTable[FuelStation[i]["Zp"]] == nil) then
		local id = FuelStation[i]["Zp"]
		BusinessTable[id] = {}
		BusinessTable[id]["x"] = FuelStation[i]["x"]
		BusinessTable[id]["y"] = FuelStation[i]["y"]
		BusinessTable[id]["z"] = FuelStation[i]["z"]
		BusinessTable[id]["Type"] = 2
		if(id == 1) then
			BusinessTable[id]["px"], BusinessTable[id]["py"], BusinessTable[id]["pz"] = 49.9013671875, -1088.7578125, 9.423915863037
		elseif(id == 2) then
			BusinessTable[id]["px"], BusinessTable[id]["py"], BusinessTable[id]["pz"] = -887.984375, -573.0234375, 10.047963142395
		elseif(id == 3) then
			BusinessTable[id]["px"], BusinessTable[id]["py"], BusinessTable[id]["pz"] = -1616.8896484375, -736.66015625, 13.824739456177
		elseif(id == 4) then
			BusinessTable[id]["px"], BusinessTable[id]["py"], BusinessTable[id]["pz"] = 55.244140625, 937.4443359375, 9.80312538147
		elseif(id == 5) then
			BusinessTable[id]["px"], BusinessTable[id]["py"], BusinessTable[id]["pz"] = -936.8505859375, 1347.3076171875, 10.096260070801
		elseif(id == 6) then
			BusinessTable[id]["px"], BusinessTable[id]["py"], BusinessTable[id]["pz"] = -749.603515625, -1379.189453125, 10.343542098999
		elseif(id == 7) then
			BusinessTable[id]["px"], BusinessTable[id]["py"], BusinessTable[id]["pz"] = 204.884765625, -506.1201171875, 10.78320980072
		end
		createBlip(BusinessTable[id]["px"], BusinessTable[id]["py"], BusinessTable[id]["pz"], 47, 0.3, 255, 255, 255, 255, 0, 250)
	end
end

for i,n in pairs(BusinessTable) do
	if(BusinessTable[i]["Type"] ~= 2 and BusinessTable[i]["Type"] < 4) then
		pck = createPickup(BusinessTable[i]["x"], BusinessTable[i]["y"], BusinessTable[i]["z"], 3, 1318, 0)
		SED(pck, "BusinessID", i)
		SED(pck, "BusinessType", BusinessTable[i]["Type"])
		if(BusinessTable[i]["Type"] == 3) then
			create3dtextlabel(BusinessTable[i]["x"], BusinessTable[i]["y"], BusinessTable[i]["z"], "Бизнес: пиццерия")
			createBlip(BusinessTable[i]["x"], BusinessTable[i]["y"], BusinessTable[i]["z"], 29, 0.3, 255, 255, 255, 255, 0, 250)
		elseif(BusinessTable[i]["Type"] == 1) then
			create3dtextlabel(BusinessTable[i]["x"], BusinessTable[i]["y"], BusinessTable[i]["z"], "Бизнес: магазин 24/7")
			createBlip(BusinessTable[i]["x"], BusinessTable[i]["y"], BusinessTable[i]["z"], 17, 0.3, 255, 255, 255, 255, 0, 250)
		end
	elseif(BusinessTable[i]["Type"] == 4) then
		create3dtextlabel(BusinessTable[i]["x"], BusinessTable[i]["y"], BusinessTable[i]["z"], "Бизнес: магазин одежды")
		pck = createPickup(BusinessTable[i]["x"], BusinessTable[i]["y"], BusinessTable[i]["z"], 3, 1274, 0)
		SED(pck, "Mgz", i)
		SED(pck, "BusinessType", BusinessTable[i]["Type"])
	elseif(BusinessTable[i]["Type"] == 5) then
		create3dtextlabel(BusinessTable[i]["x"], BusinessTable[i]["y"], BusinessTable[i]["z"], "Бизнес: магазин оружия")
		pck = createPickup(BusinessTable[i]["x"], BusinessTable[i]["y"], BusinessTable[i]["z"], 3, 1274, 0)
		SED(pck, "Mgz", i)
		SED(pck, "BusinessType", BusinessTable[i]["Type"])
	elseif(BusinessTable[i]["Type"] == 6) then
		create3dtextlabel(BusinessTable[i]["x"], BusinessTable[i]["y"], BusinessTable[i]["z"], "Бизнес: клуб Малибу")
		pck = createPickup(BusinessTable[i]["x"], BusinessTable[i]["y"], BusinessTable[i]["z"], 3, 1274, 0)
		SED(pck, "Mgz", i)
		SED(pck, "BusinessType", BusinessTable[i]["Type"])
	elseif(BusinessTable[i]["Type"] == 7) then
		create3dtextlabel(BusinessTable[i]["x"], BusinessTable[i]["y"], BusinessTable[i]["z"], "Бизнес: Сеть ремонта")
		pck = createPickup(BusinessTable[i]["x"], BusinessTable[i]["y"], BusinessTable[i]["z"], 3, 1274, 0)
		SED(pck, "Mgz", i)
		SED(pck, "BusinessType", BusinessTable[i]["Type"])
	end
	local query = dbQuery(mysql, "SELECT * FROM `Business` WHERE `ID` = ?", i)
  local pol = dbPoll(query, -1)
  if(pol ~= nil) then
    if(pol[1] ~= nil) then
      if(pol[1]["Owner"] ~= nil) then
        BusinessTable[i]["Owner"] = pol[1]["Owner"]
        BusinessTable[i]["Products"] = pol[1]["Products"]
        BusinessTable[i]["Benzovoz"] = pol[1]["Benzovoz"]
        BusinessTable[i]["MaxProducts"] = pol[1]["MaxProducts"]
        BusinessTable[i]["P1"] = pol[1]["P1"]
        BusinessTable[i]["Money"] = pol[1]["Money"]
        OrderBiz[i] = {}
        OrderBiz[i]["Products"]	= pol[1]["OrderProducts"]
        OrderBiz[i]["Price"] = pol[1]["OrderPrice"]
        BusinessTable[i]["PayDay"] = pol[1]["PayDay"]
        BusinessTable[i]["Roof"] = pol[1]["Roof"]
        local open = pol[1]["Open"]
        if(open == 1) then
          BusinessTable[i]["Open"] = true
        else
          BusinessTable[i]["Open"] = false
        end
        if(pol[1]["Owner"] ~= 0) then
          BusinessTable[i]["OwnerName"] = pol[1]["OwnerName"]
        else
          BusinessTable[i]["OwnerName"] = ""
        end
        local tablor = {}
        tablor[1] = {}
        tablor[2] = {}
        tablor[3] = {}
        tablor[4] = {}
        tablor[5] = {}
        tablor[6] = {}
        tablor[7] = {}
        tablor[1][1] = 0
        tablor[1][2] = 0
        tablor[2][1] = pol[1]["Date1"]
        tablor[2][2] = pol[1]["Finstat1"]
        tablor[3][1] = pol[1]["Date2"]
        tablor[3][2] = pol[1]["Finstat2"]
        tablor[4][1] = pol[1]["Date3"]
        tablor[4][2] = pol[1]["Finstat3"]
        tablor[5][1] = pol[1]["Date4"]
        tablor[5][2] = pol[1]["Finstat4"]
        tablor[6][1] = pol[1]["Date5"]
        tablor[6][2] = pol[1]["Finstat5"]
        tablor[7][1] = pol[1]["Date6"]
        tablor[7][2] = pol[1]["Finstat6"]
        local date = getRealTime()
        if(date.monthday < 10) then
          date.monthday = "0" .. date.monthday
        end
        date.month = date.month + 1
        if(date.month < 10) then
          date.month = "0" .. date.month
        end
        tablor[1][1] = date.monthday .. "." .. date.month .. "." .. date.year + 1900
        tablor[1][2] = 0
        query = dbQuery(mysql, "SELECT * FROM `Business` WHERE `ID` = ?", i)
        result = dbPoll(query, -1)
        if(result ~= nil) then
          if(result[1] ~= nil) then
            if(result[1]["Date1"] ~= nil) then
              if(result[1]["Date1"] ~= false) then
                if(string.len(result[1]["Date1"]) > 0) then
                  if(result[1]["Date1"] == tablor[1][1]) then
                    BusinessTable[i]["Date1"] = result[1]["Date1"]
                    BusinessTable[i]["Finstat1"] = result[1]["Finstat1"]
                    BusinessTable[i]["Date2"] = result[1]["Date2"]
                    BusinessTable[i]["Finstat2"] = result[1]["Finstat2"]
                    BusinessTable[i]["Date3"] = result[1]["Date3"]
                    BusinessTable[i]["Finstat3"] = result[1]["Finstat3"]
                    BusinessTable[i]["Date4"] = result[1]["Date4"]
                    BusinessTable[i]["Finstat4"] = result[1]["Finstat4"]
                    BusinessTable[i]["Date5"] = result[1]["Date5"]
                    BusinessTable[i]["Finstat5"] = result[1]["Finstat5"]
                    BusinessTable[i]["Date6"] = result[1]["Date6"]
                    BusinessTable[i]["Finstat6"] = result[1]["Finstat6"]
                    BusinessTable[i]["Date7"] = result[1]["Date7"]
                    BusinessTable[i]["Finstat7"] = result[1]["Finstat7"]
                  else
                    dbExec(mysql, "UPDATE `Business` SET `Date" .. 1 .. "` = ?, `Finstat" .. 1 .. "` = ? WHERE `ID` = ?", tablor[1][1], tablor[1][2], i)
                    dbExec(mysql, "UPDATE `Business` SET `Date" .. 2 .. "` = ?, `Finstat" .. 2 .. "` = ? WHERE `ID` = ?", tablor[2][1], tablor[2][2], i)
                    dbExec(mysql, "UPDATE `Business` SET `Date" .. 3 .. "` = ?, `Finstat" .. 3 .. "` = ? WHERE `ID` = ?", tablor[3][1], tablor[3][2], i)
                    dbExec(mysql, "UPDATE `Business` SET `Date" .. 4 .. "` = ?, `Finstat" .. 4 .. "` = ? WHERE `ID` = ?", tablor[4][1], tablor[4][2], i)
                    dbExec(mysql, "UPDATE `Business` SET `Date" .. 5 .. "` = ?, `Finstat" .. 5 .. "` = ? WHERE `ID` = ?", tablor[5][1], tablor[5][2], i)
                    dbExec(mysql, "UPDATE `Business` SET `Date" .. 6 .. "` = ?, `Finstat" .. 6 .. "` = ? WHERE `ID` = ?", tablor[6][1], tablor[6][2], i)
                    dbExec(mysql, "UPDATE `Business` SET `Date" .. 7 .. "` = ?, `Finstat" .. 7 .. "` = ? WHERE `ID` = ?", tablor[7][1], tablor[7][2], i)
                    BusinessTable[i]["Date1"] = tablor[1][1]
                    BusinessTable[i]["Finstat1"] = tablor[1][2]
                    BusinessTable[i]["Date2"] = tablor[2][1]
                    BusinessTable[i]["Finstat2"] = tablor[2][2]
                    BusinessTable[i]["Date3"] = tablor[3][1]
                    BusinessTable[i]["Finstat3"] = tablor[3][2]
                    BusinessTable[i]["Date4"] = tablor[4][1]
                    BusinessTable[i]["Finstat4"] = tablor[4][2]
                    BusinessTable[i]["Date5"] = tablor[5][1]
                    BusinessTable[i]["Finstat5"] = tablor[5][2]
                    BusinessTable[i]["Date6"] = tablor[6][1]
                    BusinessTable[i]["Finstat6"] = tablor[6][2]
                    BusinessTable[i]["Date7"] = tablor[7][1]
                    BusinessTable[i]["Finstat7"] = tablor[7][2]
                  end
                else
                  dbExec(mysql, "UPDATE `Business` SET `Date" .. 1 .. "` = ?, `Finstat" .. 1 .. "` = ? WHERE `ID` = ?", tablor[1][1], tablor[1][2], i)
                  dbExec(mysql, "UPDATE `Business` SET `Date" .. 2 .. "` = ?, `Finstat" .. 2 .. "` = ? WHERE `ID` = ?", tablor[2][1], tablor[2][2], i)
                  dbExec(mysql, "UPDATE `Business` SET `Date" .. 3 .. "` = ?, `Finstat" .. 3 .. "` = ? WHERE `ID` = ?", tablor[3][1], tablor[3][2], i)
                  dbExec(mysql, "UPDATE `Business` SET `Date" .. 4 .. "` = ?, `Finstat" .. 4 .. "` = ? WHERE `ID` = ?", tablor[4][1], tablor[4][2], i)
                  dbExec(mysql, "UPDATE `Business` SET `Date" .. 5 .. "` = ?, `Finstat" .. 5 .. "` = ? WHERE `ID` = ?", tablor[5][1], tablor[5][2], i)
                  dbExec(mysql, "UPDATE `Business` SET `Date" .. 6 .. "` = ?, `Finstat" .. 6 .. "` = ? WHERE `ID` = ?", tablor[6][1], tablor[6][2], i)
                  dbExec(mysql, "UPDATE `Business` SET `Date" .. 7 .. "` = ?, `Finstat" .. 7 .. "` = ? WHERE `ID` = ?", tablor[7][1], tablor[7][2], i)
                  BusinessTable[i]["Date1"] = tablor[1][1]
                  BusinessTable[i]["Finstat1"] = tablor[1][2]
                  BusinessTable[i]["Date2"] = tablor[2][1]
                  BusinessTable[i]["Finstat2"] = tablor[2][2]
                  BusinessTable[i]["Date3"] = tablor[3][1]
                  BusinessTable[i]["Finstat3"] = tablor[3][2]
                  BusinessTable[i]["Date4"] = tablor[4][1]
                  BusinessTable[i]["Finstat4"] = tablor[4][2]
                  BusinessTable[i]["Date5"] = tablor[5][1]
                  BusinessTable[i]["Finstat5"] = tablor[5][2]
                  BusinessTable[i]["Date6"] = tablor[6][1]
                  BusinessTable[i]["Finstat6"] = tablor[6][2]
                  BusinessTable[i]["Date7"] = tablor[7][1]
                  BusinessTable[i]["Finstat7"] = tablor[7][2]
                end
              else
                dbExec(mysql, "UPDATE `Business` SET `Date" .. 1 .. "` = ?, `Finstat" .. 1 .. "` = ? WHERE `ID` = ?", tablor[1][1], tablor[1][2], i)
                dbExec(mysql, "UPDATE `Business` SET `Date" .. 2 .. "` = ?, `Finstat" .. 2 .. "` = ? WHERE `ID` = ?", tablor[2][1], tablor[2][2], i)
                dbExec(mysql, "UPDATE `Business` SET `Date" .. 3 .. "` = ?, `Finstat" .. 3 .. "` = ? WHERE `ID` = ?", tablor[3][1], tablor[3][2], i)
                dbExec(mysql, "UPDATE `Business` SET `Date" .. 4 .. "` = ?, `Finstat" .. 4 .. "` = ? WHERE `ID` = ?", tablor[4][1], tablor[4][2], i)
                dbExec(mysql, "UPDATE `Business` SET `Date" .. 5 .. "` = ?, `Finstat" .. 5 .. "` = ? WHERE `ID` = ?", tablor[5][1], tablor[5][2], i)
                dbExec(mysql, "UPDATE `Business` SET `Date" .. 6 .. "` = ?, `Finstat" .. 6 .. "` = ? WHERE `ID` = ?", tablor[6][1], tablor[6][2], i)
                dbExec(mysql, "UPDATE `Business` SET `Date" .. 7 .. "` = ?, `Finstat" .. 7 .. "` = ? WHERE `ID` = ?", tablor[7][1], tablor[7][2], i)
                BusinessTable[i]["Date1"] = tablor[1][1]
                BusinessTable[i]["Finstat1"] = tablor[1][2]
                BusinessTable[i]["Date2"] = tablor[2][1]
                BusinessTable[i]["Finstat2"] = tablor[2][2]
                BusinessTable[i]["Date3"] = tablor[3][1]
                BusinessTable[i]["Finstat3"] = tablor[3][2]
                BusinessTable[i]["Date4"] = tablor[4][1]
                BusinessTable[i]["Finstat4"] = tablor[4][2]
                BusinessTable[i]["Date5"] = tablor[5][1]
                BusinessTable[i]["Finstat5"] = tablor[5][2]
                BusinessTable[i]["Date6"] = tablor[6][1]
                BusinessTable[i]["Finstat6"] = tablor[6][2]
                BusinessTable[i]["Date7"] = tablor[7][1]
                BusinessTable[i]["Finstat7"] = tablor[7][2]
              end
            else
              dbExec(mysql, "UPDATE `Business` SET `Date" .. 1 .. "` = ?, `Finstat" .. 1 .. "` = ? WHERE `ID` = ?", tablor[1][1], tablor[1][2], i)
              dbExec(mysql, "UPDATE `Business` SET `Date" .. 2 .. "` = ?, `Finstat" .. 2 .. "` = ? WHERE `ID` = ?", tablor[2][1], tablor[2][2], i)
              dbExec(mysql, "UPDATE `Business` SET `Date" .. 3 .. "` = ?, `Finstat" .. 3 .. "` = ? WHERE `ID` = ?", tablor[3][1], tablor[3][2], i)
              dbExec(mysql, "UPDATE `Business` SET `Date" .. 4 .. "` = ?, `Finstat" .. 4 .. "` = ? WHERE `ID` = ?", tablor[4][1], tablor[4][2], i)
              dbExec(mysql, "UPDATE `Business` SET `Date" .. 5 .. "` = ?, `Finstat" .. 5 .. "` = ? WHERE `ID` = ?", tablor[5][1], tablor[5][2], i)
              dbExec(mysql, "UPDATE `Business` SET `Date" .. 6 .. "` = ?, `Finstat" .. 6 .. "` = ? WHERE `ID` = ?", tablor[6][1], tablor[6][2], i)
              dbExec(mysql, "UPDATE `Business` SET `Date" .. 7 .. "` = ?, `Finstat" .. 7 .. "` = ? WHERE `ID` = ?", tablor[7][1], tablor[7][2], i)
              BusinessTable[i]["Date1"] = tablor[1][1]
              BusinessTable[i]["Finstat1"] = tablor[1][2]
              BusinessTable[i]["Date2"] = tablor[2][1]
              BusinessTable[i]["Finstat2"] = tablor[2][2]
              BusinessTable[i]["Date3"] = tablor[3][1]
              BusinessTable[i]["Finstat3"] = tablor[3][2]
              BusinessTable[i]["Date4"] = tablor[4][1]
              BusinessTable[i]["Finstat4"] = tablor[4][2]
              BusinessTable[i]["Date5"] = tablor[5][1]
              BusinessTable[i]["Finstat5"] = tablor[5][2]
              BusinessTable[i]["Date6"] = tablor[6][1]
              BusinessTable[i]["Finstat6"] = tablor[6][2]
              BusinessTable[i]["Date7"] = tablor[7][1]
              BusinessTable[i]["Finstat7"] = tablor[7][2]
            end
          else
            dbExec(mysql, "UPDATE `Business` SET `Date" .. 1 .. "` = ?, `Finstat" .. 1 .. "` = ? WHERE `ID` = ?", tablor[1][1], tablor[1][2], i)
            dbExec(mysql, "UPDATE `Business` SET `Date" .. 2 .. "` = ?, `Finstat" .. 2 .. "` = ? WHERE `ID` = ?", tablor[2][1], tablor[2][2], i)
            dbExec(mysql, "UPDATE `Business` SET `Date" .. 3 .. "` = ?, `Finstat" .. 3 .. "` = ? WHERE `ID` = ?", tablor[3][1], tablor[3][2], i)
            dbExec(mysql, "UPDATE `Business` SET `Date" .. 4 .. "` = ?, `Finstat" .. 4 .. "` = ? WHERE `ID` = ?", tablor[4][1], tablor[4][2], i)
            dbExec(mysql, "UPDATE `Business` SET `Date" .. 5 .. "` = ?, `Finstat" .. 5 .. "` = ? WHERE `ID` = ?", tablor[5][1], tablor[5][2], i)
            dbExec(mysql, "UPDATE `Business` SET `Date" .. 6 .. "` = ?, `Finstat" .. 6 .. "` = ? WHERE `ID` = ?", tablor[6][1], tablor[6][2], i)
            dbExec(mysql, "UPDATE `Business` SET `Date" .. 7 .. "` = ?, `Finstat" .. 7 .. "` = ? WHERE `ID` = ?", tablor[7][1], tablor[7][2], i)
            BusinessTable[i]["Date1"] = tablor[1][1]
            BusinessTable[i]["Finstat1"] = tablor[1][2]
            BusinessTable[i]["Date2"] = tablor[2][1]
            BusinessTable[i]["Finstat2"] = tablor[2][2]
            BusinessTable[i]["Date3"] = tablor[3][1]
            BusinessTable[i]["Finstat3"] = tablor[3][2]
            BusinessTable[i]["Date4"] = tablor[4][1]
            BusinessTable[i]["Finstat4"] = tablor[4][2]
            BusinessTable[i]["Date5"] = tablor[5][1]
            BusinessTable[i]["Finstat5"] = tablor[5][2]
            BusinessTable[i]["Date6"] = tablor[6][1]
            BusinessTable[i]["Finstat6"] = tablor[6][2]
            BusinessTable[i]["Date7"] = tablor[7][1]
            BusinessTable[i]["Finstat7"] = tablor[7][2]
          end
        else
          dbExec(mysql, "UPDATE `Business` SET `Date" .. 1 .. "` = ?, `Finstat" .. 1 .. "` = ? WHERE `ID` = ?", tablor[1][1], tablor[1][2], i)
          dbExec(mysql, "UPDATE `Business` SET `Date" .. 2 .. "` = ?, `Finstat" .. 2 .. "` = ? WHERE `ID` = ?", tablor[2][1], tablor[2][2], i)
          dbExec(mysql, "UPDATE `Business` SET `Date" .. 3 .. "` = ?, `Finstat" .. 3 .. "` = ? WHERE `ID` = ?", tablor[3][1], tablor[3][2], i)
          dbExec(mysql, "UPDATE `Business` SET `Date" .. 4 .. "` = ?, `Finstat" .. 4 .. "` = ? WHERE `ID` = ?", tablor[4][1], tablor[4][2], i)
          dbExec(mysql, "UPDATE `Business` SET `Date" .. 5 .. "` = ?, `Finstat" .. 5 .. "` = ? WHERE `ID` = ?", tablor[5][1], tablor[5][2], i)
          dbExec(mysql, "UPDATE `Business` SET `Date" .. 6 .. "` = ?, `Finstat" .. 6 .. "` = ? WHERE `ID` = ?", tablor[6][1], tablor[6][2], i)
          dbExec(mysql, "UPDATE `Business` SET `Date" .. 7 .. "` = ?, `Finstat" .. 7 .. "` = ? WHERE `ID` = ?", tablor[7][1], tablor[7][2], i)
          BusinessTable[i]["Date1"] = tablor[1][1]
          BusinessTable[i]["Finstat1"] = tablor[1][2]
          BusinessTable[i]["Date2"] = tablor[2][1]
          BusinessTable[i]["Finstat2"] = tablor[2][2]
          BusinessTable[i]["Date3"] = tablor[3][1]
          BusinessTable[i]["Finstat3"] = tablor[3][2]
          BusinessTable[i]["Date4"] = tablor[4][1]
          BusinessTable[i]["Finstat4"] = tablor[4][2]
          BusinessTable[i]["Date5"] = tablor[5][1]
          BusinessTable[i]["Finstat5"] = tablor[5][2]
          BusinessTable[i]["Date6"] = tablor[6][1]
          BusinessTable[i]["Finstat6"] = tablor[6][2]
          BusinessTable[i]["Date7"] = tablor[7][1]
          BusinessTable[i]["Finstat7"] = tablor[7][2]
        end
      else
        local date = getRealTime()
        if(date.monthday < 10) then
          date.monthday = "0" .. date.monthday
        end
        date.month = date.month + 1
        if(date.month < 10) then
          date.month = "0" .. date.month
        end
        local tablor = {}
        tablor[1] = {}
        dbExec(mysql, "INSERT into `Business` (`ID`, `Owner`, `Date1`) VALUES (?, ?, ?)", i, 0, tablor[1][1])
        BusinessTable[i]["Owner"] = 0
        BusinessTable[i]["Products"] = 10000
        BusinessTable[i]["OwnerName"] = ""
        BusinessTable[i]["Benzovoz"] = 0
        BusinessTable[i]["MaxProducts"] = 100000
        BusinessTable[i]["Open"] = true
        BusinessTable[i]["P1"] = 50
        BusinessTable[i]["Money"] = 0
        OrderBiz[i] = {}
        OrderBiz[i]["Products"]	= 0
        OrderBiz[i]["Price"] = 0
        BusinessTable[i]["PayDay"] = 30
        BusinessTable[i]["Roof"] = 0
        local date = getRealTime()
        if(date.monthday < 10) then
          date.monthday = "0" .. date.monthday
        end
        date.month = date.month + 1
        if(date.month < 10) then
          date.month = "0" .. date.month
        end
        BusinessTable[i]["Date1"] = date.monthday .. "." .. date.month .. "." .. date.year + 1900
        BusinessTable[i]["Finstat1"] = 0
        BusinessTable[i]["Date2"] = date.monthday .. "." .. date.month .. "." .. date.year + 1900
        BusinessTable[i]["Finstat2"] = 0
        BusinessTable[i]["Date3"] = date.monthday .. "." .. date.month .. "." .. date.year + 1900
        BusinessTable[i]["Finstat3"] = 0
        BusinessTable[i]["Date4"] = date.monthday .. "." .. date.month .. "." .. date.year + 1900
        BusinessTable[i]["Finstat4"] = 0
        BusinessTable[i]["Date5"] = date.monthday .. "." .. date.month .. "." .. date.year + 1900
        BusinessTable[i]["Finstat5"] = 0
        BusinessTable[i]["Date6"] = date.monthday .. "." .. date.month .. "." .. date.year + 1900
        BusinessTable[i]["Finstat6"] = 0
        BusinessTable[i]["Date7"] = date.monthday .. "." .. date.month .. "." .. date.year + 1900
        BusinessTable[i]["Finstat7"] = 0
      end
    else
      local date = getRealTime()
      if(date.monthday < 10) then
        date.monthday = "0" .. date.monthday
      end
      date.month = date.month + 1
      if(date.month < 10) then
        date.month = "0" .. date.month
      end
      local tablor = {}
      tablor[1] = {}
      tablor[1][1] = date.monthday .. "." .. date.month .. "." .. date.year + 1900
      dbExec(mysql, "INSERT into `Business` (`ID`, `Owner`, `Date1`) VALUES (?, ?, ?)", i, 0, tablor[1][1])
      BusinessTable[i]["Owner"] = 0
      BusinessTable[i]["Products"] = 10000
      BusinessTable[i]["OwnerName"] = ""
      BusinessTable[i]["Benzovoz"] = 0
      BusinessTable[i]["MaxProducts"] = 100000
      BusinessTable[i]["Open"] = true
      BusinessTable[i]["P1"] = 50
      BusinessTable[i]["Money"] = 0
      OrderBiz[i] = {}
      OrderBiz[i]["Products"]	= 0
      OrderBiz[i]["Price"] = 0
      BusinessTable[i]["PayDay"] = 30
      BusinessTable[i]["Roof"] = 0
      local date = getRealTime()
      if(date.monthday < 10) then
        date.monthday = "0" .. date.monthday
      end
      date.month = date.month + 1
      if(date.month < 10) then
        date.month = "0" .. date.month
      end
      BusinessTable[i]["Date1"] = date.monthday .. "." .. date.month .. "." .. date.year + 1900
      BusinessTable[i]["Finstat1"] = 0
      BusinessTable[i]["Date2"] = date.monthday .. "." .. date.month .. "." .. date.year + 1900
      BusinessTable[i]["Finstat2"] = 0
      BusinessTable[i]["Date3"] = date.monthday .. "." .. date.month .. "." .. date.year + 1900
      BusinessTable[i]["Finstat3"] = 0
      BusinessTable[i]["Date4"] = date.monthday .. "." .. date.month .. "." .. date.year + 1900
      BusinessTable[i]["Finstat4"] = 0
      BusinessTable[i]["Date5"] = date.monthday .. "." .. date.month .. "." .. date.year + 1900
      BusinessTable[i]["Finstat5"] = 0
      BusinessTable[i]["Date6"] = date.monthday .. "." .. date.month .. "." .. date.year + 1900
      BusinessTable[i]["Finstat6"] = 0
      BusinessTable[i]["Date7"] = date.monthday .. "." .. date.month .. "." .. date.year + 1900
      BusinessTable[i]["Finstat7"] = 0
    end
  end
end

function customSpawnVehicle( veh, benzik )
	if(isElement(veh) == true) then
		local x, y, z, rz = getElementData(veh, "sx"), getElementData(veh, "sy"), getElementData(veh, "sz"), getElementData(veh, "srz")
		if(rz ~= false) then
			spawnVehicle(veh, x, y, z, 0, 0, rz)
		else
			spawnVehicle(veh, x, y, z, 0, 0, 0)
		end
		if(benzik == nil or benzik == false) then
			SED(veh, "Fuel", 100)
		end
		local pl = getVehicleOccupants(veh)
		for i, n in pairs(pl) do
			removePedFromVehicle(n)
		end
		setVehicleOverrideLights(veh, 1)
		setVehicleEngineState(veh, false)
		SED(veh, "Engine", false)
		if(getElementData(veh, "PrivatePlayer") ~= false) then
			SET(veh, 8)
			local player = getElementData(veh, "PrivatePlayer")
			SIDP(veh, getElementData(IDS[player], "House"))
		end
	end
end

function onMagazinHit( hit, dim )
	if(getElementType(hit) == "player") then
		if(getElementDimension(hit) == getElementDimension(source)) then
			if(getElementInterior(hit) == getElementInterior(source)) then
				local biz = getElementData(hit, "BusinessID")
				local x, y, z = getElementPosition(source)
				local x1, y1, z1 = getElementPosition(hit)
				local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
				if(biz ~= false) then
					if(getElementData(source, "mrkMagaz") ~= false) then
						if(BusinessTable[biz]["Open"] == true) then
							if(dist < 3) then
								showPlayerDialog(hit, 54, 3, "Покупка товаров в магазине", "Список товаров\tЦена\nТелефон\t150$\nСим-карта\t400$\nАптечка\t300$\nКанистра\t400$\nФотоаппарат\t100$\nРем. комплект авто\t450$" , "Купить", "Отмена")
							end
						else
							addBox("Магазин закрылся.\nПросьба покинуть здание.", hit, 255, 0, 0)
						end
					end
				end
			end
		end
	end
end

local iterl = 0

function customDestroyVehicle(veh)
	if(veh ~= nil) then
		if(isElement(veh) == true) then
			local occups = getVehicleOccupants(veh)
			if(occups ~= false) then
				for i, n in pairs(occups) do
					removePedFromVehicle(n)
				end
			end
			local vehid = getElementData(veh, "ID")
			VehicleTable[vehid] = nil
			destroyElement(veh)
		end
	end
end

function onEatPizzaHit( hit, dim )
	if(getElementType(hit) == "player") then
		if(getElementData(source, "mrkMagaz") ~= false) then
			if(getElementData(hit, "Login") == true) then
				showPlayerDialog(hit, 81, 3, "Покупка фастфуда", "Название продукта\tЦена\nПицца с \"Анастасами\"\t100$\nПицца \"Пеппеньезе\"\t175$\nБургер \"White Star\"\t275$", "Купить", "Отмена")
			end
		end
	end
end

for i, n in pairs(BusinessTable) do
	if(i > 9) then
		if(BusinessTable[i]["Type"] == 1) then
			iterl = iterl + 1
			pckBusinessExit[iterl] = createPickup(-25.7998046875, -141.0205078125, 1003.546875, 3, 1318, 0)
			SET(pckBusinessExit[iterl], 16)
			SED(pckBusinessExit[iterl], "BusExit", i)
			SIDP(pckBusinessExit[iterl], i)
			mrkBusiness[iterl] = createMarker(-18.01953125, -136.46796875, 1002.546875, "cylinder", 1.6, 220, 0, 0, 220)
			addEventHandler("onMarkerHit", mrkBusiness[iterl], onMagazinHit)
			SED(mrkBusiness[iterl], "mrkMagaz", i)
			SIDP(mrkBusiness[iterl], i)
			SET(mrkBusiness[iterl], 16)
		elseif(BusinessTable[i]["Type"] == 3) then
			iterl = iterl + 1
			pckBusinessExit[iterl] = createPickup(372.28515625, -133.072265625, 1001.4927978516, 3, 1318, 0)
			SET(pckBusinessExit[iterl], 5)
			SED(pckBusinessExit[iterl], "BusExit", i)
			SIDP(pckBusinessExit[iterl], i)
			mrkBusiness[iterl] = createMarker(374.87109375, -119.302734375, 1000.5001220703, "cylinder", 1.6, 220, 0, 0, 220)
			addEventHandler("onMarkerHit", mrkBusiness[iterl], onEatPizzaHit)
			SED(mrkBusiness[iterl], "mrkMagaz", i)
			SIDP(mrkBusiness[iterl], i)
			SET(mrkBusiness[iterl], 5)
		end
	end
end


function endPlayerWork( thePlayer, key, keyState )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "PWork") == 1) then
			if(getElementData(thePlayer, "VehicleDriverBus") ~= false) then
				showPlayerDialog(thePlayer, 71, 1, "Окончание рабочего дня", "Действительно ли Вы хотите завершить рабочий день?", "Да", "Нет")
			end
		end
        if(getElementData(thePlayer, "PWork") == 3) then
            if(getElementData(thePlayer, "CourierVehicle") ~= false) then
                showPlayerDialog(thePlayer, 71, 1, "Окончание рабочего дня", "Действительно ли Вы хотите завершить рабочий день?", "Да", "Нет")
            end
        end
        if(getElementData(thePlayer, "PWork") == 2) then
            if(getElementData(thePlayer, "TaxiVehicle") ~= false) then
                showPlayerDialog(thePlayer, 71, 1, "Окончание рабочего дня", "Действительно ли Вы хотите завершить рабочий день?", "Да", "Нет")
            end
        end
        if(getElementData(thePlayer, "PWork") == 4) then
            if(getElementData(thePlayer, "MechVeh") ~= false) then
                showPlayerDialog(thePlayer, 71, 1, "Окончание рабочего дня", "Действительно ли Вы хотите завершить рабочий день?", "Да", "Нет")
            end
        end
		if(getElementData(thePlayer, "NWork") > 0) then
			if(getElementData(thePlayer, "NWork") == 6) then
				if(getElementData(thePlayer, "MailVeh") ~= false) then
					showPlayerDialog(thePlayer, 71, 1, "Окончание рабочего дня", "Действительно ли Вы хотите завершить рабочий день?", "Да", "Нет")
				end
			elseif(getElementData(thePlayer, "NWork") == 8) then
				showPlayerDialog(thePlayer, 71, 1, "Окончание рабочего дня", "Действительно ли Вы хотите завершить рабочий день?", "Да", "Нет")
			end
		end
	end
end

function hitMrkAsh( hit, dim )
	if(getElementType(hit) == "player") then
		if(getElementData(hit, "AutoLicense") == 0) then
			if(getElementData(hit, "ASH") == false) then
				if(getElementData(hit, "Passport") > 0) then
					if(getElementData(hit, "AshUrok") == true) then
						showPlayerDialog(hit, 33, 1, "Тест на автомобильную лицензию.", "Хотите ли Вы пройти тест на вождение?\nСтоимость одной попытки прохождения - бесплатно.", "Начать", "Отмена")
					else
						addBox("Сначала изучите ПДД", hit, 255, 0, 0)
						local id = toch(getElementData(hit, "ID"))
						if(GPST[id] ~= nil) then
							if(GPST[id]["Pickup"] ~= nil) then
								if(getElementType(GPST[id]["Pickup"]) == "marker") then
									removeEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
									destroyElement(GPST[id]["Pickup"])
									destroyElement(GPST[id]["Blip"])
									GPST[id] = nil
								end
							end
						end
						GPST[id] = {}
						GPST[id]["Pickup"] = createMarker(264.0458984375, -112.583984375, 1117.6081542969, "checkpoint", 4, 220, 0, 0, 220, hit)
						GPST[id]["Blip"] = createBlip(264.0458984375, -112.583984375, 1117.6081542969, 0, 2, 220, 0, 0, 220, 0, 64000, hit)
						SED(GPST[id]["Pickup"], "Player", hit)
						addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
						SET(GPST[id]["Pickup"], 5)
					end
				else
					addBox("Ошибка: Вам нужно получить паспорт.", hit, 255, 0, 0)
				end
			else
				addBox("Вы уже прошли тест.\nПожалуйста, идите к практической части.", hit, 255, 255, 0)
			end
		else
			addBox("У Вас уже есть лицензия на вождение.", hit, 255, 0, 0)
		end
	end
end

function onTabDown( player, key, state )
	if(getElementData(player, "Login") == true) then
		triggerClientEvent(player, "onGridPlayerOn", player, IDS)
	end 
end

function onTabUp( player, key, state )
	if(getElementData(player, "Login") == true) then
		triggerClientEvent(player, "onGridPlayerOff", player)
	end
end

function isPlayerInRectangle( thePlayer, xmin, ymin, xmax, ymax )	
	local x, y, z = getElementPosition(thePlayer)
	if(x >= xmin and y >= ymin and y <= ymax and x <= xmax) then
		return true
	else
		return false
	end
end

function onPlayerConnect()
	fadeCamera(source, false)
	setElementPosition(source, -1360, -926, -96.79920959472)
	clearChatBox(source)
	setPlayerHudComponentVisible(source, "vehicle_name", false)
	setPlayerHudComponentVisible(source, "area_name", false)
	setPedWalkingStyle(source, 0)
	setCameraTarget(source, source)
	setPlayerBlurLevel(source, 0)
	for i=1,1000 do
		if(IDS[toch(i)] == nil) then
			IDS[toch(i)] = source
			SED(IDS[toch(i)], "ID", i)
			break
		end
	end
	SED(source, "NWork", 0)
	SED(source, "Lvl", 0)
	SED(source, "Exp", 0)
	local name = getPlayerName(source)
	local ch = string.len(name)
	if(ch >= 4 and ch <= 20) then
		for i=1,ch do
			local stl = string.sub(name, i, i)
			if(string.byte(stl) == 95 or (string.byte(stl) > 64 and string.byte(stl) < 91) or (string.byte(stl) > 96 and string.byte(stl) < 123) ) then
			else
				kickPlayer(source, "Nickname may be only A-Z, a-z and _", "Console")
				return false
			end
		end 
		local t = getPlayerName(source)
		if(NameTable[t] == nil) then
			NameTable[t] = source
			local str = t
			SED(source, "Name", str)
		else
			kickPlayer(source, "This account on server.")
			return false
		end
	    if(getElementData(source, "Name") == false) then
	    	SED(source, "Name", getPlayerName(source))
	    end
		SIDP(source, toch(getElementData(source, "ID")))
		SED(source, "Login", false)
		PINTERVAL[getElementData(source, "ID")] = getTickCount()
		TINTERVAL[getElementData(source, "ID")] = getTickCount()
	else
		kickPlayer(source, "от 4 до 20 символов в нике")
	end
	if(isElement(source)) then
		local serial = getPlayerSerial(source)
		local query = dbQuery(mysql, "SELECT COUNT(*) from `ironban` WHERE `Serial` = ?", serial)
		local result = dbPoll(query, -1)
		if(result[1]["COUNT(*)"] > 0) then
			kickPlayer(source, "IronBan")
		else
			SED(source, "PromoExp", -1)
		end
	end
end

function deathTela( pl )
	if(isElement(pl)) then
		customSpawnPlayer(pl, true)
		if(isElement(pl)) then
			setElementHealth(pl, 30)
			if(getElementData(pl, "Food") ~= false) then
				SED(pl, "Food", 30)
				triggerClientEvent(pl, "Food", pl, getElementData(pl, "Food"))
			end
		end
	end
end

function checkAsh( thePlayer )
	if(getElementData(thePlayer, "Quest") == 6) then
		getExp(thePlayer, 1)
		setElementMoney(thePlayer, 350, "Бонус квест")
		SED(thePlayer, "Quest", -1)
		dbExec(mysql, "UPDATE `Accounts` SET `Quest` = ? WHERE `Name` = ?", -1, getElementData(thePlayer, "Name"))
		SED(thePlayer, "AcceptedCall", true)
		addBox("Звонок на телефон.", player, 255, 255, 0)
		setPedAnimation(thePlayer, "ped", "phone_talk", 1, true, true, false, true)
		local id = getElementData(thePlayer, "ID")
		PhoneObject[id] = createObject(16097, 0, 0, 0)
		exports.bone:attachElementToBone(PhoneObject[id], thePlayer, 12,0.03,0.02,0.12,0,90,90)
		showPlayerDialog(thePlayer, 113, 1, "Кен Розенберг по телефону", "Отлично, надо же ты смог все сделать, теперь мне пора идти по делам...\nА ты займись чем-нибудь, город там осмотри…\nМожет вольешься в какой-то коллектив. Да в конце концов, на работу устройся,\nТам еще деньжат подзаработаешь, Кен Розенберг херни не скажет, а то был тут один в голубой рубашке с пальмами,\nНе слушал меня и кончил плохо…\nЛадно, бывай, я позвоню позже.", "Ок", "Отмена")
	end
end

function onPlayerDeath( totalAmmo, killer, killerWeapon, bodypart, stealth )
	local id = getElementData(source, "ID")
	if(isElement(killer) == true) then
		if(killer ~= source) then
			if(killer ~= false) then
				if(getElementType(killer) == "player") then
					if(getElementData(killer, "Faction") >= 1 and getElementData(killer, "Faction") <= 4) then
						if(getElementData(source, "Faction") >= 1 and getElementData(source, "Faction") <= 4) then
							local x, y, z = getElementPosition(source)
							local x1, y1, z1 = getElementPosition(killer)
							local maf1 = getElementData(source, "Faction")
							local maf2 = getElementData(killer, "Faction")
							if(MafiaCapture[maf1]["Pole"] == MafiaCapture[maf2]["Pole"] and MafiaCapture[maf1]["Pole"] ~= nil) then
								local pole = MafiaCapture[maf1]["Pole"] - 4
								local zone = CaptCoord[pole]						
								if(zone["minx"] < x and zone["maxx"] > x and zone["miny"] < y and zone["maxy"] > y) then
									if(zone["minx"] < x1 and zone["maxx"] > x1 and zone["maxy"] > y1 and zone["miny"] < y1) then
										if(maf1 == MafiaCapture[pole+4]["Maf1"]) then
											MafiaCapture[pole+4]["Frag2"] = MafiaCapture[pole+4]["Frag2"] + 1
											for i,n in pairs(IDS) do
												if(getElementData(n, "Login") == true) then
													if(getElementData(n, "Faction") == maf1 or getElementData(n, "Faction") == maf2) then
														triggerClientEvent(n, "captplus", n, 2)
													end
												end
											end
										else
											MafiaCapture[pole+4]["Frag1"] = MafiaCapture[pole+4]["Frag1"] + 1
											for i,n in pairs(IDS) do
												if(getElementData(n, "Login") == true) then
													if(getElementData(n, "Faction") == maf2 or getElementData(n, "Faction") == maf1) then
														triggerClientEvent(n, "captplus", n, 1)
													end
												end
											end
										end
									end
								end
							end
						end
					end
				end
			end
		end
	end
	local object = getElementData(source, "ZavodObject")
	if(isElement(object)) then
		destroyElement(object)
	end
	removeElementData(source, "ZavodObject")
	removeElementData(source, "zState")
	if(getElementData(source, "MechVeh") ~= false) then
		addBox("Вы потеряли сознание,\nИ завершили рабочий день.", source, 255, 0, 0)
		local zprt = getElementData(source, "Zprt")
	    if(zprt ~= false) then
	        removeElementData(source, "Zprt")
	    end
		local veh = getElementData(source, "MechVeh")
		if(veh ~= false) then
			customSpawnVehicle(veh)
			removeElementData(veh, "MechDriver")
			removeElementData(source, "MechVeh")
		end
		removeElementData(source, "MechStage")
		local mrk = getElementData(source, "mrkMech")
		if(mrk ~= false) then
			removeElementData(source, "mrkMech")
			destroyElement(mrk)
		end
		local secveh = getElementData(source, "SVM")
		if(secveh ~= false) then
			local id = toch(getElementData(secveh, "Iter"))
			ServerPerem["MechCars"][id]["veh"] = nil
			customDestroyVehicle(secveh)
			removeElementData(source, "SVM")
		end
	end
	if(getElementData(source, "rentVehicle") ~= false) then
		local veh = getElementData(source, "rentVehicle")
		customSpawnVehicle(veh)
		removeElementData(veh, "rentPlayer")
		removeElementData(source, "rentVehicle")
		if(vehRentTimer[id] ~= nil) then
			if(isTimer(vehRentTimer[id]) == true) then
				killTimer(vehRentTimer[id])
			end
			vehRentTimer[id] = nil
		end
		addBox("Ваша машина была припаркована\nОбратно на стоянку.", source, 255, 255, 0)
	end
	if(getElementData(source, "ArmMatObj") ~= false) then
		local obj = getElementData(source, "ArmMatObj")
		removeElementData(source, "ArmMat")
		exports.bone:detachElementFromBone(obj)
		destroyElement(obj)
		removeElementData(source, "ArmMatObj")
		toggleControl(source, "enter_exit", true)
		toggleControl(source, "fire", true)
		toggleControl(source, "jump", true)
		toggleControl(source, "enter_passenger", true)
		toggleControl(source, "next_weapon", true)
		toggleControl(source, "previous_weapon", true)
		toggleControl(source, "aim_weapon", true)
		toggleControl(source, "sprint", true)
		toggleControl(source, "crouch", true)
		setPedAnimation(source, "BSKTBALL", "BBALL_idle_O", 1, false)
		local mrk = getElementData(source, "mrkArmyGetM")
		if(mrk ~= false) then
			local blp = getElementData(source, "blpArmyGetM")
			removeElementData(source, "mrkArmyGetM")
			removeElementData(source, "blpArmyGetM")
			removeEventHandler("onMarkerHit", mrk, onPlayerPutMaterialArmy)
			destroyElement(mrk)
			destroyElement(blp)
		end
	end
	if(getElementData(source, "MafMat") ~= false) then
		exports.bone:detachElementFromBone(MatObject[id])
		destroyElement(MatObject[id])
		MatObject[id] = nil
		removeElementData(source, "MafMat")
		toggleControl(source, "enter_exit", true)
		toggleControl(source, "fire", true)
		toggleControl(source, "jump", true)
		toggleControl(source, "enter_passenger", true)
		toggleControl(source, "next_weapon", true)
		toggleControl(source, "previous_weapon", true)
		toggleControl(source, "aim_weapon", true)
		toggleControl(source, "sprint", true)
		toggleControl(source, "crouch", true)
		addBox("Вы потеряли сознание и уронили ящик.", source, 255, 0, 0)
	end
	if(getElementData(source, "NWork") == 7) then
		SED(source, "NWork", 0)
		addBox("Вы ушли к рыбам на корм", source, 255, 0, 0)
		local id = toch(getElementData(source, "ID"))
	    destroyElement(fishobj[id])
	    fishobj[id] = nil
	    toggleControl(source, "fire", true)
	    if(getElementData(source, "FishKG") ~= false) then
	    	removeElementData(source, "FishKG")
	    end
	    triggerClientEvent(source, "OnEndWorkFish", source)
	    triggerClientEvent(source, "onClientClearFish", source)
	    if(getElementData(source, "FishBoat") ~= false) then
			if(isElement(getElementData(source, "FishBoat"))) then
				local veh = getElementData(source, "FishBoat")
				customSpawnVehicle(veh)
				removeElementData(veh, "FishPlayer")
				removeElementData(source, "FishBoat")
			end
		end
	end
	if(getElementData(source, "PhonePlayer") ~= false) then
		if(getElementData(source, "AcceptedCall") == true) then
			local secPlayer = getElementData(source, "PhonePlayer")
			if(isElement(secPlayer) == true) then
				addBox("Абонент " .. getElementData(source, "Name") .. " вышел из зоны доступа сети.", secPlayer, 255, 255, 0)
				removeElementData(secPlayer, "PhonePlayer")
				removeElementData(secPlayer, "AcceptedCall")
				setPedAnimation(secPlayer, "BSKTBALL", "BBALL_idle_O", 1, false)
			end
			addBox("Звонок оборвался.", source, 255, 255, 0)
			removeElementData(source, "PhonePlayer")
			removeElementData(source, "AcceptedCall")
			local id = getElementData(source, "ID")
			local secid = getElementData(secPlayer, "ID")
			if(PhoneObject[id] ~= nil) then
				local obj = PhoneObject[id]
				exports.bone:detachElementFromBone(obj)
				destroyElement(obj)
				PhoneObject[id] = nil
			end
			if(PhoneObject[secid] ~= nil) then
				local obj = PhoneObject[secid]
				exports.bone:detachElementFromBone(obj)
				destroyElement(obj)
				PhoneObject[secid] = nil
			end
		else
			local secPlayer = getElementData(source, "PhonePlayer")
			if(isElement(secPlayer) == true) then
				addBox("Абонент " .. getElementData(source, "Name") .. " вышел из зоны доступа сети.", secPlayer, 255, 255, 0)
				removeElementData(secPlayer, "PhonePlayer")
				removeElementData(secPlayer, "AcceptedCall")
			end
			addBox("Звонок оборвался.", source, 255, 255, 0)
			if(PhoneObject[source] ~= nil) then
				local obj = PhoneObject[source]
				exports.bone:detachElementFromBone(obj)
				destroyElement(obj)
				PhoneObject[source] = nil
			end
			if(PhoneObject[secPlayer] ~= nil) then
				local obj = PhoneObject[secPlayer]
				exports.bone:detachElementFromBone(obj)
				destroyElement(obj)
				PhoneObject[secPlayer] = nil
			end
			removeElementData(source, "PhonePlayer")
			removeElementData(source, "AcceptedCall")
		end
	end
	if(getElementData(source, "mrkBenz1") ~= false) then
		local mrk = getElementData(source, "mrkBenz1")
		removeEventHandler("onMarkerHit", mrk, Benz1MarkerHit)
		destroyElement(mrk)
		removeElementData(source, "mrkBenz1")
		local blp = getElementData(source, "blpBenz1")
		destroyElement(blp)
		removeElementData(source, "blpBenz1")
	end
	if(getElementData(source, "LiveVCN") ~= false) then
		removeElementData(source, "LiveVCN")
		addBox("Вы вышли из машины и отключились от эфира", source, 0, 255, 60)
	end
	if(getElementData(source, "mrkArmyGruz") ~= false) then
		local mrk = getElementData(source, "mrkArmyGruz")
		if(isElement(mrk) == true) then
			removeEventHandler("onMarkerHit", mrk, onMrkArmyGruzHit)
			local blp = getElementData(source, "blpArmyGruz")
			destroyElement(mrk)
			destroyElement(blp)
			removeElementData(source, "mrkArmyGruz")
			removeElementData(source, "blpArmyGruz")
		end
	end
	if(getElementData(source, "mrkArmyGruzilo") ~= false) then
		local mrk = getElementData(source, "mrkArmyGruzilo")
		if(isElement(mrk) == true) then
			removeEventHandler("onMarkerHit", mrk, onHitGruzilo)
			local blp = getElementData(source, "blpArmyGruzilo")
			destroyElement(blp)
			destroyElement(mrk)
			removeElementData(source, "mrkArmyGruzilo")
			removeElementData(source, "blpArmyGruzilo")
		end
	end
	if(getElementData(source, "NWork") == 1) then
		triggerClientEvent(source, "ClearLoadWork", source)
		if(getElementData(source, "LoadPack") ~= nil and getElementData(source, "LoadPack") ~= false and getElementData(source, "LoadPack") ~= 0) then
			exports.bone:detachElementFromBone(getElementData(source, "LoadPack"))
			destroyElement(objeect[toch(getElementData(source, "ID"))])
			removeElementData(source, "LoadPack")
		end
		SED(source, "NWork", 0)
		if(toch(getElementData(source, "SummLoads")) ~= nil) then
			setElementMoney(source, toch(getElementData(source, "SummLoads")), "Работа на грузчиках")
			addBox("Вы потеряли сознание\nНа работе грузчиков.\nВам была выплачена зарплата\nВ размере: " .. toch(getElementData(source, "SummLoads")), source, 0, 255, 100)
		end
		removeElementData(source, "SummLoads")
	end
	if(getElementData(source, "PWork") == 3) then
		if(getElementData(source, "CourierVehicle") ~= nil and getElementData(source, "CourierVehicle") ~= false) then
			local veh = getElementData(source, "CourierVehicle")
			customSpawnVehicle(veh)
			removeElementData(veh, "CourierPlayer")
			removeElementData(source, "CourierVehicle")
			addBox("Вы потеряли сознание.\nВаш транспорт был эвакуирован.", source, 255, 0, 0)
		end
		if(getElementData(source, "mrkCourierStart") ~= false) then
			local mrk = getElementData(source, "mrkCourierStart")
			local blp = getElementData(source, "blpCourierStart")
			removeEventHandler("onMarkerHit", mrk, startCourierWork)
			destroyElement(mrk)
			destroyElement(blp)
			removeElementData(source, "mrkCourierStart")
			removeElementData(source, "blpCourierStart")
		end
		if(getElementData(source, "mrkCourierEnd") ~= false) then
			local mrk = getElementData(source, "mrkCourierEnd")
			local blp = getElementData(source, "blpCourierEnd")
			removeEventHandler("onMarkerHit", mrk, mrkCourEnd)
			destroyElement(mrk)
			destroyElement(blp)
			removeElementData(source, "mrkCourierEnd")
			removeElementData(source, "blpCourierEnd")
			removeElementData(source, "Gruz")
			removeElementData(source, "Coef")
		end
		if(getElementData(source, "mrkCour") ~= false) then
			local mrk = getElementData(source, "mrkCour")
			local blp = getElementData(source, "blpCour")
			removeEventHandler("onMarkerHit", mrk, hitCourEnd)
			destroyElement(mrk)
			destroyElement(blp)
			removeElementData(source, "mrkCour")
			removeElementData(source, "blpCour")
			local bus = toch(getElementData(source, "courBiz"))
			OrderBiz[bus]["OrderCourier"] = nil
		end
	end
	if(killer ~= source and killer ~= false) then
		if(getElementData(killer, "Faction") ~= 8 and getElementData(killer, "Faction") ~= 9) then
			addBox("Ваш уровень розыска повышен!\nВы можете быть пойманы и доставлены в тюрьму.\nВы можете сдаться сами в полицейском участке.\nЕсли Вы будете тяжело ранены\nВы автоматически попадете в тюрьму.", killer, 255, 255, 0)
			if(getElementData(killer, "Wanted") ~= false) then
				local old = toch(getElementData(killer, "Wanted"))
				if(getElementData(killer, "Wanted") <= 4) then
					setPlayerWantedLevel(killer, old + 2)
					SED(killer, "Wanted", old + 2)
					updatePlayerAccount(killer, "Wanted", old + 2)
				else
					setPlayerWantedLevel(killer, 6)
					SED(killer, "Wanted", 6)
					updatePlayerAccount(killer, "Wanted", 6)
				end
			else
				setPlayerWantedLevel(killer, 2)
				SED(killer, "Wanted", 2)
				updatePlayerAccount(killer, "Wanted", 2)
			end
		else
			if(getElementData(source, "Wanted") ~= nil and getElementData(source, "Wanted") ~= false) then
				if(toch(getElementData(source, "Wanted")) > 0) then
					if(getElementData(killer, "Faction") == 8) then
						setElementMoney(killer, 500, "Убийство")
						addBox("Нарушитель обезврежен.", killer, 255, 255, 0)
						SED(source, "PoliceJail", toch(getElementData(source, "Wanted")) * 600)
						addBox("Вы были тяжело ранены в погоне\nИ оказались в тюрьме на " .. getElementData(source, "PoliceJail") .. " сек.", source, 255, 255, 0)
						removeElementData(source, "Cuffed")
						setPlayerWantedLevel(source, 0)
						SED(source, "Wanted", 0)
						dbExec(mysql, "UPDATE `Accounts` SET `Wanted` = 0, `PoliceJail` = ? WHERE `Name` = ?", toch(getElementData(source, "Wanted")) * 600, getElementData(source, "Name"))
					else
						local x, y, z = getElementPosition(source)
						for i,n in pairs(IDS) do
							if(getElementData(n, "Login") == true) then
								if(getElementData(n, "Faction") == 8) then
									local x1, y1, z1 = getElementPosition(n)
									local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
									if(dist < 40) then
										if(getElementData(source, "PoliceJail") == false) then
											SED(source, "PoliceJail", toch(getElementData(source, "Wanted")) * 600)
											removeElementData(source, "Cuffed")
											addBox("Вы были тяжело ранены в погоне\nИ оказались в тюрьме на " .. getElementData(source, "PoliceJail") .. " сек.", source, 255, 255, 0)
											setPlayerWantedLevel(source, 0)
											SED(source, "Wanted", 0)
											dbExec(mysql, "UPDATE `Accounts` SET `Wanted` = 0, `PoliceJail` = ? WHERE `Name` = ?", toch(getElementData(source, "Wanted")) * 600, getElementData(source, "Name"))
										end
										break
									end
								end
							end
						end
					end
				end
			end
		end
	end
	if(getElementData(source, "PWork") == 1) then
		local mrk = getElementData(source, "mrkBus")
		local blp = getElementData(source, "blpBus")
		if(isElement(mrk) == true) then
			destroyElement(mrk)
		end
		if(isElement(blp) == true) then
			destroyElement(blp)
		end
		removeElementData(source, "mrkBus")
		removeElementData(source, "blpBus")
		removeElementData(source, "Stage")
		removeElementData(source, "March")
		if(getElementData(source, "VehicleDriverBus") ~= false) then
			local veh = getElementData(source, "VehicleDriverBus")
			local id = getElementData(veh, "BusVehTable")
			setTimer(customSpawnVehicle, 3000, 1, veh)
			removeElementData(veh, "DriverPlayerBus")
			removeElementData(source, "VehicleDriverBus")
			removeElementData(source, "March")
			addBox("Вы потеряли сознание.\nАвтобус будет припаркован на эвакуаторе.", source, 255, 0, 0)
		end
	end
	setTimer(deathTela, 3000, 1, source)
	if(getElementData(source, "PWork") == 2) then
		if(getElementData(source, "TaxiVehicle") ~= nil and getElementData(source, "TaxiVehicle") ~= false) then
			local veh = getElementData(source, "TaxiVehicle")
			local id = getElementData(veh, "TaxiVehTable")
			customSpawnVehicle(veh)
			removeElementData(source, "TaxiVehicle")
			removeElementData(veh, "TaxiDriverPlayer")
		end
	end
	if(getElementData(source, "NWork") == 8) then
		SED(source, "NWork", 0)
	end
	exports.loaderWork:clearLoaderCar(source)
	if(getElementData(source, "NWork") == 5) then
		if(objeect[toch(getElementData(source, "ID"))] ~= nil) then
			destroyElement(objeect[toch(getElementData(source, "ID"))])
			objeect[toch(getElementData(source, "ID"))] = nil
		end
		SED(source, "NWork", 0)
		triggerClientEvent(source, "BuilderEnd", source)
	end
	local veh = getElementData(source, "AshVeh")
	if(veh ~= false) then
		if(isElement(veh) == true) then
			if(getElementData(veh, "AshCar") ~= false) then
				if(getElementData(veh, "AshPlayer") ~= false) then
					local plr = getElementData(veh, "AshPlayer")
					removeElementData(plr, "AshVeh")
					removeElementData(veh, "AshPlayer")
					removeElementData(plr, "ASH")
				end
				setElementHealth(veh, 1000)
				addBox("Вы потеряли сознание.\nТест автошколы завершен.", source, 255, 0, 0)
				removeElementData(source, "AshStage")
				if(isElement(veh) == true) then
					setTimer(customSpawnVehicle, 3000, 1, veh)
				end
				local mrk = getElementData(source, "mrkAsh")
				local blp = getElementData(source, "blpAsh")
				destroyElement(mrk)
				destroyElement(blp)
				removeElementData(source, "mrkAsh")
				removeElementData(source, "blpAsh")
			end
		end
	end
	if(getElementData(source, "MailVeh") ~= false) then
		local veh = getElementData(source, "MailVeh")
		if(isElement(veh) == true) then
			customSpawnVehicle(veh)
			setElementHealth(veh, 1000)
			SED(veh, "Fuel", 40)
			removeElementData(veh, "MailPlayer")
		end
		removeElementData(source, "MailVeh")
		if(getElementData(source, "blpMail") ~= false) then
			local blp = getElementData(source, "blpMail")
			local mrk = getElementData(source, "mrkMail")
			local aff = getEventHandlers("onMarkerHit", mrk)
			destroyElement(mrk)
			destroyElement(blp)
			removeElementData(source, "blpMail")
			removeElementData(source, "mrkMail")
		end
		addBox("Вы потеряли сознание.\nТранспорт был эвакуирован.", source, 0, 100, 250)
		local obj = getElementData(source, "PizzaObject")
		if(obj ~= false) then
			if(isElement(obj)) then
				exports.bone:detachElementFromBone(obj)
				destroyElement(obj)
				removeElementData(source, "PizzaObject")
			end
		end
	end
	toggleAllControls(source, true)
end

function textinchat(thePlayer, command, vehicleModel )
	if(getPedOccupiedVehicle(thePlayer) == false) then
		local x, y, z = getElementPosition(thePlayer)
		local rx, ry, rz = getElementRotation(thePlayer)
		sendClientMessage(x .. ", " .. y .. ", " .. z .. ", " .. rx .. ", " .. ry .. ", " .. rz, thePlayer)
	else
		local veh = getPedOccupiedVehicle(thePlayer)
		local x, y, z = getElementPosition(veh)
		local rx, ry, rz = getElementRotation(veh)
		sendClientMessage(x .. ", " .. y .. ", " .. z .. ", " .. rx .. ", " .. ry .. ", " .. rz, thePlayer)
	end
end

function kill( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 1) then
			setElementHealth(thePlayer, 0)
		end
	end
end

function createVehicleForPlayer(thePlayer, command, vehicleModel)
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 2) then
			if(vehicleModel ~= nil) then
				if(toch(vehicleModel) ~= nil) then
					if(toch(vehicleModel) > 399 and toch(vehicleModel) < 612) then
						local id = toch(getElementData(thePlayer, "ID"))
						if(AdmVeh[id] == nil) then
							AdmVeh[id] = {}
						end
						local interior = getElementInterior(thePlayer)
						local posX,posY,posZ = getElementPosition(thePlayer)
						posX = posX + 5
						local a = #AdmVeh[id] + 1
						AdmVeh[id][a] = createVeh(toch(vehicleModel),posX,posY,posZ)
						SET(AdmVeh[id][a], interior)
						SED(AdmVeh[id][a], "admuha", true)
						addBox("Вы заспавнили " .. toch(vehicleModel), thePlayer, 0, 60, 255)
					end
				else
					addBox("Вы ввели некорректный ID машины.\nИспользуйте 400-611.", thePlayer, 255, 0, 0)
				end
			end
		end
	end
end

function changeWeather(thePlayer, command, weatherid)
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 3) then
			weatherid = toch(weatherid)
			if(weatherid ~= nil) then
				if(weatherid >= 0 and weatherid < 10000) then
					setWeather(weatherid)
					addBox("Вы изменили погоду на ".. weatherid, thePlayer, 0, 60, 255)
				else
					addBox("Ошибка: ID погоды введено некорректно.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: ID погоды введено некорректно.", thePlayer, 255, 0, 0)
			end
		end
	end
end

function changeTime(thePlayer, command, hours)
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 3) then
			local hours = toch(hours)
			if(hours ~= nil) then
				if(hours > -1 and hours < 25) then
					setTime(hours, 0)
					addBox("Вы изменили время на " .. hours .. ":00", thePlayer, 0, 60, 255)
				else
					addBox("Время должно быть от 1 до 24 часов.", thePlayer, 255, 0, 0)
				end
			end
		end
	end
end

function ironban( thePlayer, command, serial )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") == 6) then
			local query = dbQuery(mysql, "SELECT COUNT(*) FROM `IronBan`")
			local result = dbPoll(query, -1)
			dbExec(mysql, "INSERT into `ironban` (`ID`, `Serial`, `AccID`, `Name`) values (?, ?, -1, '')", result[1]["COUNT(*)"], serial)
			sendClientMessage("Вы добавили '" .. serial .. "' в бан по железу.", thePlayer, 255, 255, 0)
		end
	end
end

function onPlayerTakeTazer( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") == 8) then
			if(getElementData(thePlayer, "TogTazer") == false) then
				if(getElementData(thePlayer, "Tazer") ~= false) then
					if(getElementData(thePlayer, "Tazer") > 0) then
						SED(thePlayer, "TogTazer", true)
						local weapon1 = getPedWeapon(thePlayer, 2)
						local ammo1 = getPedTotalAmmo(thePlayer, 2)
						if(weapon1 == 24) then
							SED(thePlayer, "CacheDeagle", ammo1)
						else
							SED(thePlayer, "CacheDeagle", 0)
						end
						takeWeapon(thePlayer, 24)
						giveWeapon(thePlayer, 23, getElementData(thePlayer, "Tazer"))
						addBox("Вы достали тазер.", thePlayer, 0, 255, 60)
					else
						addBox("У Вас нет тазера с собой.", thePlayer, 255, 0, 0)
					end
				else
					addBox("У Вас нет тазера с собой.", thePlayer, 255, 0, 0)
				end
			else
				local weapon1 = getPedWeapon(thePlayer, 2)
				local ammo1 = getPedTotalAmmo(thePlayer, 2)
				if(weapon1 == 23) then
					SED(thePlayer, "Tazer", ammo1)
				else
					SED(thePlayer, "Tazer", false)
				end
				takeWeapon(thePlayer, 23)
				giveWeapon(thePlayer, 24, getElementData(thePlayer, "CacheDeagle"))
				removeElementData(thePlayer, "TogTazer", false)
				addBox("Вы убрали тазер.", thePlayer, 0, 255, 60)
			end
		end
	end
end

function DamageSukaTazer( arg1, arg2 )
	if(arg1 == client) then
		if(getElementData(arg2, "TogTazer") == true) then
			setPedAnimation(arg1, "CRACK", "crckdeth2", 15000, false, true, false) 
			SED(arg1, "Tazered", true)
			setTimer(function ( elem )
				if(isElement(elem)) then
					removeElementData(elem, "Tazered")
				end
			end, 14500, 1, arg1)
		end
	end
end

addEvent("DamageSukaTazer", true)
addEventHandler("DamageSukaTazer", root, DamageSukaTazer)

function onGresp( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") >= 5) then
			if(id ~= nil) then
				if(toch(id) ~= nil) then
					id = toch(id)
					if(id == 1) then
						for i,n in pairs(getElementsByType("vehicle")) do
							if(getElementData(n, "CourierVehID") ~= false) then
								if(getElementData(n, "CourierPlayer") ~= false) then
									local player = getElementData(n, "CourierPlayer")
									if(isElement(player) ~= true) then
										customSpawnVehicle(n)
										removeElementData(n, "CourierVehicle")
										removeElementData(n, "CourierPlayer")
									end
								else
									customSpawnVehicle(n)
									removeElementData(n, "CourierVehicle")
									removeElementData(n, "CourierPlayer")
								end
							end
						end
						addBox("Вы успешно зареспавнили\nВсе незанятые авто курьеров.", thePlayer, 255, 0, 0)
					elseif(id == 2) then
						for i,n in pairs(getElementsByType("vehicle")) do
							if(getElementData(n, "BusVehTable") ~= false) then
								if(getElementData(n, "DriverPlayerBus") == false) then
									customSpawnVehicle(n)
								end
							end
						end
						addBox("Вы успешно зареспавнили\nВсе незанятые авто автобусников.", thePlayer, 255, 0, 0)
					elseif(id == 3) then
						for i,n in pairs(getElementsByType("vehicle")) do
							if(getElementData(n, "TaxiVehTable") ~= false) then
								if(getElementData(n, "TaxiDriverPlayer") == false) then
									customSpawnVehicle(n)
								end
							end
						end
						addBox("Вы успешно зареспавнили\nВсе незанятые авто такси.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: /gresp [1-3]", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: /gresp [1-3]", thePlayer, 255, 0, 0)
			end
		end
	end
end

function onAdmTpMalibu( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") >= 1) then
			SEP(thePlayer, 494.6787109375, -80.0263671875, 10.815821647644)
		end
	end
end

function onPlayerUseDrugs( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true) then
		if(id ~= nil) then
			if(toch(id) ~= nil) then
				id = toch(id)
				id = math.floor(id)
				if(id > 0 and id <= 4) then
					if(getElementData(thePlayer, "Nrk") >= id) then
						if(getElementHealth(thePlayer) + id * 25 > 100) then
							setElementHealth(thePlayer, 100)
						else
							setElementHealth(thePlayer, getElementHealth(thePlayer) + id * 25)
						end
						SED(thePlayer, "Nrk", getElementData(thePlayer, "Nrk") - id)
						if(getElementData(thePlayer, "Food") - id * 30 < 0) then
							SED(thePlayer, "Food", 0)
						else
							SED(thePlayer, "Food", getElementData(thePlayer, "Food") - id * 30)
						end
						UpdateFood(thePlayer)
						updatePlayerAccount(thePlayer, "Nrk", getElementData(thePlayer, "Nrk"))
						addBox("Вы успешно использовали\n" .. id .. " грамм наркотиков.", thePlayer, 0, 60, 255)
						setPedAnimation(thePlayer, "bd_fire", "wash_up", 15000, true, true, false) 
						SED(thePlayer, "Tazered", true)
						setTimer(function ( elem )
							if(isElement(elem)) then
								removeElementData(elem, "Tazered")
								setPedAnimation(thePlayer, "BSKTBALL", "BBALL_idle_O", 1, false)
							end
						end, 14500, 1, thePlayer)
					else
						addBox("У Вас нет столько наркотиков.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: /usedrugs [1-4]", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: /usedrugs [1-4]", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: /usedrugs [1-4]", thePlayer, 255, 0, 0)
		end
	end
end

function onPoliceTake( thePlayer, command, id, cid )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") == 8) then
			if(getElementData(thePlayer, "Rank") >= 3) then
				if(id ~= nil) then
					if(toch(id) ~= nil) then
						id = toch(id)
						if(cid ~= nil) then
							if(toch(cid) ~= nil) then
								cid = toch(cid)
								if(IDS[id] ~= nil) then
									local secPlayer = IDS[id]
									if(getElementData(secPlayer, "Login") == true) then
										local x, y, z = getElementPosition(secPlayer)
										local x1, y1, z1 = getElementPosition(thePlayer)
										local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
										if(dist < 6) then
											if(cid == 1) then
												takeWeapon(secPlayer, 24)
												takeWeapon(secPlayer, 25)
												takeWeapon(secPlayer, 30)
												takeWeapon(secPlayer, 31)
												addBox("Вы изъяли у " .. getElementData(secPlayer, "Name") .. "\nВсё огнестрельное оружие.", thePlayer, 255, 255, 0)
												addBox(getElementData(thePlayer, "Name") .. " изъял у Вас\nВсё огнестрельное оружие.", secPlayer, 255, 255, 0)
											elseif(cid == 2) then
												SED(secPlayer, "Nrk", 0)
												addBox("Вы изъяли у " .. getElementData(secPlayer, "Name") .. "\nВсе наркотики.", thePlayer, 255, 255, 0)
												addBox(getElementData(thePlayer, "Name") .. " изъял у Вас\nВсе наркотики.", secPlayer, 255, 255, 0)
												dbExec(mysql, "UPDATE `Accounts` SET `NRK` = '0' WHERE `ID` = ?", getElementData(secPlayer, "AccID"))
											elseif(cid == 3) then
												SED(secPlayer, "AutoLicense", 0)
												addBox("Вы изъяли у " .. getElementData(secPlayer, "Name") .. "\nЛицензию на вождение.", thePlayer, 255, 255, 0)
												addBox(getElementData(thePlayer, "Name") .. " изъял у Вас\nЛицензию на вождение.", secPlayer, 255, 255, 0)
												dbExec(mysql, "UPDATE `Accounts` SET `AutoLicense` = '0' WHERE `ID` = ?", getElementData(secPlayer, "AccID"))
											elseif(cid == 4) then
												SED(secPlayer, "WeaponLicense", false)
												addBox("Вы изъяли у " .. getElementData(secPlayer, "Name") .. "\nРазрешение на оружие.", thePlayer, 255, 255, 0)
												addBox(getElementData(thePlayer, "Name") .. " изъял у Вас\nРазрешение на оружие.", secPlayer, 255, 255, 0)
												dbExec(mysql, "UPDATE `Accounts` SET `WeaponLicense` = '0' WHERE `ID` = ?", getElementData(secPlayer, "AccID"))
											else
												addBox("Ошибка: /ptake [id] [sid].\nSID: (1) - изъять оружие.\n(2) - изъять наркотики.\n(3) - изъять лицензию на вождение.\n(4) - изъять разрешение на оружие.", thePlayer, 255, 0, 0)
											end
										else
											addBox("Ошибка: Данный игрок слишком далеко.", thePlayer, 255, 0, 0)
										end
									else
										addBox("Ошибка: Данный игрок не авторизован.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Ошибка: Данный игрок не найден.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: /ptake [id] [sid].\nSID: (1) - изъять оружие.\n(2) - изъять наркотики.\n(3) - изъять лицензию на вождение.\n(4) - изъять разрешение на оружие.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: /ptake [id] [sid].\nSID: (1) - изъять оружие.\n(2) - изъять наркотики.\n(3) - изъять лицензию на вождение.\n(4) - изъять разрешение на оружие.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: /ptake [id] [sid].\nSID: (1) - изъять оружие.\n(2) - изъять наркотики.\n(3) - изъять лицензию на вождение.\n(4) - изъять разрешение на оружие.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: /ptake [id] [sid].\nSID: (1) - изъять оружие.\n(2) - изъять наркотики.\n(3) - изъять лицензию на вождение.\n(4) - изъять разрешение на оружие.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Данная команда Вам недоступна.\nТолько с 3 ранга и выше.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Данная команда Вам недоступна.", thePlayer, 255, 0, 0)
		end
	end
end

function onAdminSlap( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") >= 2) then
			if(id ~= nil) then
				if(toch(id) ~= nil) then
					id = toch(id)
					if(IDS[id] ~= nil) then
						local secPlayer = IDS[id]
						if(getElementData(secPlayer, "Login") == true) then
							local x, y, z = getElementPosition(secPlayer)
							SEP(secPlayer, x, y, z + 3.5)
							addBox("Вы пнули игрока " .. getElementData(secPlayer, "Name"), thePlayer, 255, 255, 0)
							addBox("Администратор " .. getElementData(thePlayer, "Name") .. " пнул Вас.", secPlayer, 255, 255, 0)
						else
							addBox("Данный игрок не авторизован.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Данный игрок не найден.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: /slap [id]", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: /slap [id]", thePlayer, 255, 0, 0)
			end
		end
	end
end

function onAdminNIronBan( thePlayer, command, name )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") >= 5) then
			if(name ~= nil) then
				local query = dbQuery(mysql, "SELECT `Serial`, `ID`, `Admin` FROM `Accounts` WHERE `Name` = ?", name)
				local result = dbPoll(query, -1)
				if(result ~= nil) then
					if(result[1] ~= nil) then
						if(result[1]["Serial"] ~= nil) then
							if(result[1]["Admin"] < getElementData(thePlayer, "Admin")) then
								local query = dbQuery(mysql, "SELECT COUNT(*) FROM `IronBan`")
								local res = dbPoll(query, -1)
								addBox("Игрок " .. name .. " отправлен в бан\nПо железу.", thePlayer, 255, 255, 0)
								dbExec(mysql, "INSERT into `IronBan` (`ID`, `Serial`, `AccID`, `Name`) values (?, ?, ?, ?)", res[1]["COUNT(*)"], result[1]["Serial"], result[1]["ID"], name)
								for i,n in pairs(IDS) do
									if(getElementData(n, "Login") == true) then
										if(string.lower(getElementData(n, "Name")) == string.lower(name)) then
											kickPlayer(n, "IronBan")
										end
									end
								end
							else
								addBox("Вы не можете забанить данного игрока.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Данный игрок не найден.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Данный игрок не найден.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Данный игрок не найден.", thePlayer, 255, 0, 0)
				end
			end
		end
	end
end

function onPlayerKFuel( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Kanistra") == true) then
			if(getElementData(thePlayer, "KDK") == false) then
				SED(thePlayer, "KDK", true)
				setTimer(function ( pl )
					if(isElement(pl)) then
						removeElementData(pl, "KDK")
					end
				end, 5000, 1, thePlayer)
				local veh = 0
				local maxdist = 250000
				local x1, y1, z1 = getElementPosition(thePlayer)
				for i,n in pairs(getElementsByType("vehicle")) do
					local x, y, z = getElementPosition(n)
					local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
					if(dist < maxdist and dist < 7) then
						veh = n
						maxdist = dist
					end
				end
				if(veh ~= 0) then
					if(getElementModel(veh) ~= 487) then
						if(getElementData(veh, "Fuel") + 15 < 100) then
							SED(veh, "Fuel", getElementData(veh, "Fuel") + 15)
						else
							SED(veh, "Fuel", 100)
						end
						removeElementData(thePlayer, "Kanistra")
						addBox("Вы успешно заправили ваше т/с.", thePlayer, 0, 60, 255)
					else
						addBox("Вы не можете заправить велосипед.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Рядом с Вами нет авто!", thePlayer, 255, 0, 0)
				end
			else
				addBox("Пожалуйста, подождите.", thePlayer, 180, 180, 180)
			end
		else
			addBox("Ошибка: У Вас нет канистры.\nВы можете приобрести её в ближайшем 24/7\n(/gps - ближайший 24/7)", thePlayer, 255, 0, 0)
		end
	end
end



function onPlayerAdmAdm( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			if(getElementData(thePlayer, "AdmChat") == false) then
				addBox("Вы включили адм. префикс.", thePlayer, 0, 60, 255)
				SED(thePlayer, "AdmChat", true)
			else
				removeElementData(thePlayer, "AdmChat")
				addBox("Вы выключили адм. префикс.", thePlayer, 0, 60, 255)
			end
		end
	end
end

function onAdminTpMech( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			local veh = getPedOccupiedVehicle(thePlayer)
			if(veh == nil or veh == false) then
				SEP(thePlayer, -868.921875, 58.6328125, 9.1480283737183)
			else
				SEP(veh, -868.921875, 58.6328125, 9.1480283737183)
			end
		end
	end
end

function onAdminOffUnLeader( thePlayer, command, ... )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") >= 5) then
			local arg = {...}
			if(#arg > 0) then
				arg = table.concat(arg, " ")
				if(string.len(arg) > 0) then
					local query = dbQuery(mysql, "SELECT `Name`, `Faction`, `Rank` FROM `Accounts` WHERE `Name` = ?", arg)
					local result = dbPoll(query, -1)
					if(result ~= nil) then
						if(result[1] ~= nil) then
							if(result[1]["Name"] ~= nil) then
								if(result[1]["Faction"] > 0) then
									if(result[1]["Rank"] == 10) then
										local ach = false
										for i,n in pairs(IDS) do
											if(getElementData(n, "Login") == true) then
												if(getElementData(n, "Name") == result[1]["Name"]) then
													SED(n, "Faction", 0)
													SED(n, "Rank", 0)
													dbExec(mysql, "UPDATE `Accounts` SET `Faction` = 0, `Rank` = 0, `WorkSkin` = ? WHERE `ID` = ?", getElementData(n, "Skin"), getElementData(n, "AccID"))
													ach = true
													break
												end
											end
										end
										if(ach == false) then
											dbExec(mysql, "UPDATE `Accounts` SET `Faction` = 0, `Rank` = 0 WHERE `Name` = ?", result[1]["Name"])
										end
										addBox("Вы успешно сняли " .. result[1]["Name"] .. "\nС лидерства организации.", thePlayer, 0, 60, 255)
									else
										addBox(result[1]["Name"] .. " не является лидером\nКакой-либо организации.", thePlayer, 255, 0, 0)
									end
								else
									addBox(result[1]["Name"] .. " не является лидером\nКакой-либо организации.", thePlayer, 255, 0, 0)
								end
							else
								addBox(result[1]["Name"] .. " не найден.", thePlayer, 255, 0, 0)
							end
						else
							addBox(arg .. " не найден.", thePlayer, 255, 0, 0)
						end
					else
						addBox(arg .. " не найден.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Вы не ввели имя игрока.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Вы не ввели имя игрока.", thePlayer, 255, 0, 0)
			end
		end
	end
end

function onAdminOffAMute( thePlayer, command, ... )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") >= 4) then
			local arg = {...}
			if(#arg > 1) then
				local name = arg[1]
				if(toch(arg[2]) ~= nil) then
					arg[2] = toch(arg[2])
					if(string.len(name) > 0) then
						if(arg[2] > 0) then
							name = string.lower(name)
							local nash = false
							for i,n in pairs(IDS) do
								if(getElementData(n, "Login") == true) then
									local secName = getElementData(n, "Name")
									secName = string.lower(secName)
									if(secName == name) then
										if(getElementData(n, "Admin") < getElementData(thePlayer, "Admin")) then
											if(arg[2] <= 1000 and arg[2] >= 1) then
												SED(n, "Mute", arg[2] * 60)
												updatePlayerAccount(n, "Mute", arg[2] * 60)
												nash = true
												local str = "Администратор " .. getElementData(thePlayer, "Name") .. " выдал мут в оффлайне игроку " .. arg[1] .. " на " .. arg[2] .. " мин."
												for i,n in pairs(IDS) do
													if(getElementData(n, "Login") == true) then
														sendClientMessage(str, n, 255, 30, 0)
													end
												end
												aid = aid + 1
												dbExec(mysql, "INSERT into `alllogs` (`ID`, `AccID`, `Reason`, `SecID`, `Type`, `Value`) VALUES (?, ?, ?, ?, 11, ?)", aid, getElementData(n, "AccID"), arg[1], getElementData(thePlayer, "AccID"), arg[2])
											else
												addBox("Количество минут введено некорректно.", thePlayer, 255, 0, 0)
											end
										else
											addBox("Вы не можете выдать мут\nДанному игроку.", thePlayer, 255, 0, 0)
										end
										break
									end
								end
							end
							if(nash == false) then
								local query = dbQuery(mysql, "SELECT `ID`, `Admin` from `Accounts` WHERE `nAME` = ?", arg[1])
								local result = dbPoll(query, -1)
								if(result ~= nil) then
									if(result[1] ~= nil) then
										if(result[1]["ID"] ~= nil) then
											if(result[1]["Admin"] < getElementData(thePlayer, "Admin")) then
												if(arg[2] <= 1000 and arg[2] >= 1) then
													dbExec(mysql, "UPDATE `Accounts` SET `Mute` = ? WHERE `Name` = ?", arg[2] * 60, arg[1])
													local str = "Администратор " .. getElementData(thePlayer, "Name") .. " выдал мут в оффлайне игроку " .. arg[1] .. " на " .. arg[2] .. " мин."
													aid = aid + 1
													dbExec(mysql, "INSERT into `alllogs` (`ID`, `AccID`, `Reason`, `SecID`, `Type`, `Value`) VALUES (?, ?, ?, ?, 11, ?)", aid, result[1]["ID"], arg[1], getElementData(thePlayer, "AccID"), arg[2])
													for i,n in pairs(IDS) do
														if(getElementData(n, "Login") == true) then
															sendClientMessage(str, n, 255, 30, 0)
														end
													end
												else
													addBox("Количество минут введено некорректно.", thePlayer, 255, 0, 0)
												end
											else
												addBox("Вы не можете выдать мут\nДанному игроку.", thePlayer, 255, 0, 0)
											end
										else
											addBox("Данный игрок не найден.", thePlayer, 255, 0, 0)
										end
									else
										addBox("Данный игрок не найден.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Данный игрок не найден.", thePlayer, 255, 0, 0)
								end
							end
						else
							addBox("Ошибка: /offamute [Name] [время].", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: /offamute [Name] [время].", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: /offamute [Name] [время].", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: /offamute [Name] [время].", thePlayer, 255, 0, 0)
			end
		end
	end
end

function onAdminAllMoney( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") == 6) then
			for i,n in pairs(IDS) do
				if(getElementData(n, "Login") == true) then
					setElementMoney(n, 2000, "Выдал адм")
					sendClientMessage(getElementData(thePlayer, "Name") .. " выдал Вам 2 тысячи $ из-за проблем с сервером. Приятной игры!", n, 0, 60, 255)
				end
			end
		end
	end
end

function onPlayerToDo( thePlayer, command, ... )
	local arg = {...}
	local a = #arg
	if(a > 0) then
		local str = table.concat(arg, " ")
		if(string.len(str) > 0) then
			local str = string.gmatch(text, "[^*]+")
		else
			addBox("Формат: /todo [текст] * [действие]", thePlayer, 255, 0, 0)
		end
	else
		addBox("Формат: /todo [текст] * [действие]", thePlayer, 255, 0, 0)
	end
end

--addCommandHandler("todo",			onPlayerToDo)
addCommandHandler("allmoney", 		onAdminAllMoney)
addCommandHandler("offamute",		onAdminOffAMute)
addCommandHandler("offunleader",	onAdminOffUnLeader)
addCommandHandler("mech", 			onAdminTpMech)
addCommandHandler("adm",			onPlayerAdmAdm)
addCommandHandler("kfuel",			onPlayerKFuel)
addCommandHandler("nironban",		onAdminNIronBan)
addCommandHandler("slap",			onAdminSlap)
addCommandHandler("ptake",			onPoliceTake)
addCommandHandler("usedrugs",		onPlayerUseDrugs)
addCommandHandler("malibu",			onAdmTpMalibu)
addCommandHandler("gresp",			onGresp)
addCommandHandler("tazer",			onPlayerTakeTazer)
addCommandHandler("ironban", 		ironban)

function giveDeapon(thePlayer, command, playerid, weaponid, ammo )
	if(getElementData(thePlayer, "Admin") ~= nil or getElementData(thePlayer, "Admin") ~= false) then
		if(toch(getElementData(thePlayer, "Admin")) > 4) then
			if(playerid ~= nil) then
				if(toch(playerid) ~= nil) then
					playerid = toch(playerid)
					if(IDS[playerid] ~= nil) then
						if(weaponid ~= nil) then
							if(ammo ~= nil) then
								if(toch(ammo) ~= nil) then
									ammo = toch(ammo)
									if(ammo >= 1) then
										if(toch(weaponid) ~= nil) then
											weaponid = toch(weaponid)
											if((weaponid >= 1 and weaponid <= 31) or weaponid == 43) then
												local secPlayer = IDS[playerid]
												giveWeapon(secPlayer, weaponid, ammo)
												addBox("Вы выдали " .. getElementData(secPlayer, "Name") .."\n" .. weaponid .. " id с " .. ammo .. " пт.", thePlayer, 0, 60, 255)
												addBox("Адм " .. getElementData(thePlayer, "Name") .." выдал Вам\n" .. weaponid .. " id с " .. ammo .. " пт.", secPlayer, 0, 60, 255)
											else
												addBox("/weapon [playerid] [weaponid] [ammo]", thePlayer, 255, 0, 0)
											end
										else
											addBox("Ошибка: Вы ввели некорректный ID оружия.", thePlayer, 255, 0, 0)
										end
									else
										addBox("/weapon [playerid] [weaponid] [ammo]", thePlayer, 255, 0, 0)
									end
								else
									addBox("/weapon [playerid] [weaponid] [ammo]", thePlayer, 255, 0, 0)
								end
							else
								addBox("/weapon [playerid] [weaponid] [ammo]", thePlayer, 255, 0, 0)
							end
						else
							addBox("/weapon [playerid] [weaponid] [ammo]", thePlayer, 255, 0, 0)
						end
					else
						addBox("/weapon [playerid] [weaponid] [ammo]", thePlayer, 255, 0, 0)
					end
				else
					addBox("/weapon [playerid] [weaponid] [ammo]", thePlayer, 255, 0, 0)
				end
			else
				addBox("/weapon [playerid] [weaponid] [ammo]", thePlayer, 255, 0, 0)
			end
		end
	end
end

function aGoto( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 1) then
			if(IDS[toch(id)] == nil) then
				addBox("Ошибка: Данный ID не существует.", thePlayer, 255, 0, 0)
			else
				local secPlayer = IDS[toch(id)]
				if(getElementData(secPlayer, "Login") == true) then
					local veh = getPedOccupiedVehicle(thePlayer)
					if(veh == false) then
						local interior = getElementInterior(secPlayer)
						local dim = getElementDimension(secPlayer)
						SET(thePlayer, interior)
						SIDP(thePlayer, dim)
						local x, y, z = getElementPosition(IDS[toch(id)])
						SEP(thePlayer, x + 3, y, z)
						addBox("Вы телепортировались к " .. getElementData(IDS[toch(id)], "Name"), thePlayer, 0, 60, 255)
					else
						if(getPedOccupiedVehicleSeat(thePlayer) == 0) then
							local x, y, z = getElementPosition(IDS[toch(id)])
							SEP(veh, x + 3, y, z)
							addBox("Вы телепортировались к " .. getElementData(IDS[toch(id)], "Name"), thePlayer, 0, 60, 255)
						else
							local interior = getElementInterior(secPlayer)
							local dim = getElementDimension(secPlayer)
							SET(thePlayer, interior)
							SIDP(thePlayer, dim)
							local x, y, z = getElementPosition(IDS[toch(id)])
							SEP(thePlayer, x + 3, y, z)
							addBox("Вы телепортировались к " .. getElementData(IDS[toch(id)], "Name"), thePlayer, 0, 60, 255)
						end
					end
				else
					addBox("Ошибка: Данный игрок не авторизован", thePlayer, 255, 0, 0)
				end
			end
		end
	end
end

function aGet( thePlayer, command, id )
	if(getElementData(thePlayer, "Admin") ~= nil and getElementData(thePlayer, "Admin") ~= false) then
		local Admin = toch(getElementData(thePlayer, "Admin"))
		if(Admin > 2) then
			if(IDS[toch(id)] ~= nil) then
				local secPlayer = IDS[toch(id)]
				if(getElementData(secPlayer, "Login") == true) then
					if(getPedOccupiedVehicle(secPlayer) == false) then
						local x, y, z = getElementPosition(thePlayer)
						local interior = getElementInterior(thePlayer)
						local dim = getElementDimension(thePlayer)
						SED(secPlayer, "ByAdmin", true)
						setTimer(function ( player )
							if(isElement(player)) then
								removeElementData(secPlayer, "ByAdmin")
							end
						end, 500, 1, secPlayer)
						SEP(secPlayer, x + 3, y, z)
						SET(secPlayer, interior)
						SIDP(secPlayer, dim)
					else
						addBox("Данный игрок в машине.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: Данный игрок не авторизован.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: Данный игрок не найден.", thePlayer, 255, 0, 0)
			end
		end
	end
end

function goTp( thePlayer, command, x, y, z )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			if(z == nil) then
				return
			end
			if(x == nil) then
				return
			end
			if(y == nil) then
				return
			end
			if(tonumber(x) ~= nil) then
				if(tonumber(y) ~= nil) then
					if(tonumber(z) ~= nil) then
						SEP(thePlayer, x, y, z)
					end
				end
			end
		end
	end
end

function UpdateFood( thePlayer )
	if(getElementData(thePlayer, "Login") == true) then
		triggerClientEvent(thePlayer, "Food", thePlayer, getElementData(thePlayer, "Food"))
	end
end

function spectateToPlayer( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			if(IDS[toch(id)] == nil) then
				addBox("Ошибка: Игрок с таким id не найден.", thePlayer, 255, 0, 0)
			else
				if(IDS[toch(id)] == thePlayer) then
					addBox("Вы не можете следить сами за собой", thePlayer, 255, 0, 0)
				else
					setElementFrozen(thePlayer, true)
					local secPlayer = IDS[toch(id)]
					local dim = getElementDimension(secPlayer)
					local interior = getElementInterior(secPlayer)
					SIDP(thePlayer, dim)
					local into = getElementInterior(thePlayer)
					SET(thePlayer, interior)
					setCameraTarget(thePlayer, secPlayer)
					SED(thePlayer, "SID", getElementData(secPlayer, "ID"))
					local veh = getPedOccupiedVehicle(thePlayer)
					SED(thePlayer, "SpVeh", veh)
					if(veh ~= false) then
						setElementFrozen(veh, true)
					end
					if(getElementData(thePlayer, "spoz") == false) then
						local x, y, z = getElementPosition(thePlayer)
						local tablo =
						{
							[1] = x,
							[2] = y,
							[3] = z,
							[4] = dim,
							[5] = into
						}
						SED(thePlayer, "spoz", tablo)
					end
				end
			end
		end
	end
end

function onStopSpectating (thePlayer, command)
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			SIDP(thePlayer, 0)
			SET(thePlayer, 0)
			setCameraTarget(thePlayer, thePlayer)
			if(getElementData(thePlayer, "spoz") ~= false) then
				local tablo = getElementData(thePlayer, "spoz")
				local x, y, z = tablo[1], tablo[2], tablo[3]
				SIDP(thePlayer, tablo[4])
				if(tablo[5] ~= nil) then
					SET(thePlayer, tablo[5])
				end
				SEP(thePlayer, x, y, z)
				removeElementData(thePlayer, "spoz")
				if(getElementData(thePlayer, "SpVeh") ~= false) then
					local veh = getElementData(thePlayer, "SpVeh")
					setElementFrozen(veh, false)
				end
				setElementFrozen(thePlayer, false)
				removeElementData(thePlayer, "SID")
			end
		end
	end
end

function tpToGruz( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			local veh = getPedOccupiedVehicle(thePlayer)
			if(veh == nil or veh == false) then
				SEP(thePlayer, -729, -1280, 14)
			else
				SEP(veh, -729, -1280, 14)
			end
		end
	end
end

function setSkin( thePlayer, command, playerid, id )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 3) then
			if(playerid ~= nil) then
				if(toch(playerid) ~= nil) then
					playerid = toch(playerid)
					if(toch(id) ~= nil) then
						id = toch(id)
						if(id >= 0 and id <= 312) then
							if(IDS[playerid] ~= nil) then
								local secPlayer = IDS[playerid]
								if(getElementData(secPlayer, "Login") == true) then
									setElementModel(secPlayer, id)
									addBox("Вы установили " .. getElementData(secPlayer, "Name") .. "\n" .. id .. " ид скина.", thePlayer, 255, 255, 0)
									addBox("Адм. " .. getElementData(thePlayer, "Name") .. " установил Вам\n" .. id .. " ид скина.", secPlayer, 255, 255, 0)
								else
									addBox("Игрок не авторизован.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Игрок не найден.", thePlayer, 255, 0, 0)
							end
						else
							addBox("ID скина указан некорректно.", thePlayer, 255, 0, 0)
						end
					else
						addBox("/setskin [playerid] [id]", thePlayer, 255, 0, 0)
					end
				else
					addBox("/setskin [playerid] [id]", thePlayer, 255, 0, 0)
				end
			else
				addBox("/setskin [playerid] [id]", thePlayer, 255, 0, 0)
			end
		end
	end
end

function timerQuest( thePlayer )
	if(isElement(thePlayer)) then
		if(getElementData(thePlayer, "AcceptedCall") == false) then
			SED(thePlayer, "AcceptedCall", true)
			addBox("Звонок на телефон.", thePlayer, 255, 255, 0)
			setPedAnimation(thePlayer, "ped", "phone_talk", 1, true, true, false, true)
			local id = getElementData(thePlayer, "ID")
			PhoneObject[id] = createObject(16097, 0, 0, 0)
			exports.bone:attachElementToBone(PhoneObject[id], thePlayer, 12,0.03,0.02,0.12,0,90,90)
			showPlayerDialog(thePlayer, 109, 1, "Кен Розенберг по телефону", "Мне тут сказали, что ты там и пособие получил на 300 баксов?\nНеплохо они там подлизываются, но этого тебе не хватит, надо самому руки запачкать.\nУ тебя есть несколько вариантов куда пойти работать.\n \nПервое - это работа у моего знакомого, Жирного Джони. Работа не пальная и интересная, чтобы узнать город.\nЕсли ты хочешь туда попасть, советую сдать на права или заранее арендовать велосипед.\nКататься по городам и окрестности придется постоянно.\n \nВторая - в порту, будешь разгружать прибывший корабль.\n \nИ третий вариант пойти работать на стройку, опасно конечно, но платят там нормально.\n \nНу а теперь выбирай сам, что больше нравится.\nТам тебе скажут, что нужно сделать.", "Ок", "Отмена")
		else
			setTimer(timerQuest, 30 * 1000, 1, thePlayer)
		end
	end
end

function createdObject( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 5) then
			local x, y, z = getElementPosition( thePlayer )
			local obj = createObject(toch(id), x + 2, y, z)
			setElementAlpha(obj, 255)
		end
	end
end

function checkFood( thePlayer )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Quest") == 4) then
			SED(thePlayer, "Quest", 5)
			dbExec(mysql, "UPDATE `Accounts` SET `Quest` = ? WHERE `Name` = ?", 5, getElementData(client, "Name"))
			setTimer(timerQuest, 30 * 1000, 1, thePlayer)
			addBox("Ожидайте звонка от Кена Розенберга!", thePlayer, 255, 255, 0)
		else
			return
		end
	else
		kickPlayer(thePlayer, "error")
	end
end

function showPass( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true) then
		if(IDS[toch(id)] ~= false and IDS[toch(id)] ~= nil) then
			if(getElementData(IDS[toch(id)], "Login") == true) then
				if(getElementData(thePlayer, "Passport") == 2) then
					local x, y, z = getElementPosition(thePlayer)
					local x1, y1, z1 = getElementPosition(IDS[toch(id)])
					if(getDistanceBetweenPoints3D(x, y, z, x1, y1, z1) < 3) then
						local pl = IDS[toch(id)]
						local name = getElementData(thePlayer, "Name")
						local lvl = toch(getElementData(thePlayer, "Lvl"))
						local wanted = getElementData(thePlayer, "Wanted")
						local hid = toch(getElementData(thePlayer, "House"))
						local hm = toch(getElementData(thePlayer, "House"))
						if(hm > 0) then
							hm = "Дом: " .. hm .. " id"
							if(HouseTable[hid]["vx"] ~= 0) then
								hm = hm .. "\nГараж у дома: есть."
							else
								hm = hm .. "\nГараж у дома: отсутствует."
							end
						else
							hm = "Дом: отсутствует"
						end
						local str = "Имя Фамилия: " .. name .. "\nЛет в штате: " .. lvl .. "\nУровень розыска: " .. wanted .. "\n" .. hm
						showPlayerDialog(pl, 55500, 1, "Паспорт " .. name, str, "Принять", "Отмена" )
					else
						addBox("Ошибка: Вы слишком далеко от данного игрока", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: У Вас нет паспорта.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: Данный игрок не авторизован.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: Данный игрок не найден", thePlayer, 255, 0, 0)
		end
	end
end

function showLic( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true) then
		if(id ~= nil) then
			if(toch(id) ~= nil) then
				id = toch(id)
				if(IDS[id] ~= nil) then
					local secPlayer = IDS[id]
					if(getElementData(secPlayer, "Login") == true) then
						local x, y, z = getElementPosition(secPlayer)
						local xu, yu, zu = getElementPosition(thePlayer)
						local dist = getDistanceBetweenPoints3D(x, y, z, xu, yu, zu)
						if(dist < 20) then
							local str = ""
							if(getElementData(thePlayer, "AutoLicense") == 1) then
								str = "Водительская лицензия: есть"
							else
								str = "Водительская лицензия: отсутствует"
							end
							if(getElementData(thePlayer, "WeaponLicense") == true) then
								str = str .. "\nРазрешение на оружие: есть"
							else
								str = str .. "\nРазрешение на оружие: отсутствует"
							end
							showPlayerDialog(secPlayer, 22200, 1, "Список лицензий", str, "Ок", "Отмена")
						else
							addBox("Ошибка: Игрок слишком далеко", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: Игрок не авторизован", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: ID не найден.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: /showlic [ID игрока]", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: /showlic [ID игрока]", thePlayer, 255, 0, 0)
		end
	end
end

function tpToCourier( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			SEP(thePlayer, -885.876953125, -1429.6162109375, 11.832637786865)
		end
	end
end

function invitePlayerFaction( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true) then
		if(id ~= nil) then
			if(toch(getElementData(thePlayer, "Faction")) > 0) then
				if(toch(getElementData(thePlayer, "Rank")) > 8) then
					if(toch(id) ~= nil and toch(id) ~= false) then
						local plid = toch(id)
						if(IDS[plid] ~= nil) then
							if(getElementData(IDS[plid], "Login") == true) then
								local secPlayer = IDS[plid]
								if(secPlayer ~= thePlayer) then
									local x, y, z = getElementPosition(thePlayer)
									local sX, sY, sZ = getElementPosition(secPlayer)
									local dist = getDistanceBetweenPoints3D(x, y, z, sX, sY, sZ)
									if(dist < 3) then
										local Level = getElementData(secPlayer, "Lvl")
										if(Level > 1) then
											if(toch(getElementData(secPlayer, "Faction")) < 1) then
												if(toch(getElementData(secPlayer, "Warn")) == 0) then
													local factt = getElementData(secPlayer, "TableFactionBans")
													if(factt[toch(getElementData(thePlayer, "Faction"))] == false) then
														local factsp = toch(getElementData(thePlayer, "Faction"))
														SED(secPlayer, "FactionInvite", factsp)
														local secName = getElementData(secPlayer, "Name")
														SED(secPlayer, "FactionPlayer", thePlayer)
														addBox("Вы пригласили " .. getElementData(secPlayer, "Name") .. "\nВ свою организацию.", thePlayer, 0, 255, 60)
														showPlayerDialog(secPlayer, 96, 1, "Приглашение в организацию", getElementData(thePlayer, "Name") .. " предложил Вам вступить\nВ " .. FactionName[factsp][1] .. "\nДействительно ли Вы хотите вступить в данную организацию?", "Принять", "Отмена")
													else
														addBox("Данный игрок находится\nВ черном списке организации.", thePlayer, 255, 0, 0)
													end
												else
													addBox("Ошибка: У этого игрока есть\nпредупреждение от администрации.", thePlayer, 255, 0, 0)
												end
											else
												addBox("Ошибка: Данный игрок уже\nнаходится в организации", thePlayer, 255, 0, 0)
											end
										else
											addBox("Ошибка: Уровень данного игрока\nслишком низкий.", thePlayer, 255, 0, 0)
										end
									else
										addBox("Ошибка: Данный игрок слишком далеко", thePlayer, 255, 0, 0)
									end
								else
									addBox("Ошибка: Вы не можете применить\nэто действие к самому себе.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: Данный игрок не авторизован", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: Вы ввели некорректный ID", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: Вы ввели некорректный ID", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: У вас нет доступа\nдля этого действия.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: Вы не находитесь в\nорганизации.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: /invite [id]", thePlayer, 255, 0, 0)
		end
	else
		addBox("Ошибка: Вы не авторизованы.", thePlayer, 255, 0, 0)
	end	
end

function onPlayerLeave( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(toch(getElementData(thePlayer, "Faction")) > 0) then
			local rank = toch(getElementData(thePlayer, "Rank"))
			if(rank > 5 and rank < 10) then
				local plname = getElementData(thePlayer, "Name")
				local m = dbQuery(mysql, "UPDATE `Accounts` SET `Faction` = '0', `Rank` = '0' WHERE `Name` = ?", plname)
				dbFree(m)
				SED(thePlayer, "Faction", 0)
				SED(thePlayer, "Rank", 0)
				spawnPlayer(thePlayer, -1392.142578125, -877.5107421875, 20.86149597168)
				setElementModel(thePlayer, getElementData(thePlayer, "Skin"))
				addBox("Вы уволились из организации", thePlayer, 0, 60, 255)
				local mrk = getElementData(thePlayer, "mrkArmyGruz")
				if(isElement(mrk) == true) then
					removeEventHandler("onMarkerHit", mrk, onMrkArmyGruzHit)
					local blp = getElementData(thePlayer, "blpArmyGruz")
					destroyElement(mrk)
					destroyElement(blp)
					removeElementData(thePlayer, "mrkArmyGruz")
					removeElementData(thePlayer, "blpArmyGruz")
				end
				local id = getElementData(thePlayer, "ID")
				ColorTable[id] = 21
				for i,n in pairs(IDS) do
					if(n ~= thePlayer) then
						if(getElementData(n, "Login") == true) then
							triggerClientEvent(n, "onChangeClist", n, id, thePlayer, ColorTable[id])
						end
					end
				end
			elseif(rank < 6) then
				addBox("Уволить из организации до 5 ранга\nВас может только лидер организации.", thePlayer, 255, 0, 0)
			else
				addBox("Уволить с лидерства Вас\nМожет только администратор.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: Вы не находитесь в организации", thePlayer, 255, 0, 0)
		end
	end
end

function setPlayerRank( thePlayer, command, id, rank )
	if(getElementData(thePlayer, "Login") == true) then
		if(toch(getElementData(thePlayer, "Faction")) > 0) then
			if(toch(getElementData(thePlayer, "Rank")) > 8) then
				if(toch(id) ~= nil) then
					if(IDS[toch(id)] ~= nil) then
						local secPlayer = IDS[toch(id)]
						if(getElementData(secPlayer, "Login") == true) then
							if(toch(getElementData(secPlayer, "Faction")) == toch(getElementData(thePlayer, "Faction"))) then
								if(thePlayer ~= secPlayer) then
									if(toch(getElementData(secPlayer, "Rank")) <= toch(getElementData(thePlayer, "Rank")) - 1) then
										if(toch(rank) ~= nil and toch(rank) <= (toch(getElementData(thePlayer, "Rank")) - 1) and toch(getElementData(thePlayer, "Rank")) > 0) then
											rank = toch(rank)
											if(rank > 0 and rank < 10) then
												local x, y, z = getElementPosition(thePlayer)
												local sX, sY, sZ = getElementPosition(secPlayer)
												local range = getDistanceBetweenPoints3D(x, y, z, sX, sY, sZ)
												if(range < 5) then
													local m = dbQuery(mysql, "UPDATE `Accounts` SET `Rank` = ? WHERE `Name` = ?", rank, getElementData(secPlayer, "Name"))
													dbFree(m)
													SED(secPlayer, "Rank", toch(rank))
													addBox("Ваш ранг изменён на " ..  FactionRankName[toch(getElementData(thePlayer, "Faction"))][toch(rank)], secPlayer, 255, 255, 0)
													local gd = FactionRankName[toch(getElementData(secPlayer, "Faction"))][toch(rank)]
													addBox("Вы изменили " .. getElementData(secPlayer, "Name") ..  "\nна " .. gd, thePlayer, 255, 255, 0)
												else
													addBox("Ошибка: Данный игрок слишком далеко от Вас.", thePlayer, 255, 0, 0)
												end
											else
												addBox("Ошибка: Ранг введен некорректно.", thePlayer, 255, 0, 0)
											end
										else
											addBox("Ошибка: Ранг введён некорректно", thePlayer, 255, 0, 0)
										end
									else
										addBox("Ошибка: Данный игрок имеет слишком высокий ранг.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Ошибка: Вы не можете изменить ранг самому себе", thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: Данный игрок не находится в вашей фракции.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: Данный игрок не авторизован", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: Данный игрок не найден.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: Вы ввели некорректный ID", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: У вас нет доступа к этому действию", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: Вы не находитесь в организации", thePlayer, 255, 0, 0)
		end
	end
end

function uninvitePlayerFaction( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true) then
		if(toch(getElementData(thePlayer, "Faction")) > 0) then
			if(toch(getElementData(thePlayer, "Rank")) > 8) then
				if(toch(id) ~= nil) then
					if(IDS[toch(id)] ~= nil) then
						local secPlayer = IDS[toch(id)]
						if(secPlayer ~= thePlayer) then
							if(getElementData(secPlayer, "Login") == true) then
								if(toch(getElementData(secPlayer, "Faction")) == toch(getElementData(thePlayer, "Faction"))) then
									if(toch(getElementData(thePlayer, "Rank")) > toch(getElementData(secPlayer, "Rank"))) then
										local secName = getElementData(secPlayer, "Name")
										local theName = getElementData(thePlayer, "Name")
										SED(secPlayer, "Faction", 0)
										SED(secPlayer, "Rank", 0)
										local m = dbQuery(mysql, "UPDATE `Accounts` SET `Faction` = '0', `Rank` = '0' WHERE `Name` = '?'", secName)
										dbFree(m)
										addBox("Вы уволили игрока " .. secName .. " из организации", thePlayer, 0, 100, 255)
										addBox("Вы были уволены из организации игроком " .. theName, secPlayer, 0, 100, 255)
										SED(secPlayer, "WorkSkin", getElementData(secPlayer, "Skin"))
										setElementModel(secPlayer, getElementData(secPlayer, "Skin"))
										local mrk = getElementData(secPlayer, "mrkArmyGruz")
										if(isElement(mrk) == true) then
											removeEventHandler("onMarkerHit", mrk, onMrkArmyGruzHit)
											local blp = getElementData(secPlayer, "blpArmyGruz")
											destroyElement(mrk)
											destroyElement(blp)
											removeElementData(secPlayer, "mrkArmyGruz")
											removeElementData(secPlayer, "blpArmyGruz")
										end
										local id = getElementData(secPlayer, "ID")
										ColorTable[id] = 21
										for i,n in pairs(IDS) do
											if(n ~= secPlayer) then
												if(getElementData(n, "Login") == true) then
													triggerClientEvent(n, "onChangeClist", n, id, secPlayer, ColorTable[id])
												end
											end
										end
									else
										addBox("Ошибка: Ранг данного игрока слишком высок.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Ошибка: Данный игрок не находится в вашей организации.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: Данный игрок не авторизован", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: Вы не можете применить это действие к самому себе", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: Данный игрок не найден.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: /uninvite [id]", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: Данная команда Вам недоступна.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: Вы не находитесь в организации.", thePlayer, 255, 0, 0)
		end
	else
		addBox("Ошибка: Вы не авторизованы.", thePlayer, 255, 0, 0)
	end
end

function onAdminTpKino( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			SEP(thePlayer, -26.3671875, 964.310546875, 10.899536132813)
		end
	end
end

function onplayercveh( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		local x, y, z = getElementPosition(thePlayer)
		local id = getElementData(thePlayer, "ID")
		if(PCar[id] == nil) then
			PCar[id] = createVeh(579, x, y + 1, z)
		else
			local veh = PCar[id]
			if(isElement(veh)) then
				local vehid = getElementData(PCar[id], "ID")
				VehicleTable[vehid] = nil
				if(getVehicleOccupants(veh) ~= false) then
					local tas = getVehicleOccupants(veh)
					for i, n in pairs(tas) do
						removePedFromVehicle(n)
					end
				end
				destroyElement(veh)
				PCar[id] = nil
			end
			PCar[id] = createVeh(579, x, y + 1, z)
		end
		SED(PCar[id], "PCar", id)
	end
end

function onAdminDelVeh( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			local id = toch(getElementData(thePlayer, "ID"))
			if(AdmVeh[id] ~= nil) then
				for i,n in pairs(AdmVeh[id]) do
					customDestroyVehicle(n)
					AdmVeh[id][i] = nil
				end
				addBox("Весь транспорт очищен.", thePlayer, 0, 60, 255)
			end
		end
	end
end

function anda( thePlayer, command, block, name )
	setPedAnimation(thePlayer, block, name)
end

SED(getRootElement(), afsaf, aaaa)

function checkRent( thePlayer )
	if(isElement(thePlayer) == true) then
		local veh = getPedOccupiedVehicle(thePlayer)
		if(veh ~= rentVehTable[id]) then
			local id = toch(getElementData(thePlayer, "ID"))
			rentTimer[id] = nil
			if(isElement(rentVehTable[id]) == true) then
				customDestroyVehicle(rentVehTable[id])
				rentVehTable[id] = nil
				addBox("Ваш арендованный транспорт\nБыл припаркован после 5 минут.", thePlayer, 255, 0, 0)
			end
		end
	end
end

function verntodim( arg1 )
	if(client ~= nil) then
		if(arg1 == client) then
			SIDP(arg1, 0)
		end
	end
end

function onTpRent( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			id = toch(id)
			if(id == 3) then
				SEP(thePlayer, -406.783203125, 912.5244140625, 10.81372833252)
			elseif(id == 2) then
				SEP(thePlayer, -1170.3701171875, -944.3173828125, 14.826175689697)
			elseif(id == 1) then
				SEP(thePlayer, 317.9892578125, 1217.65234375, 17.46044921875)
			else
				addBox("Ошибка: /tprent [1-3]", thePlayer, 255, 0, 0)
			end
		end
	end
end


function onTpHouse( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			if(id ~= nil) then
				if(toch(id) ~= nil) then
					id = toch(id)
					id = math.floor(id)
					if(id > 0) then
						if(HouseTable[id] ~= nil) then
							local x, y, z = HouseTable[id]["x"], HouseTable[id]["y"], HouseTable[id]["z"]
							SEP(thePlayer, x, y, z)
							SIDP(thePlayer, 0)
							SET(thePlayer, 0)
						else
							addBox("Ошибка: Данный дом не существует.", client, 255, 0, 0)
						end
					else
						addBox("Ошибка: ID дома введен некорректно.", client, 255, 0, 0)
					end
				else
					addBox("Ошибка: ID дома введен некорректно.", client, 255, 0, 0)
				end
			else
				addBox("Ошибка: ID дома введен некорректно.", client, 255, 0, 0)
			end
		end
	end
end

function onPlayerPutMaterialArmy( hit, dim )
	if(getElementType(hit) == "player") then
		if(getElementData(hit, "Faction") == 9) then
			if(getElementData(hit, "ArmMat") ~= false) then
				if(Server["ArmyGruz"] <= 100000 - 25) then
					addBox("Вы погрузили ящик на склад армии.", hit, 0, 60, 255)
					removeElementData(hit, "ArmMat")
					local obj = getElementData(hit, "ArmMatObj")
					exports.bone:detachElementFromBone(obj)
					destroyElement(obj)
					removeElementData(hit, "ArmMatObj")
					toggleControl(hit, "enter_exit", true)
					toggleControl(hit, "fire", true)
					toggleControl(hit, "jump", true)
					toggleControl(hit, "enter_passenger", true)
					toggleControl(hit, "next_weapon", true)
					toggleControl(hit, "previous_weapon", true)
					toggleControl(hit, "aim_weapon", true)
					toggleControl(hit, "sprint", true)
					toggleControl(hit, "crouch", true)
					setPedAnimation(hit, "BSKTBALL", "BBALL_idle_O", 1, false)
					Server["ArmyGruz"] = Server["ArmyGruz"] + 25
					dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = ?", Server["ArmyGruz"], "ArmyGruz")
				else
					addBox("Склад армии полон.\nВерните ящик в машину. (/putm)", hit, 255, 0, 0)
				end
			else
				if(Server["ArmyGruz"] >= 25) then
					local veh = getPedOccupiedVehicle(hit)
					if(veh == false) then
						Server["ArmyGruz"] = Server["ArmyGruz"] - 25
						dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = ?", Server["ArmyGruz"], "ArmyGruz")
						addBox("Вы взяли ящик с боеприпасами\nС армейского склада.", hit, 0, 60, 255)
						SED(hit, "ArmMat", true)
						local obj = createObject(12969, 0, 0, 0)
						setTimer(function ( player )
							if(isElement(player)) then
								setPedAnimation(player, "carry", "crry_prtial", 1, true, true, false, true)
							end
						end, 200, 1, hit)
						exports.bone:attachElementToBone(obj, hit, 12,0.2,0.1,0,90,180,-25)
						SED(hit, "ArmMatObj", obj)
						toggleControl(hit, "enter_exit", false)
						toggleControl(hit, "fire", false)
						toggleControl(hit, "jump", false)
						toggleControl(hit, "enter_passenger", false)
						toggleControl(hit, "next_weapon", false)
						toggleControl(hit, "previous_weapon", false)
						toggleControl(hit, "aim_weapon", false)
						toggleControl(hit, "sprint", false)
						toggleControl(hit, "crouch", false)
					else
						addBox("Вы не можете взять ящик в транспорте.", hit, 255, 0, 0)
					end
				else
					addBox("На складе недостаточно материалов\nЧтобы взять ящик.", hit, 255, 0, 0)
				end
			end
		end
	end
end

function onGetMaterial( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getPedOccupiedVehicle(thePlayer) == false) then
			if(getElementData(thePlayer, "Faction") >= 1 and getElementData(thePlayer, "Faction") <= 4) then
				if(getElementData(thePlayer, "MafMat") == false) then
					local x, y, z = getElementPosition(thePlayer)
					local bull = false
					local vehcr = 0
					local maxdist = 30000
					for i, n in pairs(ArmyCar) do
						local x1, y1, z1 = getElementPosition(n)
						local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
						if(dist < maxdist and dist <= 7) then
							maxdist = dist
							vehcr = n
							bull = true
						end
					end
					if(bull == false) then
						local maxrange = 30000
						local tveh = 0
						local bull = false
						local faction = getElementData(thePlayer, "Faction")
						for i=5,6 do
							local x1, y1, z1 = getElementPosition(Maf1Car[i])
							local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
							if(dist <= maxrange and dist <= 7) then
								tveh = Maf1Car[i]
								maxrange = dist
							end
						end
						for i=5,6 do
							local x1, y1, z1 = getElementPosition(Maf2Car[i])
							local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
							if(dist <= maxrange and dist <= 7) then
								tveh = Maf2Car[i]
								maxrange = dist
							end
						end
						for i=5,6 do
							local x1, y1, z1 = getElementPosition(Maf3Car[i])
							local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
							if(dist <= maxrange and dist <= 7) then
								tveh = Maf3Car[i]
								maxrange = dist
							end
						end
						for i=5,6 do
							local x1, y1, z1 = getElementPosition(Maf4Car[i])
							local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
							if(dist <= maxrange and dist <= 7) then
								tveh = Maf4Car[i]
								maxrange = dist
							end
						end
						if(tveh ~= 0) then
 							if(getElementData(tveh, "MafYash") ~= false) then
 								if(getElementData(tveh, "MafYash") > 0) then
									if(isElementInWater(tveh) == false) then
										local vx, vy, vz = getElementVelocity(tveh)
										local speed = math.round(math.sqrt(vx * vx + vy * vy + vz * vz) * 200)
										if(speed < 3) then
											local id = getElementData(thePlayer, "ID")
											addBox("Вы взяли ящик с материалами в руки.", thePlayer, 0, 60, 255)
											SED(thePlayer, "MafMat", true)
											MatObject[id] = createObject(12969, 0, 0, 0)
											setTimer(setPedAnimation, 200, 1, thePlayer, "carry", "crry_prtial", 1, true, true, false, true)
											exports.bone:attachElementToBone(MatObject[id], thePlayer, 12,0.2,0.1,0,90,180,-25)
											toggleControl(thePlayer, "enter_exit", false)
											toggleControl(thePlayer, "fire", false)
											toggleControl(thePlayer, "jump", false)
											toggleControl(thePlayer, "enter_passenger", false)
											toggleControl(thePlayer, "next_weapon", false)
											toggleControl(thePlayer, "previous_weapon", false)
											toggleControl(thePlayer, "aim_weapon", false)
											toggleControl(thePlayer, "sprint", false)
											toggleControl(thePlayer, "crouch", false)
											SED(tveh, "MafYash", getElementData(tveh, "MafYash") - 1)
										else
											addBox("Вы не можете взять ящик с машины на скорости.", thePlayer, 255, 0, 0)
										end
									else
										addBox("Данный транспорт сломан.", thePlayer, 255, 0, 0)
									end
								else
									addBox("В данной машине нет материалов.", thePlayer, 255, 0, 0)
								end
							else
								addBox("В данной машине нет материалов.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Поблизости нет военных машин.", thePlayer, 255, 0, 0)
						end
					else
						if(getElementData(vehcr, "ArmyGruz") ~= false) then
							if(getElementData(vehcr, "ArmyGruz") >= 25) then
								if(isElementInWater(vehcr) == false) then
									local vx, vy, vz = getElementVelocity(vehcr)
									local speed = math.round(math.sqrt(vx * vx + vy * vy + vz * vz) * 200)
									if(speed < 3) then
										local id = getElementData(thePlayer, "ID")
										addBox("Вы взяли ящик с материалами в руки.", thePlayer, 0, 60, 255)
										SED(thePlayer, "MafMat", true)
										MatObject[id] = createObject(12969, 0, 0, 0)
										setTimer(setPedAnimation, 200, 1, thePlayer, "carry", "crry_prtial", 1, true, true, false, true)
										exports.bone:attachElementToBone(MatObject[id], thePlayer, 12,0.2,0.1,0,90,180,-25)
										toggleControl(thePlayer, "enter_exit", false)
										toggleControl(thePlayer, "fire", false)
										toggleControl(thePlayer, "jump", false)
										toggleControl(thePlayer, "enter_passenger", false)
										toggleControl(thePlayer, "next_weapon", false)
										toggleControl(thePlayer, "previous_weapon", false)
										toggleControl(thePlayer, "aim_weapon", false)
										toggleControl(thePlayer, "sprint", false)
										toggleControl(thePlayer, "crouch", false)
										SED(vehcr, "ArmyGruz", getElementData(vehcr, "ArmyGruz") - 25)
										if(getElementData(vehcr, "ArmyGruz") == 0) then
											removeElementData(vehcr, "ArmyGruz")
										end
									else
										addBox("Вы не можете взять ящик на скорости.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Данный транспорт сломан.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: Данная машина пустая.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: Данная машина пустая.", thePlayer, 255, 0, 0)
						end
					end
				else
					addBox("Ошибка: Вы уже держите ящик в руках.", thePlayer, 255, 0, 0)
				end
			elseif(getElementData(thePlayer, "Faction") == 9) then
				if(getElementData(thePlayer, "ArmMat") == false) then
					local x, y, z = getElementPosition(thePlayer)
					local bull = false
					local vehcr = 0
					local maxdist = 30000
					for i, n in pairs(ArmyCar) do
						local x1, y1, z1 = getElementPosition(n)
						local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
						if(dist < maxdist and dist <= 7) then
							maxdist = dist
							vehcr = n
							bull = true
						end
					end
					for i=5,6 do
						local x1, y1, z1 = getElementPosition(Maf1Car[i])
						local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
						if(dist <= maxdist and dist <= 7) then
							maxdist = dist
							vehcr = Maf1Car[i]
							bull = true
						end
					end
					for i=5,6 do
						local x1, y1, z1 = getElementPosition(Maf2Car[i])
						local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
						if(dist <= maxdist and dist <= 7) then
							maxdist = dist
							vehcr = Maf2Car[i]
							bull = true
						end
					end
					for i=5,6 do
						local x1, y1, z1 = getElementPosition(Maf3Car[i])
						local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
						if(dist <= maxdist and dist <= 7) then
							maxdist = dist
							vehcr = Maf3Car[i]
							bull = true
						end
					end
					for i=5,6 do
						local x1, y1, z1 = getElementPosition(Maf4Car[i])
						local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
						if(dist <= maxdist and dist <= 7) then
							maxdist = dist
							vehcr = Maf4Car[i]
							bull = true
						end
					end
					if(vehcr ~= 0) then
						if(getElementData(vehcr, "ArmyGruz") ~= false) then
							if(getElementData(vehcr, "ArmyGruz") >= 25) then
								if(isElementInWater(vehcr) == false) then
									local vx, vy, vz = getElementVelocity(vehcr)
									local speed = math.round(math.sqrt(vx * vx + vy * vy + vz * vz) * 200)
									if(speed < 3) then
										addBox("Вы взяли ящик с машины в руки.", thePlayer, 0, 60, 255)
										SED(thePlayer, "ArmMat", true)
										local obj = createObject(12969, 0, 0, 0)
										setTimer(setPedAnimation, 200, 1, thePlayer, "carry", "crry_prtial", 1, true, true, false, true)
										exports.bone:attachElementToBone(obj, thePlayer, 12,0.2,0.1,0,90,180,-25)
										SED(thePlayer, "ArmMatObj", obj)
										toggleControl(thePlayer, "enter_exit", false)
										toggleControl(thePlayer, "fire", false)
										toggleControl(thePlayer, "jump", false)
										toggleControl(thePlayer, "enter_passenger", false)
										toggleControl(thePlayer, "next_weapon", false)
										toggleControl(thePlayer, "previous_weapon", false)
										toggleControl(thePlayer, "aim_weapon", false)
										toggleControl(thePlayer, "sprint", false)
										toggleControl(thePlayer, "crouch", false)
										SED(vehcr, "ArmyGruz", getElementData(vehcr, "ArmyGruz") - 25)
										if(getElementData(vehcr, "ArmyGruz") == 0) then
											removeElementData(vehcr, "ArmyGruz")
										end
									else
										addBox("Вы не можете взять ящик на скорости.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Машина утоплена.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Данная машина не загружена.", thePlayer, 255, 0, 0)
							end
						elseif(getElementData(vehcr, "MafYash") ~= false) then
							if(getElementData(vehcr, "MafYash") > 0) then
								if(isElementInWater(vehcr) == false) then
									local vx, vy, vz = getElementVelocity(vehcr)
									local speed = math.round(math.sqrt(vx * vx + vy * vy + vz * vz) * 200)
									if(speed < 3) then
										addBox("Вы взяли ящик с машины в руки.", thePlayer, 0, 60, 255)
										SED(thePlayer, "ArmMat", true)
										local obj = createObject(12969, 0, 0, 0)
										setTimer(setPedAnimation, 200, 1, thePlayer, "carry", "crry_prtial", 1, true, true, false, true)
										exports.bone:attachElementToBone(obj, thePlayer, 12,0.2,0.1,0,90,180,-25)
										SED(thePlayer, "ArmMatObj", obj)
										toggleControl(thePlayer, "enter_exit", false)
										toggleControl(thePlayer, "fire", false)
										toggleControl(thePlayer, "jump", false)
										toggleControl(thePlayer, "enter_passenger", false)
										toggleControl(thePlayer, "next_weapon", false)
										toggleControl(thePlayer, "previous_weapon", false)
										toggleControl(thePlayer, "aim_weapon", false)
										toggleControl(thePlayer, "sprint", false)
										toggleControl(thePlayer, "crouch", false)
										SED(vehcr, "MafYash", getElementData(vehcr, "MafYash") - 1)
									else
										addBox("Вы не можете взять ящик на скорости.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Данный автомобиль находится в воде.", thePlayer, 255, 0, 0)
								end
							else
								addBox("В данном авто нет ящиков.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Данная машина не загружена.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Поблизости нет мест, откуда\nМожно взять материалы.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: Вы уже держите ящик.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: Данная команда Вам недоступна.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Вы не можете взять ящик,\nНаходясь в транспортном средстве.", thePlayer, 255, 0, 0)
		end
	end
end

function onDeded( thePlayer, command )
	if(getElementData(thePlayer, "Admin") > 4) then
		local veh = getPedOccupiedVehicle(thePlayer)
		SED(veh, "ArmyGruz", 250)
	end
end

function onTpPolice( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			local veh = getPedOccupiedVehicle(thePlayer)
			if(veh == false) then
				SIDP(thePlayer, 0)
				SET(thePlayer, 0)
				SEP(thePlayer, -855.48828125, -682.1953125, 11.205852508545)
			else
				SEP(veh, -855.48828125, -682.1953125, 11.205852508545)
			end
		end
	end
end

function onPlayerAdmins( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			local str = "Имя\tУровень админки\tID"
			for i, n in pairs(IDS) do
				if(getElementData(n, "Login")) then
					if(getElementData(n, "Admin") > 0) then
						str = str .. "\n" .. getElementData(n, "Name") .. "\t" .. getElementData(n, "Admin") .. "\t" .. getElementData(n, "ID")
					end
				end
			end
			showPlayerDialog(thePlayer, 160, 3, "Администраторы в сети", str, "ок", "отмена")
		end
	end
end

function reportAndRevertDataChange( dataName, oldValue, source, client )
    setElementData( source, dataName, oldValue )               
end

addEventHandler("onElementDataChange", root, function(dataName, oldValue)
    if client then
    	if(dataName ~= "isPlayerInCamHackMode") then
			reportAndRevertDataChange( dataName, oldValue, source, client )
		end
    end
end)

function onPoliceCall( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") == 8) then
			if(id ~= nil) then
				if(toch(id) ~= nil) then
					id = toch(id)
					if(id > 0) then
						if(ZakazPolice[id] ~= nil) then
							local secPlayer = ZakazPolice[id]["Player"]
							if(isElement(secPlayer)) then
								local x, y, z = ZakazPolice[id]["x"], ZakazPolice[id]["y"], ZakazPolice[id]["z"]
								local pid = getElementData(thePlayer, "ID")
								if(GPST[pid] ~= nil) then
									if(GPST[pid]["Pickup"] ~= nil) then
										if(getElementType(GPST[pid]["Pickup"]) == "marker") then
											removeEventHandler("onMarkerHit", GPST[pid]["Pickup"], gpsHit)
											destroyElement(GPST[pid]["Pickup"])
											destroyElement(GPST[pid]["Blip"])
											GPST[pid] = nil
										end
									end
								end
								GPST[pid] = {}
								GPST[pid]["Pickup"] = createMarker(x, y, z, "checkpoint", 4, 220, 0, 0, 220, thePlayer)
								GPST[pid]["Blip"] = createBlip(x, y, z, 0, 2, 220, 0, 0, 220, 0, 64000, thePlayer)
								addBox("Подсказка: На GPS навигаторе установлен\nМаячок, к которому необходимо направиться.", thePlayer, 0, 60, 255)
								addEventHandler("onMarkerHit", GPST[pid]["Pickup"], gpsHit)
								SED(GPST[pid]["Pickup"], "Player", thePlayer)
								addBox("Полицейский " .. getElementData(thePlayer, "Name") .. " принял\nВаш звонок! Ожидайте приезда!", secPlayer, 255, 90, 0)
								ZakazPolice[id]["Accept"] = true
							else
								addBox("Данный звонок был утерян в пучине связи ;(", thePlayer, 255, 0, 0)
								ZakazPolice[id] = nil
							end
						else
							addBox("Данный вызов не найден!", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: /pcall [id]", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: /pcall [id]", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: /pcall [id]", thePlayer, 255, 0, 0)
			end
		end
	end
end

function onTaxiCall( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "PWork") == 2) then
			if(getElementData(thePlayer, "TaxiVehicle") ~= false) then
				if(id ~= nil) then
					if(toch(id) ~= nil) then
						id = toch(id)
						if(ZakazTaxi[id] ~= nil) then
							if(ZakazTaxi[id]["Accept"] == false) then
								if(isElement(ZakazTaxi[id]["Player"])) then
									local secPlayer = ZakazTaxi[id]["Player"]
									ZakazTaxi[id]["Accept"] = true
									local x, y, z = ZakazTaxi[id]["x"], ZakazTaxi[id]["y"], ZakazTaxi[id]["z"]
									local pid = getElementData(thePlayer, "ID")
									if(GPST[pid] ~= nil) then
										if(GPST[pid]["Pickup"] ~= nil) then
											if(getElementType(GPST[pid]["Pickup"]) == "marker") then
												removeEventHandler("onMarkerHit", GPST[pid]["Pickup"], gpsHit)
												destroyElement(GPST[pid]["Pickup"])
												destroyElement(GPST[pid]["Blip"])
												GPST[pid] = nil
											end
										end
									end
									GPST[pid] = {}
									GPST[pid]["Pickup"] = createMarker(x, y, z, "checkpoint", 4, 220, 0, 0, 220, thePlayer)
									GPST[pid]["Blip"] = createBlip(x, y, z, 0, 2, 220, 0, 0, 220, 0, 64000, thePlayer)
									addBox("Подсказка: На GPS навигаторе установлен\nМаячок, к которому необходимо направиться.", thePlayer, 0, 60, 255)
									SED(GPST[pid]["Pickup"], "Player", thePlayer)
									addEventHandler("onMarkerHit", GPST[pid]["Pickup"], gpsHit)
									addBox("Водитель такси " .. getElementData(thePlayer, "Name") .. " принял Ваш звонок!\nОжидайте приезда!", secPlayer, 255, 90, 0)
									ZakazTaxi[id]["Accept"] = true
								else
									ZakazTaxi[id] = nil
									addBox("Данный звонок был утерян в пучине связи ;(", thePlayer, 255, 0, 0)
								end
							else
								addBox("Данный заказ уже был принят кем-то!", thePlayer, 255, 0, 0)
							end
						else
							addBox("Данный заказ не найден!", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: /tcall [id]", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: /tcall [id]", thePlayer, 255, 0, 0)
				end
			else
				addBox("Вы не можете использовать данную команду\nБез арендованного такси.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Данная команда Вам недоступна.", thePlayer, 255, 0, 0)
		end
	end
end

function onHospitalCall( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") == 7) then
			if(id ~= nil) then
				if(toch(id) ~= nil) then
					id = toch(id)
					if(ZakazEms[id] ~= nil) then
						if(isElement(ZakazEms[id]["Player"])) then
							local secPlayer = ZakazEms[id]["Player"]
							ZakazEms[id]["Accept"] = true
							local x, y, z = ZakazEms[id]["x"], ZakazEms[id]["y"], ZakazEms[id]["z"]
							local pid = getElementData(thePlayer, "ID")
							if(GPST[pid] ~= nil) then
								if(GPST[pid]["Pickup"] ~= nil) then
									if(getElementType(GPST[pid]["Pickup"]) == "marker") then
										removeEventHandler("onMarkerHit", GPST[pid]["Pickup"], gpsHit)
										destroyElement(GPST[pid]["Pickup"])
										destroyElement(GPST[pid]["Blip"])
										GPST[pid] = nil
									end
								end
							end
							GPST[pid] = {}
							GPST[pid]["Pickup"] = createMarker(x, y, z, "checkpoint", 4, 220, 0, 0, 220, thePlayer)
							GPST[pid]["Blip"] = createBlip(x, y, z, 0, 2, 220, 0, 0, 220, 0, 64000, thePlayer)
							addBox("Подсказка: На GPS навигаторе установлен\nМаячок, к которому необходимо направиться.", thePlayer, 0, 60, 255)
							SED(GPST[pid]["Pickup"], "Player", thePlayer)
							addEventHandler("onMarkerHit", GPST[pid]["Pickup"], gpsHit)
							addBox("Врач " .. getElementData(thePlayer, "Name") .. "[" .. getElementData(thePlayer, "ID") .. "]" .. " принял Ваш звонок!\nОжидайте приезда!", secPlayer, 255, 90, 0)
							ZakazEms[id]["Accept"] = true
						else
							ZakazEms[id] = nil
							addBox("Данный звонок был утерян в пучине связи ;(", thePlayer, 255, 0, 0)
						end
					else
						addBox("Данный заказ не найден!", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: /hcall [id]", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: /hcall [id]", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: Данная команда Вам недоступна!", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerMegaphone( thePlayer, command, ...)
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") == 8) then
			local veh = getPedOccupiedVehicle(thePlayer)
			if(veh ~= false) then
				if(getElementData(veh, "PoliceID") ~= false) then
					local arg = {...}
					local text = table.concat(arg, " ")
					if(#arg > 0) then
						local x, y, z = getElementPosition(thePlayer)
						for i,n in pairs(IDS) do
							if(getElementData(n, "Login") == true) then
								msgforcamera("[[ Мегафон " .. getElementData(thePlayer, "Name") .. " [" .. getElementData(thePlayer, "ID") .. "]: " .. text .. " ]]", n, 255, 255, 0, x, y, z)
							end
						end
					else
						addBox("Вы не ввели текст.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Вы не находитесь в полицейской машине.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Вы не находитесь в авто.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Данная команда Вам недоступна.", thePlayer, 255, 0, 0)
		end
	end
end

function setLicFu( arg1 )
	SED(arg1, "AutoLicense", 0)
	dbExec(mysql, "UPDATE `accounts` SET `AutoLicense` = 0 WHERE `Name` = ?", getElementData(arg1, "Name"))
	removePedFromVehicle(arg1)
end

function onPlayerObject( thePlayer, command, objid )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") == 8) then
			if(getElementData(thePlayer, "Rank") >= 3) then
				local id = getElementData(thePlayer, "ID")
				if(objid ~= nil) then
					if(PObject[id] == nil) then
						objid = toch(objid)
						local x, y, z = getElementPosition(thePlayer)
						local gradx, grady, grad = getElementRotation(thePlayer)
						grad = math.rad(360 - grad)
						local sink = math.sin(grad)
						local cosink = math.cos(grad)
						x = x + 5 * sink
						y = y + 5 * cosink
						if(objid == 1) then
							PObject[id] = createObject(11422, x, y, z - 0.5)
							addBox("Вы поставили " .. objid .. " id объект.", thePlayer, 255, 0, 0)
						elseif(objid == 2) then
							PObject[id] = createObject(7363, x, y, z - 1.05)
							addBox("Вы поставили " .. objid .. " id объект.", thePlayer, 255, 0, 0)
						elseif(objid == 3) then
							PObject[id] = createObject(11427, x, y, z - 0.5)
							addBox("Вы поставили " .. objid .. " id объект.", thePlayer, 255, 0, 0)
						else
							addBox("Ошибка: /object [1-3]", thePlayer, 255, 0, 0)
						end
					else
						objid = toch(objid)
						destroyElement(PObject[id])
						PObject[id] = nil
						local x, y, z = getElementPosition(thePlayer)
						local gradx, grady, grad = getElementRotation(thePlayer)
						grad = math.rad(360 - grad)
						local sink = math.sin(grad)
						local cosink = math.cos(grad)
						x = x + 5 * sink
						y = y + 5 * cosink
						if(objid == 1) then
							PObject[id] = createObject(11422, x, y, z - 0.5)
							addBox("Вы поставили " .. objid .. " id объект.", thePlayer, 255, 0, 0)
						elseif(objid == 2) then
							PObject[id] = createObject(7363, x, y, z - 1.05)
							addBox("Вы поставили " .. objid .. " id объект.", thePlayer, 255, 0, 0)
						elseif(objid == 3) then
							PObject[id] = createObject(11427, x, y, z - 0.5)
							addBox("Вы поставили " .. objid .. " id объект.", thePlayer, 255, 0, 0)
						end
					end
				else
					if(PObject[id] == nil) then
						addBox("Ошибка: /object [1-3]", thePlayer, 255, 0, 0)
					else
						destroyElement(PObject[id])
						PObject[id] = nil
						addBox("Объект был убран", thePlayer, 255, 0, 0)
					end
				end
			else
				addBox("Данная команда доступна c 5 ранга.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Данная команда Вам недоступна.", thePlayer, 255, 0, 0)
		end
	end
end

function onCheckLeaders( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		local str = "ID\tИмя\tФракция\tРанг"
		for i,n in pairs(IDS) do
			if(getElementData(n, "Rank") == 10) then
				str = str .. "\n" .. getElementData(n, "ID") .. "\t" .. getElementData(n, "Name") .. "\t" .. FactionName[getElementData(n, "Faction")][2] .. "\t" ..  FactionRankName[getElementData(n, "Faction")][getElementData(n, "Rank")]
			end
		end
		showPlayerDialog(thePlayer, 64000, 3, "Список лидеров", str, "ок", "отмена")
	end
end

function onAdminUnBan( thePlayer, command, name )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") >= 5) then
			if(name ~= nil) then
				local query = dbQuery(mysql, "SELECT * FROM `Accounts` WHERE `Name` = ?", name)
				local result = dbPoll(query, -1)
				if(result ~= nil) then
					if(result[1] ~= nil) then
						if(result[1]["Ban"] > 0) then
							dbExec(mysql, "UPDATE `Accounts` set `Ban` = 0 WHERE `Name` = ?", name)
							addBox("С " .. name .. " был снят бан.", thePlayer, 255, 0, 0)
						else
							addBox("Данный игрок не в бане", thePlayer, 255, 0, 0)
						end
					else
						addBox("Данный игрок не найден.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Данный игрок не найден.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Вы не ввели имя игрока.", thePlayer, 255, 0, 0)
			end
		end
	end
end

function onPlayerGarage( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "gde") ~= false) then
			SEP(thePlayer, -1290, -698, 1000)
			SET(thePlayer, 8)
			SIDP(thePlayer, getElementData(thePlayer, "gde"))
		end
	end
end

function onTriggerAfk( arg1, arg2 )
	if(arg1 == client) then
		if(getElementData(arg1, "Login") == true) then
			local id = getElementData(arg1, "ID")
			if(arg2 == true) then
				if(afktimer[id] ~= nil) then
					killTimer(afktimer[id])
					afktimer[id] = nil
				end
				afktimer[id] = setTimer(function ( argu, argu2 )
					if(isElement(argu)) then
						if(getElementData(argu, "Afk") == false) then
							SED(argu, "Afk", 1)
						else
							SED(argu, "Afk", getElementData(argu, "Afk") + 1)
						end
						local min =  math.floor(getElementData(argu, "Afk") / 60)
						if(min < 10) then
							min = "0" .. min
						end
						local sec = math.fmod(getElementData(argu, "Afk"), 60)
						if(sec < 10) then
							sec = "0" .. sec
						end
						attach3dtexttoplayer("АФК " .. min .. ":" .. sec, argu, 0, 0, 0.125)
					else
						killTimer(afktimer[id])
						afktimer[id] = nil
					end
				end, 1000, 0, arg1, id)
			else
				if(afktimer[id] ~= nil) then
					if(isTimer(afktimer[id]) == true) then
						killTimer(afktimer[id])
					end
					removeElementData(arg1, "Afk")
					afktimer[id] = nil
				end
			end
		end
	else
		kickPlayer(client, "AC")
	end
end

addCommandHandler("garage",		onPlayerGarage)
addCommandHandler("unban",		onAdminUnBan)
addCommandHandler("leaders",	onCheckLeaders)
addCommandHandler("m",			onPlayerMegaphone)
addCommandHandler("hcall",		onHospitalCall)
addCommandHandler("tcall",		onTaxiCall)
addCommandHandler("pcall",		onPoliceCall)
addCommandHandler("admins",		onPlayerAdmins)
addCommandHandler("police", 	onTpPolice)
addCommandHandler("deded", 		onDeded)
addCommandHandler("getm",		onGetMaterial)
addCommandHandler("tph", 		onTpHouse)
addCommandHandler("tprent", 	onTpRent)
addEvent("onTriggerAfk", true)
addEvent("etoPizdec", true)
addEvent("etoPizdec2", true)
addEvent("etoPizdec3", true)
addEvent("verntodim", true)
addEventHandler("onTriggerAfk", root, onTriggerAfk)
addEventHandler("verntodim", root, verntodim)
addCommandHandler("anda",		anda)
addCommandHandler("clearveh",	onAdminDelVeh)
--addCommandHandler("cveh", 	onplayercveh)
addCommandHandler("kino",		onAdminTpKino)
addCommandHandler("gruz",		tpToGruz)
addCommandHandler("veh", 		createVehicleForPlayer)
addCommandHandler("weather", 	changeWeather)
addCommandHandler("hours", 		changeTime)
addCommandHandler("weapon", 	giveDeapon)
addCommandHandler("goto", 		aGoto)
addCommandHandler("get", 		aGet)
addCommandHandler("tp", 		goTp)
addCommandHandler("setskin", 	setSkin)
addCommandHandler("sp", 		spectateToPlayer)
addCommandHandler("object",		onPlayerObject)
addCommandHandler("aobject",	createdObject)
addCommandHandler("save",		textinchat)
addCommandHandler("kill", 		kill)
addCommandHandler("showpass", 	showPass)
addCommandHandler("showlic", 	showLic)
addCommandHandler("courier",	tpToCourier)
addCommandHandler("invite", 	invitePlayerFaction)
addCommandHandler("leave", 		onPlayerLeave)
addCommandHandler("setrank", 	setPlayerRank)
addCommandHandler("uninvite", 	uninvitePlayerFaction)
addEvent("onClickLogin", true)
addEvent("onRegister", true)
addEvent("onRightSpawn", true)
addEvent("onLeftSpawn", true)
addEvent("onChooseSpawn", true)
addEvent("onRightPerson", true)
addEvent("onLeftPerson", true)
addEvent("OnStartWorkingLoader", true)
addEvent("OnEndWorkingLoader", true)
addEvent("OnLoaderEnd", true)
addEvent("OnLoaderStart", true)
addEvent("onCourierWorkStart", true)
addEvent("onCourierWorkEnd", true)
addEvent("GUIWasOpened", true)
addEvent("CheckCourierCars", true)
addEvent("onCourierOrderEnd", true)
addEvent("onDialogResponse", true)
addEvent("onClientLoginStart", true)
addEvent("maybecheat", true)
function etoPizdec( arg1 )
	if(arg1 == client) then
		--[=[local serial = getPlayerSerial(arg1)
		сюда кик
		local query = dbQuery(mysql, "SELECT COUNT(*) FROM `IronBan`")
		local result = dbPoll(query, -1)
		dbExec(mysql, "INSERT into `ironban` (`ID`, `Serial`, `AccID`, `Name`) values (?, ?, -1, '')", result[1]["COUNT(*)"], serial)]=]
		kickPlayer(arg1, "ac")
	end
end

function etoPizdec3( arg1 )
	if(arg1 == client) then
		if(getElementData(arg1, "Admin") < 1 and getPedOccupiedVehicleSeat(arg1) == 0) then
			--[=[
			local serial = getPlayerSerial(arg1)
			сюда кик
			local query = dbQuery(mysql, "SELECT COUNT(*) FROM `IronBan`")
			local result = dbPoll(query, -1)
			dbExec(mysql, "INSERT into `ironban` (`ID`, `Serial`, `AccID`, `Name`) values (?, ?, -1, '')", result[1]["COUNT(*)"], serial)]=]
			kickPlayer(arg1, "ac")
		end
	end
end


function etoPizdec2( arg1 )
	if(arg1 == client) then
		if(getElementData(arg1, "Login") == true) then
			if(getElementData(arg1, "Admin") < 1) then
				kickPlayer(arg1, "ac") 
			end
		end
	end
end


function onMrkArmyGruzHit( hit, dim )
	if(getElementType(hit) == "player") then
		if(getPedOccupiedVehicle(hit) ~= false) then
			local veh = getPedOccupiedVehicle(hit)
			if(getElementData(veh, "ArmyCar") ~= false) then
				if(Server["Gruz"] > 0) then
					if(getPedOccupiedVehicleSeat(hit) == 0) then
						local str = "Готовы ли Вы загрузить машину?\nДоступное количество грузов: " .. Server["Gruz"] .. "\nВместимость Вашего транспорта: 250\nПри выборе, Ваш транспорт загрузится на максимум."
						showPlayerDialog(hit, 39, 2, "Государственная закупка?", str, "Загрузиться", "Отмена")
					end
				else
					addBox("На складе закончились продукты.\nОжидайте погрузки.", hit, 255, 0, 0)
				end
			end
		end
	end
end

function onPlayerDisconnect ( quittype )
	if(getElementData(source, "Login") == true) then
		exports.loaderWork:clearLoaderCar(source)
		local id = getElementData(source, "ID")
		for i,n in pairs(IDS) do
			if(getElementData(n, "Login") == true) then
				triggerClientEvent(n, "onDelClist", n, id)
			end
		end
		local obj = getElementData(source, "ZavodObject")
		if(isElement(obj)) then
			destroyElement(obj)
		end
		local secveh = getElementData(source, "SVM")
		if(secveh ~= false) then
			local id = toch(getElementData(secveh, "Iter"))
			ServerPerem["MechCars"][id]["veh"] = nil
			customDestroyVehicle(secveh)
		end
		local tablo = getElementData(source, "camtablo")
		if(tablo ~= false) then
			for i,n in pairs(tablo) do
				if(isElement(n["mrk"])) then
					destroyElement(n["mrk"])
				end
				if(isElement(n["blp"])) then
					destroyElement(n["blp"])
				end
				tablo[i] = nil
			end
		end
		local x, y, z = getElementPosition(source)
		for i,n in pairs(IDS) do
			if(getElementData(n, "Login") == true) then
				if(getElementData(n, "Faction") == 8) then
					local x1, y1, z1 = getElementPosition(n)
					local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
					if(dist < 40) then
						if(getElementData(source, "PoliceJail") == false) then
							SED(source, "PoliceJail", toch(getElementData(source, "Wanted")) * 600)
							dbExec(mysql, "UPDATE `Accounts` SET `Wanted` = 0, `PoliceJail` = ? WHERE `Name` = ?", toch(getElementData(source, "Wanted")) * 600, getElementData(source, "Name"))
						end
					break
					end
				end
			end
		end
		local veh = getElementData(source, "PhotoVeh")
		if(veh ~= false) then
			if(isElement(veh)) then
				customDestroyVehicle(veh)
			end
		end
		local mrk = getElementData(source, "mrkBus")
		local blp = getElementData(source, "blpBus")
		removeElementData(source, "Stage")
		removeElementData(source, "March")
		if(isElement(mrk) == true) then
			destroyElement(mrk)
		end
		if(isElement(blp) == true) then
			destroyElement(blp)
		end
		local zprt = getElementData(source, "Zprt")
        if(zprt ~= false) then
            removeElementData(source, "Zprt")
        end
		local veh = getElementData(source, "MechVeh")
		if(veh ~= false) then
			customSpawnVehicle(veh)
			removeElementData(veh, "MechDriver")
			removeElementData(source, "MechVeh")
		end
		local mrk = getElementData(source, "mrkMech")
		if(mrk ~= false) then
			removeElementData(source, "mrkMech")
			destroyElement(mrk)
		end
		removeElementData(source, "mrkBus")
		removeElementData(source, "blpBus")
		if(afktimer[id] ~= nil) then
			if(isTimer(afktimer[id]) == true) then
				killTimer(afktimer[id])
			end
			afktimer[id] = nil
		end
		if(MatObject[id] ~= nil) then
			exports.bone:detachElementFromBone(MatObject[id])
			destroyElement(MatObject[id])
			MatObject[id] = nil
		end
		if(rentVehTable[id] ~= nil) then
			if(isElement(rentVehTable[id])) then
				customDestroyVehicle(rentVehTable[id])
			end
			rentVehTable[id] = nil
		end
		if(getElementData(source, "rentVehicle") ~= false) then
			local veh = getElementData(source, "rentVehicle")
			customSpawnVehicle(veh)
			removeElementData(veh, "rentPlayer")
			removeElementData(source, "rentVehicle")
			if(vehRentTimer[id] ~= nil) then
				if(isTimer(vehRentTimer[id]) == true) then
					killTimer(vehRentTimer[id])
				end
				vehRentTimer[id] = nil
			end
		end
		if(toch(getElementData(source, "SummLoads")) ~= nil) then
			if(quittype ~= "Kicked") then
				setElementMoney(source, toch(getElementData(source, "SummLoads")), "Грузчик")
			end
		end
		if(PObject[id] ~= nil) then
			destroyElement(PObject[id])
			PObject[id] = nil
		end
		if(TimerCourier[id] ~= nil) then
			killTimer(TimerCourier[id])
			TimerCourier[id] = nil
		end
		if(getElementData(source, "Cuffed") == true) then
			for i,n in pairs(IDS) do
				if(getElementData(n, "Login") == true) then
					sendClientMessage(getElementData(source, "Name") .. " вышел из игры при аресте. (+30 мин. тюрьмы)", n, 255, 0, 0)
				end
			end
			dbExec(mysql, "UPDATE `Accounts` SET `PoliceJail` = ?, `Wanted` = 0 WHERE `Name` = ?", 30 * 60, getElementData(source, "Name"))
		end
		if(getElementData(source, "ArmMatObj") ~= false) then
			local obj = getElementData(source, "ArmMatObj")
			if(isElement(obj) == true) then
				exports.bone:detachElementFromBone(obj)
				destroyElement(obj)
			end
			removeElementData(source, "ArmMatObj")
			toggleControl(source, "enter_exit", true)
			toggleControl(source, "fire", true)
			toggleControl(source, "jump", true)
			toggleControl(source, "enter_passenger", true)
			toggleControl(source, "next_weapon", true)
			toggleControl(source, "previous_weapon", true)
			toggleControl(source, "aim_weapon", true)
			toggleControl(source, "sprint", true)
			toggleControl(source, "crouch", true)
			setPedAnimation(source, "BSKTBALL", "BBALL_idle_O", 1, false)
			local mrk = getElementData(source, "mrkArmyGetM")
			if(mrk ~= false) then
				local blp = getElementData(source, "blpArmyGetM")
				removeElementData(source, "mrkArmyGetM")
				removeElementData(source, "blpArmyGetM")
				removeEventHandler("onMarkerHit", mrk, onPlayerPutMaterialArmy)
				destroyElement(mrk)
				destroyElement(blp)
			end
		end
		if(id ~= nil) then
			if(PrivateCar[id] ~= nil) then
				if(isElement(PrivateCar[id])) then
					if(getElementData(PrivateCar[id], "PrivatePlayer") ~= false) then
						if(getElementData(source, "House") ~= false) then
							local house = getElementData(source, "House")
							if(getElementData(PrivateCar[id], "Lists") ~= false) then
								if(house > 0) then
									local lists = getElementData(PrivateCar[id], "Lists")
									HouseTable[house]["Fuel" .. lists] = getElementData(PrivateCar[id], "Fuel")
									dbExec(mysql, "UPDATE `House` SET `Fuel" .. lists .. "` = ? WHERE `ID` = ?", getElementData(PrivateCar[id], "Fuel"), house)
								end
							end
						end
					end
					customDestroyVehicle(PrivateCar[id])
					PrivateCar[id] = nil
				else
					PrivateCar[id] = nil
				end
			end
			if(PhoneObject[id] ~= nil) then
				local obj = PhoneObject[id]
				if(isElement(obj)) then
					destroyElement(obj)
				end
				PhoneObject[id] = nil
			end
		end
		PayTimer[id] = nil
		if(getElementData(source, "WeaponSeller") ~= false) then
			local secPlayer = getElementData(source, "WeaponSeller")
			if(isElement(secPlayer) == true) then
				addBox("Игрок " .. getElementData(source, "Name") .. " отказался\nОт покупки Вашего оружия.", secPlayer, 255, 0, 0)
			end
		end
		if(PCar[id] ~= nil) then
			local veh = PCar[id]
			if(isElement(veh) == true) then
				local vehid = getElementData(veh, "ID")
				VehicleTable[vehid] = nil
				destroyElement(veh)
				PCar[id] = nil
			end
		end
		if(rentTimer[id] ~= nil) then
			if(isTimer(rentTimer[id]) == true) then
				customDestroyVehicle(rentVehTable[id])
				rentVehTable[id] = nil
				killTimer(rentTimer[id])
				rentTimer[id] = nil
			else
				rentTimer[id] = nil
			end
		end
		if(AdmVeh[id] ~= nil) then
			for i,n in pairs(AdmVeh[id]) do
				customDestroyVehicle(n)
			end
		end
		local veh = getElementData(source, "FishBoat")
		if(veh ~= false) then
			if(isElement(veh) == true) then
				customSpawnVehicle(veh)
				removeElementData(veh, "FishPlayer")
			end
		end
		if(quittype ~= "Kicked") then
			local weapon1 = getPedWeapon(source, 2)
			local ammo1 = getPedTotalAmmo(source, 2)
			local weapon2 = getPedWeapon(source, 3)
			local ammo2 = getPedTotalAmmo(source, 3)
			local weapon3 = getPedWeapon(source, 5)
			local ammo3 = getPedTotalAmmo(source, 5)
			dbExec(mysql, "UPDATE `Accounts` SET `Weapon1` = ?, `Ammo1` = ?, `Weapon2` = ?, `Ammo2` = ?, `Weapon3` = ?, `Ammo3` = ? WHERE `Name` = ?", weapon1, ammo1, weapon2, ammo2, weapon3, ammo3, getElementData(source, "Name"))
		end
	end
	if(quittype ~= "Kicked") then
		if(getElementData(source, "SkillM4") ~= false) then
			local m4 = toch(getElementData(source, "SkillM4"))
			local ak47 = toch(getElementData(source, "SkillAk47"))
			local deagle = toch(getElementData(source, "SkillDeagle"))
			local shotgun = toch(getElementData(source, "SkillShotgun"))
			local accid = toch(getElementData(source, "AccID"))
			dbExec(mysql, "UPDATE `Accounts` SET `SkillM4` = ?, `SkillAk47` = ?, `SkillDeagle` = ?, `SkillShotgun` = ? WHERE `ID` = ?", m4, ak47, deagle, shotgun, accid)
		end
	end
	if(getElementData(source, "House") ~= false) then
		local house = getElementData(source, "House")
		if(house > 0) then
			HouseTable[house]["OwnerPlayer"] = nil
		end
	end
	if(getElementData(source, "PoliceJail") ~= false) then
		if(getElementData(source, "PoliceJail") > 0) then
			dbExec(mysql, "UPDATE `Accounts` SET `PoliceJail` = ? WHERE `ID` = ?", getElementData(source, "PoliceJail"), getElementData(source, "AccID"))
		end
	end
	if(getElementData(source, "AdminJail") ~= false) then
		if(getElementData(source, "AdminJail") > 0) then
			dbExec(mysql, "UPDATE `Accounts` SET `AdminJail` = ? WHERE `ID` = ?", getElementData(source, "AdminJail"), getElementData(source, "AccID"))
		end
	end
	if(getElementData(source, "Material") ~= false) then
		if(quittype ~= "Kicked") then
			dbExec(mysql, "UPDATE `Accounts` SET `Material` = ? WHERE `Name` = ?", getElementData(source, "Material"), getElementData(source, "Name"))
		end
	end
	if(getElementData(source, "BusOwnID") ~= false) then
		if(getElementData(source, "BusOwnID") > 0) then
			local biz = toch(getElementData(source, "BusOwnID"))
			BusinessTable[biz]["OwnerPlayer"] = nil
		end
	end
	if(getElementData(source, "mrkCour") ~= false) then
		local mrk = getElementData(source, "mrkCour")
		local blp = getElementData(source, "blpCour")
		if(isElement(mrk) == true) then
			removeEventHandler("onMarkerHit", mrk, hitCourEnd)
			destroyElement(mrk)
			destroyElement(blp)
			removeElementData(source, "mrkCour")
			removeElementData(source, "blpCour")
			local bus = toch(getElementData(source, "courBiz"))
			OrderBiz[bus]["OrderCourier"] = nil
			local veh = getElementData(source, "CourierVehicle")
			customSpawnVehicle(veh)
			removeElementData(veh, "CourierPlayer")
		end
	end
	for i,n in pairs(CourierVehTable) do
		if(getElementData(n, "CourierPlayer") == source) then
			customSpawnVehicle(n)
			removeElementData(n, "CourierPlayer")
			break
		end
	end
	if(getElementData(source, "Login") == true) then
		if(getElementData(source, "Mute") > 0) then
			local time = getElementData(source, "Mute")
			dbExec(mysql, "UPDATE `Accounts` set `Mute` = ? WHERE `ID` = ?", time, getElementData(source, "AccID"))
		end
	end
	if(getElementData(source, "PhonePlayer") ~= false) then
		if(getElementData(source, "AcceptedCall") == true) then
			local secPlayer = getElementData(source, "PhonePlayer")
			if(isElement(secPlayer) == true) then
				addBox("Абонент " .. getElementData(source, "Name") .. " вышел из зоны доступа сети.", secPlayer, 255, 255, 0)
				removeElementData(secPlayer, "PhonePlayer")
				removeElementData(secPlayer, "AcceptedCall")
				setPedAnimation(secPlayer, "BSKTBALL", "BBALL_idle_O", 1, false)
				local id = getElementData(source, "ID")
				local secid = getElementData(secPlayer, "ID")
				if(PhoneObject[id] ~= nil) then
					local obj = PhoneObject[id]
					exports.bone:detachElementFromBone(obj)
					destroyElement(obj)
					PhoneObject[id] = nil
				end
				if(PhoneObject[secid] ~= nil) then
					local obj = PhoneObject[secid]
					exports.bone:detachElementFromBone(obj)
					destroyElement(obj)
					PhoneObject[secid] = nil
				end
			end
		else
			local secPlayer = getElementData(source, "PhonePlayer")
			if(isElement(secPlayer) == true) then
				addBox("Абонент " .. getElementData(source, "Name") .. " вышел из зоны доступа сети.", secPlayer, 255, 255, 0)
				removeElementData(secPlayer, "PhonePlayer")
				removeElementData(secPlayer, "AcceptedCall")
				setPedAnimation(secPlayer, "BSKTBALL", "BBALL_idle_O", 1, false)
			end
			if(PhoneObject[source] ~= nil) then
				local obj = PhoneObject[source]
				exports.bone:detachElementFromBone(obj)
				destroyElement(obj)
				PhoneObject[source] = nil
			end
			if(PhoneObject[secPlayer] ~= nil) then
				local obj = PhoneObject[secPlayer]
				exports.bone:detachElementFromBone(obj)
				destroyElement(obj)
				PhoneObject[secPlayer] = nil
			end
		end
	end
	if(getElementData(source, "PhoneNumber") ~= false) then
		if(getElementData(source, "PhoneNumber") ~= 0) then
			local number = toch(getElementData(source, "PhoneNumber"))
			PhoneNumbers[number] = nil
		end
	end
	if(getElementData(source, "Login") == true) then
		local hp = getElementHealth(source)
		if(quittype ~= "Kicked") then
			dbExec(mysql, "UPDATE `Accounts` SET `Health` = ? WHERE `ID` = ?", hp, getElementData(source, "AccID"))
		end
	end
	if(getElementData(source, "mrkArmyGruz") ~= false) then
		local mrk = getElementData(source, "mrkArmyGruz")
		local blp = getElementData(source, "blpArmyGruz")
		destroyElement(mrk)
		destroyElement(blp)
		removeElementData(source, "mrkArmyGruz")
		removeElementData(source, "blpArmyGruz")
	end
	local id = toch(getElementData(source, "ID"))
	if(getElementData(source, "AshVeh") ~= false) then
		local veh = getElementData(source, "AshVeh")
		if(isElement(veh) == true) then
			customSpawnVehicle(veh)
			removeElementData(veh, "AshPlayer")
			SED(veh, "Fuel", 40)
			setElementHealth(veh, 1000)
		end
	end
	local blp = getElementData(source, "blpMail")
	local mrk = getElementData(source, "mrkMail")
	if(isElement(mrk) == true) then
		destroyElement(mrk)
		destroyElement(blp)
		removeElementData(source, "blpMail")
		removeElementData(source, "mrkMail")
	end
	if(getElementData(source, "MailVeh") ~= false) then
		local veh = getElementData(source, "MailVeh")
		if(veh ~= false) then
			if(isElement(veh) == true) then
				setElementHealth(veh, 1000)
				SED(veh, "Fuel", 40)
				removeElementData(veh, "MailPlayer")
				removeElementData(source, "MailVeh")
				setVehicleEngineState(veh, false)
				SED(veh, "Engine", false)
				customSpawnVehicle(veh)
				local obj = getElementData(source, "PizzaObject")
				if(obj ~= false) then
					if(isElement(obj)) then
						exports.bone:detachElementFromBone(obj)
						destroyElement(obj)
					end
				end
			end
		end
	end
	if(GPST[id] ~= nil) then
		removeEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
		destroyElement(GPST[id]["Pickup"])
		destroyElement(GPST[id]["Blip"])
		GPST[id] = nil
	end
	sep = "_"
	local t={}
    for str in string.gmatch(getPlayerName(source), "([^"..sep.."]+)") do
		table.insert(t, str)
    end
    local agh = #t
    if(agh == 2) then
    	if(NameTable[t[1].."_"..t[2]] ~= nil) then
    		NameTable[t[1].."_"..t[2]] = nil
    	end
    end
	for i, n in pairs(IDS) do
		if(getElementData(n, "Login") == true) then
			triggerClientEvent(n, "onGridMinus", n, getElementData(source, "ID"), source)
		end
	end
	IDS[getElementData(source, "ID")] = nil
	if(objeect[toch(getElementData(source, "ID"))] ~= nil) then
		local obj = objeect[toch(getElementData(source, "ID"))]
		if(isElement(obj) == true) then
			destroyElement(objeect[toch(getElementData(source, "ID"))])
			objeect[toch(getElementData(source, "ID"))] = nil
		end
	end
	getElementData(source, "Name")
	local sName = getElementData(source, "Name")
	if(getElementData(source, "Name") ~= false) then
		NameTable[sName] = nil
	end
	if(getElementData(source, "mrkCourierStart") ~= false) then
		local mrk = getElementData(source, "mrkCourierStart")
		local blp = getElementData(source, "blpCourierStart")
		if(isElement(mrk) == true) then
			destroyElement(getElementData(source, "mrkCourierStart"))
			destroyElement(getElementData(source, "blpCourierStart"))
			removeElementData(source, "mrkCourierStart")
			removeElementData(source, "blpCourierStart")
		end
	end
	if(getElementData(source, "mrkCourierStart") ~= false) then
		local mrk = getElementData(source, "mrkCourierStart")
		local blp = getElementData(source, "blpCourierStart")
		if(isElement(mrk) == true) then
			destroyElement(mrk)
			destroyElement(blp)
			removeElementData(source, "mrkCourierStart")
			removeElementData(source, "blpCourierStart")
		end
		local veh = getElementData(source, "CourierVehicle")
		if(veh ~= false) then
			if(isElement(veh) == true) then
				customSpawnVehicle(veh)
			end
		end
		removeElementData(veh, "CourierPlayer")
	else
		if(getElementData(source, "mrkCourierEnd") ~= false) then
			local mrk = getElementData(source, "mrkCourierEnd")
			local blp = getElementData(source, "blpCourierEnd")
			destroyElement(mrk)
			destroyElement(blp)
			local veh = getElementData(source, "CourierVehicle")
			customSpawnVehicle(veh)
			removeElementData(veh, "CourierPlayer")
		end
	end
	if(getElementData(source, "Gruz") ~= nil) then
		removeElementData(source, "Gruz")
		removeElementData(source, "Coef")
	end
	if(getElementData(source, "LicBy") ~= false) then
		removeElementData(source, "LicBy")
		removeElementData(source, "LicPrice")
	end
	if(getElementData(source, "HousePrice") ~= false) then
		removeElementData(source, "HousePrice")
		removeElementData(source, "HouseID")
		removeElementData(source, "PNameHouse")
		removeElementData(source, "SellPlayer")
	end
	PINTERVAL[getElementData(source, "ID")] = nil
	if(getElementData(source, "Admin") ~= nil and getElementData(source, "Admin") ~= false) then
		removeElementData(source, "Admin")
	end
	if(getElementData(source, "CourierVehicle") ~= nil and getElementData(source, "CourierVehicle") ~= false) then
		local veh = getElementData(source, "CourierVehicle")
		if(getElementType(veh) == "vehicle") then
			setTimer(spawnCurierVehicle, 3000, 1, veh)
			removeElementData(veh, "CourierPlayer")
			removeElementData(source, "CourierVehicle")
		end
	end
	if(getElementData(source, "VehicleDriverBus") ~= nil and getElementData(source, "VehicleDriverBus") ~= false) then
		local veh = getElementData(source, "VehicleDriverBus")
		if(isElement(veh) == true) then
			local id = getElementData(veh, "BusVehTable")
			setTimer(customSpawnVehicle, 3000, 1, veh)
			removeElementData(veh, "DriverPlayerBus")
			removeElementData(source, "VehicleDriverBus")
			removeElementData(source, "NWork")
			removeElementData(veh, "DriverPlayerBus")
		end
	end
	if(getElementData(source, "TaxiVehicle") ~= nil and getElementData(source, "TaxiVehicle") ~= false) then
		local veh = getElementData(source, "TaxiVehicle")
		if(isElement(veh) == true) then
			setTimer(spawnVehicle, 3000, 1, veh, -205 - (toch(getElementData(veh, "TaxiVehTable")) - 1) * 3, -1472 + (toch(getElementData(veh, "TaxiVehTable")) - 1) * 12, 9, 0, 0, 280)
			setTimer(setElementHealth, 3000, 1, veh, 1000)
			removeElementData(veh, "TaxiDriverPlayer")
		end
	end
	if(getElementData(source, "Login") == true) then
		if(getElementData(source, "Food") ~= false) then
			dbExec(mysql, "UPDATE `Accounts` SET `Food` = ? WHERE `Name` = ?", getElementData(source, "Food"), getElementData(source, "Name"))
		end 
	end
end

function spawnCurierVehicle( vehicle )
	if(getElementData(vehicle, "CourierVehID") == 1) then
		spawnVehicle(vehicle, -922.5400390625, -1388.8212890625, 11.27614402771, 0, 0, 300)
	elseif(getElementData(vehicle, "CourierVehID") == 2) then
		spawnVehicle(vehicle, -933.0087890625, -1386.0751953125, 11.592994689941, 0, 0, 300)
	elseif(getElementData(vehicle, "CourierVehID") == 3) then
		spawnVehicle(vehicle, -942.5166015625, -1379.560546875, 11.588871955872, 0, 0, 300)
	elseif(getElementData(vehicle, "CourierVehID") == 4) then
		spawnVehicle(vehicle, -953.8642578125, -1374.03515625, 11.642669677734, 0, 0, 300)
	end
end

function checkpck( pickup, pl )
	if(pickup == ServerPerem["pckmer"]) then
		if(getPedOccupiedVehicle(pl) == false) then
			if(getElementData(pl, "Faction") == 5) then
				if(getElementData(pl, "WorkSkin") ~= getElementModel(pl)) then
					addBox("Вы переоделись в рабочую форму.", pl, 0, 60, 255)
					setElementModel(pl, getElementData(pl, "WorkSkin"))
					local id = getElementData(pl, "ID")
					ColorTable[id] = getElementData(pl, "Faction")
					for i,n in pairs(IDS) do
						if(n ~= pl) then
							if(getElementData(n, "Login") == true) then
								triggerClientEvent(n, "onChangeClist", n, id, pl, ColorTable[id])
							end
						end
					end
				else
					addBox("Вы переоделись в повседневную одежду", pl, 0, 60, 255)
					setElementModel(pl, toch(getElementData(pl, "Skin")))
					local id = getElementData(pl, "ID")
					ColorTable[id] = 21
					for i,n in pairs(IDS) do
						if(n ~= pl) then
							if(getElementData(n, "Login") == true) then
								triggerClientEvent(n, "onChangeClist", n, id, pl, ColorTable[id])
							end
						end
					end
				end
			end
		end
	end
end

function chooseSpawn( skin, sex )
	local Name = getElementData(client, "Name")
	SED(client, "Skin", skin)
	SED(client, "WorkSkin", skin)
	setElementModel(client, skin)
	SED(client, "SpawnID", 0)
	setCameraTarget(client, client)
	local realtime = getRealTime()
	local hours = realtime.hour
	if hours >= 24 then
		hours = hours - 24
	elseif hours < 0 then
		hours = hours + 24
	end
	SED(client, "Sex", sex)
	minute = realtime.minute
	setTime(hours, minute)
	nextupdate = (60-realtime.second) * 1000
	setMinuteDuration( nextupdate )
	dbExec(mysql, "UPDATE `Accounts` SET `SpawnID` = '0', `Skin` = '" .. skin .. "', `WorkSkin` = ?, `Sex` = ? WHERE `Name` = '".. Name .."'", getElementData(client, "Skin"), sex)
	SED(client, "Login", true)
	SIDP(client, 0)
	customSpawnPlayer(client)
	triggerClientEvent(client, "gotovo", client)
	showPlayerDialog(client, 107, 1, "Начало истории", "После прилета Вы решили проверить сумку и нашли письмо следующего содержания:\n\"Привет, я слышал что ты в Вайс-Сити прилетел\nЧто ж, хороший выбор, лучше чем куда-нибудь в холодную Россию.\nТебе нужно купить телефон в ближайшем магазине 24\\7,\n(/gps - Ближайший 24\\7)\nТебе позвонит мой знакомый и расскажет че к чему.\nА добраться можешь на такси, либо на автобусе,\nА если хочешь можешь и сам педали покрутить на велосипеде\n(/gps - Ближайшая аренда авто).\nВ общем, давай, мой человек тебе все расскажет.\"\nПодпись: Mr. CJ.", "Ок", "Отмена")
	triggerClientEvent(client, "voiceLogin", client)
end

function pickupPickUp( pickupid )
	checkpck(pickupid, source)
	if(pickupid == pckSkinArmy) then
		if(getPedOccupiedVehicle(source) == false) then
			if(getElementData(source, "Faction") == 9) then
				if(getElementData(source, "WorkSkin") ~= getElementModel(source)) then
					addBox("Вы переоделись в рабочую форму.", source, 0, 60, 255)
					setElementModel(source, getElementData(source, "WorkSkin"))
					local id = getElementData(source, "ID")
					ColorTable[id] = getElementData(source, "Faction")
					for i,n in pairs(IDS) do
						if(n ~= source) then
							if(getElementData(n, "Login") == true) then
								triggerClientEvent(n, "onChangeClist", n, id, source, ColorTable[id])
							end
						end
					end
				else
					addBox("Вы переоделись в повседневную одежду", source, 0, 60, 255)
					setElementModel(source, toch(getElementData(source, "Skin")))
					local id = getElementData(source, "ID")
					ColorTable[id] = 21
					for i,n in pairs(IDS) do
						if(n ~= source) then
							if(getElementData(n, "Login") == true) then
								triggerClientEvent(n, "onChangeClist", n, id, source, ColorTable[id])
							end
						end
					end
				end
			end
		end
	elseif(pickupid == pckEatArmy) then
		if(getPedOccupiedVehicle(source) == false) then
			if(getElementData(source, "Faction") == 9) then
				showPlayerDialog(source, 102, 3, "Армейская столовая", "Названию блюда\nСухпаёк\nСэндвич с ветчиной\nКомплексный обед\nЛимонад\nКофе\nЧай", "Выбрать", "Отмена")
			end
		end
	elseif(pickupid == weaponPoliceDep) then
		if(getPedOccupiedVehicle(source) == false) then
			if(getElementData(source, "Login") == true) then
				if(getElementData(source, "Faction") == 8) then
					showPlayerDialog(source, 104, 3, "Обмундирование VCPD", "Часть комплекта\nДубинка\nDesert Eagle\nM4\nShotgun\nБронежилет\nАптечка\nТазер", "Выбор", "Отмена")
				end
			end
		end
	elseif(pickupid == skinPoliceDep) then
		if(getPedOccupiedVehicle(source) == false) then
			if(getElementData(source, "Login") == true) then
				if(getElementData(source, "Faction") == 8) then
					if(getElementData(source, "WorkSkin") ~= getElementModel(source)) then
						addBox("Вы переоделись в рабочую форму.", source, 0, 60, 255)
						setElementModel(source, getElementData(source, "WorkSkin"))
						local id = getElementData(source, "ID")
						ColorTable[id] = getElementData(source, "Faction")
						for i,n in pairs(IDS) do
							if(n ~= source) then
								if(getElementData(n, "Login") == true) then
									triggerClientEvent(n, "onChangeClist", n, id, source, ColorTable[id])
								end
							end
						end
					else
						addBox("Вы переоделись в повседневную одежду", source, 0, 60, 255)
						setElementModel(source, toch(getElementData(source, "Skin")))
						local id = getElementData(source, "ID")
						ColorTable[id] = 21
						for i,n in pairs(IDS) do
							if(n ~= source) then
								if(getElementData(n, "Login") == true) then
									triggerClientEvent(n, "onChangeClist", n, id, source, ColorTable[id])
								end
							end
						end
					end
				end
			end
		end
	elseif(pickupid == skinVCNews) then
		if(getPedOccupiedVehicle(source) == false) then
			if(getElementData(source, "Login") == true) then
				if(getElementData(source, "Faction") == 6) then
					if(getElementData(source, "WorkSkin") ~= getElementModel(source)) then
						addBox("Вы переоделись в рабочую форму.", source, 0, 60, 255)
						setElementModel(source, getElementData(source, "WorkSkin"))
						local id = getElementData(source, "ID")
						ColorTable[id] = getElementData(source, "Faction")
						for i,n in pairs(IDS) do
							if(n ~= source) then
								if(getElementData(n, "Login") == true) then
									triggerClientEvent(n, "onChangeClist", n, id, source, ColorTable[id])
								end
							end
						end
					else
						addBox("Вы переоделись в повседневную одежду.", source, 0, 60, 255)
						setElementModel(source, getElementData(source, "Skin"))
						local id = getElementData(source, "ID")
						ColorTable[id] = 21
						for i,n in pairs(IDS) do
							if(n ~= source) then
								if(getElementData(n, "Login") == true) then
									triggerClientEvent(n, "onChangeClist", n, id, source, ColorTable[id])
								end
							end
						end
					end
				end
			end
		end
	elseif(pickupid == skinVCHosp) then
		if(getPedOccupiedVehicle(source) == false) then
			if(getElementData(source, "Login") == true) then
				if(getElementData(source, "Faction") == 7) then
					if(getElementData(source, "WorkSkin") ~= getElementModel(source)) then
						addBox("Вы переоделись в рабочую форму.", source, 0, 60, 255)
						setElementModel(source, getElementData(source, "WorkSkin"))
						local id = getElementData(source, "ID")
						ColorTable[id] = getElementData(source, "Faction")
						for i,n in pairs(IDS) do
							if(n ~= source) then
								if(getElementData(n, "Login") == true) then
									triggerClientEvent(n, "onChangeClist", n, id, source, ColorTable[id])
								end
							end
						end
					else
						addBox("Вы переоделись в повседневную одежду.", source, 0, 60, 255)
						setElementModel(source, getElementData(source, "Skin"))
						local id = getElementData(source, "ID")
						ColorTable[id] = 21
						for i,n in pairs(IDS) do
							if(n ~= source) then
								if(getElementData(n, "Login") == true) then
									triggerClientEvent(n, "onChangeClist", n, id, source, 21)
								end
							end
						end
					end
				end
			end
		end
	elseif(getElementData(pickupid, "ExitFromHouse") ~= false) then
		local g = getElementData(source, "Hint")
		if(g ~= false) then
			SED(source, "HTime", true)
			SET(source, 0)
			SEP(source, HouseTable[g]["x"], HouseTable[g]["y"], HouseTable[g]["z"])
			setTimer(SED, 2000, 1, source, "HTime", false)
			SIDP(source, 0)
			removeElementData(source, "gde")
		else
			addBox("Ты не входил в этот дом,\nЧтобы из него выйти.", source, 255, 0, 0)
		end
	elseif(pickupid == pckAsh) then
		if(getPedOccupiedVehicle(source) == false) then
			showPlayerDialog(source, 117, 1, "Правила дорожного движения", "1. Общие правила.\n1.1. Правила, расположенные в данном обучении, являются единым порядком вождения Vice City.\n1.2. Лица, нарушившие порядок вождения, несут административную и уголовную ответственность Vice City.\n \n2. Водитель обязан\n2.1. Предоставлять документы (паспорт, лицензии):\n2.1.1. По мере требования полиции Vice City.\n2.1.2. По мере требования военных Vice City.\n(Перед требованием военный обязан показать паспорт)\n2.2. Соблюдать правила дорожного движения на всей территории Vice City.\n \n3. Государственные машины.\n3.1. При приближении машины с проблесковым маячком красного и синего цвета\nС включенным звуковым сигналом водитель обязан прижаться\nВправо и уступить дорогу данному транспорту.\n \n4. Пешеходы.\n4.1 Водитель обязан пропускать пешеходов на всей территории Vice City.\n \n5. Техническая часть\n5.1. Фары на транспортном средстве должны быть включены всё время,\nВне зависимости от видимости, времени суток и погодных условий.\n5.2. Максимальная вместимость бака всех транспортных средств - 100 литров.\n \n6. Регулирование скорости. \n6.1. Максимальная скорость движения по городу - 90 км/ч.", "Ок", "Отмена")
		end
	elseif(pickupid == enterMer) then
		if(getPedOccupiedVehicle(source) == false) then
			SET(source, 3)
			SEP(source, 386.9130859375, 173.8310546875, 1008.3828125)
		end
	elseif(pickupid == pckArmyEnter) then
		if(getPedOccupiedVehicle(source) == false) then
			SET(source, 6)
			SEP(source, -1308.94140625, -652.1416015625, 999.53125)
		end
	elseif(pickupid == pckArmyExit) then
		if(getPedOccupiedVehicle(source) == false) then
			SET(source, 0)
			SEP(source, -1715.2685546875, -156.8134765625, 14.827548980713)
		end
	elseif(pickupid == exitMer) then
		if(getPedOccupiedVehicle(source) == false) then
			SET(source, 0)
			SEP(source, -347, 1296, 12)
		end
	elseif(pickupid == pckMerPass) then
		if(getElementData(source, "Passport") ~= false) then
			if(getElementData(source, "Passport") == 0) then
				showPlayerDialog(source, 21, 1, "Получение паспорта.", "Действительно ли Вы хотите получить паспорт?\nДанная процедура абсолютно бесплатна.", "Подтвердить", "Отмена")
			else
				addBox("Ошибка: У Вас уже есть паспорт.", source, 255, 0, 0)
			end
		end
	elseif(pickupid == workMail) then
		if(getPedOccupiedVehicle(source) == false) then
			if(getElementData(source, "NWork") == 0) then
				showPlayerDialog(source, 30, 1, "Устройство на работу развозчиком пиццы.", "Действительно ли Вы хотите устроиться на работу развозчиком пиццы?\n#ff0000После согласия советую прочитать помощь по работе!", "Устроиться", "Отмена")
			elseif(getElementData(source, "NWork") == 6) then
				showPlayerDialog(source, 31, 1, "Увольнение с работы развозчиком пиццы.", "Действительно ли Вы хотите уволиться с работы развозчиком пиццы?", "Уволиться", "Отмена")
			else
				addBox("Ошибка: Вы уже трудоустроены.", source, 255, 0, 0)
			end
		end
	elseif(pickupid == enterAsh) then
		if(getPedOccupiedVehicle(source) == false) then
			SET(source, 5)
			SEP(source, 252.568359375, -95.251953125, 1117.6154785156)
			setElementRotation(source, 0, 0, 265)
			triggerClientEvent(source, "CameraUpdate", source, 265)
		end
	elseif(pickupid == exitAsh) then
		if(getPedOccupiedVehicle(source) == false) then
			SET(source, 0)
			SEP(source, 91.1083984375, -806.0146484375, 11.225130081177)
		end
	elseif(pickupid == pckVCNEnter) then
		if(getPedOccupiedVehicle(source) == false) then
			SEP(source, -548.5625, 770.2490234375, 97.470069885254)
			setElementRotation(source, 0, 0, 270)
		end
	elseif(pickupid == pckVCNExit) then
		if(getPedOccupiedVehicle(source) == false) then
			SEP(source, -503.9404296875, 776.0419921875, 12.424789428711)
		end
	elseif(pickupid == pckPoliceEnter) then
		if(getPedOccupiedVehicle(source) == false) then
			SET(source, 2)
			SIDP(source, 1)
			SEP(source, 394.1884765625, -474.8955078125, 12.30421257019)
		end
	elseif(pickupid == pckHospEnter) then
		if(getPedOccupiedVehicle(source) == false) then
			if(getElementHealth(source) < 100) then
				SED(source, "Lech", true)
			end
			SET(source, 1)
			SEP(source, -1244.763671875, -654.1064453125, 999.5703125)
		end
	elseif(pickupid == pckHospExit) then
		if(getPedOccupiedVehicle(source) == false) then
			if(getElementHealth(source) >= 75) then
				SED(source, "ABB", true)
				setTimer(function ( adb )
					if(isElement(adb)) then
						removeElementData(adb, "ABB")
					end
				end, 150, 1, source)
				removeElementData(source, "Lech")
				SET(source, 0)
				SEP(source, -134.0419921875, -980.0419921875, 10.423469543457)
			else
				addBox("Вы не можете выйти из больницы\nВ таком состоянии здоровья!", source, 255, 0, 0)
			end
		end
	elseif(pickupid == pckPoliceExit) then
		SET(source, 0)
		SIDP(source, 0)
		SEP(source, -871.71875, -682.5078125, 11.197931289673)
		setElementRotation(source, 0, 0, 335)
		setCameraTarget(source, source)
	elseif(pickupid == pckPoliceUp) then
		SET(source, 0)
		SIDP(source, 0)
		SEP(source, -889.6943359375, -671.296875, 25.409212112427)
		setElementRotation(source, 0, 0, 160)
		setCameraTarget(source, source)
	elseif(pickupid == pckPoliceDown) then
		SET(source, 2)
		SIDP(source, 1)
		SEP(source, 381.8076171875, -490.8115234375, 12.302949905396)
		setElementRotation(source, 0, 0, 330)
		setCameraTarget(source, source)
	elseif(getElementData(pickupid, "pckExitGarage") == true) then
		if(getPedOccupiedVehicle(source) == false) then
			local dom = toch(getElementData(source, "gde"))
			if(dom ~= nil) then
				SET(source, HouseTable[dom]["Interior"])
				SEP(source, HouseTable[dom]["hx"], HouseTable[dom]["hy"], HouseTable[dom]["hz"])
				SED(source, "Hint", getElementData(source, "gde"))
				SIDP(source, dom)
			else
				addBox("Произошла ошибка: Повторите попытку.", source, 255, 0, 0)
			end 
		end
	else
		if(getElementData(pickupid, "mafint1") ~= false) then
			if(getPedOccupiedVehicle(source) == false) then
				SEP(source, 1121.2998046875, -97.8857421875, 998.46978759766)
				SET(source, 2)
				setElementRotation(source, 0, 0, 90)
				SIDP(source, getElementData(pickupid, "mafint1"))
			end
		end
		if(getElementData(pickupid, "mafint2") ~= false) then
			local mafint = getElementData(pickupid, "mafint2")
			if(mafint == 1) then
				SEP(source, 301.5966796875, 288.3779296875, 16.657199859619)
			elseif(mafint == 2) then
				SEP(source, -1125.0390625, -180.28515625, 11.377799034119)
			elseif(mafint == 3) then
				SEP(source, -1072.0673828125, 339.38671875, 11.21955871582)
			elseif(mafint == 4) then
				SEP(source, -128.6318359375, -1384.4365234375, 10.419187545776)
			end
			SET(source, 0)
			SIDP(source, 0)
		end
		if(getElementData(pickupid, "ID") ~= nil and getElementData(pickupid, "ID") ~= false) then
			if(getElementData(source, "HTime") ~= true) then
				if(getPedOccupiedVehicle(source) == false) then
					local id = toch(getElementData(pickupid, "ID"))
					if(HouseTable[id]["PID"] == 0) then
						local string = "Номер дома: " .. HouseTable[id]["ID"] .. "\nСтоимость: " .. HouseTable[id]["Price"] .. "$."
						showPlayerDialog(source, 7, 1, "Купить этот дом?", string, "Купить", "Отмена" )
						SED(source, "Dom", HouseTable[id]["ID"])
						SED(source, "Price", HouseTable[id]["Price"])
					else
						local str = "Номер дома: " .. HouseTable[id]["ID"] .."\nВладелец: " .. HouseTable[id]["PName"] .. "\nСтоимость: " .. HouseTable[id]["Price"] .. "$."
						showPlayerDialog(source, 10, 1, "Дом №" .. id , str, "Войти", "Отменить")
						SED(source, "Dom", HouseTable[id]["ID"])
					end
				end
			end
		end
		if(getElementData(pickupid, "BusinessID") ~= false) then
			if(getPedOccupiedVehicle(source) == false) then
				local id = toch(getElementData(pickupid, "BusinessID"))
				if(BusinessTable[id]["Type"] == 1) then
					if(getElementData(source, "CDBus") == false) then
						if(getElementData(source, "NWork") ~= 1) then
							if(BusinessTable[id]["Owner"] > 0) then
								if(BusinessTable[id]["Open"] == true) then
									SED(source, "BusinessID", id)
									if(BusinessTable[id]["Roof"] > 0) then
										local str = "Информация о бизнесе.\n \nID бизнеса: " .. id .. "\nВладелец: " .. BusinessTable[id]["OwnerName"] .. "\nСостояние: Открыто.\nКрыша: " .. FactionName[BusinessTable[id]["Roof"]][1]
										showPlayerDialog(source, 90, 1, "Магазин 24/7", str, "Войти", "Отмена")
									else
										local str = "Информация о бизнесе.\n \nID бизнеса: " .. id .. "\nВладелец: " .. BusinessTable[id]["OwnerName"] .. "\nСостояние: Открыто.\nКрыша: государство"
										showPlayerDialog(source, 90, 1, "Магазин 24/7", str, "Войти", "Отмена")
									end
								else
									local str = "Информация о бизнесе.\n \nID бизнеса: " .. id .. "\nВладелец: " .. BusinessTable[id]["OwnerName"] .. "\nСостояние: Закрыто.\nКрыша: " .. BusinessTable[id]["Roof"]
									showPlayerDialog(source, 64000, 1, "Магазин 24/7", str, "Ок", "Отмена")
								end
							else
								SED(source, "BusinessID", id)
								showPlayerDialog(source, 60, 1, "24/7", "ID бизнеса: " .. id .. "\nДанным бизнесом никто не владеет.\nЕсли Вы хотите стать его владельцем,\nВы можете приобрести его.\nСтоимость: 90.000$", "Купить", "Отмена")
							end
						else
							addBox("Ошибка: Вы не можете зайти в магазин.", source, 255, 0, 0)
						end
					end
				elseif(BusinessTable[id]["Type"] == 3) then
					if(getElementData(source, "NWork") ~= 1) then
						if(BusinessTable[id]["Owner"] > 0) then
							if(BusinessTable[id]["Open"] == true) then
								SED(source, "BusinessID", id)
								if(BusinessTable[id]["Roof"] > 0) then
									local str = "Информация о бизнесе.\n \nID бизнеса: " .. id .. "\nВладелец: " .. BusinessTable[id]["OwnerName"] .. "\nСостояние: Открыто.\nКрыша: " .. FactionName[BusinessTable[id]["Roof"]][1]
									showPlayerDialog(source, 103, 1, "Пиццерия", str, "Войти", "Отмена")
								else
									local str = "Информация о бизнесе.\n \nID бизнеса: " .. id .. "\nВладелец: " .. BusinessTable[id]["OwnerName"] .. "\nСостояние: Открыто.\nКрыша: государство"
									showPlayerDialog(source, 103, 1, "Пиццерия", str, "Войти", "Отмена")
								end
							else
								local str = "Информация о бизнесе.\n \nID бизнеса: " .. id .. "\nВладелец: " .. BusinessTable[id]["OwnerName"] .. "\nСостояние: Закрыто.\nКрыша: " .. BusinessTable[id]["Roof"]
								showPlayerDialog(source, 103, 1, "Пиццерия", str, "Ок", "Отмена")
							end
						else
							SED(source, "BusinessID", id)
							if(BusinessTable[id]["Roof"] > 0) then
								showPlayerDialog(source, 60, 1, "Пиццерия", "Данным бизнесом никто не владеет.\nЕсли Вы хотите стать его владельцем,\nВы можете приобрести его.\nСтоимость: 90.000$\n \nКрыша: " .. FactionName[BusinessTable[id]["Roof"]][1], "Купить", "Отмена")
							else
								showPlayerDialog(source, 60, 1, "Пиццерия", "Данным бизнесом никто не владеет.\nЕсли Вы хотите стать его владельцем,\nВы можете приобрести его.\nСтоимость: 90.000$\n \nКрыша: государство.", "Купить", "Отмена")
							end
						end
					else
						addBox("Ошибка: Вы не можете зайти в магазин.", source, 255, 0, 0)
					end
				end
			end
		end
		if(getElementData(pickupid, "BusExit") ~= false) then
			SED(source, "CDBus", 1)
			local id = toch(getElementData(source, "BusinessID"))
			if(id ~= nil) then
				removeElementData(source, "BusinessID")
				SEP(source, BusinessTable[id]["x"], BusinessTable[id]["y"], BusinessTable[id]["z"])
				SET(source, 0)
				SIDP(source, 0)
				setTimer(function ( thePlayer )
					if(isElement(thePlayer)) then
						removeElementData(thePlayer, "CDBus")
					end
				end, 3000, 1, source)
			end
		end
		if(getElementData(pickupid, "FuelStation") ~= false) then
			if(getPedOccupiedVehicle(source) == false) then
				local id = toch(getElementData(pickupid, "FuelStation"))
				SED(source, "FuelStation", id)
				if(BusinessTable[id]["Owner"] == 0) then
					if(BusinessTable[id]["Roof"] > 0) then
						showPlayerDialog(source, 40, 1, "Заправочная станция №" .. id, "У данного бизнеса нет владельца.\nСтоимость бизнеса: 125000$.\nХотите ли Вы приобрести его?\nКрыша: " .. FactionName[BusinessTable[id]["Roof"]][1], "Купить", "Отмена")
					else
						showPlayerDialog(source, 40, 1, "Заправочная станция №" .. id, "У данного бизнеса нет владельца.\nСтоимость бизнеса: 125000$.\nХотите ли Вы приобрести его?\nКрыша: государство", "Купить", "Отмена")
					end
				else
					if(BusinessTable[id]["Roof"] > 0) then
						showPlayerDialog(source, 64000, 1, "Заправочная станция №" .. id, "Владелец бизнеса: " .. BusinessTable[id]["OwnerName"] .. "\nНомер бизнеса: " .. id .. "\nСтоимость бизнеса: 125000$.\nКрыша: " .. FactionName[BusinessTable[id]["Roof"]][1], "Ок", "Отмена")
					else
						showPlayerDialog(source, 64000, 1, "Заправочная станция №" .. id, "Владелец бизнеса: " .. BusinessTable[id]["OwnerName"] .. "\nНомер бизнеса: " .. id .. "\nСтоимость бизнеса: 125000$.\nКрыша: государство.", "Ок", "Отмена")
					end
				end
			end
		end
		if(getElementData(pickupid, "BusinessType") ~= false) then
			if(getElementData(pickupid, "BusinessType") == 4) then
				local id = getElementData(pickupid, "Mgz")
				if(BusinessTable[id]["Owner"] == 0) then
					SED(source, "BusinessID", id)
					if(BusinessTable[id]["Roof"] > 0) then
						showPlayerDialog(source, 135, 1, "Магазин одежды №" .. id, "У данного бизнеса нет владельца.\nСтоимость бизнеса: 325000$.\nХотите ли Вы приобрести его?\nКрыша: " .. FactionName[BusinessTable[id]["Roof"]][1], "Купить", "Отмена")
					else
						showPlayerDialog(source, 135, 1, "Магазин одежды №" .. id, "У данного бизнеса нет владельца.\nСтоимость бизнеса: 325000$.\nХотите ли Вы приобрести его?\nКрыша: государство", "Купить", "Отмена")
					end
				else
					if(BusinessTable[id]["Roof"] > 0) then
						showPlayerDialog(source, 64000, 1, "Магазин одежды №" .. id, "Владелец бизнеса: " .. BusinessTable[id]["OwnerName"] .. "\nНомер бизнеса: " .. id .. "\nСтоимость бизнеса: 325000$.\nКрыша: " .. FactionName[BusinessTable[id]["Roof"]][1], "Ок", "Отмена")
					else
						showPlayerDialog(source, 64000, 1, "Магазин одежды №" .. id, "Владелец бизнеса: " .. BusinessTable[id]["OwnerName"] .. "\nНомер бизнеса: " .. id .. "\nСтоимость бизнеса: 325000$.\nКрыша: государство.", "Ок", "Отмена")
					end
				end
			elseif(getElementData(pickupid, "BusinessType") == 5) then
				local id = getElementData(pickupid, "Mgz")
				if(BusinessTable[id]["Owner"] == 0) then
					SED(source, "BusinessID", id)
					if(BusinessTable[id]["Roof"] > 0) then
						showPlayerDialog(source, 136, 1, "Оружейный магазин №" .. id, "У данного бизнеса нет владельца.\nСтоимость бизнеса: 250000$.\nХотите ли Вы приобрести его?\nКрыша: " .. FactionName[BusinessTable[id]["Roof"]][1], "Купить", "Отмена")
					else
						showPlayerDialog(source, 136, 1, "Оружейный магазин №" .. id, "У данного бизнеса нет владельца.\nСтоимость бизнеса: 250000$.\nХотите ли Вы приобрести его?\nКрыша: государство", "Купить", "Отмена")
					end
				else
					if(BusinessTable[id]["Roof"] > 0) then
						showPlayerDialog(source, 64000, 1, "Оружейный магазин №" .. id, "Владелец бизнеса: " .. BusinessTable[id]["OwnerName"] .. "\nНомер бизнеса: " .. id .. "\nСтоимость бизнеса: 250000$.\nКрыша: " .. FactionName[BusinessTable[id]["Roof"]][1], "Ок", "Отмена")
					else
						showPlayerDialog(source, 64000, 1, "Оружейный магазин №" .. id, "Владелец бизнеса: " .. BusinessTable[id]["OwnerName"] .. "\nНомер бизнеса: " .. id .. "\nСтоимость бизнеса: 250000$.\nКрыша: государство.", "Ок", "Отмена")
					end
				end
			elseif(getElementData(pickupid, "BusinessType") == 6) then
				local id = getElementData(pickupid, "Mgz")
				if(BusinessTable[id]["Owner"] == 0) then
					SED(source, "BusinessID", id)
					if(BusinessTable[id]["Roof"] > 0) then
						showPlayerDialog(source, 142, 1, "Клуб Малибу №" .. id, "У данного бизнеса нет владельца.\nСтоимость бизнеса: 1500000$.\nХотите ли Вы приобрести его?\nКрыша: " .. FactionName[BusinessTable[id]["Roof"]][1], "Купить", "Отмена")
					else
						showPlayerDialog(source, 142, 1, "Клуб Малибу №" .. id, "У данного бизнеса нет владельца.\nСтоимость бизнеса: 1500000$.\nХотите ли Вы приобрести его?\nКрыша: государство", "Купить", "Отмена")
					end
				else
					if(BusinessTable[id]["Roof"] > 0) then
						showPlayerDialog(source, 64000, 1, "Клуб Малибу №" .. id, "Владелец бизнеса: " .. BusinessTable[id]["OwnerName"] .. "\nНомер бизнеса: " .. id .. "\nСтоимость бизнеса: 1500000$.\nКрыша: " .. FactionName[BusinessTable[id]["Roof"]][1], "Ок", "Отмена")
					else
						showPlayerDialog(source, 64000, 1, "Клуб Малибу №" .. id, "Владелец бизнеса: " .. BusinessTable[id]["OwnerName"] .. "\nНомер бизнеса: " .. id .. "\nСтоимость бизнеса: 1500000$.\nКрыша: государство.", "Ок", "Отмена")
					end
				end
			elseif(getElementData(pickupid, "BusinessType") == 7) then 
				local id = getElementData(pickupid, "Mgz")
				if(BusinessTable[id]["Owner"] == 0) then
					SED(source, "BusinessID", id)
					if(BusinessTable[id]["Roof"] > 0) then
						showPlayerDialog(source, 144, 1, "Сеть Ремонта Автомобилей №" .. id, "У данного бизнеса нет владельца.\nСтоимость бизнеса: 750000$.\nХотите ли Вы приобрести его?\nКрыша: " .. FactionName[BusinessTable[id]["Roof"]][1], "Купить", "Отмена")
					else
						showPlayerDialog(source, 144, 1, "Сеть Ремонта Автомобилей №" .. id, "У данного бизнеса нет владельца.\nСтоимость бизнеса: 750000$.\nХотите ли Вы приобрести его?\nКрыша: государство", "Купить", "Отмена")
					end
				else
					if(BusinessTable[id]["Roof"] > 0) then
						showPlayerDialog(source, 64000, 1, "Сеть Ремонта Автомобилей №" .. id, "Владелец бизнеса: " .. BusinessTable[id]["OwnerName"] .. "\nНомер бизнеса: " .. id .. "\nСтоимость бизнеса: 750000$.\nКрыша: " .. FactionName[BusinessTable[id]["Roof"]][1], "Ок", "Отмена")
					else
						showPlayerDialog(source, 64000, 1, "Сеть Ремонта Автомобилей №" .. id, "Владелец бизнеса: " .. BusinessTable[id]["OwnerName"] .. "\nНомер бизнеса: " .. id .. "\nСтоимость бизнеса: 750000$.\nКрыша: государство.", "Ок", "Отмена")
					end
				end
			end
		end
	end
end

function StartWorkingLoader(  )
	setElementModel(source, 16)
	SED(source, "NWork", 1)
end

function kenZvon( player )
	if(isElement(player)) then
		SED(player, "AcceptedCall", true)
		addBox("Звонок на телефон.", player, 255, 255, 0)
		setPedAnimation(player, "ped", "phone_talk", 1, true, true, false, true)
		local id = getElementData(player, "ID")
		PhoneObject[id] = createObject(16097, 0, 0, 0)
		exports.bone:attachElementToBone(PhoneObject[id], player, 12,0.03,0.02,0.12,0,90,90)
	end
end

function checkqw( player, ch, s )
	if(isElement(player)) then
		if(getElementData(player, "Quest") == 5) then
			if(ch == 1) then
				if(s >= 350) then
					if(getElementData(player, "AutoLicense") == 0) then
						SED(player, "Quest", 6)
						local id = toch(getElementData(player, "ID"))
						dbExec(mysql, "UPDATE `Accounts` SET `Quest` = ? WHERE `Name` = ?", 6, getElementData(player, "Name"))
						SED(player, "AcceptedCall", true)
						addBox("Звонок на телефон.", player, 255, 255, 0)
						setPedAnimation(player, "ped", "phone_talk", 1, true, true, false, true)
						local id = getElementData(player, "ID")
						PhoneObject[id] = createObject(16097, 0, 0, 0)
						exports.bone:attachElementToBone(PhoneObject[id], player, 12,0.03,0.02,0.12,0,90,90)
						showPlayerDialog(player, 111, 1, "Кен Розенберг по телефону.", "Да, это снова я, Кен. Деньги появились?\nДа? А водить умеешь? Отлично. Ну значит на права сдашь легко, у нас\nТут свои правила и получить права нужно именно в нашем штате,\nТак что давай в Автошколу, она кстати недалеко от моего офиса,\nИ получи права.\n(/gps - важные места - автошкола)", "Ок", "Отмена")
						getExp(player, 2)
						setElementMoney(player, 250, "Бонус за квест")
						dbExec(mysql, "UPDATE `Accounts` SET `QGR` = '-1' WHERE `ID` = ?", getElementData(player, "AccID"))
					else
						SED(player, "Quest", -1)
						local id = toch(getElementData(player, "ID"))
						dbExec(mysql, "UPDATE `Accounts` SET `Quest` = ? WHERE `Name` = ?", -1, getElementData(player, "Name"))
						SED(player, "AcceptedCall", true)
						addBox("Звонок на телефон.", player, 255, 255, 0)
						setPedAnimation(player, "ped", "phone_talk", 1, true, true, false, true)
						local id = getElementData(player, "ID")
						PhoneObject[id] = createObject(16097, 0, 0, 0)
						exports.bone:attachElementToBone(PhoneObject[id], player, 12,0.03,0.02,0.12,0,90,90)
						showPlayerDialog(player, 111, 1, "Кен Розенберг по телефону.", "Да, это снова я, Кен. Деньги появились?\nДа? И права уже получил? Отлично. Теперь мне пора идти по делам...\nА ты займись чем-нибудь, город там осмотри…\nМожет вольешься в какой-то коллектив. Да в конце концов, на работу устройся,\nТам еще деньжат подзаработаешь, Кен Розенберг херни не скажет, а то был тут один в голубой рубашке с пальмами,\nНе слушал меня и кончил плохо…\nЛадно, бывай, я позвоню позже.", "Ок", "Отмена")
						getExp(player, 3)
						setElementMoney(player, 250, "Бонус за квест")
						dbExec(mysql, "UPDATE `Accounts` SET `QGR` = '-1' WHERE `ID` = ?", getElementData(player, "AccID"))
					end
				else
					local ranee = getElementData(player, "QGR")
					if(ranee + s >= 350) then
						if(getElementData(player, "AutoLicense") == 0) then
							SED(player, "Quest", 6)
							local id = toch(getElementData(player, "ID"))
							dbExec(mysql, "UPDATE `Accounts` SET `Quest` = ? WHERE `Name` = ?", 6, getElementData(player, "Name"))
							SED(player, "AcceptedCall", true)
							addBox("Звонок на телефон.", player, 255, 255, 0)
							setPedAnimation(player, "ped", "phone_talk", 1, true, true, false, true)
							local id = getElementData(player, "ID")
							PhoneObject[id] = createObject(16097, 0, 0, 0)
							exports.bone:attachElementToBone(PhoneObject[id], player, 12,0.03,0.02,0.12,0,90,90)
							showPlayerDialog(player, 111, 1, "Кен Розенберг по телефону.", "Да, это снова я, Кен. Деньги появились?\nДа? А водить умеешь? Отлично. Ну значит на права сдашь легко, у нас\nТут свои правила и получить права нужно именно в нашем штате,\nТак что давай в Автошколу, она кстати недалеко от моего офиса,\nИ получи права.\n(/gps - важные места - автошкола)", "Ок", "Отмена")
							getExp(player, 2)
							setElementMoney(player, 250, "Бонус за квест")
							dbExec(mysql, "UPDATE `Accounts` SET `QGR` = '-1' WHERE `ID` = ?", getElementData(player, "AccID"))
						else
							SED(player, "Quest", -1)
							local id = toch(getElementData(player, "ID"))
							dbExec(mysql, "UPDATE `Accounts` SET `Quest` = ? WHERE `Name` = ?", -1, getElementData(player, "Name"))
							SED(player, "AcceptedCall", true)
							addBox("Звонок на телефон.", player, 255, 255, 0)
							setPedAnimation(player, "ped", "phone_talk", 1, true, true, false, true)
							local id = getElementData(player, "ID")
							PhoneObject[id] = createObject(16097, 0, 0, 0)
							exports.bone:attachElementToBone(PhoneObject[id], player, 12,0.03,0.02,0.12,0,90,90)
							showPlayerDialog(player, 64000, 1, "Кен Розенберг по телефону.", "Да, это снова я, Кен. Деньги появились?\nДа? И права уже получил? Отлично. Теперь мне пора идти по делам...\nА ты займись чем-нибудь, город там осмотри…\nМожет вольешься в какой-то коллектив. Да в конце концов, на работу устройся,\nТам еще деньжат подзаработаешь, Кен Розенберг херни не скажет, а то был тут один в голубой рубашке с пальмами,\nНе слушал меня и кончил плохо…\nЛадно, бывай, я позвоню позже.", "Ок", "Отмена")
							getExp(player, 3)
							setElementMoney(player, 250, "Бонус за квест")
							dbExec(mysql, "UPDATE `Accounts` SET `QGR` = '-1' WHERE `ID` = ?", getElementData(player, "AccID"))
						end
					else
						SED(player, "QGR", getElementData(player, "QGR") + s)
						dbExec(mysql, "UPDATE `Accounts` SET `QGR` = ? WHERE `ID` = ?", getElementData(player, "QGR"), getElementData(player, "AccID"))
						addBox("Чтобы продолжить квестовую цепочку\nНеобходимо перенести ещё " .. 350 - getElementData(player, "QGR") .. " кг\nНа грузчиках. Либо " .. math.ceil((350 - getElementData(player, "QGR")) / 10) .. "\nмешков на работе строителем.", player, 255, 255, 0)
					end
				end
			elseif(ch == 2) then
				if(s >= 35) then
					if(getElementData(player, "AutoLicense") == 0) then
						SED(player, "Quest", 6)
						local id = toch(getElementData(player, "ID"))
						dbExec(mysql, "UPDATE `Accounts` SET `Quest` = ? WHERE `Name` = ?", 7, getElementData(player, "Name"))
						SED(player, "AcceptedCall", true)
						addBox("Звонок на телефон.", player, 255, 255, 0)
						setPedAnimation(player, "ped", "phone_talk", 1, true, true, false, true)
						local id = getElementData(player, "ID")
						PhoneObject[id] = createObject(16097, 0, 0, 0)
						exports.bone:attachElementToBone(PhoneObject[id], player, 12,0.03,0.02,0.12,0,90,90)
						showPlayerDialog(player, 111, 1, "Кен Розенберг по телефону.", "Да, это снова я, Кен. Деньги появились?\nДа? А водить умеешь? Отлично. Ну значит на права сдашь легко, у нас\nТут свои правила и получить права нужно именно в нашем штате,\nТак что давай в Автошколу, она кстати недалеко от моего офиса,\nИ получи права.\n(/gps - важные места - автошкола)", "Ок", "Отмена")
						getExp(player, 2)
						setElementMoney(player, 250, "Бонус за квест")
					else
						SED(player, "Quest", -1)
						local id = toch(getElementData(player, "ID"))
						dbExec(mysql, "UPDATE `Accounts` SET `Quest` = ? WHERE `Name` = ?", -1, getElementData(player, "Name"))
						SED(player, "AcceptedCall", true)
						addBox("Звонок на телефон.", player, 255, 255, 0)
						setPedAnimation(player, "ped", "phone_talk", 1, true, true, false, true)
						local id = getElementData(player, "ID")
						PhoneObject[id] = createObject(16097, 0, 0, 0)
						exports.bone:attachElementToBone(PhoneObject[id], player, 12,0.03,0.02,0.12,0,90,90)
						showPlayerDialog(player, 64000, 1, "Кен Розенберг по телефону.", "Да, это снова я, Кен. Деньги появились?\nДа? И права уже получил? Отлично. Теперь мне пора идти по делам...\nА ты займись чем-нибудь, город там осмотри…\nМожет вольешься в какой-то коллектив. Да в конце концов, на работу устройся,\nТам еще деньжат подзаработаешь, Кен Розенберг херни не скажет, а то был тут один в голубой рубашке с пальмами,\nНе слушал меня и кончил плохо…\nЛадно, бывай, я позвоню позже.", "Ок", "Отмена")
						getExp(player, 3)
						setElementMoney(player, 250, "Бонус за квест")
					end
				else
					local ranee = getElementData(player, "QGR")
					if(ranee + s * 10 >= 350) then
						if(getElementData(player, "AutoLicense") == 0) then
							SED(player, "Quest", 6)
							local id = toch(getElementData(player, "ID"))
							dbExec(mysql, "UPDATE `Accounts` SET `Quest` = ? WHERE `Name` = ?", 6, getElementData(player, "Name"))
							SED(player, "AcceptedCall", true)
							addBox("Звонок на телефон.", player, 255, 255, 0)
							setPedAnimation(player, "ped", "phone_talk", 1, true, true, false, true)
							local id = getElementData(player, "ID")
							PhoneObject[id] = createObject(16097, 0, 0, 0)
							exports.bone:attachElementToBone(PhoneObject[id], player, 12,0.03,0.02,0.12,0,90,90)
							showPlayerDialog(player, 111, 1, "Кен Розенберг по телефону.", "Да, это снова я, Кен. Деньги появились?\nДа? А водить умеешь? Отлично. Ну значит на права сдашь легко, у нас\nТут свои правила и получить права нужно именно в нашем штате,\nТак что давай в Автошколу, она кстати недалеко от моего офиса,\nИ получи права.\n(/gps - важные места - автошкола)", "Ок", "Отмена")
							getExp(player, 2)
							setElementMoney(player, 250, "Бонус за квест")
							dbExec(mysql, "UPDATE `Accounts` SET `QGR` = '-1' WHERE `ID` = ?", getElementData(player, "AccID"))
						else
							SED(player, "Quest", -1)
							local id = toch(getElementData(player, "ID"))
							dbExec(mysql, "UPDATE `Accounts` SET `Quest` = ? WHERE `Name` = ?", -1, getElementData(player, "Name"))
							SED(player, "AcceptedCall", true)
							addBox("Звонок на телефон.", player, 255, 255, 0)
							setPedAnimation(player, "ped", "phone_talk", 1, true, true, false, true)
							local id = getElementData(player, "ID")
							PhoneObject[id] = createObject(16097, 0, 0, 0)
							exports.bone:attachElementToBone(PhoneObject[id], player, 12,0.03,0.02,0.12,0,90,90)
							showPlayerDialog(player, 64000, 1, "Кен Розенберг по телефону.", "Да, это снова я, Кен. Деньги появились?\nДа? И права уже получил? Отлично. Теперь мне пора идти по делам...\nА ты займись чем-нибудь, город там осмотри…\nМожет вольешься в какой-то коллектив. Да в конце концов, на работу устройся,\nТам еще деньжат подзаработаешь, Кен Розенберг херни не скажет, а то был тут один в голубой рубашке с пальмами,\nНе слушал меня и кончил плохо…\nЛадно, бывай, я позвоню позже.", "Ок", "Отмена")
							getExp(player, 3)
							setElementMoney(player, 250, "Бонус за квест")
							dbExec(mysql, "UPDATE `Accounts` SET `QGR` = '-1' WHERE `ID` = ?", getElementData(player, "AccID"))
						end
					else
						SED(player, "QGR", getElementData(player, "QGR") + s * 10)
						dbExec(mysql, "UPDATE `Accounts` SET `QGR` = ? WHERE `ID` = ?", getElementData(player, "QGR"), getElementData(player, "AccID"))
						addBox("Чтобы продолжить квестовую цепочку\nНеобходимо перенести ещё " .. 350 - getElementData(player, "QGR") .. " кг\nНа грузчиках. Либо " .. math.ceil((350 - getElementData(player, "QGR")) / 10) .. "\nмешков на работе строителем.", player, 255, 255, 0)
					end
				end
			elseif(ch == 3) then
				if(s >= 350) then
					SED(player, "Quest", 6)
					local id = toch(getElementData(player, "ID"))
					dbExec(mysql, "UPDATE `Accounts` SET `Quest` = ? WHERE `Name` = ?", 7, getElementData(player, "Name"))
					SED(player, "AcceptedCall", true)
					addBox("Звонок на телефон.", player, 255, 255, 0)
					setPedAnimation(player, "ped", "phone_talk", 1, true, true, false, true)
					local id = getElementData(player, "ID")
					PhoneObject[id] = createObject(16097, 0, 0, 0)
					exports.bone:attachElementToBone(PhoneObject[id], player, 12,0.03,0.02,0.12,0,90,90)
					showPlayerDialog(player, 111, 1, "Кен Розенберг по телефону.", "Да, это снова я, Кен. Деньги появились?\nДа? А водить умеешь? Отлично. Ну значит на права сдашь легко, у нас\nТут свои правила и получить права нужно именно в нашем штате,\nТак что давай в Автошколу, она кстати недалеко от моего офиса,\nИ получи права.\n(/gps - важные места - автошкола)", "Ок", "Отмена")
					getExp(player, 2)
					setElementMoney(player, 500, "Бонус за квест")
				else
					local ranee = getElementData(player, "QGR")
					if(ranee + s >= 350) then
						if(getElementData(player, "AutoLicense") == 0) then
							SED(player, "Quest", 6)
							local id = toch(getElementData(player, "ID"))
							dbExec(mysql, "UPDATE `Accounts` SET `Quest` = ? WHERE `Name` = ?", 6, getElementData(player, "Name"))
							SED(player, "AcceptedCall", true)
							addBox("Звонок на телефон.", player, 255, 255, 0)
							setPedAnimation(player, "ped", "phone_talk", 1, true, true, false, true)
							local id = getElementData(player, "ID")
							PhoneObject[id] = createObject(16097, 0, 0, 0)
							exports.bone:attachElementToBone(PhoneObject[id], player, 12,0.03,0.02,0.12,0,90,90)
							showPlayerDialog(player, 111, 1, "Кен Розенберг по телефону.", "Да, это снова я, Кен. Деньги появились?\nДа? А водить умеешь? Отлично. Ну значит на права сдашь легко, у нас\nТут свои правила и получить права нужно именно в нашем штате,\nТак что давай в Автошколу, она кстати недалеко от моего офиса,\nИ получи права.\n(/gps - важные места - автошкола)", "Ок", "Отмена")
							getExp(player, 2)
							setElementMoney(player, 250, "Бонус за квест")
							dbExec(mysql, "UPDATE `Accounts` SET `QGR` = '-1' WHERE `ID` = ?", getElementData(player, "AccID"))
						else
							SED(player, "Quest", -1)
							local id = toch(getElementData(player, "ID"))
							dbExec(mysql, "UPDATE `Accounts` SET `Quest` = ? WHERE `Name` = ?", -1, getElementData(player, "Name"))
							SED(player, "AcceptedCall", true)
							addBox("Звонок на телефон.", player, 255, 255, 0)
							setPedAnimation(player, "ped", "phone_talk", 1, true, true, false, true)
							local id = getElementData(player, "ID")
							PhoneObject[id] = createObject(16097, 0, 0, 0)
							exports.bone:attachElementToBone(PhoneObject[id], player, 12,0.03,0.02,0.12,0,90,90)
							showPlayerDialog(player, 64000, 1, "Кен Розенберг по телефону.", "Да, это снова я, Кен. Деньги появились?\nДа? И права уже получил? Отлично. Теперь мне пора идти по делам...\nА ты займись чем-нибудь, город там осмотри…\nМожет вольешься в какой-то коллектив. Да в конце концов, на работу устройся,\nТам еще деньжат подзаработаешь, Кен Розенберг херни не скажет, а то был тут один в голубой рубашке с пальмами,\nНе слушал меня и кончил плохо…\nЛадно, бывай, я позвоню позже.", "Ок", "Отмена")
							getExp(player, 3)
							setElementMoney(player, 250, "Бонус за квест")
							dbExec(mysql, "UPDATE `Accounts` SET `QGR` = '-1' WHERE `ID` = ?", getElementData(player, "AccID"))
						end
					else
						SED(player, "QGR", getElementData(player, "QGR") + s)
						dbExec(mysql, "UPDATE `Accounts` SET `QGR` = ? WHERE `ID` = ?", getElementData(player, "QGR"), getElementData(player, "AccID"))
						addBox("Чтобы продолжить квестовую цепочку\nНеобходимо перенести ещё " .. 350 - getElementData(player, "QGR") .. " кг\nНа грузчиках. Либо " .. math.ceil((350 - getElementData(player, "QGR")) / 10) .. "\nмешков на работе строителем.", player, 255, 255, 0)
					end
				end
			elseif(ch == 4) then
				if(s ~= false) then
					if(s >= 35) then
						if(getElementData(player, "AutoLicense") == 0) then
							SED(player, "Quest", 6)
							local id = toch(getElementData(player, "ID"))
							dbExec(mysql, "UPDATE `Accounts` SET `Quest` = ? WHERE `Name` = ?", 7, getElementData(player, "Name"))
							SED(player, "AcceptedCall", true)
							addBox("Звонок на телефон.", player, 255, 255, 0)
							setPedAnimation(player, "ped", "phone_talk", 1, true, true, false, true)
							local id = getElementData(player, "ID")
							PhoneObject[id] = createObject(16097, 0, 0, 0)
							exports.bone:attachElementToBone(PhoneObject[id], player, 12,0.03,0.02,0.12,0,90,90)
							showPlayerDialog(player, 111, 1, "Кен Розенберг по телефону.", "Да, это снова я, Кен. Деньги появились?\nДа? А водить умеешь? Отлично. Ну значит на права сдашь легко, у нас\nТут свои правила и получить права нужно именно в нашем штате,\nТак что давай в Автошколу, она кстати недалеко от моего офиса,\nИ получи права.\n(/gps - важные места - автошкола)", "Ок", "Отмена")
							getExp(player, 2)
							setElementMoney(player, 500, "Бонус за квест")
						else
							SED(player, "Quest", -1)
							local id = toch(getElementData(player, "ID"))
							dbExec(mysql, "UPDATE `Accounts` SET `Quest` = ? WHERE `Name` = ?", -1, getElementData(player, "Name"))
							SED(player, "AcceptedCall", true)
							addBox("Звонок на телефон.", player, 255, 255, 0)
							setPedAnimation(player, "ped", "phone_talk", 1, true, true, false, true)
							local id = getElementData(player, "ID")
							PhoneObject[id] = createObject(16097, 0, 0, 0)
							exports.bone:attachElementToBone(PhoneObject[id], player, 12,0.03,0.02,0.12,0,90,90)
							showPlayerDialog(player, 64000, 1, "Кен Розенберг по телефону.", "Да, это снова я, Кен. Деньги появились?\nДа? И права уже получил? Отлично. Теперь мне пора идти по делам...\nА ты займись чем-нибудь, город там осмотри…\nМожет вольешься в какой-то коллектив. Да в конце концов, на работу устройся,\nТам еще деньжат подзаработаешь, Кен Розенберг херни не скажет, а то был тут один в голубой рубашке с пальмами,\nНе слушал меня и кончил плохо…\nЛадно, бывай, я позвоню позже.", "Ок", "Отмена")
							getExp(player, 3)
							setElementMoney(player, 250, "Бонус за квест")
							dbExec(mysql, "UPDATE `Accounts` SET `QGR` = '-1' WHERE `ID` = ?", getElementData(player, "AccID"))
						end
					else
						SED(player, "QGR", getElementData(player, "QGR") + s * 10)
						dbExec(mysql, "UPDATE `Accounts` SET `QGR` = ? WHERE `ID` = ?", getElementData(player, "QGR"), getElementData(player, "AccID"))
						addBox("Чтобы продолжить квестовую цепочку\nНеобходимо перенести ещё " .. 350 - getElementData(player, "QGR") .. " кг\nНа грузчиках. Либо " .. math.ceil((350 - getElementData(player, "QGR")) / 10) .. "\nмешков на работе строителем.", player, 255, 255, 0)
					end
				end
			elseif(ch == 5) then
				if(getElementData(player, "AutoLicense") == 0) then
					SED(player, "Quest", 6)
					local id = toch(getElementData(player, "ID"))
					dbExec(mysql, "UPDATE `Accounts` SET `Quest` = ? WHERE `Name` = ?", 7, getElementData(player, "Name"))
					SED(player, "AcceptedCall", true)
					addBox("Звонок на телефон.", player, 255, 255, 0)
					setPedAnimation(player, "ped", "phone_talk", 1, true, true, false, true)
					local id = getElementData(player, "ID")
					PhoneObject[id] = createObject(16097, 0, 0, 0)
					exports.bone:attachElementToBone(PhoneObject[id], player, 12,0.03,0.02,0.12,0,90,90)
					showPlayerDialog(player, 111, 1, "Кен Розенберг по телефону.", "Да, это снова я, Кен. Деньги появились?\nДа? А водить умеешь? Отлично. Ну значит на права сдашь легко, у нас\nТут свои правила и получить права нужно именно в нашем штате,\nТак что давай в Автошколу, она кстати недалеко от моего офиса,\nИ получи права.\n(/gps - важные места - автошкола)", "Ок", "Отмена")
					getExp(player, 2)
					setElementMoney(player, 500, "Бонус за квест")
				else
					SED(player, "Quest", -1)
					local id = toch(getElementData(player, "ID"))
					dbExec(mysql, "UPDATE `Accounts` SET `Quest` = ? WHERE `Name` = ?", -1, getElementData(player, "Name"))
					SED(player, "AcceptedCall", true)
					addBox("Звонок на телефон.", player, 255, 255, 0)
					setPedAnimation(player, "ped", "phone_talk", 1, true, true, false, true)
					local id = getElementData(player, "ID")
					PhoneObject[id] = createObject(16097, 0, 0, 0)
					exports.bone:attachElementToBone(PhoneObject[id], player, 12,0.03,0.02,0.12,0,90,90)
					showPlayerDialog(player, 64000, 1, "Кен Розенберг по телефону.", "Да, это снова я, Кен. Деньги появились?\nДа? И права уже получил? Отлично. Теперь мне пора идти по делам...\nА ты займись чем-нибудь, город там осмотри…\nМожет вольешься в какой-то коллектив. Да в конце концов, на работу устройся,\nТам еще деньжат подзаработаешь, Кен Розенберг херни не скажет, а то был тут один в голубой рубашке с пальмами,\nНе слушал меня и кончил плохо…\nЛадно, бывай, я позвоню позже.", "Ок", "Отмена")
					getExp(player, 3)
					setElementMoney(player, 250, "Бонус за квест")
					dbExec(mysql, "UPDATE `Accounts` SET `QGR` = '-1' WHERE `ID` = ?", getElementData(player, "AccID"))
				end
			end
		end
	end
end

function EndWorkingLoader(  )
	if(getElementData(client, "SummLoads") ~= false or getElementData(client, "SummLoads") ~= 0) then
		local mn = toch(getElementData(client, "SummLoads"))
		if(mn ~= nil) then
			local bonus = 0
			local vip = getElementData(client, "VipType")
			if(vip == 2) then
				bonus = math.floor(toch(getElementData(client, "SummLoads")) * 0.15)
			elseif(vip == 3) then
				bonus = math.floor(toch(getElementData(client, "SummLoads")) * 0.25)
			elseif(vip == 4) then
				bonus = math.floor(toch(getElementData(client, "SummLoads")) * 0.35)
			end
			setElementMoney(client, (toch(getElementData(client, "SummLoads")) + bonus) * coefmoney, "Грузчик")
			if(vip > 1) then
				addBox("Вы заработали " .. (toch(getElementData(client, "SummLoads"))) * coefmoney .. "$ за работу!\nБонус: " .. bonus * coefmoney .. "$.", client, 0, 255, 100)
			else
				addBox("Вы заработали " .. (toch(getElementData(client, "SummLoads"))) * coefmoney .. "$ за работу!", client, 0, 255, 100)
			end
			checkqw(client, 1, mn)
			removeElementData(client, "SummLoads")
		else
			addBox("Вы уволились с работы грузчиком.", client, 0, 60, 255)
		end
	end
	if(objeect[toch(getElementData(client, "ID"))] ~= nil) then
		if(isElement(objeect[toch(getElementData(client, "ID"))]) == true) then
			destroyElement(objeect[toch(getElementData(client, "ID"))])
			objeect[toch(getElementData(client, "ID"))] = nil
			removeElementData(client, "LoadPack")
		end
	end
	setPedAnimation(client, "BSKTBALL", "BBALL_idle_O", 100, false)
	triggerClientEvent(client, "ClearLoadWork", client)
	setElementModel(client, getElementData(client, "Skin"))
	removeElementData(client, "SummLoads")
	SED(client, "NWork", 0)
end

function LoaderEnd( playa )
	local summ = math.random(9, 15)
	if(getElementData(client, "SummLoads") ~= nil and getElementData(client, "SummLoads") ~= false and getElementData(client, "SummLoads") ~= 0) then
		SED(client, "SummLoads", toch(getElementData(client, "SummLoads")) + summ)
	else
		SED(client, "SummLoads", summ)
	end
	Server["Gruz"] = Server["Gruz"] + summ
	edit3dtext(ServerPerem["GruzLabel"], "РАЗГРУЖЕНО #ff2200" .. Server["Gruz"] .. " КГ.")
	addBox("Вы перенесли " .. summ .. " кг груза.\nВсего: " .. getElementData(client, "SummLoads") .. " кг.", client, 0, 255, 100)
	setPedAnimation(client, "carry", "putdwn", -1, false, false, false, false)
	exports.bone:detachElementFromBone(getElementData(client, "LoadPack"))
	if(objeect[toch(getElementData(source, "ID"))] ~= nil) then
		destroyElement(objeect[toch(getElementData(client, "ID"))])
		objeect[toch(getElementData(source, "ID"))] = nil
	end
	removeElementData(client, "LoadPack")
end

function LoaderStart( playa )
	setPedAnimation(client, "carry", "liftup", 800, false, false, true, false)
	setControlState(client, "forwards", false)
	setControlState(client, "backwards", false)
	setControlState(client, "jump", false)
	setControlState(client, "sprint", false)
	setTimer(clan, 900, 1, client)
	objeect[toch(getElementData(client, "ID"))] = createObject(1279, 0, 0, 0)
	exports.bone:attachElementToBone(objeect[toch(getElementData(client, "ID"))],client, 12,0.3,0,0,-90,20,0)
	SED(client, "LoadPack", objeect[toch(getElementData(client, "ID"))])
end

function clan( thePlayer )
	setPedAnimation(thePlayer, "CARRY", "crry_prtial", 1, true, true, false) 
end

function hitMrkAshes( hit, dim )
	if(getElementType(hit) == "player") then
		if(getElementData(hit, "AshStage") ~= false) then
			if(getElementData(hit, "AshVeh") == getPedOccupiedVehicle(hit)) then
				if(getPedOccupiedVehicleSeat(hit) == 0) then
					if(getElementData(source, "ASHP") == hit) then
						local num = toch(getElementData(hit, "AshStage"))
						local mrk = getElementData(hit, "mrkAsh")
						local blp = getElementData(hit, "blpAsh")
						destroyElement(mrk)
						destroyElement(blp)
						if(num == 0) then
							mrk = createMarker(74.220703125, -851.8134765625, 10.277963638306, "checkpoint", 4, 220, 0, 0, 220, hit)
							setMarkerTarget(mrk, -93.9287109375, -889.162109375, 9.8428411483765)
							num = num + 1
							addEventHandler("onMarkerHit", mrk, hitMrkAshes)
							SED(mrk, "ASHP", hit)
							blp = createBlip(74.220703125, -851.8134765625, 10.277963638306, 0, 2, 220, 0, 0, 220, 10, 64000, hit)
							SED(hit, "mrkAsh", mrk)
							SED(hit, "blpAsh", blp)
							SED(hit, "AshStage", num)
						elseif(num == 1) then
							mrk = createMarker(-93.9287109375, -889.162109375, 9.8428411483765, "checkpoint", 4, 220, 0, 0, 220, hit)
							setMarkerTarget(mrk, -75.4013671875, -1071.0859375, 9.8420419692993)
							num = num + 1
							addEventHandler("onMarkerHit", mrk, hitMrkAshes)
							SED(mrk, "ASHP", hit)
							blp = createBlip(-93.9287109375, -889.162109375, 9.8428411483765, 0, 2, 220, 0, 0, 220, 10, 64000, hit)
							SED(hit, "mrkAsh", mrk)
							SED(hit, "blpAsh", blp)
							SED(hit, "AshStage", num)
						elseif(num == 2) then
							mrk = createMarker(-75.4013671875, -1071.0859375, 9.8420419692993, "checkpoint", 4, 220, 0, 0, 220, hit)
							setMarkerTarget(mrk, -203.30078125, -1195.28515625, 9.8356485366821)
							num = num + 1
							addEventHandler("onMarkerHit", mrk, hitMrkAshes)
							SED(mrk, "ASHP", hit)
							blp = createBlip(-75.4013671875, -1071.0859375, 9.8420419692993, 0, 2, 220, 0, 0, 220, 10, 64000, hit)
							SED(hit, "mrkAsh", mrk)
							SED(hit, "blpAsh", blp)
							SED(hit, "AshStage", num)
						elseif(num == 3) then
							mrk = createMarker(-203.30078125, -1195.28515625, 9.8356485366821, "checkpoint", 4, 220, 0, 0, 220, hit)
							setMarkerTarget(mrk, -162.4736328125, -1439.91796875, 9.8356714248657)
							num = num + 1
							addEventHandler("onMarkerHit", mrk, hitMrkAshes)
							SED(mrk, "ASHP", hit)
							blp = createBlip(-203.30078125, -1195.28515625, 9.8356485366821, 0, 2, 220, 0, 0, 220, 10, 64000, hit)
							SED(hit, "mrkAsh", mrk)
							SED(hit, "blpAsh", blp)
							SED(hit, "AshStage", num)
						elseif(num == 4) then
							mrk = createMarker(-162.4736328125, -1439.91796875, 9.8356714248657, "checkpoint", 4, 220, 0, 0, 220, hit)
							setMarkerTarget(mrk, -26.01171875, -1579.4306640625, 9.8263444900513)
							num = num + 1
							addEventHandler("onMarkerHit", mrk, hitMrkAshes)
							SED(mrk, "ASHP", hit)
							blp = createBlip(-162.4736328125, -1439.91796875, 9.8356714248657, 0, 2, 220, 0, 0, 220, 10, 64000, hit)
							SED(hit, "mrkAsh", mrk)
							SED(hit, "blpAsh", blp)
							SED(hit, "AshStage", num)
						elseif(num == 5) then
							mrk = createMarker(-26.01171875, -1579.4306640625, 9.8263444900513, "checkpoint", 4, 220, 0, 0, 220, hit)
							setMarkerTarget(mrk, 2.013671875, -1472.650390625, 9.8338928222656)
							num = num + 1
							addEventHandler("onMarkerHit", mrk, hitMrkAshes)
							SED(mrk, "ASHP", hit)
							blp = createBlip(-26.01171875, -1579.4306640625, 9.8263444900513, 0, 2, 220, 0, 0, 220, 10, 64000, hit)
							SED(hit, "mrkAsh", mrk)
							SED(hit, "blpAsh", blp)
							SED(hit, "AshStage", num)
						elseif(num == 6) then
							mrk = createMarker(2.013671875, -1472.650390625, 9.8338928222656, "checkpoint", 4, 220, 0, 0, 220, hit)
							setMarkerTarget(mrk, 100.1591796875, -1488.32421875, 9.818060874939)
							num = num + 1
							addEventHandler("onMarkerHit", mrk, hitMrkAshes)
							SED(mrk, "ASHP", hit)
							blp = createBlip(2.013671875, -1472.650390625, 9.8338928222656, 0, 2, 220, 0, 0, 220, 10, 64000, hit)
							SED(hit, "mrkAsh", mrk)
							SED(hit, "blpAsh", blp)
							SED(hit, "AshStage", num)
						elseif(num == 7) then
							mrk = createMarker(100.1591796875, -1488.32421875, 9.818060874939, "checkpoint", 4, 220, 0, 0, 220, hit)
							setMarkerTarget(mrk, 156.9296875, -1366.2216796875, 9.804313659668)
							num = num + 1
							addEventHandler("onMarkerHit", mrk, hitMrkAshes)
							SED(mrk, "ASHP", hit)
							blp = createBlip(100.1591796875, -1488.32421875, 9.818060874939, 0, 2, 220, 0, 0, 220, 10, 64000, hit)
							SED(hit, "mrkAsh", mrk)
							SED(hit, "blpAsh", blp)
							SED(hit, "AshStage", num)
						elseif(num == 8) then
							mrk = createMarker(156.9296875, -1366.2216796875, 9.804313659668, "checkpoint", 4, 220, 0, 0, 220, hit)
							setMarkerTarget(mrk, 183.109375, -1176.0009765625, 9.8046684265137)
							num = num + 1
							addEventHandler("onMarkerHit", mrk, hitMrkAshes)
							SED(mrk, "ASHP", hit)
							blp = createBlip(156.9296875, -1366.2216796875, 9.804313659668, 0, 2, 220, 0, 0, 220, 10, 64000, hit)
							SED(hit, "mrkAsh", mrk)
							SED(hit, "blpAsh", blp)
							SED(hit, "AshStage", num)
						elseif(num == 9) then
							mrk = createMarker(183.109375, -1176.0009765625, 9.8046684265137, "checkpoint", 4, 220, 0, 0, 220, hit)
							setMarkerTarget(mrk, 224.7177734375, -960.7177734375, 9.786046981811)
							num = num + 1
							addEventHandler("onMarkerHit", mrk, hitMrkAshes)
							SED(mrk, "ASHP", hit)
							blp = createBlip(183.109375, -1176.0009765625, 9.8046684265137, 0, 2, 220, 0, 0, 220, 10, 64000, hit)
							SED(hit, "mrkAsh", mrk)
							SED(hit, "blpAsh", blp)
							SED(hit, "AshStage", num)
						elseif(num == 10) then
							mrk = createMarker(224.7177734375, -960.7177734375, 9.7860469818115, "checkpoint", 4, 220, 0, 0, 220, hit)
							setMarkerTarget(mrk, 114.513671875, -910.4482421875, 9.7991123199463)
							num = num + 1
							addEventHandler("onMarkerHit", mrk, hitMrkAshes)
							SED(mrk, "ASHP", hit)
							blp = createBlip(224.7177734375, -960.7177734375, 9.7860469818115, 0, 2, 220, 0, 0, 220, 10, 64000, hit)
							SED(hit, "mrkAsh", mrk)
							SED(hit, "blpAsh", blp)
							SED(hit, "AshStage", num)
						elseif(num == 11) then
							mrk = createMarker(114.513671875, -910.4482421875, 9.7991123199463, "checkpoint", 4, 220, 0, 0, 220, hit)
							setMarkerTarget(mrk, 227.3466796875, -725.79296875, 9.8031854629517)
							num = num + 1
							addEventHandler("onMarkerHit", mrk, hitMrkAshes)
							SED(mrk, "ASHP", hit)
							blp = createBlip(114.513671875, -910.4482421875, 9.7991123199463, 0, 2, 220, 0, 0, 220, 10, 64000, hit)
							SED(hit, "mrkAsh", mrk)
							SED(hit, "blpAsh", blp)
							SED(hit, "AshStage", num)
						elseif(num == 12) then
							mrk = createMarker(227.3466796875, -725.79296875, 9.8031854629517, "checkpoint", 4, 220, 0, 0, 220, hit)
							setMarkerTarget(mrk, 171.8984375, -702.0556640625, 9.8348712921143)
							num = num + 1
							addEventHandler("onMarkerHit", mrk, hitMrkAshes)
							SED(mrk, "ASHP", hit)
							blp = createBlip(227.3466796875, -725.79296875, 9.8031854629517, 0, 2, 220, 0, 0, 220, 10, 64000, hit)
							SED(hit, "mrkAsh", mrk)
							SED(hit, "blpAsh", blp)
							SED(hit, "AshStage", num)
						elseif(num == 13) then
							mrk = createMarker(171.8984375, -702.0556640625, 9.8348712921143, "checkpoint", 4, 220, 0, 0, 220, hit)
							setMarkerTarget(mrk, 119.2353515625, -783.4541015625, 9.9899053573608)
							num = num + 1
							addEventHandler("onMarkerHit", mrk, hitMrkAshes)
							SED(mrk, "ASHP", hit)
							blp = createBlip(171.8984375, -702.0556640625, 9.8348712921143, 0, 2, 220, 0, 0, 220, 10, 64000, hit)
							SED(hit, "mrkAsh", mrk)
							SED(hit, "blpAsh", blp)
							SED(hit, "AshStage", num)
						elseif(num == 14) then
							mrk = createMarker(119.2353515625, -783.4541015625, 9.9899053573608, "checkpoint", 4, 220, 0, 0, 220, hit)
							setMarkerTarget(mrk, 101.0498046875, -748.7294921875, 9.9845876693726)
							num = num + 1
							addEventHandler("onMarkerHit", mrk, hitMrkAshes)
							SED(mrk, "ASHP", hit)
							blp = createBlip(119.2353515625, -783.4541015625, 9.9899053573608, 0, 2, 220, 0, 0, 220, 10, 64000, hit)
							SED(hit, "mrkAsh", mrk)
							SED(hit, "blpAsh", blp)
							SED(hit, "AshStage", num)
						elseif(num == 15) then
							mrk = createMarker(101.0498046875, -748.7294921875, 9.9845876693726, "checkpoint", 4, 220, 0, 0, 220, hit)
							setMarkerTarget(mrk, 101.0498046875, -748.7294921875, 9.9845876693726)
							num = num + 1
							addEventHandler("onMarkerHit", mrk, hitMrkAshes)
							SED(mrk, "ASHP", hit)
							blp = createBlip(101.0498046875, -748.7294921875, 9.9845876693726, 0, 2, 220, 0, 0, 220, 10, 64000, hit)
							SED(hit, "mrkAsh", mrk)
							SED(hit, "blpAsh", blp)
							SED(hit, "AshStage", num)
						elseif(num == 16) then
							local veh = getPedOccupiedVehicle(hit)
							local hp = getElementHealth(veh)
							if(hp > 700) then
								SED(hit, "AutoLicense", 1)
								dbExec(mysql, "UPDATE `Accounts` SET `AutoLicense` = ? WHERE `Name` = ?", 1, getElementData(hit, "Name"))
								addBox("Вы успешно сдали экзамен на вождение\nИ получили водительское удостоверение.", hit, 0, 255, 100)
								checkAsh(hit)
							else
								addBox("Вы провалили практический заезд.\nПожалуйста, повторите попытку сдачи.", hit, 0, 255, 100)
							end
							removeElementData(hit, "AshVeh")
							removeElementData(veh, "AshPlayer")
							removeElementData(hit, "AshStage")
							removeElementData(hit, "ASH")
							local veh = getPedOccupiedVehicle(hit)
							removePedFromVehicle(hit)
							customSpawnVehicle(veh)
							num = nil
						end
					end
				else
				end
			else
			end
		else
		end
	end
end

function Benz1MarkerHit( hit, dim )
	if(isElement(hit) == true) then
		if(getElementType(hit) == "player") then
			local veh = getPedOccupiedVehicle(hit)
			if(getElementData(veh, "Benzovoz") ~= false) then
				if(getPedOccupiedVehicleSeat(hit) == 0) then
					local benz = getElementData(veh, "Benzovoz")
					local biz = getElementData(hit, "BusOwnID")
					if(benz == biz) then
						local mrk = getElementData(hit, "mrkBenz1")
						local blp = getElementData(hit, "blpBenz1")
						removeEventHandler("onMarkerHit", mrk, Benz1MarkerHit)
						destroyElement(mrk)
						destroyElement(blp)
						removeElementData(hit, "mrkBenz1")
						removeElementData(hit, "blpBenz1")
						showPlayerDialog(hit, 48, 2, "Покупка бензина.", "Введите количество бензина, которое Вы хотите купить.\nСтоимость: 1$/кг.\nВместимость Вашего транспорта: 4000 кг.", "Купить", "Отмена")
					end
				end
			end
		end
	end
end

function havelic( theVehicle, seat )
	if(seat == 0) then
		local id = getElementData(source, "ID")
		if(getElementData(theVehicle, "AshCar") ~= false) then
			if(getElementData(theVehicle, "AshCar") > 0) then
				if(getElementData(source, "ASH") ~= false) then
					if(getElementData(theVehicle, "AshPlayer") == false) then
						if(getElementData(source, "AshVeh") == false) then
							SED(theVehicle, "AshPlayer", source)
							SED(source, "AshVeh", theVehicle)
							local mrk = createMarker(105.1875, -811.9677734375, 9.988881111145, "checkpoint", 4, 220, 0, 0, 220, source)
							local blp = createBlip(105.1875, -811.9677734375, 9.988881111145, 0, 2, 220, 0, 0, 220, 10, 64000, source)
							SED(mrk, "ASHP", source)
							SED(source, "mrkAsh", mrk)
							SED(source, "blpAsh", blp)
							addEventHandler("onMarkerHit", mrk, hitMrkAshes)
							SED(source, "AshStage", 0)
							toggleControl ( source, "accelerate", true ) 
							toggleControl ( source, "brake_reverse", true )
							toggleControl ( source, "handbrake", true )
							SED(source, "ToggleVeh", true)
							addBox("Завести/заглушить машину - ctrl\nВключить/выключить фары - alt\nЕсли Вы выйдете из авто более\nЧем на 30 секунд, экзамен будет провален.\nЧтобы включить/выключить радио,\nИспользуйте /radio.\nРучник - SPACE.", source, 0, 100, 255)
						else
							setControlState(source, "enter_exit", true)
							addBox("Это не Ваш транспорт.", source, 255, 0, 0)
						end
					else
						if(getElementData(theVehicle, "AshPlayer") == source) then
							toggleControl ( source, "accelerate", true ) 
							toggleControl ( source, "brake_reverse", true )
							toggleControl ( source, "handbrake", true )
							SED(source, "ToggleVeh", true)
							addBox("Завести/заглушить машину - ctrl\nВключить/выключить фары - alt\nЧтобы включить/выключить радио,\nИспользуйте /radio.\nРучник - SPACE.", source, 0, 100, 255)
							local id = getElementData(source, "ID")
							killTimer(AshTimer[id])
							AshTimer[id] = nil
						else
							setControlState(source, "enter_exit", true)
							addBox("Это не Ваш транспорт.", source, 255, 0, 0)
						end
					end
				else
					setControlState(source, "enter_exit", true)
					addBox("Вы не обучаетесь в автошколе.", source, 255, 0, 0)
				end
			end
		elseif(rentVehTable[id] == theVehicle) then
			if(getElementModel(theVehicle) == 481) then
				toggleControl ( source, "accelerate", true ) 
				toggleControl ( source, "brake_reverse", true )
				toggleControl ( source, "handbrake", true )
				SED(source, "ToggleVeh", true)
				if(isTimer(rentTimer[id])) then
					killTimer(rentTimer[id])
				end
				rentTimer[id] = nil
			end
		elseif(getElementData(theVehicle, "RentVel") ~= false) then
			if(getElementModel(theVehicle) == 481) then
				addBox("Ошибка: Это не Ваш велосипед!.", source, 255, 0, 0)
				setControlState(source, "enter_exit", true)
			end
		elseif(getElementData(theVehicle, "FishID") ~= false) then
			if(getElementData(source, "NWork") == 7) then
				if(getElementData(theVehicle, "FishPlayer") == false) then
					if(getElementData(source, "FishBoat") == false) then
						showPlayerDialog(source, 89, 1, "Аренда рыболовной лодки", "Действительно ли Вы хотите арендовать рыболовную лодку?\nСтоимость аренды - 250$.", "Арендовать", "Отмена")
					else
						addBox("Ошибка:Вы сели в чужую лодку,\nАрендуйте или встаньте за руль своей!", source, 255, 0, 0)
						setControlState(source, "enter_exit", true)
					end
				elseif(getElementData(theVehicle, "FishPlayer") == source) then
					toggleControl ( source, "accelerate", true ) 
				    toggleControl ( source, "brake_reverse", true )
				    toggleControl ( source, "handbrake", true )
				    SED(source, "ToggleVeh", true)
				    addBox("Завести/заглушить лодку - CTRL\nЧтобы включить/выключить радио,\nИспользуйте /radio.", source, 0, 100, 255)
				else
					addBox("Ошибка: Вы не работаете рыболовом!", source, 255, 0, 0)
					setControlState(source, "enter_exit", true)
				end
			else
				addBox("Ошибка: Вы не работаете рыболовом!", source, 255, 0, 0)
				setControlState(source, "enter_exit", true)
			end
		else
			local id = toch(getElementData(source, "ID"))
			if(getElementData(source, "AutoLicense") == 0) then
				if(getElementModel(theVehicle) ~= 481) then
					addBox("Ошибка: У вас нет прав, чтобы сесть за руль.", source, 255, 0, 0)
					setControlState(source, "enter_exit", true)
				else
					toggleControl ( source, "accelerate", true ) 
					toggleControl ( source, "brake_reverse", true )
					toggleControl ( source, "handbrake", true )
					SED(source, "ToggleVeh", true)
				end
			else
				if(getElementData(theVehicle, "BusVehTable") ~= nil and getElementData(theVehicle, "BusVehTable") ~= false) then
					if(getElementData(theVehicle, "BusVehTable") > 0) then
						if(getElementData(source, "PWork") == 1) then
							if(getElementData(theVehicle, "DriverPlayerBus") == false or getElementData(theVehicle, "DriverPlayerBus") == nil) then
								if(getElementData(source, "VehicleDriverBus") == false or getElementData(source, "VehicleDriverBus") == nil) then
									showPlayerDialog(source, 5, 1, "Аренда автобуса", "Действительно ли Вы хотите арендовать автобус?\n \nСтоимость аренды: 100$", "Аренда", "Отмена")
									return true
								else
									addBox("Ошибка: Это не ваш автобус!", source, 255, 0, 0)
									setControlState(source, "enter_exit", true)
								end
							elseif(getElementData(theVehicle, "DriverPlayerBus") ~= source) then
								addBox("Ошибка: Это не ваша машина!", source, 255, 0, 0)
								setControlState(source, "enter_exit", true)
							else
								toggleControl ( source, "accelerate", true ) 
								toggleControl ( source, "brake_reverse", true )
								toggleControl ( source, "handbrake", true )
								SED(source, "ToggleVeh", true)
								addBox("Завести/заглушить машину - ctrl\nВключить/выключить фары - alt\nЧтобы включить/выключить радио,\nИспользуйте /radio.\nРучник - SPACE.", source, 0, 100, 255)
							end
						else
							addBox("Ошибка: Вы не работаете водителем автобуса!", source, 255, 0, 0)
							setControlState(source, "enter_exit", true)
						end
					end
				elseif(getElementData(theVehicle, "TaxiVehTable") ~= nil and getElementData(theVehicle, "TaxiVehTable") ~= false) then
					if(getElementData(theVehicle, "TaxiVehTable") > 0) then
						if(getElementData(source, "PWork") == 2) then
							if(getElementData(theVehicle, "TaxiDriverPlayer") == false) then
								showPlayerDialog(source, 9, 1, "Аренда такси", "Действительно ли Вы хотите арендовать данное транспортное средство?\nСтоимость аренды: 100$. Если Вы закончите работу, транспорт вернется на стоянку.", "Аренда", "Отмена")
							elseif(getElementData(theVehicle, "TaxiDriverPlayer") == source) then
								toggleControl ( source, "accelerate", true ) 
								toggleControl ( source, "brake_reverse", true )
								toggleControl ( source, "handbrake", true )
								SED(source, "ToggleVeh", true)
								addBox("Завести/заглушить машину - ctrl\nВключить/выключить фары - alt\nЧтобы включить/выключить радио,\nИспользуйте /radio.\nРучник - SPACE.", source, 0, 100, 255)
								local id = getElementData(source, "ID")
								if(TaxiTimer[id] ~= nil) then
									killTimer(TaxiTimer[id])
									TaxiTimer[id] = nil
								end
							else
								addBox("Ошибка: Это не Ваше такси!", source, 255, 0, 0)
								setControlState(source, "enter_exit", true)
							end
						else
							addBox("Ошибка: Вы не работаете в такси!", source, 255, 0, 0)
							setControlState(source, "enter_exit", true)
						end
					end
				elseif(getElementData(theVehicle, "MechCar") ~= false) then
					if(getElementData(source, "PWork") == 4) then
						if(getElementData(theVehicle, "MechDriver") == false) then
							showPlayerDialog(source, 134, 1, "Аренда авто", "Действительно ли Вы хотите арендовать данный эвакуатор?\nСтоимость аренды 1200$. Если Вы закончите работу, транспорт вернется на стоянку.", "Аренда", "Отмена")
						elseif(getElementData(theVehicle, "MechDriver") == source) then
							toggleControl ( source, "accelerate", true ) 
							toggleControl ( source, "brake_reverse", true )
							toggleControl ( source, "handbrake", true )
							SED(source, "ToggleVeh", true)
							addBox("Завести/заглушить машину - ctrl\nВключить/выключить фары - alt\nЧтобы включить/выключить радио,\nИспользуйте /radio.\nРучник - SPACE.", source, 0, 100, 255)
						else
							addBox("Ошибка: Это не Ваш эвакуатор!", source, 255, 0, 0)
							setControlState(source, "enter_exit", true)
						end
					else
						addBox("Ошибка: Вы не работаете водителем эвакуатора!", source, 255, 0, 0)
						setControlState(source, "enter_exit", true)
					end
				elseif(getElementData(theVehicle, "PhotoCar") == true) then
					if(getElementData(theVehicle, "PhotoDriver") == source) then
						toggleControl ( source, "accelerate", true ) 
						toggleControl ( source, "brake_reverse", true )
						toggleControl ( source, "handbrake", true )
						SED(source, "ToggleVeh", true)
						addBox("Завести/заглушить машину - ctrl\nВключить/выключить фары - alt\nЧтобы включить/выключить радио,\nИспользуйте /radio.\nРучник - SPACE.", source, 0, 100, 255)
					else
						addBox("Это не Ваше авто!", source, 255, 0, 0)
						setControlState(source, "enter_exit", true)
					end
				elseif(getElementData(theVehicle, "rentCar") == true) then
					if(getElementData(theVehicle, "rentPlayer") == false) then
						if(getElementData(source, "rentVehicle") == false) then
							local id = getElementData(source, "ID")
							SED(source, "rentPrice", getElementData(theVehicle, "rentPrice"))
							showPlayerDialog(source, 105, 1, "Аренда авто", "Действительно ли Вы хотите арендовать данный транспорт?\nСтоимость аренды: " .. getElementData(theVehicle, "rentPrice") .. "$.", "Аренда", "Отмена")
						else
							addBox("Это не Ваше авто!", source, 255, 0, 0)
							setControlState(source, "enter_exit", true)
						end
					elseif(getElementData(theVehicle, "rentPlayer") == source) then
						local id = getElementData(source, "ID")
						toggleControl ( source, "accelerate", true ) 
						toggleControl ( source, "brake_reverse", true )
						toggleControl ( source, "handbrake", true )
						SED(source, "ToggleVeh", true)
						addBox("Завести/заглушить машину - ctrl\nВключить/выключить фары - alt\nЧтобы включить/выключить радио,\nИспользуйте /radio.\nРучник - SPACE.", source, 0, 100, 255)
						if(vehRentTimer[id] ~= nil) then
							killTimer(vehRentTimer[id])
							vehRentTimer[id] = nil
						end
					else
						addBox("Ошибка: Это не Ваша машина!", source, 255, 0, 0)
						setControlState(source, "enter_exit", true)
					end
				elseif(getElementData(theVehicle, "loaderCar") == true) then
					if(getElementData(source, "NWork") == 8) then
						if(getElementData(theVehicle, "loaderPlayer") == false) then
							if(getElementData(source, "loaderCar") == false) then
								showPlayerDialog(source, 145, 1, "Аренда погрузочного кара.", "Действительно ли Вы хотите арендовать погрузчик?\n#00dd44Аренда бесплатна.", "Принять", "Отмена")
							else
								setControlState(source, "enter_exit", true)
								addBox("У вас уже есть\nАрендованный погрузчик", source, 255, 0, 0)
							end
						elseif(getElementData(theVehicle, "loaderPlayer") == source) then
							if(getElementData(source, "loaderCar") == theVehicle) then
								toggleControl ( source, "accelerate", true ) 
								toggleControl ( source, "brake_reverse", true )
								toggleControl ( source, "handbrake", true )
								SED(source, "ToggleVeh", true)
								addBox("Завести/заглушить машину - ctrl\nВключить/выключить фары - alt\nЧтобы включить/выключить радио,\nИспользуйте /radio.\nРучник - SPACE.", source, 0, 100, 255)
							end
						else
							setControlState(source, "enter_exit", true)
							addBox("Это авто уже арендовано\nДругим грузчиком.", source, 255, 0, 0)
						end
					else
						setControlState(source, "enter_exit", true)
						addBox("Вы не устроены работать\nВодителем грузового кара.", source, 255, 0, 0)
					end
				elseif(getElementData(theVehicle, "MailVeh") ~= false) then
					if(getElementData(theVehicle, "MailVeh") > 0) then
						if(getElementData(source, "NWork") == 6) then
							if(getElementData(source, "MailVeh") == false) then
								if(getElementData(theVehicle, "MailPlayer") == false) then
									showPlayerDialog(source, 32, 1, "Аренда мопеда", "Действительно ли Вы хотите арендовать мопед?\nСтоимость аренды: #00dd33Бесплатно.", "Аренда", "Отмена")
								elseif(getElementData(theVehicle, "MailPlayer") ~= source) then
									setControlState(source, "enter_exit", true)
									addBox("Данный транспорт уже арендован.", source, 255, 0, 0)
								else
									toggleControl ( source, "accelerate", true ) 
									toggleControl ( source, "brake_reverse", true )
									toggleControl ( source, "handbrake", true )
									SED(source, "ToggleVeh", true)
									addBox("Завести/заглушить машину - ctrl\nВключить/выключить фары - alt\nЧтобы включить/выключить радио,\nИспользуйте /radio.\nРучник - SPACE.", source, 0, 100, 255)
									local obj = getElementData(source, "PizzaObject")
									if(obj ~= false) then
										exports.bone:detachElementFromBone(obj)
										attachElements(obj, theVehicle, 0, -0.85, 0.35)
									end
								end
							elseif(getElementData(source, "MailVeh") == theVehicle) then
								toggleControl ( source, "accelerate", true ) 
								toggleControl ( source, "brake_reverse", true )
								toggleControl ( source, "handbrake", true )
								SED(source, "ToggleVeh", true)
								addBox("Завести/заглушить машину - ctrl\nВключить/выключить фары - alt\nЧтобы включить/выключить радио,\nИспользуйте /radio.\nРучник - SPACE.", source, 0, 100, 255)
								local obj = getElementData(source, "PizzaObject")
								if(obj ~= false) then
									exports.bone:detachElementFromBone(obj)
									attachElements(obj, theVehicle, 0, -0.85, 0.35)
								end
							else
								addBox("Это не Ваше транспортное средство.", source, 255, 0, 0)
								setControlState(source, "enter_exit", true)
							end
						else
							setControlState(source, "enter_exit", true)
							addBox("Вы не работаете развозчиком пиццы.", source, 255, 0, 0)
						end
					end
				elseif(getElementData(theVehicle, "ArmyCar") ~= false) then
					if(getElementData(source, "Faction") == 9) then
						if(getElementData(theVehicle, "ArmyGruz") == false) then
							toggleControl ( source, "accelerate", true ) 
					    	toggleControl ( source, "brake_reverse", true )
					    	toggleControl ( source, "handbrake", true )
					    	SED(source, "ToggleVeh", true)
					    	addBox("Завести/заглушить машину - ctrl\nВключить/выключить фары - alt\nЧтобы включить/выключить радио,\nИспользуйте /radio.\nРучник - SPACE.", source, 0, 100, 255)
					    else
					    	local id = getElementData(source, "ID")
					    	toggleControl ( source, "accelerate", true ) 
					    	toggleControl ( source, "brake_reverse", true )
					    	toggleControl ( source, "handbrake", true )
					    	SED(source, "ToggleVeh", true)
					    	addBox("Ваша машина загружена на " .. getElementData(theVehicle, "ArmyGruz") .. "/250 мат.\nОтправляйтесь на склад армии.", source, 0, 60, 255)
							addBox("Завести/заглушить машину - ctrl\nВключить/выключить фары - alt\nЧтобы включить/выключить радио,\nИспользуйте /radio.\nРучник - SPACE.", source, 0, 100, 255)
					    end
					else
						setControlState(source, "enter_exit", true)
						addBox("Вы не состоите в армии.", source, 255, 0, 0)
					end
				elseif(getElementData(theVehicle, "Benzovoz") ~= false) then
					local Benz = getElementData(theVehicle, "Benzovoz")
					local biz = getElementData(source, "BusOwnID")
					if(biz == Benz) then
						toggleControl ( source, "accelerate", true ) 
					    toggleControl ( source, "brake_reverse", true )
					    toggleControl ( source, "handbrake", true )
					    SED(source, "ToggleVeh", true)
					    addBox("Завести/заглушить машину - ctrl\nВключить/выключить фары - alt\nЧтобы включить/выключить радио,\nИспользуйте /radio.\nРучник - SPACE.", source, 0, 30, 255)
					    if(getElementData(theVehicle, "BenzKol") == false) then
						    local mrk = createMarker(-1006.5986328125, -1388.630859375, 10.581163406372, "cylinder", 2.4, 220, 0, 0, 220, source)
							SED(source, "mrkBenz1", mrk)
							addEventHandler("onMarkerHit", mrk, Benz1MarkerHit)
							local blp = createBlip(-1006.5986328125, -1388.630859375, 10.581163406372, 0, 2, 220, 0, 0, 220, 3, 64000, source)
							SED(source, "blpBenz1", blp)
						else
							addBox("У Вас в транспорте есть " .. getElementData(theVehicle, "BenzKol") .. " л. топлива\nОтправляйтесь на заправку.\nРучник - SPACE.", source, 0, 60, 255)
							local mrk = ""
							local blp = ""
							if(biz == 1) then
								mrk = createMarker(49.9013671875, -1088.7578125, 10.423915863037, "cylinder", 2.4, 220, 0, 0, 220, source)
								blp = createBlip(49.9013671875, -1088.7578125, 10.423915863037, 0, 2.4, 220, 0, 0, 220, 10, 64000, source)
							elseif(biz == 2) then
								mrk = createMarker(-887.984375, -573.0234375, 11.047963142395, "cylinder", 2.4, 220, 0, 0, 220, source)
								blp = createBlip(-887.984375, -573.0234375, 11.047963142395, 0, 2.4, 220, 0, 0, 220, 10, 64000, source)
							elseif(biz == 3) then
								mrk = createMarker(-1616.8896484375, -736.66015625, 14.824739456177, "cylinder", 2.4, 220, 0, 0, 220, source)
								blp = createBlip(-1616.8896484375, -736.66015625, 14.824739456177, 0, 2.4, 220, 0, 0, 220, 10, 64000, source)
							elseif(biz == 4) then
								mrk = createMarker(55.244140625, 937.4443359375, 10.80312538147, "cylinder", 2.4, 220, 0, 0, 220, source)
								blp = createBlip(55.244140625, 937.4443359375, 10.80312538147, 0, 2.4, 220, 0, 0, 220, 10, 64000, source)
							elseif(biz == 5) then
								mrk = createMarker(-936.8505859375, 1347.3076171875, 11.096260070801, "cylinder", 2.4, 220, 0, 0, 220, source)
								blp = createBlip(-936.8505859375, 1347.3076171875, 11.096260070801, 0, 2.4, 220, 0, 0, 220, 10, 64000, source)
							elseif(biz == 6) then
								mrk = createMarker(-749.603515625, -1379.189453125, 11.343542098999, "cylinder", 2.4, 220, 0, 0, 220, source)
								blp = createBlip(-749.603515625, -1379.189453125, 11.343542098999, 0, 2.4, 220, 0, 0, 220, 10, 64000, source)
							elseif(biz == 7) then
								mrk = createMarker(204.884765625, -506.1201171875, 11.78320980072, "cylinder", 2.4, 220, 0, 0, 220, source)
								blp = createBlip(204.884765625, -506.1201171875, 11.78320980072, 0, 2.4, 220, 0, 0, 220, 10, 64000, source)
							end
							SED(source, "mrkBenz2", mrk)
							SED(source, "blpBenz2", blp)
							addEventHandler("onMarkerHit", mrk, Benz2MarkerHit)
						end
					else
						setControlState(source, "enter_exit", true)
						addBox("Это не Ваш бензовоз.", source, 255, 0, 0)
					end
				elseif(getElementData(theVehicle, "MedicID") ~= false) then
					if(getElementData(source, "Faction") == 7) then
						toggleControl ( source, "accelerate", true ) 
					    toggleControl ( source, "brake_reverse", true )
					    toggleControl ( source, "handbrake", true )
					    SED(source, "ToggleVeh", true)
					    addBox("Завести/заглушить машину - ctrl\nВключить/выключить фары - alt\nЧтобы включить/выключить радио,\nИспользуйте /radio.\nРучник - SPACE.", source, 0, 100, 255)
					else
						setControlState(source, "enter_exit", true)
						addBox("Вы не являетесь работником\nVice City Hospital.", source, 255, 0, 0)
					end
				elseif(getElementData(theVehicle, "VCNCar") ~= false) then
					if(getElementData(source, "Faction") == 6) then
						toggleControl ( source, "accelerate", true ) 
					    toggleControl ( source, "brake_reverse", true )
					    toggleControl ( source, "handbrake", true )
					    SED(source, "ToggleVeh", true)
					    addBox("Завести/заглушить машину - ctrl\nВключить/выключить фары - alt\nЧтобы включить/выключить радио,\nИспользуйте /radio.\nРучник - SPACE.", source, 0, 100, 255)
					else
						setControlState(source, "enter_exit", true)
						addBox("Вы не являетесь работником\nVice City News.", source, 255, 0, 0)
					end
				elseif(getElementData(theVehicle, "PoliceID") ~= false) then
					if(getElementData(source, "Faction") == 8) then
						if(getElementData(source, "Rank") >= 3) then
							toggleControl ( source, "accelerate", true ) 
						    toggleControl ( source, "brake_reverse", true )
						    toggleControl ( source, "handbrake", true )
						    SED(source, "ToggleVeh", true)
						    addBox("Завести/заглушить машину - ctrl\nВключить/выключить фары - alt\nЧтобы включить/выключить радио,\nИспользуйте /radio.\nРучник - SPACE.", source, 0, 100, 255)
						else
							setControlState(source, "enter_exit", true)
							addBox("Сесть в машину за руль можно\nТолько с 3 ранга..", source, 255, 0, 0)
						end
					else
						setControlState(source, "enter_exit", true)
						addBox("Вы не являетесь полицейским.", source, 255, 0, 0)
					end
				elseif(getElementData(theVehicle, "MerID") ~= false) then
					if(getElementData(source, "Faction") == 5) then
						toggleControl ( source, "accelerate", true ) 
					    toggleControl ( source, "brake_reverse", true )
					    toggleControl ( source, "handbrake", true )
					    SED(source, "ToggleVeh", true)
					    addBox("Завести/заглушить машину - ctrl\nВключить/выключить фары - alt\nЧтобы включить/выключить радио,\nИспользуйте /radio.\nРучник - SPACE.", source, 0, 100, 255)
					else
						setControlState(source, "enter_exit", true)
						addBox("Вы не являетесь работником\nVice City Hall.", source, 255, 0, 0)
					end
				elseif(getElementData(theVehicle, "Maf1Car") ~= false) then
					if(getElementData(source, "Faction") == 1) then
						toggleControl ( source, "accelerate", true ) 
					    toggleControl ( source, "brake_reverse", true )
					    toggleControl ( source, "handbrake", true )
					    SED(source, "ToggleVeh", true)
					    addBox("Завести/заглушить машину - ctrl\nВключить/выключить фары - alt\nЧтобы включить/выключить радио,\nИспользуйте /radio.\nРучник - SPACE.", source, 0, 100, 255)
					    if(getElementData(theVehicle, "MafYash") ~= false) then
						    if(getElementData(theVehicle, "MafYash") > 0) then
						    	addBox("В машине " .. getElementData(theVehicle, "MafYash") .. "/5 ящиков с материалами.", source, 0, 255, 60)
						    end
						end
					else
						setControlState(source, "enter_exit", true)
						addBox("Вы не являетесь частью\nLa Cosa Nostra.", source, 255, 0, 0)
					end
				elseif(getElementData(theVehicle, "Maf2Car") ~= false) then
					if(getElementData(source, "Faction") == 2) then
						toggleControl ( source, "accelerate", true ) 
					    toggleControl ( source, "brake_reverse", true )
					    toggleControl ( source, "handbrake", true )
					    SED(source, "ToggleVeh", true)
					    addBox("Завести/заглушить машину - ctrl\nВключить/выключить фары - alt\nЧтобы включить/выключить радио,\nИспользуйте /radio.\nРучник - SPACE.", source, 0, 100, 255)
					    if(getElementData(theVehicle, "MafYash") ~= false) then
						    if(getElementData(theVehicle, "MafYash") > 0) then
						    	addBox("В машине " .. getElementData(theVehicle, "MafYash") .. "/5 ящиков с материалами.", source, 0, 255, 60)
						    end
						end
					else
						setControlState(source, "enter_exit", true)
						addBox("Вы не являетесь частью\nColumbian Mafia.", source, 255, 0, 0)
					end
				elseif(getElementData(theVehicle, "Maf3Car") ~= false) then
					if(getElementData(source, "Faction") == 3) then
						toggleControl ( source, "accelerate", true ) 
					    toggleControl ( source, "brake_reverse", true )
					    toggleControl ( source, "handbrake", true )
					    SED(source, "ToggleVeh", true)
					    addBox("Завести/заглушить машину - ctrl\nВключить/выключить фары - alt\nЧтобы включить/выключить радио,\nИспользуйте /radio.\nРучник - SPACE.", source, 0, 100, 255)
					    if(getElementData(theVehicle, "MafYash") ~= false) then
						    if(getElementData(theVehicle, "MafYash") > 0) then
						    	addBox("В машине " .. getElementData(theVehicle, "MafYash") .. "/5 ящиков с материалами.", source, 0, 255, 60)
						    end
						end
					else
						setControlState(source, "enter_exit", true)
						addBox("Вы не являетесь частью\nMexican Cartel.", source, 255, 0, 0)
					end
				elseif(getElementData(theVehicle, "Maf4Car") ~= false) then
					if(getElementData(source, "Faction") == 4) then
						toggleControl ( source, "accelerate", true ) 
					    toggleControl ( source, "brake_reverse", true )
					    toggleControl ( source, "handbrake", true )
					    SED(source, "ToggleVeh", true)
					    addBox("Завести/заглушить машину - ctrl\nВключить/выключить фары - alt\nЧтобы включить/выключить радио,\nИспользуйте /radio.\nРучник - SPACE.", source, 0, 100, 255)
					    if(getElementData(theVehicle, "MafYash") ~= false) then
						    if(getElementData(theVehicle, "MafYash") > 0) then
						    	addBox("В машине " .. getElementData(theVehicle, "MafYash") .. "/5 ящиков с материалами.", source, 0, 255, 60)
						    end
						end
					else
						setControlState(source, "enter_exit", true)
						addBox("Вы не являетесь частью\nTriada.", source, 255, 0, 0)
					end
				elseif(getElementData(theVehicle, "ArmyVeh") ~= false) then
					if(getElementData(source, "Faction") == 9) then
						toggleControl ( source, "accelerate", true ) 
					    toggleControl ( source, "brake_reverse", true )
					    toggleControl ( source, "handbrake", true )
					    SED(source, "ToggleVeh", true)
					    addBox("Завести/заглушить машину - ctrl\nВключить/выключить фары - alt\nЧтобы включить/выключить радио,\nИспользуйте /radio.\nРучник - SPACE.", source, 0, 100, 255)
					else
						setControlState(source, "enter_exit", true)
						addBox("Вы не работаете в\nVice City Army.", source, 255, 0, 0)
					end
				elseif(getElementData(theVehicle, "CourierVehID") ~= nil and getElementData(theVehicle, "CourierVehID") ~= false) then
					if(getElementData(theVehicle, "CourierVehID") > 0) then
						if(getElementData(source, "PWork") == 3) then
							if(getElementData(theVehicle, "CourierPlayer") == source) then
								toggleControl ( source, "accelerate", true ) 
							    toggleControl ( source, "brake_reverse", true )
							    toggleControl ( source, "handbrake", true )
							    SED(source, "ToggleVeh", true)
							    addBox("Завести/заглушить машину - ctrl\nВключить/выключить фары - alt\nЧтобы включить/выключить радио,\nИспользуйте /radio.\nРучник - SPACE.", source, 0, 100, 255)
							    local id = getElementData(source, "ID")
							    if(TimerCourier[id] ~= nil) then
								    killTimer(TimerCourier[id])
								    TimerCourier[id] = nil
								end
							else
								if(getElementData(theVehicle, "CourierPlayer") == false or getElementData(theVehicle, "CourierPlayer") == nil) then
									showPlayerDialog(source, 22, 1, "Аренда грузового транспортного средства.", "Действительно ли Вы хотите арендовать данное т/c?\nСтоимость аренды: 1000$", "Арендовать", "Отмена")
								else
									addBox("Ошибка: Это не ваша машина!", source, 255, 0, 0)
									setControlState(source, "enter_exit", true)
								end
							end
						else
							setControlState(source, "enter_exit", true)
							addBox("Ошибка: Вы не работаете развозчиком продуктов\nИ не можете сесть в этот транспорт!", source, 255, 0, 0)
						end
					end
				elseif(getElementData(theVehicle, "PrivatePlayer") ~= false) then
					if(toch(getElementData(theVehicle, "PrivatePlayer")) == toch(getElementData(source, "ID"))) then
						addBox("Завести/заглушить машину - ctrl\nВключить/выключить фары - alt\nЧтобы включить/выключить радио,\nИспользуйте /radio.\nРучник - SPACE.", source, 0, 100, 255)
						toggleControl ( source, "accelerate", true ) 
					    toggleControl ( source, "brake_reverse", true )
					    toggleControl ( source, "handbrake", true )
					    SED(source, "ToggleVeh", true)
					    if(getElementInterior(theVehicle) == 8) then
					    	if(getElementModel(theVehicle) ~= 481) then
						    	local house = getElementData(source, "House")
						    	local x, y, z = HouseTable[house]["vx"], HouseTable[house]["vy"], HouseTable[house]["vz"]
						    	local vz = HouseTable[house]["vrz"]
						    	SET(theVehicle, 0)
						    	SIDP(theVehicle, 0)
						    	SEP(theVehicle, x, y, z)
						    	setElementRotation(theVehicle, 0, 0, vz)
						    	for i,n in pairs(getVehicleOccupants(theVehicle)) do
						    		SET(n, 0)
							    	SIDP(n, 0)
							    	setCameraTarget(n, n)
							    	removeElementData(n, "gde")
						    	end
						    else
						    	local house = getElementData(source, "House")
						    	local x, y, z = HouseTable[house]["vx"], HouseTable[house]["vy"], HouseTable[house]["vz"] + 8.2
						    	local vz = HouseTable[house]["vrz"]
						    	removePedFromVehicle(source)
						    	SET(theVehicle, 0)
						    	SIDP(theVehicle, 0)
						    	SEP(theVehicle, x, y, z)
						    	setElementVelocity(theVehicle, 0, 0, 0)
						    	setElementRotation(theVehicle, 0, 0, 0)
						    	warpPedIntoVehicle(source, theVehicle)
						    	for i,n in pairs(getVehicleOccupants(theVehicle)) do
						    		SET(n, 0)
							    	SIDP(n, 0)
							    	setCameraTarget(n, n)
							    	removeElementData(n, "gde")
						    	end
						    end
					    end
					else
						addBox("Ошибка: Это не ваша машина!", source, 255, 0, 0)
						setControlState(source, "enter_exit", true)
					end
				else
					local model = getElementModel(theVehicle)
					toggleControl ( source, "accelerate", true ) 
				    toggleControl ( source, "brake_reverse", true )
				    toggleControl ( source, "handbrake", true )
				    SED(source, "ToggleVeh", true)
				    if(model ~= 481) then
					    addBox("Завести/заглушить машину - ctrl\nВключить/выключить фары - alt\nЧтобы включить/выключить радио,\nИспользуйте /radio.\nРучник - SPACE.", source, 0, 100, 255)
					end
				end
			end
		end
	end
	if(seat == 0) then
		if(getElementModel(theVehicle) ~= 481) then
			setVehicleEngineState(theVehicle, getElementData(theVehicle, "Engine"))
		end
	end
end

function esheBlya(  )
	for i,n in pairs(CourierVehTable) do
		if(getElementData(n, "CourierPlayer") ~= false) then
			local player = getElementData(n, "CourierPlayer")
			if(isElement(player) == false) then
				removeElementData(n, "CourierPlayer")
				customSpawnVehicle(n)
			end
		end
	end
end

setTimer(esheBlya, 60 * 1000, 0)

function clearEnter( player, seat, jacked )
	toggleControl ( player, "accelerate", false ) 
    toggleControl ( player, "brake_reverse", false )
    toggleControl ( player, "handbrake", false )
	setControlState(player, "enter_exit", false)
	if(seat == 0) then
		triggerClientEvent(player, "FuelUpdate", player, math.round(getElementData(source, "Fuel")))
	end
end

function playerInChat( message, type )
	if(getElementData(source, "Login") ~= false) then
		if(getElementData(source, "Mute") == 0) then
			if type == 1 then
				if(getElementData(source, "Login") == true) then
					local mess = message
					cancelEvent()
					local name = getElementData(source, "Name")
					mess = string.gsub(message, "%s+", "")
					local stht = string.find(mess, "#")
					if(stht == nil) then
						if(string.len(mess) > 0) then
							for i, n in pairs(IDS) do
								if(getElementData(IDS[i], "Login") == true) then
									local x1, y1, z1 = getElementPosition(source)
									if(getElementDimension(source) == getElementDimension(n)) then
										if(getElementInterior(source) == getElementInterior(n)) then
											msgforcamera(name .. " [" .. getElementData(source, "ID") .. "] " .. message, n, 232, 183, 227, x1, y1, z1, 20)
										end
									end
								end
							end
						else
							addBox("Ошибка: Вы не ввели сообщение.", source, 255, 0, 0)
						end
					end
				end
			else
				if(getElementData(source, "LiveVCN") ~= false) then
					cancelEvent()
					local name = getElementData(source, "Name")
					local stht = string.find(message, "#")
					if(stht == nil) then
						for _, player in pairs(IDS) do
							if(getElementData(player, "Login") == true) then
								sendClientMessage("[VCN] " .. name .. ": " .. message, player, 0, 255, 60, false)
							end
						end
					end
				else
					cancelEvent()
					local x1, y1, z1 = getElementPosition(source)
					local name = getElementData(source, "Name")
					local stht = string.find(message, "#")
					if(stht == nil) then
						if(getElementData(source, "AcceptedCall") == true) then
							if(getElementData(source, "PhonePlayer") ~= false) then
								local secPlayer = getElementData(source, "PhonePlayer")
								if(secPlayer ~= false) then
									if(isElement(secPlayer) == true) then
										if(getElementData(secPlayer, "PhonePlayer") ~= false) then
											local thePlayer = getElementData(secPlayer, "PhonePlayer")
											if(isElement(thePlayer) == true) then
												if(thePlayer == source) then
													sendClientMessage("[ТЕЛ] " .. getElementData(source, "Name") .. " [" .. getElementData(source, "ID") .. "]: " .. message, secPlayer, 255, 255, 0)
													for _, player in pairs(IDS) do
														if(getElementDimension(source) == getElementDimension(player)) then
															if(getElementInterior(source) == getElementInterior(player)) then
																msgforcamera( "[По телефону] " .. name .. " [" .. getElementData(source, "ID") .. "]: " .. message, player, 255, 255, 255, x1, y1, z1)
															end
														end
													end
												end
											end
										end
									end
								end
							end
						else
							mess = string.gsub(message, "%s+", "")
							if(string.len(mess) > 0) then
								local name = getElementData(source, "Name")
								local x1, y1, z1 = getElementPosition(source)
								if(getElementData(source, "NWork") == 0) then
									if(getElementData(source, "Tazered") == false) then
										if(getPedOccupiedVehicle(source) == false) then
											if(isElement(source) == true) then
												if(getElementData(source, "AntiSbiv") == false) then
													setPedAnimation(source, "PED", "IDLE_chat", 1, true, true, true, true)
													setTimer(function ( thePlayer )
														if(isElement(thePlayer) == true) then
															setPedAnimation(thePlayer, "BSKTBALL", "BBALL_idle_O", 100, false)
														end
													end, 4000, 1, source) 
												end
											end
										end
									end
								end
								local str = ""
								local cold = "#ffffff"
								local id = getElementData(source, "ID")
								local color = ColorTable[id]
								if(color > 0) then
									if(color == 1) then
										r, g, b, a = 170, 102, 204, 220
									elseif(color == 2) then
										r, g, b, a = 220, 120, 20, 220
									elseif(color == 3) then
										r, g, b, a = 0, 160, 30, 220
									elseif(color == 4) then
										r, g, b, a = 40, 10, 0, 220
									elseif(color == 5) then
										r, g, b, a = 0, 220, 220, 220
									elseif(color == 6) then
										r, g, b, a = 250, 250, 0, 220
									elseif(color == 7) then
										r, g, b, a = 240, 0, 60, 220
									elseif(color == 8) then
										r, g, b, a = 0, 60, 255, 220
									elseif(color == 9) then
										r, g, b, a = 150, 75, 0, 220
									else
										r, g, b, a = 220, 220, 220, 90
									end
									local r = string.format("%x", r)
									if(string.len(r) == 1) then
										r = "0" .. r
									end
									local g = string.format("%x", g)
									if(string.len(g) == 1) then
										g = "0" .. g
									end
									local b = string.format("%x", b)
									if(string.len(b) == 1) then
										b = "0" .. b
									end
									cold = "#" .. r .. g .. b
								end
								if(getElementData(source, "Admin") > 0) then
									if(getElementData(source, "AdmChat") == true) then
										str = cold .. "[АДМ] " .. name .. " [" .. getElementData(source, "ID") .. "]#ffffff: " .. message
									else
										str = cold .. name .. " [" .. getElementData(source, "ID") .. "]#ffffff: " .. message
									end
								else
									str = cold .. name .. " [" .. getElementData(source, "ID") .. "]#ffffff: " .. message
								end
								attach3dtexttoplayer(message, source, 0, 0, 0.25)
								for _, player in pairs(IDS) do
									if(getElementDimension(source) == getElementDimension(player)) then
										if(getElementInterior(source) == getElementInterior(player)) then
											msgforcamera( str, player, 255, 255, 255, x1, y1, z1, 20, true)
										end
									end
								end
							else
								addBox("Ошибка: Вы не ввели сообщение.", source, 255, 0, 0)
							end
						end
					end
				end
			end
		else
			cancelEvent()
			local time = getElementData(source, "Mute")
			attach3dtexttoplayer("Пытается что-то сказать", source, 0, 0, 0.125)
			addBox("Вы не можете говорить ещё " .. time .. " сек.", source, 255, 0, 0)
		end
	else
		cancelEvent()
	end
end

function startCourierWork( )
	addBox("Вы устроились на работу\nРазвозчиком продуктов!", client, 0, 60, 255)
	SED(client, "PWork", 3)
end

function onVehicleDeath(  )
	if(getElementData(source, "PCar") ~= false) then
		customDestroyVehicle(source)
	else
		if(getElementData(source, "rentCar") ~= false) then
			local player = getElementData(source, "rentPlayer")
			if(isElement(player) == true) then
				addBox("Ваша арендованная машина уничтожена.", player, 255, 0, 0)
			end
			removeElementData(source, "rentPlayer")
			removeElementData(player, "rentVehicle")
		end
		if(getElementData(source, "CourierVehID") ~= nil and getElementData(source, "CourierVehID") ~= false) then
			setTimer(customSpawnVehicle, 3000, 1, source)
		end
		if(getElementData(source, "FishBoat") ~= false) then
			local player = getElementData(source, "FishPlayer")
			if(player ~= false) then
				removeElementData(source, "FishPlayer")
				removeElementData(player, "FishBoat")
				triggerClientEvent(player, "clearFish", player)
			end
			removeElementData(source, "FishBoat")
		end
		if(getElementData(source, "MechDriver") ~= false) then
			local player = getElementData(source, "MechDriver")
			local zprt = getElementData(player, "Zprt")
            if(zprt ~= false) then
	            removeElementData(player, "Zprt")
	        end
	        removeElementData(player, "MechStage")
			local veh = getElementData(player, "MechVeh")
			if(veh ~= false) then
				customSpawnVehicle(veh)
				removeElementData(veh, "MechDriver")
				removeElementData(player, "MechVeh")
			end
			local mrk = getElementData(player, "mrkMech")
			if(mrk ~= false) then
				removeElementData(player, "mrkMech")
				destroyElement(mrk)
			end
			local secveh = getElementData(player, "SVM")
			if(secveh ~= false) then
				local id = toch(getElementData(secveh, "Iter"))
				ServerPerem["MechCars"][id]["veh"] = nil
				customDestroyVehicle(secveh)
				removeElementData(player, "SVM")
			end
		end
		if(getElementData(source, "CourierVehID") ~= false and getElementData(source, "CourierPlayer") ~= false) then
			local player = getElementData(source, "CourierPlayer")
			local veh = source
			removeElementData(veh, "CourierPlayer")
			if(isElement(player) == true) then
				removeElementData(player, "CourierVehicle")
				addBox("Ваш транспорт уничтожен.\nОтправляйтесь за новым.", player, 255, 0, 0)
				if(getElementData(player, "mrkCourierEnd") ~= false) then
					local mrk = getElementData(player, "mrkCourierEnd")
					local blp = getElementData(player, "blpCourierEnd")
					removeEventHandler("onMarkerHit", mrk, mrkCourEnd)
					destroyElement(blp)
					destroyElement(mrk)
					removeElementData(player, "mrkCourierEnd")
					removeElementData(player, "blpCourierEnd")
					removeElementData(player, "Gruz")
					removeElementData(player, "Coef")
				end
				if(getElementData(player, "mrkCourierStart") ~= false) then
					local mrk = getElementData(player, "mrkCourierStart")
					local blp = getElementData(player, "blpCourierStart")
					removeEventHandler("onMarkerHit", mrk, startCourierWork)
					destroyElement(mrk)
					destroyElement(blp)
					removeElementData(player, "mrkCourierStart")
					removeElementData(player, "blpCourierStart")
				end
			end
		end
		if(getElementData(source, "BusVehTable") ~= false) then
			if(getElementData(source, "DriverPlayerBus") ~= false) then
				local pl = getElementData(source, "DriverPlayerBus")
				local mrk = getElementData(pl, "mrkBus")
				local blp = getElementData(pl, "blpBus")
				if(isElement(mrk) == true) then
					destroyElement(mrk)
				end
				if(isElement(blp) == true) then
					destroyElement(blp)
				end
				removeElementData(pl, "mrkBus")
				removeElementData(pl, "blpBus")
				removeElementData(pl, "Stage")
				removeElementData(pl, "March")
				addBox("Вы сломали автобус и заплатили штраф 1000$", pl, 255, 0, 0)
				setElementMoney(pl, -1000, "Поломка автобуса")
				removeElementData(pl, "VehicleDriverBus")
				removeElementData(source, "DriverPlayerBus")
			end
		end
		if(getElementData(source, "loaderCar") ~= false) then
			setTimer(customSpawnVehicle, 3000, 1, source)
			local player = getElementData(source, "loaderPlayer")
			if(player ~= false) then
				exports.loaderWork:clearLoaderCar(player)
			end
		end
		if(getElementData(source, "TaxiVehTable") ~= false) then
			if(getElementData(source, "TaxiDriverPlayer") ~= nil and getElementData(source, "TaxiDriverPlayer") ~= false) then
				local pl = getElementData(source, "TaxiDriverPlayer")
				setElementMoney(pl, -800, "Поломка такси")
				removeElementData(pl, "TaxiVehicle")
				removeElementData(source, "TaxiDriverPlayer")
			end
		end
		if(getElementData(source, "MailVeh") ~= false) then
			if(getElementData(source, "MailPlayer") ~= false) then
				local thePlayer = getElementData(source, "MailPlayer")
				removeElementData(source, "MailPlayer")
				removeElementData(thePlayer, "MailVeh")
				if(getElementData(thePlayer, "blpMail") ~= false) then
					local blp = getElementData(thePlayer, "blpMail")
					local mrk = getElementData(thePlayer, "mrkMail")
					local aff = getEventHandlers("onMarkerHit", mrk)
					destroyElement(mrk)
					destroyElement(blp)
					removeElementData(thePlayer, "mrkMail")
					removeElementData(thePlayer, "blpMail")
				end
				local obj = getElementData(thePlayer, "PizzaObject")
				if(obj ~= false) then
					if(isElement(obj)) then
						exports.bone:detachElementFromBone(obj)
						destroyElement(obj)
						removeElementData(theVehicle, "PizzaObject")
					end
				end
			end
		end
		if(getElementData(source, "AshCar") ~= false) then
			if(getElementData(source, "AshPlayer") ~= false) then
				local plr = getElementData(source, "AshPlayer")
				removeElementData(plr, "AshVeh")
				removeElementData(source, "AshPlayer")
				if(isElement(plr) == true) then
					removeElementData(plr, "ASH")
					local mrk = getElementData(plr, "mrkAsh")
					local blp = getElementData(plr, "blpAsh")
					destroyElement(mrk)
					destroyElement(blp)
					removeElementData(plr, "mrkAsh")
					removeElementData(plr, "blpAsh")
					addBox("Вы провалили тест на вождение!", plr, 255, 0, 0)
				end
			end
			setElementHealth(source, 1000)
		end
		for i=1,4 do
			if(getElementData(source, "Maf"..i.."Car") ~= false) then
				if(getElementData(source, "MafYash") ~= false) then
					if(getElementData(source, "MafYash") > 0) then
						removeElementData(source, "MafYash")
					end
				end
				break
			end
		end
	end
	if(getElementData(source, "admuha") == false) then
		if(getElementData(source, "PrivatePlayer") ~= false) then
			setTimer(customSpawnVehicle, 15000, 1, source, true)
		else
			setTimer(customSpawnVehicle, 15000, 1, source)
		end
	else
		customDestroyVehicle(source)
	end
end

function hitMrkMail( hit, dim )
	if(isElement(hit) == true) then
		if(getElementType(hit) == "player") then
			if(getElementData(hit, "mrkMail") ~= false) then
				if(getElementData(source, "Player") == hit) then
					if(getPedOccupiedVehicle(hit) == false) then
						setPedAnimation(hit, "carry", "crry_prtial", 1, true, true, false, true)
						local obj = createObject(7510, 0, 0, 0)
						exports.bone:attachElementToBone(obj, hit, 12,0.03,0.0,0.12,0,90,70)
						SED(hit, "PizzaObject", obj)
						removeEventHandler("onMarkerHit", source, hitMrkMail)
						destroyElement(source)
						local blp = getElementData(hit, "blpMail")
						destroyElement(blp)
						removeElementData(hit, "mrkMail")
						removeElementData(hit, "blpMail")
						addBox("Направляйтесь к стойке с едой,\nЧтобы доставить пиццу.\n(Маркер помечен на карте)", hit, 0, 100, 255)
						local tablo = exports.freeEat:getRandomFreeEatCheckpoint()
						local mrk = createMarker(tablo[1], tablo[2], tablo[3] - 1, "cylinder", 4, 220, 0, 0, 220, hit)
						SED(mrk, "Player", hit)
						local blp = createBlip(tablo[1], tablo[2], tablo[3] - 1, 0, 2, 220, 0, 0, 220, 10, 64000, hit)
						SED(hit, "blpMail", blp)
						SED(hit, "mrkMail", mrk)
						SED(mrk, "Player", hit)
						addEventHandler("onMarkerHit", mrk, hitMrkMails)
					else
						addBox("Выйдите из транспорта, чтобы забрать пиццу.", hit, 255, 0, 0)
					end
				end
			end
		end
	end
end

function hitMrkMails( hit, dim )
	if(isElement(hit) == true) then
		if(getElementType(hit) == "player") then
			if(getElementData(hit, "mrkMail") == source) then
				local veh = getPedOccupiedVehicle(hit)
				if(veh ~= nil and veh ~= false) then
					if(getElementData(hit, "MailVeh") == getPedOccupiedVehicle(hit)) then
						--[=[if(getPedOccupiedVehicleSeat(hit) == 0) then
							removeEventHandler("onMarkerHit", source, hitMrkMails) 
							destroyElement(source)
							local blp = getElementData(hit, "blpMail")
							if(blp ~= false and blp ~= true) then
								destroyElement(blp)
							end
							removeElementData(hit, "blpMail")
							removeElementData(hit, "mrkMail")
							local bonus = 0
							local vip = getElementData(hit, "VipType")
							if(vip == 2) then
								bonus = math.floor(40 * 0.15)
							elseif(vip == 3) then
								bonus = math.floor(40 * 0.25)
							elseif(vip == 4) then
								bonus = math.floor(40 * 0.35)
							end
							if(vip > 1) then
								addBox("Вы успешно доставили посылку\nИ заработали " .. 40 * coefmoney .. "$.\nБонус: " .. bonus * coefmoney .. "$.", hit, 0, 255, 100)
							else
								addBox("Вы успешно доставили посылку\nИ заработали " .. 40 * coefmoney .. "$.", hit, 0, 255, 100)
							end
							setElementMoney(hit, (40 + bonus) * coefmoney, "Доставка посылки.")
							local mrkMail = createMarker(309.44921875, -299.9111328125, 10.922214508057, "cylinder", 4.0, 220, 0, 0, 220, hit)
							local blpMail = createBlip(309.44921875, -299.9111328125, 10.922214508057, 0, 2, 220, 0, 0, 220, 10, 64000, hit)
							addEventHandler("onMarkerHit", mrkMail, hitMrkMail)
							if(getElementData(hit, "Pochta") ~= false) then
								SED(hit, "Pochta", getElementData(hit, "Pochta") + 1)
							else
								SED(hit, "Pochta", 1)
							end
							SED(hit, "mrkMail", mrkMail)
							SED(hit, "blpMail", blpMail)
							SED(mrkMail, "Player", hit)
							addBox("Вам необходимо вернуться на склад\nИ забрать новую посылку.\n(На карте создан маркер)", hit, 0, 100, 255)
						end]=]
						addBox("Слезьте с мопеда, чтобы отдать пиццу!", hit, 255, 0, 0)
					end
				else
					removeEventHandler("onMarkerHit", source, hitMrkMails) 
					destroyElement(source)
					local blp = getElementData(hit, "blpMail")
					if(blp ~= false and blp ~= true) then
						destroyElement(blp)
					end
					removeElementData(hit, "blpMail")
					removeElementData(hit, "mrkMail")
					if(getElementData(hit, "Pochta") ~= false) then
						SED(hit, "Pochta", getElementData(hit, "Pochta") + 1)
					else
						SED(hit, "Pochta", 1)
					end
					local bonus = 0
					local vip = getElementData(hit, "VipType")
					if(vip == 2) then
						bonus = math.floor(40 * 0.15)
					elseif(vip == 3) then
						bonus = math.floor(40 * 0.25)
					elseif(vip == 4) then
						bonus = math.floor(40 * 0.35)
					end
					if(vip > 1) then
						addBox("Вы успешно доставили пиццу\nИ заработали " .. 40 * coefmoney.. "$.\nБонус: " .. bonus * coefmoney .. "$.", hit, 0, 255, 100)
					else
						addBox("Вы успешно доставили пиццу\nИ заработали " .. 40 * coefmoney.. "$.", hit, 0, 255, 100)
					end
					setElementMoney(hit, (40 + bonus) * coefmoney, "Доставка посылки.")
					local mrkMail = createMarker(309.44921875, -299.9111328125, 10.922214508057, "cylinder", 4.0, 220, 0, 0, 220, hit)
					local blpMail = createBlip(309.44921875, -299.9111328125, 10.922214508057, 0, 2, 220, 0, 0, 220, 10, 64000, hit)
					SED(mrkMail, "Player", hit)
					addEventHandler("onMarkerHit", mrkMail, hitMrkMail)
					SED(hit, "mrkMail", mrkMail)
					SED(hit, "blpMail", blpMail)
					addBox("Вам необходимо подъехать к складу.\n(На карте создан маркер)", hit, 0, 60, 255)
					local obj = getElementData(hit, "PizzaObject")
					if(obj ~= false) then
						if(isElement(obj)) then
							exports.bone:detachElementFromBone(obj)
							destroyElement(obj)
							removeElementData(hit, "PizzaObject")
						end
					end
					setPedAnimation(hit, "BSKTBALL", "BBALL_idle_O", 1, false)
				end
			end
		end
	end
end


function hitCourEnd( hit, dim )
	if(getElementType(hit) == "player") then
		if(getElementData(hit, "mrkCour") ~= false) then
			if(getElementData(hit, "mrkCour") == source) then
				if(getElementData(hit, "CourierVehicle") == getPedOccupiedVehicle(hit)) then
					if(getPedOccupiedVehicleSeat(hit) == 0) then
						local biz = toch(getElementData(hit, "courBiz"))
						local price = OrderBiz[biz]["Price"]
						local Products = toch(getElementData(hit, "courProd"))
						price = price - Products * 1
						setElementMoney(hit, price, "Курьер")
						BusinessTable[biz]["Products"] = BusinessTable[biz]["Products"] + Products
						OrderBiz[biz]["Products"] = 0
						OrderBiz[biz]["Price"] = 0
						OrderBiz[biz]["Courier"] = nil
						dbExec(mysql, "UPDATE `Business` SET `Products` = ?, `OrderProducts` = ?, `OrderPrice` = ? WHERE `ID` = ?", BusinessTable[biz]["Products"], 0, 0, biz)
						addBox("Вы успешно доставили груз и получили " .. price .. "$.", hit, 0, 100, 255)
						local mrk = getElementData(hit, "mrkCour")
						local blp = getElementData(hit, "blpCour")
						removeEventHandler("onMarkerHit", mrk, hitCourEnd)
						destroyElement(mrk)
						destroyElement(blp)
						removeElementData(hit, "mrkCour")
						removeElementData(hit, "blpCour")
						addBox("Отправляйтесь на склад, чтобы забрать груз.\n(Отмечено на мини-карте)", hit, 0, 60, 255)
						local mrk = createMarker(-1006.375, -1385.2783203125, 10.563765525818, "cylinder", 2.5, 220, 0, 0, 220, hit)
						local blp = createBlip(-1006.375, -1385.2783203125, 9.563765525818, 0, 2, 220, 0, 0, 220, 0, 65535, hit)
						SED(hit, "mrkCourierStart", mrk)
						SED(hit, "blpCourierStart", blp)
						SED(mrk, "courP", hit)
						addEventHandler("onMarkerHit", getElementData(hit, "mrkCourierStart"), courierStart)
					end
				end
			end
		end
	end
end

function courierStart( hit, dim )
	local types = getElementType(hit)
	if(types == "player") then
		if(hit ~= false and hit ~= nil) then
			if(getPedOccupiedVehicle(hit) == getElementData(hit, "CourierVehicle")) then
				if(getPedOccupiedVehicleSeat(hit) == 0) then
					if(getElementData(hit, "mrkCourierStart") == source) then
						local mrk = getElementData(hit, "mrkCourierStart")
						local blp = getElementData(hit, "blpCourierStart")
						removeEventHandler("onMarkerHit", mrk, courierStart)
						destroyElement(mrk)
						destroyElement(blp)
						removeElementData(hit, "mrkCourierStart")
						removeElementData(hit, "blpCourierStart")
						local inputtext = 3000
						local biztog = false
						local biz = 0
						local bizzak = {}
						local iter = 0
						for i, n in pairs(OrderBiz) do
							if(OrderBiz[i]["Products"] > 0) then
								if(OrderBiz[i]["OrderCourier"] == nil) then
									biztog = true
									iter = iter + 1
									bizzak[iter] = {}
									bizzak[iter]["ID"] = i
									bizzak[iter]["Products"] = OrderBiz[i]["Products"]
									bizzak[iter]["Price"] = OrderBiz[i]["Price"]
									break
								end
							end
						end
						if(biztog == false) then
							SED(hit, "Gruz", inputtext)
							local mrkCourierEnd = 0
							local blpCourierEnd = 0
							local randomPos = math.random(1, 3)
							if(randomPos == 1) then
								mrkCourierEnd = createMarker(-183.0234375, -969.505859375, 9.423469543457, "cylinder", 2.5, 220, 0, 0, 220, hit)
								blpCourierEnd = createBlip(-183.0234375, -969.505859375, 9.423469543457, 0, 2, 220, 0, 0, 220, 0, 65535, hit)
								addBox("Заказ оформлен.\nВам необходимо отвезти груз в больницу!\nОплата: " .. randomPos * 300 * coefmoney .. "$.", hit, 0, 255, 100)
								SED(hit, "Coef", 1)
								SED(hit, "Oppa", true)
								local id = getElementData(hit, "ID")
								timura[id] = setTimer(function ( ded, neded )
									if(isElement(ded)) then
										removeElementData(ded, "Oppa")
									end
									timura[id] = nil
								end, 38000, 1, hit, id)
							elseif(randomPos == 2) then
								mrkCourierEnd = createMarker(-1558.248046875, 1270.552734375, 7.6996593475342, "cylinder", 2.5, 220, 0, 0, 220, hit)
								blpCourierEnd = createBlip(-1558.248046875, 1270.552734375, 7.6996593475342, 0, 2, 220, 0, 0, 220, 0, 65535, hit)
								addBox("Заказ оформлен.\nВам необходимо отвезти груз на стадион!\nОплата: " .. randomPos * 300 * coefmoney .. "$.", hit, 0, 255, 100)
								SED(hit, "Coef", 2)
								SED(hit, "Oppa", true)
								local id = getElementData(hit, "ID")
								timura[id] = setTimer(function ( ded, neded )
									if(isElement(ded)) then
										removeElementData(ded, "Oppa")
									end
									timura[id] = nil
								end, 38000, 1, hit, id)
							elseif(randomPos == 3) then
								mrkCourierEnd = createMarker(373.5146484375, 985.8154296875, 11.344575881958, "cylinder", 2.5, 220, 0, 0, 220, hit)
								blpCourierEnd = createBlip(373.5146484375, 985.8154296875, 11.344575881958, 0, 2, 220, 0, 0, 220, 0, 65535, hit)
								addBox("Заказ оформлен.\nВам необходимо отвезти груз в торговый центр!\nОплата: " .. randomPos * 300 * coefmoney .. "$.", hit, 0, 255, 100)
								SED(hit, "Coef", 3)
								SED(hit, "Oppa", true)
								local id = getElementData(hit, "ID")
								timura[id] = setTimer(function ( ded, neded )
									if(isElement(ded)) then
										removeElementData(ded, "Oppa")
									end
									timura[id] = nil
								end, 38000, 1, hit, id)
							end
							SED(hit, "mrkCourierEnd", mrkCourierEnd)
							SED(hit, "blpCourierEnd", blpCourierEnd)
							addEventHandler("onMarkerHit", mrkCourierEnd, mrkCourEnd)
						else
							local biz = bizzak[(math.random(1, #bizzak))]
							local bus = biz["ID"]
							local Products = biz["Products"]
							local price = biz["Price"]
							if(Products > 3000) then
								Products = 3000
							end
							OrderBiz[bus]["OrderCourier"] = hit
							local x, y, z = BusinessTable[bus]["px"], BusinessTable[bus]["py"],  BusinessTable[bus]["pz"]
							local mrk = createMarker(x, y, z, "checkpoint", 2.6, 220, 0, 0, 220, hit)
							local blp = createBlip(x, y, z, 0, 2, 220, 0, 0, 220, 0, 64000, hit)
							SED(hit, "mrkCour", mrk)
							SED(hit, "blpCour", blp)
							SED(hit, "courBiz", bus)
							SED(hit, "courProd", Products)
							addEventHandler("onMarkerHit", mrk, hitCourEnd)
							addBox("Ваша цель - отвезти груз до бизнеса.\n(Отмечено на карте)", hit, 0, 255, 100)
							addBox("Ценность груза: " .. OrderBiz[bus]["Products"] .. "$.\nСтоимость доставки: " .. price - OrderBiz[bus]["Products"] .. "$.", hit, 0, 255, 100)
						end
					end
				end
			end
		end
	end
end

ServerPerem["GruzLabel"] = create3dtextlabel(-674.4755859375, -1355.068359375, 12.518400192261, "РАЗГРУЖЕНО #ff2200125670 КГ.")
edit3dtext(ServerPerem["GruzLabel"], "РАЗГРУЖЕНО #ff2200" .. Server["Gruz"] .. " КГ.")
ServerPerem["FishLabel"] = create3dtextlabel(-654.064453125, -1488, 13.762683868408, "Рыбный склад: #ff3300250045 КГ.")
edit3dtext(ServerPerem["FishLabel"], "Рыбный склад: #ff3300" .. Server["FishGruz"] .. " КГ.")
function onCourierOrderEnd( pay )
	setElementMoney(client, pay, "Курьер работа")
end

function updateTime()
	local realtime = getRealTime()
	local hours = realtime.hour
	if hours >= 24 then
		hours = hours - 24
	elseif hours < 0 then
		hours = hours + 24
	end
	minute = realtime.minute
	setTime(hours, minute)
	nextupdate = (60-realtime.second) * 1000
	setMinuteDuration( nextupdate )
	setTimer( setMinuteDuration, nextupdate + 5, 1, 60000 )
end

function Benz2MarkerHit( hit, dim )
	if(getElementType(hit) == "player") then
		local veh = getPedOccupiedVehicle(hit)
		if(veh ~= nil and veh ~= false) then
			local benz = getElementData(veh, "Benzovoz")
			local biz = getElementData(hit, "BusOwnID")
			if(benz == biz) then
				if(getPedOccupiedVehicleSeat(hit) == 0) then
					local benzkol = toch(getElementData(veh, "BenzKol"))
					if(benzkol ~= nil) then
						if(benzkol > 0) then
							local Products = BusinessTable[biz]["Products"]
							if(Products + benzkol > BusinessTable[biz]["MaxProducts"]) then
								BusinessTable[biz]["Products"] = BusinessTable[biz]["MaxProducts"]
								addBox("Склад максимально заполнен.", hit, 0, 60, 255)
							else
								addBox("Вы успешно доставили " .. benzkol .. " кг продуктов.", hit, 0, 255, 60)
								BusinessTable[biz]["Products"] = BusinessTable[biz]["Products"] + benzkol
								local mrk = createMarker(-1006.5986328125, -1388.630859375, 10.581163406372, "cylinder", 2.4, 220, 0, 0, 220, hit)
								SED(hit, "mrkBenz1", mrk)
								addEventHandler("onMarkerHit", mrk, Benz1MarkerHit)
								local blp = createBlip(-1006.5986328125, -1388.630859375, 10.581163406372, 0, 2, 220, 0, 0, 220, 3, 64000, hit)
								SED(hit, "blpBenz1", blp)
								addBox("Вы можете продолжить доставку.", hit, 0, 255, 60)
							end
							removeElementData(veh, "BenzKol")
							local mrk = getElementData(hit, "mrkBenz2")
							local blp = getElementData(hit, "blpBenz2")
							removeEventHandler("onMarkerHit", mrk, Benz2MarkerHit)
							destroyElement(mrk)
							destroyElement(blp)
							removeElementData(hit, "mrkBenz2")
							removeElementData(hit, "blpBenz2")
							dbExec(mysql, "UPDATE `Business` SET `Products` = ? WHERE `ID` = ?", BusinessTable[biz]["Products"], biz)
						end
					else
						addBox("Произошла системная ошибка, повторите попытку.", hit, 255, 0, 0)
						removeElementData(veh, "BenzKol")
					end
				end
			end
		end
	end
end

function mrkText( hit, dim )
	if(source ~= false) then
		if(getElementType(hit) == "player") then
			if(getElementData(source, "Player") == hit) then
				addBox(getElementData(source, "Text"), hit, 0, 60, 255)
			end
		end
	end
end

function onAdminCoefMoney( thePlayer, command, ch )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") == 6) then
			if(ch ~= nil) then
				if(toch(ch) ~= nil) then
					ch = toch(ch)
					ch = math.floor(ch)
					if(ch >= 1 and ch <= 3) then
						for i, n in pairs(IDS) do
							if(getElementData(thePlayer, "Name")) then
								if(ch > 1) then
									sendClientMessage(getElementData(thePlayer, "Name") .. " поставил бонус x" .. ch .. " на все работы и опыт! Желаем Вам приятной игры!", n, 255, 0, 0)
								else
									sendClientMessage(getElementData(thePlayer, "Name") .. " поставил коэффициент работ и опыта на x" .. ch .. "! Желаем Вам приятной игры!", n, 255, 0, 0)
								end
							end
						end
						coefmoney = ch
					end
				end
			end
		end
	end
end

function onAdminSpawnHouseVehicle( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 2) then
			for i,n in pairs(getElementsByType("vehicle")) do
				if(getElementData(n, "PrivatePlayer") ~= false) then
					if(getVehicleOccupant(n, 0) == false) then
						if(isElementFrozen(n) == true) then
							setElementFrozen(n, false)
						end
						customSpawnVehicle(n)
						for i,n in pairs(IDS) do
							if(getElementData(n, "Login") == true) then
								sendClientMessage("Администратор " .. getElementData(thePlayer, "Name") .. " зареспавнил все домашние автомобили.", n, 255, 30, 0)
							end
						end
					end
				end
			end
		end
	end
end

addCommandHandler("coefmoney", onAdminCoefMoney)
addCommandHandler("sphouseveh", onAdminSpawnHouseVehicle)


function pulseTime( )
	local Times = getRealTime()
	if(Times.hour ~= payDay) then
		payDay = Times.hour
		MafiaCapture[1]["MC"] = true
		MafiaCapture[2]["MC"] = true
		MafiaCapture[3]["MC"] = true
		MafiaCapture[4]["MC"] = true
		for i=1,4 do
			for l,n in pairs(BusinessTable) do
				if(n["Roof"] == i) then
					Server["Maf" .. i .. "Money"] = Server["Maf" .. i .. "Money"] + BusPriceMaf * coefmoney
					dbExec(mysql, "UPDATE `Server` set `Integ` = ? WHERE `Name` = ?", Server["Maf" .. i .. "Money"], "Maf" .. i .. "Money")
				end
			end
		end
		setTimer(function ( )
			for i=1,4 do
				MafiaCapture[i]["MC"] = false
			end
		end, 5 * 60 * 1000, 1)
		dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = 'Maf1Mat'", Server["Maf1Mat"])
		dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = 'Maf2Mat'", Server["Maf2Mat"])
		dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = 'Maf3Mat'", Server["Maf3Mat"])
		dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = 'Maf4Mat'", Server["Maf4Mat"])
		dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = 'ArmyGruz'", Server["ArmyGruz"])
		dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = 'Gruz'", Server["Gruz"])
		dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = 'FishGruz'", Server["FishGruz"])
		for i, n in pairs(HouseTable) do
			if(HouseTable[i]["PID"] > 0) then
				if(HouseTable[i]["PayDay"] > 1) then
					HouseTable[i]["PayDay"] = HouseTable[i]["PayDay"] - 1
					dbExec(mysql, "UPDATE `House` SET `PayDay` = ? WHERE `ID` = ?", HouseTable[i]["PayDay"], i)
					local player = HouseTable[i]["OwnerPlayer"]
					if(player ~= nil) then
						if(HouseTable[i]["PayDay"] <= 24) then
							if(player ~= nil) then
								addBox("Не забывайте оплачивать налоги за дом!\nОн может быть конфискован\nЧерез " .. HouseTable[i]["PayDay"] .. " ч.", player, 255, 255, 0)
							end
						end
					end
				else
					local name = HouseTable[i]["PName"]
					local player = HouseTable[i]["OwnerPlayer"]
					if(player ~= nil) then
						SED(player, "House", 0)
						addBox("Вы потеряли Ваш дом\nЗа неуплату налогов.\n80% от стоимости и полная стоимость\nМашины возвращена наличными.", player, 255, 0, 0)
						local price = HouseTable[i]["Price"]
						setElementMoney(player, math.ceil(price * 0.8), "Неуплата дома")
						for k=1,4 do
							if(HouseTable[i]["Car" .. k] > 0) then
								local veh = HouseTable[i]["Car" .. k]
								local price = 0
								for i, n in pairs(CarInfo) do
									if(CarInfo[i]["ID"] == veh) then
										price = CarInfo[i]["GosPrice"]
										break
									end
								end
								local carprice = math.ceil(price)
								setElementMoney(player, carprice * 0.8, "Неуплата машина")
								local id = getElementData(player, "ID")
								if(PrivateCar[id] ~= nil) then
									local veh = PrivateCar[id]
									customDestroyVehicle(veh)
									PrivateCar[id] = nil
								end
							end
						end
					else
						local price = HouseTable[i]["Price"]
						local name = HouseTable[i]["PName"]
						dbExec(mysql, "UPDATE `Accounts` set `Money` = `Money` + ? WHERE `Name` = ?",  math.ceil(price), name)
						for k=1,4 do
							if(HouseTable[i]["Car" .. k] > 0) then
								local veh = HouseTable[i]["Car" .. k]
								local price = 0
								for i, n in pairs(CarInfo) do
									if(CarInfo[i]["ID"] == veh) then
										price = CarInfo[i]["GosPrice"]
										break
									end
								end
								local carprice = math.ceil(price)
								dbExec(mysql, "UPDATE `Accounts` set `Money` = `Money` + ? WHERE `Name` = ?",  math.ceil(price), name)
							end
						end
					end
					HouseTable[i]["PayDay"] = 24
					HouseTable[i]["Car1"] = 0
					HouseTable[i]["PName"] = ""
					HouseTable[i]["OwnerPlayer"] = nil
					dbExec(mysql, "UPDATE `House` SET `PayDay` = 24, `PID` = 0, `Car1` = 0, `Car2` = 0, `Car3` = 0, `Car4` = 0, `PName` = '' WHERE `ID` = ?", i)
					dbExec(mysql, "UPDATE `Accounts` SET `House` = 0 WHERE `ID` = ?", HouseTable[i]["PID"])
					HouseTable[i]["PID"] = 0
					destroyElement(HouseTable[i]["Pickup"])
					destroyElement(HouseTable[i]["Blip"])
					HouseTable[i]["Pickup"] = createPickup(HouseTable[i]["x"], HouseTable[i]["y"], HouseTable[i]["z"], 3, 1273, 0)
					HouseTable[i]["Blip"] = createBlip(HouseTable[i]["x"], HouseTable[i]["y"], HouseTable[i]["z"], 31, 2, 0, 0, 0, 0, 0, 250)
					SED(HouseTable[i]["Pickup"], "ID", i)
				end
			end
		end
		for i, player in pairs(IDS) do
			if(getElementData(player, "Login") == true) then
				if(getElementData(player, "Afk") == false) then
					if(getElementData(player, "VipType") > 0 and getElementData(player, "VipType") < 4) then
						getExp(player, 2 * coefmoney)
					elseif(getElementData(player, "VipType") == 4) then
						getExp(player, 3 * coefmoney)
					else
						getExp(player, 1 * coefmoney)
					end
					local EXP = toch(getElementData(player, "Exp"))
					local Level = toch(getElementData(player, "Lvl"))
					local Money = 0
					local str = "Чек-лист штата Vice City\n------------------------------" .. "\nОпыт: " .. EXP .. " / " .. tostring(8 + ((Level - 1) * 4))
					if(toch(getElementData(player, "PayDay")) ~= nil) then
						if(getElementData(player, "VipType") > 0) then
							if(getElementData(player, "VipType") == 1) then
								SED(player, "PayDay", toch(getElementData(player, "PayDay")) + 200)
							elseif(getElementData(player, "VipType") == 2) then
								SED(player, "PayDay", toch(getElementData(player, "PayDay")) + 400)
							elseif(getElementData(player, "VipType") == 3) then
								SED(player, "PayDay", toch(getElementData(player, "PayDay")) + 600)
							elseif(getElementData(player, "VipType") == 4) then
								SED(player, "PayDay", toch(getElementData(player, "PayDay")) + 700)
							end
						end
						str = str .. "\nЗарплата: " .. getElementData(player, "PayDay") * coefmoney .. "$"
						setElementMoney(player, toch(getElementData(player, "PayDay")) * coefmoney, "Пейдей")
						removeElementData(player, "PayDay")
					else
						if(getElementData(player, "VipType") > 0) then
							if(getElementData(player, "VipType") == 1) then
								SED(player, "PayDay", 200)
							elseif(getElementData(player, "VipType") == 2) then
								SED(player, "PayDay", 400)
							elseif(getElementData(player, "VipType") == 3) then
								SED(player, "PayDay", 600)
							elseif(getElementData(player, "VipType") == 4) then
								SED(player, "PayDay", 700)
							end
							if(getElementData(player, "PayDay") ~= false) then
								str = str .. "\nЗарплата: " .. getElementData(player, "PayDay") * coefmoney .. "$"
								setElementMoney(player, toch(getElementData(player, "PayDay")) * coefmoney, "Пейдей")
								removeElementData(player, "PayDay")
							end
						end
					end
					if(getElementData(player, "Admin") > 0 and getElementData(player, "Admin") <= 6) then
	                    setElementMoney(player, getElementData(player, "Admin") * 3000, "Адм")
	                    str = str .. "\nАдм. зп: " .. getElementData(player, "Admin") * 3000 .. "$."
					end
					if(getElementData(player, "Faction") >= 5 and getElementData(player, "Faction") <= 9) then
						if(getElementData(player, "WorkSkin") == getElementModel(player)) then
		                    local fact = toch(getElementData(player, "Faction"))
		                    local rank = toch(getElementData(player, "Rank"))
		                    setElementMoney(player, ZpTable[fact][rank] * coefmoney, "ЗП")
		                    str = str .. "\nВыплата организации: " .. ZpTable[fact][rank] * coefmoney .. "$."
		                else
		                	addBox("Вы не получили зарплату\nПотому что были не в рабочей форме!", player, 255, 0, 0)
		                end
	                end
					Money = toch(getElementData(player, "Money"))
					str = str .."\nДенег на счету: " .. Money
					str = str .. "\n------------------------------"
					addBox(str, player, 0, 100, 255)
					local Wanted = toch(getElementData(player, "Wanted"))
					if(Wanted > 0) then
						Wanted = Wanted - 1
						addBox("Ваш уровень розыска понижен.", player, 255, 255, 0)
						SED(player, "Wanted", Wanted)
						setPlayerWantedLevel(player, Wanted)
					end
					SED(player, "WHours", getElementData(player, "WHours") + 1)
					dbExec(mysql, "UPDATE `Accounts` SET `Exp` = ?, `Lvl` = ?, `Wanted` = ?, `WHours` = ? WHERE `Name` = ?", EXP, Level, Wanted, getElementData(player, "WHours"), getElementData(player, "Name"))
					triggerClientEvent(player, "onEXPUpdate", player, getElementData(player, "Exp"), getElementData(player, "Lvl"))
					if(getElementData(player, "PromoExp") ~= false) then
						if(getElementData(player, "PromoExp") > 0) then
							SED(player, "PromoExp", getElementData(player, "PromoExp") - 1)
							addBox("Осталось отыграть " .. getElementData(player, "PromoExp") .. "/" .. getElementData(player, "NeedExp") .. "\nPayDay, чтобы получить бонус: " .. getElementData(player, "PromoMoney") .. "$.", player, 0, 60, 255)
							dbExec(mysql, "UPDATE `PromoTable` SET `Exp` = ? WHERE `AccID` = ?", getElementData(player, "PromoExp"), getElementData(player, "AccID"))
						end
						if(getElementData(player, "PromoExp") == 0) then
							SED(player, "PromoExp", -1)
							dbExec(mysql, "UPDATE `PromoTable` SET `Exp` = ? WHERE `AccID` = ?", -1, getElementData(player, "AccID"))
							addBox("Вы успешно отыграли " .. getElementData(player, "NeedExp") .. " PayDay.\nВы получили вознаграждение в размере: " .. getElementData(player, "PromoMoney") .. "$.", player, 0, 255, 60)
							setElementMoney(player, getElementData(player, "PromoMoney"), "промо")
						end
					end
				else
					addBox("Вы были афк слишком долго\nЗарплата не засчитана.", player, 255, 0, 0)
				end
			end
		end
		for i, n in pairs(BusinessTable) do
			if(BusinessTable[i]["Owner"] > 0) then
				if(BusinessTable[i]["PayDay"] > 1) then
					if(BusinessTable[i]["PayDay"] < 10) then
						local pl = BusinessTable[i]["OwnerPlayer"]
						if(pl ~= nil) then
							if(isElement(pl) == true) then
								if(getElementType(pl) == "player") then
									addBox("Не забывайте оплачивать налоги бизнеса!", pl, 255, 255, 0)
								end
							end
						end
					end
					BusinessTable[i]["PayDay"] = BusinessTable[i]["PayDay"] - 1
					dbExec(mysql, "UPDATE `Business` SET `PayDay` = ? WHERE `ID` = ?", BusinessTable[i]["PayDay"], i)
				else
					local name = BusinessTable[i]["OwnerName"]
					outputServerLog(i .. " sletel " .. name)
					BusinessTable[i]["PayDay"] = 4
					BusinessTable[i]["Owner"] = 0
					BusinessTable[i]["OwnerName"] = ""
					BusinessTable[i]["Money"] = 0
					BusinessTable[i]["Products"] = 0
					if(i < 10) then
						BusinessTable[i]["Benzovoz"] = 0
						BusinessTable[i]["MaxProducts"] = 100000
						BusinessTable[i]["Open"] = true
					end
					local pl = BusinessTable[i]["OwnerPlayer"]
					if(pl ~= nil) then
						addBox("Вы не оплатили бизнес, и он был конфискован.", pl, 255, 0, 0)
						SED(pl, "BusOwnID", 0)
					end
					dbExec(mysql, "UPDATE `Business` SET `Owner` = ?, `OwnerName` = ?, `Benzovoz` = ?, `PayDay` = ?, `Money` = ?, `MaxProducts` = ?, `Open` = ?, `Products` = ? WHERE `ID` = ?", 0, "", 0, 4, 0, 100000, 1, 0, i)
					dbExec(mysql, "UPDATE `Accounts` SET `BusinessID` = ? WHERE `Name` = ?", 0, name)
				end
			end
		end
		if(Times.hour == 5) then
			dbExec(mysql, "UPDATE `Accounts` SET `Warn` = 0 WHERE `WarnDays` = 1")
			dbExec(mysql, "UPDATE `Accounts` SET `WarnDays` = `WarnDays` - 1 WHERE `WarnDays` > 1")
			dbExec(mysql, "UPDATE `Accounts` SET `Ban` = `Ban` - 1 WHERE `Ban` > 0")
			dbExec(mysql, "UPDATE `Accounts` SET `VipDay` = `VipDay` - 1 WHERE `VipDay` > 1")
			dbExec(mysql, "UPDATE `Accounts` SET `VipDay` = 0, `VipType` = 0 WHERE `VipDay` = 1")
			if(Times.weekday == 0) then
				dbExec(mysql, "UPDATE `Accounts` set `WHours` = 0")
				outputServerLog("clear time week")
			end
			restartResource(getThisResource())
		end
	end
	if(Times.minute == 50 and Times.hour == 4 and payMin == false) then
		payMin = true
		for i,n in pairs(IDS) do
			sendClientMessage("В 5:00 по Московскому времени произойдет рестарт. (10 мин)", n, 255, 30, 0)
		end
	end
	for i, veh in pairs(VehicleTable) do
		if(VehicleTable[i]["Vehicle"] ~= false and VehicleTable[i]["Vehicle"] ~= nil) then
			local veh = VehicleTable[i]["Vehicle"]
			if(isElement(veh) == false) then
				VehicleTable[i] = nil
			else
				if(getVehicleEngineState(VehicleTable[i]["Vehicle"]) == true) then
					SED(VehicleTable[i]["Vehicle"], "Fuel", getElementData(VehicleTable[i]["Vehicle"], "Fuel") - 0.05)
					if(getElementData(VehicleTable[i]["Vehicle"], "Fuel") <= 0) then
						if(getElementModel(VehicleTable[i]["Vehicle"]) ~= 481) then
							setVehicleEngineState(VehicleTable[i]["Vehicle"], false)
							SED(VehicleTable[i]["Vehicle"], "Engine", false)
						end
					end
				end
			end
		end
	end
	for i, player in pairs(IDS) do
		if(isElement(player) == true) then
			if(getElementData(player, "Login") == true) then
				if(getElementData(player, "Mute") > 0) then
					local time = getElementData(player, "Mute")
					time = time - 1
					if(time == 0) then
						SED(player, "Mute", 0)
						addBox("Затычка снята.", player, 255, 0, 0)
						dbExec(mysql, "UPDATE `Accounts` set `Mute` = ? WHERE `ID` = ?", time, getElementData(player, "AccID"))
					else
						SED(player, "Mute", time)
					end
				end
			end
			if(isElement(player) == true) then
				if(getPedOccupiedVehicle(player) ~= nil and getPedOccupiedVehicle(player) ~= false) then
					local a = getPedOccupiedVehicle(player)
					triggerClientEvent(player, "FuelUpdate", player, math.round(getElementData(a, "Fuel")))
				end
			end
			if(getElementData(IDS[i], "Login") == true) then
				if(getElementData(IDS[i], "Food") ~= false) then
					local food = getElementData(IDS[i], "Food")
					if(food >= 75 and food - 0.0125 < 75) then
						addBox("Вы слегка проголодались, не забудьте\nПерекусить в ближайшей закусочной", IDS[i], 255, 255, 0)
					elseif(food >= 50 and food - 0.0125 < 50) then
						addBox("Вы проголодались, не забудьте\nПерекусить в ближайшей закусочной", IDS[i], 255, 255, 0)
					elseif(food >= 25 and food - 0.0125 < 25) then
						addBox("Срочно отправляйтесь есть, это можно\nСделать в ближайшей закусочной", IDS[i], 255, 255, 0)
					elseif(food >= 0.0125 and food - 0.0125 <= 0.0125) then
						addBox("Срочно отправляйтесь есть!\nВ ближайшей закусочной", IDS[i], 255, 255, 0)
					end
					if(food - 0.0125 >= 0) then
						SED(IDS[i], "Food", tonumber(getElementData(IDS[i], "Food") - 0.0125))
						if(math.round(tonumber(food)) ~= math.round(tonumber(getElementData(IDS[i], "Food")))) then
							triggerClientEvent(IDS[i], "Food", IDS[i], math.round(toch(getElementData(IDS[i], "Food"))))
						end
					end
				end
				local secPlayer = IDS[i]
				if(getElementData(secPlayer, "PoliceJail") ~= false) then
					if(getElementData(secPlayer, "PoliceJail") > 0) then
						local ntimer = toch(getElementData(secPlayer, "PoliceJail")) - 1
						if(ntimer > 0 and math.fmod(ntimer, 60) == 0) then
							addBox("Вам осталось сидеть\nВ тюрьме: " .. ntimer / 60 .. " мин.", secPlayer, 255, 0, 0)
						end
						SED(secPlayer, "PoliceJail", ntimer)
					elseif(getElementData(secPlayer, "PoliceJail") == 0) then
						dbExec(mysql, "UPDATE `Accounts` SET `PoliceJail` = ? WHERE `ID` = ?", getElementData(secPlayer, "PoliceJail"), getElementData(secPlayer, "AccID"))
						removeElementData(secPlayer, "PoliceJail")
						if(getElementData(secPlayer, "AdminJail") == false) then
							SED(secPlayer, "ABB", true)
							setTimer(function ( sdr )
								if(isElement(sdr)) then
									removeElementData(sdr, "ABB")
								end
							end, 150, 1, secPlayer)
							SEP(secPlayer, -868.3828125, -680.7021484375, 11.203320503235)
							SET(secPlayer, 0)
							SIDP(secPlayer, 0)
							addBox("Вы отсидели свой срок.", secPlayer, 255, 255, 0)
						end
					end
				end
				if(getElementData(secPlayer, "AdminJail") ~= false) then
					if(getElementData(secPlayer, "AdminJail") > 0) then
						local ntimer = toch(getElementData(secPlayer, "AdminJail")) - 1
						if(ntimer > 0 and math.fmod(ntimer, 60) == 0) then
							addBox("Вам осталось сидеть\nВ тюрьме: " .. ntimer / 60 .. " мин.", secPlayer, 255, 0, 0)
						end
						SED(secPlayer, "AdminJail", ntimer)
					elseif(getElementData(secPlayer, "AdminJail") == 0) then
						dbExec(mysql, "UPDATE `Accounts` SET `AdminJail` = ? WHERE `ID` = ?", getElementData(secPlayer, "AdminJail"), getElementData(secPlayer, "AccID"))
						removeElementData(secPlayer, "AdminJail")
						if(getElementData(secPlayer, "PoliceJail") == false) then
							SED(secPlayer, "ABB", true)
							setTimer(function ( sdr )
								if(isElement(sdr)) then
									removeElementData(sdr, "ABB")
								end
							end, 150, 1, secPlayer)
							SEP(secPlayer, -868.3828125, -680.7021484375, 11.203320503235)
							SET(secPlayer, 0)
							SIDP(secPlayer, 0)
							addBox("Вы отсидели свой срок.", secPlayer, 255, 255, 0)
						end
					end
				end
			end
		end
	end
end

function pulseTimer( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") == 6) then
			local Times = getRealTime()
			Times.hour = 35
			if(Times.hour ~= payDay) then
				payDay = Times.hour
				MafiaCapture[1]["MC"] = true
				MafiaCapture[2]["MC"] = true
				MafiaCapture[3]["MC"] = true
				MafiaCapture[4]["MC"] = true
				for i=1,4 do
					for l,n in pairs(BusinessTable) do
						if(n["Roof"] == i) then
							Server["Maf" .. i .. "Money"] = Server["Maf" .. i .. "Money"] + BusPriceMaf
						end
					end
				end
				setTimer(function ( )
					for i=1,4 do
						MafiaCapture[i]["MC"] = false
					end
				end, 5 * 60 * 1000, 1)
				dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = 'Maf1Mat'", Server["Maf1Mat"])
				dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = 'Maf2Mat'", Server["Maf2Mat"])
				dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = 'Maf3Mat'", Server["Maf3Mat"])
				dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = 'Maf4Mat'", Server["Maf4Mat"])
				dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = 'ArmyGruz'", Server["ArmyGruz"])
				dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = 'Gruz'", Server["Gruz"])
				dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = 'FishGruz'", Server["FishGruz"])
				for i, n in pairs(HouseTable) do
					if(HouseTable[i]["PID"] > 0) then
						if(HouseTable[i]["PayDay"] > 1) then
							HouseTable[i]["PayDay"] = HouseTable[i]["PayDay"] - 1
							dbExec(mysql, "UPDATE `House` SET `PayDay` = ? WHERE `ID` = ?", HouseTable[i]["PayDay"], i)
							local player = HouseTable[i]["OwnerPlayer"]
							if(player ~= nil) then
								if(HouseTable[i]["PayDay"] <= 24) then
									if(player ~= nil) then
										addBox("Не забывайте оплачивать налоги за дом!\nОн может быть конфискован\nЧерез " .. HouseTable[i]["PayDay"] .. " ч.", player, 255, 255, 0)
									end
								end
							end
						else
							local name = HouseTable[i]["PName"]
							local player = HouseTable[i]["OwnerPlayer"]
							if(player ~= nil) then
								SED(player, "House", 0)
								addBox("Вы потеряли Ваш дом\nЗа неуплату налогов.\n80% от стоимости и полная стоимость\nМашины возвращена наличными.", player, 255, 0, 0)
								local price = HouseTable[i]["Price"]
								setElementMoney(player, math.ceil(price * 0.8), "Неуплата дома")
								if(HouseTable[i]["Car1"] > 0) then
									local veh = HouseTable[i]["Car1"]
									local price = 0
									for i, n in pairs(CarInfo) do
										if(CarInfo[i]["ID"] == veh) then
											price = CarInfo[i]["GosPrice"]
											break
										end
									end
									local carprice = math.ceil(price)
									setElementMoney(player, carprice * 0.8, "Неуплата машина")
									local id = getElementData(player, "ID")
									if(PrivateCar[id] ~= nil) then
										local veh = PrivateCar[id]
										customDestroyVehicle(veh)
										PrivateCar[id] = nil
									end
								end
							else
								local price = HouseTable[i]["Price"]
								local name = HouseTable[i]["PName"]
								dbExec(mysql, "UPDATE `Accounts` set `Money` = `Money` + ? WHERE `Name` = ?",  math.ceil(price), name)
								if(HouseTable[i]["Car1"] > 0) then
									local veh = HouseTable[i]["Car1"]
									local price = 0
									for i, n in pairs(CarInfo) do
										if(CarInfo[i]["ID"] == veh) then
											price = CarInfo[i]["GosPrice"]
											break
										end
									end
									local carprice = math.ceil(price)
									dbExec(mysql, "UPDATE `Accounts` set `Money` = `Money` + ? WHERE `Name` = ?",  math.ceil(price), name)
								end
							end
							HouseTable[i]["PayDay"] = 24
							HouseTable[i]["Car1"] = 0
							HouseTable[i]["PName"] = ""
							HouseTable[i]["OwnerPlayer"] = nil
							dbExec(mysql, "UPDATE `House` SET `PayDay` = 24, `PID` = 0, `Car1` = 0, `Car2` = 0, `Car3` = 0, `Car4` = 0 `PName` = '' WHERE `ID` = ?", i)
							dbExec(mysql, "UPDATE `Accounts` SET `House` = 0 WHERE `ID` = ?", HouseTable[i]["PID"])
							HouseTable[i]["PID"] = 0
							destroyElement(HouseTable[i]["Pickup"])
							destroyElement(HouseTable[i]["Blip"])
							HouseTable[i]["Pickup"] = createPickup(HouseTable[i]["x"], HouseTable[i]["y"], HouseTable[i]["z"], 3, 1273, 0)
							HouseTable[i]["Blip"] = createBlip(HouseTable[i]["x"], HouseTable[i]["y"], HouseTable[i]["z"], 31, 2, 0, 0, 0, 0, 0, 250)
							SED(HouseTable[i]["Pickup"], "ID", i)
						end
					end
				end
				for i, player in pairs(IDS) do
					if(getElementData(player, "Login") == true) then
						if(getElementData(player, "Afk") == false) then
							if(getElementData(player, "VipType") > 0 and getElementData(player, "VipType") < 4) then
								getExp(player, 2 * coefmoney)
							elseif(getElementData(player, "VipType") == 4) then
								getExp(player, 3 * coefmoney)
							else
								getExp(player, 1 * coefmoney)
							end
							local EXP = toch(getElementData(player, "Exp"))
							local Level = toch(getElementData(player, "Lvl"))
							local Money = 0
							local str = "Чек-лист штата Vice City\n------------------------------" .. "\nОпыт: " .. EXP .. " / " .. tostring(8 + ((Level - 1) * 4))
							if(toch(getElementData(player, "PayDay")) ~= nil) then
								if(getElementData(player, "VipType") > 0) then
									if(getElementData(player, "VipType") == 1) then
										SED(player, "PayDay", toch(getElementData(player, "PayDay")) + 200)
									elseif(getElementData(player, "VipType") == 2) then
										SED(player, "PayDay", toch(getElementData(player, "PayDay")) + 400)
									elseif(getElementData(player, "VipType") == 3) then
										SED(player, "PayDay", toch(getElementData(player, "PayDay")) + 600)
									elseif(getElementData(player, "VipType") == 4) then
										SED(player, "PayDay", toch(getElementData(player, "PayDay")) + 700)
									end
								end
								str = str .. "\nЗарплата: " .. getElementData(player, "PayDay") * coefmoney .. "$"
								setElementMoney(player, toch(getElementData(player, "PayDay")) * coefmoney, "Пейдей")
								removeElementData(player, "PayDay")
							else
								if(getElementData(player, "VipType") > 0) then
									if(getElementData(player, "VipType") == 1) then
										SED(player, "PayDay", 200)
									elseif(getElementData(player, "VipType") == 2) then
										SED(player, "PayDay", 400)
									elseif(getElementData(player, "VipType") == 3) then
										SED(player, "PayDay", 600)
									elseif(getElementData(player, "VipType") == 4) then
										SED(player, "PayDay", 700)
									end
									if(getElementData(player, "PayDay") ~= false) then
										str = str .. "\nЗарплата: " .. getElementData(player, "PayDay") * coefmoney .. "$"
										setElementMoney(player, toch(getElementData(player, "PayDay")) * coefmoney, "Пейдей")
										removeElementData(player, "PayDay")
									end
								end
							end
							if(getElementData(player, "Faction") >= 5 and getElementData(player, "Faction") <= 9) then
								if(getElementData(player, "WorkSkin") == getElementModel(player)) then
				                    local fact = toch(getElementData(player, "Faction"))
				                    local rank = toch(getElementData(player, "Rank"))
				                    setElementMoney(player, ZpTable[fact][rank] * coefmoney, "ЗП")
				                    str = str .. "\nВыплата организации: " .. ZpTable[fact][rank] * coefmoney .. "$."
				                else
				                	addBox("Вы не получили зарплату\nПотому что были не в рабочей форме!", player, 255, 0, 0)
				                end
			                end
			                if(getElementData(player, "Admin") > 0 and getElementData(player, "Admin") <= 6) then
			                    setElementMoney(player, getElementData(player, "Admin") * 3000, "Адм")
			                    str = str .. "\nАдм. зп: " .. getElementData(player, "Admin") * 3000 .. "$."
							end
							Money = toch(getElementData(player, "Money"))
							str = str .."\nДенег на счету: " .. Money
							str = str .. "\n------------------------------"
							addBox(str, player, 0, 100, 255)
							local Wanted = toch(getElementData(player, "Wanted"))
							if(Wanted > 0) then
								Wanted = Wanted - 1
								addBox("Ваш уровень розыска понижен.", player, 255, 255, 0)
								SED(player, "Wanted", Wanted)
								setPlayerWantedLevel(player, Wanted)
							end
							dbExec(mysql, "UPDATE `Accounts` SET `Exp` = ?, `Lvl` = ?, `Wanted` = ? WHERE `Name` = ?", EXP, Level, Wanted, getElementData(player, "Name"))
							triggerClientEvent(player, "onEXPUpdate", player, getElementData(player, "Exp"), getElementData(player, "Lvl"))
							if(getElementData(player, "PromoExp") ~= false) then
								if(getElementData(player, "PromoExp") > 0) then
									SED(player, "PromoExp", getElementData(player, "PromoExp") - 1)
									addBox("Осталось отыграть " .. getElementData(player, "PromoExp") .. "/" .. getElementData(player, "NeedExp") .. "\nPayDay, чтобы получить бонус: " .. getElementData(player, "PromoMoney") .. "$.", player, 0, 60, 255)
									dbExec(mysql, "UPDATE `PromoTable` SET `Exp` = ? WHERE `AccID` = ?", getElementData(player, "PromoExp"), getElementData(player, "AccID"))
								end
								if(getElementData(player, "PromoExp") == 0) then
									SED(player, "PromoExp", -1)
									dbExec(mysql, "UPDATE `PromoTable` SET `Exp` = ? WHERE `AccID` = ?", -1, getElementData(player, "AccID"))
									addBox("Вы успешно отыграли " .. getElementData(player, "NeedExp") .. " PayDay.\nВы получили вознаграждение в размере: " .. getElementData(player, "PromoMoney") .. "$.", player, 0, 255, 60)
									setElementMoney(player, getElementData(player, "PromoMoney"), "промо")
								end
							end
						else
							if(getElementData(player, "Afk") <= 1200) then
								if(getElementData(player, "VipType") > 0 and getElementData(player, "VipType") < 4) then
									getExp(player, 2 * coefmoney)
								elseif(getElementData(player, "VipType") == 4) then
									getExp(player, 3 * coefmoney)
								else
									getExp(player, 1 * coefmoney)
								end
								local EXP = toch(getElementData(player, "Exp"))
								local Level = toch(getElementData(player, "Lvl"))
								local Money = 0
								local str = "Чек-лист штата Vice City\n------------------------------" .. "\nОпыт: " .. EXP .. " / " .. tostring(8 + ((Level - 1) * 4))
								if(toch(getElementData(player, "PayDay")) ~= nil) then
									if(getElementData(player, "VipType") > 0) then
										if(getElementData(player, "VipType") == 1) then
											SED(player, "PayDay", toch(getElementData(player, "PayDay")) + 200)
										elseif(getElementData(player, "VipType") == 2) then
											SED(player, "PayDay", toch(getElementData(player, "PayDay")) + 400)
										elseif(getElementData(player, "VipType") == 3) then
											SED(player, "PayDay", toch(getElementData(player, "PayDay")) + 600)
										elseif(getElementData(player, "VipType") == 4) then
											SED(player, "PayDay", toch(getElementData(player, "PayDay")) + 700)
										end
									end
									str = str .. "\nЗарплата: " .. getElementData(player, "PayDay") * coefmoney .. "$"
									setElementMoney(player, toch(getElementData(player, "PayDay")) * coefmoney, "Пейдей")
									removeElementData(player, "PayDay")
								else
									if(getElementData(player, "VipType") > 0) then
										if(getElementData(player, "VipType") == 1) then
											SED(player, "PayDay", 200)
										elseif(getElementData(player, "VipType") == 2) then
											SED(player, "PayDay", 400)
										elseif(getElementData(player, "VipType") == 3) then
											SED(player, "PayDay", 600)
										elseif(getElementData(player, "VipType") == 4) then
											SED(player, "PayDay", 700)
										end
										if(getElementData(player, "PayDay") ~= false) then
											str = str .. "\nЗарплата: " .. getElementData(player, "PayDay") * coefmoney .. "$"
											setElementMoney(player, toch(getElementData(player, "PayDay")) * coefmoney, "Пейдей")
											removeElementData(player, "PayDay")
										end
									end
								end
								if(getElementData(player, "Faction") >= 5 and getElementData(player, "Faction") <= 9) then
									if(getElementData(player, "WorkSkin") == getElementModel(player)) then
					                    local fact = toch(getElementData(player, "Faction"))
					                    local rank = toch(getElementData(player, "Rank"))
					                    setElementMoney(player, ZpTable[fact][rank] * coefmoney, "ЗП")
					                    str = str .. "\nВыплата организации: " .. ZpTable[fact][rank] * coefmoney .. "$."
					                else
					                	addBox("Вы не получили зарплату\nПотому что были не в рабочей форме!", player, 255, 0, 0)
					                end
				                end
								Money = toch(getElementData(player, "Money"))
								str = str .."\nДенег на счету: " .. Money
								str = str .. "\n------------------------------"
								addBox(str, player, 0, 100, 255)
								local Wanted = toch(getElementData(player, "Wanted"))
								if(Wanted > 0) then
									Wanted = Wanted - 1
									addBox("Ваш уровень розыска понижен.", player, 255, 255, 0)
									SED(player, "Wanted", Wanted)
									setPlayerWantedLevel(player, Wanted)
								end
								dbExec(mysql, "UPDATE `Accounts` SET `Exp` = ?, `Lvl` = ?, `Wanted` = ? WHERE `Name` = ?", EXP, Level, Wanted, getElementData(player, "Name"))
								triggerClientEvent(player, "onEXPUpdate", player, getElementData(player, "Exp"), getElementData(player, "Lvl"))
								if(getElementData(player, "PromoExp") ~= false) then
									if(getElementData(player, "PromoExp") > 0) then
										SED(player, "PromoExp", getElementData(player, "PromoExp") - 1)
										addBox("Осталось отыграть " .. getElementData(player, "PromoExp") .. "/" .. getElementData(player, "NeedExp") .. "\nPayDay, чтобы получить бонус: " .. getElementData(player, "PromoMoney") .. "$.", player, 0, 60, 255)
										dbExec(mysql, "UPDATE `PromoTable` SET `Exp` = ? WHERE `AccID` = ?", getElementData(player, "PromoExp"), getElementData(player, "AccID"))
									end
									if(getElementData(player, "PromoExp") == 0) then
										SED(player, "PromoExp", -1)
										dbExec(mysql, "UPDATE `PromoTable` SET `Exp` = ? WHERE `AccID` = ?", -1, getElementData(player, "AccID"))
										addBox("Вы успешно отыграли " .. getElementData(player, "NeedExp") .. " PayDay.\nВы получили вознаграждение в размере: " .. getElementData(player, "PromoMoney") .. "$.", player, 0, 255, 60)
										setElementMoney(player, getElementData(player, "PromoMoney"), "промо")
									end
								end
							else
								addBox("Вы были афк слишком долго\nЗарплата не засчитана.", player, 255, 0, 0)
							end
						end
					else
					end
				end
				for i, n in pairs(BusinessTable) do
					if(BusinessTable[i]["Owner"] > 0) then
						if(BusinessTable[i]["PayDay"] > 1) then
							if(BusinessTable[i]["PayDay"] < 10) then
								local pl = BusinessTable[i]["OwnerPlayer"]
								if(pl ~= nil) then
									if(isElement(pl) == true) then
										if(getElementType(pl) == "player") then
											addBox("Не забывайте оплачивать налоги бизнеса!", pl, 255, 255, 0)
										end
									end
								end
							end
							BusinessTable[i]["PayDay"] = BusinessTable[i]["PayDay"] - 1
							dbExec(mysql, "UPDATE `Business` SET `PayDay` = ? WHERE `ID` = ?", BusinessTable[i]["PayDay"], i)
						else
							local name = BusinessTable[i]["OwnerName"]
							BusinessTable[i]["PayDay"] = 4
							BusinessTable[i]["Owner"] = 0
							BusinessTable[i]["OwnerName"] = ""
							BusinessTable[i]["Money"] = 0
							BusinessTable[i]["Products"] = 0
							if(i < 10) then
								BusinessTable[i]["Benzovoz"] = 0
								BusinessTable[i]["MaxProducts"] = 100000
								BusinessTable[i]["Open"] = true
							end
							local pl = BusinessTable[i]["OwnerPlayer"]
							if(pl ~= nil) then
								addBox("Вы не оплатили бизнес, и он был конфискован.", pl, 255, 0, 0)
								SED(pl, "BusOwnID", 0)
							end
							dbExec(mysql, "UPDATE `Business` SET `Owner` = ?, `OwnerName` = ?, `Benzovoz` = ?, `PayDay` = ?, `Money` = ?, `MaxProducts` = ?, `Open` = ?, `Products` = ? WHERE `ID` = ?", 0, "", 0, 4, 0, 100000, 1, 0, i)
							dbExec(mysql, "UPDATE `Accounts` SET `BusinessID` = ? WHERE `Name` = ?", 0, name)
						end
					end
				end
				if(Times.hour == 5) then
					dbExec(mysql, "UPDATE `Accounts` SET `Ban` = `Ban` - 1 WHERE `Ban` > 0")
					dbExec(mysql, "UPDATE `Accounts` SET `VipDay` = `VipDay` - 1 WHERE `VipDay` > 1")
					dbExec(mysql, "UPDATE `Accounts` SET `VipDay` = 0, `VipType` = 0 WHERE `VipDay` = 1")
					for i,n in pairs(IDS) do
						if(getElementData(n, "Login") == true) then
							local id = getElementData(n, "ID")
							if(PrivateCar[id] ~= nil) then
								local veh = PrivateCar[id]
								if(getElementData(veh, "Lists") ~= false) then
									local house = getElementData(n, "House")
									local lists = getElementData(veh, "Lists")
									if(house > 0) then
										dbExec(mysql, "UPDATE `hOUSE` SET `Fuel" .. lists .. "` = ? WHERE `ID` = ?", getElementData(veh, "Fuel"), getElementData(veh, "House"))
									end
								end
							end
						end
					end
					restartResource(getThisResource())
				end
			end
			if(Times.minute == 50 and Times.hour == 4 and payMin == false) then
				payMin = true
				for i,n in pairs(IDS) do
					sendClientMessage("В 5:00 по Московскому времени произойдет рестарт. (10 мин)", n, 255, 30, 0)
				end
			end
			for i, veh in pairs(VehicleTable) do
				if(VehicleTable[i]["Vehicle"] ~= false and VehicleTable[i]["Vehicle"] ~= nil) then
					local veh = VehicleTable[i]["Vehicle"]
					if(isElement(veh) == false) then
						VehicleTable[i] = nil
					else
						if(getVehicleEngineState(VehicleTable[i]["Vehicle"]) == true) then
							SED(VehicleTable[i]["Vehicle"], "Fuel", getElementData(VehicleTable[i]["Vehicle"], "Fuel") - 0.05)
							if(getElementData(VehicleTable[i]["Vehicle"], "Fuel") <= 0) then
								if(getElementModel(VehicleTable[i]["Vehicle"]) ~= 481) then
									setVehicleEngineState(VehicleTable[i]["Vehicle"], false)
									SED(VehicleTable[i]["Vehicle"], "Engine", false)
								end
							end
						end
					end
				end
			end
			for i, player in pairs(IDS) do
				if(isElement(player) == true) then
					if(getElementData(player, "Login") == true) then
						if(getElementData(player, "Mute") > 0) then
							local time = getElementData(player, "Mute")
							time = time - 1
							if(time == 0) then
								SED(player, "Mute", 0)
								addBox("Затычка снята.", player, 255, 0, 0)
								dbExec(mysql, "UPDATE `Accounts` set `Mute` = ? WHERE `ID` = ?", time, getElementData(player, "AccID"))
							else
								SED(player, "Mute", time)
							end
						end
					end
					if(isElement(player) == true) then
						if(getPedOccupiedVehicle(player) ~= nil and getPedOccupiedVehicle(player) ~= false) then
							local a = getPedOccupiedVehicle(player)
							triggerClientEvent(player, "FuelUpdate", player, math.round(getElementData(a, "Fuel")))
						end
					end
					if(getElementData(IDS[i], "Login") == true) then
						if(getElementData(IDS[i], "Food") ~= false) then
							local food = getElementData(IDS[i], "Food")
							if(food >= 75 and food - 0.0125 < 75) then
								addBox("Вы слегка проголодались, не забудьте\nПерекусить в ближайшей закусочной", IDS[i], 255, 255, 0)
							elseif(food >= 50 and food - 0.0125 < 50) then
								addBox("Вы проголодались, не забудьте\nПерекусить в ближайшей закусочной", IDS[i], 255, 255, 0)
							elseif(food >= 25 and food - 0.0125 < 25) then
								addBox("Срочно отправляйтесь есть, это можно\nСделать в ближайшей закусочной", IDS[i], 255, 255, 0)
							elseif(food >= 0.0125 and food - 0.0125 <= 0.025) then
								addBox("Срочно отправляйтесь есть!\nВ ближайшей закусочной", IDS[i], 255, 255, 0)
							end
							if(food - 0.0125 >= 0) then
								SED(IDS[i], "Food", tonumber(getElementData(IDS[i], "Food") - 0.0125))
								if(math.round(tonumber(food)) ~= math.round(tonumber(getElementData(IDS[i], "Food")))) then
									triggerClientEvent(IDS[i], "Food", IDS[i], math.round(tonumber(getElementData(IDS[i], "Food"))))
								end
							end
						end
						local secPlayer = IDS[i]
						if(getElementData(secPlayer, "PoliceJail") ~= false) then
							if(getElementData(secPlayer, "PoliceJail") > 0) then
								local ntimer = toch(getElementData(secPlayer, "PoliceJail")) - 1
								if(ntimer > 0 and math.fmod(ntimer, 60) == 0) then
									addBox("Вам осталось сидеть\nВ тюрьме: " .. ntimer / 60 .. " мин.", secPlayer, 255, 0, 0)
								end
								SED(secPlayer, "PoliceJail", ntimer)
							elseif(getElementData(secPlayer, "PoliceJail") == 0) then
								dbExec(mysql, "UPDATE `Accounts` SET `PoliceJail` = ? WHERE `ID` = ?", getElementData(secPlayer, "PoliceJail"), getElementData(secPlayer, "AccID"))
								removeElementData(secPlayer, "PoliceJail")
								if(getElementData(secPlayer, "AdminJail") == false) then
									SED(secPlayer, "ABB", true)
									setTimer(function ( sdr )
										if(isElement(sdr)) then
											removeElementData(sdr, "ABB")
										end
									end, 150, 1, secPlayer)
									SEP(secPlayer, -868.3828125, -680.7021484375, 11.203320503235)
									SET(secPlayer, 0)
									SIDP(secPlayer, 0)
									addBox("Вы отсидели свой срок.", secPlayer, 255, 255, 0)
								end
							end
						end
						if(getElementData(secPlayer, "AdminJail") ~= false) then
							if(getElementData(secPlayer, "AdminJail") > 0) then
								local ntimer = toch(getElementData(secPlayer, "AdminJail")) - 1
								if(ntimer > 0 and math.fmod(ntimer, 60) == 0) then
									addBox("Вам осталось сидеть\nВ тюрьме: " .. ntimer / 60 .. " мин.", secPlayer, 255, 0, 0)
								end
								SED(secPlayer, "AdminJail", ntimer)
							elseif(getElementData(secPlayer, "AdminJail") == 0) then
								dbExec(mysql, "UPDATE `Accounts` SET `AdminJail` = ? WHERE `ID` = ?", getElementData(secPlayer, "AdminJail"), getElementData(secPlayer, "AccID"))
								removeElementData(secPlayer, "AdminJail")
								if(getElementData(secPlayer, "PoliceJail") == false) then
									SED(secPlayer, "ABB", true)
									setTimer(function ( sdr )
										if(isElement(sdr)) then
											removeElementData(sdr, "ABB")
										end
									end, 150, 1, secPlayer)
									SEP(secPlayer, -868.3828125, -680.7021484375, 11.203320503235)
									SET(secPlayer, 0)
									SIDP(secPlayer, 0)
									addBox("Вы отсидели свой срок.", secPlayer, 255, 255, 0)
								end
							end
						end
					end
				end
			end
		end
	end
end

function getAllPlayers(  )
	return IDS
end

function onHealMe( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Aptechka") ~= false) then
			if(getElementData(thePlayer, "Aptechka") == 1) then
				removeElementData(thePlayer, "Aptechka")
			else
				SED(thePlayer, "Aptechka", getElementData(thePlayer, "Aptechka") - 1)
			end
			local health = getElementHealth(thePlayer)
			if(health <= 60) then
				setElementHealth(thePlayer, health + 40)
			else
				setElementHealth(thePlayer, 100)
			end
			addBox("Вы начали перевязывать раны.\nПожалуйста, подождите.", thePlayer, 255, 0, 0)
			setPedAnimation(thePlayer, "bd_fire", "wash_up", 15000, true, true, false) 
			SED(thePlayer, "Tazered", true)
			setTimer(function ( elem )
				if(isElement(elem)) then
					removeElementData(elem, "Tazered")
					setPedAnimation(thePlayer, "BSKTBALL", "BBALL_idle_O", 1, false)
				end
			end, 14500, 1, thePlayer)
		else
			addBox("Ошибка: У Вас нет аптечки.\nПриобрести её можно в 24/7.\n(/GPS - ближайший 24/7)", thePlayer, 255, 0, 0)
		end
	end
end

addCommandHandler("healme",	onHealMe)
addCommandHandler("psrd",	pulseTimer)

function healthForFood(  )
	for i, p in pairs(IDS) do
		if(getElementData(p, "Login") == true) then
			if(getElementData(p, "Food") <= 1) then
				setElementHealth(p, getElementHealth(p) - 1)
			end
		end
	end
end

setTimer(healthForFood, 6000, 0)

function showPlayerDialog( ... )
	if(arg[1] ~= nil) then
		if(arg[2] ~= nil) then
			if(toch(arg[2]) ~= nil) then
				if(toch(arg[2]) > 0) then
					if(arg[3] ~= nil) then
						if(toch(arg[3]) ~= nil) then
							arg[3] = toch(arg[3])
							if(arg[3] == 2) then
								if(arg[4] ~= nil) then
									if(arg[5] ~= nil) then
										if(arg[6] ~= nil) then
											if(arg[7] ~= nil) then
												triggerClientEvent(arg[1], "startChooseBrowser", arg[1], "input", arg[2], arg[4], arg[5], arg[6], arg[7])
											end
										end
									end
								end
							else
								triggerClientEvent(arg[1], "showDialog", arg[1], arg)
							end
						end
					end
				end
			end
		end
	end
end

function gpsHit( hit, dim )
	if(hit ~= nil) then
		if(isElement(hit)) then
			if(getElementType(hit) == "player") then
				local id = getElementData(hit, "ID")
				if(GPST[id] ~= nil) then
					if(isElement(GPST[id]["Pickup"]) == true) then
						if(GPST[id]["Pickup"] ~= nil) then
							if(getElementData(GPST[id]["Pickup"], "Player") == hit) then
								if(isElementVisibleTo(GPST[id]["Pickup"], hit) == true) then
									if(source == GPST[id]["Pickup"]) then
										local x, y, z = getElementPosition(hit)
										local x1, y1, z1 = getElementPosition(source)
										local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
										if(dist < 10) then
											removeEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
											destroyElement(GPST[id]["Pickup"])
											destroyElement(GPST[id]["Blip"])
											GPST[id] = nil
											addBox("Вы достигли точки назначения.", hit, 255, 0, 0)
										end
									end
								end
							end
						end
					end
				end
			end
		end
	end
end

function inputfunc(  player, key, keyState )
	if(getPedOccupiedVehicle(player) ~= false) then
		if(getElementData(player, "Cod") == false) then
			SED(player, "Cod", true)
			setTimer(function ( pl  )
				if(isElement(pl)) then
					removeElementData(pl, "Cod")
				end
			end, 700, 1, player)
			if(getElementData(player, "ToggleVeh") == true) then
				local veh = getPedOccupiedVehicle(player)
				if(getPedOccupiedVehicleSeat(player) == 0) then
					if(getVehicleEngineState(veh) == false) then
						if(getElementData(veh, "BusVehTable") == false) then
							if(getElementData(veh, "CourierVehID") == false) then
								if(getElementData(veh, "TaxiVehTable") == false) then
									if(getElementData(veh, "AshCar") == false) then
										if(getElementData(veh, "Fuel") > 0) then
											if(getElementHealth(veh) > 350) then
												setVehicleEngineState(veh, true)
												SED(veh, "Engine", true)
												local str = getElementData(player, "Name") .. " завел(а) двигатель автомобиля"
												local x, y, z = getElementPosition(player)
												for i,n in pairs(IDS) do
													if(getElementData(n, "Login") == true) then
														msgforcamera(str, n, 232, 183, 227, x, y, z, 30)
													end
												end
											else
												addBox("Ваше авто сломано.\nВы не можете его завести.", player, 255, 0, 0)
											end
										else
											addBox("В транспорте закончился бензин", player, 255, 0, 0)
										end
									else
										if(getElementData(veh, "Fuel") > 0) then
											if(getElementHealth(veh) > 350) then
												setVehicleEngineState(veh, true)
												SED(veh, "Engine", true)
												local str = getElementData(player, "Name") .. " завел(а) двигатель автомобиля"
												local x, y, z = getElementPosition(player)
												for i,n in pairs(IDS) do
													if(getElementData(n, "Login") == true) then
														msgforcamera(str, n, 232, 183, 227, x, y, z, 30)
													end
												end
											else
												addBox("Ваше авто сломано.\nВы не можете его завести.", player, 255, 0, 0)
											end
										else
											addBox("В транспорте закончился бензин", player, 255, 0, 0)
										end
									end
								else
									if(getElementData(veh, "TaxiVehTable") > 0) then
										if(getElementData(player, "PWork") == 2) then
											if(getElementData(player, "TaxiVehicle") == veh) then
												if(getElementData(veh, "Fuel") > 0) then
													if(getElementHealth(veh) > 350) then
														setVehicleEngineState(veh, true)
														SED(veh, "Engine", true)
														local str = getElementData(player, "Name") .. " завел(а) двигатель автомобиля"
														local x, y, z = getElementPosition(player)
														for i,n in pairs(IDS) do
															if(getElementData(n, "Login") == true) then
																msgforcamera(str, n, 232, 183, 227, x, y, z, 30)
															end
														end
													else
														addBox("Ваше авто сломано.\nВы не можете его завести.", player, 255, 0, 0)
													end
												else
													addBox("Ошибка: В транспорте закончился бензин", player, 255, 0, 0)
												end
											end
										else
											addBox("Ошибка: Вы не работаете таксистом.", player, 255, 0, 0)
										end
									end
								end
							else
								if(getElementData(veh, "CourierPlayer") == player) then
									if(getElementData(veh, "Fuel") > 0) then
										if(getElementHealth(veh) > 350) then
											setVehicleEngineState(veh, true)
											SED(veh, "Engine", true)
											local str = getElementData(player, "Name") .. " завел(а) двигатель автомобиля"
											local x, y, z = getElementPosition(player)
											for i,n in pairs(IDS) do
												if(getElementData(n, "Login") == true) then
													msgforcamera(str, n, 232, 183, 227, x, y, z, 30)
												end
											end
										else
											addBox("Ваше авто сломано.\nВы не можете его завести.", player, 255, 0, 0)
										end
									end
								end
							end
						else
							if(getElementData(veh, "DriverPlayerBus") == player) then
								if(getElementData(veh, "Fuel") > 0) then
									if(getElementHealth(veh) > 350) then
										setVehicleEngineState(veh, true)
										SED(veh, "Engine", true)
										local str = getElementData(player, "Name") .. " завел(а) двигатель автомобиля"
										local x, y, z = getElementPosition(player)
										for i,n in pairs(IDS) do
											if(getElementData(n, "Login") == true) then
												msgforcamera(str, n, 232, 183, 227, x, y, z, 30)
											end
										end
									else
										addBox("Ваше авто сломано.\nВы не можете его завести.", player, 255, 0, 0)
									end
								end
							end
						end
					else
						if(getElementModel(veh) ~= 481) then
							setVehicleEngineState(veh, false)
							SED(veh, "Engine", false)
							local str = getElementData(player, "Name") .. " заглушил(а) двигатель автомобиля"
							local x, y, z = getElementPosition(player)
							for i,n in pairs(IDS) do
								if(getElementData(n, "Login") == true) then
									msgforcamera(str, n, 232, 183, 227, x, y, z, 30)
								end
							end
						end
					end
				end
			end
		else
			local veh = getPedOccupiedVehicle(player)
			if(veh ~= false) then
				if(getElementModel(veh) ~= 481) then
					addBox("Пожалуйста, подождите.", player, 255, 255, 0)
				end
			end
		end
	end
end

function onAdminPm( thePlayer, command, id, ... )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			if(id ~= nil) then
				if(toch(id) ~= nil) then
					id = toch(id)
					if(IDS[id] ~= nil) then
						local secPlayer = IDS[id]
						if(getElementData(secPlayer, "Login") == true) then
							local arg = {...}
							if(#arg > 0) then
								local str = table.concat(arg, " ")
								if(string.len(str) > 0) then
									local str1 = "Администратор ".. getElementData(thePlayer, "Name") .. " [" .. getElementData(thePlayer, "ID") .. "] Вам лично: " .. str
									local str2 = "Администратор " .. getElementData(thePlayer, "Name") .. " [" .. getElementData(thePlayer, "ID") .. "] для " .. getElementData(secPlayer, "Name") .. " [" .. getElementData(secPlayer, "ID") .. "]: " .. str
									sendClientMessage(str1, secPlayer, 255, 207, 158)
									for i,n in pairs(IDS) do
										if(getElementData(n, "Login") == true) then
											if(getElementData(n, "Admin") > 0) then
												sendClientMessage(str2, n, 255, 207, 158)
											end
										end
									end
								else
									addBox("Вы не ввели текст.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Вы не ввели текст.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Данный игрок не авторизован.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Данный игрок не найден.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: /pm [id] [текст].", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: /pm [id] [текст].", thePlayer, 255, 0, 0)
			end
		end
	end
end

function getCoefMoney(  )
	return coefmoney
end

function mrkCourEnd( hit, dim )
	if(getElementType(hit) == "player") then
		if(getPedOccupiedVehicle(hit) == getElementData(hit, "CourierVehicle")) then
			if(getPedOccupiedVehicleSeat(hit) == 0) then
				if(getElementData(hit, "mrkCourierEnd") == source) then
					if(getElementData(hit, "Oppa") == false) then
						local gruzk = toch(getElementData(hit, "Coef")) * 300 * coefmoney
						setElementMoney(hit, gruzk, "Курьер")
						addBox("Поздравляем, Вы заработали " .. gruzk .. "$.\nОтправляйтесь на склад за новым заказом.", hit, 0, 255, 60)
						removeEventHandler("onMarkerHit", source, mrkCourEnd)
						destroyElement(source)
						local blp = getElementData(hit, "blpCourierEnd")
						destroyElement(blp)
						local mrkCourierStart = createMarker(-1006.375, -1385.2783203125, 10.563765525818, "cylinder", 2.5, 220, 0, 0, 220, hit)
						local blpCourierStart = createBlip(-1006.375, -1385.2783203125, 9.563765525818, 0, 2, 220, 0, 0, 220, 0, 65535, hit)
						addEventHandler("onMarkerHit", mrkCourierStart, courierStart)
						SED(mrkCourierStart, "courP", hit)
						SED(hit, "mrkCourierStart", mrkCourierStart)
						SED(hit, "blpCourierStart", blpCourierStart)
						removeElementData(hit, "mrkCourierEnd")
						removeElementData(hit, "blpCourierEnd")
						removeElementData(hit, "Coef")
					else
						kickPlayer(hit, "Cheat")
					end
				end
			end
		end
	end
end

function onHitGruzilo( hit, dim )
	if(getElementType(hit) == "player") then
		local veh = getPedOccupiedVehicle(hit)
		if(veh ~= false and veh ~= nil) then
			if(getPedOccupiedVehicleSeat(hit) == 0) then
				if(getElementData(veh, "ArmyCar") ~= false) then
					if(getElementData(veh, "ArmyGruz") ~= false) then
						if(getElementData(veh, "ArmyGruz") > 0) then
							local gruz = toch(getElementData(veh, "ArmyGruz"))
							if(Server["ArmyGruz"] == nil) then
								Server["ArmyGruz"] = 0
							end
							Server["ArmyGruz"] = Server["ArmyGruz"] + gruz
							removeElementData(veh, "ArmyGruz")
							addBox("Вы доставили " .. gruz .. " кг груза на военный склад!", hit, 0, 255, 60)
							addBox("На военном складе сейчас " .. Server["ArmyGruz"] .. " кг груза.", hit, 0, 255, 60)
							local blip = getElementData(hit, "blpArmyGruzilo")
							local mrk = getElementData(hit, "mrkArmyGruzilo")
							removeEventHandler("onMarkerHit", mrk, onHitGruzilo)
							removeElementData(hit, "blpArmyGruzilo")
							removeElementData(hit, "mrkArmyGruzilo")
							destroyElement(mrk)
							destroyElement(blip)
						else
							addBox("Ваша машина оказалась пустой. Пожалуйста, снова отправляйтесь в порт.", hit, 0, 60, 255)
							removeElementData(veh, "ArmyGruz")
						end
					else
						addBox("Ваша машина оказалась пустой. Пожалуйста, снова отправляйтесь в порт.", hit, 0, 60, 255)
					end
				end
			end
		end
	end
end

function inputlalt( player, key, state )
	if(getElementData(player, "Login") == true) then
		local veh = getPedOccupiedVehicle(player)
		if(veh ~= false) then
			if(getPedOccupiedVehicleSeat(player) == 0) then
				if(getElementModel(veh) ~= 481) then
					if(getVehicleOverrideLights(veh) == 1) then
						setVehicleOverrideLights(veh, 2)
					else
						setVehicleOverrideLights(veh, 1)
					end
				end
			end
		end
	end
end

function onMrkBus( hit, dim )
	if(hit ~= false) then
			if(dim == true) then 
			if(isElement(hit)) then
				if(getElementType(hit) == "player") then
					if(source ~= false) then
						if(getElementData(source, "Player") == hit) then
							local mrk = getElementData(hit, "mrkBus")
							local blp = getElementData(hit, "blpBus")
							destroyElement(mrk)
							destroyElement(blp)
							removeElementData(hit, "mrkBus")
							removeElementData(hit, "blpBus")
							local march = getElementData(hit, "March")
							if(march == 1) then
								local stage = getElementData(hit, "Stage")
								if(stage ~= 119 and stage % 6 ~= 5 and stage % 6 ~= 0) then
									local mrk = createMarker(mrksBusWork[march][stage+1]["x"], mrksBusWork[march][stage+1]["y"], mrksBusWork[march][stage+1]["z"], "checkpoint", 2.4, 220, 220, 0, 220, hit)
									local blp = createBlip(mrksBusWork[march][stage+1]["x"], mrksBusWork[march][stage+1]["y"], mrksBusWork[march][stage+1]["z"], 0, 2.4, 220, 220, 0, 220, 3, 64000, hit)
									if(stage < 118) then
										setMarkerTarget(mrk, mrksBusWork[march][stage+2]["x"], mrksBusWork[march][stage+2]["y"], mrksBusWork[march][stage+2]["z"])
									end
									SED(mrk, "Player", hit)
									SED(hit, "mrkBus", mrk)
									SED(hit, "blpBus", blp)
									addEventHandler("onMarkerHit", mrk, onMrkBus)
									SED(hit, "Stage", getElementData(hit, "Stage") + 1)
								elseif(stage % 6 == 5 and stage ~= 119) then
									local mrk = createMarker(mrksBusWork[march][stage+1]["x"], mrksBusWork[march][stage+1]["y"], mrksBusWork[march][stage+1]["z"], "checkpoint", 2.4, 220, 0, 0, 220, hit)
									local blp = createBlip(mrksBusWork[march][stage+1]["x"], mrksBusWork[march][stage+1]["y"], mrksBusWork[march][stage+1]["z"], 0, 2.4, 220, 0, 0, 220, 3, 64000, hit)
									if(stage < 118) then
										setMarkerTarget(mrk, mrksBusWork[march][stage+2]["x"], mrksBusWork[march][stage+2]["y"], mrksBusWork[march][stage+2]["z"])
									end
									SED(mrk, "Player", hit)
									SED(hit, "mrkBus", mrk)
									SED(hit, "blpBus", blp)
									addEventHandler("onMarkerHit", mrk, onMrkBus)
									SED(hit, "Stage", getElementData(hit, "Stage") + 1)
								elseif(stage % 6 == 0 and stage ~= 119) then
									setElementMoney(hit, 83 * coefmoney, "Водитель автобуса")
									setTimer(function ( m, s, h )
										if(isElement(h)) then
											if(getElementData(h, "March") == m and getElementData(h, "Stage") == s) then
												local mrk = createMarker(mrksBusWork[m][s+1]["x"], mrksBusWork[m][s+1]["y"], mrksBusWork[m][s+1]["z"], "checkpoint", 2.4, 220, 220, 0, 220, hit)
												local blp = createBlip(mrksBusWork[m][s+1]["x"], mrksBusWork[m][s+1]["y"], mrksBusWork[m][s+1]["z"], 0, 2.4, 220, 220, 0, 220, 3, 64000, hit)
												if(s < 118) then
													setMarkerTarget(mrk, mrksBusWork[m][s+2]["x"], mrksBusWork[m][s+2]["y"], mrksBusWork[m][s+2]["z"])
												end
												SED(mrk, "Player", h)
												SED(h, "mrkBus", mrk)
												SED(h, "blpBus", blp)
												addEventHandler("onMarkerHit", mrk, onMrkBus)
												SED(h, "Stage", getElementData(h, "Stage") + 1)
											end
										end
									end, 10 * 1000, 1, march, stage, hit)
									local x1, y1, z1 = getElementPosition(hit)
									for i,n in pairs(IDS) do
										if(getElementData(n, "Login") == true) then
											local x, y, z = getElementPosition(n)
											local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
											if(dist < 30) then
												msgforcamera( "Автобус отправляется с остановки через 10 секунд.", n, 0, 220, 30, x1, y1, z1, 30)
											end
										end
									end
								else
									local mrk = createMarker(mrksBusWork[march][1]["x"], mrksBusWork[march][1]["y"], mrksBusWork[march][1]["z"], "checkpoint", 2.4, 220, 220, 0, 220, hit)
									local blp = createBlip(mrksBusWork[march][1]["x"], mrksBusWork[march][1]["y"], mrksBusWork[march][1]["z"], 0, 2.4, 220, 220, 0, 220, 3, 64000, hit)
									SED(mrk, "Player", hit)
									SED(hit, "mrkBus", mrk)
									SED(hit, "blpBus", blp)
									addEventHandler("onMarkerHit", mrk, onMrkBus)
									SED(hit, "Stage", 1)
								end
							else
								local stage = getElementData(hit, "Stage")
								if(stage ~= 113 and stage % 6 ~= 5 and stage % 6 ~= 0) then
									local mrk = createMarker(mrksBusWork[march][stage+1]["x"], mrksBusWork[march][stage+1]["y"], mrksBusWork[march][stage+1]["z"], "checkpoint", 2.4, 220, 220, 0, 220, hit)
									local blp = createBlip(mrksBusWork[march][stage+1]["x"], mrksBusWork[march][stage+1]["y"], mrksBusWork[march][stage+1]["z"], 0, 2.4, 220, 220, 0, 220, 3, 64000, hit)
									if(stage < 112) then
										setMarkerTarget(mrk, mrksBusWork[march][stage+2]["x"], mrksBusWork[march][stage+2]["y"], mrksBusWork[march][stage+2]["z"])
									end
									SED(mrk, "Player", hit)
									SED(hit, "mrkBus", mrk)
									SED(hit, "blpBus", blp)
									addEventHandler("onMarkerHit", mrk, onMrkBus)
									SED(hit, "Stage", getElementData(hit, "Stage") + 1)
								elseif(stage % 6 == 5 and stage ~= 113) then
									local mrk = createMarker(mrksBusWork[march][stage+1]["x"], mrksBusWork[march][stage+1]["y"], mrksBusWork[march][stage+1]["z"], "checkpoint", 2.4, 220, 0, 0, 220, hit)
									local blp = createBlip(mrksBusWork[march][stage+1]["x"], mrksBusWork[march][stage+1]["y"], mrksBusWork[march][stage+1]["z"], 0, 2.4, 220, 0, 0, 220, 3, 64000, hit)
									if(stage < 112) then
										setMarkerTarget(mrk, mrksBusWork[march][stage+2]["x"], mrksBusWork[march][stage+2]["y"], mrksBusWork[march][stage+2]["z"])
									end
									SED(mrk, "Player", hit)
									SED(hit, "mrkBus", mrk)
									SED(hit, "blpBus", blp)
									addEventHandler("onMarkerHit", mrk, onMrkBus)
									SED(hit, "Stage", getElementData(hit, "Stage") + 1)
								elseif(stage % 6 == 0 and stage ~= 113) then
									setElementMoney(hit, 83 * coefmoney, "Водитель автобуса")
									setTimer(function ( m, s, h )
										if(isElement(h)) then
											if(getElementData(h, "March") == m and getElementData(h, "Stage") == s) then
												local mrk = createMarker(mrksBusWork[m][s+1]["x"], mrksBusWork[m][s+1]["y"], mrksBusWork[m][s+1]["z"], "checkpoint", 2.4, 220, 220, 0, 220, hit)
												local blp = createBlip(mrksBusWork[m][s+1]["x"], mrksBusWork[m][s+1]["y"], mrksBusWork[m][s+1]["z"], 0, 2.4, 220, 220, 0, 220, 3, 64000, hit)
												if(s < 112) then
													setMarkerTarget(mrk, mrksBusWork[m][s+2]["x"], mrksBusWork[m][s+2]["y"], mrksBusWork[m][s+2]["z"])
												end
												SED(mrk, "Player", h)
												SED(h, "mrkBus", mrk)
												SED(h, "blpBus", blp)
												addEventHandler("onMarkerHit", mrk, onMrkBus)
												SED(h, "Stage", getElementData(h, "Stage") + 1)
											end
										end
									end, 10 * 1000, 1, march, stage, hit)
									local x1, y1, z1 = getElementPosition(hit)
									for i,n in pairs(IDS) do
										if(getElementData(n, "Login") == true) then
											local x, y, z = getElementPosition(n)
											local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
											if(dist < 30) then
												msgforcamera( "Автобус отправляется с остановки через 10 секунд.", n, 0, 220, 30, x1, y1, z1, 30)
											end
										end
									end
								else
									local mrk = createMarker(mrksBusWork[march][1]["x"], mrksBusWork[march][1]["y"], mrksBusWork[march][1]["z"], "checkpoint", 2.4, 220, 220, 0, 220, hit)
									local blp = createBlip(mrksBusWork[march][1]["x"], mrksBusWork[march][1]["y"], mrksBusWork[march][1]["z"], 0, 2.4, 220, 220, 0, 220, 3, 64000, hit)
									SED(mrk, "Player", hit)
									SED(hit, "mrkBus", mrk)
									SED(hit, "blpBus", blp)
									addEventHandler("onMarkerHit", mrk, onMrkBus)
									SED(hit, "Stage", 1)
								end
							end
						end
					end
				end
			end
		end
	end
end

function onDialogResponse( dialogid, response, inputtext, listitem )
	if(dialogid == 3) then
		if(response == true) then
			SED(client, "PWork", 1)
			updatePlayerAccount(client, "Work", 1)
			addBox("Вы устроились на работу водителем автобуса.\nЧтобы начать работу, необходимо арендовать\nРабочий транспорт (/GPS - Работа)", client, 0, 60, 255)
		end
	elseif(dialogid == 4) then
		if(response == true) then
			removeElementData(source, "March")
			SED(client, "PWork", 0)
			updatePlayerAccount(client, "Work", 0)
			addBox("Вы уволились с работы водителем автобуса.", client, 0, 60, 255)
			if(getElementData(client, "VehicleDriverBus") ~= false and getElementData(client, "VehicleDriverBus") ~= nil) then
				local veh = getElementData(client, "VehicleDriverBus")
				local id = getElementData(veh, "BusVehTable")
				setTimer(customSpawnVehicle, 100, 1, veh)
				removeElementData(veh, "DriverPlayerBus")
				removeElementData(client, "VehicleDriverBus")
			end
			local mrk = getElementData(client, "mrkBus")
			local blp = getElementData(client, "blpBus")
			if(isElement(mrk) == true) then
				destroyElement(mrk)
			end
			if(isElement(blp) == true) then
				destroyElement(blp)
			end
			removeElementData(client, "Stage")
			removeElementData(client, "March")
			removeElementData(client, "mrkBus")
			removeElementData(client, "blpBus")
		end
	elseif(dialogid == 5) then
		if(response == true) then
			if(getElementData(client, "NWork") == 0) then
				if(toch(getElementData(client, "Money")) > 100) then
					local veh = getPedOccupiedVehicle(client)
					if(veh ~= false) then
						if(getElementData(veh, "BusVehTable") ~= false) then
							SED(veh, "DriverPlayerBus", client)
							SED(client, "VehicleDriverBus", veh)
							SED(veh, "Fuel", 100)
							setElementMoney(client, -100, "Аренда автобуса")
							local march = 0
							if(getElementData(veh, "BusPark") == 1) then
								SED(client, "March", 1)
								march = 1
							else
								SED(client, "March", 2) 
								march = 2
							end
							SED(client, "Stage", 1)
							local mrk = createMarker(mrksBusWork[march][1]["x"], mrksBusWork[march][1]["y"], mrksBusWork[march][1]["z"], "checkpoint", 2.4, 220, 220, 0, 220, client)
							local blp = createBlip(mrksBusWork[march][1]["x"], mrksBusWork[march][1]["y"], mrksBusWork[march][1]["z"], 0, 2.4, 220, 220, 0, 220, 3, 64000, client)
							setMarkerTarget(mrk, mrksBusWork[march][2]["x"], mrksBusWork[march][2]["y"], mrksBusWork[march][2]["z"])
							SED(mrk, "Player", client)
							SED(client, "mrkBus", mrk)
							SED(client, "blpBus", blp)
							addEventHandler("onMarkerHit", mrk, onMrkBus)
							toggleControl ( client, "accelerate", true ) 
							toggleControl ( client, "brake_reverse", true )
							toggleControl ( client, "handbrake", true )
							SED(client, "ToggleVeh", true)
							addBox("Вы успешно арендовали автобус.\nОтправляйтесь по чекпоинтам,\nУстановленным на пути.\n \nУдачи на дорогах и соблюдайте ПДД!", client, 0, 255, 100)
						else
							addBox("Произошла ошибка, повторите попытку.", client, 255, 0, 0)
							setControlState(source, "enter_exit", true)
						end
					else
						addBox("Произошла ошибка, повторите попытку.", client, 255, 0, 0)
						setControlState(source, "enter_exit", true)
					end
				else
					setControlState(client, "enter_exit", true)
					addBox("У вас недостаточно денег, чтобы арендовать данный транспорт", client, 255, 0, 0)
				end
			else
				addBox("Ошибка: Чтобы арендовать автобус\nВам необходимо уволиться\nС начальной работы.", client, 255, 0, 0)
			end
		elseif(response == false) then
			setControlState(client, "enter_exit", true)
		end
	elseif(dialogid == 22) then
		if(response == true) then
			if(getElementData(client, "NWork") == 0) then
				if(getElementData(client, "Money") >= 1000) then
					local veh = getPedOccupiedVehicle(client)
					if(veh ~= nil and veh ~= false) then
						SED(veh, "CourierPlayer", client)
						SED(client, "CourierVehicle", veh)
						setElementMoney(client, -1000, "Аренда курьер")
						toggleAllControls(client, true)
						addBox("Вы успешно арендовали грузовое\nТранспортное средство.", client, 0, 255, 60)
						addBox("Отправляйтесь на склад, чтобы забрать груз.\n(Отмечено на мини-карте)", client, 0, 60, 255)
						local mrk = createMarker(-1006.375, -1385.2783203125, 10.563765525818, "cylinder", 2.5, 220, 0, 0, 220, client)
						local blp = createBlip(-1006.375, -1385.2783203125, 9.563765525818, 0, 2, 220, 0, 0, 220, 0, 65535, client)
						SED(client, "mrkCourierStart", mrk)
						SED(client, "blpCourierStart", blp)
						SED(mrk, "courP", client)
						SED(veh, "CourierPlayer", client)
						toggleControl ( client, "accelerate", true ) 
						toggleControl ( client, "brake_reverse", true )
						toggleControl ( client, "handbrake", true )
						SED(client, "ToggleVeh", true)
						SED(veh, "Fuel", 100)
						addEventHandler("onMarkerHit", getElementData(client, "mrkCourierStart"), courierStart)
					else
						addBox("Произошла ошибка.", client, 255, 0, 0)
					end
				else
					setControlState(client, "enter_exit", true)
					addBox("У Вас недостаточно денег для аренды данного т/c.", client, 255, 0, 0)
				end
			else
				addBox("Ошибка: Чтобы арендовать автобус\nВам необходимо уволиться\nС начальной работы.", client, 255, 0, 0)
			end
		else
			addBox("Вы отказались от аренды\nГрузового транспортного средства.", client, 255, 0, 0)
			setControlState(client, "enter_exit", true)
		end
	elseif(dialogid == 24) then
		if(response == true) then
			if(listitem >= 0) then
				setPedAnimation(client, AnimList[listitem]["Block"], AnimList[listitem]["Anim"], 4100, true, false)
				bindKey(client, "space", "down", function ( pl )
					setPedAnimation(pl, "BSKTBALL", "BBALL_idle_O", 1, false)
					unbindKey(pl, "space", "down")
					SED(pl, "AntiSbiv", false)
				end, client)
				SED(client, "AntiSbiv", true)
			end
		else

		end
	elseif(dialogid == 49) then
		if(response == true) then
			local fuel = inputtext
			fuel = string.gsub(inputtext, "%s+", "")
			local ch = string.len(fuel)
			if(ch ~= 0) then
				local b = false
				for i=1,ch do
					local stl = string.sub(fuel, i, i)
					if((string.byte(stl) > 47 and string.byte(stl) < 58) ) then
					else
						b = true
						showPlayerDialog(client, 49, 2, "Заправка транспортного средства", "Введите количество литров\nКоторое Вы хотите заправить.\nЦена за литр: 50$", "Заправить", "Отмена")
						return false
					end
				end 
				if(b == false) then
					local fuel = math.round(inputtext)
					if(fuel > 0) then
						if(toch(getElementData(getPedOccupiedVehicle(client), "Fuel")) + fuel < 101) then
							local zp = getElementData(client, "Fstation")
							if(toch(getElementData(client, "Money")) - fuel * BusinessTable[zp]["P1"] > 0) then
								if(zp ~= false) then
									local pr = BusinessTable[zp]["Products"]
									if(pr - math.floor(fuel - 0.5 * fuel) >= 0) then
										BusinessTable[zp]["Products"] = BusinessTable[zp]["Products"] - math.floor(fuel - 0.5 * fuel)
										setBusinessMoney(zp, fuel * BusinessTable[zp]["P1"])
										local veh = getPedOccupiedVehicle(client)
										SED(veh, "Fuel", toch(getElementData(veh, "Fuel")) + fuel)
										setElementMoney(client, fuel * BusinessTable[zp]["P1"] * (-1), "Покупка бенз")
										removeElementData(client, "Fstation")
										dbExec(mysql, "UPDATE `Business` SET `Products` = ? WHERE `ID` = ?", BusinessTable[zp]["Products"], zp)
										addBox("Вы заправили " .. fuel .. " л. бензина.", client, 0, 255, 100)
									else
										addBox("Ошибка: На складе данной заправки\nНедостаточно топлива.", client, 255, 0, 0)
									end
								else
									addBox("Ошибка: Произошла системная ошибка.", client, 255, 0, 0)
								end
							else
								addBox("Ошибка: У вас недостаточно денег", client, 255, 0, 0)
								removeElementData(client, "Fstation")
							end
						else
							addBox("Ошибка: Ваш транспорт не вмещает\nБольше 100 литров!", client, 255, 0, 0)
							removeElementData(client, "Fstation")
						end
					else
						addBox("Ошибка: Некорректно введено число.", client, 255, 0, 0)
						removeElementData(client, "Fstation")
					end
				else
					addBox("Ошибка: Некорректно введено число.", client, 255, 0, 0)
					removeElementData(client, "Fstation")
				end
			else
				addBox("Ошибка: Некорректно введено число.", client, 255, 0, 0)
				removeElementData(client, "Fstation")
			end
		else
			return false
		end
	elseif(dialogid == 6) then
		if(response == true) then
			SED(client, "PWork", 2)
            updatePlayerAccount(client, "Work", 2)
			addBox("Вы успешно устроились на работу в такси!\nЧтобы начать работу, необходимо арендовать\nРабочий транспорт (/GPS - Работа)", client, 0, 100, 255)
		end
	elseif(dialogid == 7) then
		if(response == true) then
			if(getPedOccupiedVehicle(client) == false or getPedOccupiedVehicle(client) == nil) then
				if(getElementData(client, "House") ~= nil and getElementData(client, "House") ~= false) then
					if(getElementData(client, "House") == 0) then
						if(toch(getElementData(client, "Price")) ~= nil) then
							if(toch(getElementData(client, "Money")) >= toch(getElementData(client, "Price"))) then
								local house = toch(getElementData(client, "Dom"))
								if(HouseTable[house]["PID"] == 0) then
									local str = dbPrepareString(mysql, "UPDATE `Accounts` SET `House` = ? WHERE `Name` = ?", getElementData(client, "Dom"), getElementData(client, "Name")) 
									dbExec(mysql, str)
									local str = dbPrepareString(mysql, "UPDATE `House` SET `PID` = ?, `PName` = ?, `PayDay` = 24 WHERE `ID` = ?", getElementData(client, "AccID"), getElementData(client, "Name"), toch(getElementData(client, "Dom")))
									dbExec(mysql, str)
									setElementMoney(client, toch(getElementData(client, "Price")) * (-1), "Покупка дома")
									addBox("Вы приобрели дом №" .. getElementData(client, "Dom") .. ".\nПоздравляем с покупкой!", client, 0, 255, 100)
									destroyElement(HouseTable[house]["Pickup"])
									destroyElement(HouseTable[house]["Blip"])
									SED(client, "SpawnID", 1)
									updatePlayerAccount(client, "SpawnID", 1)
									HouseTable[house]["Pickup"] 	= createPickup(HouseTable[house]["x"], HouseTable[house]["y"], HouseTable[house]["z"], 3, 1272, 0)
									HouseTable[house]["Blip"] 	= createBlip(HouseTable[house]["x"], HouseTable[house]["y"],  HouseTable[house]["z"], 32, 2, 0, 0, 0, 0, 0, 250)
									HouseTable[house]["PID"]	= getElementData(client, "AccID")
									HouseTable[house]["PName"]	= getElementData(client, "Name")
									HouseTable[house]["PayDay"]	= 24
									SED(HouseTable[house]["Pickup"], "ID", house)
									SED(client, "House", house)
								else
									addBox("Ошибка: Данный дом уже куплен.", client, 255, 0, 0)
								end
							else
								addBox("Ошибка: У Вас недостаточно денег,\nЧтобы совершить эту покупку.", client, 255, 0, 0)
							end
						else
							addBox("Произошла ошибка.\nОбратитесь к администрации.", client, 255, 0, 0)
						end
					elseif(getElementData(client, "House") > 0) then
						addBox("Ошибка: У Вас уже есть дом.", client, 255, 0, 0)
					end
				else
					addBox("Ошибка: У вас уже есть дом", client, 255, 0, 0)
				end
			end
		end
		removeElementData(client, "Dom")
		removeElementData(client, "Price")
	elseif(dialogid == 8) then
		if(response == true) then
			SED(client, "PWork", 0)
            updatePlayerAccount(client, "Work", 0)
			addBox("Вы уволились из работы в такси.", client, 0, 60, 255)
			if(getElementData(client, "TaxiVehicle") ~= nil and getElementData(client, "TaxiVehicle") ~= false) then
				local veh = getElementData(client, "TaxiVehicle")
				spawnVehicle(veh, -205 - (toch(getElementData(veh, "TaxiVehTable")) - 1) * 3, -1472 + (toch(getElementData(veh, "TaxiVehTable")) - 1) * 12, 9, 0, 0, 280)
				setElementHealth(veh, 1000)
				setTimer(setElementHealth, 3000, 1, veh, 1000)
				removeElementData(veh, "TaxiDriverPlayer")
				removeElementData(client, "TaxiVehicle")
			end
		end
	elseif(dialogid == 9) then
		if(response == true) then
			if(getElementData(client, "NWork") == 0) then
				if(getElementData(client, "Money") >= 100) then
					setElementMoney(client, -100, "Аренда такси")
					local veh = getPedOccupiedVehicle(client)
					SED(veh, "TaxiDriverPlayer", client)
					SED(client, "TaxiVehicle", veh)
					toggleControl ( client, "accelerate", true ) 
					toggleControl ( client, "brake_reverse", true )
					toggleControl ( client, "handbrake", true )
					SED(client, "ToggleVeh", true)
					addBox("Вы успешно арендовали данное такси.\nЧтобы выписать чек пассажиру,\nИспользуйте /taxiprice [id] [Сумма].\nСумма для новичков не может быть более 250$.", client, 0, 60, 255)
				else
					setControlState(client, "enter_exit", true)
					addBox("Ошибка: У вас недостаточно денег,\nЧтобы арендовать этот транспорт", client, 255, 0, 0)
				end
			else
				addBox("Ошибка: Чтобы арендовать автобус\nВам необходимо уволиться\nС начальной работы.", client, 255, 0, 0)
			end
		elseif(response == false) then
			setControlState(client, "enter_exit", true)
		end
	elseif(dialogid == 10) then
		if(response == true) then
			local dom = toch(getElementData(client, "Dom"))
			if(dom ~= nil) then
				if(HouseTable[dom]["Open"] == true) then
					SET(client, HouseTable[dom]["Interior"])
					SEP(client, HouseTable[dom]["hx"], HouseTable[dom]["hy"], HouseTable[dom]["hz"])
					SED(client, "Hint", getElementData(client, "Dom"))
					SIDP(client, dom)
					removeElementData(client, "Dom")
					SED(client, "gde", dom)
				else
					addBox("Данный дом закрыт.", client, 255, 0, 0)
				end
			else
				addBox("Произошла ошибка: Повторите попытку.", client, 255, 0, 0)
			end
		end
	elseif(dialogid == 11) then
		if(response == true) then
			if(listitem == 0) then
				if(getElementData(client, "NWork") == 0) then
					toggleControl(client, "jump", false)
					triggerClientEvent(client, "LoaderWorkStart", client)
					if(getElementData(client, "Quest") == 5) then
						addBox("Подсказка: Чтобы продолжить историю,\nВам необходимо перенести 350 кг груза!", client, 0, 255, 60)
					end
					showPlayerDialog(client, 64000, 1, "Информация о работе", "Добро пожаловать на работу грузчиком!\nСуть данной работы заключается в том, что Вам необходимо\nНосить груз из корабля к основанию порта.\nНа данной работе не используются команды.\nВам необходимо идти ходить по чекпоинтам, обозначенным на карте.\nВы будете получать 1$ за каждый килограмм.\nЧтобы получить заработную плату, необходимо вернуться\nНа это же место и уволиться с работы.", "Ок", "Отмена")
				elseif(getElementData(client, "NWork") == 1) then
					addBox("Вы уже работаете грузчиком.", client, 255, 0, 0)
				else
					addBox("Вы уже работаете в другом месте.", client, 255, 0, 0)
				end
			elseif(listitem == 1) then
				if(getElementData(client, "NWork") == 0) then
					if(getElementData(client, "Lvl") > 1) then
						if(getElementData(client, "AutoLicense") == 1) then
							local id = getElementData(client, "ID")
							if(GPST[id] ~= nil) then
								if(GPST[id]["Pickup"] ~= nil) then
									if(getElementType(GPST[id]["Pickup"]) == "marker") then
										removeEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
										destroyElement(GPST[id]["Pickup"])
										destroyElement(GPST[id]["Blip"])
										GPST[id] = nil
									end
								end
							end
							GPST[id] = {}
							GPST[id]["Pickup"] = createMarker(-731.2158203125, -1412.890625, 11.205111503601, "checkpoint", 4, 220, 0, 0, 220, client)
							GPST[id]["Blip"]	= createBlip(-731.2158203125, -1412.890625, 11.205111503601, 0, 2, 220, 0, 0, 220, 0, 64000, client)
							SED(GPST[id]["Pickup"], "Player", client)
							addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
							SED(client, "NWork", 8)
							addBox("Вы успешно устроились на работу\nВодителем погрузчика.\nПарковка погрузчиков помечена на GPS.", client, 0, 255, 60)
							setElementModel(client, 16)
							toggleControl(client, "special_control_down", false)
							toggleControl(client, "special_control_up", false)
							showPlayerDialog(client, 64000, 1, "Информация о работе", "Добро пожаловать на работу водителем погрузчика!\nСуть данной работы заключается в развозке ящиков по точкам порта.\nЧтобы начать работу, необходимо иметь #0033ffВТОРОЙ УРОВЕНЬ И ВОДИТЕЛЬСКИЕ ПРАВА.\nЧтобы начать работу, необходимо устроиться в раздевалке рядом.\n \n#0033ffПоследовательность действий:\n#0033ffУстраиваетесь на работу и арендуете кар #00dd44(бесплатно)\n#0033ffНаправляетесь на место разгрузки #ff3300(отмеченное в GPS)\n#0033ffЗабираете груз и отвозите в указанную точку в порту.\n \n#00dd44Аренда кара бесплатна.\n#00dd44Оплата производится по факту доставки.", "Ок", "Отмена")
						else
							addBox("Чтобы устроиться на данную работу\nНеобходимо иметь лицензию на вождение.", client, 255, 0, 0)
						end
					else
						addBox("Чтобы устроиться на данную работу\nНеобходимо иметь второй уровень.", client, 255, 0, 0)
					end
				elseif(getElementData(client, "NWork") == 8) then
					addBox("Вы уже работаете\nВодителем погрузчика.", client, 255, 0, 0)
				else
					addBox("Вы уже работаете в другом месте.", client, 255, 0, 0)
				end
			else
				if(getElementData(client, "NWork") == 1) then
					toggleControl(client, "jump", true)
					triggerClientEvent(client, "EndLoaderWork", client)
				elseif(getElementData(client, "NWork") == 8) then
					addBox("Вы уволились с работы\nВодителем погрузчика.", client, 0, 255, 60)
					SED(client, "NWork", 0)
					if(getElementData(client, "Faction") >= 1 and getElementData(client, "Faction") <= 4) then
						setElementModel(client, getElementData(client, "WorkSkin"))
					else
						setElementModel(client, getElementData(client, "Skin"))
					end
					exports.loaderWork:clearLoaderCar(client)
				elseif(getElementData(client, "NWork") == 0) then
					addBox("Вы не работаете грузчиком.", client, 255, 0, 0)
				else
					addBox("Вы уже устроены где-то в другом месте.", client, 255, 0, 0)
				end
			end
		end
	elseif(dialogid == 13) then
		if(response == true) then
			addBox("Вы устроились на работу\nРазвозчиком продуктов!", client, 0, 60, 255)
			SED(client, "PWork", 3)
            updatePlayerAccount(client, "Work", 3)
			addBox("Чтобы начать работу, необходимо арендовать\nРабочий транспорт (/GPS - Работа)", client, 0, 90, 255)
		end
	elseif(dialogid == 14) then
		if(response == true) then
			addBox("Вы уволились с работы\nРазвозчиком продуктов!", client, 0, 60, 255)
			SED(client, "PWork", 0)
            updatePlayerAccount(client, "Work", 0)
			if(getElementData(client, "CourierVehicle") ~= false) then
				local veh = getElementData(client, "CourierVehicle")
				customSpawnVehicle(veh)
				removeElementData(veh, "CourierPlayer")
				removeElementData(client, "CourierVehicle")
			end
			if(getElementData(client, "mrkCourierStart") ~= false) then
				local mrk = getElementData(client, "mrkCourierStart")
				local blp = getElementData(client, "blpCourierStart")
				removeEventHandler("onMarkerHit", mrk, courierStart)
				destroyElement(mrk)
				destroyElement(blp)
				removeElementData(client, "mrkCourierStart")
				removeElementData(client, "blpCourierStart")
			end
			if(getElementData(client, "mrkCourierEnd") ~= false) then
				local mrk = getElementData(client, "mrkCourierEnd")
				local blp = getElementData(client, "blpCourierEnd")
				removeEventHandler("onMarkerHit", mrk, courierStart)
				destroyElement(mrk)
				destroyElement(blp)
				removeElementData(client, "mrkCourierEnd")
				removeElementData(client, "blpCourierEnd")
			end
			if(getElementData(client, "mrkCour") ~= false) then
				local mrk = getElementData(client, "mrkCour")
				local blp = getElementData(client, "blpCour")
				removeEventHandler("onMarkerHit", mrk, hitCourEnd)
				destroyElement(mrk)
				destroyElement(blp)
				removeElementData(client, "mrkCour")
				removeElementData(client, "blpCour")
				local bus = toch(getElementData(client, "courBiz"))
				OrderBiz[bus]["OrderCourier"] = nil
			end
		end
	elseif(dialogid == 15) then
		if(response == true) then
			addBox("Вы успешно устроились на работу строителем!\nЧтобы получить зарплату и закончить работу,\nНеобходимо уволиться на этом же месте.", client, 0, 255, 100)
			if(getElementData(client, "Quest") == 5) then
				addBox("Подсказка: Чтобы продолжить историю,\nВам необходимо перенести 35 упаковок!", client, 0, 255, 60)
			end
			triggerClientEvent(client, "onClientPDHBuilder", client)
			SED(client, "NWork", 5)
			setElementModel(client, 16)
			triggerClientEvent(client, "BuilderStart", client)
		end
		triggerClientEvent(client, "onClientClearBuilder", client)
	elseif(dialogid == 16) then
		if(response == true) then
			addBox("Вы уволились с работы строителем!", client, 0, 255, 100)
			SED(client, "NWork", 0)
			setElementModel(client, getElementData(client, "Skin"))
			triggerClientEvent(client, "BuilderEnd", client)
			triggerClientEvent(client, "onClientClearBuilder", client)
			if(objeect[toch(getElementData(client, "ID"))] ~= nil) then
				destroyElement(objeect[toch(getElementData(client, "ID"))])
				objeect[toch(getElementData(client, "ID"))] = nil
				setPedAnimation(client, nil, nil)
			end
		end
		triggerClientEvent(client, "onClientClearBuilder", client)
	elseif(dialogid == 17) then
		if(response == true) then
			local secPlayer = getElementData(client, "SellPlayer")
			if(isElement(secPlayer) == true) then
				local secid = getElementData(secPlayer, "AccID")
				local money = toch(getElementData(client, "Money"))
				local price = toch(getElementData(client, "HousePrice"))
				if(money >= price) then
					local house = toch(getElementData(secPlayer, "House"))
					if(secid == HouseTable[house]["PID"]) then
						if(HouseTable[house]["Car1"] == 0 and HouseTable[house]["Car2"] == 0 and HouseTable[house]["Car3"] == 0 and HouseTable[house]["Car4"] == 0) then
							local Name = getElementData(client, "PNameHouse")
							local fName = HouseTable[house]["PName"]
							if(Name == fName) then
								money = money - price
								setElementMoney(client, -price, "Покупка дома")
								SED(client, "House", house)
								HouseTable[house]["PName"] = getElementData(client, "Name")
								HouseTable[house]["OwnerPlayer"] = client
								local SecPlayer = getElementData(client, "SellPlayer")
								local SecMoney = getElementData(SecPlayer, "Money")
								SecMoney = SecMoney + price
								setElementMoney(SecPlayer, price, "Продажа дома")
								SED(SecPlayer, "House", 0)
								local qq = dbQuery(mysql, "SELECT `ID` from `Accounts` WHERE `Name` = ?", getElementData(client, "Name"))
								local result = dbPoll(qq, -1)
								dbFree(qq)
								HouseTable[house]["PID"] = result[1]["ID"]
								dbExec(mysql, "UPDATE `House` SET `PID` = ?, `PName` = ? WHERE `ID` = ?", result[1]["ID"], getElementData(client, "Name"), house)
								dbExec(mysql, "UPDATE `Accounts` SET `House` = ? WHERE `Name` = ?", 0, fName)
								dbExec(mysql, "UPDATE `Accounts` SET `House` = ? WHERE `Name` = ?", house, getElementData(client, "Name"))
								setElementMoney(client, -money, "Покупка дом")
								setElementMoney(client, money, "Продажа дом")
								addBox("Вы успешно купили дом\nУ игрока " .. getElementData(secPlayer, "Name"), client, 0, 255, 100)
								addBox("Вы успешно продали дом\nИгроку " .. getElementData(client, "Name"), secPlayer, 0, 255, 100)
							else
								addBox("Ошибка #031", client, 255, 0, 0)
							end
						else
							addBox("Ошибка: Сначала продайте машину.", secPlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: Дом уже был продан.", client, 255, 0, 0)
					end
				else
					addBox("Ошибка: У Вас недостаточно денег.", client, 255, 0, 0)
				end
			else
				addBox("Ошибка: Продавец вышел из игры.", client, 255, 0, 0)
			end
		end
	elseif(dialogid == 18) then
		if(response == true) then
			local money = toch(getElementData(client, "Money"))
			local house = toch(getElementData(client, "House"))
			local price = toch(HouseTable[house]["Price"] / 2)
			if(HouseTable[house]["Car1"] == 0 and HouseTable[house]["Car2"] == 0 and HouseTable[house]["Car3"] == 0 and HouseTable[house]["Car4"] == 0) then
				local id = toch(getElementData(client, "ID"))
				money = money + price
				dbExec(mysql, "UPDATE `Accounts` set `House` = ? WHERE `Name` = ?", 0, getElementData(client, "Name"))
				dbExec(mysql, "UPDATE `House` SET `PID` = ?, `PName` = '' WHERE `ID` = ?", 0, house)
				HouseTable[house]["PName"] = ""
				HouseTable[house]["PID"] = 0
				HouseTable[house]["OwnerPlayer"] = nil
				destroyElement(HouseTable[house]["Pickup"])
				destroyElement(HouseTable[house]["Blip"])
				HouseTable[house]["Pickup"] = createPickup(HouseTable[house]["x"], HouseTable[house]["y"], HouseTable[house]["z"], 3, 1273, 0)
				HouseTable[house]["Blip"] = createBlip(HouseTable[house]["x"], HouseTable[house]["y"], HouseTable[house]["z"], 31, 2, 0, 0, 0, 0, 0, 250)
				SED(HouseTable[house]["Pickup"], "ID", house)
				setElementMoney(client, price, "Продажа дома в гос")
				SED(client, "House", 0)
				if(PrivateCar[id] ~= nil) then
					local veh = PrivateCar[id]
					local vehid = getElementData(veh, "ID")
					VehicleTable[vehid] = nil
					destroyElement(veh)
				end
				addBox("Вы успешно продали дом государству.", client, 0, 255, 100)
			else
				addBox("Сначала продайте все авто.", client, 255, 0, 0)
			end
		end
		removeElementData(client, "HousePrice")
		removeElementData(client, "HouseID")
		removeElementData(client, "PNameHouse")
		removeElementData(client, "SellPlayer")
	elseif(dialogid == 19) then
		local secPlayer = getElementData(client, "LicBy")
		if(response == true) then
			local price = toch(getElementData(client, "LicPrice"))
			local money = toch(getElementData(client, "Money"))
			if(money >= price) then
				if(price ~= nil) then
					SED(client, "AutoLicense", 1)
					setElementMoney(client, -price, "Покупка лицензии")
					setElementMoney(secPlayer, math.floor(price / 5), "Продажа лицензии")
					dbExec(mysql, "UPDATE `Accounts` SET `AutoLicense` = 1 WHERE `Name` = ?", getElementData(client, "Name"))
					addBox("Вы успешно приобрели\nЛицензию на вождение", client, 0, 255, 100)
					addBox(getElementData(client, "Name") .. " приобрел\nУ Вас лицензию на вождение.", secPlayer, 0, 255, 100)
				else
					addBox("Произошла ошибка.", client, 255, 0, 0)
				end
			else
				addBox("У Вас недостаточно денег,\nЧтобы совершить данную покупку.", client, 255, 0, 0)
				addBox("Данный игрок отказался от покупки.", secPlayer, 255, 0, 0)
			end
		else
			addBox("Данный игрок отказался от покупки.", secPlayer, 255, 0, 0)
		end
	elseif(dialogid == 20) then
		if(response == true) then
			if(listitem == 0) then
				if(getElementData(client, "Lvl") > 1) then
					if(toch(getElementData(client, "PWork")) == 1) then
						showPlayerDialog(client, 4, 1, "Увольнение с работы водителем автобуса", "Вы действительно хотите уволиться с работы водителем автобуса?\nПримечание: Если Вы это сделаете\nВаш арендованный транспорт пропадет.", "Уволиться", "Отмена")
					elseif(toch(getElementData(client, "PWork")) == 0) then
						showPlayerDialog(client, 3, 1, "Устройство на работу водителем автобуса", "Действительно ли вы хотите устроиться на работу водителем автобуса?\nПримечание: Вам необходимо будет арендовать транспорт.\nБез транспортного средства Вы не сможете зарабатывать.", "Устроиться", "Отмена")
					else
                        addBox("Ошибка: Вы уже трудоустроены.", client, 255, 0, 0)
                    end
				else
					addBox("Вам необходимо прожить 2 года в штате.", client, 255, 0, 0)
				end
			elseif(listitem == 1) then
				if(getElementData(client, "Lvl") > 1) then
					if(toch(getElementData(client, "PWork")) == 2) then
						showPlayerDialog(client, 8, 1, "Увольнение с работы водителем такси", "Вы действительно хотите уволиться с работы такси?", "Уволиться", "Отмена")
					elseif(toch(getElementData(client, "PWork")) == 0) then
						showPlayerDialog(client, 6, 1, "Устройство на работу водителем такси", "Вы действительно хотите устроиться на работу водителем такси?", "Устроиться", "Отмена")
					else
						addBox("Ошибка: Вы уже трудоустроены.", client, 255, 0, 0)
					end
				else
					addBox("Вам необходимо прожить 2 года в штате.", client, 255, 0, 0)
				end
			elseif(listitem == 2) then
				if(getElementData(client, "Lvl") > 2) then
					if(getElementData(client, "PWork") == 0) then
						showPlayerDialog(client, 13, 1, "Устройство на работу развозчиком", "Действительно ли Вы хотите\nУстроиться на работу развозчиком продуктов?", "Устроиться", "Отмена")
					elseif(getElementData(client, "PWork") == 3) then
						showPlayerDialog(client, 14, 1, "Увольнение с работы развозчиком", "Действительно ли Вы хотите\nУволиться с работы развозчиком продуктов?", "Уволиться", "Отмена")
					else
						addBox("Ошибка: Вы уже трудоустроены.", client, 255, 0, 0)
					end
				else
					addBox("Вам необходимо прожить 3 года в штате.", client, 255, 0, 0)
				end
			elseif(listitem == 3) then
				if(getElementData(client, "Lvl") > 3) then
					if(getElementData(client, "PWork") == 0) then
						showPlayerDialog(client, 132, 1, "Устройство на работу водителем эвакуатора", "Действительно ли Вы хотите\nУстроиться на работу водителем эвакуатора?", "Устроиться", "Отмена")
					elseif(getElementData(client, "PWork") == 4) then
						showPlayerDialog(client, 133, 1, "Увольнение с работы водителем эвакуатора", "Действительно ли Вы хотите\nУволиться с работы водителем эвакуатора?", "Уволиться", "Отмена")
					else
						addBox("Ошибка: Вы уже трудоустроены.", client, 255, 0, 0)
					end
				else
					addBox("Вам необходимо прожить 4 года в штате.", client, 255, 0, 0)
				end
			end
		end
	elseif(dialogid == 21) then
		if(response == true) then
			if(isElement(client) == true) then
				local money = toch(getElementData(client, "Money"))
				SED(client, "Passport", 2)
				local name = getElementData(client, "Name")
				dbExec(mysql, "UPDATE `Accounts` SET `Passport` = 2 WHERE `Name` = ?", name)
				addBox("Поздравляем с получением с паспорта!", client, 0, 60, 255)
				addBox("Используйте /showpass [id],\nЧтобы показать паспорт другим игрокам.", client, 0, 60, 255)
				if(getElementData(client, "Quest") == 3) then
					addBox("Благодарим Вас за своевременное\nОформление документов.\nМы стараемся поддерживать наших граждан.\nПоэтому Вам выписан чек на 300$.", client, 0, 255, 60)
					setElementMoney(client, 300, "Квест паспорт")
					SED(client, "Quest", 4)
					dbExec(mysql, "UPDATE `Accounts` SET `Quest` = ? WHERE `Name` = ?", 4, getElementData(client, "Name"))
					getExp(client, 1)
					sendClientMessage("SMS от Ken_Rozenberg: Ты там все сделал? Не забудь поесть, а то мне дохляка еще на своей шее не хватало, можешь перекусить в забегаловке\n(/gps - ближайшая закусочная).", client, 255, 255, 0)
				end
			end
		end
	elseif(dialogid == 25) then
		if(response == true) then
			local id = toch(getElementData(client, "ID"))
			if(GPST[id] ~= nil) then
				if(GPST[id]["Pickup"] ~= nil) then
					if(getElementType(GPST[id]["Pickup"]) == "marker") then
						removeEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
						destroyElement(GPST[id]["Pickup"])
						destroyElement(GPST[id]["Blip"])
						GPST[id] = nil
					end
				end
			end
			if(listitem == 0) then
				showPlayerDialog(client, 27, 3, "GPS-навигатор", "Важные места\nАэропорт\nАвтошкола\nАвтосалон\nТорговый центр\nStarfish Island\nМаяк", "Выбор", "Назад")
			elseif(listitem == 1) then
				showPlayerDialog(client, 26, 3, "GPS-навигатор", "Работа\nПорт\nЗавод\nРазвозчик пиццы\nРыбалка", "Выбор", "Назад")
			elseif(listitem == 2) then
				showPlayerDialog(client, 130, 3, "GPS-навигатор", "Постоянная работа\nТакси парковка\nАвтобусная станция №1\nАвтобусная станция №2\nДоставка продуктов\nАренда эвакуаторов\nГараж эвакуаторов", "Выбор", "Отмена")
			elseif(listitem == 3) then
				showPlayerDialog(client, 28, 3, "GPS-навигатор", "Государственные учреждения\nVice City PD\nВоенная база\nБольница\nМэрия\nVice News", "Выбор", "Назад")
			elseif(listitem == 4) then
				showPlayerDialog(client, 82, 3, "GPS-навигатор", "Опасные районы\nLa Cosa Nostra\nColumbian Mafia\nMexican Cartel\nTriada", "Выбор", "Назад")
			elseif(listitem == 5) then
				local max = 5000
				local x, y, z = getElementPosition(client)
				local x2, y2, z2 = 0, 0, 0
				local iter = 1
				for i in pairs(FuelStation) do
					local x1, y1, z1 = FuelStation[iter]["x"], FuelStation[iter]["y"], FuelStation[iter]["z"]
					local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
					if(dist < max) then
						max = dist
						x2, y2, z2 = x1, y1, z1
					end
					iter = iter + 1
				end
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(x2, y2, z2, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]	= createBlip(x2, y2, z2, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				SED(GPST[id]["Pickup"], "Player", client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
			elseif(listitem == 6) then
				local id = toch(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(450.587890625, 992.2109375, 18.274263381958, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]	= createBlip(450.587890625, 992.2109375, 18.274263381958, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				SED(GPST[id]["Pickup"], "Player", client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
			elseif(listitem == 7) then
				local max = 5000
				local x, y, z = getElementPosition(client)
				local x2, y2, z2 = 0, 0, 0
				for i=10,24 do
					if(i ~= 19) then
						local x1, y1, z1 = BusinessTable[i]["x"], BusinessTable[i]["y"], BusinessTable[i]["z"]
						local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
						if(dist < max) then
							max = dist
							x2, y2, z2 = x1, y1, z1
						end
					end
				end
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(x2, y2, z2, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]	= createBlip(x2, y2, z2, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				SED(GPST[id]["Pickup"], "Player", client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
			elseif(listitem == 8) then
				local max = 5000
				local x, y, z = getElementPosition(client)
				local x2, y2, z2 = 0, 0, 0
				for i=101,106 do
					if(BusinessTable[i]["Owner"] > 0) then
						local x1, y1, z1 = BusinessTable[i]["x"], BusinessTable[i]["y"], BusinessTable[i]["z"]
						local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
						if(dist < max) then
							max = dist
							x2, y2, z2 = x1, y1, z1
						end
					end
				end
				if(max ~= 5000) then
					GPST[id] = {}
					GPST[id]["Pickup"] = createMarker(x2, y2, z2, "checkpoint", 4, 220, 0, 0, 220, client)
					GPST[id]["Blip"]	= createBlip(x2, y2, z2, 0, 2, 220, 0, 0, 220, 0, 64000, client)
					SED(GPST[id]["Pickup"], "Player", client)
					addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
				else
					addBox("Ошибка: Поблизости нет\nРаботающих закусочных.", client, 255, 0, 0)
				end
			elseif(listitem == 9) then
				local max = 5000
				local x, y, z = getElementPosition(client)
				local x2, y2, z2 = 0, 0, 0
				local iter = 1
				for i in pairs(BankomatsTable) do
					local x1, y1, z1 = BankomatsTable[iter]["x"], BankomatsTable[iter]["y"], BankomatsTable[iter]["z"]
					local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
					if(dist < max) then
						max = dist
						x2, y2, z2 = x1, y1, z1
					end
					iter = iter + 1
				end
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(x2, y2, z2, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]	= createBlip(x2, y2, z2, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				SED(GPST[id]["Pickup"], "Player", client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
			elseif(listitem == 10) then
				local max = 5000
				local x, y, z = getElementPosition(client)
				local x2, y2, z2 = 0, 0, 0
				local iter = 1
				for i,n in pairs(GPSRent) do
					local x1, y1, z1 = n["x"], n["y"], n["z"]
					local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
					if(dist < max) then
						max = dist
						x2, y2, z2 = x1, y1, z1
					end
					iter = iter + 1
				end
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(x2, y2, z2, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]	= createBlip(x2, y2, z2, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				SED(GPST[id]["Pickup"], "Player", client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
			elseif(listitem == 11) then
				showPlayerDialog(client, 123, 3, "Интересные места", "Название места\nСвалка\nКиностудия\nПляж", "Ок", "Отмена")
			elseif(listitem == 12) then
				local id = toch(getElementData(client, "ID"))
				if(getElementData(client, "House") > 0) then
					local house = toch(getElementData(client, "House"))
					if(HouseTable[house]["Car1"] > 0) then
						local veh = PrivateCar[id]
						local x, y, z = getElementPosition(veh)
						GPST[id] = {}
						GPST[id]["Pickup"] = createMarker(x, y, z, "checkpoint", 4, 220, 0, 0, 220, client)
						GPST[id]["Blip"]	= createBlip(x, y, z, 0, 2, 220, 0, 0, 220, 0, 64000, client)
						SED(GPST[id]["Pickup"], "Player", client)
						addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
					else
						addBox("Ошибка: У Вас нет машины.", client, 255, 0, 0)
					end
				else
					addBox("Ошибка: У Вас нет дома.", client, 255, 0, 0)
				end
			elseif(listitem == 13) then
				local id = toch(getElementData(client, "ID"))
				if(getElementData(client, "House") > 0) then
					local house = toch(getElementData(client, "House"))
					local x, y, z = HouseTable[house]["x"], HouseTable[house]["y"], HouseTable[house]["z"]
					GPST[id] = {}
					GPST[id]["Pickup"] = createMarker(x, y, z, "checkpoint", 4, 220, 0, 0, 220, client)
					GPST[id]["Blip"]	= createBlip(x, y, z, 0, 2, 220, 0, 0, 220, 0, 64000, client)
					SED(GPST[id]["Pickup"], "Player", client)
					addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
				else
					addBox("Ошибка: У Вас нет дома.", client, 255, 0, 0)
				end
			elseif(listitem == 14) then
				local id = toch(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(-55.16015625, -1482.482421875, 10.40248775482, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]	= createBlip(-55.16015625, -1482.482421875, 10.40248775482, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				SED(GPST[id]["Pickup"], "Player", client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
			end
		end
	elseif(dialogid == 26) then
		if(response == true) then
			if(listitem == 0) then
				local id = toch(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(-692.6728515625, -1322.0732421875, 11.029188156128, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]= createBlip(-692.6728515625, -1322.0732421875, 11.029188156128, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
				SED(GPST[id]["Pickup"], "Player", client)
			elseif(listitem == 1) then
				local id = toch(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(-755.6474609375, 1201.865234375, 11.027694702148, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]	= createBlip(-755.6474609375, 1201.865234375, 11.027694702148, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
				SED(GPST[id]["Pickup"], "Player", client)
			elseif(listitem == 2) then
				local id = toch(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(298.8896484375, -306.373046875, 11.922214508057, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]	= createBlip(298.8896484375, -306.373046875, 11.922214508057, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
				SED(GPST[id]["Pickup"], "Player", client)
			elseif(listitem == 3) then
				local id = toch(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(-637.5, -1494.6474609375, 13.749481201172, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]= createBlip(-637.5, -1494.6474609375, 13.749481201172, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
				SED(GPST[id]["Pickup"], "Player", client)
			end
		else
			showPlayerDialog(client, 25, 3, "GPS-навигатор", "Меню\nВажные места\nНачальные работы\nПостоянные работы\nГосударственные учреждения\nОпасные учреждения\nБлижайшая АЗС\nБлижайший магазин одежды\nБлижайший 24/7\nБлижайшая закусочная\nБлижайший банкомат\nБлижайшая аренда авто\nИнтересные места\nНайти моё авто\nНайти мой дом", "Выбор", "Отмена")
		end
	elseif(dialogid == 27) then
		if(response == true) then
			if(listitem == 0) then
				local id = toch(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(-1439.8828125, -827.697265625, 14.60027885437, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]	= createBlip(-1439.8828125, -827.697265625, 14.60027885437, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
				SED(GPST[id]["Pickup"], "Player", client)
			elseif(listitem == 1) then
				local id = toch(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(98.46484375, -809.4833984375, 10.425338745117, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]	= createBlip(98.46484375, -809.4833984375, 10.425338745117, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
				SED(GPST[id]["Pickup"], "Player", client)
			elseif(listitem == 2) then
				local id = toch(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(-1008.3798828125, -878.2578125, 12.849883079529, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]	= createBlip(-1008.3798828125, -878.2578125, 12.849883079529, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
				SED(GPST[id]["Pickup"], "Player", client)
			elseif(listitem == 3) then
				local id = toch(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(280.6123046875, 1130.9873046875, 20.291193008423, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]	= createBlip(280.6123046875, 1130.9873046875, 20.291193008423, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
				SED(GPST[id]["Pickup"], "Player", client)
			elseif(listitem == 4) then
				local id = toch(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(-347.2626953125, -473.8447265625, 11.052305221558, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]= createBlip(-347.2626953125, -473.8447265625, 11.052305221558, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
				SED(GPST[id]["Pickup"], "Player", client)
			elseif(listitem == 5) then
				local id = toch(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(445.5654296875, -1730.2333984375, 9.0785503387451, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]= createBlip(445.5654296875, -1730.2333984375, 9.0785503387451, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
				SED(GPST[id]["Pickup"], "Player", client)
			end
		else
			showPlayerDialog(client, 25, 3, "GPS-навигатор", "Меню\nВажные места\nНачальные работы\nПостоянные работы\nГосударственные учреждения\nОпасные районы\nБлижайшая АЗС\nБлижайший магазин одежды\nБлижайший 24/7\nБлижайшая закусочная\nБлижайший банкомат\nБлижайшая аренда авто\nИнтересные места\nНайти моё авто\nНайти мой дом", "Выбор", "Отмена")
		end
	elseif(dialogid == 28) then
		if(response == true) then
			if(listitem == 0) then
				local id = toch(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(-855.48828125, -682.1953125, 11.205850601196, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]	= createBlip(-855.48828125, -682.1953125, 11.205850601196, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
				SED(GPST[id]["Pickup"], "Player", client)
			elseif(listitem == 1) then
				local id = toch(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(-1694.3046875, -314.25, 14.661310195923, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]	= createBlip(-1694.3046875, -314.25, 14.661310195923, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
				SED(GPST[id]["Pickup"], "Player", client)
			elseif(listitem == 2) then
				local id = toch(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(-102.58203125, -984.3037109375, 10.423469543457, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]	= createBlip(-102.58203125, -984.3037109375, 10.423469543457, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
				SED(GPST[id]["Pickup"], "Player", client)
			elseif(listitem == 3) then
				local id = toch(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(-320.447265625, 1332.6630859375, 11.560050964355, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]	= createBlip(-320.447265625, 1332.6630859375, 11.560050964355, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
				SED(GPST[id]["Pickup"], "Player", client)
			elseif(listitem == 4) then
				local id = toch(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(-495.0625, 773.287109375, 10.963483810425, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]	= createBlip(-495.0625, 773.287109375, 10.963483810425, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
				SED(GPST[id]["Pickup"], "Player", client)
			end
		else
			showPlayerDialog(client, 25, 3, "GPS-навигатор", "Меню\nВажные места\nНачальные работы\nПостоянные работы\nГосударственные учреждения\nОпасные районы\nБлижайшая АЗС\nБлижайший магазин одежды\nБлижайший 24/7\nБлижайшая закусочная\nБлижайший банкомат\nБлижайшая аренда авто\nИнтересные места\nНайти моё авто\nНайти мой дом", "Выбор", "Отмена")
		end
	elseif(dialogid == 29) then
		if(response == true) then
			local price = toch(getElementData(client, "Sellvehprice"))
			local dom = toch(getElementData(client, "House"))
			local id = toch(getElementData(client, "Sellvehid"))
			if(dom > 0) then
				if(HouseTable[dom]["x"] ~= 0) then
					if(id >= 1 and id <= 4) then
						local veh = HouseTable[dom]["Car" .. id]
						if(veh > 0) then
							local id = getElementData(client, "ID")
							if(PrivateCar[id] ~= nil) then
								local vehid = getElementData(PrivateCar[id], "ID")
								customDestroyVehicle(PrivateCar[id])
								PrivateCar[id] = nil
							end
							setElementMoney(client, price, "Продажа т/c в гос")
							local vehid = getElementData(client, "Sellvehid")
							dbExec(mysql, "UPDATE `House` SET `Car" .. vehid  .. "` = 0 WHERE `ID` = ?", dom)
							addBox("Вы успешно продали Ваш транспорт.\nВы получили: " .. price .. "$.", client, 0, 255, 100)
							HouseTable[dom]["Car" .. vehid] = 0
							PrivateCar[id] = nil
						else
							addBox("Ошибка: У Вас нет машины.", client, 255, 0, 0)
						end
					else
						addBox("Ошибка: Системная ошибка.", client, 255, 0, 0)
					end
				else
					addBox("Ошибка: У Вас нет гаража.", client, 255, 0, 0)
				end
			else
				addBox("Ошибка: У Вас нет дома.", client, 255, 0, 0)
			end
		end
		removeElementData(client, "Sellvehprice")
	elseif(dialogid == 30) then
		if(response == true) then
			SED(client, "NWork", 6)
			addBox("Вы успешно устроились\nНа работу развозчиком пиццы.\nЧтобы получить зарплату и закончить работу,\nНеобходимо уволиться на этом же месте.", client, 0, 255, 100)
			addBox("Чтобы начать рабочий день, необходимо\nАрендовать мопед.", client, 0, 100, 255)
			showPlayerDialog(client, 64000, 1, "Помощь по работе развозчиком пиццы.", "Добро пожаловать на работу развозчиком пиццы!\nСмысл данной работы заключается в доставке продукции со склада,\nНа котором Вы находитесь, по точкам быстрого питания.\n \nПоследовательность действий:\n#0033dd Устраиваетесь на работу.\n#0033dd Бесплатно арендуете один из мопедов.\n#0033dd Забираете пиццу со склада.\n#0033dd Направляетесь к точке, слезаете с мопеда и передаете пиццу.\n \n#0033ddЧтобы закончить работу, Вы можете нажать цифру 2 и нажать \"Да\"\n#0033ddЛибо вернуться в раздевалку, находяющуся рядом.\n#00dd33Оплата за доставку фиксированная (40$).\n#ff0000* Точки, на которые нужно двигаться, помечены красным маркером и маячком в GPS.", "Окей", "Отмена")
		end
	elseif(dialogid == 31) then
		if(response == true) then
			SED(client, "NWork", 0)
			addBox("Вы уволились с работы\nРазвозчиком пиццы.", client, 0, 60, 255)
			checkqw(client, 4, getElementData(client, "Pochta"))
			removeElementData(client, "Pochta")
			if(getElementData(client, "MailVeh") ~= false) then
				local veh = getElementData(client, "MailVeh")
				customSpawnVehicle(veh)
				setElementHealth(veh, 1000)
				SED(veh, "Fuel", 40)
				removeElementData(veh, "MailPlayer")
				removeElementData(client, "MailVeh")
				if(getElementData(client, "blpMail") ~= false) then
					local blp = getElementData(client, "blpMail")
					local mrk = getElementData(client, "mrkMail")
					local aff = getEventHandlers("onMarkerHit", mrk)
					destroyElement(mrk)
					destroyElement(blp)
					removeElementData(client, "blpMail")
					removeElementData(client, "mrkMail")
				end
			end
			local obj = getElementData(client, "PizzaObject")
			if(obj ~= false) then
				if(isElement(obj)) then
					exports.bone:detachElementFromBone(obj)
					destroyElement(obj)
					removeElementData(client, "PizzaObject")
				end
			end
			setPedAnimation(client, "BSKTBALL", "BBALL_idle_O", 1, false)
		end
	elseif(dialogid == 32) then
		if(response == true) then
			local veh = getPedOccupiedVehicle(client)
			SED(veh, "MailPlayer", client)
			SED(client, "MailVeh", veh)
			addBox("Вы успешно арендовали данный транспорт.", client, 0, 255, 100)
			local mrkMail = createMarker(309.44921875, -299.9111328125, 10.922214508057, "cylinder", 4.0, 220, 0, 0, 220, client)
			local blpMail = createBlip(309.44921875, -299.9111328125, 10.922214508057, 0, 2, 220, 0, 0, 220, 10, 64000, client)
			addEventHandler("onMarkerHit", mrkMail, hitMrkMail)
			SED(client, "mrkMail", mrkMail)
			SED(client, "blpMail", blpMail)
			SED(mrkMail, "Player", client)
			toggleControl ( client, "accelerate", true ) 
			toggleControl ( client, "brake_reverse", true )
			toggleControl ( client, "handbrake", true )
			addBox("Вам необходимо подъехать к складу.\n(На карте создан маркер)", client, 0, 255, 100)
			SED(client, "ToggleVeh", true)
		else
			setControlState(client, "enter_exit", true)
			addBox("Вы отказались от аренды мопеда.", client, 255, 0, 0)
		end
	elseif(dialogid == 33) then
		if(response == true) then
			showPlayerDialog(client, 34, 3, "Какая максимальная скорость движения по городу?", "Вариант ответа\n1. 60 км/ч.\n2. 120 км/ч\n3. 90 км/ч\n4. 30км/ч", "Отправить", "Отмена")
		else
			addBox("Вы отказались от прохождения теста.", client, 255, 0, 0)
		end
	elseif(dialogid == 34) then
		if(response == true) then
			if(toch(listitem) ~= nil) then
				listitem = toch(listitem)
				if(listitem == 2) then
					showPlayerDialog(client, 35, 3, "Когда на транспортном средстве должны быть включены фары?", "Вариант ответа\n1. Только днём.\n2. В любое время суток\n3. В условиях ограниченной видимости.\n4. Только ночью.", "Отправить", "Отмена")
				else
					addBox("Вы ошиблись и тест завершен.\nПожалуйста, повторите попытку.", client, 255, 0, 0)
				end
			else
				addBox("Вы довели компьютер до системной ошибки\nТестирование завершено.", client, 255, 0, 0)
			end
		else
			addBox("Вы отказались от прохождения теста.", client, 255, 0, 0)
		end
	elseif(dialogid == 35) then
		if(response == true) then
			if(toch(listitem) ~= nil) then
				listitem = toch(listitem)
				if(listitem == 1) then
					showPlayerDialog(client, 36, 3, "Что необходимо делать, если слышен звукой сигнал виден проблесковый маячок?", "Вариант ответа\n1. Снизить скорость\n2. Напасть на источник звука.\n3. Прижаться вправо и уступить дорогу.\n4. Выпрыгнуть из машины и плакать.", "Отправить", "Отмена")
				else
					addBox("Вы ошиблись и тест завершен.\nПожалуйста, повторите попытку.", client, 255, 0, 0)
				end
			else
				addBox("Вы довели компьютер до системной ошибки\nТестирование завершено.", client, 255, 0, 0)
			end
		else
			addBox("Вы отказались от прохождения теста.", client, 255, 0, 0)
		end
	elseif(dialogid == 36) then
		if(response == true) then
			if(toch(listitem) ~= nil) then
				listitem = toch(listitem)
				if(listitem == 2) then
					showPlayerDialog(client, 37, 3, "Какая максимальная вместимость бака каждого транспортного средства?", "Вариант ответа\n1. 60 литров\n2. 40 литров\n3. 70 литров\n4. 100 литров", "Отправить", "Отмена")
				else
					addBox("Вы ошиблись и тест завершен.\nПожалуйста, повторите попытку.", client, 255, 0, 0)
				end
			else
				addBox("Вы довели компьютер до системной ошибки\nТестирование завершено.", client, 255, 0, 0)
			end
		else
			addBox("Вы отказались от прохождения теста.", client, 255, 0, 0)
		end
	elseif(dialogid == 37) then
		if(response == true) then
			if(toch(listitem) ~= nil) then
				listitem = toch(listitem)
				if(listitem == 3) then
					showPlayerDialog(client, 38, 3, "Когда нужно пропускать пешехода?", "Вариант ответа\n1. Всегда\n2. На выделенных зонах\n3. Никогда\n4. Только на дороге", "Отправить", "Отмена")
				else
					addBox("Вы ошиблись и тест завершен.\nПожалуйста, повторите попытку.", client, 255, 0, 0)
				end
			else
				addBox("Вы довели компьютер до системной ошибки\nТестирование завершено.", client, 255, 0, 0)
			end
		else
			addBox("Вы отказались от прохождения теста.", client, 255, 0, 0)
		end
	elseif(dialogid == 38) then
		if(response == true) then
			if(toch(listitem) ~= nil) then
				listitem = toch(listitem)
				if(listitem == 0) then
					if(GPST[id] ~= nil) then
						if(GPST[id]["Pickup"] ~= nil) then
							if(getElementType(GPST[id]["Pickup"]) == "marker") then
								removeEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
								destroyElement(GPST[id]["Pickup"])
								destroyElement(GPST[id]["Blip"])
								GPST[id] = nil
							end
						end
					end
					addBox("Поздравляем, Вы прошли устный тест.", client, 0, 60, 255)
					addBox("Пожалуйста, выйдите из здания и\nНачните практику, сев за автомобиль,\nНаходящийся на парковке.", client, 0, 60, 255)
					SED(client, "ASH", 1)
					local id = toch(getElementData(client, "ID"))
					GPST[id] = {}
					GPST[id]["Pickup"] = createMarker(96.6005859375, -759.986328125, 10.425338745117, "checkpoint", 4, 220, 0, 0, 220, client)
					GPST[id]["Blip"]	= createBlip(96.6005859375, -759.986328125, 10.425338745117, 0, 2, 220, 0, 0, 220, 0, 64000, client)
					SED(GPST[id]["Pickup"], "Player", client)
					addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
				else
					addBox("Вы ошиблись и тест завершен.\nПожалуйста, повторите попытку.", client, 255, 0, 0)
				end
			else
				addBox("Вы довели компьютер до системной ошибки\nТестирование завершено.", client, 255, 0, 0)
			end
		else
			addBox("Вы отказались от прохождения теста.", client, 255, 0, 0)
		end
	elseif(dialogid == 39) then
		local veh = getPedOccupiedVehicle(client)
		if(getElementData(veh, "ArmyCar") ~= false) then
			if(getElementData(veh, "ArmyGruz") == false) then
				if(response == true) then
					if(Server["Gruz"] == 0) then
						addBox("Транспорт не загружен,\nПоскольку склад пуст.", client, 255, 0)
					else
						inputtext = toch(inputtext)
						if(inputtext ~= nil) then
							if(inputtext > 0 and inputtext <= 250) then
								if(inputtext <= Server["Gruz"]) then
									SED(veh, "ArmyGruz", inputtext)
									Server["Gruz"] = Server["Gruz"] - inputtext
									addBox("Вы загрузили " .. inputtext ..  " кг груза.", client, 0, 60, 255)
								else
									SED(veh, "ArmyGruz", Server["Gruz"])
									Server["Gruz"] = 0
									addBox("Вы загрузили всё, что было на складе.\n(" .. getElementData(veh, "ArmyGruz") .. " шт продукции)", client, 0, 60, 255)
								end
								local mrk = getElementData(client, "mrkArmyGruz")
								if(isElement(mrk) == true) then
									local blp = getElementData(client, "blpArmyGruz")
									removeEventHandler("onMarkerHit", mrk, onMrkArmyGruzHit)
									destroyElement(mrk)
									destroyElement(blp)
									removeElementData(client, "mrkArmyGruz")
									removeElementData(client, "blpArmyGruz")
								end
								addBox("Отправляйтесь на склад,\nЧтобы доставить груз.", client, 0, 60, 255)
								local mrk = createMarker(-1632.87109375, -222.2001953125, 13.824159622192, "checkpoint", 2.0, 220, 0, 0, 220, client)
								local blp = createBlip(-1632.87109375, -222.2001953125, 14.824159622192, 0, 2, 220, 0, 0, 220, 14, 64000, client)
								SED(client, "mrkArmyGruzilo", mrk)
								SED(client, "blpArmyGruzilo", blp)
								addEventHandler("onMarkerHit", mrk, onHitGruzilo)
							else
								addBox("Ошибка: Вы ввели некорректное число", client, 255, 0, 0)
							end
						else
							addBox("Ошибка: Вы ввели некорректное число", client, 255, 0, 0)
						end
					end
				else
					addBox("Ошибка: Вы отказались от загрузки\nТранспорта. Пожалуйста,\nПодождите следующую погрузку.", client, 255, 0, 0)
				end
			end
		end
	elseif(dialogid == 40) then
		if(response == true) then
			local id = getElementData(client, "FuelStation")
			if(toch(id) ~= nil) then
				id = toch(id)
				if(id > 0 and id < 8) then
					if(BusinessTable[id]["Owner"] == 0) then
						local money = getElementData(client, "Money")
						if(money ~= false) then
							if(toch(money) ~= nil) then
								money = toch(money)
								if(money >= 125000) then
									if(getElementData(client, "BusOwnID") == false or getElementData(client, "BusOwnID") == 0) then
										if(BusinessTable[id]["Owner"] == 0) then
											SED(client, "BusOwnID", id)
											setElementMoney(client, -125000, "Покупка АЗС")
											BusinessTable[id]["Owner"] = getElementData(client, "AccID")
											BusinessTable[id]["OwnerName"] = getElementData(client, "Name")
											dbExec(mysql, "UPDATE `Business` SET `Owner` = ?, `OwnerName` = ? WHERE `ID` = ?", getElementData(client, "AccID"), getElementData(client, "Name"), id)
											dbExec(mysql, "UPDATE `Accounts` SET `BusinessID` = ? WHERE `Name` = ?", id, getElementData(client, "Name"))
											addBox("Вы успешно приобрели бизнес №" .. id .. " id.\nНе забудьте оплатить налоги в /fmenu!", client, 0, 60, 255)
											BusinessTable[id]["OwnerPlayer"] = client
										else
											addBox("Ошибка: Данный бизнес уже куплен.", client, 255, 0, 0)
										end
									else
										addBox("Ошибка: У Вас уже есть бизнес.", client, 255, 0, 0)
									end
								else
									addBox("Ошибка: У Вас недостаточно денег\nЧтобы купить данный бизнес!", client, 255, 0, 0)
								end
							else
								addBox("Произошла ошибка.\nПожалуйста, повторите попытку. #6.24", client, 255, 0, 0)
							end
						else
							kickPlayer(client, "Баг")
						end
					else
						addBox("Произошла ошибка.\nПожалуйста, повторите попытку. #6.23", client, 255, 0, 0)
					end
				else
					addBox("Произошла ошибка.\nПожалуйста, повторите попытку.#6.22", client, 255, 0, 0)
				end
			else
				addBox("Произошла ошибка.\nПожалуйста, повторите попытку.#6.21", client, 255, 0, 0)
			end
			removeElementData(client, "FuelStation")
		else
		end
	elseif(dialogid == 42) then
		if(response == true) then
			local biz = getElementData(client, "BusOwnID")
			if(biz > 0 and biz < 8) then
				if(listitem == 0) then
					showPlayerDialog(client, 43, 1, "Продажа бизнеса государству.", "Вы действительно хотите продать заправку государству?\nВы получите половину от стоимости покупки.\nВы получите: 65.000$", "Продать", "Отмена")
				elseif(listitem == 1) then
					if(BusinessTable[biz]["PayDay"] > 2) then
						showPlayerDialog(client, 44, 2, "Продажа бизнеса игроку.", "Введите ID игрока, которому Вы хотите продать бизнес.", "Продать", "Отмена")
					else
						addBox("Ошибка:\nБизнес должен быть оплачен более,\nЧем на 2 PayDay", client, 255, 0, 0)
					end
				elseif(listitem == 2) then
					if(BusinessTable[biz]["Open"] == true) then
						BusinessTable[biz]["Open"] = false
						dbExec(mysql, "UPDATE `Business` set `Open` = 0 WHERE `ID` = ?", biz)
						addBox("Вы закрыли Вашу заправку.", client, 0, 60, 255)
					else
						BusinessTable[biz]["Open"] = true
						dbExec(mysql, "UPDATE `Business` set `Open` = 1 WHERE `ID` = ?", biz)
						addBox("Вы открыли Вашу заправку.", client, 0, 60, 255)
					end
				elseif(listitem == 3) then
					showPlayerDialog(client, 50, 2, "Стоимость бензина на заправке.", "Пожалуйста, введите стоимость бензина за литр.\nСтоимость не может быть менее 13$ и более 17$ за литр", "Выбор", "Отмена")
				elseif(listitem == 4) then
					local string1 = BusinessTable[biz]["Open"]
					if(string1 == true) then
						string1 = "Открыто."
					else
						string1 = "Закрыто."
					end
					local string2 = BusinessTable[biz]["Products"]
					local string3 = BusinessTable[biz]["Money"]
					local string4 = BusinessTable[biz]["MaxProducts"]
					local string5 = BusinessTable[biz]["Benzovoz"]
					if(string5 == 1) then
						string5 = "Куплен"
					else
						string5 = "Отсутствует"
					end
					local str = "Бизнес: " .. biz .. " id.\nСостояние: " .. string1 .. "\nКол-во продуктов на складе: " .. string2 .. "\nДенег на складе: " .. string3 .. "\nМаксимальное количество продуктов: " .. string4 .. "\nБензовоз: " .. string5
					showPlayerDialog(client, 64000, 1, "Статистика заправки.", str, "Принять", "Отмена")
				elseif(listitem == 5) then
					showPlayerDialog(client, 51, 2, "Вывод денег с бизнеса", "Введите сумму, которую Вы хотите вывести с бизнеса.\nДенег на складе: " .. BusinessTable[biz]["Money"] .. "$.", "Вывод", "Отмена")
				elseif(listitem == 6) then
					showPlayerDialog(client, 75, 2, "Оплата налога бизнеса", "Введите количество PayDay, на которое Вы хотите оплатить.\nОплачено на: " .. BusinessTable[biz]["PayDay"] .. "/720.\nСтоимость: 50$/PayDay.", "Оплата", "Отмена")
				elseif(listitem == 7) then
					local id = toch(getElementData(client, "ID"))
					if(GPST[id] ~= nil) then
						if(GPST[id]["Pickup"] ~= nil) then
							removeEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
							destroyElement(GPST[id]["Pickup"])
							destroyElement(GPST[id]["Blip"])
							GPST[id] = nil
						end
					end
					GPST[id] = {}
					if(biz == 1) then
						GPST[id]["Pickup"] = createMarker(49.9013671875, -1088.7578125, 9.423915863037, "cylinder", 2, 220, 0, 0, 220, client)
						GPST[id]["Blip"] = createBlip(49.9013671875, -1088.7578125, 9.423915863037, 0, 2, 220, 0, 0, 220, 0, 64000, client)
					elseif(biz == 2) then
						GPST[id]["Pickup"] = createMarker(-887.984375, -573.0234375, 10.047963142395, "cylinder", 2, 220, 0, 0, 220, client)
						GPST[id]["Blip"] = createBlip(-887.984375, -573.0234375, 10.047963142395, 0, 2, 220, 0, 0, 220, 0, 64000, client)
					elseif(biz == 3) then
						GPST[id]["Pickup"] = createMarker(-1616.8896484375, -736.66015625, 13.824739456177, "cylinder", 2, 220, 0, 0, 220, client)
						GPST[id]["Blip"] = createBlip(-1616.8896484375, -736.66015625, 13.824739456177, 0, 2, 220, 0, 0, 220, 0, 64000, client)
					elseif(biz == 4) then
						GPST[id]["Pickup"] = createMarker(55.244140625, 937.4443359375, 9.80312538147, "cylinder", 2, 220, 0, 0, 220, client)
						GPST[id]["Blip"] = createBlip(55.244140625, 937.4443359375, 9.80312538147, 0, 2, 220, 0, 0, 220, 0, 64000, client)
					elseif(biz == 5) then
						GPST[id]["Pickup"] = createMarker(-936.8505859375, 1347.3076171875, 10.096260070801, "cylinder", 2, 220, 0, 0, 220, client)
						GPST[id]["Blip"] = createBlip(-936.8505859375, 1347.3076171875, 10.096260070801, 0, 2, 220, 0, 0, 220, 0, 64000, client)
					elseif(biz == 6) then
						GPST[id]["Pickup"] = createMarker(-749.603515625, -1379.189453125, 10.343542098999, "cylinder", 2, 220, 0, 0, 220, client)
						GPST[id]["Blip"] = createBlip(-749.603515625, -1379.189453125, 10.343542098999, 0, 2, 220, 0, 0, 220, 0, 64000, client)
					elseif(biz == 7) then
						GPST[id]["Pickup"] = createMarker(204.884765625, -506.1201171875, 10.78320980072, "cylinder", 2, 220, 0, 0, 220, client)
						GPST[id]["Blip"] = createBlip(204.884765625, -506.1201171875, 10.78320980072, 0, 2, 220, 0, 0, 220, 0, 64000, client)
					end
					SED(GPST[id]["Pickup"], "Player", client)
					addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
				elseif(listitem == 8) then
					if(BusinessTable[biz]["Order"] ~= nil) then
						if(BusinessTable[biz]["Order"] ~= 0) then
							addBox("Ошибка: У Вас уже есть заказ", client, 255, 0, 0)
						end
					else
						local x, y, z = -900, -1420, -11
						local x1, y1, z1 = BusinessTable[biz]["px"], BusinessTable[biz]["py"], BusinessTable[biz]["pz"]
						local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
						local koef = dist / 1300
						if(koef > 0 and koef <= 1) then
							koef = 0.10
						elseif(koef > 1 and koef <= 2) then
							koef = 0.15
						elseif(koef > 2 and koef <= 3) then
							koef = 0.20
						else
							koef = 0.25
						end
						local price = koef + 1
						local zakaz = math.round(toch(BusinessTable[biz]["Money"] / price))
						if(zakaz * price > BusinessTable[biz]["Money"]) then
							zakaz = zakaz - 1
						end
						if(zakaz > 3000) then
							zakaz = 3000
						end
						showPlayerDialog(client, 66, 2, "Заказ продуктов в бизнес.", "Введите количество продуктов, которое хотите заказать.\nСтоимость за единицу товара: " .. price .. "$.\nМаксимальный доступный заказ: " .. zakaz .. " кг.", "Заказать", "Отмена")
					end
				elseif(listitem == 9) then
					showPlayerDialog(client, 67, 2, "Пополнение счёт бизнеса.", "Введите сумму, которую Вы хотели бы внести на счёт бизнеса.", "Ввод", "Отмена")
				elseif(listitem == 10) then
					local str = "id\tДата\tСумма"
					for i=1,7 do
						if(string.len(BusinessTable[biz]["Date" .. i]) > 0) then
							str = str .. "\n" .. i .. "\t" .. BusinessTable[biz]["Date" .. i]  .. "\t" .. BusinessTable[biz]["Finstat" .. i]
						else
							break
						end
					end
					showPlayerDialog(client, 64000, 3, "Финансовая статистика бизнеса", str, "Ок", "Отмена")
				end
			end
		end
	elseif(dialogid == 43) then
		if(response == true) then
			if(getElementData(client, "BusOwnID") ~= false) then
				if(getElementData(client, "BusOwnID") > 0 and getElementData(client, "BusOwnID") < 8) then
					local id = getElementData(client, "BusOwnID")
					setElementMoney(client, 60000, "Продажа АЗС в гос")
					BusinessTable[id]["Owner"] = 0
					BusinessTable[id]["OwnerName"] = ""
					dbExec(mysql, "UPDATE `Business` SET `Owner` = 0, `OwnerName` = '', `Benzovoz` = '0', `PayDay` = 4, `P1` = 15 WHERE `ID` = ?", id)
					BusinessTable[id]["Benzovoz"] = 0
					BusinessTable[id]["P1"] = 50
					if(BusinessTable[id]["BenzovozVeh"] ~= nil) then
						local veh = BusinessTable[id]["BenzovozVeh"]
						local id = getElementData(BusinessTable[id]["BenzovozVeh"], "ID")
						VehicleTable[id] = nil
						destroyElement(veh)
						local id = getElementData(client, "BusOwnID")
						BusinessTable[id]["BenzovozVeh"] = nil
					end
					dbExec(mysql, "UPDATE `Accounts` SET `BusinessID` = 0 WHERE `ID` = ?", getElementData(client, "AccID"))
					SED(client, "BusOwnID", 0)
					addBox("Вы продали заправку государству\nВ половину стоимости.", client, 0, 60, 255)
					BusinessTable[id]["OwnerPlayer"] = nil
				end
			end
		end
	elseif(dialogid == 44) then
		if(response == true) then
			if(toch(inputtext) ~= nil) then
				inputtext = toch(inputtext)
				if(IDS[inputtext] ~= nil) then
					local secPlayer = IDS[inputtext]
					if(getElementData(secPlayer, "Login") == true) then
						local x, y, z = getElementPosition(secPlayer)
						local x1, y1, z1 = getElementPosition(client)
						if(getElementData(secPlayer, "BusOwnID") == 0) then
							if(getDistanceBetweenPoints3D(x, y, z, x1, y1, z1) < 20) then
								SED(client, "BusSellPlayer", secPlayer)
								showPlayerDialog(client, 45, 2, "Стоимость продажи бизнеса.", "Введите стоимость продажи бизнеса.", "Продать", "Отмена")
							else
								addBox("Ошибка: Данный игрок слишком далеко.", client, 255, 0, 0)
							end
						else
							addBox("Ошибка: У данного игрока\nУже есть бизнес.", client, 255, 0, 0)
						end
					else
						addBox("Ошибка: Данный игрок не авторизован.", client, 255, 0, 0)
					end
				else
					addBox("Ошибка: Данный игрок не на сервере.", client, 255, 0, 0)
				end
			else
				addBox("Ошибка: Некорректно введён ID игрока.", client, 255, 0, 0)
			end
		end
	elseif(dialogid == 45) then
		if(response == true) then
			if(toch(inputtext) ~= nil) then
				local summ = toch(inputtext)
				if(summ > 90000) then
					local secPlayer = getElementData(client, "BusSellPlayer")
					if(isElement(secPlayer) == true) then
						if(getElementData(secPlayer, "Login") == true) then
							local secMoney = getElementData(secPlayer, "Money")
							if(secMoney >= summ) then
								local x, y, z = getElementPosition(secPlayer)
								local x1, y1, z1 = getElementPosition(client)
								local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
								if(getElementData(secPlayer, "BusOwnID") == 0) then
									if(dist < 20) then
										local str = getElementData(client, "Name") .. " предлагает Вам купить заправку " .. getElementData(client, "BusOwnID") .. " id.\nСтоимость покупки: " .. summ .. "$." 
										showPlayerDialog(secPlayer, 46, 1, "Покупка заправки.", str, "Купить", "Отмена")
										SED(secPlayer, "BusBuyPlayer", client)
										SED(secPlayer, "BusBuyPrice", summ)
										SED(secPlayer, "BusBuyID", getElementData(client, "BusOwnID"))
									else
										removeElementData(client, "BusSellPlayer")
										addBox("Данный игрок слишком далеко от Вас.", client, 255, 0, 0)
									end
								else
									addBox("Ошибка: У данного игрока\nУже есть бизнес.", client, 255, 0, 0)
								end
							else
								removeElementData(client, "BusSellPlayer")
								addBox("У данного игрока недостаточно денег для покупки.", client, 255, 0, 0)
							end
						else
							removeElementData(client, "BusSellPlayer")
							addBox("Выбранный Вами уже не авторизован.", client, 255, 0, 0)
						end
					else
						removeElementData(client, "BusSellPlayer")
						addBox("Выбранный Вами уже не в сети.", client, 255, 0, 0)
					end
				else
					addBox("Вы не можете продать бизнес менее\nЧем за половину государственной стоимости.", client, 255, 0, 0)
					showPlayerDialog(client, 45, 2, "Стоимость продажи бизнеса.", "Введите стоимость продажи бизнеса.", "Продать", "Отмена")
				end
			else
				addBox("Сумма введена некорректно\nПовторите попытку.", client, 255, 0, 0)
				showPlayerDialog(client, 45, 2, "Стоимость продажи бизнеса.", "Введите стоимость продажи бизнеса.", "Продать", "Отмена")
			end
		else
			addBox("Вы отменили продажу бизнеса.", client, 255, 0, 0)
			removeElementData(client, "BusSellPlayer")
		end
	elseif(dialogid == 46) then
		if(response == true) then
			local money = getElementData(client, "Money")
			local price = getElementData(client, "BusBuyPrice")
			local secPlayer = getElementData(client, "BusBuyPlayer")
			if(money >= price) then
				if(isElement(secPlayer) == true) then
					if(getElementData(secPlayer, "Login") == true) then
						local biz = getElementData(client, "BusBuyID")
						local theBiz = getElementData(secPlayer, "BusOwnID")
						local accid = getElementData(secPlayer, "AccID")
						if(accid == BusinessTable[biz]["Owner"]) then
							if(biz == theBiz) then
								if(getElementData(client, "BusOwnID") == 0) then
									BusinessTable[biz]["Owner"] = getElementData(client, "AccID")
									BusinessTable[biz]["OwnerName"] = getElementData(client, "Name")
									SED(secPlayer, "BusOwnID", 0)
									SED(client, "BusOwnID", biz)
									setElementMoney(client, price * (-1), "Покупка биз")
									setElementMoney(secPlayer, price, "Продажа биз")
									dbExec(mysql, "UPDATE `Business` SET `Owner` = ?, `OwnerName` = ? WHERE `ID` = ?", BusinessTable[biz]["Owner"], BusinessTable[biz]["OwnerName"], biz)
									BusinessTable[biz]["Benzovoz"] = 0
									dbExec(mysql, "UPDATE `Accounts` SET `BusinessID` = 0 WHERE `ID` = ?", getElementData(secPlayer, "AccID"))
									dbExec(mysql, "UPDATE `Accounts` SET `BusinessID` = ? WHERE `ID` = ?", biz, getElementData(client, "AccID"))
									addBox("Вы успешно приобрели бизнес " .. biz .. " id.", client, 0, 60, 255)
									addBox("Вы успешно продали бизнес " .. biz .. " id.", secPlayer, 0, 60, 255)
									BusinessTable[biz]["OwnerPlayer"] = client
								else
									addBox("Ошибка: У данного игрока\nУже есть бизнес.", client, 255, 0, 0)
								end
							else
								addBox("Ошибка: Данный бизнес уже продан.", client, 255, 0, 0)
							end
						else
							addBox("Ошибка: Данный бизнес уже продан", client, 255, 0, 0)
						end
					else
						addBox("Ошибка: игрок, который продавал Вам бизнес, не авторизован.", client, 255, 0, 0)
					end
				else
					addBox("Игрок, который продавал Вам бизнес, отключился.", client, 255, 0, 0)
				end
			else
				addBox("У Вас недостаточно денег для покупки данного бизнеса.", client, 255, 0, 0)
				addBox("У данного игрока недостаточно денег для покупки.", secPlayer, 255, 0, 0)
			end
		else
			local secPlayer = getElementData(client, "BusBuyPlayer")
			if(isElement(secPlayer) == true) then
				addBox("Игрок " .. getElementData(client, "Name") .. " отказался\nОт покупки Вашего бизнеса.", secPlayer, 220, 60, 0)
			end
		end
		removeElementData(client, "BusBuyPlayer")
		removeElementData(client, "BusBuyPrice")
		removeElementData(client, "BusBuyID")
	elseif(dialogid == 47) then
		if(response == true) then
			local biz = getElementData(client, "BusOwnID")
			if(biz > 0 and biz < 8) then
				if(getElementData(client, "Money") >= 100000) then
					setElementMoney(client, -5000, "Покупка бензовоз")
					dbExec(mysql, "UPDATE `Business` set `Benzovoz` = 1 WHERE `ID` = ?", biz)
					BusinessTable[biz]["Benzovoz"] = 1
					addBox("Вы приобрели бензовоз для своей заправки.", client, 255, 0, 0)
				else
					addBox("У Вас недостаточно денег для покупки.", client, 255, 0, 0)
				end
			else
				addBox("Произошла ошибка: Вы не владеете бизнесом.", client, 255, 0, 0)
			end
		end
	elseif(dialogid == 48) then
		if(response == true) then
			local biz = getElementData(client, "BusOwnID")
			local veh = getPedOccupiedVehicle(client)
			if(veh ~= nil and veh ~= false) then
				if(getElementData(veh, "Benzovoz") ~= false) then
					local benz = getElementData(veh, "Benzovoz")
					if(benz == biz) then
						local topl = toch(inputtext)
						if(topl ~= nil) then
							if(topl > 0 and topl <= 4000) then
								local money = getElementData(client, "Money")
								if(money >= topl * 1) then
									SED(veh, "BenzKol", topl)
									setElementMoney(client, topl * (-1), "Покупка топлива")
									addBox("Вы успешно купили " .. topl .. " топлива\nОтправляйтесь на заправку.", client, 0, 60, 255)
									local mrk = ""
									local blp = ""
									if(biz == 1) then
										mrk = createMarker(49.9013671875, -1088.7578125, 10.423915863037, "cylinder", 2.4, 220, 0, 0, 220, client)
										blp = createBlip(49.9013671875, -1088.7578125, 10.423915863037, 0, 2.4, 220, 0, 0, 220, 10, 64000, client)
									elseif(biz == 2) then
										mrk = createMarker(-887.984375, -573.0234375, 11.047963142395, "cylinder", 2.4, 220, 0, 0, 220, client)
										blp = createBlip(-887.984375, -573.0234375, 11.047963142395, 0, 2.4, 220, 0, 0, 220, 10, 64000, client)
									elseif(biz == 3) then
										mrk = createMarker(-1616.8896484375, -736.66015625, 14.824739456177, "cylinder", 2.4, 220, 0, 0, 220, client)
										blp = createBlip(-1616.8896484375, -736.66015625, 14.824739456177, 0, 2.4, 220, 0, 0, 220, 10, 64000, client)
									elseif(biz == 4) then
										mrk = createMarker(55.244140625, 937.4443359375, 10.80312538147, "cylinder", 2.4, 220, 0, 0, 220, client)
										blp = createBlip(55.244140625, 937.4443359375, 10.80312538147, 0, 2.4, 220, 0, 0, 220, 10, 64000, client)
									elseif(biz == 5) then
										mrk = createMarker(-936.8505859375, 1347.3076171875, 11.096260070801, "cylinder", 2.4, 220, 0, 0, 220, client)
										blp = createBlip(-936.8505859375, 1347.3076171875, 11.096260070801, 0, 2.4, 220, 0, 0, 220, 10, 64000, client)
									elseif(biz == 6) then
										mrk = createMarker(-749.603515625, -1379.189453125, 11.343542098999, "cylinder", 2.4, 220, 0, 0, 220, client)
										blp = createBlip(-749.603515625, -1379.189453125, 11.343542098999, 0, 2.4, 220, 0, 0, 220, 10, 64000, client)
									elseif(biz == 7) then
										mrk = createMarker(204.884765625, -506.1201171875, 11.78320980072, "cylinder", 2.4, 220, 0, 0, 220, client)
										blp = createBlip(204.884765625, -506.1201171875, 11.78320980072, 0, 2.4, 220, 0, 0, 220, 10, 64000, client)
									end
									SED(client, "mrkBenz2", mrk)
									SED(client, "blpBenz2", blp)
									addEventHandler("onMarkerHit", mrk, Benz2MarkerHit)
								else
									setTimer(function ( thePlayer )
										local mrk = createMarker(-1006.5986328125, -1388.630859375, 10.581163406372, "cylinder", 2.4, 220, 0, 0, 220, thePlayer)
										SED(thePlayer, "mrkBenz1", mrk)
										addEventHandler("onMarkerHit", mrk, Benz1MarkerHit)
										local blp = createBlip(-1006.5986328125, -1388.630859375, 10.581163406372, 0, 2, 220, 0, 0, 220, 3, 64000, thePlayer)
										SED(thePlayer, "blpBenz1", blp)
									end, 3000, 1, client)
									addBox("У Вас недостаточно денег для покупки топлива.", client, 255, 0, 0)
								end
							else
								setTimer(function ( thePlayer )
									local mrk = createMarker(-1006.5986328125, -1388.630859375, 10.581163406372, "cylinder", 2.4, 220, 0, 0, 220, thePlayer)
									SED(thePlayer, "mrkBenz1", mrk)
									addEventHandler("onMarkerHit", mrk, Benz1MarkerHit)
									local blp = createBlip(-1006.5986328125, -1388.630859375, 10.581163406372, 0, 2, 220, 0, 0, 220, 3, 64000, thePlayer)
									SED(thePlayer, "blpBenz1", blp)
								end, 3000, 1, client)
								addBox("Вы ввели некорректное количество топлива.", client, 255, 0, 0)
							end
						else
							setTimer(function ( thePlayer )
								local mrk = createMarker(-1006.5986328125, -1388.630859375, 10.581163406372, "cylinder", 2.4, 220, 0, 0, 220, thePlayer)
								SED(thePlayer, "mrkBenz1", mrk)
								addEventHandler("onMarkerHit", mrk, Benz1MarkerHit)
								local blp = createBlip(-1006.5986328125, -1388.630859375, 10.581163406372, 0, 2, 220, 0, 0, 220, 3, 64000, thePlayer)
								SED(thePlayer, "blpBenz1", blp)
							end, 3000, 1, client)
							addBox("Вы ввели некорректное количество топлива.", client, 255, 0, 0)
						end
					else
						setTimer(function ( thePlayer )
							local mrk = createMarker(-1006.5986328125, -1388.630859375, 10.581163406372, "cylinder", 2.4, 220, 0, 0, 220, thePlayer)
							SED(thePlayer, "mrkBenz1", mrk)
							addEventHandler("onMarkerHit", mrk, Benz1MarkerHit)
							local blp = createBlip(-1006.5986328125, -1388.630859375, 10.581163406372, 0, 2, 220, 0, 0, 220, 3, 64000, thePlayer)
							SED(thePlayer, "blpBenz1", blp)
						end, 3000, 1, client)
						addBox("Произошла ошибка, повторите попытку.", client, 255, 0, 0)
					end
				else
					setTimer(function ( thePlayer )
						local mrk = createMarker(-1006.5986328125, -1388.630859375, 10.581163406372, "cylinder", 2.4, 220, 0, 0, 220, thePlayer)
						SED(thePlayer, "mrkBenz1", mrk)
						addEventHandler("onMarkerHit", mrk, Benz1MarkerHit)
						local blp = createBlip(-1006.5986328125, -1388.630859375, 10.581163406372, 0, 2, 220, 0, 0, 220, 3, 64000, thePlayer)
						SED(thePlayer, "blpBenz1", blp)
					end, 3000, 1, client)
					addBox("Произошла ошибка, повторите попытку.", client, 255, 0, 0)
				end
			else
				setTimer(function ( thePlayer )
					local mrk = createMarker(-1006.5986328125, -1388.630859375, 10.581163406372, "cylinder", 2.4, 220, 0, 0, 220, thePlayer)
					SED(thePlayer, "mrkBenz1", mrk)
					addEventHandler("onMarkerHit", mrk, Benz1MarkerHit)
					local blp = createBlip(-1006.5986328125, -1388.630859375, 10.581163406372, 0, 2, 220, 0, 0, 220, 3, 64000, thePlayer)
					SED(thePlayer, "blpBenz1", blp)
				end, 3000, 1, client)
				addBox("Произошла ошибка, повторите попытку.", client, 255, 0, 0)
			end
		else
			setTimer(function ( thePlayer )
				local mrk = createMarker(-1006.5986328125, -1388.630859375, 10.581163406372, "cylinder", 2.4, 220, 0, 0, 220, thePlayer)
				SED(thePlayer, "mrkBenz1", mrk)
				addEventHandler("onMarkerHit", mrk, Benz1MarkerHit)
				local blp = createBlip(-1006.5986328125, -1388.630859375, 10.581163406372, 0, 2, 220, 0, 0, 220, 3, 64000, thePlayer)
				SED(thePlayer, "blpBenz1", blp)
			end, 3000, 1, client)
			addBox("Произошла ошибка, повторите попытку.", client, 255, 0, 0)
		end
	elseif(dialogid == 50) then
		if(response == true) then
			local biz = getElementData(client, "BusOwnID")
			if(biz > 0 and biz < 8) then
				inputtext = toch(inputtext)
				if(inputtext ~= nil) then
					if(inputtext >= 13 and inputtext <= 17) then
						BusinessTable[biz]["P1"] = inputtext
						addBox("Вы изменили стоимость за литр на " .. inputtext .. "$", client, 0, 60, 255)
						dbExec(mysql, "UPDATE `Business` set `P1` = ? WHERE `ID` = ?", inputtext, biz)
					else
						addBox("Вы ввели некорректную сумму.", client, 255, 0, 0)
					end
				else
					addBox("Вы ввели некорректную сумму.", client, 255, 0, 0)
				end
			end
		end
	elseif(dialogid == 51) then
		if(response == true) then
			local biz = getElementData(client, "BusOwnID")
			if(biz > 0 and biz < 8) then
				inputtext = toch(inputtext)
				if(inputtext ~= nil) then
					if(inputtext > 0) then
						if(inputtext <= BusinessTable[biz]["Money"]) then
							BusinessTable[biz]["Money"] = BusinessTable[biz]["Money"] - inputtext
							dbExec(mysql, "UPDATE `Business` SET `Money` = ? WHERE `ID` = ?", BusinessTable[biz]["Money"], biz)
							setElementMoney(client, inputtext, "Снятие денег с биза")
							addBox("Вы сняли со склада " .. inputtext .. "$.", client, 0, 220, 40)
						else
							addBox("На счету бизнеса недостаточно денег..", client, 255, 0, 0)
						end
					else
						addBox("Вы ввели некорректную сумму.", client, 255, 0, 0)
					end
				else
					addBox("Вы ввели некорректную сумму.", client, 255, 0, 0)
				end
			end
		end
	elseif(dialogid == 52) then
		local secPlayer = getElementData(client, "HealPlayer")
		if(response == true) then
			local price = getElementData(client, "HealMoney")
			local money = toch(getElementData(client, "Money"))
			if(price ~= false) then
				if(money >= price) then
					local x, y, z = getElementPosition(client)
					local x1, y1, z1 = getElementPosition(secPlayer)
					local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
					if(Server["HospitalGruz"] >= 25) then
						if(dist < 10) then
							setElementHealth(client, 100)
							setElementMoney(client, price * (-1), "Покупка лечения")
							setElementMoney(secPlayer, price, "Продажа лечения")
							addBox("Вы вылечили игрока " .. getElementData(client, "Name") .. "\nЗа " .. price .. "$." , secPlayer, 0, 255, 60)
							addBox("Вы успешно прошли курс лечения за " .. price .. "$.", client, 0, 255, 60)
							Server["HospitalGruz"] = Server["HospitalGruz"] - 25
							dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = ?", Server["HospitalGruz"], "HospitalGruz")
						else
							addBox("Вы отошли слишком далеко.", secPlayer, 255, 0, 0)
							addBox("Врач отошел слишком далеко.", client, 255, 0, 0)
						end
					else
						addBox("На складе закончились материалы.\nОбратитесь ко врачу.", client, 255, 0, 0)
						addBox("На складе закончились материалы.\nЛечение не выполнено.", secPlayer, 255, 0, 0)
					end
				else
					addBox("Игрок " .. getElementData(client, "Name") .. " отказался от Вашего лечения.", secPlayer, 255, 0, 0)
				end
			else
				addBox("Произошла ошибка.", client, 255, 0, 0)
			end
		else
			addBox("Игрок " .. getElementData(client, "Name") .. " отказался от лечения.", secPlayer, 255, 0, 0)
		end
		removeElementData(client, "HealMoney")
		removeElementData(client, "HealPlayer")
	elseif(dialogid == 53) then
		local secPlayer = getElementData(client, "SexHealer")
		if(response == true) then
			if(isElement(secPlayer) == true) then
				local price = toch(getElementData(client, "SexPrice"))
				local money = toch(getElementData(client, "Money"))
				if(money >= price) then
					local sex = getElementData(client, "Sex")
					if(sex == 2) then
						SED(client, "Sex", 1)
						setElementMoney(client, price * (-1), "Смена пол-")
						setElementMoney(secPlayer, price, "Смена пол+")
						addBox("Вы сменили пол на мужской за " .. price .. "$.", client, 0, 60, 255)
						addBox("Вы успешно сменили пол игроку " .. getElementData(client, "Name") .. "\nЗа " .. price .. "$.", secPlayer, 0, 60, 255)
					else
						SED(client, "Sex", 2)
						setElementMoney(client, price * (-1), "Смена пол-")
						setElementMoney(secPlayer, price, "Смена пол+")
						addBox("Вы сменили пол на женский за " .. price .. "$.", client, 0, 60, 255)
						addBox("Вы успешно сменили пол игроку " .. getElementData(client, "Name") .. "\nЗа " .. price .. "$.", secPlayer, 0, 60, 255)
					end
					dbExec(mysql, "UPDATE `Accounts` SET `Sex` = ? WHERE `ID` = ?", getElementData(client, "Sex"), getElementData(client, "ID"))
				else
					addBox("У Вас недостаточно денег для данной операции.", client, 255, 0, 0)
					addBox("Игрок " .. getElementData(secPlayer, "Name") .. " отказался от смены пола.", secPlayer, 255, 0, 0)
				end
			else
				addBox("Врач, проводивший Вам операцию, отключился.", client, 255, 0, 0)
			end
		else
			if(isElement(secPlayer) == true) then
				addBox("Игрок " .. getElementData(client, "Name") .. " отказался от операции по смене пола.", secPlayer, 255, 0, 0)
			end
		end
		removeElementData(client, "SexHealer")
		removeElementData(client, "SexPrice")
	elseif(dialogid == 54) then
		if(response == true) then
			if(listitem == 0) then
				local money = toch(getElementData(client, "Money"))
				if(money >= 150) then
					if(getElementData(client, "PhoneNumber") == false or getElementData(client, "PhoneNumber") == 0) then
						local biz = toch(getElementData(client, "BusinessID"))
						if(biz ~= nil) then
							if(biz >= 10) then
								if(BusinessTable[biz]["Products"] >= 60) then
									if(BusinessTable[biz]["Owner"] > 0) then
										setBusinessMoney(biz, 150)
										BusinessTable[biz]["Products"] = BusinessTable[biz]["Products"] - 60
										dbExec(mysql, "UPDATE `Business` SET `Products` = ? WHERE `ID` = ?", BusinessTable[biz]["Products"], biz)
									end
									maxPhoneNumber = maxPhoneNumber + 1
									SED(client, "PhoneNumber", maxPhoneNumber)
									dbExec(mysql, "UPDATE `Accounts` SET `PhoneNumber` = ? WHERE `ID` = ?", maxPhoneNumber, getElementData(client, "AccID"))
									addBox("Вы успешно приобрели\nТелефон с номером " .. maxPhoneNumber .. ".", client, 0, 60, 255)
									setElementMoney(client, -150, "Покупка телефон")
									PhoneNumbers[maxPhoneNumber] = client
									if(getElementData(client, "Quest") == 1 or getElementData(client, "Quest") == 0) then
										setElementMoney(client, 90, "Кэшбек телефон")
										SED(client, "Quest", 2)
										dbExec(mysql, "UPDATE `Accounts` SET `Quest` = ? WHERE `Name` = ?", getElementData(client, "Quest"), getElementData(client, "Name"))
										addBox("Вы получили кэшбек 90$\nЗа покупку телефона.", client, 0, 60, 255)
										if(getElementData(client, "Passport") == 0) then
											toggleControl(client, "enter_exit", false)
											toggleControl(client, "fire", false)
											toggleControl(client, "jump", false)
											toggleControl(client, "enter_passenger", false)
											toggleControl(client, "next_weapon", false)
											toggleControl(client, "previous_weapon", false)
											toggleControl(client, "aim_weapon", false)
											toggleControl(client, "sprint", false)
											toggleControl(client, "crouch", false)
											SED(client, "AcceptedCall", true)
											addBox("Звонок на телефон.", client, 255, 255, 0)
											setPedAnimation(client, "ped", "phone_talk", 1, true, true, false, true)
											local id = getElementData(client, "ID")
											PhoneObject[id] = createObject(16097, 0, 0, 0)
											exports.bone:attachElementToBone(PhoneObject[id], client, 12,0.03,0.02,0.12,0,90,90)
											setTimer(function ( player )
												if(isElement(player)) then
													local id = getElementData(player, "ID")
													sendClientMessage("[ТЕЛ] Ken_Rozenberg: Хей, привет, это Кен Розенберг", player, 255, 255, 0)
													sendClientMessage("[ТЕЛ] Ken_Rozenberg: Я вообще туда позвонил?", player, 255, 255, 0)
													addBox("Звонок сброшен.", player, 255, 255, 0)
													setPedAnimation(player, "BSKTBALL", "BBALL_idle_O", 1, false)
													exports.bone:detachElementFromBone(PhoneObject[id])
													destroyElement(PhoneObject[id])
													PhoneObject[id] = nil
													setTimer(function ( neplayer )
														if(isElement(neplayer)) then
															addBox("Звонок на телефон.", neplayer, 255, 255, 0)
															setPedAnimation(neplayer, "ped", "phone_talk", 1, true, true, false, true)
															local id = getElementData(neplayer, "ID")
															PhoneObject[id] = createObject(16097, 0, 0, 0)
															exports.bone:attachElementToBone(PhoneObject[id], neplayer, 12,0.03,0.02,0.12,0,90,90)
															sendClientMessage("[ТЕЛ] Ken_Rozenberg: Это Кен, да... В общем, меня попросили тебе помочь, хотя мне не очень сильно хочется, но ладно. В общем, смотри.", neplayer, 255, 255, 0)
															sendClientMessage("[ТЕЛ] Ken_Rozenberg: Для начала езжай в мэрию, получи там паспорт... Бла-бла-бла, долбанные бюрократы с кучей бумаг...", neplayer, 255, 255, 0)
															setTimer(function ( hzpe )
																if(isElement(hzpe)) then
																	sendClientMessage("[ТЕЛ] Ken_Rozenberg: Ладно, как получишь паспорт, я скажу тебе, что делать дальше. И без тебя проблем хватает. Езжай давай.", hzpe, 255, 255, 0)
																	sendClientMessage("(( /GPS - Гос. учреждения - Мэрия))", hzpe, 255, 255, 0)
																	setTimer(function ( notplayer )
																		if(isElement(notplayer)) then
																			local id = getElementData(notplayer, "ID")
																			addBox("Звонок сброшен.", notplayer, 255, 255, 0)
																			exports.bone:detachElementFromBone(PhoneObject[id])
																			destroyElement(PhoneObject[id])
																			removeElementData(notplayer, "AcceptedCall", false)
																			setPedAnimation(notplayer, "BSKTBALL", "BBALL_idle_O", 1, false)
																			toggleControl(notplayer, "enter_exit", true)
																			toggleControl(notplayer, "fire", true)
																			toggleControl(notplayer, "jump", true)
																			toggleControl(notplayer, "enter_passenger", true)
																			toggleControl(notplayer, "next_weapon", true)
																			toggleControl(notplayer, "previous_weapon", true)
																			toggleControl(notplayer, "aim_weapon", true)
																			toggleControl(notplayer, "sprint", true)
																			toggleControl(notplayer, "crouch", true)
																			SED(notplayer, "Quest", 3)
																			dbExec(mysql, "UPDATE `Accounts` SET `Quest` = ? WHERE `Name` = ?", getElementData(notplayer, "Quest"), getElementData(notplayer, "Name"))
																		else
																		end
																	end, 5000, 1, hzpe)
																else
																end
															end, 7000, 1, neplayer)
														else
														end
													end, 5000, 1, player)
												end
											end, 5000, 1, client)
										else
											SED(client, "Quest", 4)
											dbExec(mysql, "UPDATE `Accounts` set `Quest` = ? WHERE `Name` = ?", 4, getElementData(client, "Name"))
											sendClientMessage("SMS от Ken_Rozenberg: Ты там все сделал? Не забудь поесть, а то мне дохляка еще на своей шее не хватало, можешь перекусить в забегаловке\n(/gps - ближайшая закусочная).", client, 255, 255, 0)
										end
									end
								else
									addBox("Ошибка: В магазине недостаточно продуктов.", client, 255, 0, 0)
								end
							end
						end
					else
						addBox("У Вас уже есть мобильный телефон.", client, 255, 0, 0)
					end
				else
					addBox("У Вас недостаточно денег для покупки мобильного телефона.", client, 255, 0, 0)
				end
			elseif(listitem == 1) then
				showPlayerDialog(client, 114, 2, "Покупка сим-карты", "Введите номер в формате xxxxxx, чтобы приобрести новый\nНомер для своего сотового телефона.\nНомер телефона может быть от 100.000 до 999.999!", "Купить", "Отмена")
			elseif(listitem == 2) then
				local biz = toch(getElementData(client, "BusinessID"))
				if(biz >= 10) then
					if(getElementData(client, "Money") >= 150) then
						if(BusinessTable[biz]["Products"] - 150 >= 0) then
							if(getElementData(client, "Aptechka") == false) then
								setElementMoney(client, -300, "Покупка аптечки")
								setBusinessMoney(biz, 300)
								BusinessTable[biz]["Products"] = BusinessTable[biz]["Products"] - 150
								dbExec(mysql, "UPDATE `Business` SET `Products` = ? WHERE `ID` = ?", BusinessTable[biz]["Products"], biz)
								SED(client, "Aptechka", 1)
								addBox("Вы успешно приобрели аптечку!\nВ инвентаре: " .. getElementData(client, "Aptechka") .. " шт.\nЧтобы использовать, введите: /healme", client, 0, 60, 255)
							elseif(getElementData(client, "Aptechka") <= 5) then
								setElementMoney(client, -300, "Покупка аптечки")
								setBusinessMoney(biz, 300)
								BusinessTable[biz]["Products"] = BusinessTable[biz]["Products"] - 150
								dbExec(mysql, "UPDATE `Business` SET `Products` = ? WHERE `ID` = ?", BusinessTable[biz]["Products"], biz)
								SED(client, "Aptechka", getElementData(client, "Aptechka") + 1)
								addBox("Вы успешно приобрели аптечку!\nВ инвентаре: " .. getElementData(client, "Aptechka") .. " шт.\nЧтобы использовать, введите: /healme", client, 0, 60, 255)
							else
								addBox("Ошибка: Вы не можете приобрести\nБольше 6 аптечек.", client, 255, 0, 0)
							end
						else
							addBox("Недостаточно продуктов.", client, 255, 0, 0)
						end
					else
						addBox("У Вас недостаточно денег\nЧтобы сделать данную покупку.", client, 255, 0, 0)
					end
				else
					kickPlayer(client, "Error")
				end
			elseif(listitem == 3) then
				local biz = toch(getElementData(client, "BusinessID"))
				if(biz >= 10) then
					if(getElementData(client, "Money") >= 400) then
						if(getElementData(client, "Kanistra") == false) then
							if(BusinessTable[biz]["Products"] - 240 >= 0) then
								setElementMoney(client, -400, "Покупка канистры")
								setBusinessMoney(biz, 400)
								BusinessTable[biz]["Products"] = BusinessTable[biz]["Products"] - 240
								dbExec(mysql, "UPDATE `Business` SET `Products` = ? WHERE `ID` = ?", BusinessTable[biz]["Products"], biz)
								addBox("Вы успешно приобрели канистру.\nЧтобы ей воспользоваться, введите:\n/kfuel возле своего авто.\nВ канистре всего 15 литров.", client, 0, 60, 255)
								SED(client, "Kanistra", true)
							else
								addBox("Недостаточно продуктов в магазине.", client, 255, 0, 0)
							end
						else
							addBox("У Вас уже есть канистра.\nЧтобы ей воспользоваться, введите:\n/kfuel возле своего авто.\nВ канистре всего 15 литров.", client, 0, 60, 255)
						end
					else
						addBox("У Вас недостаточно денег для покупки.", client, 255, 0, 0)
					end
				end
			elseif(listitem == 4) then
				local biz = toch(getElementData(client, "BusinessID"))
				if(biz >= 10) then
					if(BusinessTable[biz]["Products"] - 30 >= 0) then
						if(getElementData(client, "Money") >= 100) then
							setElementMoney(client, -100, "Покупка фотоаппарат")
							setBusinessMoney(biz, 100)
							BusinessTable[biz]["Products"] = BusinessTable[biz]["Products"] - 30
							dbExec(mysql, "UPDATE `Business` SET `Products` = ? WHERE `ID` = ?", BusinessTable[biz]["Products"], biz)
							addBox("Вы приобрели фотоаппарат.\nЧтобы переключиться на него,\nИспользуйте колесико мыши.", client, 0, 60, 255)
							giveWeapon(client, 43, 50)
						else
							addBox("У Вас недостаточно денег для покупки.", client, 255, 0, 0)
						end
					else
						addBox("Недостаточно продуктов в магазине.", client, 255, 0, 0)
					end
				end
			elseif(listitem == 5) then
				local biz = toch(getElementData(client, "BusinessID"))
				if(biz >= 10) then
					if(getElementData(client, "Money") >= 400) then
						if(BusinessTable[biz]["Products"] - 200 >= 0) then
							setElementMoney(client, -450, "Покупка рем. комплекта")
							setBusinessMoney(biz, 450)
							BusinessTable[biz]["Products"] = BusinessTable[biz]["Products"] - 200
							dbExec(mysql, "UPDATE `Business` SET `Products` = ? WHERE `ID` = ?", BusinessTable[biz]["Products"], biz)
							addBox("Вы приобрели комплект для ремонта.\nЧтобы им воспользоваться, Вам необходимо\nПодойти к авто, которое Вы хотите починить\nИ использовать /repair.", client, 0, 60, 255)
							SED(client, "Remko", true)
						else
							addBox("Недостаточно продуктов в магазине.", client, 255, 0, 0)
						end
					else
						addBox("У Вас недостаточно денег для покупки.", client, 255, 0, 0)
					end
				end
			end
		end
	elseif(dialogid == 55) then
		if(response == true) then
			if(listitem == 0) then
				local string = "Название\tЗначение\nИмя персонажа:\t" .. getElementData(client, "Name") .."\nУровень:\t" .. getElementData(client, "Lvl") .. "\nОпыт:\t" .. getElementData(client, "Exp") .. "\nСытость:\t" .. math.round(getElementData(client, "Food")) .. "\nНаличные:\t" .. getElementData(client, "Money") .."$"
				if(getElementData(client, "House") ~= false) then
					if(toch(getElementData(client, "House")) ~= nil) then
						local dom = toch(getElementData(client, "House"))
						if(dom > 0) then
							if(HouseTable[dom]["vx"] ~= nil) then
								if(HouseTable[dom]["vx"] ~= 0) then
									string = string .. "\nДом:\t" .. dom .. "\nГараж:\tЕсть"
								else
									string = string .. "\nДом:\t" .. dom .. "\nГараж:\tОтсутствует"
								end
							else
								string = string .. "\nДом:\t" .. dom .. "\nГараж:\tОтсутствует"
							end
						else
							string = string .. "\nДом:\tОтсутствует\nГараж:\tОтсутствует" 
						end
					else
						string = string .. "\nДом:\tОтсутствует\nГараж:\tОтсутствует" 
					end
				else
					string = string .. "\nДом:\tОтсутствует\nГараж:\tОтсутствует" 
				end
				if(getElementData(client, "BusOwnID") ~= false) then
					if(getElementData(client, "BusOwnID") > 0) then
						string = string .. "\nБизнес:\t" .. getElementData(client, "BusOwnID") .. " id"
					else
						string = string .. "\nБизнес:\tОтсутствует"
					end
				else
					string = string .. "\nБизнес:\tОтсутствует"
				end
				if(getElementData(client, "Admin") > 0) then
					string = string .. "\nАдмин:\t" .. getElementData(client, "Admin")
				end
				showPlayerDialog(client, 64000, 3, "Статистика аккаунта", string, "Ок", "Отмена")
			elseif(listitem == 1) then
				showPlayerDialog(client, 64000, 3, "Список команд", "Команда\tЗначение\tНеобходимо\n/call [номер]\tПозвонить\tТелефон\n/accept\tПринять звонок\tТелефон\n/refuse\tОтклонить/Отключиться\tТелефон\n/fuel\tЗаправиться\tНаходиться в машине\n/b\tНон-рп чат\t-\n/s\tКрикнуть\t2 уровень\n/w\tШептать\t-\n/report\tНаписать в репорт\t-\n/shelp\tОбщая информация\t-", "Ок", "Отмена")
			elseif(listitem == 2) then
				showPlayerDialog(client, 58, 3, "Настройки аккаунта", "Название настройки\tСостояние\nТест\tОтключен", "Переключить", "Отмена")
			elseif(listitem == 3) then
				showPlayerDialog(client, 59, 3, "Безопасность аккаунта", "Название пункта\tСостояние\nПочта\tНе подключена.", "Настроить", "Отмена")
			elseif(listitem == 4) then
				showPlayerDialog(client, 56, 2, "Задать вопрос", "Текст жалобы или вопроса,\nКоторый бы вы хотели задать.", "Отправить", "Отмена")
			elseif(listitem == 5) then
				showPlayerDialog(client, 64000, 1, "Инфо", "Правил пока что не завезли", "Ок", "Отмена")
			elseif(listitem == 6) then
				showPlayerDialog(client, 57, 3, "Донат-меню", "Название\tСтоимость\nСменить имя\t50 VC\nКонвертировать в вирты\t1/1000\nСнять варн\t100р", "Выбор", "Отмена")
			end
		end
	elseif(dialogid == 56) then
		if(response == true) then
			if(inputtext ~= nil) then
				local a = #inputtext
				if(a > 0) then
					addBox("Ваш запрос администрации отправлен", client, 255, 255, 0)
					for i, n in pairs(IDS) do
						if(getElementData(n, "Login") == true) then
							if(getElementData(n, "Admin") > 0) then
								sendClientMessage(getElementData(client, "Name") .. " (" .. getElementData(client, "ID") .. ") в репорт: " .. inputtext, n, 255, 255, 0)
							end
						end
					end
				else
					addBox("Ошибка: Вы не ввели текст репорта.", client, 255, 0, 0)
				end
			else
				addBox("Ошибка: Вы не ввели текст репорта.", client, 255, 0, 0)
			end
		end
	elseif(dialogid == 57) then
	elseif(dialogid == 60) then
		if(response == true) then
			if(getElementData(client, "BusinessID") ~= false) then
				if(toch(getElementData(client, "BusOwnID")) == 0) then
					if(toch(getElementData(client, "Money")) >= 90000) then
						local bus = toch(getElementData(client, "BusinessID"))
						if(bus > 9) then
							SED(client, "BusOwnID", toch(getElementData(client, "BusinessID")))
							BusinessTable[bus]["Owner"] = toch(getElementData(client, "AccID"))
							BusinessTable[bus]["OwnerName"] = getElementData(client, "Name")
							BusinessTable[bus]["OwnerPlayer"] = client
							BusinessTable[bus]["PayDay"] = 72
							setElementMoney(client, -90000, "Покупка биз")
							dbExec(mysql, "UPDATE `Business` SET `Owner` = ?, `OwnerName` = ?, `PayDay` = 72 WHERE `ID` = ?", BusinessTable[bus]["Owner"], BusinessTable[bus]["OwnerName"], bus)
							dbExec(mysql, "UPDATE `Accounts` SET `BusinessID` = ? WHERE `Name` = ?", bus, getElementData(client, "Name"))
							addBox("Поздравляем, вы приобрели бизнес №" .. bus .. ".\nНе забудьте оплатить налоги в /bmenu!", client, 60, 255, 0)
							addBox("Не забудьте заказать продукты,\nЧтобы люди могли закупаться у Вас ;).", client, 0, 255, 60)
						else
							addBox("Ошибка: Вы уже владеете бизнесом.", client, 255, 0, 0)
						end
					else
						addBox("Ошибка: У Вас недостаточно денег для покупки.", client, 255, 0, 0)
					end
				else
					addBox("Ошибка: Вы уже владеете бизнесом.", client, 255, 0, 0)
				end
			else
				addBox("Произошла ошибка, повторите попытку.", client, 255, 0, 0)
			end
		end
	elseif(dialogid == 61) then
		if(response == true) then
			local biz = toch(getElementData(client, "BusOwnID"))
			local accid = toch(getElementData(client, "AccID"))
			if(biz > 0) then
				if(accid == BusinessTable[biz]["Owner"]) then
					if(listitem == 0) then
						if(BusinessTable[biz]["Type"] == 1 or BusinessTable[biz]["Type"] == 3) then
							showPlayerDialog(client, 62, 1, "Продать бизнес государству.", "Вы действительно хотите продать бизнес государству?\nВы получите половину стоимости от Государственной стоимости бизнеса.\nВы получите: 45.000$", "Продать", "Отмена")
						elseif(BusinessTable[biz]["Type"] == 4) then
							showPlayerDialog(client, 62, 1, "Продать бизнес государству.", "Вы действительно хотите продать бизнес государству?\nВы получите половину стоимости от Государственной стоимости бизнеса.\nВы получите: 162.500$", "Продать", "Отмена")
						elseif(BusinessTable[biz]["Type"] == 5) then
							showPlayerDialog(client, 62, 1, "Продать бизнес государству.", "Вы действительно хотите продать бизнес государству?\nВы получите половину стоимости от Государственной стоимости бизнеса.\nВы получите: 125.000$", "Продать", "Отмена")
						elseif(BusinessTable[biz]["Type"] == 6) then
							showPlayerDialog(client, 62, 1, "Продать бизнес государству.", "Вы действительно хотите продать бизнес государству?\nВы получите половину стоимости от Государственной стоимости бизнеса.\nВы получите: 750.000$", "Продать", "Отмена")
						elseif(BusinessTable[biz]["Type"] == 7) then
							showPlayerDialog(client, 62, 1, "Продать бизнес государству.", "Вы действительно хотите продать бизнес государству?\nВы получите половину стоимости от Государственной стоимости бизнеса.\nВы получите: 375.000$", "Продать", "Отмена")
						end
					elseif(listitem == 1) then
						if(BusinessTable[biz]["PayDay"] > 1) then
							showPlayerDialog(client, 63, 2, "Продать бизнес игроку.", "Введите ID игрока, которому Вы хотите продать бизнес.", "Выбор", "Отмена")
						else
							addBox("Ошибка:\nБизнес должен быть оплачен более,\nЧем на 2 PayDay", client, 255, 0, 0)
						end
					elseif(listitem == 2) then
						if(BusinessTable[biz]["Type"] ~= 4 and BusinessTable[biz]["Type"] ~= 5 and BusinessTable[biz]["Type"] ~= 6 and BusinessTable[biz]["Type"] ~= 7) then
							if(BusinessTable[biz]["Open"] == false) then
								BusinessTable[biz]["Open"] = true
								dbExec(mysql, "UPDATE `Business` SET `Open` = 1 WHERE `ID` = ?", biz)
								addBox("Вы открыли бизнес.", client, 0, 100, 255)
							else
								BusinessTable[biz]["Open"] = false
								dbExec(mysql, "UPDATE `Business` SET `Open` = 0 WHERE `ID` = ?", biz)
								addBox("Вы закрыли бизнес.", client, 0, 100, 255)
							end
						else
							addBox("Ошибка: Пока что нельзя этого сделать!", client, 255, 0, 0)
						end
					elseif(listitem == 3) then
						if(BusinessTable[biz]["Order"] ~= nil) then
							if(BusinessTable[biz]["Order"] ~= 0) then
								addBox("Ошибка: У Вас уже есть заказ", client, 255, 0, 0)
							end
						else
							local x, y, z = -900, -1420, -11
							local x1, y1, z1 = BusinessTable[biz]["px"], BusinessTable[biz]["py"], BusinessTable[biz]["pz"]
							local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
							local koef = dist / 1300
							if(koef > 0 and koef <= 1) then
								koef = 0.10
							elseif(koef > 1 and koef <= 2) then
								koef = 0.15
							elseif(koef > 2 and koef <= 3) then
								koef = 0.20
							else
								koef = 0.25
							end
							local price = koef + 1
							local zakaz = math.round(toch(BusinessTable[biz]["Money"] / price))
							if(zakaz * price > BusinessTable[biz]["Money"]) then
								zakaz = zakaz - 1
							end
							if(zakaz > 3000) then
								zakaz = 3000
							end
							showPlayerDialog(client, 66, 2, "Заказ продуктов в бизнес.", "Введите количество продуктов, которое хотите заказать.\nСтоимость за единицу товара: " .. price .. "$.\nМаксимальный доступный заказ: " .. zakaz .. " кг.", "Заказать", "Отмена")
						end
					elseif(listitem == 4) then
						showPlayerDialog(client, 67, 2, "Пополнение счёт бизнеса.", "Введите сумму, которую Вы хотели бы внести на счёт бизнеса.", "Ввод", "Отмена")
					elseif(listitem == 5) then
						showPlayerDialog(client, 68, 2, "Снятие денег со счёта бизнеса.", "Введите сумму, которую Вы хотите снять со счёта бизнеса.\nНа счету: " .. BusinessTable[biz]["Money"] .. "$.", "Ввод", "Отмена")
					elseif(listitem == 6) then
						showPlayerDialog(client, 75, 2, "Оплата налога", "Введите количество PayDay, на которое Вы хотите оплатить.\nСтоимость: 50$/PayDay.\nОплачено на: " .. BusinessTable[biz]["PayDay"] .. " PayDay.", "Оплата", "Отмена")
					elseif(listitem == 7) then
						local string1 = BusinessTable[biz]["Open"]
						if(string1 == true) then
							string1 = "Открыто."
						else
							string1 = "Закрыто."
						end
						local string2 = BusinessTable[biz]["Products"]
						local string3 = BusinessTable[biz]["Money"]
						local string4 = BusinessTable[biz]["MaxProducts"]
						local str = "Бизнес: " .. biz .. " id.\nСостояние: " .. string1 .. "\nКол-во продуктов на складе: " .. string2 .. "\nДенег на складе: " .. string3 .. "\nМаксимальное количество продуктов: " .. string4
						showPlayerDialog(client, 64000, 1, "Статистика бизнеса", str, "Ок", "Отмена")
					elseif(listitem == 8) then
						local str = "id\tДата\tСумма"
						for i=1,7 do
							if(BusinessTable[biz]["Date" .. i] ~= false) then
								if(string.len(BusinessTable[biz]["Date" .. i]) > 0) then
									str = str .. "\n" .. i .. "\t" .. BusinessTable[biz]["Date" .. i]  .. "\t" .. BusinessTable[biz]["Finstat" .. i]
								else
									break
								end
							else
								break
							end
						end
						showPlayerDialog(client, 64000, 3, "Финансовая статистика бизнеса", str, "Ок", "Отмена")
					end
				else
					addBox("Ошибка: Обратитесь к администрации.", client, 255, 0, 0)
				end
			end
		end
	elseif(dialogid == 62) then
		if(response == true) then
			local bus = toch(getElementData(client, "BusOwnID"))
			local accid = toch(getElementData(client, "AccID"))
			if(accid == BusinessTable[bus]["Owner"]) then
				if(bus >= 10) then
					if(BusinessTable[bus]["Type"] == 1 or BusinessTable[bus]["Type"] == 3) then
						setElementMoney(client, 45000, "Продажа биз в гос")
						BusinessTable[bus]["Owner"] = 0
						BusinessTable[bus]["OwnerName"] = ""
						SED(client, "BusOwnID", 0)
						dbExec(mysql, "UPDATE `Business` set `Owner` = ?, `OwnerName` = ? WHERE `ID` = ?", BusinessTable[bus]["Owner"], BusinessTable[bus]["OwnerName"], bus)
						dbExec(mysql, "UPDATE `Accounts` SET `BusinessID` = ? WHERE `Name` = ?", 0, getElementData(client, "Name"))
						addBox("Вы продали бизнес №" .. bus .. " государству\nВ половину стоимости.", client, 60, 255, 0)
						BusinessTable[bus]["OwnerPlayer"] = nil
					elseif(BusinessTable[bus]["Type"] == 4) then
						setElementMoney(client, 162500, "Продажа биз в гос")
						BusinessTable[bus]["Owner"] = 0
						BusinessTable[bus]["OwnerName"] = ""
						SED(client, "BusOwnID", 0)
						dbExec(mysql, "UPDATE `Business` set `Owner` = ?, `OwnerName` = ? WHERE `ID` = ?", BusinessTable[bus]["Owner"], BusinessTable[bus]["OwnerName"], bus)
						dbExec(mysql, "UPDATE `Accounts` SET `BusinessID` = ? WHERE `Name` = ?", 0, getElementData(client, "Name"))
						addBox("Вы продали бизнес №" .. bus .. " государству\nВ половину стоимости.", client, 60, 255, 0)
						BusinessTable[bus]["OwnerPlayer"] = nil
					elseif(BusinessTable[bus]["Type"] == 5) then
						setElementMoney(client, 125000, "Продажа биз в гос")
						BusinessTable[bus]["Owner"] = 0
						BusinessTable[bus]["OwnerName"] = ""
						SED(client, "BusOwnID", 0)
						dbExec(mysql, "UPDATE `Business` set `Owner` = ?, `OwnerName` = ? WHERE `ID` = ?", BusinessTable[bus]["Owner"], BusinessTable[bus]["OwnerName"], bus)
						dbExec(mysql, "UPDATE `Accounts` SET `BusinessID` = ? WHERE `Name` = ?", 0, getElementData(client, "Name"))
						addBox("Вы продали бизнес №" .. bus .. " государству\nВ половину стоимости.", client, 60, 255, 0)
						BusinessTable[bus]["OwnerPlayer"] = nil
					elseif(BusinessTable[bus]["Type"] == 6) then
						setElementMoney(client, 750000, "Продажа биз в гос")
						BusinessTable[bus]["Owner"] = 0
						BusinessTable[bus]["OwnerName"] = ""
						SED(client, "BusOwnID", 0)
						dbExec(mysql, "UPDATE `Business` set `Owner` = ?, `OwnerName` = ? WHERE `ID` = ?", BusinessTable[bus]["Owner"], BusinessTable[bus]["OwnerName"], bus)
						dbExec(mysql, "UPDATE `Accounts` SET `BusinessID` = ? WHERE `Name` = ?", 0, getElementData(client, "Name"))
						addBox("Вы продали бизнес №" .. bus .. " государству\nВ половину стоимости.", client, 60, 255, 0)
						BusinessTable[bus]["OwnerPlayer"] = nil
					elseif(BusinessTable[bus]["Type"] == 7) then
						setElementMoney(client, 375000, "Продажа биз в гос")
						BusinessTable[bus]["Owner"] = 0
						BusinessTable[bus]["OwnerName"] = ""
						SED(client, "BusOwnID", 0)
						dbExec(mysql, "UPDATE `Business` set `Owner` = ?, `OwnerName` = ? WHERE `ID` = ?", BusinessTable[bus]["Owner"], BusinessTable[bus]["OwnerName"], bus)
						dbExec(mysql, "UPDATE `Accounts` SET `BusinessID` = ? WHERE `Name` = ?", 0, getElementData(client, "Name"))
						addBox("Вы продали бизнес №" .. bus .. " государству\nВ половину стоимости.", client, 60, 255, 0)
						BusinessTable[bus]["OwnerPlayer"] = nil
					end
				else
					addBox("Системная ошибка. Повторите попытку.", client, 255, 0, 0)
				end
			else
				addBox("Системная ошибка. Повторите попытку.", client, 255, 0, 0)
			end
		end
	elseif(dialogid == 63) then
		if(response == true) then
			local bus = toch(getElementData(client, "BusOwnID"))
			local accid = toch(getElementData(client, "AccID"))
			if(accid == BusinessTable[bus]["Owner"]) then
				if(toch(inputtext) ~= nil) then
					inputtext = toch(inputtext)
					if(IDS[inputtext] ~= nil) then
						local secPlayer = IDS[inputtext]
						local biz = toch(getElementData(secPlayer, "BusOwnID"))
						if(biz == 0) then
							if(getElementData(secPlayer, "Login") == true) then
								local x, y, z = getElementPosition(secPlayer)
								local x1, y1, z1 = getElementPosition(client)
								if(getDistanceBetweenPoints3D(x, y, z, x1, y1, z1) < 20) then
									SED(client, "BusSellPlayer", secPlayer)
									showPlayerDialog(client, 64, 2, "Стоимость продажи бизнеса.", "Введите стоимость продажи бизнеса.", "Продать", "Отмена")
								else
									addBox("Ошибка: Данный игрок слишком далеко.", client, 255, 0, 0)
								end
							else
								addBox("Ошибка: Данный игрок не авторизован.", client, 255, 0, 0)
							end
						else
							addBox("Ошибка: У данного игрока уже есть бизнес.", client, 255, 0, 0)
						end
					else
						addBox("Ошибка: Данный игрок не на сервере.", client, 255, 0, 0)
					end
				else
					addBox("Ошибка: Некорректно введён ID игрока.", client, 255, 0, 0)
				end
			else
				addBox("Системная ошибка. Повторите попытку.", client, 255, 0, 0)
			end
		end
	elseif(dialogid == 64) then
		if(response == true) then
			if(toch(inputtext) ~= nil) then
				local summ = toch(inputtext)
				if(summ > 60000) then
					local secPlayer = getElementData(client, "BusSellPlayer")
					if(isElement(secPlayer) == true) then
						if(getElementData(secPlayer, "Login") == true) then
							local secMoney = getElementData(secPlayer, "Money")
							if(secMoney >= summ) then
								local x, y, z = getElementPosition(secPlayer)
								local x1, y1, z1 = getElementPosition(client)
								local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
								if(dist < 20) then
									local str = getElementData(client, "Name") .. " предлагает Вам купить бизнес №" .. getElementData(client, "BusOwnID") .. ".\nСтоимость покупки: " .. summ .. "$." 
									showPlayerDialog(secPlayer, 65, 1, "Покупка бизнеса.", str, "Купить", "Отмена")
									SED(secPlayer, "BusBuyPlayer", client)
									SED(secPlayer, "BusBuyPrice", summ)
									SED(secPlayer, "BusBuyID", getElementData(client, "BusOwnID"))
								else
									removeElementData(client, "BusSellPlayer")
									addBox("Ошибка: Данный игрок слишком далеко от Вас.", client, 255, 0, 0)
								end
							else
								removeElementData(client, "BusSellPlayer")
								addBox("Ошибка: У данного игрока недостаточно денег\nДля совершения покупки.", client, 255, 0, 0)
							end
						else
							removeElementData(client, "BusSellPlayer")
							addBox("Ошибка: Выбранный Вами уже не авторизован.", client, 255, 0, 0)
						end
					else
						removeElementData(client, "BusSellPlayer")
						addBox("Ошибка: Выбранный Вами уже не в сети.", client, 255, 0, 0)
					end
				else
					addBox("Ошибка: Вы не можете продать бизнес\nменее чем за половину\nгосударственной стоимости.", client, 255, 0, 0)
					showPlayerDialog(client, 45, 2, "Стоимость продажи бизнеса.", "Введите стоимость продажи бизнеса.", "Продать", "Отмена")
				end
			else
				addBox("Ошибка: Сумма введена некорректно\nПовторите попытку.", client, 255, 0, 0)
				showPlayerDialog(client, 45, 2, "Стоимость продажи бизнеса.", "Введите стоимость продажи бизнеса.", "Продать", "Отмена")
			end
		else
			addBox("Вы отменили продажу бизнеса.", client, 255, 0, 0)
			removeElementData(client, "BusSellPlayer")
		end
	elseif(dialogid == 65) then
		local secPlayer = getElementData(client, "BusBuyPlayer")
		if(response == true) then
			local money = getElementData(client, "Money")
			local price = getElementData(client, "BusBuyPrice")
			if(money >= price) then
				if(isElement(secPlayer) == true) then
					if(getElementData(secPlayer, "Login") == true) then
						local biz = getElementData(client, "BusBuyID")
						local theBiz = getElementData(secPlayer, "BusOwnID")
						local own = getElementData(client, "BusOwnID")
						if(own == 0) then
							if(biz == theBiz) then
								BusinessTable[biz]["Owner"] = getElementData(client, "AccID")
								BusinessTable[biz]["OwnerName"] = getElementData(client, "Name")
								SED(secPlayer, "BusOwnID", 0)
								SED(client, "BusOwnID", biz)
								setElementMoney(client, price * (-1), "Покупка биз")
								setElementMoney(secPlayer, price, "Продажа биз")
								dbExec(mysql, "UPDATE `Business` SET `Owner` = ?, `OwnerName` = ?, `Benzovoz` = '0' WHERE `ID` = ?", BusinessTable[biz]["Owner"], BusinessTable[biz]["OwnerName"], biz)
								dbExec(mysql, "UPDATE `Accounts` SET `BusinessID` = 0 WHERE `ID` = ?", getElementData(secPlayer, "AccID"))
								dbExec(mysql, "UPDATE `Accounts` SET `BusinessID` = ? WHERE `ID` = ?", biz, getElementData(client, "AccID"))
								addBox("Вы успешно приобрели бизнес " .. biz .. " id.\nНе забудьте оплатить налоги в меню!", client, 0, 60, 255)
								addBox("Вы успешно продали бизнес " .. biz .. " id.\nНе забудьте оплатить налоги в меню!", secPlayer, 0, 60, 255)
							else
								addBox("Ошибка: Данный бизнес уже продан.", client, 255, 0, 0)
							end
						else
							addBox("Ошибка: У Вас уже есть бизнес.", client, 255, 0, 0)
							addBox("Ошибка: У данного игрока уже есть бизнес.", secPlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: Игрок, который продавал\nВам бизнес, е авторизован.", client, 255, 0, 0)
					end
				else
					addBox("Ошибка: Игрок, который продавал Вам бизнес, отключился.", client, 255, 0, 0)
				end
			else
				addBox("Ошибка: У Вас недостаточно денег\nЧтобы совершить покупку данного бизнеса.", client, 255, 0, 0)
				if(isElement(secPlayer) == true) then
					addBox("Ошибка: У данного игрока недостаточно\nДенег для покупки.", secPlayer, 255, 0, 0)
				end
			end
		else
			local secPlayer = getElementData(client, "BusBuyPlayer")
			if(isElement(secPlayer) == true) then
				addBox("Игрок " .. getElementData(client, "Name") .. " отказался от\nПокупки Вашего бизнеса.", secPlayer, 220, 60, 0)
			end
		end
		removeElementData(client, "BusBuyPlayer")
		removeElementData(client, "BusBuyPrice")
		removeElementData(client, "BusBuyID")
	elseif(dialogid == 66) then
		if(response == true) then
			if(inputtext ~= nil) then
				if(toch(inputtext) ~= nil) then
					local biz = toch(getElementData(client, "BusOwnID"))
					inputtext = toch(inputtext)
					if(inputtext > 0) then
						if(OrderBiz[biz] == nil or OrderBiz[biz]["Products"] == 0) then
							local x, y, z = -900, -1420, -11
							local x1, y1, z1 = BusinessTable[biz]["px"], BusinessTable[biz]["py"], BusinessTable[biz]["pz"]
							local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
							local koef = dist / 1300
							if(koef > 0 and koef <= 1) then
								koef = 0.10
							elseif(koef > 1 and koef <= 2) then
								koef = 0.15
							elseif(koef > 2 and koef <= 3) then
								koef = 0.20
							else
								koef = 0.25
							end
							local price = math.ceil((koef + 1) * inputtext)
							if(BusinessTable[biz]["Money"] >= price) then
								if(inputtext <= 3000) then
									if(inputtext >= 1000) then
										if(BusinessTable[biz]["Products"] + inputtext <= BusinessTable[biz]["MaxProducts"]) then
											OrderBiz[biz] = {}
											OrderBiz[biz]["Products"] = inputtext
											BusinessTable[biz]["Money"] = BusinessTable[biz]["Money"] - price
											OrderBiz[biz]["Price"] = price
											dbExec(mysql, "UPDATE `Business` SET `OrderProducts` = ?, `OrderPrice` = ?, `Money` = ? WHERE `ID` = ?", OrderBiz[biz]["Products"], OrderBiz[biz]["Price"], BusinessTable[biz]["Money"], biz)
											addBox("Вы успешно сделали заказ\nНа " .. price .. "$ за " .. inputtext .. " кг материала.", client, 0, 100, 255)
											BusinessTable[biz]["OwnerPlayer"] = client
										else
											addBox("Ошибка: Вы не можете заказать больше,\nЧем можно поместить на склад.", client, 255, 0, 0)
										end
									else
										addBox("Минимальный заказ: 1000 кг.", client, 255, 0, 0)
									end
								else
									addBox("Ошибка: Вы не можете заказать\nБольше 3000 материалов.", client, 255, 0, 0)
								end
							else
								addBox("Ошибка: У Вас недостаточно денег,\nЧтобы сделать этот заказ.", client, 255, 0, 0)
							end
						else
							addBox("Ошибка: Вы уже сделали заказ\nРанее, ожидайте.", client, 255, 0, 0)
						end
					else
						addBox("Ошибка: Вы ввели некорректное число.", client, 255, 0, 0)
					end
				else
					addBox("Ошибка: Вы не ввели количество груза.", client, 255, 0, 0)
				end
			else
				addBox("Ошибка: Вы не ввели количество груза.", client, 255, 0, 0)
			end
		end
	elseif(dialogid == 67) then
		if(response == true) then
			if(inputtext ~= nil) then
				if(toch(inputtext) ~= nil) then
					inputtext = math.round(toch(inputtext))
					if(inputtext <= toch(getElementData(client, "Money"))) then
						local biz = toch(getElementData(client, "BusOwnID"))
						local accid = toch(getElementData(client, "AccID"))
						if(BusinessTable[biz]["Owner"] == accid) then
							if(inputtext > 0) then
								BusinessTable[biz]["Money"] = BusinessTable[biz]["Money"] + inputtext
								setElementMoney(client, inputtext * (-1), "На бизнес")
								dbExec(mysql, "UPDATE `Business` SET `Money` = ? WHERE `ID` = ?", BusinessTable[biz]["Money"], biz)
								addBox("Вы успешно внесли " .. inputtext .. "$ на счёт бизнеса.", client, 0, 100, 255)
							else
								addBox("Ошибка: Сумма введена некорректно.", client, 255, 0, 0)
							end
						else
							addBox("Системная ошибка.", client, 255, 0, 0)
						end
					else
						addBox("Ошибка: У Вас недостаточно денег.", client, 255, 0, 0)
					end
				else
					addBox("Ошибка: Сумма введена некорректно.", client, 255, 0, 0)
				end
			else
				addBox("Ошибка: Вы не ввели сумму.", client, 255, 0, 0)
			end
		end
	elseif(dialogid == 68) then
		if(response == true) then
			if(inputtext ~= nil) then
				if(toch(inputtext) ~= nil) then
					inputtext = math.round(toch(inputtext))
					if(inputtext > 0) then
						local biz = toch(getElementData(client, "BusOwnID"))
						local money = toch(getElementData(client, "Money"))
						if(inputtext <= BusinessTable[biz]["Money"]) then
							BusinessTable[biz]["Money"] = BusinessTable[biz]["Money"] - inputtext
							setElementMoney(client, inputtext, "От бизнеса")
							dbExec(mysql, "UPDATE `Business` SET `Money` = ? WHERE `ID` = ?", BusinessTable[biz]["Money"], biz)
							addBox("Вы сняли с бизнеса " .. inputtext .. "$.", client, 0, 100, 255)
						else
							addBox("Ошибка: недостаточно денег на счету.", client, 255, 0, 0)
						end
					else
						addBox("Ошибка: Сумма введена некорректно.", client, 255, 0, 0)
					end
				else
					addBox("Ошибка: Сумма введена некорректно.", client, 255, 0, 0)
				end
			else
				addBox("Ошибка: Сумма введена некорректно.", client, 255, 0, 0)
			end
		end
	elseif(dialogid == 71) then
		if(response == true) then
			if(getElementData(client, "Login") == true) then
				if(getElementData(client, "PWork") == 1) then
					if(getElementData(client, "VehicleDriverBus") ~= false) then
						local veh = getElementData(client, "VehicleDriverBus")
						local x, y, z, rz = getElementData(veh, "sx"), getElementData(veh, "sy"), getElementData(veh, "sz"), getElementData(veh, "srz")
						setTimer(customSpawnVehicle, 100, 1, veh)
						removeElementData(client, "March")
						removeElementData(veh, "DriverPlayerBus")
						removeElementData(client, "VehicleDriverBus")
						addBox("Вы закончили рабочий день.\nЧтобы устроиться на другую работу,\nВам нужно уволиться в том месте,\nГде Вы устраивались.", client, 0, 100, 255)
						local mrk = getElementData(client, "mrkBus")
						local blp = getElementData(client, "blpBus")
						if(isElement(mrk) == true) then
							destroyElement(mrk)
						end
						if(isElement(blp) == true) then
							destroyElement(blp)
						end
						removeElementData(client, "Stage")
						removeElementData(client, "March")
						removeElementData(client, "mrkBus")
						removeElementData(client, "blpBus")
					end
				elseif(getElementData(client, "PWork") == 3) then
					if(getElementData(client, "PWork") == 3) then
						if(getElementData(client, "CourierVehicle") ~= nil and getElementData(client, "CourierVehicle") ~= false) then
							local veh = getElementData(client, "CourierVehicle")
							customSpawnVehicle(veh)
							removeElementData(veh, "CourierPlayer")
							removeElementData(client, "CourierVehicle")
							addBox("Вы закончили рабочий день.", client, 0, 60, 255)
						end
						if(getElementData(client, "mrkCourierStart") ~= false) then
							local mrk = getElementData(client, "mrkCourierStart")
							local blp = getElementData(client, "blpCourierStart")
							removeEventHandler("onMarkerHit", mrk, startCourierWork)
							destroyElement(mrk)
							destroyElement(blp)
							removeElementData(client, "mrkCourierStart")
							removeElementData(client, "blpCourierStart")
						end
						if(getElementData(client, "mrkCourierEnd") ~= false) then
							local mrk = getElementData(client, "mrkCourierEnd")
							local blp = getElementData(client, "blpCourierEnd")
							removeEventHandler("onMarkerHit", mrk, mrkCourEnd)
							destroyElement(mrk)
							destroyElement(blp)
							removeElementData(client, "mrkCourierEnd")
							removeElementData(client, "blpCourierEnd")
							removeElementData(client, "Gruz")
							removeElementData(client, "Coef")
						end
						if(getElementData(client, "mrkCour") ~= false) then
							local mrk = getElementData(client, "mrkCour")
							local blp = getElementData(client, "blpCour")
							removeEventHandler("onMarkerHit", mrk, hitCourEnd)
							destroyElement(mrk)
							destroyElement(blp)
							removeElementData(client, "mrkCour")
							removeElementData(client, "blpCour")
							local bus = toch(getElementData(client, "courBiz"))
							OrderBiz[bus]["OrderCourier"] = nil
						end
					end
				elseif(getElementData(client, "PWork") == 2) then
					if(getElementData(client, "TaxiVehicle") ~= false) then
						local veh = getElementData(client, "TaxiVehicle")
						local id = getElementData(veh, "TaxiVehTable")
						customSpawnVehicle(veh)
						removeElementData(client, "TaxiVehicle")
						removeElementData(veh, "TaxiDriverPlayer")
						addBox("Вы закончили свой рабочий день.", client, 0, 60, 255)
					end
				elseif(getElementData(client, "PWork") == 4) then
					if(getElementData(client, "MechVeh") ~= false) then
						addBox("Вы успешно завершили рабочий день.", client, 0, 60, 255)
						local zprt = getElementData(client, "Zprt")
			            if(zprt ~= false) then
				            removeElementData(client, "Zprt")
				        end
				     	removeElementData(client, "MechStage")
						local veh = getElementData(client, "MechVeh")
						if(veh ~= false) then
							customSpawnVehicle(veh)
							removeElementData(veh, "MechDriver")
							removeElementData(client, "MechVeh")
						end
						local mrk = getElementData(client, "mrkMech")
						if(mrk ~= false) then
							removeElementData(client, "mrkMech")
							destroyElement(mrk)
						end
						local secveh = getElementData(client, "SVM")
						if(secveh ~= false) then
							local id = toch(getElementData(secveh, "Iter"))
							ServerPerem["MechCars"][id]["veh"] = nil
							customDestroyVehicle(secveh)
							removeElementData(client, "SVM")
						end
					end
				end
				if(getElementData(client, "NWork") > 0) then
					if(getElementData(client, "NWork") == 6) then
						if(getElementData(client, "MailVeh") ~= false) then
							local veh = getElementData(client, "MailVeh")
							if(isElement(veh) == true) then
								customSpawnVehicle(veh)
								setElementHealth(veh, 1000)
								SED(veh, "Fuel", 40)
								removeElementData(veh, "MailPlayer")
							end
							removeElementData(client, "MailVeh")
							if(getElementData(client, "blpMail") ~= false) then
								local blp = getElementData(client, "blpMail")
								local mrk = getElementData(client, "mrkMail")
								local aff = getEventHandlers("onMarkerHit", mrk)
								destroyElement(mrk)
								destroyElement(blp)
								removeElementData(client, "mrkMail")
								removeElementData(client, "blpMail")
							end
							addBox("Вы завершили свой рабочий день\nТранспорт был эвакуирован.", client, 0, 100, 250)
							local obj = getElementData(client, "PizzaObject")
							if(obj ~= false) then
								if(isElement(obj)) then
									exports.bone:detachElementFromBone(obj)
									destroyElement(obj)
									removeElementData(client, "PizzaObject")
								end
							end
						end
					elseif(getElementData(client, "NWork") == 8) then
						addBox("Вы уволились с работы\nВодителем погрузчика.", client, 0, 255, 60)
						SED(client, "NWork", 0)
						if(getElementData(client, "Faction") >= 1 and getElementData(client, "Faction") <= 4) then
							setElementModel(client, getElementData(client, "WorkSkin"))
						else
							setElementModel(client, getElementData(client, "Skin"))
						end
						local veh = getElementData(client, "loaderCar")
						if(veh ~= false) then
							customSpawnVehicle(veh)
							removeElementData(veh, "loaderPlayer")
							removeElementData(client, "loaderCar")
						end
						local mrk = getElementData(client, "mrkFirstLoaderCar")
						if(mrk ~= false) then
							destroyElement(mrk)
							removeElementData(client, "mrkFirstLoaderCar")
						end
						local blp = getElementData(client, "blpFirstLoaderCar")
						if(blp ~= false) then
							destroyElement(blp)
							removeElementData(client, "blpFirstLoaderCar")
						end
						exports.loaderWork:clearLoaderCar(client)
					else
						addBox("Произошла ошибка, повторите попытку.", client, 255, 0, 0)
					end
				else
					if(getElementData(client, "PWork") == 1) then
						if(getElementData(client, "VehicleDriverBus") ~= false) then
							local veh = getElementData(client, "VehicleDriverBus")
							local x, y, z, rz = getElementData(veh, "sx"), getElementData(veh, "sy"), getElementData(veh, "sz"), getElementData(veh, "srz")
							setTimer(customSpawnVehicle, 100, 1, veh)
							removeElementData(veh, "DriverPlayerBus")
							removeElementData(client, "VehicleDriverBus")
							addBox("Вы закончили рабочий день.", client, 0, 100, 255)
						end
					end
				end
			else
				addBox("Произошла ошибка, повторите попытку.", client, 255, 0, 0)
			end
		end
	elseif(dialogid == 72) then
		if(response == true) then
			local dom = toch(getElementData(client, "House"))
			if(dom > 0) then
				if(HouseTable[dom]["x"] ~= 0) then
					local veh = toch(HouseTable[dom]["Car1"])
					if(veh == 0) then
						listitem = listitem + 1
						local price = CarInfo[listitem]["GosPrice"]
						if(price <= getElementData(client, "Money")) then
							HouseTable[dom]["Car1"] = CarInfo[listitem]["ID"]
							setElementMoney(client, -CarInfo[listitem]["GosPrice"], "Покупка кар в магазине")
							dbExec(mysql, "UPDATE `House` SET `Car` = ? WHERE `ID` = ?", HouseTable[dom]["Car1"], dom)
							local id = toch(getElementData(client, "ID"))
							PrivateCar[id] = createVeh(CarInfo[listitem]["ID"], -1280.5849609375, -695.056640625, 999.578125, 0, 0, 90)
							SET(PrivateCar[id], 8)
							SIDP(PrivateCar[id], getElementData(client, "House"))
							SED(PrivateCar[id], "PrivatePlayer", id)
							SED(PrivateCar[id], "Lists", listitem)
							addBox("Приобретено: " .. CarInfo[listitem]["Name"] .. "\nСтоимость: " .. CarInfo[listitem]["GosPrice"] .. "$.\nЧтобы воспользоваться авто,\nНеобходимо использовать /garage дома.", client, 0, 255, 100)
						else
							addBox("Ошибка:\nУ Вас недостаточно денег для покупки.", client, 255, 0, 0)
						end
					else
						addBox("Ошибка: У Вас уже есть машина.", client, 255, 0, 0)
					end
				else
					addBox("Ошибка: У Вас нет гаража.", client, 255, 0, 0)
				end
			else
				addBox("Ошибка: У Вас нет дома.", client, 255, 0, 0)
			end
		end
	elseif(dialogid == 73) then
		if(response == true) then
			local fact = getElementData(client, "Faction")
			if(fact >= 1 and fact <= 4) then
				local str = "Maf" .. fact .."Mat"
				if(Server[str] >= 21) then
					Server[str] = Server[str] - 21
					if(listitem == 0) then
						giveWeapon(client, 24, 21)
						addBox("Вы забрали со склада Desert Eagle", client, 0, 255, 100)
					elseif(listitem == 1) then
						giveWeapon(client, 25, 8)
						addBox("Вы забрали со склада Shotgun", client, 0, 255, 100)
					else
						giveWeapon(client, 30, 60)
						addBox("Вы забрали со склада AK-47", client, 0, 255, 100)
					end
					dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = ?", Server[str], str)
					local query = dbQuery(mysql, "SELECT COUNT(*) from `skllogs`")
					local result = dbPoll(query, -1)
					dbExec(mysql, "INSERT into `skllogs` (`ID`, `AccID`, `Name`, `Faction`, `Type`, `Ed`) VALUES (?, ?, ?, ?, 5, ?)", result[1]["COUNT(*)"], getElementData(client, "AccID"), getElementData(client, "Name"), fact, -21)
					dbFree(query)
					local str = getElementData(client, "Name") .. " (" .. getElementData(client, "ID") .. ") забрал оружие со склада."
					for i,n in pairs(IDS) do
						if(getElementData(n, "Login") == true) then
							if(getElementData(n, "Faction") == getElementData(client, "Faction")) then
								sendClientMessage(str, n, 180, 120, 180)
							end
						end
					end
				else
					addBox("Ошибка: На складе недостаточно материалов.", client, 255, 0, 0)
				end
			end
		end
	elseif(dialogid == 74) then
		if(response == true) then
			local fact = getElementData(client, "Faction")
			if(fact == 9) then
				if(Server["ArmyGruz"] >= 21) then
					Server["ArmyGruz"] = Server["ArmyGruz"] - 21
					if(listitem == 0) then
						if(getPedArmor(client) < 100) then
							setPedArmor(client, 100)
							addBox("Вы забрали со склада бронежилет.", client, 0, 255, 100)
						else
							addBox("На Вас уже надет бронежилет.", client, 255, 0, 0)
						end
					elseif(listitem == 1) then
						if(getElementData(client, "Aptechka") == false) then
							SED(client, "Aptechka", 1)
						else
							if(getElementData(client, "Aptechka") <= 5) then
								SED(client, "Aptechka", getElementData(client, "Aptechka") + 1)
							else
								addBox("Ошибка: Вы не можете взять\nБольше 6 аптечек.", client, 255, 0, 0)
							end
						end
						addBox("Вы взяли аптечку со склада.\nЧтобы воспользоваться ей, введите\n/healme.\nВ инвентаре: " .. getElementData(client, "Aptechka") .. " шт.", client, 0, 255, 60)
					elseif(listitem == 2) then
						giveWeapon(client, 24, 28)
						addBox("Вы забрали со склада Desert Eagle", client, 0, 255, 100)
					elseif(listitem == 3) then
						giveWeapon(client, 25, 14)
						addBox("Вы забрали со склада Shotgun", client, 0, 255, 100)
					else
						giveWeapon(client, 31, 80)
						addBox("Вы забрали со склада M4", client, 0, 255, 100)
					end
				else
					addBox("Ошибка: На складе недостаточно\nМатериалов, чтобы взять это.", client, 255, 0, 0)
				end
			else
				addBox("Ошибка: Вы не армии.", client, 255, 0, 0)
			end
		end
	elseif(dialogid == 75) then
		if(response == true) then
			local biz = toch(getElementData(client, "BusOwnID"))
			if(biz > 0) then
				local own = BusinessTable[biz]["Owner"]
				local accid = getElementData(client, "AccID")
				if(own == accid) then
					if(inputtext ~= nil) then
						inputtext = toch(inputtext)
						if(inputtext ~= nil) then
						inputtext = math.floor(inputtext)
							if(inputtext > 0 and inputtext < 720) then
								local money = toch(getElementData(client, "Money"))
								if(money >= inputtext * 50) then
									if(BusinessTable[biz]["PayDay"] + inputtext <= 720) then
										BusinessTable[biz]["PayDay"] = BusinessTable[biz]["PayDay"] + inputtext
										dbExec(mysql, "UPDATE `Business` SET `PayDay` = ? WHERE `ID` = ?", BusinessTable[biz]["PayDay"], biz)
										setElementMoney(client, -inputtext * 50, "Пейдей биз")
										addBox("Вы оплатили бизнес до " .. BusinessTable[biz]["PayDay"] .. "/720.", client, 0, 100, 255)
									else
										BusinessTable[biz]["PayDay"] = 720
										dbExec(mysql, "UPDATE `Business` SET `PayDay` = ? WHERE `ID` = ?", 720, biz)
										setElementMoney(client, -inputtext * 50, "Пейдей биз")
										addBox("Вы оплатили бизнес на максимальное значение.", client, 0, 100, 255)
									end
								else
									addBox("Ошибка: У Вас недостаточно денег.", client, 255, 0, 0)
								end
							else
								addBox("Сумма введена некорректно!", client, 255, 0, 0)
							end
						else
							addBox("Ошибка: Оплата может быть от 1 до 719.", client, 255, 0, 0)
						end
					else
						addBox("Произошла ошибка\nСообщите администрации.#7.03", client, 255, 0, 0)
					end
				else
					addBox("Произошла ошибка\nСообщите администрации.#7.02", client, 255, 0, 0)
				end
			else
				addBox("Произошла ошибка\nСообщите администрации.#7.01", client, 255, 0, 0)
			end
		end
	elseif(dialogid == 76) then
		if(response == true) then
			local adm = toch(getElementData(client, "Admin"))
			if(listitem >= 0) then
				listitem = listitem + 1
				if(listitem <= adm) then
					local str = "Команда\tПеременные\tЗначение"
					for i=1,table.maxn(AdminCommands[listitem]) do
						str = str .. "\n" .. AdminCommands[listitem][i]["String"] .. "\t" .. AdminCommands[listitem][i]["Pole"] .. "\t" .. AdminCommands[listitem][i]["Value"]
					end
					showPlayerDialog(client, 64000, 3, "Список команд админа " .. listitem .. " уровня.", str, "Ок", "Отмена")
				end
			end
		end
	elseif(dialogid == 77) then
		if(response == true) then
			if(listitem > -1) then
				listitem = listitem + 1
				local money = toch(getElementData(client, "Money"))
				if(money >= SkinTable[listitem]["Price"]) then
					setElementModel(client, SkinTable[listitem]["ID"])
					addBox("Вы приобрели одежду " .. SkinTable[listitem]["ID"] .. " id.", client, 255, 0)
					setElementMoney(client, SkinTable[listitem]["Price"] * (-1), "Покупка скин")
					updatePlayerAccount(client, "Skin", SkinTable[listitem]["ID"])
					SED(client, "Skin", SkinTable[listitem]["ID"])
				else
					addBox("Ошибка: У Вас недостаточно денег для покупки.", client, 255, 0, 0)
				end
			end
		end
	elseif(dialogid == 78) then
		if(response == true) then
			if(listitem > -1) then
				if(listitem == 0) then
					SED(client, "SpawnID", 0)
					updatePlayerAccount(client, "SpawnID", 0)
					addBox("Начальная точка: стандарт", client, 0, 255, 100)
				elseif(listitem == 1) then
					SED(client, "SpawnID", 1)
					updatePlayerAccount(client, "SpawnID", 1)
					addBox("Начальная точка: дом", client, 0, 255, 100)
				elseif(listitem == 2) then
					if(getElementData(client, "Faction") > 0) then
						SED(client, "SpawnID", 2)
						updatePlayerAccount(client, "SpawnID", 2)
						addBox("Начальная точка: фракция", client, 0, 255, 100)
					else
						addBox("Вы не трудоустроены\nВ какой-либо организации.", client, 255, 0, 0)
					end
				end
			end
		end
	elseif(dialogid == 79) then
		if(response == true) then
			if(listitem > -1) then
				if(listitem == 0) then
					local money = toch(getElementData(client, "Money"))
					if(money >= 200) then
						addBox("Вы купили и съели пиццу с \"Анастасами\"", client, 0, 255, 100)
						setElementMoney(client, -200, "Покупка пицца")
						local food = toch(getElementData(client, "Food"))
						if(food + 30 > 100) then
							SED(client, "Food", 100)
						else
							SED(client, "Food", food + 30)
						end
						UpdateFood(client)
					else
						addBox("У Вас недостаточно денег для покупки пиццы.", client, 255, 0, 0)
					end
				elseif(listitem == 1) then
					local money = toch(getElementData(client, "Money"))
					if(money >= 500) then
						addBox("Вы купили и съели бургер.", client, 0, 255, 100)
						setElementMoney(client, -500, "Покупка бургер")
						local food = toch(getElementData(client, "Food"))
						if(food + 70 > 100) then
							SED(client, "Food", 100)
						else
							SED(client, "Food", food + 70)
						end
						UpdateFood(client)
					else
						addBox("У Вас недостаточно денег для покупки бургера.", client, 255, 0, 0)
					end
				elseif(listitem == 2) then
					local money = toch(getElementData(client, "Money"))
					if(money >= 800) then
						addBox("Вы купили и съели обед.", client, 0, 255, 100)
						setElementMoney(client, -800, "Покупка обед")
						local food = toch(getElementData(client, "Food"))
						SED(client, "Food", 100)
						UpdateFood(client)
					else
						addBox("У Вас недостаточно денег для покупки обеда.", client, 255, 0, 0)
					end
				end
			end
		end
	elseif(dialogid == 80) then
		if(response == true) then
			local veh = getPedOccupiedVehicle(client)
			if(veh ~= false) then
				local money = toch(getElementData(client, "Money"))
				if(money >= 250) then
					if(getElementHealth(veh) ~= 1000) then
						if(BusinessTable[150]["Owner"] > 0) then
							if(BusinessTable[150]["Products"] >= 10) then
								setElementMoney(client, -275, "Ремонт")
								setElementHealth(veh, 1000)
								BusinessTable[150]["Products"] = BusinessTable[150]["Products"] - 15
								setBusinessMoney(150, 75)
								addBox("Вы успешно отремонтировали Ваш транспорт.", client, 0, 255, 100)
								setVehicleDoorState(veh, 0, 0)
								setVehicleDoorState(veh, 1, 0)
								setVehicleDoorState(veh, 2, 0)
								setVehicleDoorState(veh, 3, 0)
								setVehicleDoorState(veh, 4, 0)
								setVehicleDoorState(veh, 5, 0)
								fixVehicle(veh)
							else
								addBox("В сети для ремонта закончились продукты.", client, 255, 0, 0)
							end
						else
							setElementMoney(client, -275, "Ремонт")
							setElementHealth(veh, 1000)
							addBox("Вы успешно отремонтировали Ваш транспорт.", client, 0, 255, 100)
							setVehicleDoorState(veh, 0, 0)
							setVehicleDoorState(veh, 1, 0)
							setVehicleDoorState(veh, 2, 0)
							setVehicleDoorState(veh, 3, 0)
							setVehicleDoorState(veh, 4, 0)
							setVehicleDoorState(veh, 5, 0)
							fixVehicle(veh)
						end
					else
						addBox("Ваше авто не нуждается в ремонте.", client, 255, 0, 0)
					end
				else
					addBox("У Вас недостаточно денег.", client, 255, 0, 0)
				end
			else
				addBox("Произошла ошибка.\nОбратитесь к администрации.", client, 255, 0, 0)
			end
		end
		removeElementData(client, "mrkRepair")
	elseif(dialogid == 81) then
		if(response == true) then
			if(listitem > -1) then
				if(listitem == 0) then
					local money = toch(getElementData(client, "Money"))
					if(money >= 100) then
						local id = getElementData(client, "BusinessID")
						if(id ~= false) then
							if(BusinessTable[id]["Products"] >= 50) then
								BusinessTable[id]["Products"] = BusinessTable[id]["Products"] - 50
								addBox("Вы купили и съели пиццу с \"Анастасами\"", client, 0, 255, 100)
								setElementMoney(client, -100, "Покупка пицца")
								local food = toch(getElementData(client, "Food"))
								if(food + 30 > 100) then
									SED(client, "Food", 100)
								else
									SED(client, "Food", food + 30)
								end
								checkFood(client)
								UpdateFood(client)
								setBusinessMoney(id, 100)
								dbExec(mysql, "UPDATE `Business` SET `Products` = ? WHERE `ID` = ?", BusinessTable[id]["Products"], id)
							else
								addBox("В закусочной закончились продукты.", client, 255, 0, 0)
							end
						end
					else
						addBox("У Вас недостаточно денег для покупки пиццы.", client, 255, 0, 0)
					end
				elseif(listitem == 1) then
					local money = toch(getElementData(client, "Money"))
					if(money >= 175) then
						local id = getElementData(client, "BusinessID")
						if(BusinessTable[id]["Products"] >= 90) then
							BusinessTable[id]["Products"] = BusinessTable[id]["Products"] - 90
							addBox("Вы купили и съели пиццу \"Пеппеньезе\"", client, 0, 255, 100)
							setElementMoney(client, -175, "Покупка пицца")
							local food = toch(getElementData(client, "Food"))
							if(food + 70 > 100) then
								SED(client, "Food", 100)
							else
								SED(client, "Food", food + 70)
							end
							checkFood(client)
							UpdateFood(client)
							local id = getElementData(client, "BusinessID")
							setBusinessMoney(id, 175)
							dbExec(mysql, "UPDATE `Business` SET `Products` = ? WHERE `ID` = ?", BusinessTable[id]["Products"], id)
						else
							addBox("В закусочной закончились продукты.", client, 255, 0, 0)
						end
					else
						addBox("У Вас недостаточно денег для покупки пиццы.", client, 255, 0, 0)
					end
				elseif(listitem == 2) then
					local money = toch(getElementData(client, "Money"))
					if(money >= 275) then
						local id = getElementData(client, "BusinessID")
						if(BusinessTable[id]["Products"] >= 150) then
							BusinessTable[id]["Products"] = BusinessTable[id]["Products"] - 150
							addBox("Вы купили и съели бургер.", client, 0, 255, 100)
							setElementMoney(client, -275, "Покупка бургер")
							local food = toch(getElementData(client, "Food"))
							SED(client, "Food", 100)
							checkFood(client)
							UpdateFood(client)
							local id = getElementData(client, "BusinessID")
							setBusinessMoney(id, 275)
							dbExec(mysql, "UPDATE `Business` SET `Products` = ? WHERE `ID` = ?", BusinessTable[id]["Products"], id)
						else
							addBox("В закусочной закончились продукты.", client, 255, 0, 0)
						end
					else
						addBox("У Вас недостаточно денег для покупки бургера.", client, 255, 0, 0)
					end
				end
			end
		end
	elseif(dialogid == 82) then
		if(response == true) then
			if(listitem == 0) then
				local id = toch(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(306.5087890625, 289.6396484375, 16.184661865234, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]	= createBlip(306.5087890625, 289.6396484375, 16.184661865234, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
				SED(GPST[id]["Pickup"], "Player", client)
			elseif(listitem == 1) then
				local id = toch(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(-1052.2666015625, -231.087890625, 11.404360771179, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]	= createBlip(-1052.2666015625, -231.087890625, 11.404360771179, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
				SED(GPST[id]["Pickup"], "Player", client)
			elseif(listitem == 2) then
				local id = toch(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(-1063.2958984375, 319.2548828125, 11.21955871582, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"] = createBlip(-1063.2958984375, 319.2548828125, 11.21955871582, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
				SED(GPST[id]["Pickup"], "Player", client)
			elseif(listitem == 3) then
				local id = toch(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(-149.7919921875, -1395.5693359375, 10.423043251038, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"] = createBlip(-149.7919921875, -1395.5693359375, 10.423043251038, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
				SED(GPST[id]["Pickup"], "Player", client)
			end
		else
			showPlayerDialog(client, 25, 3, "GPS-навигатор", "Меню\nВажные места\nНачальные работы\nПостоянные работы\nГосударственные учреждения\nОпасные районы\nБлижайший магазин одежды\nБлижайший 24/7\nБлижайшая закусочная\nБлижайший банкомат\nБлижайшая аренда авто\nИнтересные места\nНайти моё авто\nНайти мой дом", "Выбор", "Отмена")
		end
	elseif(dialogid == 83) then
		if(response == true) then
			if(listitem == 0) then
				if(getElementData(client, "WeaponLicense") == true) then
					if(toch(getElementData(client, "Money")) >= 12500) then
						local mag = getElementData(client, "weaponMag")
						if(mag ~= false) then
							if(BusinessTable[mag]["Products"] >= 1250) then
								setBusinessMoney(mag, 12500)
								BusinessTable[mag]["Products"] = BusinessTable[mag]["Products"] - 1250
								dbExec(mysql, "UPDATE `Business` SET `Products` = ? WHERE `ID` = ?", BusinessTable[mag]["Products"], mag)
								setElementMoney(client, -12500, "Покупка дигл")
								addBox("Вы приобрели Desert Eagle", client, 0, 255, 100)
								giveWeapon(client, 24, 35)
							else
								addBox("В магазине недостаточно продуктов :(", client, 255, 0, 0)
							end
						else
							setElementMoney(client, -12500, "Покупка дигл")
							addBox("Вы приобрели Desert Eagle", client, 0, 255, 100)
							giveWeapon(client, 24, 35)
						end
					else
						addBox("Ошибка: У Вас недостаточно денег.", client, 255, 0, 0)
					end
				else
					addBox("Ошибка: У Вас нет лицензии.", client, 255, 60, 0)
				end
			elseif(listitem == 1) then
				if(getElementData(client, "WeaponLicense") == true) then
					if(toch(getElementData(client, "Money")) >= 15000) then
						local mag = getElementData(client, "weaponMag")
						if(mag ~= false) then
							if(BusinessTable[mag]["Products"] >= 1500) then
								setBusinessMoney(mag, 15000)
								BusinessTable[mag]["Products"] = BusinessTable[mag]["Products"] - 1500
								dbExec(mysql, "UPDATE `Business` SET `Products` = ? WHERE `ID` = ?", BusinessTable[mag]["Products"], mag)
								setElementMoney(client, -15000, "Покупка М4")
								addBox("Вы приобрели M4", client, 0, 255, 100)
								if(getPedWeapon(client, 5) == 0) then
									giveWeapon(client, 31, 120)
								else
									takeWeapon(client, 30)
									giveWeapon(client, 31, 120)
								end
							else
								addBox("В магазине недостаточно продуктов :(", client, 255, 0, 0)
							end
						else
							setElementMoney(client, -15000, "Покупка М4")
							addBox("Вы приобрели M4", client, 0, 255, 100)
							if(getPedWeapon(client, 5) == 0) then
								giveWeapon(client, 31, 120)
							else
								takeWeapon(client, 30)
								giveWeapon(client, 31, 120)
							end
						end
					else
						addBox("Ошибка: У Вас недостаточно денег.", client, 255, 0, 0)
					end
				else
					addBox("Ошибка: У Вас нет лицензии.", client, 255, 60, 0)
				end
			elseif(listitem == 2) then
				if(getElementData(client, "WeaponLicense") == true) then
					if(toch(getElementData(client, "Money")) >= 9000) then
						local mag = getElementData(client, "weaponMag")
						if(mag ~= false) then
							if(BusinessTable[mag]["Products"] >= 900) then
								setBusinessMoney(mag, 9000)
								BusinessTable[mag]["Products"] = BusinessTable[mag]["Products"] - 900
								dbExec(mysql, "UPDATE `Business` SET `Products` = ? WHERE `ID` = ?", BusinessTable[mag]["Products"], mag)
								addBox("Вы приобрели Shotgun", client, 0, 255, 100)
								setElementMoney(client, -9000, "Покупка Шотган")
								giveWeapon(client, 25, 35)
							else
								addBox("В магазине недостаточно продуктов :(", client, 255, 0, 0)
							end
						else
							addBox("Вы приобрели Shotgun", client, 0, 255, 100)
							setElementMoney(client, -9000, "Покупка Шотган")
							giveWeapon(client, 25, 35)
						end
					else
						addBox("Ошибка: У Вас недостаточно денег.", client, 255, 0, 0)
					end
				else
					addBox("Ошибка: У Вас нет лицензии.", client, 255, 60, 0)
				end
			elseif(listitem == 3) then
				if(getElementData(client, "WeaponLicense") == true) then
					if(toch(getElementData(client, "Money")) >= 14000) then
						local mag = getElementData(client, "weaponMag")
						if(mag ~= false) then
							if(BusinessTable[mag]["Products"] >= 1400) then
								setBusinessMoney(mag, 14000)
								BusinessTable[mag]["Products"] = BusinessTable[mag]["Products"] - 1400
								dbExec(mysql, "UPDATE `Business` SET `Products` = ? WHERE `ID` = ?", BusinessTable[mag]["Products"], mag)
								addBox("Вы приобрели AK-47", client, 0, 255, 100)
								setElementMoney(client, -14000, "Покупка ак-47")
								if(getPedWeapon(client, 5) == 0) then
									giveWeapon(client, 30, 120)
								else
									takeWeapon(client, 31)
									giveWeapon(client, 30, 120)
								end
							else
								addBox("В магазине недостаточно продуктов :(", client, 255, 0, 0)
							end
						else
							addBox("Вы приобрели AK-47", client, 0, 255, 100)
							setElementMoney(client, -14000, "Покупка ак-47")
							if(getPedWeapon(client, 5) == 0) then
								giveWeapon(client, 30, 120)
							else
								takeWeapon(client, 31)
								giveWeapon(client, 30, 120)
							end
						end
					else
						addBox("Ошибка: У Вас недостаточно денег.", client, 255, 0, 0)
					end
				else
					addBox("Ошибка: У Вас нет лицензии.", client, 255, 60, 0)
				end
			elseif(listitem == 4) then
				if(getElementData(client, "Money") >= 3000) then
					local mag = getElementData(client, "weaponMag")
					if(mag ~= false) then
						if(BusinessTable[mag]["Products"] >= 300) then
							setBusinessMoney(mag, 3000)
							BusinessTable[mag]["Products"] = BusinessTable[mag]["Products"] - 300
							dbExec(mysql, "UPDATE `Business` SET `Products` = ? WHERE `ID` = ?", BusinessTable[mag]["Products"], mag)
							addBox("Вы приобрели бронежилет", client, 0, 255, 100)
							setElementMoney(client, -3000, "Покупка бронежилет")
							setPedArmor(client, 100)
						else
							addBox("В магазине недостаточно продуктов :(", client, 255, 0, 0)
						end
					else
						addBox("Вы приобрели бронежилет", client, 0, 255, 100)
						setElementMoney(client, -3000, "Покупка бронежилет")
						setPedArmor(client, 100)
					end
				end
			end
		end
		removeElementData(client, "weaponMag")
	elseif(dialogid == 84) then
		local secPlayer = getElementData(client, "LicBy")
		if(response == true) then
			local price = toch(getElementData(client, "LicPrice"))
			local money = toch(getElementData(client, "Money"))
			if(money >= price) then
				SED(client, "WeaponLicense", true)
				setElementMoney(client, -price, "Покупка лицензии")
				setElementMoney(secPlayer, price / 5, "Продажа лицензии")
				dbExec(mysql, "UPDATE `Accounts` set `WeaponLicense` = 1 WHERE `Name` = ?",  getElementData(client, "Name"))
				addBox("Вы успешно приобрели\nЛицензию на оружие", client, 0, 255, 100)
				addBox(getElementData(client, "Name") .. " приобрел\nУ Вас лицензию на оружие.", secPlayer, 0, 255, 100)
			else
				addBox("У Вас недостаточно денег,\nЧтобы совершить данную покупку.", client, 255, 0, 0)
				addBox("Данный игрок отказался от покупки.", secPlayer, 255, 0, 0)
			end
		else
			addBox("Данный игрок отказался от покупки.", secPlayer, 255, 0, 0)
		end
	elseif(dialogid == 85) then 
		if(response == true) then
			if(listitem == 0) then
				if(getElementData(client, "House") > 0) then
					local house = toch(getElementData(client, "House"))
					local carid = 0
					local park = ""
					if(HouseTable[house]["vx"] ~= 0) then
						carid = HouseTable[house]["Car1"]
						park = "Есть"
					else
						park = "Отсутствует"
					end
					local pd = HouseTable[house]["PayDay"]
					local str = "Дом: " .. house .. " id.\nГараж: " .. park
					if(carid ~= 0) then
						str = str .. "\nМашина: " .. carid .. " id."
					end
					str = str .. "\nОплачено налогов: " .. pd .. "/720."
					showPlayerDialog(client, 64000, 1, "Инфомация о доме", str, "Ок", "Отмена")
				else
					addBox("Ошибка: У Вас нет дома.", client, 255, 0, 0)
				end
			elseif(listitem == 1) then
				if(getElementData(client, "House") > 0) then
					local house = getElementData(client, "House")
					local veh1, veh2, veh3, veh4 = HouseTable[house]["Car1"], HouseTable[house]["Car2"], HouseTable[house]["Car3"], HouseTable[house]["Car4"]
					local str = "Домашнее авто"
					if(veh1 >= 400) then
						str = str .. "\n" .. veh1 .. " id"
					else
						str = str .. "\nОтсутствует."
					end
					if(veh2 >= 400) then
						str = str .. "\n" .. veh2 .. " id"
					else
						str = str .. "\nОтсутствует."
					end
					if(veh3 >= 400) then
						str = str .. "\n" .. veh3 .. " id"
					else
						str = str .. "\nОтсутствует."
					end
					if(veh4 >= 400) then
						str = str .. "\n" .. veh4 .. " id"
					else
						str = str .. "\nОтсутствует."
					end
					showPlayerDialog(client, 119, 3, "Выбор домашнего авто", str, "Выбор", "Отмена")
				else
					addBox("Ошибка: У Вас нет дома.", client, 255, 0, 0)
				end
			elseif(listitem == 2) then
				showPlayerDialog(client, 86, 2, "Оплата налога за дом", "Введите количество часов, за которое\nВы хотите заплатить налог.\n \nНалог: 50$/Час.", "Оплата", "Отмена")
			elseif(listitem == 3) then
				if(getElementData(client, "House") > 0) then
					local house = getElementData(client, "House")
					local price = toch(HouseTable[house]["Price"] / 2) 
					local id = getElementData(client, "ID")
					if(PrivateCar[id] == nil) then
						showPlayerDialog(client, 18, 1, "Продать дом государству.", "Действительно ли Вы хотите продать дом государству?\nСтоимость продажи: " .. price .. "$", "Продать", "Отмена")
					else
						addBox("Ошибка: Сначала продайте авто.", client, 255, 0, 0)
					end
				else
					addBox("Ошибка: У Вас нет дома.", client, 255, 0, 0)
				end
			elseif(listitem == 4) then
				if(getElementData(client, "House") > 0) then
					local house = getElementData(client, "House")
					if(HouseTable[house]["Open"] == true) then
						addBox("Вы закрыли Ваш дом.", client, 0, 255, 60)
						HouseTable[house]["Open"] = false
						dbExec(mysql, "UPDATE `House` SET `Open` = 0 WHERE `ID` = ?", house)
					else
						addBox("Вы открыли Ваш дом.", client, 0, 255, 60)
						HouseTable[house]["Open"] = true
						dbExec(mysql, "UPDATE `House` SET `Open` = 1 WHERE `ID` = ?", house)
					end
				else
					addBox("Ошибка: У Вас нет дома.", client, 255, 0, 0)
				end
			elseif(listitem == 5) then
				local thePlayer = client
				local house = toch(getElementData(thePlayer, "House"))
				local house = getElementData(client, "House")
				local veh1, veh2, veh3, veh4 = HouseTable[house]["Car1"], HouseTable[house]["Car2"], HouseTable[house]["Car3"], HouseTable[house]["Car4"]
				local str = "Домашнее авто для продажи"
				if(veh1 >= 400) then
					str = str .. "\n" .. veh1 .. " id"
				else
					str = str .. "\nОтсутствует."
				end
				if(veh2 >= 400) then
					str = str .. "\n" .. veh2 .. " id"
				else
					str = str .. "\nОтсутствует."
				end
				if(veh3 >= 400) then
					str = str .. "\n" .. veh3 .. " id"
				else
					str = str .. "\nОтсутствует."
				end
				if(veh4 >= 400) then
					str = str .. "\n" .. veh4 .. " id"
				else
					str = str .. "\nОтсутствует."
				end
				showPlayerDialog(client, 122, 3, "Выбор авто для продажи", str, "Выбор", "Отмена")
			elseif(listitem == 6) then
				local thePlayer = client
				local house = toch(getElementData(thePlayer, "House"))
				local house = getElementData(client, "House")
				local veh1, veh2, veh3, veh4 = HouseTable[house]["Car1"], HouseTable[house]["Car2"], HouseTable[house]["Car3"], HouseTable[house]["Car4"]
				local str = "Домашнее авто для продажи"
				if(veh1 >= 400) then
					str = str .. "\n" .. veh1 .. " id"
				else
					str = str .. "\nОтсутствует."
				end
				if(veh2 >= 400) then
					str = str .. "\n" .. veh2 .. " id"
				else
					str = str .. "\nОтсутствует."
				end
				if(veh3 >= 400) then
					str = str .. "\n" .. veh3 .. " id"
				else
					str = str .. "\nОтсутствует."
				end
				if(veh4 >= 400) then
					str = str .. "\n" .. veh4 .. " id"
				else
					str = str .. "\nОтсутствует."
				end
				showPlayerDialog(client, 120, 3, "Выбор авто для продажи", str, "Выбор", "Отмена")
			end
		end
	elseif(dialogid == 86) then
		if(response == true) then
			local payday = inputtext
			if(getElementData(client, "House") > 0) then
				if(payday ~= nil) then
					if(toch(payday) ~= nil) then
						payday = math.round(payday)
						local house = getElementData(client, "House")
						local money = getElementData(client, "Money")
						if(money >= payday * 50) then
							if(HouseTable[house]["PayDay"] < 720) then
								if(HouseTable[house]["PayDay"] + payday <= 720) then
									setElementMoney(client, -payday * 50, "Оплата дома")
									addBox("Вы оплатили дом на " .. payday .. " PayDay.", client, 0, 255, 100)
									HouseTable[house]["PayDay"] = HouseTable[house]["PayDay"] + payday
									dbExec(mysql, "UPDATE `House` SET `PayDay` = ? WHERE `ID` = ?", HouseTable[house]["PayDay"], house)
								else
									payday = 720 - HouseTable[house]["PayDay"]
									setElementMoney(client, -payday * 50, "Оплата дома")
									addBox("Вы оплатили дом на максимум.", client, 0, 255, 100)
									HouseTable[house]["PayDay"] = HouseTable[house]["PayDay"] + payday
									dbExec(mysql, "UPDATE `House` SET `PayDay` = ? WHERE `ID` = ?", HouseTable[house]["PayDay"], house)
								end
							else
								addBox("Ваш дом уже оплачен на максимум.", client, 255, 255, 0)
							end
						else
							addBox("Ошибка: У Вас недостаточно денег.", client, 255, 0, 0)
						end
					else
						addBox("Ошибка: Количество введено некорректно.", client, 255, 0, 0)
					end
				else
					addBox("Ошибка: Вы не ввели количество.", client, 255, 0, 0)
				end
			else
				addBox("Ошибка: У Вас нет дома.", client, 255, 0, 0)
			end
		end
	elseif(dialogid == 87) then
		if(response == true) then
			if(getElementData(client, "NWork") == 0) then
				SED(client, "NWork", 7)
				addBox("Вы успешно устроились\nНа работу рыболовом.\nВы получили рыбацкие снасти.\nОтправляйтесь на пирс и арендуйте лодку.", client, 0, 255, 100)
				showPlayerDialog(client, 64000, 1, "Информация о работе", "Добро пожаловать на работу рыболовом!\nСуть данной работы заключается в спокойном времяпрепровождении на лодке.\nВам необходимо устроиться на работу на чекпоинте слева.\nДалее - #ff0000арендовать лодку за 250$.\nПосле чего плыть на ней на красный маячок, появляющийся после аренды. Он показывает место косяка.\nЗаплыв внутрь маячка, необходимо #0033EEПОЛНОСТЬЮ ЗАГЛУШИТЬ И ОСТАНОВИТЬ ЛОДКУ.\nВыйти в её заднюю часть и нажать на кнопку #0033EEПРОБЕЛ. Рыба попадет на крючок случайно от 8 до 15 секунд.\nПосле Вам необходимо будет пройти мини-игру с быстрым нажатием на ЛКМ.\nПройдя её, Вы поймаете случайную рыбу с определенным весом.\n(Сдать работу можно в любое время, вернувшись на причал на чекпоинт переодевания).\n \nПримечания:\n#ff0000* Следите за маячками на карте.\n#ff0000* Если Вы сдадите работу, аренда лодки автоматически спадает.\n#ff0000Стоимость аренды 250$.\n#00dd33Оплата работы: 2$ за 1 кг.", "Ок", "Отмена")
				local id = toch(getElementData(client, "ID"))
				fishobj[id] = createObject(14401, 0, 0, 0)
				exports.bone:attachElementToBone(fishobj[id], client, 12, 0, 0.025, 0.1, 0, 270, 180)
				toggleControl(client, "fire", false)
			else
				addBox("Произошла ошибка.\nПовторите попытку.", client, 255, 0, 0)
			end
		end
	elseif(dialogid == 88) then 
		if(response == true) then
			if(getElementData(client, "NWork") == 7) then
				SED(client, "NWork", 0)
				local id = toch(getElementData(client, "ID"))
				destroyElement(fishobj[id])
				fishobj[id] = nil
				toggleControl(client, "fire", true)
				triggerClientEvent(client, "OnEndWorkFish", client)
				if(getElementData(client, "FishBoat") ~= false) then
					if(isElement(getElementData(client, "FishBoat"))) then
						local veh = getElementData(client, "FishBoat")
						customSpawnVehicle(veh)
						removeElementData(veh, "FishPlayer")
						removeElementData(client, "FishBoat")
					end
				end
				if(getElementData(client, "FishKG") ~= false) then
					local bonus = 0
					local vip = getElementData(client, "VipType")
					if(vip == 2) then
						bonus = math.floor(getElementData(client, "FishKG") * 0.15)
					elseif(vip == 3) then
						bonus = math.floor(getElementData(client, "FishKG") * 0.25)
					elseif(vip == 4) then
						bonus = math.floor(getElementData(client, "FishKG") * 0.35)
					end
					local money = getElementData(client, "FishKG")
					money = math.floor(money)
					if(vip > 1) then
						addBox("Вы заработали " .. money * 2 * coefmoney .. "$ за\n" .. getElementData(client, "FishKG") .. " кг пойманной рыбы.\nБонус: " .. bonus * coefmoney .. "$.", client, 0, 255, 60)
					else
						addBox("Вы заработали " .. money * 2 * coefmoney .. "$ за\n" .. getElementData(client, "FishKG") .. " кг пойманной рыбы.", client, 0, 255, 60)
					end
					Server["FishGruz"] = Server["FishGruz"] + getElementData(client, "FishKG")
					edit3dtext(ServerPerem["FishLabel"], "Рыбный склад: #ff3300" .. Server["FishGruz"] .. " КГ.")
					checkqw(client, 3, money)
					setElementMoney(client, (money * 2 + bonus) * coefmoney, "Зарплата рыболова")
			    	removeElementData(client, "FishKG")
			    else
			    	addBox("Вы уволились с работы рыболовом.", client, 0, 255, 100)
			    end
			else
				addBox("Произошла ошибка.\nПовторите попытку.", client, 255, 0, 0)
			end
		end
	elseif(dialogid == 89) then
		if(response == true) then
			local veh = getPedOccupiedVehicle(client)
			if(veh ~= false) then
				if(getElementData(client, "Money") >= 250) then
					toggleControl(client, "accelerate", true ) 
					toggleControl(client, "brake_reverse", true )
					toggleControl(client, "handbrake", true )
					SED(client, "ToggleVeh", true)
					setElementMoney(client, -250, "Аренда лодки")
					SED(veh, "FishPlayer", client)
					SED(client, "FishBoat", veh)
					triggerClientEvent(client, "onStartWorkFish", client, veh)
					addBox("Чтобы завести/заглушить лодку,\nИспользуйте Left CTRL.\n \nОтправляйтесь к показанному на навигаторе\nКосяку рыб\nЧтобы включить/выключить радио,\nИспользуйте /radio.", client, 0, 60, 255)
				else
					setControlState(client, "enter_exit", true)
					addBox("У вас недостаточно денег для аренды.", client, 255, 0, 0)
				end
			end
		else
			setControlState(client, "enter_exit", true)
		end
	elseif(dialogid == 90) then
		if(response == true) then
			local id = toch(getElementData(client, "BusinessID"))
			if(id ~= nil) then
				SEP(client, -26.01171875, -137.8369140625, 1003.546875)
				setElementRotation(client, 0, 0, 90)
				SET(client, 16)
				SIDP(client, id)
			else
				addBox("Произошла ошибка, повторите попытку.", client, 255, 0, 0)
			end
		else
			removeElementData(client, "BusinessID")
		end
	elseif(dialogid == 91) then
		if(response == true) then
			local secPlayer = getElementData(client, "SellNrkPlayer")
			if(isElement(secPlayer) == true) then
				local price = getElementData(client, "SellNrkPrice")
				if(getElementData(client, "Money") - price >= 0) then
					local value = getElementData(client, "SellNrkValue")
					if(getElementData(client, "Nrk") + value <= 100) then
						if(getElementData(secPlayer, "Nrk") - value >= 0) then
							setElementMoney(client, -price, "Покупка наркотиков")
							setElementMoney(secPlayer, price, "Продажа наркотиков")
							SED(client, "Nrk", getElementData(client, "Nrk") + value)
							SED(secPlayer, "Nrk", getElementData(secPlayer, "Nrk") - value)
							updatePlayerAccount(client, "NRK", getElementData(client, "Nrk"))
							updatePlayerAccount(secPlayer, "NRK", getElementData(secPlayer, "Nrk"))
							local str = getElementData(secPlayer, "Name") .. " (" .. getElementData(secPlayer, "ID") .. ") продал\nВам " .. value .. " г. наркотиков за " .. price .. "$."
							addBox(str, client, 0, 60, 255)
							local str = "Вы продали " .. getElementData(client, "Name") .. " (" .. getElementData(client, "ID") .. ")\n" .. value .. " г. наркотиков за " .. price .. "$."
							addBox(str, secPlayer, 0, 60, 255)
							local str = getElementData(secPlayer, "Name") .. " (" .. getElementData(secPlayer, "ID") .. ") передал наркотики " .. getElementData(client, "Name") .. " (" .. getElementData(client, "ID") .. ")"
							local x, y, z = getElementPosition(secPlayer)
							for i, n in pairs(IDS) do
								if(getElementData(n, "Login") == true) then
									msgforcamera(str, n, 200, 140, 200, x, y, z, 10)
								end
							end
						else
						end
					else
					end
				else
				end
			else
			end
		end
		removeElementData(client, "SellNrkPlayer")
		removeElementData(client, "SellNrkValue")
		removeElementData(client, "SellNrkPrice")
	elseif(dialogid == 92) then
		if(response == true) then
			local price = getElementData(client, "WeaponSellPrice")
			local seller = getElementData(client, "WeaponSeller")
			if(isElement(seller) == true) then
				if(getElementData(client, "Money") >= price) then
					local slot = getElementData(client, "WeaponSlot")
					local weapon = getElementData(client, "WeaponSellID")
					if(getPedWeapon(seller, slot) == weapon) then
						local ammo = getElementData(client, "WeaponSellAmmo")
						if(getPedTotalAmmo(seller, slot) >= ammo) then
							takeWeapon(seller, weapon, ammo)
							giveWeapon(client, weapon, ammo)
							setElementMoney(seller, price, "Продажа оружие")
							setElementMoney(client, -price, "Покупка оружие")
							addBox("Вы успешно приобрели " .. WeaponTable[weapon] .. " с " .. ammo .. "\nПт за " .. price .. "$ у игрока " .. getElementData(seller, "Name") .. ".", client, 0, 60, 255)
							addBox("Вы успешно продали " .. WeaponTable[weapon] .. " с " .. ammo .. "\nПт за " .. price .. "$ для " .. getElementData(client, "Name") .. ".", seller, 0, 60, 255)
							local x, y, z = getElementPosition(client)
							local str = getElementData(seller, "Name") .. " (" .. getElementData(seller, "ID") .. ") передал " .. getElementData(client, "Name") .. " (" .. getElementData(client, "ID") .. ") " .. WeaponTable[weapon] .. " с " .. ammo .. " пт."
							for i, n in pairs(IDS) do
								if(getElementData(n, "Login") == true) then
									msgforcamera(str, n, 200, 140, 200, x, y, z, 10)
								end
							end
						else
							addBox("Произошла ошибка при покупке.", client, 255, 0, 0)
							addBox("Произошла ошибка при покупке.", seller, 255, 0, 0)
						end
					else
						addBox("Произошла ошибка при покупке.", client, 255, 0, 0)
						addBox("Произошла ошибка при покупке.", seller, 255, 0, 0)
					end
				else
					addBox("Ошибка: У Вас недостаточно денег для покупки.", client, 255, 0, 0)
					addBox("Ошибка: У игрока недостаточно денег для покупки.", seller, 255, 0, 0)
				end
			else
				addBox("Произошла ошибка при покупке.", client, 255, 0, 0)
			end
		else
			local secPlayer = getElementData(source, "WeaponSeller")
			if(isElement(secPlayer) == true) then
				addBox("Игрок " .. getElementData(source, "Name") .. " отказался\nОт покупки Вашего оружия.", secPlayer, 255, 0, 0)
			end
		end
		removeElementData(client, "WeaponSlot")
		removeElementData(client, "WeaponSeller")
		removeElementData(client, "WeaponSellID")
		removeElementData(client, "WeaponSellPrice")
		removeElementData(client, "WeaponSellAmmo")
	elseif(dialogid == 93) then
		if(response == true) then
			if(getElementData(client, "Faction") >= 1 and getElementData(client, "Faction") <= 4) then
				local nrk = getElementData(client, "Nrk")
				inputtext = toch(inputtext)
				if(inputtext ~= nil) then
					inputtext = math.floor(inputtext)
					if(inputtext > 0) then
						if(inputtext + nrk <= 100) then
							if(inputtext * 90 <= getElementData(client, "Money")) then
								setElementMoney(client, -(inputtext * 90))
								SED(client, "Nrk", nrk + inputtext)
								updatePlayerAccount(client, "NRK", nrk + inputtext)
								addBox("Вы успешно приобрели " .. inputtext .. " г.\nНаркотиков за " .. inputtext * 90 .. "$.", client, 0, 255, 60)
							else
								addBox("Ошибка: У Вас недостаточно денег.", client, 255, 0, 0)
							end
						else
							addBox("Ошибка: Слишком много.", client, 255, 0, 0)
						end
					else
						addBox("Ошибка: Число введено некорректно.", client, 255, 0, 0)
					end
				else
					addBox("Ошибка: Число введено некорректно.", client, 255, 0, 0)
				end
			end
		end
	elseif(dialogid == 95) then
		if(response == true) then
			if(getElementData(client, "Faction") > 0) then
				local secPlayer = getElementData(client, "SkinPlayer")
				if(getElementData(client, "Faction") == getElementData(secPlayer, "Faction")) then
					if(getElementData(client, "Rank") >= getElementData(secPlayer, "Rank")) then
						listitem = listitem + 1
						local faction = getElementData(client, "Faction")
						local iter = 0
						for i, n in pairs(FactionSkins[faction]) do
							iter = iter + 1
							if(iter == listitem) then
								setElementModel(secPlayer, n)
								SED(secPlayer, "WorkSkin", n)
								updatePlayerAccount(secPlayer, "WorkSkin", n)
								addBox("Вы выдали " .. getElementData(secPlayer, "Name") .. " скин " .. n .. " id.", client, 0, 60, 255)
								addBox(getElementData(client, "Name") .. " выдал Вам " .. n .. " id скин.", secPlayer, 0, 60, 255)
							end
						end
					else
					end
				else
				end
			else
			end
		end
		removeElementData(client, "SkinPlayer")
	elseif(dialogid == 96) then
		if(response == true) then
			if(getElementData(client, "Login") == true) then
				if(getElementData(client, "Warn") == 0) then
					if(getElementData(client, "Faction") == 0) then
						if(getElementData(client, "Rank") == 0) then
							local factsp = getElementData(client, "FactionInvite")
							if(factsp ~= false) then
								local secPlayer = getElementData(client, "FactionPlayer")
								SED(client, "Faction", factsp)
								SED(client, "Rank", 1)
								SED(client, "WorkSkin", FactionSkins[factsp][1])
								addBox("Вы приняты в организацию\n" .. FactionName[factsp][1], client, 0, 60, 255)
								addBox("Вы приняли игрока\n" .. getElementData(client, "Name") .. " в свою организацию.", secPlayer, 0, 60, 255)
								SED(client, "SpawnID", 2)
								updatePlayerAccount(client, "SpawnID", 2)
								dbExec(mysql, "UPDATE `Accounts` set `Faction` = '" .. factsp .."', `Rank` = '1', `WorkSkin` = ? WHERE `Name` = ?", FactionSkins[factsp][1], getElementData(client, "Name"))
								customSpawnPlayer(client)
							else
								addBox("Произошла серверная ошибка.", client, 255, 0, 0)
							end
						end
					end
				end
			end
		else
			addBox("Вы отказались от приглашения.", client, 255, 0, 0)
		end
		removeElementData(client, "FactionInvite")
		removeElementData(client, "FactionPlayer")
	elseif(dialogid == 97) then
		if(response == true) then
			local house = getElementData(client, "House")
			if(house > 0) then
				local slot = getElementData(client, "Sellplayercar")
				local secPlayer = getElementData(client, "SellerCar")
				if(isElement(secPlayer) == true) then
					local sechouse = getElementData(secPlayer, "House")
					if(sechouse > 0) then
						local car = getElementData(client, "SellCarInfo")
						if(car == HouseTable[sechouse]["Car" .. slot]) then
							local price = getElementData(client, "SellCarPrice")
							if(getElementData(client, "Money") >= price) then
								local premium = toch(getElementData(client, "VipType"))
								if(premium > 1) then
									local booleva = false
									for i=1,premium do
										if(HouseTable[house]["Car" .. i] == 0) then
											local color = HouseTable[sechouse]["Color" .. slot]
											local secid = getElementData(secPlayer, "ID")
											customDestroyVehicle(PrivateCar[secid])
											HouseTable[sechouse]["Car" .. slot] = 0
											HouseTable[house]["Car" .. i] = car
											local id = getElementData(client, "ID")
											if(isElement(PrivateCar[id])) then
												customDestroyVehicle(PrivateCar[id])
												PrivateCar[id] = nil
											end
											PrivateCar[id] = createVeh(car, HouseTable[house]["vx"], -1280.5849609375, -695.056640625, 999.578125, 0, 0, 90)
											SET(PrivateCar[id], 8)
											SIDP(PrivateCar[id], getElementData(client, "House"))
											SED(PrivateCar[id], "PrivatePlayer", id)
											SED(PrivateCar[id], "Lists", i)
											HouseTable[house]["Color" .. i] = color
											HouseTable[sechouse]["Color" .. slot] = 0
											dbExec(mysql, "UPDATE `House` SET `Car" .. slot .. "` = 0, `ColorID" .. slot .. "` = 0 WHERE `ID` = ?", sechouse)
											dbExec(mysql, "UPDATE `House` SET `Car" .. i .. "` = ?, `ColorID" .. i .. "` = ? WHERE `ID` = ?", car, color, house)
											if(HouseTable[house]["Color" .. i] == 0) then
												setVehicleColor(PrivateCar[id], 255, 255, 255, 255, 255, 255)
											elseif(HouseTable[house]["Color" .. i] == 1) then
												setVehicleColor(PrivateCar[id], 120, 120, 120, 120, 120, 120)
											elseif(HouseTable[house]["Color" .. i] == 2) then
												setVehicleColor(PrivateCar[id], 0, 0, 0, 0, 0, 0)
											elseif(HouseTable[house]["Color" .. i] == 3) then
												setVehicleColor(PrivateCar[id], 80, 0, 0, 80, 0, 0)
											elseif(HouseTable[house]["Color" .. i] == 4) then
												setVehicleColor(PrivateCar[id], 220, 220, 0, 220, 220, 0)
											elseif(HouseTable[house]["Color" .. i] == 5) then
												setVehicleColor(PrivateCar[id], 0, 60, 255, 0, 60, 255)
											end
											addBox("Вы успешно приобрели:\n" .. car .. " id за " .. price .. "$.\nИспользуйте /garage внутри дома,\nЧтобы попасть в гараж.", client, 0, 60, 255)
											setElementMoney(client, -price, "Покупка авто")
											setElementMoney(secPlayer, price, "Продажа авто")
											booleva = true
										break
										end
									end
									if(booleva == false) then
										addBox("Ошибка: Все слоты авто заняты!", client, 255, 0, 0)
									end
								else
									local booleva = false
									for i=1,1 do
										if(HouseTable[house]["Car" .. i] == 0) then
											local color = HouseTable[sechouse]["Color" .. slot]
											local secid = getElementData(secPlayer, "ID")
											customDestroyVehicle(PrivateCar[secid])
											HouseTable[sechouse]["Car" .. slot] = 0
											HouseTable[house]["Car" .. i] = car
											local id = getElementData(client, "ID")
											PrivateCar[id] = createVeh(car, HouseTable[house]["vx"], -1280.5849609375, -695.056640625, 999.578125, 0, 0, 90)
											SET(PrivateCar[id], 8)
											SIDP(PrivateCar[id], getElementData(client, "House"))
											SED(PrivateCar[id], "PrivatePlayer", id)
											SED(PrivateCar[id], "Lists", i)
											HouseTable[house]["Color" .. i] = color
											HouseTable[sechouse]["Color" .. slot] = 0
											dbExec(mysql, "UPDATE `House` SET `Car" .. slot .. "` = 0, `ColorID" .. slot .. "` = 0 WHERE `ID` = ?", sechouse)
											dbExec(mysql, "UPDATE `House` SET `Car" .. i .. "` = ?, `ColorID" .. i .. "` = ? WHERE `ID` = ?", car, color, house)
											if(HouseTable[house]["Color" .. i] == 0) then
												setVehicleColor(PrivateCar[id], 255, 255, 255, 255, 255, 255)
											elseif(HouseTable[house]["Color" .. i] == 1) then
												setVehicleColor(PrivateCar[id], 120, 120, 120, 120, 120, 120)
											elseif(HouseTable[house]["Color" .. i] == 2) then
												setVehicleColor(PrivateCar[id], 0, 0, 0, 0, 0, 0)
											elseif(HouseTable[house]["Color" .. i] == 3) then
												setVehicleColor(PrivateCar[id], 80, 0, 0, 80, 0, 0)
											elseif(HouseTable[house]["Color" .. i] == 4) then
												setVehicleColor(PrivateCar[id], 220, 220, 0, 220, 220, 0)
											elseif(HouseTable[house]["Color" .. i] == 5) then
												setVehicleColor(PrivateCar[id], 0, 60, 255, 0, 60, 255)
											end
											addBox("Вы успешно приобрели:\n" .. car .. " id за " .. price .. "$.\nИспользуйте /garage внутри дома,\nЧтобы попасть в гараж.", client, 0, 60, 255)
											setElementMoney(client, -price, "Покупка авто")
											setElementMoney(secPlayer, price, "Продажа авто")
											booleva = true
										end
									end
									if(booleva == false) then
										addBox("Ошибка: Все слоты авто заняты!", client, 255, 0, 0)
									end
								end
							else
								addBox("Ошибка: У Вас недостаточно денег.", client, 255)
							end
						else
							addBox("Ошибка: У продавца изменилась машина.", client, 255)
						end
					else
						addBox("Ошибка: Продавец уже не в сети.", client, 255)
					end
				else
					addBox("Ошибка: Продавец не найден.", client, 255)
				end
			else
				addBox("Ошибка: У Вас нет дома.", client, 255)
			end
		end
		removeElementData(client, "SellerCar")
		removeElementData(client, "SellCarPrice")
		removeElementData(client, "SellCarInfo")
		removeElementData(client, "Sellplayercar")
	elseif(dialogid == 98) then
		if(response == true) then
			if(inputtext ~= nil) then
				if(toch(inputtext) ~= nil) then
					inputtext = toch(inputtext)
					inputtext = math.floor(inputtext)
					if(inputtext > 0) then
						if(getElementData(client, "SellCarPlayer") ~= false) then
							local secPlayer = getElementData(client, "SellCarPlayer")
							if(isElement(secPlayer) == true) then
								local house = getElementData(client, "House")
								if(house > 0) then
									local car = HouseTable[house]["Car1"]
									if(car > 0) then
										local sechouse = getElementData(secPlayer, "House")
										if(house > 0) then
											local slot = getElementData(client, "Sellplayercar")
											local car = HouseTable[sechouse]["Car" .. slot]
											if(getElementData(secPlayer, "Money") >= inputtext) then
												SED(secPlayer, "SellerCar", client)
												SED(secPlayer, "SellCarPrice", inputtext)
												SED(secPlayer, "SellCarInfo", HouseTable[house]["Car" .. slot])
												SED(secPlayer, "Sellplayercar", slot)
												addBox("Вы предложили " .. getElementData(secPlayer, "Name") .. " [" .. getElementData(secPlayer, "ID") .. "]\nПриобрести авто " .. HouseTable[house]["Car" .. slot] .. " id за " .. inputtext .. "$.", client, 0, 255, 60)
												showPlayerDialog(secPlayer, 97, 1, "Покупка авто у " .. getElementData(client, "Name"), "Вам поступило предложение купить автомобиль.\nМодель авто: " .. HouseTable[house]["Car" .. slot] .. " id.\nСтоимость: " .. inputtext .. "$.\nХотите принять данное предложение?", "Да", "Нет")
											else
												addBox("Ошибка: У игрока\nНедостаточно денег, чтобы\nСовершить данную покупку", client, 255, 0, 0)
											end
										else
											addBox("Ошибка: У игрока нет дома.", client, 255, 0, 0)
										end
									else
										addBox("Ошибка: У Вас нет дома.", client, 255, 0, 0)
									end
								else
									addBox("Ошибка: У Вас нет дома.", client, 255, 0, 0)
								end
							else
								addBox("Ошибка: Данный игрок вышел из сети.", client, 255, 0, 0)
							end
						else
							addBox("Ошибка: Данный игрок вышел из сети.", client, 255, 0, 0)
						end
					else
						addBox("Ошибка: Сумма введена некорректно.", client, 255, 0, 0)
					end
				else
					addBox("Ошибка: Сумма введена некорректно.", client, 255, 0, 0)
				end
			else
			end
		end
		removeElementData(client, "SellCarPlayer", player)
	elseif(dialogid == 99) then
		if(response == true) then
			if(inputtext ~= nil) then
				if(toch(inputtext) ~= nil) then
					inputtext = toch(inputtext)
					inputtext = math.floor(inputtext)
					if(IDS[inputtext] ~= nil) then
						local player = IDS[inputtext]
						if(isElement(player)) then
							if(getElementData(player, "Login") == true) then
								local house = toch(getElementData(client, "House"))
								if(house > 0) then
									local car = HouseTable[house]["Car1"]
									if(car ~= 0) then
										local chouse = toch(getElementData(player, "House"))
										if(chouse > 0) then
											local idf = getElementData(client, "Sellplayercar")
											local car = HouseTable[house]["Car" .. idf]
											if(car > 0) then
												SED(client, "SellCarPlayer", player)
												showPlayerDialog(client, 98, 2, "Цена продажи автомобиля", "Вам необходимо ввести сумму\nПродажи авто.\n \nПримечание: стоимость продажи не может\nБыть больше стоимости автомобиля\nВ 1.2 раза.", "Продолжить", "Отмена")
											else
												addBox("Ошибка: У Вас нет машины.", client, 255, 0, 0)
											end
										else
											addBox("Ошибка: У данного игрока\nУже есть машина.", client, 255, 0, 0)
										end
									else
										addBox("Ошибка: У Вас нет машины.", client, 255, 0, 0)
									end
								else
									addBox("Ошибка: У Вас нет дома.", client, 255, 0, 0)
								end
							else
								addBox("Ошибка: Данный игрок не авторизован.", client, 255, 0, 0)
							end
						else
							addBox("Ошибка: Данный игрок не на сервере.", client, 255, 0, 0)
						end
					else
						addBox("Ошибка: Данный игрок не на сервере.", client, 255, 0, 0)
					end
				else
					addBox("Ошибка: ID введен некорректно.", client, 255, 0, 0)
				end
			else
				addBox("Ошибка: Вы не ввели ID.", client, 255, 0, 0)
			end
		end
	elseif(dialogid == 100) then
		if(response == true) then
			if(getElementData(client, "Money") >= 50) then
				local id = toch(getElementData(client, "ID"))
				if(rentVehTable[id] == nil) then
					rentTimer[id] = setTimer(checkRent, 5 * 60 * 1000, 1, client)
					local rand = math.random(1, 5)
					rentVehTable[id] = createVeh(481, randRentPos[1][rand]["x"], randRentPos[1][rand]["y"], randRentPos[1][rand]["z"], 0, 0, 90)
					if(GPST[id] ~= nil) then
						removeEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
						destroyElement(GPST[id]["Pickup"])
						destroyElement(GPST[id]["Blip"])
						GPST[id] = nil
					end
					local id = toch(getElementData(client, "ID"))
					GPST[id] = {}
					GPST[id]["Pickup"] = createMarker(randRentPos[1][rand]["x"], randRentPos[1][rand]["y"], randRentPos[1][rand]["z"], "checkpoint", 4, 220, 0, 0, 220, client)
					GPST[id]["Blip"] = createBlip(randRentPos[1][rand]["x"], randRentPos[1][rand]["y"], randRentPos[1][rand]["z"], 0, 2, 220, 0, 0, 220, 0, 64000, client)
					SED(GPST[id]["Pickup"], "Player", client)
					addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
					setElementMoney(client, -50)
					addBox("Вы успешно арендовали велосипед.", client, 0, 60, 255)
					SED(rentVehTable[id], "RentVel", true)
				else
					if(isTimer(rentTimer[id])) then
						killTimer(rentTimer[id])
					end
					rentTimer[id] = setTimer(checkRent, 5 * 60 * 1000, 1, client)
					addBox("Ранее арендованный транспорт припаркован.", client, 255, 255, 0)
					customDestroyVehicle(rentVehTable[id])
					local rand = math.random(1, 5)
					rentVehTable[id] = createVeh(481, randRentPos[1][rand]["x"], randRentPos[1][rand]["y"], randRentPos[1][rand]["z"], 0, 0, 90)
					if(GPST[id] ~= nil) then
						removeEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
						destroyElement(GPST[id]["Pickup"])
						destroyElement(GPST[id]["Blip"])
						GPST[id] = nil
					end
					local id = toch(getElementData(client, "ID"))
					GPST[id] = {}
					GPST[id]["Pickup"] = createMarker(randRentPos[1][rand]["x"], randRentPos[1][rand]["y"], randRentPos[1][rand]["z"], "checkpoint", 4, 220, 0, 0, 220, client)
					GPST[id]["Blip"] = createBlip(randRentPos[1][rand]["x"], randRentPos[1][rand]["y"], randRentPos[1][rand]["z"], 0, 2, 220, 0, 0, 220, 0, 64000, client)
					SED(GPST[id]["Pickup"], "Player", client)
					addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
					setElementMoney(client, -50)
					SED(rentVehTable[id], "RentVel", true)
				end
				setTimer(function ( err )
					if(isElement(err)) then
						addBox("Арендовать велосипед или транспорт можно\nВ /gps - Ближайшая аренда авто", err, 255, 255, 0)
					end
				end, 10 * 1000, 1, client)
			else
				addBox("Ошибка: У Вас недостаточно денег.", client, 255, 0, 0)
			end
		end
	elseif(dialogid == 101) then
		if(response == true) then
			if(getElementData(client, "Money") >= 50) then
				local id = toch(getElementData(client, "ID"))
				if(rentVehTable[id] == nil) then
					rentTimer[id] = setTimer(checkRent, 5 * 60 * 1000, 1, client)
					local rand = math.random(1, 4)
					rentVehTable[id] = createVeh(481, randRentPos[2][rand]["x"], randRentPos[2][rand]["y"], randRentPos[2][rand]["z"], 0, 0, 90)
					if(GPST[id] ~= nil) then
						removeEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
						destroyElement(GPST[id]["Pickup"])
						destroyElement(GPST[id]["Blip"])
						GPST[id] = nil
					end
					local id = toch(getElementData(client, "ID"))
					GPST[id] = {}
					GPST[id]["Pickup"] = createMarker(randRentPos[2][rand]["x"], randRentPos[2][rand]["y"], randRentPos[2][rand]["z"], "checkpoint", 4, 220, 0, 0, 220, client)
					GPST[id]["Blip"] = createBlip(randRentPos[2][rand]["x"], randRentPos[2][rand]["y"], randRentPos[2][rand]["z"], 0, 2, 220, 0, 0, 220, 0, 64000, client)
					SED(GPST[id]["Pickup"], "Player", client)
					addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
					setElementMoney(client, -50)
					addBox("Вы успешно арендовали велосипед.", client, 0, 60, 255)
					SED(rentVehTable[id], "RentVel", true)
				else
					if(isTimer(rentTimer[id])) then
						killTimer(rentTimer[id])
					end
					rentTimer[id] = setTimer(checkRent, 5 * 60 * 1000, 1, client)
					addBox("Ранее арендованный транспорт припаркован.", client, 255, 255, 0)
					local rand = math.random(1, 4)
					customDestroyVehicle(rentVehTable[id])
					rentVehTable[id] = createVeh(481, randRentPos[2][rand]["x"], randRentPos[2][rand]["y"], randRentPos[2][rand]["z"], 0, 0, 90)
					if(GPST[id] ~= nil) then
						removeEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
						destroyElement(GPST[id]["Pickup"])
						destroyElement(GPST[id]["Blip"])
						GPST[id] = nil
					end
					local id = toch(getElementData(client, "ID"))
					GPST[id] = {}
					GPST[id]["Pickup"] = createMarker(randRentPos[2][rand]["x"], randRentPos[2][rand]["y"], randRentPos[2][rand]["z"], "checkpoint", 4, 220, 0, 0, 220, client)
					GPST[id]["Blip"] = createBlip(randRentPos[2][rand]["x"], randRentPos[2][rand]["y"], randRentPos[2][rand]["z"], 0, 2, 220, 0, 0, 220, 0, 64000, client)
					SED(GPST[id]["Pickup"], "Player", client)
					addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
					setElementMoney(client, -50)
					SED(rentVehTable[id], "RentVel", true)
				end
			else
				addBox("Ошибка: У Вас недостаточно денег.", client, 255, 0, 0)
			end
		end
	elseif(dialogid == 102) then
		if(response == true) then
			if(getElementData(client, "Faction") == 9) then
				if(listitem == 0) then
					if(Server["ArmyGruz"] >= 25) then
						addBox("Вы успешно съели сухпаек.", client, 0, 255, 60)
						Server["ArmyGruz"] = Server["ArmyGruz"] - 25
						dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = ?", Server["ArmyGruz"], "ArmyGruz")
						local food = toch(getElementData(client, "Food"))
						if(food + 50 > 100) then
							SED(client, "Food", 100)
						else
							SED(client, "Food", food + 50)
						end
						UpdateFood(client)
					else
						addBox("На складе закончились материалы.", client, 255, 0, 0)
					end
				elseif(listitem == 1) then
					if(Server["ArmyGruz"] >= 15) then
						addBox("Вы успешно съели\nСэндвич с ветчиной.", client, 0, 255, 60)
						Server["ArmyGruz"] = Server["ArmyGruz"] - 15
						dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = ?", Server["ArmyGruz"], "ArmyGruz")
						local food = toch(getElementData(client, "Food"))
						if(food + 25 > 100) then
							SED(client, "Food", 100)
						else
							SED(client, "Food", food + 25)
						end
						UpdateFood(client)
					else
						addBox("На складе закончились материалы.", client, 255, 0, 0)
					end
				elseif(listitem == 2) then
					if(Server["ArmyGruz"] >= 50) then
						addBox("Вы успешно съели\nКомплексный обед.", client, 0, 255, 60)
						Server["ArmyGruz"] = Server["ArmyGruz"] - 50
						dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = ?", Server["ArmyGruz"], "ArmyGruz")
						local food = toch(getElementData(client, "Food"))
						if(food + 50 > 100) then
							SED(client, "Food", 100)
						else
							SED(client, "Food", food + 50)
						end
						UpdateFood(client)
					else
						addBox("На складе закончились материалы.", client, 255, 0, 0)
					end
				elseif(listitem == 3) then
					if(Server["ArmyGruz"] >= 15) then
						addBox("Вы успешно выпили лимонад", client, 0, 255, 60)
						Server["ArmyGruz"] = Server["ArmyGruz"] - 15
						dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = ?", Server["ArmyGruz"], "ArmyGruz")
						local food = toch(getElementData(client, "Food"))
						if(food + 25 > 100) then
							SED(client, "Food", 100)
						else
							SED(client, "Food", food + 25)
						end
						UpdateFood(client)
					else
						addBox("На складе закончились материалы.", client, 255, 0, 0)
					end
				elseif(listitem == 4) then
					if(Server["ArmyGruz"] >= 15) then
						addBox("Вы успешно выпили кофе.", client, 0, 255, 60)
						Server["ArmyGruz"] = Server["ArmyGruz"] - 15
						dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = ?", Server["ArmyGruz"], "ArmyGruz")
						local food = toch(getElementData(client, "Food"))
						if(food + 25 > 100) then
							SED(client, "Food", 100)
						else
							SED(client, "Food", food + 25)
						end
						UpdateFood(client)
					else
						addBox("На складе закончились материалы.", client, 255, 0, 0)
					end
				elseif(listitem == 5) then
					if(Server["ArmyGruz"] >= 15) then
						addBox("Вы успешно выпили чай.", client, 0, 255, 60)
						Server["ArmyGruz"] = Server["ArmyGruz"] - 15
						dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = ?", Server["ArmyGruz"], "ArmyGruz")
						local food = toch(getElementData(client, "Food"))
						if(food + 25 > 100) then
							SED(client, "Food", 100)
						else
							SED(client, "Food", food + 25)
						end
						UpdateFood(client)
					else
						addBox("На складе закончились материалы.", client, 255, 0, 0)
					end
				end
			else
				addBox("Произошла ошибка.", client, 255, 0, 0)
			end
		end
	elseif(dialogid == 103) then
		if(response == true) then
			local id = toch(getElementData(client, "BusinessID"))
			SEP(client, 371.78125, -130.24609375, 1001.4927978516)
			setElementRotation(client, 0, 0, 0)
			SED(client, "BusinessID", id)
			SET(client, 5)
			SIDP(client, id)
		end
	elseif(dialogid == 104) then
		if(response == true) then
			if(listitem == 0) then
				if(Server["PoliceGruz"] >= 7) then
					Server["PoliceGruz"] = Server["PoliceGruz"] - 7
					dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = ?", Server["PoliceGruz"], "PoliceGruz")
					addBox("Вы взяли дубинку\nС полицейского склада.", client, 0, 255, 60)
					giveWeapon(client, 3)
				else
					addBox("На складе недостаточно материалов\nЧтобы взять данный предмет.", client, 255, 0, 0)
				end
			elseif(listitem == 1) then
				if(Server["PoliceGruz"] >= 21) then
					if(getElementData(client, "Rank") > 1) then
						Server["PoliceGruz"] = Server["PoliceGruz"] - 21
						dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = ?", Server["PoliceGruz"], "PoliceGruz")
						addBox("Вы взяли Desert Eagle\nС полицейского склада.", client, 0, 255, 60)
						giveWeapon(client, 24, 48)
					else
						addBox("Desert Eagle можно забрать\nТолько со 2 ранга.", client, 255, 0, 0)
					end
				else
					addBox("На складе недостаточно материалов\nЧтобы взять данный предмет.", client, 255, 0, 0)
				end
			elseif(listitem == 2) then
				if(Server["PoliceGruz"] >= 21) then
					if(getElementData(client, "Rank") >= 4) then
						Server["PoliceGruz"] = Server["PoliceGruz"] - 21
						dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = ?", Server["PoliceGruz"], "PoliceGruz")
						addBox("Вы взяли M4\nС полицейского склада.", client, 0, 255, 60)
						giveWeapon(client, 31, 150)
					else
						addBox("M4A1 можно забрать\nТолько с 4 ранга.", client, 255, 0, 0)
					end
				else
					addBox("На складе недостаточно материалов\nЧтобы взять данный предмет.", client, 255, 0, 0)
				end
			elseif(listitem == 3) then
				if(Server["PoliceGruz"] >= 21) then
					if(getElementData(client, "Rank") >= 3) then
						Server["PoliceGruz"] = Server["PoliceGruz"] - 21
						dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = ?", Server["PoliceGruz"], "PoliceGruz")
						addBox("Вы взяли Shotgun\nС полицейского склада.", client, 0, 255, 60)
						giveWeapon(client, 25, 20)
					else
						addBox("Shotgun можно забрать\nТолько с 3 ранга.", client, 255, 0, 0)
					end
				else
					addBox("На складе недостаточно материалов\nЧтобы взять данный предмет.", client, 255, 0, 0)
				end
			elseif(listitem == 4) then
				if(Server["PoliceGruz"] >= 21) then
					if(getPedArmor(client) ~= 100) then
						Server["PoliceGruz"] = Server["PoliceGruz"] - 21
						dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = ?", Server["PoliceGruz"], "PoliceGruz")
						addBox("Вы взяли бронежилет\nС полицейского склада.", client, 0, 255, 60)
						setPedArmor(client, 100)
					else
						addBox("На Вас уже надет бронежилет.", client, 255, 0, 0)
					end
				else
					addBox("На складе недостаточно материалов\nЧтобы взять данный предмет.", client, 255, 0, 0)
				end
			elseif(listitem == 5) then
				if(Server["PoliceGruz"] >= 21) then
					if(getElementHealth(client) ~= 100) then
						if(getElementData(client, "Aptechka") == false) then
							SED(client, "Aptechka", 1)
						else
							if(getElementData(client, "Aptechka") <= 5) then
								SED(client, "Aptechka", getElementData(client, "Aptechka") + 1)
							else
								addBox("Ошибка: Вы не можете взять\nБольше 6 аптечек.", client, 255, 0, 0)
							end
						end
						addBox("Вы взяли аптечку со склада.\nЧтобы воспользоваться ей, введите\n/healme.\nВ инвентаре: " .. getElementData(client, "Aptechka") .. " шт.", client, 0, 255, 60)
					else
						addBox("У Вас уже полное здоровье.", client, 255, 0, 0)
					end
				else
					addBox("На складе недостаточно материалов\nЧтобы взять данный предмет.", client, 255, 0, 0)
				end
			elseif(listitem == 6) then
				if(Server["PoliceGruz"] >= 21) then
					Server["PoliceGruz"] = Server["PoliceGruz"] - 21
					dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = ?", Server["PoliceGruz"], "PoliceGruz")
					addBox("Вы взяли тазер.\nЧтобы им воспользоваться, используйте\n/tazer", client, 0, 255, 60)
					SED(client, "Tazer", 5)
					removeElementData(client, "TogTazer")
					takeWeapon(client, 23)
				else
					addBox("На складе недостаточно материалов\nЧтобы взять данный предмет.", client, 255, 0, 0)
				end
			end
		end
	elseif(dialogid == 105) then
		if(response == true) then
			local veh = getPedOccupiedVehicle(client)
			if(veh ~= false) then
				local price = getElementData(client, "rentPrice")
				if(getElementData(client, "Money") >= price) then
					SED(veh, "rentPlayer", client)
					SED(client, "rentVehicle", veh)
					addBox("Вы успешно арендовали данный транспорт.\nЕсли Вы покинете авто на 5 мин.\nТранспорт будет припаркован обратно\nНа стоянку.", client, 0, 255, 60)
					setElementMoney(client, -price, "Аренда авто")
					toggleControl ( client, "accelerate", true ) 
					toggleControl ( client, "brake_reverse", true )
					toggleControl ( client, "handbrake", true )
					SED(client, "ToggleVeh", true)
				else
					addBox("У Вас недостаточно денег,\nЧтобы совершить аренду.", client, 255, 0, 0)
					setControlState(client, "enter_exit", true)
				end
			else
				addBox("Вы не находитесь в авто.", client, 255, 0, 0)
			end
		else
			addBox("Вы отказались от аренды авто!", client, 255, 0, 0)
			setControlState(client, "enter_exit", true)
		end
		removeElementData(client, "rentPrice")
	elseif(dialogid == 106) then
		if(response == true) then
			local biz = toch(getElementData(client, "bizselleb"))
			local price = toch(getElementData(client, "bizsellpriceeb"))
			local fact = toch(getElementData(client, "bizsellfacteb"))
			if(price > 0) then
				if(biz > 0) then
					if(BusinessTable[biz] ~= nil) then
						if(BusinessTable[biz]["Roof"] == fact) then
							if(getElementData(client, "Faction") >= 1 and getElementData(client, "Faction") <= 4) then
								addBox("Ваша мафия успешно приобрела\nКрышу над бизнесом #" .. biz .. ".", client, 0, 255, 60)
								local str = FactionName[getElementData(client, "Faction")][1] .. " приобрела крышу на бизнес №" .. biz .. "\nУ Вашей мафии за " .. price .. "$."
								for i,n in (IDS) do
									if(getElementData(n, "Faction") == fact) then
										addBox(str, n, 255, 0, 0)
									end
								end
								BusinessTable[biz]["Roof"] = getElementData(client, "Faction")
								dbExec(mysql, "UPDATE `Business` SET `Roof` = ? WHERE `ID` = ?", getElementData(client, "Faction"), biz)
							else
								addBox("Вы не состоите в мафии.", client, 255, 0, 0)
							end
						else
							addBox("Произошла ошибка.", client, 255, 0, 0)
						end
					else
						addBox("Произошла ошибка.", client, 255, 0, 0)
					end
				else
					addBox("Произошла ошибка.", client, 255, 0, 0)
				end
			else
				addBox("Произошла ошибка.", client, 255, 0, 0)
			end
		end
		removeElementData(client, "bizselleb")
		removeElementData(client, "bizsellpriceeb")
		removeElementData(client, "bizsellfacteb")
	elseif(dialogid == 107) then
		showPlayerDialog(client, 108, 1, "Ознакомительное задание", "Хотите ли Вы пройти первое ознакомительное задание?", "Да", "Нет")
	elseif(dialogid == 108) then
		if(response == true) then
			local id = getElementData(client, "ID")
			local max = 5000
			local x, y, z = getElementPosition(client)
			local x2, y2, z2 = 0, 0, 0
			for i=10,24 do
				if(i ~= 19) then
					local x1, y1, z1 = BusinessTable[i]["x"], BusinessTable[i]["y"], BusinessTable[i]["z"]
					local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
					if(dist < max) then
						max = dist
						x2, y2, z2 = x1, y1, z1
					end
				end
			end
			GPST[id] = {}
			GPST[id]["Pickup"] = createMarker(x2, y2, z2, "checkpoint", 4, 220, 0, 0, 220, client)
			GPST[id]["Blip"] = createBlip(x2, y2, z2, 0, 2, 220, 0, 0, 220, 0, 64000, client)
			SED(GPST[id]["Pickup"], "Player", client)
			addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
			addBox("Подсказка: Ближайший 24/7 отмечен на GPS.", client, 0, 60, 255)
			dbExec(mysql, "UPDATE `Accounts` SET `Quest` = '1' WHERE `Name` = ?", getElementData(client, "Name"))
			SED(client, "Quest", 1)
			updatePlayerAccount(client, "Quest", 1)
			addBox("Найдено другое письмо в сумке:\n \nС тобой хочет связаться один человек,\nКогда ты приедешь на место.\nТебе необходимо купить телефон.\nОн сам найдет тебя.\n \nОт: Мистер СЖ.", client, 220, 0, 220)
		else
			dbExec(mysql, "UPDATE `Accounts` SET `Quest` = '-1' WHERE `Name` = ?", getElementData(client, "Name"))
			SED(client, "Quest", -1)
			updatePlayerAccount(client, "Quest", -1)
		end
	elseif(dialogid == 109) then
		if(response == true) then
			local id = getElementData(client, "ID")
			destroyElement(PhoneObject[id])
			PhoneObject[id] = nil
			removeElementData(client, "AcceptedCall")
			showPlayerDialog(client, 110, 3, "Выбрать работу", "Работа\nФотограф\nГрузчик в порту\nСтроитель", "Выбор", "Отмена")
		end
	elseif(dialogid == 110) then
		local id = getElementData(client, "ID")
		if(GPST[id] ~= nil) then
			if(GPST[id]["Pickup"] ~= nil) then
				if(getElementType(GPST[id]["Pickup"]) == "marker") then
					removeEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
					destroyElement(GPST[id]["Pickup"])
					destroyElement(GPST[id]["Blip"])
					GPST[id] = nil
				end
			end
		end
		if(listitem == 0) then
			GPST[id] = {}
			GPST[id]["Pickup"] = createMarker(102.4287109375, 250.060546875, 21.763206481934, "checkpoint", 4, 220, 0, 0, 220, client)
			GPST[id]["Blip"]= createBlip(102.4287109375, 250.060546875, 21.763206481934, 0, 2, 220, 0, 0, 220, 0, 64000, client)
			addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
			SED(GPST[id]["Pickup"], "Player", client)
		elseif(listitem == 1) then
			GPST[id] = {}
			GPST[id]["Pickup"] = createMarker(-723.572265625, -1281.6787109375, 10.866188049316, "checkpoint", 4, 220, 0, 0, 220, client)
			GPST[id]["Blip"] = createBlip(-723.572265625, -1281.6787109375, 10.866188049316, 0, 2, 220, 0, 0, 220, 0, 64000, client)
			addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
			SED(GPST[id]["Pickup"], "Player", client)
		elseif(listitem == 2) then
			GPST[id] = {}
			GPST[id]["Pickup"] = createMarker(259.6513671875, -233.5263671875, 11.049679756165, "checkpoint", 4, 220, 0, 0, 220, client)
			GPST[id]["Blip"] = createBlip(259.6513671875, -233.5263671875, 11.049679756165, 0, 2, 220, 0, 0, 220, 0, 64000, client)
			addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
			SED(GPST[id]["Pickup"], "Player", client)
		end
		setPedAnimation(client, "BSKTBALL", "BBALL_idle_O", 1, false)
	elseif(dialogid == 111) then
		if(response == true) then
			local id = getElementData(client, "ID")
			if(GPST[id] ~= nil) then
				if(GPST[id]["Pickup"] ~= nil) then
					if(getElementType(GPST[id]["Pickup"]) == "marker") then
						removeEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
						destroyElement(GPST[id]["Pickup"])
						destroyElement(GPST[id]["Blip"])
						GPST[id] = nil
					end
				end
			end
			GPST[id] = {}
			GPST[id]["Pickup"] = createMarker(103.6953125, -813.650390625, 10.426418304443, "checkpoint", 4, 220, 0, 0, 220, client)
			GPST[id]["Blip"] = createBlip(103.6953125, -813.650390625, 10.426418304443, 0, 2, 220, 0, 0, 220, 0, 64000, client)
			addBox("Подсказка: На GPS навигаторе установлен\nМаячок, к которому необходимо направиться.", client, 0, 60, 255)
			SED(GPST[id]["Pickup"], "Player", client)
			addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
		end
		local id = getElementData(client, "ID")
		destroyElement(PhoneObject[id])
		PhoneObject[id] = nil
		setPedAnimation(client, "BSKTBALL", "BBALL_idle_O", 1, false)
		removeElementData(client, "AcceptedCall")
	elseif(dialogid == 113) then
		setPedAnimation(client, "BSKTBALL", "BBALL_idle_O", 1, false)
		local id = getElementData(client, "ID")
		destroyElement(PhoneObject[id])
		PhoneObject[id] = nil
		removeElementData(client, "AcceptedCall")
	elseif(dialogid == 114) then
		if(response == true) then
			if(inputtext ~= nil) then
				if(toch(inputtext) ~= nil) then
					inputtext = toch(inputtext)
					if(inputtext >= 100000 and inputtext <= 999999) then
						local money = toch(getElementData(client, "Money"))
						if(money >= 400) then
							if(getElementData(client, "PhoneNumber") ~= 0) then
								local biz = toch(getElementData(client, "BusinessID"))
								if(biz ~= nil) then
									if(biz >= 10) then
										if(BusinessTable[biz]["Products"] >= 120) then
											local query = dbQuery(mysql, "SELECT COUNT(*) FROM `Accounts` WHERE `PhoneNumber` = ?", inputtext)
											local result = dbPoll(query, -1)
											if(result[1]["COUNT(*)"] == 0) then
												if(BusinessTable[biz]["Owner"] > 0) then
													setBusinessMoney(biz, 400)
													BusinessTable[biz]["Products"] = BusinessTable[biz]["Products"] - 120
													dbExec(mysql, "UPDATE `Business` SET `Products` = ? WHERE `ID` = ?", BusinessTable[biz]["Products"], biz)
												end
												local oldnumber = getElementData(client, "PhoneNumber")
												local newnumber = inputtext
												PhoneNumbers[oldnumber] = nil
												PhoneNumbers[newnumber] = client
												updatePlayerAccount(client, "PhoneNumber", newnumber)
												addBox("Вы успешно приобрели\nНомер " .. newnumber .. " за 400$.", client, 0, 60, 255)
												SED(client, "PhoneNumber", newnumber)
												setElementMoney(client, -400, "покупка симки")
											else
												addBox("Данный номер телефона уже занят.", client, 255, 0, 0)
											end
										else
											addBox("В магазине недостаточно продуктов.", client, 255, 0, 0)
										end
									end
								else
									addBox("Произошла ошибка.", client, 255, 0, 0)
								end
							else
								addBox("Сначала приобретите телефон.", client, 255, 0, 0)
							end
						else
							addBox("У вас недостаточно денег для покупки.", client, 255, 0, 0)
						end
					else
						addBox("Число введено некорректно.", client, 255, 0, 0)
					end
				else
					addBox("Число введено некорректно.", client, 255, 0, 0)
				end
			else
				addBox("Число введено некорректно.", client, 255, 0, 0)
			end
		end
	elseif(dialogid == 115) then
		if(response == true) then
			if(getElementData(client, "Money") >= 50) then
				local id = toch(getElementData(client, "ID"))
				if(rentVehTable[id] == nil) then
					rentTimer[id] = setTimer(checkRent, 5 * 60 * 1000, 1, client)
					local rand = math.random(1, 9)
					rentVehTable[id] = createVeh(481, randRentPos[3][rand]["x"], randRentPos[3][rand]["y"], randRentPos[3][rand]["z"], 0, 0, 90)
					if(GPST[id] ~= nil) then
						removeEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
						destroyElement(GPST[id]["Pickup"])
						destroyElement(GPST[id]["Blip"])
						GPST[id] = nil
					end
					local id = toch(getElementData(client, "ID"))
					GPST[id] = {}
					GPST[id]["Pickup"] = createMarker(randRentPos[3][rand]["x"], randRentPos[3][rand]["y"], randRentPos[3][rand]["z"], "checkpoint", 4, 220, 0, 0, 220, client)
					GPST[id]["Blip"] = createBlip(randRentPos[3][rand]["x"], randRentPos[3][rand]["y"], randRentPos[3][rand]["z"], 0, 2, 220, 0, 0, 220, 0, 64000, client)
					addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
					setElementMoney(client, -50)
					SED(GPST[id]["Pickup"], "Player", client)
					addBox("Вы успешно арендовали велосипед.", client, 0, 60, 255)
					SED(rentVehTable[id], "RentVel", true)
				else
					if(isTimer(rentTimer[id])) then
						killTimer(rentTimer[id])
					end
					rentTimer[id] = setTimer(checkRent, 5 * 60 * 1000, 1, client)
					addBox("Ранее арендованный транспорт припаркован.", client, 255, 255, 0)
					customDestroyVehicle(rentVehTable[id])
					local rand = math.random(1, 9)
					rentVehTable[id] = createVeh(481, randRentPos[3][rand]["x"], randRentPos[3][rand]["y"], randRentPos[3][rand]["z"], 0, 0, 90)
					if(GPST[id] ~= nil) then
						removeEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
						destroyElement(GPST[id]["Pickup"])
						destroyElement(GPST[id]["Blip"])
						GPST[id] = nil
					end
					local id = toch(getElementData(client, "ID"))
					GPST[id] = {}
					GPST[id]["Pickup"] = createMarker(randRentPos[3][rand]["x"], randRentPos[3][rand]["y"], randRentPos[3][rand]["z"], "checkpoint", 4, 220, 0, 0, 220, client)
					GPST[id]["Blip"] = createBlip(randRentPos[3][rand]["x"], randRentPos[3][rand]["y"], randRentPos[3][rand]["z"], 0, 2, 220, 0, 0, 220, 0, 64000, client)
					addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
					SED(GPST[id]["Pickup"], "Player", client)
					setElementMoney(client, -50)
					SED(rentVehTable[id], "RentVel", true)
				end
				setTimer(function ( err )
					if(isElement(err)) then
						addBox("Арендовать велосипед или транспорт можно\nВ /gps - Ближайшая аренда авто", err, 255, 255, 0)
					end
				end, 10 * 1000, 1, client)
			else
				addBox("Ошибка: У Вас недостаточно денег.", client, 255, 0, 0)
			end
		end
	elseif(dialogid == 116) then
		if(response == true) then
			if(getElementData(client, "Money") >= 50) then
				local id = toch(getElementData(client, "ID"))
				if(rentVehTable[id] == nil) then
					rentTimer[id] = setTimer(checkRent, 5 * 60 * 1000, 1, client)
					local rand = math.random(1, 5)
					rentVehTable[id] = createVeh(481, randRentPos[4][rand]["x"], randRentPos[4][rand]["y"], randRentPos[4][rand]["z"], 0, 0, 90)
					if(GPST[id] ~= nil) then
						removeEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
						destroyElement(GPST[id]["Pickup"])
						destroyElement(GPST[id]["Blip"])
						GPST[id] = nil
					end
					local id = toch(getElementData(client, "ID"))
					GPST[id] = {}
					GPST[id]["Pickup"] = createMarker(randRentPos[4][rand]["x"], randRentPos[4][rand]["y"], randRentPos[4][rand]["z"], "checkpoint", 4, 220, 0, 0, 220, client)
					GPST[id]["Blip"] = createBlip(randRentPos[4][rand]["x"], randRentPos[4][rand]["y"], randRentPos[4][rand]["z"], 0, 2, 220, 0, 0, 220, 0, 64000, client)
					addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
					setElementMoney(client, -50)
					addBox("Вы успешно арендовали велосипед.", client, 0, 60, 255)
					SED(GPST[id]["Pickup"], "Player", client)
					SED(rentVehTable[id], "RentVel", true)
				else
					if(isTimer(rentTimer[id])) then
						killTimer(rentTimer[id])
					end
					rentTimer[id] = setTimer(checkRent, 5 * 60 * 1000, 1, client)
					addBox("Ранее арендованный транспорт припаркован.", client, 255, 255, 0)
					customDestroyVehicle(rentVehTable[id])
					local rand = math.random(1, 5)
					rentVehTable[id] = createVeh(481, randRentPos[4][rand]["x"], randRentPos[4][rand]["y"], randRentPos[4][rand]["z"], 0, 0, 90)
					if(GPST[id] ~= nil) then
						removeEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
						destroyElement(GPST[id]["Pickup"])
						destroyElement(GPST[id]["Blip"])
						GPST[id] = nil
					end
					local id = toch(getElementData(client, "ID"))
					GPST[id] = {}
					GPST[id]["Pickup"] = createMarker(randRentPos[4][rand]["x"], randRentPos[4][rand]["y"], randRentPos[4][rand]["z"], "checkpoint", 4, 220, 0, 0, 220, client)
					GPST[id]["Blip"] = createBlip(randRentPos[4][rand]["x"], randRentPos[4][rand]["y"], randRentPos[4][rand]["z"], 0, 2, 220, 0, 0, 220, 0, 64000, client)
					SED(GPST[id]["Pickup"], "Player", client)
					addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
					setElementMoney(client, -50)
					SED(rentVehTable[id], "RentVel", true)
				end
				setTimer(function ( err )
					if(isElement(err)) then
						addBox("Арендовать велосипед или транспорт можно\nВ /gps - Ближайшая аренда авто", err, 255, 255, 0)
					end
				end, 10 * 1000, 1, client)
			else
				addBox("Ошибка: У Вас недостаточно денег.", client, 255, 0, 0)
			end
		end
	elseif(dialogid == 117) then
		SED(client, "AshUrok", true)
	elseif(dialogid == 118) then
		local price = getElementData(client, "TaxiPrice")
		local secPlayer = getElementData(client, "TaxiVod")
		if(isElement(secPlayer) == true) then
			if(response == true) then
				if(getElementData(client, "Money") >= price) then
					setElementMoney(client, -price, "Оплата такси")
					setElementMoney(secPlayer, price, "Получил такси")
					addBox(getElementData(client, "Name") .. " [" .. getElementData(client, "ID") .. "] принял\nВаш чек на " .. price .. "$.", secPlayer, 0, 60, 255)
					addBox("Вы успешно оплатили чек\n" .. getElementData(secPlayer, "Name") .. " [" .. getElementData(secPlayer, "ID") .. "] на " .. price .. "$.", client, 0, 60, 255)
					local id = getElementData(client, "ID")
					TaxiAbuseTimer[id] = setTimer(function ( neid )
						TaxiAbuseTimer[id] = nil
					end, 60 * 5 * 1000, 1, id)
				else
					setControlState(client, "enter_exit", true)
					addBox(getElementData(client, "Name") .. " [" .. getElementData(client, "ID") .. "] отказался\nОт оплаты Вашего чека в " .. price .. "$.", secPlayer, 255, 0, 0)
					addBox("Вы отказались от оплаты\nИ покинули автомобиль.\n(недостаточно денег на счету)", client, 255, 0, 0)
				end
			else
				setControlState(client, "enter_exit", true)
				addBox(getElementData(client, "Name") .. " [" .. getElementData(client, "ID") .. "] отказался\nОт оплаты Вашего чека в " .. price .. "$.", secPlayer, 255, 0, 0)
				addBox("Вы отказались от оплаты\nИ покинули автомобиль.", client, 255, 0, 0)
			end
		end
		removeElementData(client, "TaxiVod")
		removeElementData(client, "TaxiPrice")
	elseif(dialogid == 119) then
		if(response == true) then
			if(listitem > -1 and listitem < 4) then
				listitem = listitem + 1
				local house = getElementData(client, "House")
				local id = getElementData(client, "ID")
				if(HouseTable[house]["Car" .. listitem] >= 400) then
					if(PrivateCar[id] ~= nil) then
						if(isElement(PrivateCar[id])) then
							HouseTable[house]["Fuel" .. getElementData(PrivateCar[id], "Lists")] = getElementData(PrivateCar[id], "Fuel")
							customDestroyVehicle(PrivateCar[id])
							PrivateCar[id] = nil
						end
					end
					PrivateCar[id] = createVeh(HouseTable[house]["Car" .. listitem], -1280.5849609375, -695.056640625, 999.578125, 0, 0, 90)
					SET(PrivateCar[id], 8)
					SIDP(PrivateCar[id], getElementData(client, "House"))
					SED(PrivateCar[id], "PrivatePlayer", id)
					SED(PrivateCar[id], "Lists", listitem)
					SED(PrivateCar[id], "Fuel", HouseTable[house]["Fuel" .. listitem])
					if(HouseTable[house]["Color" .. listitem] == 0) then
						setVehicleColor(PrivateCar[id], 125, 125, 125, 125, 125, 125)
					elseif(HouseTable[house]["Color" .. listitem] == 1) then
						setVehicleColor(PrivateCar[id], 60, 60, 60, 60, 60, 60)
					elseif(HouseTable[house]["Color" .. listitem] == 2) then
						setVehicleColor(PrivateCar[id], 15, 15, 15, 15, 15, 15)
					elseif(HouseTable[house]["Color" .. listitem] == 3) then
						setVehicleColor(PrivateCar[id], 80, 0, 0, 80, 0, 0)
					elseif(HouseTable[house]["Color" .. listitem] == 4) then
						setVehicleColor(PrivateCar[id], 125, 125, 0, 125, 125, 0)
					elseif(HouseTable[house]["Color" .. listitem] == 5) then
						setVehicleColor(PrivateCar[id], 0, 30, 125, 0, 30, 125)
					end
				else
					addBox("Данное авто отсутствует.", client, 255, 0, 0)
				end
			else
				addBox("Произошла ошибка.", client, 255, 0, 0)
			end
		end
	elseif(dialogid == 120) then
		if(response == true) then
			if(listitem > -1 and listitem < 4) then
				listitem = listitem + 1
				local house = getElementData(client, "House")
				local veh = HouseTable[house]["Car" .. listitem]
				if(veh >= 400) then
					local price = 0
					for i, n in pairs(CarInfo) do
						if(CarInfo[i]["ID"] == veh) then
							price = CarInfo[i]["GosPrice"]
							break
						end
					end
					local stf = "Действительно ли Вы хотите продать своё т/с государству?\nВы получите половину от стоимости покупки.\nСумма, которую вы получите: " .. math.round(price / 2) .. "$." 
					showPlayerDialog(client, 29, 1, "Продажа домашнего транспорта", stf, "Продать", "Отмена")
					SED(client, "Sellvehprice", math.round(price / 2))
					SED(client, "Sellvehid", listitem)
				else
					addBox("В данном слоте нет авто.", client, 255, 0, 0)
				end
			end
		end
	elseif(dialogid == 121) then
		if(response == true) then
			if(listitem > -1 and listitem < 5) then
				listitem = listitem + 1
				if(listitem == 5) then
					SED(client, "CarBuySlot", listitem)
					triggerClientEvent(client, "onPlayerBuyCarMenu", client, CarInfo, toch(getElementData(client, "ID")), false)
					SIDP(client, toch(getElementData(client, "ID")))
				elseif(listitem == 1 or (listitem == 2 and getElementData(client, "VipType") >= 2) or (listitem == 3 and getElementData(client, "VipType") >= 3) or (getElementData(client, "VipType")) == 4) then
					local house = getElementData(client, "House")
					local veh = HouseTable[house]["Car" .. listitem]
					if(veh == 0) then
						SED(client, "CarBuySlot", listitem)
						triggerClientEvent(client, "onPlayerBuyCarMenu", client, CarInfo, toch(getElementData(client, "ID")))
						SIDP(client, toch(getElementData(client, "ID")))
					else
						addBox("В данном слоте авто занято.", client, 255, 0, 0)
					end
				else
					addBox("Чтобы воспользоваться доп. слотами,\nВы можете приобрести премиум.\nF1 - подписки.", client, 255, 0, 0)
				end
			end
		end
	elseif(dialogid == 122) then
		if(response == true) then
			if(listitem >= 0 and listitem <= 3) then
				local house = toch(getElementData(client, "House"))
				listitem = listitem + 1
				if(HouseTable[house]["Car" .. listitem] >= 400) then
					SED(client, "Sellplayercar", listitem)
					showPlayerDialog(client, 99, 2, "Продажа автомобиля", "Чтобы продать авто,\nНеобходимо ввести ID игрока.", "Продолжить", "Отмена")
				else
					addBox("Ошибка: У вас нет автомобиля.", client, 255, 0, 0)
				end
			end
		end
	elseif(dialogid == 123) then
		if(response == true) then
			if(listitem == 0) then
				local id = toch(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(-1236.2978515625, 7.923828125, 11.391411781311, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]	= createBlip(-1236.2978515625, 7.923828125, 11.391411781311, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
				SED(GPST[id]["Pickup"], "Player", client)
			elseif(listitem == 1) then
				local id = toch(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(-26.3671875, 964.310546875, 10.899536132813, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]	= createBlip(-26.3671875, 964.310546875, 10.899536132813, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
				SED(GPST[id]["Pickup"], "Player", client)
			elseif(listitem == 3) then
				local id = toch(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(817.0771484375, 782.5595703125, 17.963611602783, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]	= createBlip(817.0771484375, 782.5595703125, 17.963611602783, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
				SED(GPST[id]["Pickup"], "Player", client)
			end
		end
	elseif(dialogid == 124) then
		if(response == true) then
			if(getElementData(client, "Money") >= 50) then
				setElementMoney(client, -50, "Объявление")
				local adsf = "Текст: " .. getElementData(client, "TextInAd")
				addBox("Ваше объявления отправлено\nИ будет обработано в ближайшее время.", client, 255, 255, 0)
				local id = 0
				for i,n in pairs(AdvertTable) do
					if(id < i) then
						id = i
					end
				end
				id = id + 1
				local max = table.maxn(AdvertTable) + 1
				local str = "Подано заявление на публикацию объявления (id: " .. max .. ")"
				for i, p in pairs(IDS) do
					if(getElementData(p, "Login") == true ) then
						if(getElementData(p, "Faction") == 6) then
							sendClientMessage(str, p, 220, 220, 0)
							sendClientMessage(adsf, p, 220, 220, 0)
						end
					end
				end
				AdvertTable[max] = {}
				AdvertTable[max]["Name"] = getElementData(client, "Name")
				AdvertTable[max]["String"] = adsf
				AdvertTable[max]["Player"] = client
				AdvertTable[max]["Phone"] = getElementData(client, "PhoneNumber")
			else
				addBox("У Вас недостаточно денег.", client, 255, 0, 0)
			end
		end
		setTimer(function ( pl )
			if(isElement(pl)) then
				removeElementData(pl, "BlockAd")
			end
		end, 60 * 1000, 1, client)
		removeElementData(client, "TextInAd")
	elseif(dialogid == 125) then
		if(response == true) then
			if(listitem > -1) then
				local tablo = getElementData(client, "ptrt")
				listitem = listitem + 1
				local str = "Промокод " .. tablo[listitem]["Name"] .. "\nБыл "
				if(tablo[listitem]["Toggle"] == 0) then
					PromoTable[listitem]["Toggle"] = 1
					str = str .. "включен."
					dbExec(mysql, "UPDATE `pnames` SET `Toggle` = ? WHERE `Name` = ?", 1, tablo[listitem]["Name"])
				else
					PromoTable[listitem]["Toggle"] = 0
					str = str .. "выключен."
					dbExec(mysql, "UPDATE `pnames` SET `Toggle` = ? WHERE `Name` = ?", 0, tablo[listitem]["Name"])
				end
				addBox(str, client, 0, 60, 255)
			end
		end
	elseif(dialogid == 126) then
		if(response == true) then
			if(listitem > -1) then
				local veh = getPedOccupiedVehicle(client)
				if(veh ~= false) then
					if(getElementData(veh, "FactionCar") == false) then
						if(getElementData(client, "Money") >= 300) then
							if(getElementData(veh, "Lists") ~= false) then
								HouseTable[getElementData(client, "House")]["Color" .. getElementData(veh, "Lists")] = listitem
								dbExec(mysql, "UPDATE `house` SET `ColorID" .. getElementData(veh, "Lists") .. "` = ? WHERE `ID` = ?", listitem, getElementData(client, "House"))
								addBox("Теперь Ваше домашнее авто\nБудет появляться в новом цвете ;)", client, 0, 60, 255)
							end
							if(listitem == 0) then
								setVehicleColor(veh, 125, 125, 125, 125, 125, 125)
							elseif(listitem == 1) then
								setVehicleColor(veh, 60, 60, 60, 60, 60, 60)
							elseif(listitem == 2) then
								setVehicleColor(veh, 15, 15, 15, 15, 15, 15)
							elseif(listitem == 3) then
								setVehicleColor(veh, 80, 0, 0, 80, 0, 0)
							elseif(listitem == 4) then
								setVehicleColor(veh, 125, 125, 0, 125, 125, 0)
							elseif(listitem == 5) then
								setVehicleColor(veh, 0, 30, 125, 0, 30, 125)
							end
							setElementMoney(client, -300, "Покраска авто")
							addBox("Вы успешно перекрасили\nВаше транспортное средство", client, 0, 255, 60)
						else
							addBox("У Вас недостаточно денег\nЧтобы перекрасить авто.", client, 255, 0, 0)
						end
					end
				end
			end
		end
	elseif(dialogid == 127) then
		if(response == true) then
			addBox("Вы успешно устроились\nНа начальную работу фотографом!\nЕсли вы захотите закончить работу,\nНажмите кнопку \"2\"", client, 0, 60, 255)
			SED(client, "NWork", 8)
			showPlayerDialog(client, 129, 1, "Аренда рабочего транспорта.", "Ах да, авто...\nДействительно ли Вы хотите арендовать\nРабочее транспортное средство за 150$?", "Принять", "Нет")
			local tablo = 
			{
				[1] 	= 	{["x"]=525.9990234375, 	["y"]=-94.5361328125, 	["z"]=10.428325653076,	["i"]=1,	["Text"]="Сфотографируйте клуб Малибу\nС разных ракурсов"},
				[2] 	= 	{["x"]=-325.794921875, 	["y"]=-513.1298828125, 	["z"]=12.786610603333,	["i"]=2,	["Text"]="Сфотографируйте особняк с\nРазных ракурсов"},
				[3] 	= 	{["x"]=234.259765625, 	["y"]=-1410.2880859375, ["z"]=11.032325744629,	["i"]=3,	["Text"]="Сфотографируйте пляж и отели\nС разных ракурсов"},
				[4] 	= 	{["x"]=50.890625, 		["y"]=983.1435546875, 	["z"]=10.80312538147,	["i"]=4,	["Text"]="Сфотографируйте киностудию с\nРазных ракурсов"},
				[5] 	= 	{["x"]=-1432.90234375, 	["y"]=-775.939453125, 	["z"]=14.826874732971,	["i"]=5,	["Text"]="Сфотографируйте аэропорт с\nРазных ракурсов"},
				[6] 	= 	{["x"]=48.453125, 		["y"]=-890.810546875, 	["z"]=10.39194393158,	["i"]=6,	["Text"]="Сфотографируйте торговый центр\nС разных сторон"},
				[7] 	= 	{["x"]=-523.7509765625, ["y"]=1094.201171875, 	["z"]=11.027709960938,	["i"]=7,	["Text"]="Сфотографируйте небоскребы\nС разных ракурсов"},
				[8] 	= 	{["x"]=-708.8916015625, ["y"]=-1386.6484375, 	["z"]=11.133769989014,	["i"]=8,	["Text"]="Сфотографируйте корабль с\nРазных ракурсов"},
				[9] 	= 	{["x"]=-1004.5830078125,["y"]=-897.931640625, 	["z"]=12.849883079529,	["i"]=9,	["Text"]="Сфотографируйте автосалон с\nРазных сторон"},
				[10]	= 	{["x"]=-229.806640625, 	["y"]=-1350.439453125, 	["z"]=8.0708332061768,	["i"]=10,	["Text"]="Сфотографируйте пирс с разных\nСторон"},
				[11]	= 	{["x"]=244.0087890625, 	["y"]=-223.392578125, 	["z"]=11.027762413025,	["i"]=11,	["Text"]="Сфотографируйте стройку с разных\nСторон"},
				[12]	= 	{["x"]=428.4189453125, 	["y"]=1294.6259765625, 	["z"]=17.182239532471,	["i"]=12,	["Text"]="Сфотографируйте торговый центр\nС разных сторон"},
				[13]	= 	{["x"]=-986.4482421875, ["y"]=1352.349609375, 	["z"]=11.096260070801,	["i"]=13,	["Text"]="Сфотографируйте стадион с разных\nсторон"},
				[14]	= 	{["x"]=-876.89453125, 	["y"]=-640.45703125, 	["z"]=11.237854003906,	["i"]=14,	["Text"]="Сфотографируйте полицейский\nДепартамент с разных сторон"},
				[15]	= 	{["x"]=421.4453125, 	["y"]=-432.171875, 		["z"]=10.093095779419,	["i"]=15,	["Text"]="Сфотографируйте старый полицейский\nДепартамент с разных сторон"},
				[16]	= 	{["x"]=-577.998046875, 	["y"]=-380.791015625, 	["z"]=11.218984603882,	["i"]=16,	["Text"]="Сфотографируйте элитные дома\nС разных сторон"},
			}
			local reservtablo = 
			{
				[1]	= 	{["x"]=-720.095703125, 	["y"]=66.912109375, 	["z"]=11.03148651123 ,	["i"]=17,	["Text"]="Сфотографируйте мост с разных сторон"},
				[2]	= 	{["x"]=-950.833984375, 	["y"]=120.310546875, 	["z"]=9.3083581924438,	["i"]=18,	["Text"]="Сфотографируйте дома эконом класса\nС разных сторон"},
				[3]	= 	{["x"]=443.3671875, 	["y"]=58.70703125, 		["z"]=11.080554008484,	["i"]=19,	["Text"]="Сфотографируйте пиццерию с разных\nСторон"},
				[4]	= 	{["x"]=-193.427734375, 	["y"]=-1107.427734375, 	["z"]=10.426527023315,	["i"]=20,	["Text"]="Сфотографируйте отель с разных\nСторон"}
			}
			local sectablo = 
			{
				[1] = {},
				[2] = {},
				[3] = {},
				[4] = {},
				[5] = {}
			}
			local mrktablo = 
			{
				[1] = {},
				[2] = {},
				[3] = {},
				[4] = {},
				[5] = {}
			}
			for i=1,5 do
				local dfd = math.random(1, 16)
				if(tablo[dfd] == nil) then
					local ripa = 0
					for i,n in pairs(reservtablo) do
						ripa = n
						reservtablo[i] = nil
						break
					end
					sectablo[i] = ripa
				else
					sectablo[i] = tablo[dfd]
					tablo[dfd] = nil
				end
				mrktablo[i]["mrk"] = createMarker(sectablo[i]["x"], sectablo[i]["y"], sectablo[i]["z"], "checkpoint", 25, 220, 0, 0, 220, client)
				mrktablo[i]["blp"] = createBlip(sectablo[i]["x"], sectablo[i]["y"], sectablo[i]["z"], 0, 2, 220, 0, 0, 220, 0, 64000, client)
				SED(mrktablo[i]["mrk"], "Text", sectablo[i]["Text"])
				SED(mrktablo[i]["mrk"], "Player", client)
				SED(mrktablo[i]["mrk"], "Iteror", i)
				mrktablo[i]["i"] = i
				addEventHandler("onMarkerHit", mrktablo[i]["mrk"], mrkText)
			end
			SED(client, "camtablo", mrktablo)
			SED(client, "PCount", 5)
		end
	elseif(dialogid == 128) then
		if(response == true) then
			addBox("Вы уволились с начальной\nРаботы фотографом.", client, 0, 60, 255)
			SED(client, "NWork", 0)
			local veh = getElementData(client, "PhotoVeh")
			if(veh ~= false) then
				if(isElement(veh)) then
					customDestroyVehicle(veh)
				end
				removeElementData(client, "PhotoVeh")
			end
			local tablo = getElementData(client, "camtablo")
			if(tablo ~= false) then
				for i,n in pairs(tablo) do
					if(isElement(n["mrk"])) then
						destroyElement(n["mrk"])
					end
					if(isElement(n["blp"])) then
						destroyElement(n["blp"])
					end
					tablo[i] = nil
				end
			end
			removeElementData(client, "camtablo")
		end
	elseif(dialogid == 130) then
		if(response == true) then
			if(listitem == 0) then
				local id = toch(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(-198.3896484375, -1449.7099609375, 8.0708332061768, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]= createBlip(-198.3896484375, -1449.7099609375, 8.0708332061768, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
				SED(GPST[id]["Pickup"], "Player", client)
			elseif(listitem == 1) then
				local id = toch(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(-8.0517578125, -995.0322265625, 10.418395996094, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]= createBlip(-8.0517578125, -995.0322265625, 10.418395996094, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
				SED(GPST[id]["Pickup"], "Player", client)
			elseif(listitem == 2) then
				local id = toch(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(-817.84765625, 565.0712890625, 10.888244628906, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]= createBlip(-817.84765625, 565.0712890625, 10.888244628906, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
				SED(GPST[id]["Pickup"], "Player", client)
			elseif(listitem == 3) then
				local id = toch(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(-906.556640625, -1401.59765625, 11.709150314331, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]= createBlip(-906.556640625, -1401.59765625, 11.709150314331, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
				SED(GPST[id]["Pickup"], "Player", client)
			elseif(listitem == 4) then
				local id = toch(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(337.0322265625, 1244.767578125, 22.717222213745, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]= createBlip(337.0322265625, 1244.767578125, 22.717222213745, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
				SED(GPST[id]["Pickup"], "Player", client)
			elseif(listitem == 5) then
				local id = toch(getElementData(client, "ID"))
				GPST[id] = {}
				GPST[id]["Pickup"] = createMarker(-871.927734375, 77.7763671875, 9.3296241760254, "checkpoint", 4, 220, 0, 0, 220, client)
				GPST[id]["Blip"]= createBlip(-871.927734375, 77.7763671875, 9.3296241760254, 0, 2, 220, 0, 0, 220, 0, 64000, client)
				addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
				SED(GPST[id]["Pickup"], "Player", client)
			end
		end
	elseif(dialogid == 131) then
		if(response == true) then
			if(listitem == 0) then
				takeWeapon(client, 24)
				giveWeapon(client, 24, 35)
				addBox("Вы забрали со склада Desert Eagle", client, 0, 60, 255)
			end
		end
	elseif(dialogid == 132) then
		if(response == true) then
			addBox("Вы устроились на работу\nВодителем эвакуатора!", client, 0, 60, 255)
			SED(client, "PWork", 4)
            updatePlayerAccount(client, "Work", 4)
			addBox("Чтобы начать работу, необходимо арендовать\nРабочий транспорт (/GPS - Работа)", client, 0, 90, 255)
		end
	elseif(dialogid == 133) then
		if(response == true) then
			addBox("Вы уволились с работы\nВодителем эвакуатора.", client, 0, 60, 255)
			SED(client, "PWork", 0)
            updatePlayerAccount(client, "Work", 0)
            local zprt = getElementData(client, "Zprt")
            if(zprt ~= false) then
	            removeElementData(client, "Zprt")
	        end
	        removeElementData(client, "MechStage")
			local veh = getElementData(client, "MechVeh")
			if(veh ~= false) then
				customSpawnVehicle(veh)
				removeElementData(veh, "MechDriver")
				removeElementData(client, "MechVeh")
			end
			local secveh = getElementData(client, "SVM")
			if(secveh ~= false) then
				local id = toch(getElementData(secveh, "Iter"))
				ServerPerem["MechCars"][id]["veh"] = nil
				customDestroyVehicle(secveh)
				removeElementData(client, "SVM")
			end
		end
	elseif(dialogid == 134) then
		local veh = getPedOccupiedVehicle(client)
		if(veh ~= false) then
			if(response == true) then
				if(getElementData(client, "Money") >= 1200) then
					setElementMoney(client, -1200, "Аренда механиков")
					SED(veh, "MechDriver", client)
					SED(client, "MechVeh", veh)
					toggleControl ( client, "accelerate", true ) 
					toggleControl ( client, "brake_reverse", true )
					toggleControl ( client, "handbrake", true )
					SED(client, "ToggleVeh", true)
					addBox("Вы успешно арендовали авто механика.\nОтправляйтесь по GPS, чтобы\nНачать работу.", client, 0, 60, 255)
					local id = getElementData(client, "ID")
					if(GPST[id] ~= nil) then
						if(GPST[id]["Pickup"] ~= nil) then
							if(getElementType(GPST[id]["Pickup"]) == "marker") then
								removeEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
								destroyElement(GPST[id]["Pickup"])
								destroyElement(GPST[id]["Blip"])
								GPST[id] = nil
							end
						end
					end
					GPST[id] = {}
					GPST[id]["Pickup"] = createMarker(-870.9365234375, 78.5625, 8.1080179214478, "checkpoint", 4, 220, 0, 0, 220, client)
					GPST[id]["Blip"] = createBlip(-870.9365234375, 78.5625, 8.1080179214478, 0, 2, 220, 0, 0, 220, 0, 64000, client)
					SED(GPST[id]["Pickup"], "Player", client)
					addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
				else
					addBox("У Вас недостаточно денег\nДля аренды авто.", client, 255, 0, 0)
					setControlState(client, "enter_exit", true)
				end
			else
				addBox("Вы отказались от аренды авто.", client, 255, 0, 0)
				setControlState(client, "enter_exit", true)
			end
		end
	elseif(dialogid == 135) then
		if(response == true) then
			if(getElementData(client, "BusinessID") ~= false) then
				if(toch(getElementData(client, "BusOwnID")) == 0) then
					if(toch(getElementData(client, "Money")) >= 325000) then
						local bus = toch(getElementData(client, "BusinessID"))
						if(bus > 9) then
							SED(client, "BusOwnID", toch(getElementData(client, "BusinessID")))
							BusinessTable[bus]["Owner"] = toch(getElementData(client, "AccID"))
							BusinessTable[bus]["OwnerName"] = getElementData(client, "Name")
							BusinessTable[bus]["OwnerPlayer"] = client
							BusinessTable[bus]["PayDay"] = 72
							BusinessTable[bus]["Products"] = 10000
							setElementMoney(client, -325000, "Покупка биз")
							dbExec(mysql, "UPDATE `Business` SET `Owner` = ?, `OwnerName` = ?, `PayDay` = 72, `Products` = '10000' WHERE `ID` = ?", BusinessTable[bus]["Owner"], BusinessTable[bus]["OwnerName"], bus)
							dbExec(mysql, "UPDATE `Accounts` SET `BusinessID` = ? WHERE `Name` = ?", bus, getElementData(client, "Name"))
							addBox("Поздравляем, вы приобрели бизнес №" .. bus .. ".\nНе забудьте оплатить налоги в /bmenu!", client, 60, 255, 0)
							addBox("Не забудьте заказать продукты,\nЧтобы люди могли закупаться у Вас ;).", client, 0, 255, 60)
						else
							addBox("Ошибка: Вы уже владеете бизнесом.", client, 255, 0, 0)
						end
					else
						addBox("Ошибка: У Вас недостаточно денег для покупки.", client, 255, 0, 0)
					end
				else
					addBox("Ошибка: Вы уже владеете бизнесом.", client, 255, 0, 0)
				end
			else
				addBox("Произошла ошибка, повторите попытку.", client, 255, 0, 0)
			end
		end
		removeElementData(client, "BusinessID")
	elseif(dialogid == 136) then
		if(response == true) then
			if(getElementData(client, "BusinessID") ~= false) then
				if(toch(getElementData(client, "BusOwnID")) == 0) then
					if(toch(getElementData(client, "Money")) >= 250000) then
						local bus = toch(getElementData(client, "BusinessID"))
						if(bus > 9) then
							SED(client, "BusOwnID", toch(getElementData(client, "BusinessID")))
							BusinessTable[bus]["Owner"] = toch(getElementData(client, "AccID"))
							BusinessTable[bus]["OwnerName"] = getElementData(client, "Name")
							BusinessTable[bus]["OwnerPlayer"] = client
							BusinessTable[bus]["PayDay"] = 72
							BusinessTable[bus]["Products"] = 10000
							setElementMoney(client, -250000, "Покупка биз")
							dbExec(mysql, "UPDATE `Business` SET `Owner` = ?, `OwnerName` = ?, `PayDay` = 72, `Products` = '10000' WHERE `ID` = ?", BusinessTable[bus]["Owner"], BusinessTable[bus]["OwnerName"], bus)
							dbExec(mysql, "UPDATE `Accounts` SET `BusinessID` = ? WHERE `Name` = ?", bus, getElementData(client, "Name"))
							addBox("Поздравляем, вы приобрели бизнес №" .. bus .. ".\nНе забудьте оплатить налоги в /bmenu!", client, 60, 255, 0)
							addBox("Не забудьте заказать продукты,\nЧтобы люди могли закупаться у Вас ;).", client, 0, 255, 60)
						else
							addBox("Ошибка: Вы уже владеете бизнесом.", client, 255, 0, 0)
						end
					else
						addBox("Ошибка: У Вас недостаточно денег для покупки.", client, 255, 0, 0)
					end
				else
					addBox("Ошибка: Вы уже владеете бизнесом.", client, 255, 0, 0)
				end
			else
				addBox("Произошла ошибка, повторите попытку.", client, 255, 0, 0)
			end
		end
		removeElementData(client, "BusinessID")
	elseif(dialogid == 137) then
		if(response == true) then
			local stolik = 1
			local iter = table.getn(ServerPerem["Stols"][stolik]["Players"])
			if(iter < 8) then
				if(ServerPerem["Stols"][stolik]["Sost"] == 0 or ServerPerem["Stols"][stolik]["Sost"] == 1) then
					if(getElementData(client, "Money") >= 1000) then
						iter = iter + 1
						edit3dtext(ServerPerem["Stols"][stolik]["Label1"], "Участников: " .. iter .. "/8.")
						if(isTimer(ServerPerem["Stols"][stolik]["Times"])) then
							killTimer(ServerPerem["Stols"][stolik]["Times"])
							ServerPerem["Stols"][stolik]["Times"] = nil
						end
						if(iter >= 2) then
							ServerPerem["Stols"][stolik]["Times"] = setTimer(function ( st )
								ServerPerem["Stols"][st]["Timer"] = ServerPerem["Stols"][st]["Timer"] - 1
								local sec = ServerPerem["Stols"][st]["Timer"]
								if(sec < 10) then
									sec = "0" .. sec
								end
								edit3dtext(ServerPerem["Stols"][st]["Label"], "Состояние: ожидание. Время: 00:" .. sec)
								if(sec == "00") then
									ServerPerem["Stols"][st]["Timer"] = 20
									ServerPerem["Stols"][st]["Sost"] = 2
									setTimer(function ( sr )
										ServerPerem["Stols"][sr]["Timer"] = ServerPerem["Stols"][sr]["Timer"] - 1
										local sec = ServerPerem["Stols"][sr]["Timer"]
										if(sec > 15) then
											edit3dtext(ServerPerem["Stols"][sr]["Label"], "Лошади стартовали.")
										elseif(sec > 10 and sec <= 15) then
											edit3dtext(ServerPerem["Stols"][sr]["Label"], "Как же они ускоряются, кто займет лидирующее место?")
										elseif(sec > 5 and sec <= 10) then
											edit3dtext(ServerPerem["Stols"][sr]["Label"], "Вот это скорость и воля к победе!")
										elseif(sec > 0 and sec <= 5) then
											edit3dtext(ServerPerem["Stols"][sr]["Label"], "Ииии... победитель заездаааа....")
										elseif(sec == 0) then
											local rand1 = math.random(15, 17)
											local rand2 = math.random(0, 99)
											local rand3 = math.random(1, #ServerPerem["Stols"][sr]["Players"])
											local losh = "d"
											if(rand3 == 1) then
												losh = "Черная"
											elseif(rand3 == 2) then
												losh = "Красная"
											elseif(rand3 == 3) then
												losh = "Синяя"
											elseif(rand3 == 4) then
												losh = "Желтая"
											elseif(rand3 == 5) then
												losh = "Фиолетовая"
											elseif(rand3 == 6) then
												losh = "Розовая"
											elseif(rand3 == 7) then
												losh = "Зеленая"
											elseif(rand3 == 8) then
												losh = "Оранжевая"
											end
											if(rand2 < 10) then
												rand2 = "0" .. rand2
											end
											edit3dtext(ServerPerem["Stols"][sr]["Label"], "Победитель заезда " .. losh .. " лошадь с временем: " .. rand1 .. "." .. rand2 .. " с! Куш стола забирает: " .. ServerPerem["Stols"][sr]["Players"][rand3]["Name"] .. ".")
											local plast = 0
											local mn = 0
											if(sr == 1) then
												mn = 1000
											elseif(sr == 2) then
												mn = 5000
											elseif(sr == 3) then
												mn = 10000
											elseif(sr == 4) then
												mn = 50000
											elseif(sr == 5) then
												mn = 100000
											end
											for i,n in pairs(IDS) do
												if(getElementData(n, "Login") == true) then
													if(getElementData(n, "AccID") == ServerPerem["Stols"][sr]["Players"][rand3]["AccID"]) then
														setElementMoney(n, #ServerPerem["Stols"][sr]["Players"] * mn * 0.9, "Выиграно в казино")
														plast = n
														break
													end
												end
											end
											if(plast == 0) then
												dbExec(mysql, "UPDATE `Accounts` SET `Money` = `Money` + ? WHERE `ID` = ?", #ServerPerem["Stols"][sr]["Players"] * mn * 0.9, ServerPerem["Stols"][sr]["Players"][rand3]["AccID"])
												dbExec(mysql, "INSERT INTO `MoneyLogs` (`ID`, `PID`, `Name`, `Reason`, `Summ`, `SecID`) VALUES (?, ?, ?, ?, ?, ?)", maxquery, ServerPerem["Stols"][sr]["Players"][rand3]["AccID"], ServerPerem["Stols"][sr]["Players"][rand3]["Name"], "Выиграно в казино", #ServerPerem["Stols"][sr]["Players"] * mn * 0.9, 0)
												maxquery = maxquery + 1
											end
											ServerPerem["Stols"][sr]["Times"] = nil
											setTimer(function ( fad )
												ServerPerem["Stols"][fad]["Players"] = {}
												ServerPerem["Stols"][fad]["Sost"] = 0
												edit3dtext(ServerPerem["Stols"][fad]["Label"], "Состояние: ожидание.")
												edit3dtext(ServerPerem["Stols"][fad]["Label1"], "Участников: 0/8.")
											end, 5000, 1, sr)
										end
									end, 1000, 20, st)
								end
							end, 1000, 30, stolik)
							ServerPerem["Stols"][stolik]["Sost"] = 1
						end
						ServerPerem["Stols"][stolik]["Players"][iter] = {}
						ServerPerem["Stols"][stolik]["Players"][iter]["AccID"]	= getElementData(client, "AccID")
						ServerPerem["Stols"][stolik]["Players"][iter]["Name"] = getElementData(client, "Name")
						ServerPerem["Stols"][stolik]["Timer"] = 30
						edit3dtext(ServerPerem["Stols"][stolik]["Label"], "Состояние: ожидание. Время: 00:30")
						local colorl = "d"
						if(iter == 1) then
							colorl = "Черная"
						elseif(iter == 2) then
							colorl = "Красная"
						elseif(iter == 3) then
							colorl = "Синяя"
						elseif(iter == 4) then
							colorl = "Желтая"
						elseif(iter == 5) then
							colorl = "Фиолетовая"
						elseif(iter == 6) then
							colorl = "Розовая"
						elseif(iter == 7) then
							colorl = "Зеленая"
						elseif(iter == 8) then
							colorl = "Оранжевая"
						end
						addBox("Вы успешно поставили 1.000$.\nВаша лошадь: " .. colorl .. ".", client, 0, 60, 255)
						setElementMoney(client, -1000, "Ставка на лошадь")
						setBusinessMoney(1000, 5)
					else
						addBox("У Вас недостаточно денег, чтобы\nПоставить ставку на лошадь.", client, 255, 0, 0)
					end
				else
					addBox("Вы уже не можете поставить ставку.", client, 255, 0, 0)
				end
			end
		end
	elseif(dialogid == 138) then
		if(response == true) then
			local stolik = 2
			local iter = table.getn(ServerPerem["Stols"][stolik]["Players"])
			if(iter < 8) then
				if(ServerPerem["Stols"][stolik]["Sost"] == 0 or ServerPerem["Stols"][stolik]["Sost"] == 1) then
					if(getElementData(client, "Money") >= 5000) then
						iter = iter + 1
						edit3dtext(ServerPerem["Stols"][stolik]["Label1"], "Участников: " .. iter .. "/8.")
						if(isTimer(ServerPerem["Stols"][stolik]["Times"])) then
							killTimer(ServerPerem["Stols"][stolik]["Times"])
							ServerPerem["Stols"][stolik]["Times"] = nil
						end
						if(iter >= 2) then
							ServerPerem["Stols"][stolik]["Times"] = setTimer(function ( st )
								ServerPerem["Stols"][st]["Timer"] = ServerPerem["Stols"][st]["Timer"] - 1
								local sec = ServerPerem["Stols"][st]["Timer"]
								if(sec < 10) then
									sec = "0" .. sec
								end
								edit3dtext(ServerPerem["Stols"][st]["Label"], "Состояние: ожидание. Время: 00:" .. sec)
								if(sec == "00") then
									ServerPerem["Stols"][st]["Timer"] = 20
									ServerPerem["Stols"][st]["Sost"] = 2
									setTimer(function ( sr )
										ServerPerem["Stols"][sr]["Timer"] = ServerPerem["Stols"][sr]["Timer"] - 1
										local sec = ServerPerem["Stols"][sr]["Timer"]
										if(sec > 15) then
											edit3dtext(ServerPerem["Stols"][sr]["Label"], "Лошади стартовали.")
										elseif(sec > 10 and sec <= 15) then
											edit3dtext(ServerPerem["Stols"][sr]["Label"], "Как же они ускоряются, кто займет лидирующее место?")
										elseif(sec > 5 and sec <= 10) then
											edit3dtext(ServerPerem["Stols"][sr]["Label"], "Вот это скорость и воля к победе!")
										elseif(sec > 0 and sec <= 5) then
											edit3dtext(ServerPerem["Stols"][sr]["Label"], "Ииии... победитель заездаааа....")
										elseif(sec == 0) then
											local rand1 = math.random(15, 17)
											local rand2 = math.random(0, 99)
											local rand3 = math.random(1, #ServerPerem["Stols"][sr]["Players"])
											local losh = "d"
											if(rand3 == 1) then
												losh = "Черная"
											elseif(rand3 == 2) then
												losh = "Красная"
											elseif(rand3 == 3) then
												losh = "Синяя"
											elseif(rand3 == 4) then
												losh = "Желтая"
											elseif(rand3 == 5) then
												losh = "Фиолетовая"
											elseif(rand3 == 6) then
												losh = "Розовая"
											elseif(rand3 == 7) then
												losh = "Зеленая"
											elseif(rand3 == 8) then
												losh = "Оранжевая"
											end
											if(rand2 < 10) then
												rand2 = "0" .. rand2
											end
											edit3dtext(ServerPerem["Stols"][sr]["Label"], "Победитель заезда " .. losh .. " лошадь с временем: " .. rand1 .. "." .. rand2 .. " с! Куш стола забирает: " .. ServerPerem["Stols"][sr]["Players"][rand3]["Name"] .. ".")
											local plast = 0
											local mn = 0
											if(sr == 1) then
												mn = 1000
											elseif(sr == 2) then
												mn = 5000
											elseif(sr == 3) then
												mn = 10000
											elseif(sr == 4) then
												mn = 50000
											elseif(sr == 5) then
												mn = 100000
											end
											for i,n in pairs(IDS) do
												if(getElementData(n, "Login") == true) then
													if(getElementData(n, "AccID") == ServerPerem["Stols"][sr]["Players"][rand3]["AccID"]) then
														setElementMoney(n, #ServerPerem["Stols"][sr]["Players"] * mn * 0.9, "Выиграно в казино")
														plast = n
														break
													end
												end
											end
											if(plast == 0) then
												dbExec(mysql, "UPDATE `Accounts` SET `Money` = `Money` + ? WHERE `ID` = ?", #ServerPerem["Stols"][sr]["Players"] * mn * 0.9, ServerPerem["Stols"][sr]["Players"][rand3]["AccID"])
												dbExec(mysql, "INSERT INTO `MoneyLogs` (`ID`, `PID`, `Name`, `Reason`, `Summ`, `SecID`) VALUES (?, ?, ?, ?, ?, ?)", maxquery, ServerPerem["Stols"][sr]["Players"][rand3]["AccID"], ServerPerem["Stols"][sr]["Players"][rand3]["Name"], "Выиграно в казино", #ServerPerem["Stols"][sr]["Players"] * mn * 0.9, 0)
												maxquery = maxquery + 1
											end
											ServerPerem["Stols"][sr]["Times"] = nil
											setTimer(function ( fad )
												ServerPerem["Stols"][fad]["Players"] = {}
												ServerPerem["Stols"][fad]["Sost"] = 0
												edit3dtext(ServerPerem["Stols"][fad]["Label"], "Состояние: ожидание.")
												edit3dtext(ServerPerem["Stols"][fad]["Label1"], "Участников: 0/8.")
											end, 5000, 1, sr)
										end
									end, 1000, 20, st)
								end
							end, 1000, 30, stolik)
							ServerPerem["Stols"][stolik]["Sost"] = 1
						end
						edit3dtext(ServerPerem["Stols"][stolik]["Label"], "Состояние: ожидание. Время: 00:30")
						ServerPerem["Stols"][stolik]["Players"][iter] = {}
						ServerPerem["Stols"][stolik]["Players"][iter]["AccID"]	= getElementData(client, "AccID")
						ServerPerem["Stols"][stolik]["Players"][iter]["Name"] = getElementData(client, "Name")
						ServerPerem["Stols"][stolik]["Timer"] = 30
						local colorl = "d"
						if(iter == 1) then
							colorl = "Черная"
						elseif(iter == 2) then
							colorl = "Красная"
						elseif(iter == 3) then
							colorl = "Синяя"
						elseif(iter == 4) then
							colorl = "Желтая"
						elseif(iter == 5) then
							colorl = "Фиолетовая"
						elseif(iter == 6) then
							colorl = "Розовая"
						elseif(iter == 7) then
							colorl = "Зеленая"
						elseif(iter == 8) then
							colorl = "Оранжевая"
						end
						addBox("Вы успешно поставили 5.000$.\nВаша лошадь: " .. colorl .. ".", client, 0, 60, 255)
						setElementMoney(client, -5000, "Ставка на лошадь")
						setBusinessMoney(1000, 25)
					else
						addBox("У Вас недостаточно денег, чтобы\nПоставить ставку на лошадь.", client, 255, 0, 0)
					end
				else
					addBox("Вы уже не можете поставить ставку.", client, 255, 0, 0)
				end
			end
		end
	elseif(dialogid == 139) then
		if(response == true) then
			local stolik = 3
			local iter = table.getn(ServerPerem["Stols"][stolik]["Players"])
			if(iter < 8) then
				if(ServerPerem["Stols"][stolik]["Sost"] == 0 or ServerPerem["Stols"][stolik]["Sost"] == 1) then
					if(getElementData(client, "Money") >= 10000) then
						iter = iter + 1
						edit3dtext(ServerPerem["Stols"][stolik]["Label1"], "Участников: " .. iter .. "/8.")
						if(isTimer(ServerPerem["Stols"][stolik]["Times"])) then
							killTimer(ServerPerem["Stols"][stolik]["Times"])
							ServerPerem["Stols"][stolik]["Times"] = nil
						end
						if(iter >= 2) then
							ServerPerem["Stols"][stolik]["Times"] = setTimer(function ( st )
								ServerPerem["Stols"][st]["Timer"] = ServerPerem["Stols"][st]["Timer"] - 1
								local sec = ServerPerem["Stols"][st]["Timer"]
								if(sec < 10) then
									sec = "0" .. sec
								end
								edit3dtext(ServerPerem["Stols"][st]["Label"], "Состояние: ожидание. Время: 00:" .. sec)
								if(sec == "00") then
									ServerPerem["Stols"][st]["Timer"] = 20
									ServerPerem["Stols"][st]["Sost"] = 2
									setTimer(function ( sr )
										ServerPerem["Stols"][sr]["Timer"] = ServerPerem["Stols"][sr]["Timer"] - 1
										local sec = ServerPerem["Stols"][sr]["Timer"]
										if(sec > 15) then
											edit3dtext(ServerPerem["Stols"][sr]["Label"], "Лошади стартовали.")
										elseif(sec > 10 and sec <= 15) then
											edit3dtext(ServerPerem["Stols"][sr]["Label"], "Как же они ускоряются, кто займет лидирующее место?")
										elseif(sec > 5 and sec <= 10) then
											edit3dtext(ServerPerem["Stols"][sr]["Label"], "Вот это скорость и воля к победе!")
										elseif(sec > 0 and sec <= 5) then
											edit3dtext(ServerPerem["Stols"][sr]["Label"], "Ииии... победитель заездаааа....")
										elseif(sec == 0) then
											local rand1 = math.random(15, 17)
											local rand2 = math.random(0, 99)
											local rand3 = math.random(1, #ServerPerem["Stols"][sr]["Players"])
											local losh = "d"
											if(rand3 == 1) then
												losh = "Черная"
											elseif(rand3 == 2) then
												losh = "Красная"
											elseif(rand3 == 3) then
												losh = "Синяя"
											elseif(rand3 == 4) then
												losh = "Желтая"
											elseif(rand3 == 5) then
												losh = "Фиолетовая"
											elseif(rand3 == 6) then
												losh = "Розовая"
											elseif(rand3 == 7) then
												losh = "Зеленая"
											elseif(rand3 == 8) then
												losh = "Оранжевая"
											end
											if(rand2 < 10) then
												rand2 = "0" .. rand2
											end
											edit3dtext(ServerPerem["Stols"][sr]["Label"], "Победитель заезда " .. losh .. " лошадь с временем: " .. rand1 .. "." .. rand2 .. " с! Куш стола забирает: " .. ServerPerem["Stols"][sr]["Players"][rand3]["Name"] .. ".")
											local plast = 0
											local mn = 0
											if(sr == 1) then
												mn = 1000
											elseif(sr == 2) then
												mn = 5000
											elseif(sr == 3) then
												mn = 10000
											elseif(sr == 4) then
												mn = 50000
											elseif(sr == 5) then
												mn = 100000
											end
											for i,n in pairs(IDS) do
												if(getElementData(n, "Login") == true) then
													if(getElementData(n, "AccID") == ServerPerem["Stols"][sr]["Players"][rand3]["AccID"]) then
														setElementMoney(n, #ServerPerem["Stols"][sr]["Players"] * mn * 0.9, "Выиграно в казино")
														plast = n
														break
													end
												end
											end
											if(plast == 0) then
												dbExec(mysql, "UPDATE `Accounts` SET `Money` = `Money` + ? WHERE `ID` = ?", #ServerPerem["Stols"][sr]["Players"] * mn * 0.9, ServerPerem["Stols"][sr]["Players"][rand3]["AccID"])
												dbExec(mysql, "INSERT INTO `MoneyLogs` (`ID`, `PID`, `Name`, `Reason`, `Summ`, `SecID`) VALUES (?, ?, ?, ?, ?, ?)", maxquery, ServerPerem["Stols"][sr]["Players"][rand3]["AccID"], ServerPerem["Stols"][sr]["Players"][rand3]["Name"], "Выиграно в казино", #ServerPerem["Stols"][sr]["Players"] * mn * 0.9, 0)
												maxquery = maxquery + 1
											end
											ServerPerem["Stols"][sr]["Times"] = nil
											setTimer(function ( fad )
												ServerPerem["Stols"][fad]["Players"] = {}
												ServerPerem["Stols"][fad]["Sost"] = 0
												edit3dtext(ServerPerem["Stols"][fad]["Label"], "Состояние: ожидание.")
												edit3dtext(ServerPerem["Stols"][fad]["Label1"], "Участников: 0/8.")
											end, 5000, 1, sr)
										end
									end, 1000, 20, st)
								end
							end, 1000, 30, stolik)
							ServerPerem["Stols"][stolik]["Sost"] = 1
							edit3dtext(ServerPerem["Stols"][stolik]["Label"], "Состояние: ожидание. Время: 00:30")
						end
						ServerPerem["Stols"][stolik]["Players"][iter] = {}
						ServerPerem["Stols"][stolik]["Players"][iter]["AccID"]	= getElementData(client, "AccID")
						ServerPerem["Stols"][stolik]["Players"][iter]["Name"] = getElementData(client, "Name")
						ServerPerem["Stols"][stolik]["Timer"] = 30
						local colorl = "d"
						if(iter == 1) then
							colorl = "Черная"
						elseif(iter == 2) then
							colorl = "Красная"
						elseif(iter == 3) then
							colorl = "Синяя"
						elseif(iter == 4) then
							colorl = "Желтая"
						elseif(iter == 5) then
							colorl = "Фиолетовая"
						elseif(iter == 6) then
							colorl = "Розовая"
						elseif(iter == 7) then
							colorl = "Зеленая"
						elseif(iter == 8) then
							colorl = "Оранжевая"
						end
						addBox("Вы успешно поставили 10.000$.\nВаша лошадь: " .. colorl .. ".", client, 0, 60, 255)
						setElementMoney(client, -10000, "Ставка на лошадь")
						setBusinessMoney(1000, 50)
					else
						addBox("У Вас недостаточно денег, чтобы\nПоставить ставку на лошадь.", client, 255, 0, 0)
					end
				else
					addBox("Вы уже не можете поставить ставку.", client, 255, 0, 0)
				end
			end
		end
	elseif(dialogid == 140) then
		if(response == true) then
			local stolik = 4
			local iter = table.getn(ServerPerem["Stols"][stolik]["Players"])
			if(iter < 8) then
				if(ServerPerem["Stols"][stolik]["Sost"] == 0 or ServerPerem["Stols"][stolik]["Sost"] == 1) then
					if(getElementData(client, "Money") >= 50000) then
						iter = iter + 1
						edit3dtext(ServerPerem["Stols"][stolik]["Label1"], "Участников: " .. iter .. "/8.")
						if(isTimer(ServerPerem["Stols"][stolik]["Times"])) then
							killTimer(ServerPerem["Stols"][stolik]["Times"])
							ServerPerem["Stols"][stolik]["Times"] = nil
						end
						if(iter >= 2) then
							ServerPerem["Stols"][stolik]["Times"] = setTimer(function ( st )
								ServerPerem["Stols"][st]["Timer"] = ServerPerem["Stols"][st]["Timer"] - 1
								local sec = ServerPerem["Stols"][st]["Timer"]
								if(sec < 10) then
									sec = "0" .. sec
								end
								edit3dtext(ServerPerem["Stols"][st]["Label"], "Состояние: ожидание. Время: 00:" .. sec)
								if(sec == "00") then
									ServerPerem["Stols"][st]["Timer"] = 20
									ServerPerem["Stols"][st]["Sost"] = 2
									setTimer(function ( sr )
										ServerPerem["Stols"][sr]["Timer"] = ServerPerem["Stols"][sr]["Timer"] - 1
										local sec = ServerPerem["Stols"][sr]["Timer"]
										if(sec > 15) then
											edit3dtext(ServerPerem["Stols"][sr]["Label"], "Лошади стартовали.")
										elseif(sec > 10 and sec <= 15) then
											edit3dtext(ServerPerem["Stols"][sr]["Label"], "Как же они ускоряются, кто займет лидирующее место?")
										elseif(sec > 5 and sec <= 10) then
											edit3dtext(ServerPerem["Stols"][sr]["Label"], "Вот это скорость и воля к победе!")
										elseif(sec > 0 and sec <= 5) then
											edit3dtext(ServerPerem["Stols"][sr]["Label"], "Ииии... победитель заездаааа....")
										elseif(sec == 0) then
											local rand1 = math.random(15, 17)
											local rand2 = math.random(0, 99)
											local rand3 = math.random(1, #ServerPerem["Stols"][sr]["Players"])
											local losh = "d"
											if(rand3 == 1) then
												losh = "Черная"
											elseif(rand3 == 2) then
												losh = "Красная"
											elseif(rand3 == 3) then
												losh = "Синяя"
											elseif(rand3 == 4) then
												losh = "Желтая"
											elseif(rand3 == 5) then
												losh = "Фиолетовая"
											elseif(rand3 == 6) then
												losh = "Розовая"
											elseif(rand3 == 7) then
												losh = "Зеленая"
											elseif(rand3 == 8) then
												losh = "Оранжевая"
											end
											if(rand2 < 10) then
												rand2 = "0" .. rand2
											end
											edit3dtext(ServerPerem["Stols"][sr]["Label"], "Победитель заезда " .. losh .. " лошадь с временем: " .. rand1 .. "." .. rand2 .. " с! Куш стола забирает: " .. ServerPerem["Stols"][sr]["Players"][rand3]["Name"] .. ".")
											local plast = 0
											local mn = 0
											if(sr == 1) then
												mn = 1000
											elseif(sr == 2) then
												mn = 5000
											elseif(sr == 3) then
												mn = 10000
											elseif(sr == 4) then
												mn = 50000
											elseif(sr == 5) then
												mn = 100000
											end
											for i,n in pairs(IDS) do
												if(getElementData(n, "Login") == true) then
													if(getElementData(n, "AccID") == ServerPerem["Stols"][sr]["Players"][rand3]["AccID"]) then
														setElementMoney(n, #ServerPerem["Stols"][sr]["Players"] * mn * 0.9, "Выиграно в казино")
														plast = n
														break
													end
												end
											end
											if(plast == 0) then
												dbExec(mysql, "UPDATE `Accounts` SET `Money` = `Money` + ? WHERE `ID` = ?", #ServerPerem["Stols"][sr]["Players"] * mn * 0.9, ServerPerem["Stols"][sr]["Players"][rand3]["AccID"])
												dbExec(mysql, "INSERT INTO `MoneyLogs` (`ID`, `PID`, `Name`, `Reason`, `Summ`, `SecID`) VALUES (?, ?, ?, ?, ?, ?)", maxquery, ServerPerem["Stols"][sr]["Players"][rand3]["AccID"], ServerPerem["Stols"][sr]["Players"][rand3]["Name"], "Выиграно в казино", #ServerPerem["Stols"][sr]["Players"] * mn * 0.9, 0)
												maxquery = maxquery + 1
											end
											ServerPerem["Stols"][sr]["Times"] = nil
											setTimer(function ( fad )
												ServerPerem["Stols"][fad]["Players"] = {}
												ServerPerem["Stols"][fad]["Sost"] = 0
												edit3dtext(ServerPerem["Stols"][fad]["Label"], "Состояние: ожидание.")
												edit3dtext(ServerPerem["Stols"][fad]["Label1"], "Участников: 0/8.")
											end, 5000, 1, sr)
										end
									end, 1000, 20, st)
								end
							end, 1000, 30, stolik)
							ServerPerem["Stols"][stolik]["Sost"] = 1
							edit3dtext(ServerPerem["Stols"][stolik]["Label"], "Состояние: ожидание. Время: 00:30")
						end
						ServerPerem["Stols"][stolik]["Players"][iter] = {}
						ServerPerem["Stols"][stolik]["Players"][iter]["AccID"]	= getElementData(client, "AccID")
						ServerPerem["Stols"][stolik]["Players"][iter]["Name"] = getElementData(client, "Name")
						ServerPerem["Stols"][stolik]["Timer"] = 30
						local colorl = "d"
						if(iter == 1) then
							colorl = "Черная"
						elseif(iter == 2) then
							colorl = "Красная"
						elseif(iter == 3) then
							colorl = "Синяя"
						elseif(iter == 4) then
							colorl = "Желтая"
						elseif(iter == 5) then
							colorl = "Фиолетовая"
						elseif(iter == 6) then
							colorl = "Розовая"
						elseif(iter == 7) then
							colorl = "Зеленая"
						elseif(iter == 8) then
							colorl = "Оранжевая"
						end
						addBox("Вы успешно поставили 50.000$.\nВаша лошадь: " .. colorl .. ".", client, 0, 60, 255)
						setElementMoney(client, -50000, "Ставка на лошадь")
						setBusinessMoney(1000, 250)
					else
						addBox("У Вас недостаточно денег, чтобы\nПоставить ставку на лошадь.", client, 255, 0, 0)
					end
				else
					addBox("Вы уже не можете поставить ставку.", client, 255, 0, 0)
				end
			end
		end
	elseif(dialogid == 141) then
		if(response == true) then
			local stolik = 5
			local iter = table.getn(ServerPerem["Stols"][stolik]["Players"])
			if(iter < 8) then
				if(ServerPerem["Stols"][stolik]["Sost"] == 0 or ServerPerem["Stols"][stolik]["Sost"] == 1) then
					if(getElementData(client, "Money") >= 100000) then
						iter = iter + 1
						edit3dtext(ServerPerem["Stols"][stolik]["Label1"], "Участников: " .. iter .. "/8.")
						if(isTimer(ServerPerem["Stols"][stolik]["Times"])) then
							killTimer(ServerPerem["Stols"][stolik]["Times"])
							ServerPerem["Stols"][stolik]["Times"] = nil
						end
						if(iter >= 2) then
							ServerPerem["Stols"][stolik]["Times"] = setTimer(function ( st )
								ServerPerem["Stols"][st]["Timer"] = ServerPerem["Stols"][st]["Timer"] - 1
								local sec = ServerPerem["Stols"][st]["Timer"]
								if(sec < 10) then
									sec = "0" .. sec
								end
								edit3dtext(ServerPerem["Stols"][st]["Label"], "Состояние: ожидание. Время: 00:" .. sec)
								if(sec == "00") then
									ServerPerem["Stols"][st]["Timer"] = 20
									ServerPerem["Stols"][st]["Sost"] = 2
									setTimer(function ( sr )
										ServerPerem["Stols"][sr]["Timer"] = ServerPerem["Stols"][sr]["Timer"] - 1
										local sec = ServerPerem["Stols"][sr]["Timer"]
										if(sec > 15) then
											edit3dtext(ServerPerem["Stols"][sr]["Label"], "Лошади стартовали.")
										elseif(sec > 10 and sec <= 15) then
											edit3dtext(ServerPerem["Stols"][sr]["Label"], "Как же они ускоряются, кто займет лидирующее место?")
										elseif(sec > 5 and sec <= 10) then
											edit3dtext(ServerPerem["Stols"][sr]["Label"], "Вот это скорость и воля к победе!")
										elseif(sec > 0 and sec <= 5) then
											edit3dtext(ServerPerem["Stols"][sr]["Label"], "Ииии... победитель заездаааа....")
										elseif(sec == 0) then
											local rand1 = math.random(15, 17)
											local rand2 = math.random(0, 99)
											local rand3 = math.random(1, #ServerPerem["Stols"][sr]["Players"])
											local losh = "d"
											if(rand3 == 1) then
												losh = "Черная"
											elseif(rand3 == 2) then
												losh = "Красная"
											elseif(rand3 == 3) then
												losh = "Синяя"
											elseif(rand3 == 4) then
												losh = "Желтая"
											elseif(rand3 == 5) then
												losh = "Фиолетовая"
											elseif(rand3 == 6) then
												losh = "Розовая"
											elseif(rand3 == 7) then
												losh = "Зеленая"
											elseif(rand3 == 8) then
												losh = "Оранжевая"
											end
											if(rand2 < 10) then
												rand2 = "0" .. rand2
											end
											edit3dtext(ServerPerem["Stols"][sr]["Label"], "Победитель заезда " .. losh .. " лошадь с временем: " .. rand1 .. "." .. rand2 .. " с! Куш стола забирает: " .. ServerPerem["Stols"][sr]["Players"][rand3]["Name"] .. ".")
											local plast = 0
											local mn = 0
											if(sr == 1) then
												mn = 1000
											elseif(sr == 2) then
												mn = 5000
											elseif(sr == 3) then
												mn = 10000
											elseif(sr == 4) then
												mn = 50000
											elseif(sr == 5) then
												mn = 100000
											end
											for i,n in pairs(IDS) do
												if(getElementData(n, "Login") == true) then
													if(getElementData(n, "AccID") == ServerPerem["Stols"][sr]["Players"][rand3]["AccID"]) then
														setElementMoney(n, #ServerPerem["Stols"][sr]["Players"] * mn * 0.9, "Выиграно в казино")
														plast = n
														break
													end
												end
											end
											if(plast == 0) then
												dbExec(mysql, "UPDATE `Accounts` SET `Money` = `Money` + ? WHERE `ID` = ?", #ServerPerem["Stols"][sr]["Players"] * mn * 0.9, ServerPerem["Stols"][sr]["Players"][rand3]["AccID"])
												dbExec(mysql, "INSERT INTO `MoneyLogs` (`ID`, `PID`, `Name`, `Reason`, `Summ`, `SecID`) VALUES (?, ?, ?, ?, ?, ?)", maxquery, ServerPerem["Stols"][sr]["Players"][rand3]["AccID"], ServerPerem["Stols"][sr]["Players"][rand3]["Name"], "Выиграно в казино", #ServerPerem["Stols"][sr]["Players"] * mn * 0.9, 0)
												maxquery = maxquery + 1
											end
											ServerPerem["Stols"][sr]["Times"] = nil
											setTimer(function ( fad )
												ServerPerem["Stols"][fad]["Players"] = {}
												ServerPerem["Stols"][fad]["Sost"] = 0
												edit3dtext(ServerPerem["Stols"][fad]["Label"], "Состояние: ожидание.")
												edit3dtext(ServerPerem["Stols"][fad]["Label1"], "Участников: 0/8.")
											end, 5000, 1, sr)
										end
									end, 1000, 20, st)
								end
							end, 1000, 30, stolik)
							ServerPerem["Stols"][stolik]["Sost"] = 1
							edit3dtext(ServerPerem["Stols"][stolik]["Label"], "Состояние: ожидание. Время: 00:30")
						end
						ServerPerem["Stols"][stolik]["Players"][iter] = {}
						ServerPerem["Stols"][stolik]["Players"][iter]["AccID"]	= getElementData(client, "AccID")
						ServerPerem["Stols"][stolik]["Players"][iter]["Name"] = getElementData(client, "Name")
						ServerPerem["Stols"][stolik]["Timer"] = 30
						local colorl = "d"
						if(iter == 1) then
							colorl = "Черная"
						elseif(iter == 2) then
							colorl = "Красная"
						elseif(iter == 3) then
							colorl = "Синяя"
						elseif(iter == 4) then
							colorl = "Желтая"
						elseif(iter == 5) then
							colorl = "Фиолетовая"
						elseif(iter == 6) then
							colorl = "Розовая"
						elseif(iter == 7) then
							colorl = "Зеленая"
						elseif(iter == 8) then
							colorl = "Оранжевая"
						end
						addBox("Вы успешно поставили 100.000$.\nВаша лошадь: " .. colorl .. ".", client, 0, 60, 255)
						setElementMoney(client, -100000, "Ставка на лошадь")
						setBusinessMoney(1000, 500)
					else
						addBox("У Вас недостаточно денег, чтобы\nПоставить ставку на лошадь.", client, 255, 0, 0)
					end
				else
					addBox("Вы уже не можете поставить ставку.", client, 255, 0, 0)
				end
			end
		end
	elseif(dialogid == 142) then
		if(response == true) then
			if(getElementData(client, "BusinessID") ~= false) then
				if(toch(getElementData(client, "BusOwnID")) == 0) then
					if(toch(getElementData(client, "Money")) >= 1500000) then
						local bus = toch(getElementData(client, "BusinessID"))
						if(bus > 9) then
							SED(client, "BusOwnID", toch(getElementData(client, "BusinessID")))
							BusinessTable[bus]["Owner"] = toch(getElementData(client, "AccID"))
							BusinessTable[bus]["OwnerName"] = getElementData(client, "Name")
							BusinessTable[bus]["OwnerPlayer"] = client
							BusinessTable[bus]["PayDay"] = 72
							BusinessTable[bus]["Products"] = 10000
							setElementMoney(client, -1500000, "Покупка биз")
							dbExec(mysql, "UPDATE `Business` SET `Owner` = ?, `OwnerName` = ?, `PayDay` = 72, `Products` = '10000' WHERE `ID` = ?", BusinessTable[bus]["Owner"], BusinessTable[bus]["OwnerName"], bus)
							dbExec(mysql, "UPDATE `Accounts` SET `BusinessID` = ? WHERE `Name` = ?", bus, getElementData(client, "Name"))
							addBox("Поздравляем, вы приобрели бизнес №" .. bus .. ".\nНе забудьте оплатить налоги в /bmenu!", client, 60, 255, 0)
							addBox("Не забудьте заказать продукты,\nЧтобы люди могли закупаться у Вас ;).", client, 0, 255, 60)
						else
							addBox("Ошибка: Вы уже владеете бизнесом.", client, 255, 0, 0)
						end
					else
						addBox("Ошибка: У Вас недостаточно денег для покупки.", client, 255, 0, 0)
					end
				else
					addBox("Ошибка: Вы уже владеете бизнесом.", client, 255, 0, 0)
				end
			else
				addBox("Произошла ошибка, повторите попытку.", client, 255, 0, 0)
			end
		end
		removeElementData(client, "BusinessID")
	elseif(dialogid == 143) then
		if(response == true) then
			if(listitem == 0) then
				if(getElementData(client, "Money") >= 500) then
					if(BusinessTable[1000]["Products"] >= 200) then
						triggerClientEvent(client, "onPlayerSetDrunk", client, 5)
						setElementMoney(client, -500, "Покупка алкоголя")
						BusinessTable[1000]["Products"] = BusinessTable[1000]["Products"] - 200
						setBusinessMoney(1000, 500)
						addBox("Вы приобрели и выпили\nЛегкий алкогольный напиток.", client, 0, 0, 255)
					else
						addBox("В клубе недостаточно продуктов.", client, 255, 0, 0)
					end
				else
					addBox("У Вас недостаточно денег\nЧтобы приобрести это.", client, 255, 0, 0)
				end
			elseif(listitem == 1) then
				if(getElementData(client, "Money") >= 1000) then
					if(BusinessTable[1000]["Products"] >= 400) then
						triggerClientEvent(client, "onPlayerSetDrunk", client, 10)
						setElementMoney(client, -1000, "Покупка алкоголя")
						BusinessTable[1000]["Products"] = BusinessTable[1000]["Products"] - 400
						setBusinessMoney(1000, 1000)
						addBox("Вы приобрели и выпили\nЛегкий алкогольный напиток.", client, 0, 0, 255)
					else
						addBox("В клубе недостаточно продуктов.", client, 255, 0, 0)
					end
				else
					addBox("У Вас недостаточно денег\nЧтобы приобрести это.", client, 255, 0, 0)
				end
			elseif(listitem == 2) then
				if(getElementData(client, "Money") >= 1500) then
					if(BusinessTable[1000]["Products"] >= 600) then
						triggerClientEvent(client, "onPlayerSetDrunk", client, 15)
						setElementMoney(client, -1500, "Покупка алкоголя")
						BusinessTable[1000]["Products"] = BusinessTable[1000]["Products"] - 600
						setBusinessMoney(1000, 1500)
						addBox("Вы приобрели и выпили\nСредний алкогольный напиток.", client, 0, 0, 255)
					else
						addBox("В клубе недостаточно продуктов.", client, 255, 0, 0)
					end
				else
					addBox("У Вас недостаточно денег\nЧтобы приобрести это.", client, 255, 0, 0)
				end
			elseif(listitem == 3) then
				if(getElementData(client, "Money") >= 2500) then
					if(BusinessTable[1000]["Products"] >= 1200) then
						triggerClientEvent(client, "onPlayerSetDrunk", client, 25)
						setElementMoney(client, -2500, "Покупка алкоголя")
						setBusinessMoney(1000, 2500)
						BusinessTable[1000]["Products"] = BusinessTable[1000]["Products"] - 1200
						addBox("Вы приобрели и выпили\nКрепкий алкогольный напиток.", client, 0, 0, 255)
					else
						addBox("В клубе недостаточно продуктов.", client, 255, 0, 0)
					end
				else
					addBox("У Вас недостаточно денег\nЧтобы приобрести это.", client, 255, 0, 0)
				end
			elseif(listitem == 4) then
				if(getElementData(client, "Money") >= 3500) then
					if(BusinessTable[1000]["Products"] >= 1700) then
						triggerClientEvent(client, "onPlayerSetDrunk", client, 35)
						setElementMoney(client, -3500, "Покупка алкоголя")
						BusinessTable[1000]["Products"] = BusinessTable[1000]["Products"] - 1700
						setBusinessMoney(1000, 3500)
						addBox("Вы приобрели и выпили\nОчень крепкий алкогольный напиток.", client, 0, 0, 255)
					else
						addBox("В клубе недостаточно продуктов.", client, 255, 0, 0)
					end
				else
					addBox("У Вас недостаточно денег\nЧтобы приобрести это.", client, 255, 0, 0)
				end
			end
		end
	elseif(dialogid == 144) then
		if(response == true) then
			if(getElementData(client, "BusinessID") ~= false) then
				if(toch(getElementData(client, "BusOwnID")) == 0) then
					if(toch(getElementData(client, "Money")) >= 750000) then
						local bus = toch(getElementData(client, "BusinessID"))
						if(bus > 9) then
							SED(client, "BusOwnID", toch(getElementData(client, "BusinessID")))
							BusinessTable[bus]["Owner"] = toch(getElementData(client, "AccID"))
							BusinessTable[bus]["OwnerName"] = getElementData(client, "Name")
							BusinessTable[bus]["OwnerPlayer"] = client
							BusinessTable[bus]["PayDay"] = 72
							BusinessTable[bus]["Products"] = 10000
							setElementMoney(client, -750000, "Покупка биз")
							dbExec(mysql, "UPDATE `Business` SET `Owner` = ?, `OwnerName` = ?, `PayDay` = 72, `Products` = '10000' WHERE `ID` = ?", BusinessTable[bus]["Owner"], BusinessTable[bus]["OwnerName"], bus)
							dbExec(mysql, "UPDATE `Accounts` SET `BusinessID` = ? WHERE `Name` = ?", bus, getElementData(client, "Name"))
							addBox("Поздравляем, вы приобрели бизнес №" .. bus .. ".\nНе забудьте оплатить налоги в /bmenu!", client, 60, 255, 0)
							addBox("Не забудьте заказать продукты,\nЧтобы люди могли закупаться у Вас ;).", client, 0, 255, 60)
						else
							addBox("Ошибка: Вы уже владеете бизнесом.", client, 255, 0, 0)
						end
					else
						addBox("Ошибка: У Вас недостаточно денег для покупки.", client, 255, 0, 0)
					end
				else
					addBox("Ошибка: Вы уже владеете бизнесом.", client, 255, 0, 0)
				end
			else
				addBox("Произошла ошибка, повторите попытку.", client, 255, 0, 0)
			end
		end
		removeElementData(client, "BusinessID")
	elseif(dialogid == 145) then
		if(response == true) then
			local veh = getPedOccupiedVehicle(client)
			toggleControl ( client, "accelerate", true ) 
			toggleControl ( client, "brake_reverse", true )
			toggleControl ( client, "handbrake", true )
			SED(client, "ToggleVeh", true)
			addBox("Завести/заглушить машину - ctrl\nВключить/выключить фары - alt\nЕсли Вы выйдете из авто более\nЧем на 30 секунд, экзамен будет провален.\nЧтобы включить/выключить радио,\nИспользуйте /radio.\nРучник - SPACE.", client, 0, 100, 255)
			SED(veh, "loaderPlayer", client)
			SED(client, "loaderCar", veh)
			exports.loaderWork:startWorkingCarLoader(client)
		else
			setControlState(client, "enter_exit", true)
			addBox("Вы отказались от работы.", client, 255, 0, 0)
		end
	elseif(dialogid == 146) then
		if(response == true) then
			if(listitem == 0) then
				showPlayerDialog(client, 64000, 1, "Информация о работе", "Добро пожаловать на работу грузчиком!\nСуть данной работы заключается в том, что Вам необходимо\nНосить груз из корабля к основанию порта.\nНа данной работе не используются команды.\nВам необходимо идти ходить по чекпоинтам, обозначенным на карте.\nЧтобы получить заработную плату, необходимо вернуться\nНа это же место и уволиться с работы.\n \n#009922Заработная плата: 1$ за каждый килограмм.\n#ff0000* Метки, куда и откуда необходимо носить, имеют красный цвет.", "Ок", "Отмена")
			else
				showPlayerDialog(client, 64000, 1, "Информация о работе", "Добро пожаловать на работу водителем погрузчика!\nСуть данной работы заключается в развозке ящиков по точкам порта.\nЧтобы начать работу, необходимо иметь #0033ffВТОРОЙ УРОВЕНЬ И ВОДИТЕЛЬСКИЕ ПРАВА.\nЧтобы начать работу, необходимо устроиться в раздевалке рядом.\n \n#0033ffПоследовательность действий:\n#0033ffУстраиваетесь на работу и арендуете кар #00dd44(бесплатно)\n#0033ffНаправляетесь на место разгрузки #ff3300(отмеченное в GPS)\n#0033ffЗабираете груз и отвозите в указанную точку в порту.\n \n#00dd44Аренда кара бесплатна.\n#00dd44Оплата производится по факту доставки.", "Ок", "Отмена")
			end
		end
	elseif(dialogid == 147) then
		if(response == true) then
			if(listitem == 0) then
				if(getElementData(client, "NWork") == 0) then
					SED(client, "NWork", 9)
					addBox("Вы успешно устроились на работу\nИнженером-электриком на завод.", client, 0, 255, 60)
					showPlayerDialog(source, 64000, 1, "Помощь по работе", "Добро пожаловать на завод Vice City.\nДанное предприятие занимается разработкой и поставкой всей техники по всему штату.\n#0033ddТребования для устройства на работу: 1 уровень.\n \nСуть работы заключается в том, что необходимо брать товар и перерабатывать.\n \n#0033ddПоследовательность действий\n#0033ddСначала необходимо подойти к столу и взять материал. #ff3300(Детали)\n#0033ddПосле чего необходимо подойти с материалом к столу для работы. #00dd33(Стол для работы)\n#0033ddПосле работы необходимо сдать товар на склад #ff3300(Склад готовой продукции)\n \n#00CC44Данная работа не требует вложений и аренды.", "Ок", "Отмена")
					setElementModel(client, 16)
				elseif(getElementData(client, "NWork") == 9) then
					addBox("Вы уже устроены на данной работе.\nЧтобы уволиться, выберите пункт \"Уволиться\"", client, 255, 0, 0)
				else
					addBox("Вы уже трудоустроены в другом месте.\nЧтобы устроиться здесь, необходимо уволиться\nВ том месте, где Вы устроились ранее.", client, 255, 0, 0)
				end
			else
				if(getElementData(client, "NWork") == 0) then
					addBox("Вы не устроены здесь,\nЧтобы уволиться.", client, 255, 0, 0)
				elseif(getElementData(client, "NWork") == 9) then
					if(getElementData(client, "Faction") >= 1 and getElementData(client, "Faction") <= 4) then
						setElementModel(client, getElementData(client, "WorkSkin"))
					else
						setElementModel(client, getElementData(client, "Skin"))
					end
					local object = getElementData(client, "ZavodObject")
					if(isElement(object)) then
						destroyElement(object)
					end
					removeElementData(client, "ZavodObject")
					removeElementData(client, "zState")
					SED(client, "NWork", 0)
					toggleAllControls(client, true, true, true)
					addBox("Вы успешно уволились с работы\nИнженером-электриком с завода.", client, 0, 255, 60)
					setPedAnimation(client, "BSKTBALL", "BBALL_idle_O", 1, false)
				else
					addBox("Вы трудоустроены не здесь.\nЧтобы уволиться, необходимо вернуться туда\nГде Вы устраивались ранее.", client, 255, 0, 0)
				end
			end
		end
	end
end

function onAdminTpRem( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			SEP(thePlayer, 201.3466796875, -485.4833984375, 11.240876197815)
		end
	end
end

addCommandHandler("rem", onAdminTpRem)

function getDataBase(  )
	return mysql
end

function onAdminGiveMats( thePlayer, command, fid, kol )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") == 6) then
			if(fid ~= nil) then
				fid = toch(fid)
				if(fid ~= nil) then
					if(fid > 0 and fid < 5) then
						if(kol ~= nil) then
							if(toch(kol) ~= nil) then
								kol = toch(kol)
								if(kol > 0) then
									Server["Maf" .. fid .. "Mat"] = Server["Maf" .. fid .. "Mat"] + kol
									local str = "Администратор " .. getElementData(thePlayer, "Name") .. " пополнил склад Вашей мафии на " .. kol .. " материалов."
									for i,n in pairs(IDS) do
										if(getElementData(n, "Login") == true) then
											if(getElementData(n, "Faction") == fid) then
												sendClientMessage(str, n, 255, 30, 0)
											end
										end
									end
									addBox("Вы пополнили склад " .. fid .. " мафии\nНа " .. kol .. " мат.", thePlayer, 255, 0, 0)
								else
									addBox("/givemats [id фракции (1-4)] [количество]", thePlayer, 255, 0, 0)
								end
							else
								addBox("/givemats [id фракции (1-4)] [количество]", thePlayer, 255, 0, 0)
							end
						else
							addBox("/givemats [id фракции (1-4)] [количество]", thePlayer, 255, 0, 0)
						end
					else
						addBox("/givemats [id фракции (1-4)] [количество]", thePlayer, 255, 0, 0)
					end
				else
					addBox("/givemats [id фракции (1-4)] [количество]", thePlayer, 255, 0, 0)
				end 
			else
				addBox("/givemats [id фракции (1-4)] [количество]", thePlayer, 255, 0, 0)
			end
		end
	end
end

addCommandHandler("givemats",	onAdminGiveMats)

function setElementMoney( thePlayer, money, reason, secid )
	if(isElement(thePlayer)) then
		if(getElementData(thePlayer, "Login") == true) then
			if(reason == nil) then
				reason = "Без причины"
			end
			local name = getElementData(thePlayer, "Name")
			local mon = toch(getElementData(thePlayer, "Money"))
			money = toch(money) 
			mon = mon + money
			SED(thePlayer, "Money", mon)
			setPlayerMoney(thePlayer, mon)
			dbExec(mysql, "UPDATE `Accounts` SET `Money` = ? WHERE `ID` = ? and `Name` = ?", mon, getElementData(thePlayer, "AccID"), name)
			if(secid ~= nil) then
				dbExec(mysql, "INSERT INTO `MoneyLogs` (`ID`, `PID`, `Name`, `Reason`, `Summ`, `SecID`) VALUES (?, ?, ?, ?, ?, ?)", maxquery, getElementData(thePlayer, "AccID"), getElementData(thePlayer, "Name"), reason, money, secid)
			else
				dbExec(mysql, "INSERT INTO `MoneyLogs` (`ID`, `PID`, `Name`, `Reason`, `Summ`) VALUES (?, ?, ?, ?, ?)", maxquery, getElementData(thePlayer, "AccID"), getElementData(thePlayer, "Name"), reason, money)
			end
			maxquery = maxquery + 1
		end
	end
end

function kickNotLogin( pl )
	if(pl ~= nil) then
		if(isElement(pl) == true) then
			if(getElementData(pl, "Login") ~= true) then
				kickPlayer(pl, "Not Login")
			end
		end
	end
end

function onClientLoginStart( )
	if(getElementData(client, "Login") == false) then
		local name = getPlayerName(client)
		local srt = dbPrepareString(mysql, "SELECT `ID`, `Pass`, `Ban`, `Reason` FROM `Accounts` WHERE `Name` = ?", name)
		local mj = dbQuery(mysql, srt)
		local result = dbPoll(mj, -1)
		if(result ~= false) then
			local hg = 0
			for i, a in pairs(result) do
				hg = hg + 1
				break
			end
			if(hg > 0) then
				local serial = getPlayerSerial(client)
				if(result[1]["Serial"] ~= "") then
					kickt[toch(getElementData(client, "ID"))] = setTimer(kickNotLogin, 60000, 1, client)
					SED(client, "Pass", result[1]["Pass"])
					addBox("Добро пожаловать на сервер.\n \nУ вас есть 60 секунд\nЧтобы авторизоваться.", client, 0, 0, 255)
					if(result[1]["Ban"] > 0) then
						if(result[1]["Reason"] ~= false) then
							kickPlayer(client, "Ban " .. result[1]["Ban"] .. ". Reason: " .. result[1]["Reason"])
						else
							kickPlayer(client, "Ban " .. result[1]["Ban"] .. ". Reason: Не указано.")
						end
					else
						showCursor(client, false)
						setCameraMatrix(client, 0, 0, 40, 30, 30, 35)
						showCursor(client, true)
						setPlayerHudComponentVisible(client, "radar", false)
						triggerClientEvent(client, "startChooseBrowser", client, "login")
						local id = getElementData(client, "ID")
						FloodTable[id] = 0
						SIDP(client, id)
					end
				else
					if(result[1]["Serial"] == serial) then
						kickt[toch(getElementData(client, "ID"))] = setTimer(kickNotLogin, 60000, 1, client)
						SED(client, "Pass", result[1]["Pass"])
						addBox("Добро пожаловать на сервер.\n \nУ вас есть 60 секунд\nЧтобы авторизоваться.a", client, 0, 0, 255)
						if(result[1]["Ban"] > 0) then
							kickPlayer(client, "Ban " .. result[1]["Ban"])
						else
							showCursor(client, false)
							setCameraMatrix(client, 0, 0, 40, 30, 30, 35)
							showCursor(client, true)
							setPlayerHudComponentVisible(client, "radar", false)
							triggerClientEvent(client, "startChooseBrowser", getLocalPlayer(), "login")
							local id = getElementData(client, "ID")
							FloodTable[id] = 0
							SIDP(client, id)
						end
					else
						kickPlayer(client, "Нет")
					end
				end
			else
				triggerClientEvent(client, "onRegisterUI", client)
				local id = getElementData(client, "ID")
				FloodTable[id] = 0
				SIDP(client, id)
			end
		end
		dbFree(mj)
	end
end

function MarkerHit( hitElement, matchingDimension )
	if(isElement(hitElement)) then
		if(getElementType(hitElement) == "player") then
			if(getElementData(hitElement, "VehicleDriverBus") ~= false) then
				if(getPedOccupiedVehicle(hitElement) == getElementData(hitElement, "VehicleDriverBus")) then
					local veh = getPedOccupiedVehicle(hitElement)
					if(getPedOccupiedVehicleSeat(hitElement) == 0) then
						if(getElementData(source, "Player") == hitElement) then
							setElementMoney(hitElement, 10 * coefmoney, "Автобус")
						end
					end
				end
			end
		end
	end
end


function checkBol(  )
	for i,n in pairs(IDS) do
		if(getElementData(n, "Lech") == true) then
			if(getElementInterior(n) == 1) then
				if(getElementHealth(n) < 99) then
					setElementHealth(n, getElementHealth(n) + 2)
					addBox("+2 хп", n, 0, 255, 60)
				else
					setElementHealth(n, 100)
					addBox("Вы успешно вылечились и\nМожете покинуть больницу!", n, 0, 255, 60)
					removeElementData(n, "Lech")
				end
			else
				addBox("Вы покинули больницу.\nЛечение остановлено.", n, 255, 0, 0)
				removeElementData(n, "Lech")
			end
		end
	end
end

setTimer(checkBol, 15000, 0)

function customSpawnPlayer( player, bol )
	if(isElement(player) == true) then
		SED(player, "ABB", true)
		setTimer(function ( pl )
			if(isElement(pl)) then
				removeElementData(player, "ABB")
			end
		end, 350, 1, player)
		if(getElementData(player, "PoliceJail") == false and getElementData(player, "AdminJail") == false) then
			if(bol == nil) then
				local spawnid = toch(getElementData(player, "SpawnID"))
				if(spawnid == 0) then
					if(getElementData(player, "Faction") >= 1 and getElementData(player, "Faction") <= 4) then
						local skin = toch(getElementData(player, "WorkSkin"))
						local sper = math.random(0, #StandartSpawns)
						spawnPlayer(player, StandartSpawns[sper]["x"], StandartSpawns[sper]["y"], StandartSpawns[sper]["z"], 0, skin)
						setElementRotation(player, 0, 0, StandartSpawns[sper]["rz"])
						local id = getElementData(player, "ID")
						ColorTable[id] = getElementData(player, "Faction")
						for i,n in pairs(IDS) do
							if(n ~= player) then
								if(getElementData(n, "Login") == true) then
									triggerClientEvent(n, "onChangeClist", n, id, player, ColorTable[id])
								end
							end
						end
					else
						local skin = toch(getElementData(player, "Skin"))
						local sper = math.random(0, #StandartSpawns)
						spawnPlayer(player, StandartSpawns[sper]["x"], StandartSpawns[sper]["y"], StandartSpawns[sper]["z"], 0, skin)
						setElementRotation(player, 0, 0, StandartSpawns[sper]["rz"])
						local id = getElementData(player, "ID")
						ColorTable[id] = 21
						for i,n in pairs(IDS) do
							if(n ~= player) then
								if(getElementData(n, "Login") == true) then
									triggerClientEvent(n, "onChangeClist", n, id, player, ColorTable[id])
								end
							end
						end
					end
				elseif(spawnid == 1) then
					if(getElementData(player, "House") > 0) then
						if(getElementData(player, "Faction") >= 1 and getElementData(player, "Faction") <= 4) then
							local skin = toch(getElementData(player, "WorkSkin"))
							local house = getElementData(player, "House")
							local id = getElementData(player, "ID")
							spawnPlayer(player, HouseTable[house]["hx"], HouseTable[house]["hy"], HouseTable[house]["hz"], 0, skin, HouseTable[house]["Interior"], house)
							SED(player, "Hint", house)
							SED(player, "Dom", house)
							SED(player, "gde", house)
							local id = getElementData(player, "ID")
							ColorTable[id] = getElementData(player, "Faction")
							for i,n in pairs(IDS) do
								if(n ~= player) then
									if(getElementData(n, "Login") == true) then
										triggerClientEvent(n, "onChangeClist", n, id, player, ColorTable[id])
									end
								end
							end
						else
							local skin = toch(getElementData(player, "Skin"))
							local house = getElementData(player, "House")
							local id = getElementData(player, "ID")
							spawnPlayer(player, HouseTable[house]["hx"], HouseTable[house]["hy"], HouseTable[house]["hz"], 0, skin, HouseTable[house]["Interior"], house)
							SED(player, "Hint", house)
							SED(player, "Dom", house)
							SED(player, "gde", house)
							local id = getElementData(player, "ID")
							ColorTable[id] = 21
							for i,n in pairs(IDS) do
								if(n ~= player) then
									if(getElementData(n, "Login") == true) then
										triggerClientEvent(n, "onChangeClist", n, id, player, ColorTable[id])
									end
								end
							end
						end
						local house = getElementData(player, "House")
						if(HouseTable[house]["Car1"] >= 400 or HouseTable[house]["Car2"] >= 400 or HouseTable[house]["Car1"] >= 400) then
							addBox("Чтобы войти в гараж,\nИспользуйте /garage.", player, 0, 255, 60)
						end
					else
						local skin = toch(getElementData(player, "Skin"))
						local sper = math.random(0, #StandartSpawns)
						spawnPlayer(player, StandartSpawns[sper]["x"], StandartSpawns[sper]["y"], StandartSpawns[sper]["z"], 0, skin)
						setElementRotation(player, 0, 0, StandartSpawns[sper]["rz"])
						updatePlayerAccount(player, "SpawnID", 0)
						addBox("У Вас нет дома\nСпавн изменен на стандарт.", player, 255, 0, 0)
					end
				elseif(spawnid == 2) then
					local fac = toch(getElementData(player, "Faction"))
					if(fac > 0) then
						local inter = 0
						if(FactionSpawns[fac]["Interior"] ~= nil) then
							inter = FactionSpawns[fac]["Interior"]
						end
						local rot = 0
						if(FactionSpawns[fac]["Rot"] ~= nil) then
							rot = FactionSpawns[fac]["Rot"]
						end
						spawnPlayer(player, FactionSpawns[fac]["x"], FactionSpawns[fac]["y"], FactionSpawns[fac]["z"], rot, getElementData(player, "WorkSkin"), inter)
						if(getElementData(player, "Faction") == 8) then
							SIDP(player, 1)
						end
						local id = getElementData(player, "ID")
						ColorTable[id] = getElementData(player, "Faction")
						for i,n in pairs(IDS) do
							if(n ~= player) then
								if(getElementData(n, "Login") == true) then
									triggerClientEvent(n, "onChangeClist", n, id, player, ColorTable[id])
								end
							end
						end
					else
						local skin = toch(getElementData(player, "Skin"))
						local sper = math.random(0, #StandartSpawns)
						setElementModel(player, skin)
						spawnPlayer(player, StandartSpawns[sper]["x"], StandartSpawns[sper]["y"], StandartSpawns[sper]["z"], 0, skin)
						setElementRotation(player, 0, 0, StandartSpawns[sper]["rz"])
						updatePlayerAccount(player, "SpawnID", 0)
						addBox("Вы больше не во фракции\nСпавн изменен на стандарт.", player, 255, 0, 0)
						local id = getElementData(player, "ID")
						ColorTable[id] = 21
						for i,n in pairs(IDS) do
							if(n ~= player) then
								if(getElementData(n, "Login") == true) then
									triggerClientEvent(n, "onChangeClist", n, id, player, ColorTable[id])
								end
							end
						end
					end
				end
			else
				if(getElementData(player, "Faction") ~= false) then
					local fac = toch(getElementData(player, "Faction"))
					if(fac >= 1 and fac <= 4) then
						local skin = toch(getElementData(player, "WorkSkin"))
						spawnPlayer(player, -1242.177734375, -649.580078125, 999.5703125, 180, skin, 1)
						local id = getElementData(player, "ID")
						ColorTable[id] = getElementData(player, "Faction")
						for i,n in pairs(IDS) do
							if(n ~= player) then
								if(getElementData(n, "Login") == true) then
									triggerClientEvent(n, "onChangeClist", n, id, player, ColorTable[id])
								end
							end
						end
					else
						local skin = toch(getElementData(player, "Skin"))
						spawnPlayer(player, -1242.177734375, -649.580078125, 999.5703125, 180, skin, 1)
					end
					SED(player, "Lech", true)
				else
					kickPlayer(player, "error")
				end
			end
		else
			if(getElementData(player, "PoliceJail") ~= false) then
				if(getElementData(player, "PoliceJail") > 0) then
					spawnPlayer(player, 391.4736328125, -507.255859375, 9.362735748291, 0, getElementData(player, "Skin"), 2)
					SIDP(player, 1)
					SET(player, 2)
					addBox("Вы оказались в тюрьме\nОсталось ждать " .. getElementData(player, "PoliceJail") .. " сек.", player, 255, 0, 0)
				end
			elseif(getElementData(player, "AdminJail") > 0) then
				spawnPlayer(player, 391.4736328125, -507.255859375, 9.362735748291, 0, getElementData(player, "Skin"), 2)
				SIDP(player, 3)
				SET(player, 2)
				addBox("Вы оказались в тюрьме\nОсталось ждать " .. getElementData(player, "AdminJail") .. " сек.", player, 255, 0, 0)
			end
		end
	end
end

function onPlayerGiveHeal( thePlayer, command, id, summ )
	if(getElementData(thePlayer, "Login") == true) then
		if(summ ~= nil) then
			if(toch(summ) ~= nil) then
				summ = toch(summ)
				if(getElementData(thePlayer, "Aptechka") ~= false) then
					if(getElementData(thePlayer, "Aptechka") >= summ) then
						if(id ~= nil) then
							if(toch(id) ~= nil) then
								id = toch(id)
								if(IDS[id] ~= nil) then
									local secPlayer = IDS[id]
									if(getElementData(secPlayer, "Login") == true) then
										local x, y, z = getElementPosition(thePlayer)
										local x1, y1, z1 = getElementPosition(secPlayer)
										local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
										if(dist < 6) then
											if(getElementData(secPlayer, "Aptechka") + summ <= 6) then
												SED(secPlayer, "Aptechka", getElementData(secPlayer, "Aptechka") + summ)
												SED(thePlayer, "Aptechka", getElementData(thePlayer, "Aptechka") - summ)
												if(getElementData(thePlayer, "Aptechka") == 0) then
													removeElementData(thePlayer, "Aptechka")
												end
												addBox(getElementData(thePlayer, "Name") .. "[" .. getElementData(thePlayer, "ID") .. "] передал\nВам " .. summ .. " шт аптечек." , secPlayer, 0, 255, 60)
												addBox("Вы передали " .. getElementData(secPlayer, "Name") .. " [" .. getElementData(secPlayer, "ID") .. "]\nАптечки: " .. summ .. " шт.", thePlayer, 0, 255, 60)
											else
												addBox("У данного игрока полный инвентарь.", thePlayer, 255, 0, 0)
											end
										else
											addBox("Игрок слишком далеко", thePlayer, 255, 0, 0)
										end
									else
										addBox("Игрок не найден.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Игрок не найден.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: /giveheal [id] [кол-во]", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: /giveheal [id] [кол-во]", thePlayer, 255, 0, 0)
						end
					else
						addBox("У вас нет столько аптечек.", thePlayer, 255, 0, 0)
					end
				else
					addBox("У вас нет столько аптечек.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: /giveheal [id] [кол-во]", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: /giveheal [id] [кол-во]", thePlayer, 255, 0, 0)
		end
	end
end

function onTpGunMag( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			SEP(thePlayer, -56.0205078125, -1481.9775390625, 10.402487754822)
		end
	end
end

function onPlayerCheckTime( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		local times = getRealTime()
		local hour = times.hour
		if(hour < 10) then
			hour = "0" .. hour
		end
		local minute = times.minute
		if(minute < 10) then
			minute = "0" .. times.minute
		end
		local second = times.second
		if(second < 10) then
			second = "0" .. second
		end
		local monthday = times.monthday
		if(monthday < 10) then
			monthday = "0" .. monthday
		end
		local month = times.month + 1
		if(month < 10) then
			month = "0" .. month
		end
		sendClientMessage("Настоящее время: " .. hour .. ":" .. minute .. ":" .. second .. ". Дата: " .. monthday .. "." .. month .. "." .. times.year + 1900 .. ".", thePlayer, 255, 0, 0)
	end
end

function checkMute( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Mute") > 0) then
			local mutetime = getElementData(thePlayer, "Mute")
			local mt = math.floor(mutetime / 60)
			if(mt < 10) then
				mt = "0" .. mt
			end
			local ms = math.floor(mutetime % 60)
			if(ms < 10) then
				ms = "0" .. ms
			end
			addBox("Осталось " .. mt .. ":" .. ms .. ".", thePlayer, 255, 255, 0)
		else
			addBox("У Вас нет затычки.", thePlayer, 255, 255, 0)
		end
	end
end

addCommandHandler("mutetime", checkMute)

function onPlayerOffSetRank( thePlayer, command, name, rank )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") > 0) then
			if(getElementData(thePlayer, "Rank") > 8) then
				if(name ~= nil) then
					if(rank ~= nil) then
						rank = toch(rank)
						if(rank ~= nil) then
							if(rank > 0 and rank < 10) then
								if(string.len(name) > 3 and string.len(name) < 21) then
									local query = dbQuery(mysql, "SELECT `Rank`, `Name`, `Faction` FROM `Accounts` WHERE `Name` = ?", name)
									local result = dbPoll(query, -1)
									if(result ~= nil) then
										if(result[1] ~= nil) then
											if(result[1]["Rank"] ~= nil) then
												if(getElementData(thePlayer, "Faction") == result[1]["Faction"]) then
													if(getElementData(thePlayer, "Rank") > result[1]["Rank"]) then
														dbExec(mysql, "UPDATE `accounts` SET `Rank` = ? WHERE `name` = ?", rank, name)
														addBox("Вы успешно изменили ранг " .. name .. "\nНа " .. rank .. ".", thePlayer, 255, 0, 0)
														for i,n in pairs(IDS) do
															if(getElementData(n, "Login") == true) then
																if(string.lower(getElementData(n, "Name")) == string.lower(name)) then
																	addBox("Ваш ранг изменен на " .. rank .. ".", n, 255, 0, 0)
																	SED(n, "Rank", rank)
																	break
																end
															end
														end
													else
														addBox("Ранг указанного Вами игрока\nВыше или равен Вашему.", thePlayer, 255, 0, 0)
													end
												else
													addBox("Данный игрок не находится\nВ вашей организации.", thePlayer, 255, 0, 0)
												end
											else
												addBox("Данный игрок не найден.", thePlayer, 255, 0, 0)
											end
										else
											addBox("Данный игрок не найден.", thePlayer, 255, 0, 0)
										end
									else
										addBox("Данный игрок не найден.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Имя введено некорректно.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Если Вы хотите уволить игрока,\nИспользуйте /offuninvite.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: /offsetrank [имя] [ранг 0-9]", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: /offsetrank [имя] [ранг 0-9]", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: /offsetrank [имя] [ранг 0-9]", thePlayer, 255, 0, 0)
				end
			end
		end
	end
end

addCommandHandler("offsetrank",	onPlayerOffSetRank)
addCommandHandler("timestamp",	onPlayerCheckTime)
addCommandHandler("gunmag", onTpGunMag)
addCommandHandler("giveheal", onPlayerGiveHeal)

function tpAutobus( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			SEP(thePlayer, -182.03515625, -473.578125, 10.589839935303)
			SET(thePlayer, 0)
			SIDP(thePlayer, 0)
		end
	end
end

function tpAutopark( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			SEP(thePlayer, -10, -1000, 10)
		end
	end
end

function onPlayerGov( thePlayer, command, ... )
	local rank = toch(getElementData(thePlayer, "Rank"))
	local fact = toch(getElementData(thePlayer, "Faction"))
	local arg = {...}
	local parameterCount = #arg
	if(fact ~= 0) then
		local str = "Гос. новости: "
		local string = table.concat( arg, " " )
		str = str .. " " .. string .. " | " .. FactionName[fact][2] .. " " ..  getElementData(thePlayer, "Name") .. " [" .. getElementData(thePlayer, "ID") .. "]"
		if(parameterCount > 0) then
			if(fact > 4 and rank > 8) then
				for d, player in pairs(getElementsByType("player")) do
					if(getElementData(player, "Login") ~= nil and getElementData(player, "Login") ~= false) then
						sendClientMessage( str, player, 0, 220, 220)
					end
				end
			else
				addBox("Ошибка: У Вас нет доступа к этой команде.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: Вы ничего не ввели!", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerCreateHouse(thePlayer, command, Price)
	if(getElementData(thePlayer, "Login") ~= false and getElementData(thePlayer, "Login") ~= nil) then
		if(getElementData(thePlayer, "Admin") ~= nil and getElementData(thePlayer, "Admin") ~= false) then
			if(getElementData(thePlayer, "Admin") == 6) then
				if(Price ~= nil) then
					if(toch(Price) > 0) then
						local x, y, z = getElementPosition(thePlayer)
						local max = table.maxn(HouseTable)
						max = max + 1
						HouseTable[max] = {}
						HouseTable[max]["x"] 		= x
						HouseTable[max]["y"] 		= y
						HouseTable[max]["z"] 		= z
						HouseTable[max]["Interior"] = 3
						HouseTable[max]["PID"] 		= 0
						HouseTable[max]["Price"] 	= Price
						HouseTable[max]["ID"]		= max
						HouseTable[max]["Pickup"] 	= createPickup(x, y, z, 3, 1273, 0)
						HouseTable[max]["Blip"]		= createBlip(x, y, z, 31, 2, 0, 0, 0, 0, 0, 250)
						HouseTable[max]["hrx"] = 0
						HouseTable[max]["Car1"] = 0
						HouseTable[max]["Car2"] = 0
						HouseTable[max]["Car3"] = 0
						HouseTable[max]["Car4"] = 0
						HouseTable[max]["Color1"] = 0
						HouseTable[max]["Color2"] = 0
						HouseTable[max]["Color3"] = 0
						HouseTable[max]["Color4"] = 0
						HouseTable[max]["PayDay"] = 24
						HouseTable[max]["Open"] = true
						dbExec(mysql, "INSERT into `House` (`ID`, `x`, `y`, `z`, `Interior`, `PID`, `Price`, `PName`, `Car1`, `Car2`, `Car3`, `Car4`, `ColorID1`, `ColorID2`, `ColorID3`, `ColorID4`) VALUES (?, ?, ?, ?, 3, 0, ?, '', 0, 0, 0, 0, 0, 0, 0, 0)", max, x, y, z, Price)
						SED(HouseTable[max]["Pickup"], "ID", max)
						HouseTable[max]["hx"] = 1317.6494140625
						HouseTable[max]["hy"] = -99.7177734375
						HouseTable[max]["hz"] = 1001
						HouseTable[max]["hrx"] = 0
						exitFromHouse[max] = createPickup(1313.46484375, -100.23046875, 1001.0013427734, 3, 1318, 0)
						SET(exitFromHouse[max], 3)
						SIDP(exitFromHouse[max], max)
						SED(exitFromHouse[max], "ExitFromHouse", true)
						local pckExitGarage = createPickup(-1291.740234375, -696.0654296875, 999.578125, 3, 1318, 0)
						SET(pckExitGarage, 8)
						SIDP(pckExitGarage, max)
						SED(pckExitGarage, "pckExitGarage", true)
					else
						addBox("Ошибка: Цена дома указана некорректно.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: Вы не указали цену дома.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: Вам недоступна данная команда.", thePlayer, 255, 0, 0)
			end
		else
		end
	else
	end
end

function fuelBuy( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getPedOccupiedVehicle(thePlayer) ~= nil and getPedOccupiedVehicle(thePlayer) ~= false) then
			if(getPedOccupiedVehicleSeat(thePlayer) == 0) then
				local x, y, z = getElementPosition(getPedOccupiedVehicle(thePlayer))
				local dist = 0
				local veh = getPedOccupiedVehicle(thePlayer)
				local model = getElementModel(veh)
				if(model ~= 481) then
					if(getElementData(veh, "Engine") == false) then
						for i, n in pairs(FuelStation) do
							dist = getDistanceBetweenPoints3D(x, y, z, FuelStation[i]["x"], FuelStation[i]["y"], FuelStation[i]["z"])
							if(dist < 15) then
								local station = FuelStation[i]["Zp"]
								if(BusinessTable[station]["Owner"] == 0) then
									local price = 15
									showPlayerDialog(thePlayer, 49, 2, "Заправка транспортного средства", "Введите количество литров\nКоторое Вы хотите заправить.\nЦена за литр: " .. price .. "$", "Заправить", "Отмена")
									SED(thePlayer, "Fstation", station)
								else
									if(BusinessTable[station]["Open"] == nil or BusinessTable[station]["Open"] == true) then
										local price = BusinessTable[station]["P1"]
										showPlayerDialog(thePlayer, 49, 2, "Заправка транспортного средства", "Введите количество литров\nКоторое Вы хотите заправить.\nЦена за литр: " .. price .. "$", "Заправить", "Отмена")
										SED(thePlayer, "Fstation", station)
									elseif(BusinessTable[station]["Open"] == false) then
										addBox("Данная заправка закрыта.", thePlayer, 255, 0, 0)
									end
								end
								break
							end
						end
					else
						addBox("Прежде, чем заправиться,\nПожалуйста, заглушите авто.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: Вы не можете этого сделать.", thePlayer, 255, 0, 0)
				end
			end
		end
	end
end

function healMedPlayer( thePlayer, command, id, money)
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") == 7) then
			if(toch(id) ~= false and toch(id) ~= nil) then
				id = toch(id)
				if(IDS[id] ~= nil and IDS[id] ~= false) then
					local secPlayer = IDS[id]
					if(toch(money) ~= nil) then
						money = toch(money)
						if(money >= 50 and money <= 5000) then
							local secMoney = toch(getElementData(secPlayer, "Money"))
							if(secMoney >= money) then
								if(getElementData(secPlayer, "Login") == true) then
									local x, y, z = getElementPosition(thePlayer)
									local x1, y1, z1 = getElementPosition(secPlayer)
									local veh = getPedOccupiedVehicle(thePlayer)
									local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
									if(x > -1265 and x < -1240 and y > -659 and y < -648) then
										if(dist < 10) then
											if(Server["HospitalGruz"] >= 25) then
												SED(secPlayer, "HealPlayer", thePlayer)
												SED(secPlayer, "HealMoney", money)
												addBox("Вы предложили " .. getElementData(secPlayer, "Name") .. "\nВылечиться за " .. money .. "$.", thePlayer, 0, 60, 255)
												showPlayerDialog(secPlayer, 52, 1, "Прохождение лечения", "Врач " .. getElementData(thePlayer, "Name") .. " хочет провести Вам лечение.\nСтоимость услуги: " .. money .. "$", "Принять", "Отмена")
											else
												addBox("На складе недостаточно материалов.", thePlayer, 255, 0, 0)
											end
										else
											addBox("Ошибка: Этот игрок слишком далеко от вас.", thePlayer, 255, 0, 0)
										end
									elseif(veh ~= false) then
										if(getElementData(veh, "MedicID") ~= false) then
											if(dist < 10) then
												if(Server["HospitalGruz"] >= 25) then
													SED(secPlayer, "HealPlayer", thePlayer)
													SED(secPlayer, "HealMoney", money)
													addBox("Вы предложили " .. getElementData(secPlayer, "Name") .. "\nВылечиться за " .. money .. "$.", thePlayer, 0, 60, 255)
													showPlayerDialog(secPlayer, 52, 1, "Прохождение лечения", "Врач " .. getElementData(thePlayer, "Name") .. " хочет провести Вам лечение.\nСтоимость услуги: " .. money .. "$", "Принять", "Отмена")
												else
													addBox("На складе недостаточно материалов.", thePlayer, 255, 0, 0)
												end
											else
												addBox("Ошибка: Этот игрок слишком далеко от вас.", thePlayer, 255, 0, 0)
											end
										else
											addBox("Вы должны находиться в больнице\nЧтобы вылечить другого игрока.", thePlayer, 255, 0, 0)
										end
									else
										addBox("Вы должны находиться в больнице\nЧтобы вылечить другого игрока.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Ошибка: Данный игрок не авторизован.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: У игрока недостаточно денег\nЧтобы совершить оплату данной услуги.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: Сумма может быть\nМежду 50$ и 5000$ соответственно.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: Вы не ввели сумму.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: Вы ввели некорректный ID игрока.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: Вы ввели некорректный ID игрока.", thePlayer, 255, 0, 0)
			end
		end
	end
end

function suspectPolicePlayer( thePlayer, command, ... )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") == 8) then
			if(getElementData(thePlayer, "Rank") >= 3) then
				local arg = {...}
				local parameterCount = #arg
				local tab = {}
				local id = arg[1]
				if(toch(id) ~= nil) then
					id = toch(id)
					id = math.round(id)
					local secPlayer = IDS[id]
					if(IDS[id] ~= nil) then
						if(getElementData(secPlayer, "Login") == true) then
							local x, y, z = getElementPosition(thePlayer)
							local x1, y1, z1 = getElementPosition(secPlayer)
							local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
							if(getElementData(thePlayer, "Faction") ~= getElementData(secPlayer, "Faction")) then
								if(dist < 200) then
									if(getElementData(secPlayer, "Wanted") ~= nil and getElementData(secPlayer, "Wanted") ~= false) then
										local WL = toch(getElementData(secPlayer, "Wanted"))
										if(WL < 6) then
											local num = arg[2]
											num = toch(num)
											if(num ~= nil) then
												if(num > 0 and num < 7) then
													WL = WL + num
													if(WL > 6) then
														WL = 6
													end
													local str = table.concat(arg, " ", 3)
													if(string.len(str) > 0) then
														addBox("Вы были объявлены в розыск\nПолицейским " .. getElementData(thePlayer, "Name") .. ".\nУровень розыска: " .. WL .. ".", secPlayer, 255, 255, 0)
														addBox("Причина: " .. str, secPlayer, 255, 255, 0)
														addBox("Вы объявили в розыск " .. getElementData(secPlayer, "Name") .. ".\nУровень розыска: " .. WL .. ".", thePlayer, 255, 255, 0)
														addBox("Причина: " .. str,thePlayer, 255, 255, 0)
														SED(secPlayer, "Wanted", WL)
														setPlayerWantedLevel(secPlayer, WL)
														dbExec(mysql, "UPDATE `Accounts` SET `Wanted` = ? WHERE `Name` = ?", WL, getElementData(secPlayer, "Name"))
													else
														addBox("Вы не указали причину.", thePlayer, 255, 0, 0)
													end
												else
													addBox("Ошибка: Уровень розыска\nМожет быть более 1 и менее 6.", thePlayer, 255, 0, 0)
												end
											else
												addBox("Ошибка: /su [id] [ур] [причина]", thePlayer, 255, 0, 0)
											end
										else
											addBox("У данного игрока максимальный уровень розыска!", thePlayer, 255, 0, 0)
										end
									else
										local WL = 1
										addBox("Ваш уровень розыска увеличен: " .. WL, secPlayer, 255, 0, 0)
										SED(secPlayer, "Wanted", WL)
										setPlayerWantedLevel(secPlayer, WL)
									end
								else
									addBox("Ошибка: Данный игрок слишком далеко от Вас!", thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: Вы не можете объявить\nВ розыск полицейского!", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: Данный игрок не авторизован.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: Данный игрок не найден.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: ID введён некорректно", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: Данная команда доступна\nС 3 ранга.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: Данная команда Вам недоступна.", thePlayer, 255, 0, 0)
		end
	end
end

function tempLeader( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true) then
		if(toch(getElementData(thePlayer, "Admin")) > 3) then
			if(id ~= nil) then
				if(toch(id) ~= nil and toch(id) ~= false) then
					id = toch(id)
					if(id > 0 and id <= 9) then
						id = toch(id)
						id = math.round(id)
						SED(thePlayer, "Faction", id)
						SED(thePlayer, "Rank", 10)
						addBox("Вы назначили себя лидером " .. id .. " id фракции.", thePlayer, 0, 60, 255)
						SED(thePlayer, "SpawnID", 2)
						updatePlayerAccount(thePlayer, "SpawnID", 2)
						addBox("Начальная точка: фракция", thePlayer, 0, 255, 100)
						local mrk = getElementData(thePlayer, "mrkArmyGruz")
						if(isElement(mrk) == true) then
							removeEventHandler("onMarkerHit", mrk, onMrkArmyGruzHit)
							local blp = getElementData(thePlayer, "blpArmyGruz")
							destroyElement(mrk)
							destroyElement(blp)
							removeElementData(thePlayer, "mrkArmyGruz")
							removeElementData(thePlayer, "blpArmyGruz")
						end
						local id = getElementData(thePlayer, "ID")
						ColorTable[id] = getElementData(thePlayer, "Faction")
						for i,n in pairs(IDS) do
							if(n ~= thePlayer) then
								if(getElementData(n, "Login") == true) then
									triggerClientEvent(n, "onChangeClist", n, id, thePlayer, ColorTable[id])
								end
							end
						end
					else
						SED(thePlayer, "Faction", 0)
						SED(thePlayer, "Rank", 0)
						addBox("Вы сняли себя с временной лидерки.", thePlayer, 0, 60, 255)
						local mrk = getElementData(thePlayer, "mrkArmyGruz")
						if(isElement(mrk) == true) then
							removeEventHandler("onMarkerHit", mrk, onMrkArmyGruzHit)
							local blp = getElementData(thePlayer, "blpArmyGruz")
							destroyElement(mrk)
							destroyElement(blp)
							removeElementData(thePlayer, "mrkArmyGruz")
							removeElementData(thePlayer, "blpArmyGruz")
						end
						local id = getElementData(thePlayer, "ID")
						ColorTable[id] = 21
						for i,n in pairs(IDS) do
							if(n ~= thePlayer) then
								if(getElementData(n, "Login") == true) then
									triggerClientEvent(n, "onChangeClist", n, id, thePlayer, ColorTable[id])
								end
							end
						end
					end
				else
					addBox("Ошибка: Вы ввели некорректный ID фракции.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: Вы не ввели ID фракции.", thePlayer, 255, 0, 0)
			end
		end
	end
end

function onPlayerCommand( command )
	local tablo = {
		[1]	=	"checkall",
		[2]	=	"info",
		[3]	=	"list",
		[4]	=	"refresh",
		[5]	=	"refreshall",
		[6]	=	"restart",
		[7]	=	"start",
		[8]	=	"stop",
		[9]	=	"stopall",
		[10]=	"upgrade",
		[11]	=	"aclrequest",
		[13]	=	"aexec",
		[14]	=	"addaccount",
		[15]	=	"chgpass",
		[16]	=	"delaccount",
		[18]	=	"ase",
		[19]	=	"debugdb",
		[21]	=	"loadmodule",
		[22]	=	"unloadmodule",
		[23]	=	"reloadmodule",
		[24]	=	"openports",
		[25]	=	"shutdown",
		[26]	=	"sver",
		[29]	=	"whois",
		[30]	=	"whowas",
		[31]	=	"ver",
		[33]	=	"chgmypass",
		[34]	=	"debugscript",
		[35]	=	"login",
		[36]	=	"logout",
		[37]	=	"me",
		[38]	=	"msg",
		[39]	=	"nick",
	}
	for i,n in pairs(tablo) do
		if(string.find(command, n) ~= nil) then
			if(n ~= "me") then
				if(command == "blacklist" or command == "animlist") then
					return
				elseif(i == 3 and command ~= "blacklist" and command ~= "animlist") then
					cancelEvent()
				elseif(i ~= 34) then
					cancelEvent()
				else
					if(getElementData(source, "Admin") ~= 6) then
						cancelEvent()
					end
				end
			end
		end
	end
end

function onPlayerAdvert( thePlayer, command, ... )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Lvl") > 1) then
			if(getElementData(thePlayer, "PhoneNumber") > 0) then
				if(getElementData(thePlayer, "Money") >= 50) then
					if(getElementData(thePlayer, "BlockAd") == false) then
						SED(thePlayer, "BlockAd", true)
						local arg = {...}
						local a = #arg
						local stri = table.concat( arg, " " )
						if(a > 0) then
							SED(thePlayer, "TextInAd", table.concat(arg, " "))
							showPlayerDialog(thePlayer, 124, 1, "Подача объявления", "Действительно ли Вы хотите подать объявление?\nСтоимость данной услуги: 50$.\nТекст: " .. table.concat(arg, " "), "Принять", "Отмена")
						else
							addBox("Ошибка: Вы не ввели текст для объявления", thePlayer, 255, 0, 0)
						end
					else
						addBox("Пожалуйста, подождите одну минуту.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: У Вас недостаточно денег.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: Чтобы сделать объявление,\nНеобходимо купить телефон\nВ любом 24/7.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: Для данного действия\nНеобходим минимум 2 уровень.", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerAds( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") == 6) then
			local iter = 0
			local str = ""
			for i, p in pairs(AdvertTable) do
				iter = iter + 1
				str = str  .. "\n[" .. i .. "]: " .. AdvertTable[i]["String"]
			end
			if(iter > 0) then
				showPlayerDialog(thePlayer, 64000, 1, "Последние объявления на подачу.", str, "Ок", "Отмена")
			else
				showPlayerDialog(thePlayer, 64000, 1, "Последние объявления на подачу.", "Последних объявлений нет", "Ок", "Отмена")
			end
		else
			addBox("Ошибка: У вас нет доступа к данной команде.", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerEditAd( thePlayer, command, id, ... )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") == 6) then
			if(getElementData(thePlayer, "Rank") > 2) then
				if(toch(id) ~= false and toch(id) ~= nil) then
					local x, y, z = getElementPosition(thePlayer)
					local veh = getPedOccupiedVehicle(thePlayer)
					if(x >= -562.75 and x <=-506.216 and y >= 767.198 and y <= 818.145 and z >= 95 and z <= 98) then
						id = toch(id)
						id = math.round(id)
						if(type(AdvertTable[id]) == "table") then
							local arg = { ... }
							local a = #arg 
							local number1 = math.floor(AdvertTable[id]["Phone"] / 1000)
							local number2 = math.fmod(AdvertTable[id]["Phone"], 1000)
							if(number2 < 100) then
								if(number2 < 10) then
									number2 = "00" .. number2
								else
									number2 = "0" .. number2
								end
							end
							number = number1 .. "-" .. number2
							if(a > 0) then
								local str1 = "Объявление: " .. table.concat(arg, " ") .. " | " .. AdvertTable[id]["Name"] .. " (Тел: "  .. number .. ")"
								local str2 = "Опубликовал " .. FactionRankName[6][toch(getElementData(thePlayer, "Rank"))] .. " " .. FactionName[6][1] .. " " .. getElementData(thePlayer, "Name")
								for i, p in pairs(IDS) do
									if(getElementData(p, "Login") == true) then
										sendClientMessage(str1, p, 30, 180, 30)
										sendClientMessage(str2, p, 30, 180, 30)
									end
								end
								AdvertTable[id] = nil
								setElementMoney(thePlayer, 50, "Обработка объявления")
							end
						else
							addBox("Ошибка: Вы ввели некорректный ID объявления", thePlayer, 255, 0, 0)
						end
					elseif(veh ~= false) then
						if(getElementData(veh, "VCNCar") ~= false) then
							id = toch(id)
							id = math.round(id)
							if(type(AdvertTable[id]) == "table") then
								local arg = { ... }
								local a = #arg 
								local number1 = math.floor(AdvertTable[id]["Phone"] / 1000)
								local number2 = math.fmod(AdvertTable[id]["Phone"], 1000)
								if(number2 < 100) then
									if(number2 < 10) then
										number2 = "00" .. number2
									else
										number2 = "0" .. number2
									end
								end
								number = number1 .. "-" .. number2
								if(a > 0) then
									local str1 = "Объявление: " .. table.concat(arg, " ") .. " | " .. AdvertTable[id]["Name"] .. " (Тел: "  .. number .. ")"
									local str2 = "Опубликовал " .. FactionRankName[6][toch(getElementData(thePlayer, "Rank"))] .. " " .. FactionName[6][1] .. " " .. getElementData(thePlayer, "Name")
									for i, p in pairs(IDS) do
										if(getElementData(p, "Login") == true) then
											sendClientMessage(str1, p, 30, 180, 30)
											sendClientMessage(str2, p, 30, 180, 30)
										end
									end
									AdvertTable[id] = nil
									setElementMoney(thePlayer, 50, "Обработка объявления")
								end
							else
								addBox("Ошибка: Вы ввели некорректный ID объявления", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: Вы должны находиться в офисе VCN\nЛибо в рабочем автомобиле.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: Вы должны находиться в офисе VCN\nЛибо в рабочем автомобиле.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: Вы ввели некорректный ID объявление", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: У вас нет доступа к этой команде", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: У вас нет доступа к этой команде", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerDeleteAd( thePlayer, command, id, ... )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") == 6) then
			if(getElementData(thePlayer, "Rank") > 2) then
				if(toch(id) ~= false and toch(id) ~= nil) then
					id = toch(id)
					id = math.round(id)
					if(type(AdvertTable[id]) == "table") then
						local arg = { ... }
						local a = #arg 
						if(a > 0) then
							local string1 = FactionRankName[6][toch(getElementData(thePlayer, "Rank"))] .. " " .. FactionName[6][1] .. " " ..  getElementData(thePlayer, "Name") .. " отменил Ваше объявление."
							local string2 = "Причина: " .. table.concat(arg, " ")
							local string3 = FactionRankName[6][toch(getElementData(thePlayer, "Rank"))] .. " " .. FactionName[6][1] .. " " ..  getElementData(thePlayer, "Name") .. " отменил объявление (id " .. id.. ")"
							if(isElement(AdvertTable[id]["Player"])) then
								sendClientMessage(string1,AdvertTable[id]["Player"], 220, 220, 0)
								sendClientMessage(string2,AdvertTable[id]["Player"], 220, 220, 0)
							end
							for i, p in pairs(IDS) do
								if(getElementData(IDS[i], "Login") == true) then
									if(getElementData(IDS[i], "Faction") == 6) then
										sendClientMessage(string3, IDS[i], 220, 220, 0)
										sendClientMessage(string2, IDS[i], 220, 220, 0)
									end
								end
							end
							AdvertTable[id] = nil
						else
							addBox("Ошибка: /addel [id] [причина]", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: Такого объявления не существует", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: ID объявление введено некорректно", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: У Вас нет доступа к этой команде", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: У вас нет доступа к данной команде", thePlayer, 255, 0, 0)
		end
	end
end

function onTaxiPark( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 1) then
			SEP(thePlayer, -204.7705078125, -1421.9658203125, 8.0708332061768)
		end
	end
end

function onPlayerPay( thePlayer, command, id, summ )
	if(getElementData(thePlayer, "Login") == true) then
		if(toch(id) ~= nil and toch(id) ~= false) then
			if(toch(summ) ~= nil and toch(summ) ~= false) then
				id = toch(id)
				id = math.round(id)
				summ = toch(summ)
				summ = math.round(summ)
				if(summ > 0) then
					if(IDS[id] ~= nil) then
						if(getElementData(thePlayer, "Lvl") > 1) then
							if(getElementData(IDS[id], "Login") == true) then
								local pl = IDS[id]
								if(thePlayer ~= pl) then
									local x, y, z = getElementPosition(thePlayer)
									local x1, y1, z1 = getElementPosition(pl)
									local dist = getDistanceBetweenPoints3D(x,y,z, x1, y1, z1)
									if(dist < 10) then
										if(summ <= 10000) then
											if(getElementData(thePlayer, "Money") - summ > 0) then
												if(getElementData(thePlayer, "Lvl") > 1) then
													setElementMoney(thePlayer, summ * (-1), "Передано")
													setElementMoney(pl, summ, "Получено")
													addBox(getElementData(thePlayer, "Name") .. " передал Вам " .. summ .. "$", pl, 0, 220, 40)
													addBox("Вы передали " .. getElementData(pl, "Name") .. " " .. summ .. "$", thePlayer, 0, 220, 40)
												else
													if(summ <= 100) then
														setElementMoney(thePlayer, summ * (-1), "Передано")
														setElementMoney(pl, summ, "Получено")
														addBox(getElementData(thePlayer, "Name") .. " передал Вам " .. summ .. "$", pl, 0, 220, 40)
														addBox("Вы передали " .. getElementData(pl, "Name") .. " " .. summ .. "$", thePlayer, 0, 220, 40)
													else
														addBox("Ошибка: Вы не передать более 100 долларов\nНа 1 уровне.", thePlayer, 255, 0, 0)
													end
												end
											else
												addBox("Ошибка: У Вас недостаточно денег для передачи.", thePlayer, 255, 0, 0)
											end
										else
											addBox("Ошибка: Сумма не может быть более 10.000$.", thePlayer, 255, 0, 0)
										end
									else
										addBox("Ошибка: Данный игрок слишком далеко от Вас!", thePlayer, 255, 0, 0)
									end
								else
									addBox("Ошибка: Вы не можете передать\nДеньги самому себе.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: Данный игрок не авторизован", thePlayer, 255, 0, 0)
							end
						elseif(getElementData(thePlayer, "Lvl") == 1) then
							if(getElementData(IDS[id], "Login") == true) then
								local pl = IDS[id]
								if(thePlayer ~= pl) then
									local id = getElementData(thePlayer, "ID")
									local x, y, z = getElementPosition(thePlayer)
									local x1, y1, z1 = getElementPosition(pl)
									local dist = getDistanceBetweenPoints3D(x,y,z, x1, y1, z1)
									if(PayTimer[id] == true) then
										PayTimer[id] = false
										setTimer(function ( igrok, ed )
											if(IDS[ed] == igrok) then
												PayTimer[ed] = true
											end
										end, 5 * 60 * 1000, 1, thePlayer, id)
										if(dist < 10) then
											if(getElementData(thePlayer, "Money") - summ > 0) then
												if(summ <= 100) then
													setElementMoney(thePlayer, summ * (-1), "Передано")
													setElementMoney(pl, summ, "Получено")
													addBox(getElementData(thePlayer, "Name") .. " передал Вам " .. summ .. "$", pl, 0, 220, 40)
													addBox("Вы передали " .. getElementData(pl, "Name") .. " " .. summ .. "$", thePlayer, 0, 220, 40)
												else
													addBox("Ошибка: Вы не передать более 100 долларов\nНа 1 уровне.", thePlayer, 255, 0, 0)
												end
											else
												addBox("Ошибка: У Вас недостаточно денег для передачи.", thePlayer, 255, 0, 0)
											end
										else
											addBox("Ошибка: Данный игрок слишком далеко от Вас!", thePlayer, 255, 0, 0)
										end
									else
										addBox("Передавать деньги можно раз в 5 минут!", thePlayer, 255, 0, 0)
									end
								else
									addBox("Ошибка: Вы не можете передать деньги самому себе.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: Данный игрок не авторизован", thePlayer, 255, 0, 0)
							end
						else
							addBox("Передавать деньги можно\nТолько после года жизни в штате.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: Данный игрок не найден", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: /pay [id] [сумма]", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: /pay [id] [сумма]", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: /pay [id] [сумма]", thePlayer, 255, 0, 0)
		end
	end
end

function onSetLeader( thePlayer, command, id, fid )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 4) then
			if(toch(id) ~= nil) then
				if(toch(fid) ~= nil) then
					id = toch(id)
					fid = toch(fid)
					if(IDS[id] ~= nil) then
						local pl = IDS[id]
						if(getElementData(pl, "Login") == true) then
							if(fid > 0 and fid < 10) then
								sendClientMessage("Администратор " .. getElementData(thePlayer, "Name") .. " назначил " .. getElementData(pl, "Name") .. " лидером организации " .. FactionName[fid][1], thePlayer, 255, 255, 0)
								SED(pl, "Faction", fid)
								SED(pl, "Rank", 10)
								if(type(FactionSkins[fid][11]) ~= "table") then
									SED(pl, "WorkSkin", FactionSkins[fid][10])
								else
									SED(pl, "WorkSkin", getElementData(pl, "Skin"))
								end
								SED(pl, "SpawnID", 2)
								updatePlayerAccount(pl, "SpawnID", 2)
								addBox("Начальная точка: фракция", pl, 0, 255, 100)
								dbExec(mysql, "UPDATE `Accounts` SET `Faction` = ?, `Rank` = '10', `WorkSkin` = ? WHERE `Name` = ?", fid, getElementData(pl, "WorkSkin"), getElementData(pl, "Name"))
								customSpawnPlayer(pl)
							else
								addBox("Вы сняли " .. getElementData(pl, "Name") .. "\nс должности лидера организации.", thePlayer, 255, 0, 0)
								SED(pl, "WorkSkin", getElementData(pl, "Skin"))
								setElementModel(pl, getElementData(pl, "Skin"))
								SED(pl, "Faction", 0)
								SED(pl, "Rank", 0)
								customSpawnPlayer(pl)
								dbExec(mysql, "UPDATE `Accounts` SET `Faction` = ?, `Rank` = ?, `WorkSkin` = ? WHERE `ID` = ?", 0, 0, getElementData(pl, "Skin"), getElementData(pl, "AccID"))
								addBox("Администратор " .. getElementData(thePlayer, "Name") .. " снял\nВас с поста лидера организации.", pl, 255, 255, 0)
							end
						else
							addBox("Ошибка: Данный игрок не авторизован.", thePlayer, 255, 0, 0)
						end
					end
				else
					addBox("Ошибка: ID фракции введён некорректно.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: ID введён некорректно.", thePlayer, 255, 0, 0)
			end
		end
	end
end

function onPlayerGetCommands( thePlayer, command )
	sendClientMessage("/fuel 				- 	заправиться.",	thePlayer)
	sendClientMessage("/pay [id] [money] 	- 	передать деньги игроку.", thePlayer)
	sendClientMessage("/commands 			-	список команд.", thePlayer)
	sendClientMessage("/save 				- 	узнать текущие кооординаты.",thePlayer)
	sendClientMessage("/showlic [id] 		-	показать игроку лицензии.", thePlayer)
	sendClientMessage("/showpass [id]		- 	показать игроку паспорт.", thePlayer)
	sendClientMessage("/gps 				- 	координатор по карте.",	thePlayer)
	sendClientMessage("/me [Текст]			- 	произвести действие в чате", thePlayer)
	sendClientMessage("/try [Текст] 		- 	сделать попытку в чате от своего лица", thePlayer)
	sendClientMessage("/do [Текст]			-	совершить косвенное событие в чате.", thePlayer)
	sendClientMessage("/report [Текст]		-	отправить репорт.", thePlayer)
end

function onPlayerDo( thePlayer, command, ... )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Mute") == 0) then
			local name = getElementData(thePlayer, "Name")
			local x, y, z = getElementPosition(thePlayer)
			local arg = {...}
			local b = #arg
			local str = table.concat(arg, " ") ..  " (" ..name .. " [" .. getElementData(thePlayer, "ID") .. "])" 
			if(b > 0) then
				for i, n in pairs(IDS) do
					local dim = getElementDimension(thePlayer)
					local dim2 = getElementDimension(n)
					if(dim == dim2) then
						local ints1 = getElementInterior(thePlayer)
						local ints2 = getElementInterior(n)
						if(ints1 == ints2) then
							msgforcamera(str, n, 232, 183, 227, x, y, z)
						end
					end
				end
			end
		end
	end
end

function onPlayerTry( thePlayer, command, ... )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Mute") == 0) then
			local name = getElementData(thePlayer, "Name")
			local x, y, z = getElementPosition(thePlayer)
			local arg = {...}
			local b = #arg
			if(b > 0) then
				local a = math.random(0, 1)
				local str = table.concat(arg, " ")
				if(a == 0) then
					str = name .. " [" .. getElementData(thePlayer, "ID") .. "] " .. str .. " | Удачно"
				else
					str = name .. " [" .. getElementData(thePlayer, "ID") .. "] " .. str .. " | Неудачно"
				end
				for i, n in pairs(IDS) do
					if(getElementData(n, "Login") == true) then
						msgforcamera(str, n, 232, 183, 227, x, y, z)
					end
				end
			else
				addBox("Ошибка: Вы не ввели текст.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: У Вас затычка.", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerReport( thePlayer, command, ... )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Mute") == 0) then
			local name = getElementData(thePlayer, "Name")
			local arg = {...}
			local b = #arg
			local str = table.concat(arg, " ")
			if(b > 0) then
				if(getElementData(thePlayer, "cdr") == false) then
					SED(thePlayer, "cdr", true)
					setTimer(function ( pl )
						if(isElement(pl)) then
							removeElementData(pl, "cdr")
						end
					end, 30 * 1000, 1, thePlayer)
					local maxreport = 1
					local countreports = 0
					for i,n in pairs(ServerPerem["Reports"]) do
						if(i >= maxreport) then
							maxreport = i + 1
						end
						countreports = countreports + 1
					end
					ServerPerem["Reports"][maxreport] = {}
					ServerPerem["Reports"][maxreport]["Name"] = getElementData(thePlayer, "Name")
					ServerPerem["Reports"][maxreport]["Text"] = str
					ServerPerem["Reports"][maxreport]["Player"] = thePlayer
					ServerPerem["Reports"][maxreport]["Otvet"] = false
					if(table.getn(ServerPerem["Reports"]) >= 5) then
						str = "[ID жалобы: " .. maxreport .. "] " .. name .. " (" .. getElementData(thePlayer, "ID") ..  "): " .. str .. ". Жалоб уже " .. countreports + 1 .. ". Посмотреть список жалоб: /reports." 
					else
						str = "[ID жалобы: " .. maxreport .. "] " .. name .. " (" .. getElementData(thePlayer, "ID") ..  "): " .. str .. ". Ответ: /ans " .. maxreport .. " [Text]"
					end
					setTimer(function ( ds )
						if(ServerPerem["Reports"][ds]["Otvet"] == false) then
							if(isElement(ServerPerem["Reports"][ds]["Player"])) then
								addBox("Ни один из администраторов\nНе смог Вам ответить", ServerPerem["Reports"][ds]["Player"], 255, 255, 0)
							end
						end
						ServerPerem["Reports"][ds] = nil
					end, 120 * 1000, 1, maxreport)
					addBox("Ваш запрос администрации отправлен", thePlayer, 255, 255, 0)
					for i, n in pairs(IDS) do
						if(getElementData(n, "Login") == true) then
							if(getElementData(n, "Admin") > 0) then
								sendClientMessage(str, n, 255, 240, 0)
							end
						end
					end
				else
					addBox("Пожалуйста, подождите 30 секунд.", thePlayer, 255, 0, 0)
				end
			end
		else
			addBox("У Вас затычка.\nВы не можете отправить репорт", thePlayer, 255, 0, 0)
		end
	end
end

function onSetHousePrice( thePlayer, command, id, price )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") == 6) then
			if(id ~= nil) then
				if(price ~= nil) then
	 				if(toch(id) ~= nil) then
	 					if(toch(price) ~= nil) then
	 						id = toch(id)
	 						price = toch(price)
	 						if(id > 0) then
	 							if(price > 0) then
			 						if(HouseTable[id] ~= nil) then
			 							if(type(HouseTable[id]) == "table") then
			 								price = toch(price)
			 								HouseTable[id]["Price"] = price
			 								dbExec(mysql, "UPDATE `House` SET `Price` = ? WHERE `ID` = ?", price, id)
			 								addBox("Вы изменили стоимость " .. id .. " дома на " .. price .. "$", thePlayer, 0, 60, 255)
			 							end
			 						end
			 					end
		 					end
	 					end
	 				end
				end
			end
		end
	end
end

function onPlayerAEat( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			SED(thePlayer, "Food", 100)
			triggerClientEvent(thePlayer, "Food", thePlayer, getElementData(thePlayer, "Food"))
			dbExec(mysql, "UPDATE `Accounts` set `Food` = ? WHERE `Name` = ?", getElementData(thePlayer, "Food"), getElementData(thePlayer, "Name"))
			addBox("Вы пополнили свою сытость.", thePlayer, 0, 255, 100)
		end
	end
end

function onPlayerSetLic( thePlayer, command, id, lic )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 3) then
			if(id ~= nil) then
				if(lic ~= nil) then
					if(toch(id) > 0) then
						if(toch(lic) == 0 or toch(lic) == 1) then
							id = toch(id)
							if(IDS[id] ~= nil) then
								local secPlayer = IDS[id]
								if(getElementData(secPlayer, "Login") == true) then
									lic = toch(lic)
									SED(secPlayer, "AutoLicense", lic)
									local Name = getElementData(secPlayer, "Name")
									dbExec(mysql, "UPDATE `Accounts` set `AutoLicense` = ? WHERE `Name` = ?", getElementData(secPlayer, "AutoLicense"), getElementData(secPlayer, "Name"))
									addBox("Вы задали " .. getElementData(secPlayer, "Name") .. "\nАвтомобильную лицензию " .. getElementData(secPlayer, "AutoLicense"), thePlayer, 0, 255, 60)
									addBox("Администратор " .. getElementData(thePlayer, "Name") .. "\nСделал Вам автомобильную лицензию " .. getElementData(secPlayer, "AutoLicense"), secPlayer, 0, 255, 60)
								end
							end
						end
					end
				end
			end
		end
	end
end

function onPlayerUseTalkie( thePlayer, command, ... )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") > 0) then
			local arg = {...}
			local a = #arg
			if(a > 0) then
				local factsp = getElementData(thePlayer, "Faction")
				local str = "[Рация] " .. FactionRankName[factsp][getElementData(thePlayer, "Rank")] .. " " .. getElementData(thePlayer, "Name") .. " (" .. getElementData(thePlayer, "ID") .. ") : " .. table.concat(arg, " ")
				for i, n in pairs(IDS) do
					if(getElementData(IDS[i], "Login") == true) then
						if(getElementData(thePlayer, "Faction") == getElementData(IDS[i], "Faction")) then
							sendClientMessage(str, IDS[i], 0, 160, 255)
						end
					end
				end
			end
		end
	end
end

function onPlayerChatDepart( thePlayer, command, ... )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") >= 5) then
			local arg = {...}
			local a = #arg
			if(a > 0) then
				local string = "Департамент" .. " || " .. FactionName[toch(getElementData(thePlayer, "Faction"))][2] .. " " .. getElementData(thePlayer, "Name") .. " (" .. getElementData(thePlayer, "ID") .. "): " .. table.concat(arg, " ")
				for i, n in pairs(IDS) do
					if(getElementData(n, "Login") == true) then
						if(getElementData(n, "Faction") > 4) then
							sendClientMessage(string, n, 0, 90, 255)
						end
					end
				end
			else
				addBox("Ошибка: Вы не ввели текст сообщения.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: Вы должны находиться\nв гос. организации.", thePlayer, 255, 0, 0)
		end
	end
end

function Avtorizovalsya( str )
	if(getElementData(client, "Login") == false) then
		local sfm = dbPrepareString(mysql, "SELECT * FROM `Accounts` WHERE `Name` = ? AND `Pass` = ?", getElementData(client, "Name"), hash("sha256", str .. "abc"))
		local q = dbQuery(mysql, sfm)
		local result = dbPoll(q, -1)
		local a = 0
		for i, n in pairs(result) do
			a = 1
		end
		if(a == 1) then
			triggerClientEvent(client, "voiceLogin", client)
			setPedWalkingStyle(client, 118)
			setPedStat(client, 23, 1000)
			triggerClientEvent(client, "Avtoriz", client)
			local ttee = getRealTime()
			local day = ttee.monthday
			if(day < 10) then
				day = "0" .. day
			end
			local month = ttee.month + 1
			if(month < 10) then
				month = "0" .. month
			end
			local hour = ttee.hour
			if(hour < 10) then
				hour = "0" .. hour
			end
			local minute = ttee.minute
			if(minute < 10) then
				minute = "0" .. minute
			end
			local str = day .. "." .. month .. "." .. ttee.year + 1900 .. " " .. hour .. ":" .. minute
			dbExec(mysql, "UPDATE `Accounts` set `LastAuth` = ? WHERE `Name` = ?", str, getElementData(client, "Name"))
			local qu = dbQuery(mysql, "SELECT * FROM `Accounts` WHERE `Name` = ? AND `Pass` = ?", getElementData(client, "Name"), getElementData(client, "Pass"))
			local result = dbPoll(qu, -1)
			setPlayerNametagShowing(client, false)
			exports.carSystem:bindSpace(client)
			SED(client, "WHours", result[1]["WHours"])
			SED(client, "WarnDays", result[1]["WarnDays"])
			SED(client, "Bank", result[1]["Bank"])
			SED(client, "Sex", result[1]["Sex"])
			SED(client, "AutoLicense", result[1]["AutoLicense"])
			SED(client, "SpawnID", result[1]["SpawnID"])
			SED(client, "Exp", result[1]["Exp"])
			SED(client, "Rank", result[1]["Rank"])
			SED(client, "Lvl", result[1]["Lvl"])
			SED(client, "Faction", result[1]["Faction"])
			SED(client, "AccID", result[1]["ID"])
			SED(client, "Skin", result[1]["Skin"])
			SED(client, "Money", result[1]["Money"])
			SED(client, "NWork", 0)
			SED(client, "QGR", result[1]["QGR"])
			SED(client, "PhoneNumber", result[1]["PhoneNumber"])
			SED(client, "Login", true)
			SED(client, "Admin", result[1]["Admin"])
			SED(client, "Wanted", result[1]["Wanted"])
			SED(client, "WorkSkin", result[1]["WorkSkin"])
			SED(client, "Food", result[1]["Food"])
			SED(client, "House", result[1]["House"])
			SED(client, "PWork", result[1]["Work"])
			SED(client, "SkillM4", result[1]["SkillM4"])
			SED(client, "SkillAk47", result[1]["SkillAk47"])
			SED(client, "SkillDeagle", result[1]["SkillDeagle"])
			SED(client, "SkillShotgun", result[1]["SkillShotgun"])
			SED(client, "SkillFish", result[1]["SkillFish"])
			SED(client, "Donate", result[1]["Donate"])
			SED(client, "VipDay", result[1]["VipDay"])
			SED(client, "VipType", result[1]["VipType"])
			SED(client, "PhoneMoney", result[1]["PhoneMoney"])
			toggleAllControls(client, true)
			local tablo = {}
			for i=1,9 do
				if(result[1]["Fact"..i] == 0) then
					tablo[i] = false			
				else
					tablo[i] = true
				end
			end
			SED(client, "TableFactionBans", tablo)
			toggleAllControls(client, true)
			if(getElementData(client, "FishBoat") ~= false) then
				removeElementData(client, "FishBoat")
			end
			SED(client, "Nrk", result[1]["NRK"])
			local serial = getPlayerSerial(source)
			if(result[1]["Serial"] == "") then
				dbExec(mysql, "UPDATE `Accounts` SET `Serial` = ? WHERE `Name` = ?", serial, result[1]["Name"])
			end
			triggerClientEvent(source, "LoadGreenZone", source, GreenZone)
			if(result[1]["WeaponLicense"] == 0) then
				SED(client, "WeaponLicense", false)
			else
				SED(client, "WeaponLicense", true)
			end
			if(result[1]["SkillDeagle"] == 100) then
				setPedStat(client, 71, 1000)
			end
			if(result[1]["SkillShotgun"] == 100) then
				setPedStat(client, 72, 1000)
			end
			if(result[1]["SkillAk47"] == 100) then
				setPedStat(client, 77, 1000)
			end
			if(result[1]["SkillM4"] == 100) then
				setPedStat(client, 78, 1000)
			end
			local house = toch(getElementData(client, "House"))
			if(house > 0) then
				HouseTable[house]["OwnerPlayer"] = client 
			end
			setPlayerWantedLevel(client, result[1]["Wanted"])
			SED(client, "Passport", result[1]["Passport"])
			setPlayerMoney(client, toch(result[1]["Money"]))
			SED(client, "BusOwnID", result[1]["BusinessID"])
			SED(client, "Quest", result[1]["Quest"])
			local id = result[1]["BusinessID"]
			if(id > 0) then
				BusinessTable[id]["OwnerPlayer"] = client
			end
			SED(client, "PoliceJail", result[1]["PoliceJail"])
			SED(client, "AdminJail", result[1]["AdminJail"])
			SED(client, "Warn", result[1]["Warn"])
			SED(client, "Mute", result[1]["Mute"])
			SED(client, "Material", result[1]["Material"])
			for i, n in pairs(text3dTable) do
				triggerClientEvent(client, "on3dTextAdd", client, n)
			end
			if(getElementData(client, "PhoneNumber") ~= 0) then
				local number = toch(getElementData(client, "PhoneNumber"))
				PhoneNumbers[number] = client
			else
				addBox("Найдено письмо в сумке:\n \nС тобой хочет связаться один человек,\nКогда ты приедешь на место.\nТебе необходимо купить телефон.\nОн сам найдет тебя.\n \nОт: Мистер СЖ.", client, 220, 0, 220)
			end
			if(getElementData(client, "PhonePlayer") ~= nil) then
				removeElementData(client, "PhonePlayer")
				removeElementData(client, "AcceptedCall")
			end
			if(getElementData(client, "PoliceJail") == 0) then
				removeElementData(client, "PoliceJail")
			end
			if(getElementData(client, "AdminJail") == 0) then
				removeElementData(client, "AdminJail")
			end
			local id = toch(getElementData(client, "ID"))
			setPlayerNametagText(client, getElementData(client, "Name") .. " (" .. id .. ")")
			local name = getElementData(client, "Name")
			local strt = "Администратор " .. name .. " зашел в игру."
			if(getElementData(client, "Admin") >= 1 and getElementData(client, "Admin") <= 4) then
				for i, n in pairs(IDS) do
					if(getElementData(n, "Login") == true) then
						if(getElementData(n, "Admin") > 0) then
							sendClientMessage(strt, n, 240, 90, 0)
						end
					end
				end
			end
			bindKey(client, "lctrl", "down", inputfunc)
			bindKey(client, "lalt", "down", inputlalt)
			dbFree(qu)
			fadeCamera(client, true)
			SIDP(client, 0)
			local id = getElementData(client, "ID")
			ColorTable[id] = getElementData(client, "Faction")
			triggerClientEvent(client, "onGridPlus", client, getElementData(client, "ID"), getElementData(client, "Name"), client)
			for i,n in pairs(IDS) do
				if(n ~= client) then
					if(getElementData(n, "Login") == true) then
						triggerClientEvent(n, "onAddClist", n, id, client, ColorTable[id])
						local secid = getElementData(n, "ID")
						triggerClientEvent(client, "onAddClist", client, secid, n, ColorTable[secid])
					end
				end
			end
			if(result[1]["Health"] < 50) then
				customSpawnPlayer(client, true)
			else
				customSpawnPlayer(client)
			end
			local id = getElementData(client, "ID")
			PayTimer[id] = true
			setElementHealth(client, result[1]["Health"])
			triggerClientEvent(client, "onPlayerHUD", client, IDS, getElementData(client, "Lvl"), getElementData(client, "Exp"), getElementData(client, "Food"))
			triggerClientEvent(client, "LoadGreenZone", client, GreenZone)
			local house = toch(getElementData(client, "House"))
			if(result[1]["Weapon1"] > 0) then
				giveWeapon(client, result[1]["Weapon1"], result[1]["Ammo1"], true)
			end
			if(result[1]["Weapon2"] > 0) then
				giveWeapon(client, result[1]["Weapon2"], result[1]["Ammo2"], true)
			end
			if(result[1]["Weapon3"] > 0) then
				giveWeapon(client, result[1]["Weapon3"], result[1]["Ammo3"], true)
			end
			for i=1,4 do
				local house = getElementData(client, "House")
				if(house ~= nil) then
					if(house > 0) then
						local id = toch(getElementData(client, "ID"))
						local vehid = HouseTable[house]["Car" .. i]
						if(vehid >= 400 and vehid <= 612) then
							if(HouseTable[house]["vx"] ~= 0) then
								local x = HouseTable[house]["vx"]
								local y = HouseTable[house]["vy"]
								local z = HouseTable[house]["vz"]
								local vrz = HouseTable[house]["vrz"]
								PrivateCar[id] = createVeh(vehid, -1280.5849609375, -695.056640625, 999.578125, 0, 0, 90)
								SET(PrivateCar[id], 8)
								SIDP(PrivateCar[id], getElementData(client, "House"))
								SED(PrivateCar[id], "PrivatePlayer", id)
								SED(PrivateCar[id], "Lists", i)
								SED(PrivateCar[id], "Fuel", HouseTable[house]["Fuel" .. i])
								if(HouseTable[house]["Color" .. i] == 0) then
									setVehicleColor(PrivateCar[id], 125, 125, 125, 125, 125, 125)
								elseif(HouseTable[house]["Color" .. i] == 1) then
									setVehicleColor(PrivateCar[id], 60, 60, 60, 60, 60, 60)
								elseif(HouseTable[house]["Color" .. i] == 2) then
									setVehicleColor(PrivateCar[id], 15, 15, 15, 15, 15, 15)
								elseif(HouseTable[house]["Color" .. i] == 3) then
									setVehicleColor(PrivateCar[id], 80, 0, 0, 80, 0, 0)
								elseif(HouseTable[house]["Color" .. i] == 4) then
									setVehicleColor(PrivateCar[id], 125, 125, 0, 125, 125, 0)
								elseif(HouseTable[house]["Color" .. i] == 5) then
									setVehicleColor(PrivateCar[id], 0, 30, 125, 0, 30, 125)
								end
								break
							else
								addBox("Произошла серверная ошибка.\nСообщите об этом администрации.", client)
							end
						end
					end
				end
			end
			sendClientMessage("Добро пожаловать в игру.", client, 0, 100, 250)
			sendClientMessage("Всю доступную информацию о сервере можно узнать", client, 0, 100, 250)
			sendClientMessage("По команде \"/menu\" либо по нажатии F1.", client, 0, 100, 250)
			--sendClientMessage("Чтобы воспользоваться голосовым чатом, используйте кнопку Z.", client, 0, 100, 250)
			local ddd = dbQuery(mysql, "SELECT * FROM `promotable` WHERE `AccID` = ?", getElementData(client, "AccID"))
	        local result = dbPoll(ddd, -1)
	        if(result ~= nil) then
	            if(result[1] ~= nil) then
	                if(result[1]["Exp"] > 0) then
	                    SED(client, "PromoExp", result[1]["Exp"])
	                    SED(client, "NeedExp", result[1]["SExp"])
	                    SED(client, "PromoMoney", result[1]["Money"])
	                else
	                    SED(client, "PromoExp", -1)
	                    SED(client, "NeedExp", result[1]["SExp"])
	                    SED(client, "PromoMoney", result[1]["Money"])
	                end
	            else
	            	SED(client, "PromoExp", -2)
	                SED(client, "NeedExp", 0)
	                SED(client, "PromoMoney", 0)
	            end
	        else
	        	SED(client, "PromoExp", -2)
	            SED(client, "NeedExp", 0)
	            SED(client, "PromoMoney", 0)
			end
			if(getElementData(client, "Quest") == 0) then
				showPlayerDialog(client, 107, 1, "Начало истории", "После прилета Вы решили проверить сумку и нашли письмо следующего содержания:\n\"Привет, я слышал что ты в Вайс-Сити прилетел\nЧто ж, хороший выбор, лучше чем куда-нибудь в холодную Россию.\nТебе нужно купить телефон в ближайшем магазине 24\\7,\n(/gps - Ближайший 24\\7)\nТебе позвонит мой знакомый и расскажет че к чему.\nА добраться можешь на такси, либо на автобусе,\nА если хочешь можешь и сам педали покрутить на велосипеде\n(/gps - Ближайшая аренда авто).\nВ общем, давай, мой человек тебе все расскажет.\"\nПодпись: Mr. CJ.", "Ок", "Отмена")
			elseif(getElementData(client, "Quest") == 1) then
				if(getElementData(client, "PhoneNumber") == 0) then
					addBox("Вам необходимо приобрести телефон,\nЧтобы продолжить историю.\n \nЕго можно приобрести в 24/7\n(( /GPS - Ближайший 24/7))", client, 0, 60, 255)
				else
					toggleControl(client, "enter_exit", false)
					toggleControl(client, "fire", false)
					toggleControl(client, "jump", false)
					toggleControl(client, "enter_passenger", false)
					toggleControl(client, "next_weapon", false)
					toggleControl(client, "previous_weapon", false)
					toggleControl(client, "aim_weapon", false)
					toggleControl(client, "sprint", false)
					toggleControl(client, "crouch", false)
					SED(client, "AcceptedCall", true)
					addBox("Звонок на телефон.", client, 255, 255, 0)
					setPedAnimation(client, "ped", "phone_talk", 1, true, true, false, true)
					local id = getElementData(client, "ID")
					PhoneObject[id] = createObject(16097, 0, 0, 0)
					exports.bone:attachElementToBone(PhoneObject[id], client, 12,0.03,0.02,0.12,0,90,90)
					setTimer(function ( player )
						if(isElement(player)) then
							local id = getElementData(player, "ID")
							sendClientMessage("[ТЕЛ] Ken_Rozenberg: Хей, привет, это Кен Розенберг", player, 255, 255, 0)
							sendClientMessage("[ТЕЛ] Ken_Rozenberg: Я вообще туда позвонил?", player, 255, 255, 0)
							addBox("Звонок сброшен.", player, 255, 255, 0)
							setPedAnimation(player, "BSKTBALL", "BBALL_idle_O", 1, false)
							exports.bone:detachElementFromBone(PhoneObject[id])
							destroyElement(PhoneObject[id])
							setTimer(function ( neplayer )
								if(isElement(neplayer)) then
									addBox("Звонок на телефон.", neplayer, 255, 255, 0)
									setPedAnimation(neplayer, "ped", "phone_talk", 1, true, true, false, true)
									local id = getElementData(neplayer, "ID")
									PhoneObject[id] = createObject(16097, 0, 0, 0)
									exports.bone:attachElementToBone(PhoneObject[id], neplayer, 12,0.03,0.02,0.12,0,90,90)
									sendClientMessage("[ТЕЛ] Ken_Rozenberg: Это Кен, да... В общем, меня попросили тебе помочь, хотя мне не очень сильно хочется, но ладно. В общем, смотри.", neplayer, 255, 255, 0)
									sendClientMessage("[ТЕЛ] Ken_Rozenberg: Для начала езжай в мэрию, получи там паспорт... Бла-бла-бла, долбанные бюрократы с кучей бумаг...", neplayer, 255, 255, 0)
									setTimer(function ( hzpe )
										if(isElement(hzpe)) then
											sendClientMessage("[ТЕЛ] Ken_Rozenberg: Ладно, как получишь паспорт, я скажу тебе, что делать дальше. И без тебя проблем хватает. Езжай давай.", hzpe, 255, 255, 0)
											sendClientMessage("(( /GPS - Гос. учреждения - Мэрия))", hzpe, 255, 255, 0)
											setTimer(function ( notplayer )
												if(isElement(notplayer)) then
													local id = getElementData(notplayer, "ID")
													addBox("Звонок сброшен.", notplayer, 255, 255, 0)
													exports.bone:detachElementFromBone(PhoneObject[id])
													destroyElement(PhoneObject[id])
													removeElementData(notplayer, "AcceptedCall")
													setPedAnimation(notplayer, "BSKTBALL", "BBALL_idle_O", 1, false)
													toggleControl(notplayer, "enter_exit", true)
													toggleControl(notplayer, "fire", true)
													toggleControl(notplayer, "jump", true)
													toggleControl(notplayer, "enter_passenger", true)
													toggleControl(notplayer, "next_weapon", true)
													toggleControl(notplayer, "previous_weapon", true)
													toggleControl(notplayer, "aim_weapon", true)
													toggleControl(notplayer, "sprint", true)
													toggleControl(notplayer, "crouch", true)
													SED(notplayer, "Quest", 3)
													dbExec(mysql, "UPDATE `Accounts` SET `Quest` = ? WHERE `Name` = ?", getElementData(notplayer, "Quest"), getElementData(notplayer, "Name"))
												else
												end
											end, 5000, 1, hzpe)
										else
										end
									end, 7000, 1, neplayer)
								else
								end
							end, 5000, 1, player)
						end
					end, 5000, 1, client)
				end
			elseif(getElementData(client, "Quest") == 2) then
				toggleControl(client, "enter_exit", false)
				toggleControl(client, "fire", false)
				toggleControl(client, "jump", false)
				toggleControl(client, "enter_passenger", false)
				toggleControl(client, "next_weapon", false)
				toggleControl(client, "previous_weapon", false)
				toggleControl(client, "aim_weapon", false)
				toggleControl(client, "sprint", false)
				toggleControl(client, "crouch", false)
				SED(client, "AcceptedCall", true)
				addBox("Звонок на телефон.", client, 255, 255, 0)
				setPedAnimation(client, "ped", "phone_talk", 1, true, true, false, true)
				local id = getElementData(client, "ID")
				PhoneObject[id] = createObject(16097, 0, 0, 0)
				exports.bone:attachElementToBone(PhoneObject[id], client, 12,0.03,0.02,0.12,0,90,90)
				setTimer(function ( player )
					if(isElement(player)) then
						local id = getElementData(player, "ID")
						sendClientMessage("[ТЕЛ] Ken_Rozenberg: Хей, привет, это Кен Розенберг", player, 255, 255, 0)
						sendClientMessage("[ТЕЛ] Ken_Rozenberg: Я вообще туда позвонил?", player, 255, 255, 0)
						addBox("Звонок сброшен.", player, 255, 255, 0)
						setPedAnimation(player, "BSKTBALL", "BBALL_idle_O", 1, false)
						exports.bone:detachElementFromBone(PhoneObject[id])
						destroyElement(PhoneObject[id])
						setTimer(function ( neplayer )
							if(isElement(neplayer)) then
								addBox("Звонок на телефон.", neplayer, 255, 255, 0)
								setPedAnimation(neplayer, "ped", "phone_talk", 1, true, true, false, true)
								local id = getElementData(neplayer, "ID")
								PhoneObject[id] = createObject(16097, 0, 0, 0)
								exports.bone:attachElementToBone(PhoneObject[id], neplayer, 12,0.03,0.02,0.12,0,90,90)
								sendClientMessage("[ТЕЛ] Ken_Rozenberg: Это Кен, да... В общем, меня попросили тебе помочь, хотя мне не очень сильно хочется, но ладно. В общем, смотри.", neplayer, 255, 255, 0)
								sendClientMessage("[ТЕЛ] Ken_Rozenberg: Для начала езжай в мэрию, получи там паспорт... Бла-бла-бла, долбанные бюрократы с кучей бумаг...", neplayer, 255, 255, 0)
								setTimer(function ( hzpe )
									if(isElement(hzpe)) then
										sendClientMessage("[ТЕЛ] Ken_Rozenberg: Ладно, как получишь паспорт, я скажу тебе, что делать дальше. И без тебя проблем хватает. Езжай давай.", hzpe, 255, 255, 0)
										sendClientMessage("(( /GPS - Гос. учреждения - Мэрия))", hzpe, 255, 255, 0)
										setTimer(function ( notplayer )
											if(isElement(notplayer)) then
												local id = getElementData(notplayer, "ID")
												addBox("Звонок сброшен.", notplayer, 255, 255, 0)
												exports.bone:detachElementFromBone(PhoneObject[id])
												destroyElement(PhoneObject[id])
												removeElementData(notplayer, "AcceptedCall")
												setPedAnimation(notplayer, "BSKTBALL", "BBALL_idle_O", 1, false)
												toggleControl(notplayer, "enter_exit", true)
												toggleControl(notplayer, "fire", true)
												toggleControl(notplayer, "jump", true)
												toggleControl(notplayer, "enter_passenger", true)
												toggleControl(notplayer, "next_weapon", true)
												toggleControl(notplayer, "previous_weapon", true)
												toggleControl(notplayer, "aim_weapon", true)
												toggleControl(notplayer, "sprint", true)
												toggleControl(notplayer, "crouch", true)
												SED(notplayer, "Quest", 3)
												dbExec(mysql, "UPDATE `Accounts` SET `Quest` = ? WHERE `Name` = ?", getElementData(notplayer, "Quest"), getElementData(notplayer, "Name"))
											else
											end
										end, 5000, 1, hzpe)
									else
									end
								end, 7000, 1, neplayer)
							else
							end
						end, 5000, 1, player)
					end
				end, 5000, 1, client)
			elseif(getElementData(client, "Quest") == 3) then
				if(getElementData(client, "Passport") == 0) then
					addBox("Подсказка: Чтобы продолжить цепочку истории\nПожалуйста, получите паспорт в мэрии.\n(/GPS - Гос. учреждения - Мэрия)", client, 0, 60, 255)
				else
					SED(client, "Quest", 4)
					dbExec(mysql, "UPDATE `Accounts` set `Quest` = ? WHERE `Name` = ?", 4, getElementData(client, "Name"))
					sendClientMessage("SMS от Ken_Rozenberg: Ты там все сделал? Не забудь поесть, а то мне дохляка еще на своей шее не хватало, можешь перекусить в забегаловке\n(/gps - ближайшая закусочная).", client, 255, 255, 0)
				end
			elseif(getElementData(client, "Quest") == 4) then
				sendClientMessage("SMS от Ken_Rozenberg: Ты там все сделал? Не забудь поесть, а то мне дохляка еще на своей шее не хватало, можешь перекусить в забегаловке\n(/gps - ближайшая закусочная).", client, 255, 255, 0)
			elseif(getElementData(client, "Quest") == 5) then
				addBox("Подсказка: Чтобы продолжить цепочку истории\nПожалуйста, направляйтесь на начальную работу\nСтроителем или грузчиком и перенесите\nЛибо 30 упаковок,\nЛибо 350 кг материалов соответственно.\n(GPS - Начальные работы)", client, 255, 0, 0)
			elseif(getElementData(client, "Quest") == 6) then
				if(getElementData(client, "AutoLicense") == 0) then
					addBox("Подсказка: Чтобы продолжить цепочку истории\nПожалуйста, сдайте на права.\n (/gps - важные места - Автошкола)", client, 255, 0, 0)	
				else
					dbExec(mysql, "UPDATE `Accounts` SET `Quest` = ? WHERE `Name` = ?", -1, getElementData(client, "Name"))
					SED(client, "Quest", -1)
					getExp(client, 1)
					setElementMoney(client, 250, "Бонус квест")
					SED(thePlayer, "AcceptedCall", true)
					addBox("Звонок на телефон.", client, 255, 255, 0)
					setPedAnimation(client, "ped", "phone_talk", 1, true, true, false, true)
					local id = getElementData(client, "ID")
					PhoneObject[id] = createObject(16097, 0, 0, 0)
					exports.bone:attachElementToBone(PhoneObject[id], client, 12,0.03,0.02,0.12,0,90,90)
					showPlayerDialog(client, 113, 1, "Кен Розенберг по телефону", "Отлично, надо же ты смог все сделать, теперь мне пора идти по делам...\nА ты займись чем-нибудь, город там осмотри…\nМожет вольешься в какой-то коллектив. Да в конце концов, на работу устройся,\nТам еще деньжат подзаработаешь, Кен Розенберг херни не скажет, а то был тут один в голубой рубашке с пальмами,\nНе слушал меня и кончил плохо…\nЛадно, бывай, я позвоню позже.", "Ок", "Отмена")
				end
			end
			local maf1 = getElementData(client, "Faction")
			if(maf1 >= 1 and maf1 <= 4) then
				if(MafiaCapture[maf1]["Pole"] ~= nil) then
					local pole = MafiaCapture[maf1]["Pole"]
					local maf1 = MafiaCapture[pole]["Maf1"]
					local maf2 = MafiaCapture[pole]["Maf2"]
					local score1 = MafiaCapture[pole]["Frag1"]
					local score2 = MafiaCapture[pole]["Frag2"]
					triggerClientEvent(client, "captureToggle", client, true, maf1, maf2, score1, score2)
				end
			end
			for i,n in pairs(IDS) do
				setPlayerVoiceBroadcastTo(n, IDS)
			end
		else
			if(getElementData(client, "ErrorPass") == false) then
				SED(client, "ErrorPass", 1)
				addBox("Пароль введен неверно.\nКол-во попыток: 1/3.", client, 255, 0, 0)
			elseif(getElementData(client, "ErrorPass") == 1) then
				SED(client, "ErrorPass", 2)
				addBox("Пароль введен неверно.\nКол-во попыток: 2/3.", client, 255, 0, 0)
			else
				kickPlayer(client, "Incorrect pass")
			end
		end
	else
		kickPlayer(client, "Вы уже авторизованы.")
	end
end

function Regaru( str )
	if(getElementData(client, "Sex") == false) then
		if(str ~= nil) then
			local password = str
			password = string.gsub(str, "%s+", "")
			if(string.len(password) > 3 and string.len(password) < 24) then
				local ch = string.len(password)
				local adad = false
				for i=1,ch do
					local stl = string.sub(password, i, i)
					if(string.byte(stl) == 95 or (string.byte(stl) > 64 and string.byte(stl) < 91) or (string.byte(stl) > 96 and string.byte(stl) < 123) or (string.byte(stl) > 47 and string.byte(stl) < 58)) then
					else
						return false
					end
				end
				if(adad == false) then
					local query = dbQuery(mysql, "SELECT COUNT(*) FROM `Accounts` WHERE `Name` = ?", getElementData(client, "Name"))
					local result = dbPoll(query, -1)
					if(result[1]["COUNT(*)"] == 0) then
						setPedWalkingStyle(client, 118)
						setPedStat(client, 23, 1000)
						local qu = dbQuery(mysql, "SELECT * FROM `Accounts` ORDER BY `ID` DESC LIMIT 0,1")
						local result = dbPoll(qu, -1)
						local id = toch(result[1]["ID"]) + 1
						dbFree(qu)
						local ip = getPlayerIP(client)
						local t = getRealTime()
						local month = t.month + 1
						local monthday = t.monthday
						triggerClientEvent(client, "endChooseBrowser", client)
						triggerClientEvent(client, "startChooseBrowser", client, "pol")
						if(month < 10) then
							month = "0" .. month
						end
						if(monthday < 10) then
							monthday = "0" .. monthday
						end
						local serial = getPlayerSerial(client)
						local datetoreg = monthday .. "." .. month .. "." .. t.year + 1900 .. " " .. t.hour .. ":" .. t.minute
						local stre = dbPrepareString(mysql, "INSERT INTO `Accounts` (`Name`, `ID`, `Pass`, `AutoLicense`, `SpawnID`, `Faction`, `Rank`, `Admin`, `Mail`, `Skin`, `Money`, `Lvl`, `Exp`, `Wanted`, `WorkSkin`, `Food`, `Passport`, `House`, `Sex`, `RegDate`, `IPReg`, `Serial`, `Quest`) VALUES (?, ?, ?, 0, 0, 0, 0, 0, 0, 2, 200, 1, 0, 0, 20, 100, 0, 0, 1, ?, ?, ?, 0)", getElementData(client, "Name"), id, hash("sha256", password .. "abc"), datetoreg, ip, serial)
						dbExec(mysql, stre)
						updatePlayerAccount(client, "Serial", serial)
						local tablo = {}
						for i=1,9 do
							tablo[i] = false
						end
						exports.carSystem:bindSpace(client)
						SED(client, "Sex", 1)
						SED(client, "WHours", 0)
						SED(client, "TableFactionBans", tablo)
						SED(client, "AccID", id)
						SED(client, "AutoLicense", 0)
						SED(client, "QGR", 0)
						SED(client, "SpawnID", 0)
						SED(client, "Bank", 0)
						SED(client, "LoadPack", 0)
						SED(client, "SpawnID", 1)
						SED(client, "SummLoads", 0)
						SED(client, "Money", 200)
						SED(client, "NWork", 0)
						SED(client, "Faction", 0)
						SED(client, "Rank", 0)
						SED(client, "PhoneMoney", 0)
						SED(client, "Lvl", 1)
						SED(client, "Exp", 0)
						bindKey(client, "F1", "down", onPlayerCheckMenu)
						SED(client, "Food", 100)
						SED(client, "Passport", 0)
						SED(client, "House", 0)
						SED(client, "BusOwnID", 0)
						SED(client, "PhoneNumber", 0)
						SED(client, "Mute", 0)
						SED(client, "Warn", 0)
						SED(client, "Admin", 0)
						SED(client, "Material", 0)
						SED(client, "PWork", 0)
						SED(client, "SkillFish", 0)
						SED(client, "SkillM4", 0)
						SED(client, "SkillAk47", 0)
						SED(client, "SkillDeagle", 0)
						SED(client, "SkillShotgun", 0)
						SED(client, "Wanted", 0)
						SED(client, "Nrk", 0)
						SED(client, "WeaponLicense", false)
						SED(client, "Donate", 0)
						SED(client, "VipDay", 0)
						SED(client, "VipType", 0)
						SED(client, "Quest", 0)
						local id = getElementData(client, "ID")
						PayTimer[id] = true
						triggerClientEvent(source, "LoadGreenZone", source, GreenZone)
						bindKey(client, "lctrl", "down", inputfunc)
						bindKey(client, "lalt", "down", inputlalt)
						setPlayerNametagShowing(client, false)
						setPlayerMoney(client, getElementData(client, "Money"))
						local ttee = getRealTime()
						local day = ttee.monthday
						if(day < 10) then
							day = "0" .. day
						end
						local month = ttee.month + 1
						if(month < 10) then
							month = "0" .. ttee.month
						end
						local hour = ttee.hour
						if(hour < 10) then
							hour = "0" .. hour
						end
						local minute = ttee.minute
						if(minute < 10) then
							minute = "0" .. minute
						end
						local str = day .. "." .. month .. "." .. ttee.year + 1900 .. " " .. hour .. ":" .. minute
						dbExec(mysql, "UPDATE `Accounts` set `LastAuth` = ? WHERE `Name` = ?", str, getElementData(client, "Name"))
						if(NameTable[names] == false or NameTable[names] ~= nil) then
							NameTable[names] = client
						end
						fadeCamera(client, true)
						spawnPlayer(client, spawnX, spawnY, spawnZ)
						SED(client, "Skin", 2)
						setElementModel(client, getElementData(client, "Skin"))
						triggerClientEvent(client, "onSuccessRegister", client, IDS)
						setElementRotation(client, 0, 0, 265)
						SEP(client, 335.779296875, -1043.890625, 11.02768707275)
						setCameraMatrix(client, 340.685546875, -1044.705078125, 10.627687072754, 335.779296875, -1044.390625, 11.02768707275)
						setElementRotation(client, 0, 0, 256)
						for i, n in pairs(IDS) do
							triggerClientEvent(n, "onGridPlus", n, getElementData(client, "ID"), getElementData(client, "Name"), client)
						end
						for i, n in pairs(IDS) do
							triggerClientEvent(client, "onGridPlus", client, getElementData(IDS[i], "ID"), getElementData(IDS[i], "Name"), IDS[i])
						end
						for i, n in pairs(text3dTable) do
							triggerClientEvent(client, "on3dTextAdd", client, n)
						end
						sendClientMessage("Добро пожаловать в игру.", client, 240, 90, 0)
						sendClientMessage("Всю доступную информацию о сервере можно узнать", client, 240, 90, 0)
						sendClientMessage("В команде /menu либо по нажатии F1", client, 240, 90, 0)
						local id = getElementData(client, "ID")
						SED(client, "PromoExp", -1)
		                SED(client, "NeedExp", 0)
		                SED(client, "PromoMoney", 0)
		                local id = getElementData(client, "ID")
						ColorTable[id] = getElementData(client, "Faction")
		                for i,n in pairs(IDS) do
							if(n ~= client) then
								if(getElementData(n, "Login") == true) then
									triggerClientEvent(n, "onAddClist", n, id, client, ColorTable[id])
									local secid = getElementData(n, "ID")
									triggerClientEvent(client, "onAddClist", client, secid, n, ColorTable[secid])
								end
							end
						end
						SIDP(client, getElementData(client, "ID"))
						for i,n in pairs(IDS) do
							setPlayerVoiceBroadcastTo(n, IDS)
						end
					else
						kickPlayer(client, "Reg error.")
					end
				end
			end
		end
	end
end

function onPlayerAFuel( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			if(getPedOccupiedVehicle(thePlayer) ~= nil and getPedOccupiedVehicle(thePlayer) ~= false) then
				local veh = getPedOccupiedVehicle(thePlayer)
				SED(veh, "Fuel", 100)
				addBox("Вы заправили Ваш транспорт.", thePlayer, 0, 255, 100)
			end
		end
	end
end

function getExp( thePlayer, ch )
	if(getElementData(thePlayer, "Login") == true) then
		local lvl = getElementData(thePlayer, "Lvl")
		local exp = toch(getElementData(thePlayer, "Exp"))
		ch = toch(ch)
		if(ch < 100) then
			while(ch > 0) do
				local max = (lvl - 1) * 4 + 8
				if(ch + exp < max) then
					local oexp = exp + ch
					SED(thePlayer, "Exp", oexp)
					ch = 0
				elseif(ch + exp == max) then
					lvl = lvl + 1
					exp = 0
					SED(thePlayer, "Exp", exp)
					SED(thePlayer, "Lvl", lvl)
					ch = 0
					addBox("Вы прожили ещё один год в штате!", thePlayer, 0, 60, 255)
				else
					lvl = lvl + 1
					exp = 0
					SED(thePlayer, "Exp", exp)
					SED(thePlayer, "Lvl", lvl)
					local raz = max - exp
					ch = ch - raz
					addBox("Вы прожили ещё один год в штате!", thePlayer, 0, 60, 255)
				end
				dbExec(mysql, "UPDATE `Accounts` SET `Exp` = ?, `Lvl` = ? WHERE `Name` = ?", getElementData(thePlayer, "Exp"), getElementData(thePlayer, "Lvl"), getElementData(thePlayer, "Name"))
			end
		end
	end
end

function giveExp( thePlayer, ch )
	if(getElementData(thePlayer, "Login") == true) then
		local lvl = getElementData(thePlayer, "Lvl")
		local exp = toch(getElementData(thePlayer, "Exp"))
		ch = toch(ch)
		if(ch < 100) then
			addBox("Вы выдали себе " .. ch .. " EXP", thePlayer, 0, 60, 255)
			while(ch > 0) do
				local max = (lvl - 1) * 4 + 8
				if(ch + exp < max) then
					local oexp = exp + ch
					SED(thePlayer, "Exp", oexp)
					ch = 0
				elseif(ch + exp == max) then
					lvl = lvl + 1
					exp = 0
					SED(thePlayer, "Exp", exp)
					SED(thePlayer, "Lvl", lvl)
					ch = 0
					addBox("Вы прожили ещё один год в штате!", thePlayer, 0, 60, 255)
				else
					lvl = lvl + 1
					exp = 0
					SED(thePlayer, "Exp", exp)
					SED(thePlayer, "Lvl", lvl)
					local raz = max - exp
					ch = ch - raz
					addBox("Вы прожили ещё один год в штате!", thePlayer, 0, 60, 255)
				end
				dbExec(mysql, "UPDATE `Accounts` SET `Exp` = ?, `Lvl` = ? WHERE `Name` = ?", getElementData(thePlayer, "Exp"), getElementData(thePlayer, "Lvl"), getElementData(thePlayer, "Name"))
			end
		else
			addBox("Вы не можете выдать себе более 100 EXP", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerGiveExp( thePlayer, command, id)
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 3) then
			giveExp(thePlayer, toch(id))
			triggerClientEvent(thePlayer, "onEXPUpdate", thePlayer, getElementData(thePlayer, "Exp"), getElementData(thePlayer, "Lvl"))
		end
	end
end

function onTpBuilder( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			SEP(thePlayer, 273.193359375, -255.232421875, 12.428287506104)
		end
	end
end

function onPlayerInt( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 2) then
			if(id ~= nil) then
				if(toch(id) ~= nil) then
					id = toch(id)
					if(id >= 0) then
						SET(thePlayer, id)
					end
				end
			end
		end
	end
end

function onPlayerAHeal( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			setElementHealth(thePlayer, 100)
			addBox("Вы пополнили своё здоровье.", thePlayer, 0, 255, 100)
		end
	end
end

function BuilderZp( zp )
	local bonus = 0
	local vip = getElementData(client, "VipType")
	checkqw(client, 2, zp)
	if(vip == 2) then
		bonus = math.floor(zp * 13 * 0.15)
	elseif(vip == 3) then
		bonus = math.floor(zp * 13 * 0.25)
	elseif(vip == 4) then
		bonus = math.floor(zp * 13 * 0.35)
	end
	if(vip > 1) then
		addBox("Вы заработали " .. zp * 13 * coefmoney .. "$ на работе строителем.\nБонус: " .. bonus * coefmoney .. "$.", client, 0, 255, 100)
	else
		addBox("Вы заработали " .. zp * 13 * coefmoney .. "$ на работе строителем.", client, 0, 255, 100)
	end
	setElementMoney(client, (zp * 13 + bonus) * coefmoney, "Строитель")
end

function mrkBuildStart(  )
	setPedAnimation(client, "carry", "liftup", 1000, false, true, false, false)
	setTimer(function ( cl )
		if(isElement(cl)) then
			setPedAnimation(cl, "carry", "crry_prtial", 1, true, true, false, true)
		end
	end, 1000, 1, client)
	objeect[toch(getElementData(client, "ID"))] = createObject(7507, 0, 0, 0, 0, 0, 0)
	exports.bone:attachElementToBone(objeect[toch(getElementData(client, "ID"))],client, 12, 0.15, -0.04, 0.05, -90, 20, 0)
end

function ClearBuilderGruz(  )
	if(objeect[toch(getElementData(client, "ID"))] ~= nil) then
		destroyElement(objeect[toch(getElementData(client, "ID"))])
		objeect[toch(getElementData(client, "ID"))] = nil
		removeElementData(client, "LoadPack")
	end
	setPedAnimation(client, "carry", "crry_prtial", 1, false, true, false, false)
	toggleControl(client, "enter_exit", true)
	toggleControl(client, "fire", true)
	toggleControl(client, "jump", true)
	toggleControl(client, "enter_passenger", true)
	toggleControl(client, "next_weapon", true)
	toggleControl(client, "previous_weapon", true)
	toggleControl(client, "aim_weapon", true)
	toggleControl(client, "sprint", true)
	toggleControl(client, "crouch", true)
end

function BuilderEndGruz( )
	setPedAnimation(client, "carry", "putdwn", 1000, false, true, false, false)
end

function onPlayerSellHouse( thePlayer, command, id, price )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "House") > 0) then
			if(toch(id) ~= false and toch(id) ~= nil) then
				if(toch(price) ~= nil) then
					id = toch(id)
					price = toch(price)
					if(IDS[id] ~= nil) then
						local secPlayer = IDS[id]
						if(getElementData(secPlayer, "Login") == true) then
							if(getElementData(secPlayer, "House") == 0) then
								local house = toch(getElementData(thePlayer, "House"))
								if(HouseTable[house]["PName"] == getElementData(thePlayer, "Name")) then
									if(HouseTable[house]["PayDay"] > 2) then
										if(price >= 20000) then
											local x, y, z = getElementPosition(secPlayer)
											local x1, y1, z1 = getElementPosition(thePlayer)
											local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
											if(dist < 3) then
												SED(secPlayer, "PNameHouse", getElementData(thePlayer, "Name"))
												SED(secPlayer, "SellPlayer", thePlayer)
												SED(secPlayer, "HousePrice", toch(price))
												SED(secPlayer, "HouseID", getElementData(thePlayer, "House"))
												showPlayerDialog(secPlayer, 17, 1, "Покупка дома", "Готовы ли Вы купить дом №" .. getElementData(thePlayer, "House") .. "\nСтоимость: " .. price .. "$\nВладелец: " .. getElementData(thePlayer, "Name"), "Покупка", "Отмена")
											else
												addBox("Данный игрок слишком далеко.", thePlayer, 255, 0, 0)
											end
										else
											addBox("Ошибка: Минимальная сумма продажи\n20.000$", thePlayer, 255, 0, 0)
										end
									else
										addBox("Дом должен быть оплачен больше чем на 2 часа.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Произошла ошибка #030\nСообщите об этом администрации.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: У данного игрока уже есть дом.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: Данный игрок не авторизован", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: ID введён некорректно", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: Сумма продажи введена\nНекорректно.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: ID введён некорректно", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: У Вас нет дома", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerSellGosHouse( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "House") > 0) then
			local house = getElementData(thePlayer, "House")
			local price = toch(HouseTable[house]["Price"] / 2) 
			local id = getElementData(thePlayer, "ID")
			if(PrivateCar[id] == nil) then
				showPlayerDialog(thePlayer, 18, 1, "Продать дом государству.", "Действительно ли Вы хотите продать дом государству?\nСтоимость продажи: " .. price .. "$", "Продать", "Отмена")
			else
				addBox("Ошибка: Сначала продайте авто.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: У Вас нет дома.", thePlayer, 255, 0, 0)
		end
	end
end

function onTpMer( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			SET(thePlayer, 0)
			SIDP(thePlayer, 0)
			SEP(thePlayer, -332.1826171875, 1335.70703125, 11.724113464355)
		end
	end
end

function onLicSell( thePlayer, command, id, licid )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") == 5) then
			if(getElementData(thePlayer, "Rank") > 6) then
				if(toch(id) ~= nil) then
					if(toch(id) > 0) then
						if(toch(licid) ~= nil) then
							licid = toch(licid)
							if(licid == 0) then
								id = toch(id)
								if(IDS[id] ~= nil) then
									local secPlayer = IDS[id]
									if(secPlayer ~= thePlayer) then												
										if(getElementData(secPlayer, "Login") == true) then
											if(getElementData(secPlayer, "AutoLicense") == 0) then
												local price = 1250
												if(price <= toch(getElementData(secPlayer, "Money"))) then
													SED(secPlayer, "LicBy", thePlayer)
													SED(secPlayer, "LicPrice", price)
													addBox("Вы предложили " .. getElementData(secPlayer, "Name") .. " приобрести\nУ Вас лицензию на вождение.", thePlayer, 0, 60, 255)
													showPlayerDialog(secPlayer, 19, 1, "Покупка лицензии на вождение.", "Действительно ли Вы хотите приобрести лицензию на вождение?\nСтоимость приобретения: " .. price .. "$\nЛицензер: " .. getElementData(thePlayer, "Name"), "Купить", "Отмена")
												else
													addBox("Ошибка: У данного игрока нет столько денег.", thePlayer, 255, 0, 0)
												end
											else
												addBox("Ошибка: У данного игрока\nУже есть лицензия на вождение", thePlayer, 255, 0, 0)
											end
										else
											addBox("Ошибка: Данный игрок не авторизован", thePlayer, 255, 0, 0)
										end
									else
										addBox("Вы не можете этого сделать.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Ошибка: Данный игрок не найден.", thePlayer, 255, 0, 0)
								end
							elseif(licid == 1) then
								id = toch(id)
								if(IDS[id] ~= nil) then
									local secPlayer = IDS[id]
									if(getElementData(secPlayer, "Login") == true) then
										if(getElementData(secPlayer, "WeaponLicense") == false) then
											local price = 12500
											if(price <= toch(getElementData(secPlayer, "Money"))) then
												SED(secPlayer, "LicBy", thePlayer)
												SED(secPlayer, "LicPrice", price)
												addBox("Вы предложили " .. getElementData(secPlayer, "Name") .. " приобрести\nУ Вас разрешение на оружие.", thePlayer, 0, 60, 255)
												showPlayerDialog(secPlayer, 84, 1, "Покупка разрешения на оружие.", "Действительно ли Вы хотите приобрести разрешение на оружие?\nСтоимость приобретения: " .. price .. "$\nЛицензер: " .. getElementData(thePlayer, "Name"), "Купить", "Отмена")
											else
												addBox("Ошибка: У данного игрока нет столько денег.", thePlayer, 255, 0, 0)
											end
										else
											addBox("Ошибка: У данного игрока\nУже есть лицензия на оружие", thePlayer, 255, 0, 0)
										end
									else
										addBox("Ошибка: Данный игрок не авторизован", thePlayer, 255, 0, 0)
									end
								else
									addBox("Ошибка: Данный игрок не найден.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: /licsell [licid].\n\"licid\":\n0 - Лицензия на вождение.\n1 - Лицензия на оружие.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: /licsell [licid].\n\"licid\":\n0 - Лицензия на вождение.\n1 - Лицензия на оружие.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: ID введён некорректно", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: /licsell [licid].\n\"licid\":\n0 - Лицензия на вождение.\n1 - Лицензия на оружие.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: У Вас нет доступа к данной команде.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: У Вас нет доступа к данной команде.", thePlayer, 255, 0, 0)
		end
	end
end

function getGruzState(  )
	return Server["Gruz"]
end

function setGruzState( integ )
	Server["Gruz"] = integ
	edit3dtext(ServerPerem["GruzLabel"], "РАЗГРУЖЕНО #ff2200" .. Server["Gruz"] .. " КГ.")
end


function onWorkMer( hitElement, dim )
	showPlayerDialog(hitElement, 20, 3, "Государственное трудоустройство", "Название работы\tЛет в штате\nВодитель автобуса\t2 года\nТаксист\t2 года\nРазвозчик продуктов\t3 года\nВодитель эвакуатора\t4 года", "Выбор", "Отмена")
end

function onPlayerAnimList( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true)  then
		if(getElementData(thePlayer, "NWork") == 0) then
			if(getElementData(thePlayer, "Tazered") == false) then
				if(toch(id) ~= nil and toch(id) ~= false) then
					id = toch(id)
					if(id >= 0 and id <= 29) then
						setPedAnimation(thePlayer, AnimList[id]["Block"], AnimList[id]["Anim"], 4100, true, false)
						bindKey(thePlayer, "space", "down", function ( pl )
							setPedAnimation(pl, "BSKTBALL", "BBALL_idle_O", 1, false)
							unbindKey(pl, "space", "down")
							SED(pl, "AntiSbiv", false)
							setElementFrozen(pl, false)
						end, thePlayer)
						SED(thePlayer, "AntiSbiv", true)
						setElementFrozen(thePlayer, true)
					else
						showPlayerDialog(thePlayer, 24, 3, "Список анимаций", "Список Анимаций\n1. Танец 1\n2. Танец 2\n3. Танец 3\n4. Танец 4\n5. Танец 5\n6. Танец 6\n7. Махать рукой\n8. Лечь на землю\n9. Походка пьяного\n10. Кувыркаться\n11. Попрощаться\n12. Читать рэп\n13. Укрыться\n14. Подложить бомбу\n15. Надеть маску\n16. Вытянуть руку перед собой\n17. Съел что-то не то...\n18. Перекусить\n19. Шлёпнуть кому-то по заднице\n20. Предложить наркотики\n21. Эффект электрошокера\n22. Мужское курение\n23. Женское курение\n24. Присесть\n25. Восточное единоборство\n26. Выпить напиток\n27. Танец на одной ноге\n28. Поза вратаря\n29. Facepalm\n", "Выбор", "Отмена")
					end
				else
					showPlayerDialog(thePlayer, 24, 3, "Список анимаций", "Список Анимаций\n1. Танец 1\n2. Танец 2\n3. Танец 3\n4. Танец 4\n5. Танец 5\n6. Танец 6\n7. Махать рукой\n8. Лечь на землю\n9. Походка пьяного\n10. Кувыркаться\n11. Попрощаться\n12. Читать рэп\n13. Укрыться\n14. Подложить бомбу\n15. Надеть маску\n16. Вытянуть руку перед собой\n17. Съел что-то не то...\n18. Перекусить\n19. Шлёпнуть кому-то по заднице\n20. Предложить наркотики\n21. Эффект электрошокера\n22. Мужское курение\n23. Женское курение\n24. Присесть\n25. Восточное единоборство\n26. Выпить напиток\n27. Танец на одной ноге\n28. Поза вратаря\n29. Facepalm\n", "Выбор", "Отмена")
				end
			end
		else
			addBox("Вы не можете использовать анимации,\nНаходясь на работе.", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerGPS( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementInterior(thePlayer) == 0) then
			local id = toch(getElementData(thePlayer, "ID"))
			if(GPST[id] ~= nil) then
				if(GPST[id]["Pickup"] ~= nil) then
					if(getElementType(GPST[id]["Pickup"]) == "marker") then
						removeEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
						destroyElement(GPST[id]["Pickup"])
						destroyElement(GPST[id]["Blip"])
						GPST[id] = nil
					end
				end
			end
			showPlayerDialog(thePlayer, 25, 3, "GPS-навигатор", "Меню\nВажные места\nНачальные работы\nПостоянные работы\nГосударственные учреждения\nОпасные районы\nБлижайшая АЗС\nБлижайший магазин одежды\nБлижайший 24/7\nБлижайшая закусочная\nБлижайший банкомат\nБлижайшая аренда авто\nИнтересные места\nНайти моё авто\nНайти мой дом\nОружейный магазин.", "Выбор", "Отмена")
		else
			addBox("Сейчас Вы не можете этого сделать.", thePlayer, 180, 180, 180)
		end
	end
end

function onAdminSetHInt( thePlayer, command, id, inter )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") == 6) then
			if(id ~= nil) then
				if(inter ~= nil) then
					if(toch(id) ~= nil) then
						if(toch(inter) ~= nil) then
							id = toch(id)
							inter = toch(inter)
							if(id > 0) then
								if(inter > 0) then
									if(HouseTable[id] ~= nil) then
										if(HouseTable[id]["Pickup"] ~= nil) then
											if(inter == 11) then
												HouseTable[id]["Interior"] = inter
												dbExec(mysql, "UPDATE `House` SET `Interior` = ? WHERE `ID` = ?", inter, id)
												addBox("Вы указали " .. inter .. " интерьер для " .. id .. " дома.", thePlayer, 0, 60, 255)
												HouseTable[id]["hx"] = 2283.09765625
												HouseTable[id]["hy"] = -1138.0791015625
												HouseTable[id]["hz"] = 1050.8984375
												HouseTable[id]["hrx"] = 0
												SEP(exitFromHouse[id], 2283.001953125, -1140.220703125, 1050.8984375)
												SET(exitFromHouse[id], 11)
											elseif(inter == 5) then
												HouseTable[id]["hx"] = 1333.310546875
												HouseTable[id]["hy"] = -95.3466796875
												HouseTable[id]["hz"] = 1001
												HouseTable[id]["hrx"] = 180
												HouseTable[id]["Interior"] = 5
												dbExec(mysql, "UPDATE `House` SET `Interior` = ? WHERE `ID` = ?", 5, id)
												addBox("Вы указали " .. inter .. " интерьер для " .. id .. " дома.", thePlayer, 0, 60, 255)
												SET(exitFromHouse[id], 5)
												SEP(exitFromHouse[id], 1332.6904296875, -93.052734375, 1001)
											elseif(inter == 4) then
												HouseTable[id]["Interior"] = inter
												dbExec(mysql, "UPDATE `House` SET `Interior` = ? WHERE `ID` = ?", inter, id)
												addBox("Вы указали " .. inter .. " интерьер для " .. id .. " дома.", thePlayer, 0, 60, 255)
												HouseTable[id]["hx"] = 1322.33984375 
												HouseTable[id]["hy"] = -87.537109375
												HouseTable[id]["hz"] = 999.50744628906
												HouseTable[id]["hrx"] = 90
												SEP(exitFromHouse[id], 	1325.5048828125, -87.52734375, 999.5)
												SET(exitFromHouse[id], inter)
											elseif(inter == 3) then
												HouseTable[id]["Interior"] = inter
												dbExec(mysql, "UPDATE `House` SET `Interior` = ? WHERE `ID` = ?", inter, id)
												addBox("Вы указали " .. inter .. " интерьер для " .. id .. " дома.", thePlayer, 0, 60, 255)
												HouseTable[id]["hx"] = 1317.6494140625
												HouseTable[id]["hy"] = -99.7177734375
												HouseTable[id]["hz"] = 1001
												HouseTable[id]["hrx"] = 270
												SEP(exitFromHouse[id], 1313.46484375, -100.23046875, 1001.0013427734)
												SET(exitFromHouse[id], inter)
											else
												addBox("Ошибка: Указывать можно только\n3, 4, 5 и 11 ID интерьера.", thePlayer, 255, 0, 0)
											end
										else
											addBox("Произошла ошибка #366.\nПожалуйста, сообщите об этом администрации.", thePlayer, 255, 0, 0)
										end
									else
										addBox("Ошибка: Такого дома не существует.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Ошибка: Вы указали некорректный интерьер", thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: Вы указали некорректный ID.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: Вы указали некорректный ID интерьера.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: Вы указали некорректный ID дома.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: Вы не указали ID интерьера.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: Вы не указали ID дома.", thePlayer, 255, 0, 0)
			end
		end
	end
end

function onPlayerAdminChat( thePlayer, command, ... )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			local name = getElementData(thePlayer, "Name")
			local arg = { ... }
			local n = #arg
			local string = "[AC] " .. name .. " [" .. getElementData(thePlayer, "ID") .. "]: " .. table.concat(arg, " ")
			if(n > 0) then
				for i, n in pairs(IDS) do
					if(getElementData(n, "Login") ~= false) then
						if(getElementData(n, "Login") == true) then
							if(getElementData(n, "Admin") > 0) then
								sendClientMessage(string, n, 255, 120, 0)
							end
						else
						end
					end
				end
			else
				addBox("Ошибка: Вы не ввели текст.", thePlayer)
			end
		end
	end
end

function onAdminACommands( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			local adm = toch(getElementData(thePlayer, "Admin"))
			local str = "Уровень админки"
			for i=1,adm do
				str = str .. "\n" .. i .. " уровень"
			end
			showPlayerDialog(thePlayer, 76, 3, "Список админ-команд", str, "Ок", "Отмена")
		end
	end
end

function onPlayerSetHVS( thePlayer, command, hid )
	if(getElementData(thePlayer, "Login") == true) then
		if(toch(getElementData(thePlayer, "Admin")) == 6) then
			if(toch(hid) ~= nil) then
				hid = toch(hid)
				if(HouseTable[hid] ~= nil) then
					local x, y, z = getElementPosition(thePlayer)
					HouseTable[hid]["vx"] = x
					HouseTable[hid]["vy"] = y
					HouseTable[hid]["vz"] = z
					local rx, ry, rz = getElementRotation(thePlayer)
					HouseTable[hid]["vrz"]	= rz
					dbExec(mysql, "UPDATE `House` set `vx` = ?, `vy` = ?, `vz` = ?, `vrz` = ? WHERE `ID` = ?", x, y, z, rz, hid)
					addBox("Вы установили данную позицию\nКак точку спавна Т/С дому " .. hid .. " id.", thePlayer, 0, 60, 255)
				else
					addBox("Ошибка: Такого дома не существует.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: Вы не указали ID дома", thePlayer, 255, 0, 0)
			end
		end
	end
end

function onPlayerSHotel( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			SEP(thePlayer, -153.263671875, -1140.78515625, 13.445375442505)
		end
	end
end

function onTpAero( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			SEP(thePlayer, -1390.5634765625, -880.6474609375, 20.86149597168)
		end
	end
end

function onSellGosCar( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "House") ~= 0) then
			if(id ~= nil) then
				if(toch(id) ~= nil) then
					id = toch(id)
					if(id >= 1 and id <= 4) then
						local house = toch(getElementData(thePlayer, "House"))
						if(HouseTable[house]["Car" .. id] >= 400) then
							local veh = HouseTable[house]["Car" .. id]
							local price = 0
							for i, n in pairs(CarInfo) do
								if(CarInfo[i]["ID"] == veh) then
									price = CarInfo[i]["GosPrice"]
									break
								end
							end
							local stf = "Действительно ли Вы хотите продать своё т/с государству?\nВы получите половину от стоимости покупки.\nСумма, которую вы получите: " .. math.round(price / 2) .. "$." 
							showPlayerDialog(thePlayer, 29, 1, "Продажа домашнего транспорта", stf, "Продать", "Отмена")
							SED(thePlayer, "Sellvehprice", math.round(price / 2))
							SED(thePlayer, "Sellvehid", id)
						else
							addBox("Ошибка: У Вас нет транспорта в данном слоте.", thePlayer, 255, 0, 0)
						end
					else
						addBox("/sellgoscar [номер слота 1-4]", thePlayer, 255, 0, 0)
					end
				else
					addBox("/sellgoscar [номер слота 1-4]", thePlayer, 255, 0, 0)
				end
			else
				addBox("/sellgoscar [номер слота 1-4]", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: У Вас нет дома.", thePlayer, 255, 0, 0)
		end
	end
end

function onAdminTpMail( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			SEP(thePlayer, 299.3359375, -338.142578125, 11.91587638855) 
			SET(thePlayer, 0)
			SIDP(thePlayer, 0)
			addBox("Вы телепортировались на работу\nРазвозчиков пиццы.", thePlayer, 0, 60, 255)
		end
	end
end

function onAdminTpAsh( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") ~= false) then
			if(getElementData(thePlayer, "Admin") > 0) then
				SEP(thePlayer, 103.6953125, -813.650390625, 10.426418304443)
				SET(thePlayer, 0)
				SIDP(thePlayer, 0)
			end
		end
	end
end

function onAdminTpArmy( thePlayer, command )
	if(getElementData(thePlayer, "Login") ~= nil) then
		if(getElementData(thePlayer, "Admin") > 0) then
			local veh = getPedOccupiedVehicle(thePlayer)
			if(veh ~= nil and veh ~= false) then
				SEP(veh, -1691.4609375, -216.482421875, 14.824159622192)
			else
				SEP(thePlayer, -1691.4609375, -216.482421875, 14.824159622192)
			end
		end
	end
end

function onPlayerExitVehicle( thePlayer, seat, jacker, forced )
	SED(thePlayer, "ToggleVeh", false)
	local id = getElementData(thePlayer, "ID")
	if(getElementData(source, "TaxiVehTable") ~= false) then
		if(getElementData(thePlayer, "TaxiVehicle") == source) then
			local veh = getElementData(thePlayer, "TaxiVehicle")
			addBox("У Вас есть 30 секунд,\nЧтобы вернуться в арендованное авто.\nИначе оно будет припарковано обратно в парк.", thePlayer, 255, 255, 0)
			TaxiTimer[id] = setTimer(function ( pl, vd, dd )
				if(isElement(pl)) then
					if(getElementData(vd, "TaxiDriverPlayer") == pl) then
						local veh = getElementData(pl, "TaxiVehicle")
						local id = getElementData(vd, "TaxiVehTable")
						customSpawnVehicle(vd)
						removeElementData(pl, "TaxiVehicle")
						removeElementData(vd, "TaxiDriverPlayer")
						addBox("Вы не успели вернуться в авто\nВ течение 30 секунд.\nВаше авто было припарковано обратно в парк.", pl, 255, 0, 0)
					end
				end
				TaxiTimer[dd] = nil
			end, 30000, 1, thePlayer, veh, id)
		end
	end
	if(getElementData(source, "AshPlayer") == thePlayer) then
		AshTimer[id] = setTimer(function ( player, red, dd )
			if(isElement(player)) then
				local veh = getElementData(player, "AshVeh")
				if(getElementData(veh, "AshPlayer") == player) then
					customSpawnVehicle(red)
					removeElementData(player, "AshVeh")
					removeElementData(red, "AshPlayer")
					removeElementData(player, "ASH")
					local mrk = getElementData(player, "mrkAsh")
					local blp = getElementData(player, "blpAsh")
					destroyElement(mrk)
					destroyElement(blp)
					removeElementData(player, "mrkAsh")
					removeElementData(player, "blpAsh")
					addBox("Вы провалили тест на вождение!", player, 255, 0, 0)
				end
				AshTimer[dd] = nil
			end
		end, 30 * 1000, 1, thePlayer, source, id)
	end
	if(getElementData(thePlayer, "Faction") == 9) then
		if(getElementData(source, "ArmyCar") ~= false) then
			if(getElementData(thePlayer, "mrkArmyGruz") ~= false) then
				local mrk = getElementData(thePlayer, "mrkArmyGruz")
				if(isElement(mrk) == true) then
					if(isEventHandlerAdded("onMarkerHit", mrk, onMrkArmyGruzHit) == true) then
						removeEventHandler("onMarkerHit", mrk, onMrkArmyGruzHit)
					end
					local blp = getElementData(thePlayer, "blpArmyGruz")
					destroyElement(mrk)
					destroyElement(blp)
					removeElementData(thePlayer, "mrkArmyGruz")
					removeElementData(thePlayer, "blpArmyGruz")
				end
			end
			if(getElementData(thePlayer, "mrkArmyGruzilo") ~= false) then
				local mrk = getElementData(thePlayer, "mrkArmyGruzilo")
				local blp = getElementData(thePlayer, "blpArmyGruzilo")
				if(isElement(mrk) == true) then
					removeEventHandler("onMarkerHit", mrk, onHitGruzilo)
					destroyElement(mrk)
					destroyElement(blp)
					removeElementData(thePlayer, "mrkArmyGruzilo")
					removeElementData(thePlayer, "blpArmyGruzilo")
				end
			end
		end
	end
	if(getElementData(source, "CourierVehID") ~= false) then
		if(getElementData(source, "CourierPlayer") == thePlayer) then
			addBox("У вас есть 60 секунд,\nЧтобы вернуться в арендованное авто.\nЕсли Вы не вернетесь, авто будет\nПрипарковано обратно на стоянке.", thePlayer, 255, 255, 0)
			local id = getElementData(thePlayer, "ID")
			TimerCourier[id] = 	setTimer(function ( veh, courier )
				if(isElement(courier)) then
					if(getElementData(veh, "CourierPlayer") == courier) then
						if(getPedOccupiedVehicle(courier) ~= veh) then
							if(getElementData(courier, "CourierVehicle") ~= false) then
								local veh = getElementData(courier, "CourierVehicle")
								customSpawnVehicle(veh)
								removeElementData(veh, "CourierPlayer")
								removeElementData(courier, "CourierVehicle")
								addBox("Вы вышли из машины более\nЧем на 60 секунд.\nВаше авто было припарковано\nОбратно на стоянку.", courier, 255, 0, 0)
							end
							if(getElementData(courier, "mrkCourierStart") ~= false) then
								local mrk = getElementData(courier, "mrkCourierStart")
								local blp = getElementData(courier, "blpCourierStart")
								removeEventHandler("onMarkerHit", mrk, startCourierWork)
								destroyElement(mrk)
								destroyElement(blp)
								removeElementData(courier, "mrkCourierStart")
								removeElementData(courier, "blpCourierStart")
							end
							if(getElementData(courier, "mrkCourierEnd") ~= false) then
								local mrk = getElementData(courier, "mrkCourierEnd")
								local blp = getElementData(courier, "blpCourierEnd")
								removeEventHandler("onMarkerHit", mrk, mrkCourEnd)
								destroyElement(mrk)
								destroyElement(blp)
								removeElementData(courier, "mrkCourierEnd")
								removeElementData(courier, "blpCourierEnd")
								removeElementData(courier, "Gruz")
								removeElementData(courier, "Coef")
							end
							if(getElementData(courier, "mrkCour") ~= false) then
								local mrk = getElementData(courier, "mrkCour")
								local blp = getElementData(courier, "blpCour")
								removeEventHandler("onMarkerHit", mrk, hitCourEnd)
								destroyElement(mrk)
								destroyElement(blp)
								removeElementData(courier, "mrkCour")
								removeElementData(courier, "blpCour")
								local bus = toch(getElementData(courier, "courBiz"))
								OrderBiz[bus]["OrderCourier"] = nil
							end
						end
					end
				end
				TimerCourier[id] = nil
			end, 60 * 1000, 1, source, thePlayer)
		end
	end
	if(source == getElementData(thePlayer, "MailVeh")) then
		local obj = getElementData(thePlayer, "PizzaObject")
		if(obj ~= false) then
			exports.bone:attachElementToBone(obj, thePlayer, 12,0.03,0.0,0.12,0,90,70)
			setPedAnimation(thePlayer, "carry", "crry_prtial", 1, true, true, false, true)
		end
	end
	if(getElementData(source, "rentCar") ~= false) then
		if(getElementData(source, "rentPlayer") == thePlayer) then
			addBox("Если Вы не вернетесь в ваше\nТранпортное средство в течение 5 мин.\nОно будет эвакуировано обратно на парковку", thePlayer, 255, 255, 0)
			vehRentTimer[id] = setTimer(function ( player, cid )
				if(isElement(player) == true) then
					local veh = getElementData(player, "rentVehicle")
					if(veh ~= false) then
						customSpawnVehicle(veh)
						removeElementData(veh, "rentPlayer")
						removeElementData(player, "rentVehicle")
						addBox("Ваше транспортное средство припарковано.", player, 255, 0, 0)
					end
				end
				vehRentTimer[id] = nil
			end, 5 * 60 * 1000, 1, thePlayer, id)
		end
	end
	if(rentVehTable[id] == source) then
		rentTimer[id] = setTimer(checkRent, 5 * 60 * 1000, 1, thePlayer)
		addBox("Вы покинули арендованный транспорт.\nЕсли Вы не вернетесь за руль\nВ течение 5 минут,\nТранспорт будет припаркован.", thePlayer, 255, 0, 0)
	end
	local id = getElementData(thePlayer, "ID")
	if(source == PCar[id]) then
		customDestroyVehicle(source)
	end
	if(getElementData(thePlayer, "LiveVCN") ~= false) then
		removeElementData(thePlayer, "LiveVCN")
		addBox("Вы вышли из машины и отключились от эфира", thePlayer, 0, 255, 60)
	end
	if(getElementData(thePlayer, "mrkBenz1") ~= false) then
		local mrk = getElementData(thePlayer, "mrkBenz1")
		if(isElement(mrk) == true) then
			local blp = getElementData(thePlayer, "blpBenz1")
			removeEventHandler("onMarkerHit", mrk, Benz1MarkerHit)
			destroyElement(mrk)
			destroyElement(blp)
			removeElementData(thePlayer, "mrkBenz1")
			removeElementData(thePlayer, "blpBenz1")
		end
	end
	if(getElementData(thePlayer, "mrkBenz2") ~= false) then
		local mrk = getElementData(thePlayer, "mrkBenz2")
		if(isElement(mrk) == true) then
			local blp = getElementData(thePlayer, "blpBenz2")
			removeEventHandler("onMarkerHit", mrk, Benz2MarkerHit)
			destroyElement(mrk)
			destroyElement(blp)
			removeElementData(thePlayer, "mrkBenz2")
			removeElementData(thePlayer, "blpBenz2")
		end
	end
	if(getElementData(thePlayer, "VehicleDriverBus") ~= false) then
		if(getElementData(source, "DriverPlayerBus") ~= false) then
			local veh = getElementData(thePlayer, "VehicleDriverBus")
			local player = getElementData(source, "DriverPlayerBus")
			if(thePlayer == player) then
				if(veh == source) then
					local id = getElementData(thePlayer, "ID")
					addBox("У Вас есть 60 секунд\nЧтобы вернуться в автобус.", thePlayer, 255, 255, 0)
					PlayerBusTimer[id] = setTimer(function ( pl, v )
						if(isElement(pl) == true) then
							if(getPedOccupiedVehicle(pl) ~= v) then
								if(getElementData(pl, "VehicleDriverBus") ~= false) then
									local veh = getElementData(pl, "VehicleDriverBus")
									if(veh == v) then
										local mrk = getElementData(pl, "mrkBus")
										local blp = getElementData(pl, "blpBus")
										if(isElement(mrk)) then
											destroyElement(mrk)
										end
										if(isElement(blp)) then
											destroyElement(blp)
										end
										removeElementData(pl, "mrkBus")
										removeElementData(pl, "blpBus")
										removeElementData(pl, "Stage")
										removeElementData(pl, "March")
										local veh = getElementData(pl, "VehicleDriverBus")
										local x, y, z, rz = getElementData(veh, "sx"), getElementData(veh, "sy"), getElementData(veh, "sz"), getElementData(veh, "srz")
										setTimer(customSpawnVehicle, 100, 1, veh)
										local id = getElementData(pl, "ID")
										removeElementData(pl, "March")
										removeElementData(veh, "DriverPlayerBus")
										removeElementData(pl, "VehicleDriverBus")
										PlayerBusTimer[id] = nil
									end
								end
							end
						end
					end, 60000, 1, thePlayer, source)
				end
			end
		end
	end
end

function onPlayerAGL( thePlayer, command, id, proof)
	if(getElementData(thePlayer, "Login") ~= false) then
		if(getElementData(thePlayer, "Admin") > 3) then
			if(id ~= nil) then
				if(toch(id) ~= nil) then
					id = toch(id)
					if(IDS[id] ~= nil) then
						local secPlayer = IDS[id]
						if(getElementData(secPlayer, "Login") == true) then
							if(proof ~= nil) then
								if(toch(proof) ~= nil) then
									proof = toch(proof)
									if(proof == 0) then
										if(getElementData(secPlayer, "AutoLicense") == 1) then
											addBox("Вы забрали у игрока " .. getElementData(secPlayer, "Name") .. "\nлицензию на вождение.", thePlayer, 0, 255, 60)
											addBox("Администратор " .. getElementData(thePlayer, "Name") .. " забрал\nУ Вас лицензию на вождение.", secPlayer, 0, 60, 255)
											SED(secPlayer, "AutoLicense", 0)
											local veh = getPedOccupiedVehicle(secPlayer)
											if(veh ~= false and veh ~= nil) then
												removePedFromVehicle(secPlayer)
											end
											dbExec(mysql, "UPDATE `Accounts` SET `AutoLicense` = 0 WHERE `Name` = ?", getElementData(secPlayer, "Name"))
										else
											addBox("У этого игрока уже нет прав.", thePlayer, 255, 0, 0)
										end
									elseif(proof == 1) then
										if(getElementData(secPlayer, "AutoLicense") == 0) then
											addBox("Вы выдали лицензию на вождение\nИгроку " .. getElementData(secPlayer, "Name"), thePlayer, 0, 60, 255)
											addBox("Администратор " .. getElementData(thePlayer, "Name") .. "\nВыдал Вам лицензию на вождение.", secPlayer, 0, 60, 255)
											SED(secPlayer, "AutoLicense", 1)
											dbExec(mysql, "UPDATE `Accounts` SET `AutoLicense` = 1 WHERE `Name` = ?", getElementData(secPlayer, "Name"))
										else
											addBox("У этого игрока уже есть лицензия на вождение.", thePlayer, 255, 0, 0)
										end
									else
										addBox("Данный тип пока что не доступен для выдачи.", thePlayer, 255, 0, 0)
									end 
								else
									addBox("Вы указали некорректную выдачу прав.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Вы не указали,\nзабрать или отобрать лицензии.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Данный игрок не авторизован.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Такой ID не найден.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Вы допустили ошибку при вводе ID.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Вы допустили ошибку при вводе ID.", thePlayer, 255, 0, 0)
			end
		elseif(getElementData(thePlayer, "Admin") > 0 and getElementData(thePlayer, "Admin") < 4) then
			addBox("У Вас нет доступа к данной команде.", thePlayer, 255, 0, 0)
		end
	end
end

function onAdminSetAdmin( thePlayer, command, id, lvl )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") == 6) then
			if(id ~= nil) then
				if(toch(id) ~= nil) then
					if(lvl ~= nil) then
						if(toch(lvl) ~= nil) then
							id = toch(id)
							lvl = toch(lvl)
							if(lvl >= 0 and lvl <= 6) then
								if(IDS[id] ~= nil) then
									local secPlayer = IDS[id]
									if(getElementData(secPlayer, "Login") == true) then
										if(secPlayer ~= thePlayer) then
											SED(secPlayer, "Admin", lvl)
											dbExec(mysql, "UPDATE `Accounts` SET `Admin` = ? WHERE `Name` = ?", lvl, getElementData(secPlayer, "Name"))
											addBox("Ваш уровень админ. прав был\nИзменен на " .. lvl .. " адм. " .. getElementData(thePlayer, "Name"), secPlayer, 0, 255, 100)
											addBox("Вы изменили уровень админ. прав\nНа " .. lvl .. " для " .. getElementData(secPlayer, "Name"), thePlayer, 0, 255, 100)
										else
											addBox("Ошибка: Вы не можете изменить\nСвой уровень адм. прав.", thePlayer, 255, 0, 0)
										end
									else
										addBox("Ошибка: Данный игрок не авторизован.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Ошибка: Данный игрок не на сервере.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: Уровень админки введен некорректно.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: Вы ввели некорректный уровень админ. прав.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: Вы не ввели уровень админ. прав.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: Вы ввели некорректный ID игрока.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: Вы не ввели ID игрока.", thePlayer, 255, 0, 0)
			end
		end
	end	
end

function onAdminTpVCN( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			SEP(thePlayer, -496.162109375, 772.763671875, 10.951456069946)
		end
	end
end

function onPlayerUseFMenu( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "BusOwnID") > 0 and getElementData(thePlayer, "BusOwnID") < 8) then
			showPlayerDialog(thePlayer, 42, 3, "Управление заправкой", "Пункты управления бизнесом:\nПродать бизнес государству\nПродать бизнес игроку\nОткрыть/закрыть бизнес\nУстановить цену за топливо\nСтатистика бизнеса\nВывести деньги\nОплатить налог\nНайти бизнес\nСделать заказ\nПополнить баланс бизнеса\nФин. статистика", "Выбор", "Отмена")
		else
			addBox("У Вас нет заправки.", thePlayer, 255, 0, 0)
		end
	end
end

function onMedicChangeSex( thePlayer, command, id, summ )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") == 7) then
			if(getElementData(thePlayer, "Rank") > 3) then
				if(id ~= nil) then
					if(toch(id) ~= nil) then
						id = toch(id)
						if(summ ~= nil) then
							if(toch(summ) ~= nil) then
								summ = toch(summ)
								if(IDS[id] ~= nil) then
									local secPlayer = IDS[id]
									if(getElementData(secPlayer, "Login") == true) then
										local x, y, z = getElementPosition(secPlayer)
										local x1, y1, z1 = getElementPosition(thePlayer)
										local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
										if(dist < 10) then
											local money = toch(getElementData(secPlayer, "Money"))
											if(summ >= 500 and summ <= 10000) then
												if(money >= summ) then
													SED(secPlayer, "SexPrice", summ)
													SED(secPlayer, "SexHealer", thePlayer)
													showPlayerDialog(secPlayer, 53, 1, "Операция по смене пола.", "Врач " .. getElementData(thePlayer, "Name") .. " хочет провести Вам операцию по смене пола.\nСтоимость данной услуги: " .. summ .. "$.", "Принять", "Отмена")
												else
													addBox("Ошибка: У данного игрока слишком мало денег.", thePlayer, 255, 0, 0)
												end
											else
												addBox("Ошибка: Сумма может быть\nНе менее 500$ и не более 10000$", thePlayer, 255, 0, 0)
											end
										else
											addBox("Ошибка: Данный игрок слишком далеко от Вас.", thePlayer, 255, 0, 0)
										end
									else
										addBox("Ошибка: Данный игрок не авторизован.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Ошибка: Данный игрок не на сервере.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: Сумма введена некорректно.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: Вы не ввели сумму.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: Вы некорректно ввели ID игрока.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: Вы не ввели ID игрока.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: У Вас нет доступа к данной команде.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: У Вас нет доступа к данной команде.", thePlayer, 255, 0, 0)
		end
	end
end

function onAdminAsay( thePlayer, command, ... )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 2) then
			local arg = {...}
			local a = #arg
			if(a > 0) then
				local string = "Администратор " .. getElementData(thePlayer, "Name") .. " в чат: " .. table.concat(arg, " ")
				for i, n in pairs(IDS) do
					if(getElementData(n, "Login") == true) then
						sendClientMessage(string, n, 255, 60, 0)
					end
				end
			else
				addBox("Ошибка: Вы не ввели текст.", thePlayer, 255, 0, 0)
			end
		end
	end
end

function onPlayerNews( thePlayer, command, ... )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") == 6) then
			if(getElementData(thePlayer, "Rank") > 3) then
				if(getPedOccupiedVehicle(thePlayer) ~= false) then
					local veh = getPedOccupiedVehicle(thePlayer)
					if(getElementData(veh, "VCNCar") ~= false) then
						local arg = {...}
						local a = #arg
						if(a > 0) then
							local string = "[VCN] " .. getElementData(thePlayer, "Name") .. ": " .. table.concat(arg, " ")
							for i, n in pairs(IDS) do
								if(getElementData(n, "Login") == true) then
									sendClientMessage(string, n, 0, 240, 100)
								end
							end
						else
							addBox("Ошибка:Вы не ввели текст.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка:Вы находитесь не в машине VCN.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка:Вы не находитесь в машине VCN.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка:У Вас недостаточно прав,\nЧтобы использовать данную команду.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка:У Вас нет доступа к данной команде", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerLive( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") == 6) then
			if(getElementData(thePlayer, "Rank") > 3) then
				if(id ~= nil) then
					if(toch(id) ~= nil) then
						id = toch(id)
						if(IDS[id] ~= nil) then
							local secPlayer = IDS[id]
							if(getElementData(secPlayer, "Login") == true) then
								local veh = getPedOccupiedVehicle(secPlayer)
								if(veh ~= nil and veh ~= false) then
									if(veh == getPedOccupiedVehicle(thePlayer)) then
										if(getElementData(veh, "VCNCar") ~= false) then
											if(getElementData(secPlayer, "LiveVCN") == false) then
												SED(secPlayer, "LiveVCN", 1)
												addBox("Вы передали микрофон " .. getElementData(secPlayer, "Name"), thePlayer, 0, 255, 60)
												addBox(getElementData(thePlayer, "Name") .. " передал Вам микрофон.", secPlayer, 0, 255, 60)
											else
												removeElementData(secPlayer, "LiveVCN")
												addBox("Вы забрали микрофон " .. getElementData(secPlayer, "Name"), thePlayer, 0, 255, 60)
												addBox(getElementData(thePlayer, "Name") .. " забрал у Вас микрофон.", secPlayer, 0, 255, 60)
											end
										else
											addBox("Ошибка: Вы должны находиться в машине VCN,\nЧтобы сделать это.", thePlayer, 255, 40, 0)
										end
									else
										addBox("Ошибка: Вы должны находиться в одной машине.", thePlayer, 255, 40, 0)
									end
								else
									addBox("Ошибка: Данный игрок не находится в машине.", thePlayer, 255, 40, 0)
								end
							else
								addBox("Ошибка: Данный игрок не авторизован.", thePlayer, 255, 40, 0)
							end
						else
							addBox("Ошибка: Данный игрок не в сети.", thePlayer, 255, 40, 0)
						end
					else
						addBox("Ошибка: ID введен некорректно.", thePlayer, 255, 40, 0)
					end
				else
					addBox("Ошибка: Вы не ввели id игрока.", thePlayer, 255, 40, 0)
				end
			else
				addBox("Ошибка: У Вас нет доступа к данной команде.", thePlayer, 255, 40, 0)
			end
		else
			addBox("Ошибка: У Вас нет доступа к данной команде.", thePlayer, 255, 40, 0)
		end
	end
end

function onPlayerArrest( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") == 8) then
			if(getElementData(thePlayer, "Rank") >= 3) then
				if(id ~= nil) then
					if(toch(id) ~= nil) then
						id = toch(id)
						if(IDS[id] ~= nil) then
							local secPlayer = IDS[id]
							if(getElementData(secPlayer, "Login") == true) then
								if(getElementData(secPlayer, "Wanted") ~= false) then
									local veh1 = getPedOccupiedVehicle(secPlayer)
									local minx, maxy, maxx, miny = 368.9287109375, -466.416015625, 403, -509.9267578125
									local int = 2
									local x, y, z = getElementPosition(thePlayer)
									local x1, y1, z1 = getElementPosition(secPlayer)
									if(thePlayer ~= secPlayer) then
										if(getElementData(secPlayer, "Wanted") > 0) then
											if(veh1 ~= false) then
												if(getElementData(veh1, "PoliceID") ~= false) then
													local veh2 = getPedOccupiedVehicle(thePlayer)
													if(veh1 == veh2) then
														removePedFromVehicle(secPlayer)
														SEP(secPlayer, 391.4736328125, -507.255859375, 9.362735748291)
														addBox("Игрок " .. getElementData(secPlayer, "Name") .. " отправлен Вами в тюрьму.", thePlayer, 255, 255, 0)
														addBox("Вы были отправлены в тюрьму\nПолицейским " .. getElementData(thePlayer, "Name"), secPlayer, 255, 255, 0)
														SED(secPlayer, "PoliceJail", 600 * getElementData(secPlayer, "Wanted"))
														addBox("Время ожидания: " .. getElementData(secPlayer, "PoliceJail") .. " сек.", secPlayer, 255, 255, 0)
														SED(secPlayer, "Wanted", 0)
														updatePlayerAccount(secPlayer, "Wanted", 0)
														updatePlayerAccount(secPlayer, "PoliceJail", 600 * getElementData(secPlayer, "Wanted"))
														setPlayerWantedLevel(secPlayer, 0)
														SET(secPlayer, 2)
														toggleAllControls(secPlayer, true)
														setPedAnimation(secPlayer, "BSKTBALL", "BBALL_idle_O", 1, false)
														removeElementData(secPlayer, "Cuffed")
														setElementFrozen(secPlayer, false)
														takeWeapon(secPlayer, 24)
														takeWeapon(secPlayer, 25)
														takeWeapon(secPlayer, 30)
														takeWeapon(secPlayer, 31)
													else
														addBox("Ошибка: Вы должны находиться\nВ одной машине.", thePlayer, 255, 0, 0)
													end
												else
													addBox("Ошибка: Данный игрок не находится\nВ полицейской машине.", thePlayer, 255, 0, 0)
												end
											elseif(x > minx and x < maxx and y > miny and y < maxy and x1 > minx and x1 < maxx and y1 > miny and y < maxy) then
												removePedFromVehicle(secPlayer)
												SEP(secPlayer, 391.4736328125, -507.255859375, 9.362735748291)
												addBox("Игрок " .. getElementData(secPlayer, "Name") .. " отправлен Вами в тюрьму.", thePlayer, 255, 255, 0)
												addBox("Вы были отправлены в тюрьму\nПолицейским " .. getElementData(thePlayer, "Name"), secPlayer, 255, 255, 0)
												SED(secPlayer, "PoliceJail", 600 * getElementData(secPlayer, "Wanted"))
												addBox("Время ожидания: " .. getElementData(secPlayer, "PoliceJail") .. " сек.", secPlayer, 255, 255, 0)
												SED(secPlayer, "Wanted", 0)
												updatePlayerAccount(secPlayer, "Wanted", 0)
												updatePlayerAccount(secPlayer, "PoliceJail", 600 * getElementData(secPlayer, "Wanted"))
												setPlayerWantedLevel(secPlayer, 0)
												SET(secPlayer, 2)
												toggleAllControls(secPlayer, true)
												setPedAnimation(secPlayer, "BSKTBALL", "BBALL_idle_O", 1, false)
												removeElementData(secPlayer, "Cuffed")
												setElementFrozen(secPlayer, false)
											else
												addBox("Ошибка: Вы не находитесь в машине\nИли в полицейском участке..", thePlayer, 255, 0, 0)
											end
										else
											addBox("Ошибка: Данный игрок не в розыске.", thePlayer, 255, 0, 0)
										end
									else
										addBox("Ошибка: Вы не можете арестовать\nСамого себя.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Ошибка: Данный игрок не в розыске.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: Данный игрок не авторизован.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: Данный игрок не в сети.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: ID игрока введён некорректно.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: Вы не ввели ID игрока.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: У Вас нет доступа к этой команде.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: У Вас нет доступа к этой команде.", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerUnarrest( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") == 8) then
			if(getElementData(thePlayer, "Rank") >= 3) then
				if(id ~= nil) then
					if(toch(id) ~= nil) then
						id = toch(id)
						if(IDS[id] ~= nil) then
							local secPlayer = IDS[id]
							if(getElementData(secPlayer, "Login") == true) then
								if(getElementData(secPlayer, "PoliceJail") ~= false) then
									if(getElementData(secPlayer, "PoliceJail") > 0) then
										dbExec(mysql, "UPDATE `Accounts` SET `PoliceJail` = ? WHERE `ID` = ?", 0, getElementData(secPlayer, "AccID"))
										removeElementData(secPlayer, "PoliceJail")
										if(getElementData(secPlayer, "AdminJail") == false) then
											SEP(secPlayer, -870.55078125, -682.4189453125, 11.201224327087)
											SET(secPlayer, 0)
											SIDP(secPlayer, 0)
										else
											addBox("Однако игрок останется в тюрьме\nПоскольку его посадил администратор.", thePlayer, 255, 0, 0)
										end
										addBox("Вы были досрочно освобождены\nПолицейским " .. getElementData(thePlayer, "Name") .. ".", secPlayer, 255, 255, 0)
										addBox("Вы досрочно освободили " .. getElementData(secPlayer, "Name") .. " из тюрьмы.", thePlayer, 255, 255, 0)
										for i, n in pairs(IDS) do
											if(getElementData(n, "Login") == true) then
												if(getElementData(n, "Faction") == 8) then
													if(n ~= thePlayer) then
														sendClientMessage("Полицейский " .. getElementData(thePlayer, "Name") .. " досрочно выпустил " .. getElementData(secPlayer, "Name") .. " из-под ареста.", n, 255, 255, 0)
													end
												end
											end 
										end
									else
										addBox("Ошибка: Данный игрок уже выпущен.", thePlayer, 255, 40, 0)
									end
								else
									addBox("Ошибка: Данный игрок не находится в тюрьме.", thePlayer, 255, 40, 0)
								end
							else
								addBox("Ошибка: Данный игрок не авторизован.", thePlayer, 255, 40, 0)
							end
						else
							addBox("Ошибка: Данный игрок не найден.", thePlayer, 255, 40, 0)
						end
					else
						addBox("Ошибка: Вы ввели некорректный ID.", thePlayer, 255, 40, 0)
					end
				else
					addBox("Ошибка: Вы не ввели ID.", thePlayer, 255, 40, 0)
				end
			else
				addBox("Ошибка: У Вас нет доступа к данной команде.", thePlayer, 255, 40, 0)
			end
		else
			addBox("Ошибка: У Вас нет доступа к данной команде.", thePlayer, 255, 40, 0)
		end
	end
end

function onPlayerPhoneCall( thePlayer, command, callnumber)
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "PhoneNumber") ~= false) then
			local number = toch(getElementData(thePlayer, "PhoneNumber"))
			if(number > 0) then
				if(callnumber ~= nil) then
					if(toch(callnumber) ~= nil) then
						callnumber = toch(callnumber)
						if(callnumber > 0) then
							if(PhoneNumbers[callnumber] ~= nil) then
								local secPlayer = PhoneNumbers[callnumber]
								if(isElement(secPlayer) == true) then
									if(secPlayer ~= thePlayer) then
										if(getElementData(secPlayer, "PhonePlayer") == false) then
											addBox("Вы позвонили на номер " .. callnumber .. ".\nОжидайте ответа.", thePlayer, 255, 255, 0)
											addBox(getElementData(thePlayer, "Name") .. " попытался до Вас дозвониться.", secPlayer, 255, 255, 0)
											addBox("Чтобы принять звонок, введите /accept,\nИли чтобы отклонить, введите /refuse", secPlayer, 255, 255, 0)
											SED(secPlayer, "PhonePlayer", thePlayer)
											SED(thePlayer, "PhonePlayer", secPlayer)
										else
											addBox("Абонент занят, повторите попытку позднее.", thePlayer, 255, 0, 0)
										end
									else
										addBox("Вы не можете позвонить самому себе.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Произошла ошибка связи,\nПовторите попытку позже.", thePlayer, 255, 0, 0)
								end
							elseif(callnumber == 2) then
								if(getElementData(thePlayer, "Zv") == false) then
									local size = table.getn(ZakazPolice)
									size = size + 1
									for i,n in pairs(IDS) do
										if(getElementData(n, "Login") == true) then
											if(getElementData(n, "Faction") == 8) then
												sendClientMessage("Житель " .. getElementData(thePlayer, "Name") .. " просит помощи полиции по телефону! Принять его звонок: \"/pcall " .. size .. "\"", n, 255, 90, 0)
											end
										end
									end
									SED(thePlayer, "Zv", size)
									ZakazPolice[size] = {}
									local x, y, z = getElementPosition(thePlayer)
									ZakazPolice[size]["x"], ZakazPolice[size]["y"], ZakazPolice[size]["z"] = x, y, z
									ZakazPolice[size]["Player"] = thePlayer
									ZakazPolice[size]["Accept"] = false
									setTimer(function ( id )
										if(ZakazPolice[id] ~= nil) then
											if(isElement(ZakazPolice[id]["Player"])) then
												if(ZakazPolice[id]["Accept"] == false) then
													addBox("Ваш звонок в полицию никто не принял.", ZakazPolice[id]["Player"], 255, 0, 0)
												end
												removeElementData(ZakazPolice[id]["Player"], "Zv")
											end
										end
										ZakazPolice[id] = nil
									end, 60 * 1000, 1, size)
									sendClientMessage("Вы вызвали полицию.\nОжидайте, пока Ваш звонок примут!", thePlayer, 255, 90, 0)
								else
									addBox("Вы уже сделали звонок!", thePlayer, 255, 0, 0)
								end
							elseif(callnumber == 1) then
								if(getElementData(thePlayer, "Zv2") == false) then
									local size = table.getn(ZakazTaxi)
									size = size + 1
									ZakazTaxi[size] = {}
									SED(thePlayer, "Zv2", size)
									local x, y, z = getElementPosition(thePlayer)
									ZakazTaxi[size]["x"], ZakazTaxi[size]["y"], ZakazTaxi[size]["z"] = x, y, z
									ZakazTaxi[size]["Player"] = thePlayer
									ZakazTaxi[size]["Accept"] = false
									for i, n in pairs(IDS) do
										if(getElementData(n, "Login") == true) then
											if(getElementData(n, "PWork") == 2) then
												if(getElementData(n, "TaxiVehicle") ~= false) then
													sendClientMessage(getElementData(thePlayer, "Name") .. " [" .. getElementData(thePlayer, "ID") .. "] вызвал такси.\nЧтобы принять вызов, используйте: \"/tcall " .. size .. "\"", n, 255, 90, 0)
												end
											end
										end
									end
									setTimer(function ( id )
										if(ZakazTaxi[id] ~= nil) then
											if(isElement(ZakazTaxi[id]["Player"])) then
												if(ZakazTaxi[id]["Accept"] == false) then
													addBox("Ни один из таксистов не принял\nВаш вызов!", ZakazTaxi[id]["Player"], 255, 0, 0)
												end
												removeElementData(ZakazTaxi[id]["Player"], "Zv2")
											end
										end
										ZakazTaxi[id] = nil
									end, 60 * 1000, 1, size)
									addBox("Вы вызвали такси.\nОжидайте, пока его примут, в течение 60 секунд.", thePlayer, 255, 90, 0)
								else
									addBox("Вы уже сделали звонок!", thePlayer, 255, 0, 0)
								end
							elseif(callnumber == 3) then
								if(getElementData(thePlayer, "Zv1") == false) then
									local size = table.getn(ZakazEms)
									size = size + 1
									SED(thePlayer, "Zv1", size)
									ZakazEms[size] = {}
									ZakazEms[size]["Player"] = thePlayer
									ZakazEms[size]["Accept"] = false
									local x, y, z = getElementPosition(thePlayer)
									ZakazEms[size]["x"], ZakazEms[size]["y"], ZakazEms[size]["z"] = x, y, z
									for i,n in pairs(IDS) do
										if(getElementData(n, "Login") == true) then
											if(getElementData(n, "Faction") == 7) then
												sendClientMessage(getElementData(thePlayer, "Name") .. " [" .. getElementData(thePlayer, "ID") .. "] вызывает скорую! Чтобы принять вызов, используйте: \"/hcall " .. size .. "\"", n, 255, 90, 0)
											end
										end
									end
									setTimer(function ( id )
										if(ZakazEms[id] ~= nil) then
											if(isElement(ZakazEms[id]["Player"])) then
												if(ZakazEms[id]["Accept"] == false) then
													addBox("Ни один медик не принял Ваш вызов!", ZakazEms[id]["Player"], 255, 0, 0)
												end
												removeElementData(ZakazEms[id]["Player"], "Zv1")
											end
										end
										ZakazEms[id] = nil
									end, 60 * 1000, 1, size)
									addBox("Вы вызвали скорую.\nОжидайте, пока его примут, в течение 60 сек.", thePlayer, 255, 0, 0)
								else
									addBox("Вы уже сделали звонок!", thePlayer, 255, 0, 0)
								end
							else
								addBox("Данный абонент находится\nВне зоны действия сети.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Номер телефона введён некорректно.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Номер телефона введён некорректно.", thePlayer, 255, 0, 0)
					end
				else
					showPlayerDialog(thePlayer, 64000, 1, "Список номеров", "001 - такси\n002 - полиция\n003 - скорая.", "ок", "отмена")
				end
			else
				addBox("У Вас нет мобильного телефона.", thePlayer, 255, 0, 0)
			end
		else
			addBox("У Вас нет мобильного телефона.", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerAccept( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "PhonePlayer") ~= false) then
			if(getElementData(thePlayer, "LiveVCN") == false) then
				local secPlayer = getElementData(thePlayer, "PhonePlayer")
				if(isElement(secPlayer) == true) then
					if(getElementData(thePlayer, "AcceptedCall") == false) then
						if(getElementData(secPlayer, "AcceptedCall") == false) then
							SED(secPlayer, "AcceptedCall", true)
							SED(thePlayer, "AcceptedCall", true)
							addBox(getElementData(thePlayer, "Name") .. " принял Ваш звонок.\nЧтобы завершить звонок,\nИспользуйте /refuse.", secPlayer, 255, 255, 0)
							addBox("Вы приняли звонок от " .. getElementData(secPlayer, "Name") .. "\nЧтобы завершить звонок,\nИспользуйте /refuse.", thePlayer, 255, 255, 0)
							setPedAnimation(thePlayer, "ped", "phone_talk", 1, true, true, false, true)
							setPedAnimation(secPlayer, "ped", "phone_talk", 1, true, true, false, true)
							local id = getElementData(thePlayer, "ID")
							local secid = getElementData(secPlayer, "ID")
							PhoneObject[id] = createObject(16097, 0, 0, 0)
							PhoneObject[secid] = createObject(16097, 0, 0, 0)
							exports.bone:attachElementToBone(PhoneObject[id], thePlayer, 12,0.03,0.02,0.12,0,90,90)
							exports.bone:attachElementToBone(PhoneObject[secid], secPlayer, 12,0.03,0.02,0.12,0,90,90)
						else
							addBox("Ошибка: Данный абонент уже разговаривает.", thePlayer, 255, 0, 0)
							removeElementData(thePlayer, "PhonePlayer")
							if(getElementData(thePlayer, "AcceptedCall") ~= false) then
								removeElementData(thePlayer, "AcceptedCall")
							end
						end
					else
						addBox("Вы уже разговариваете.", thePlayer, 255, 255, 0)
					end
				else
					addBox("Произошла ошибка связи,\nАбонент вне зоны действия.", thePlayer, 255, 0, 0)
					removeElementData(thePlayer, "PhonePlayer")
					if(getElementData(thePlayer, "AcceptedCall") ~= false) then
						removeElementData(thePlayer, "AcceptedCall")
					end
				end
			else
				addBox("Вы не можете принять звонок в эфире.", thePlayer, 255, 0, 0)
			end
		else
			addBox("У Вас не было предложений, чтобы их принять.", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerRefuse( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "PhonePlayer") ~= false) then
			if(getElementData(thePlayer, "AcceptedCall") == true) then
				local secPlayer = getElementData(thePlayer, "PhonePlayer")
				if(isElement(secPlayer) == true) then
					removeElementData(secPlayer, "PhonePlayer")
					removeElementData(secPlayer, "AcceptedCall")
					addBox(getElementData(thePlayer, "Name") .. " завершил звонок.", secPlayer, 255, 255, 0)
				end
				setPedAnimation(secPlayer, "BSKTBALL", "BBALL_idle_O", 1, false)
				setPedAnimation(thePlayer, "BSKTBALL", "BBALL_idle_O", 100, false)
				addBox("Вы закончили разговор", thePlayer, 255, 255, 0)
				removeElementData(thePlayer, "PhonePlayer")
				removeElementData(thePlayer, "AcceptedCall")
				local id = getElementData(thePlayer, "ID")
				if(PhoneObject[id] ~= nil) then
					local obj = PhoneObject[id]
					exports.bone:detachElementFromBone(obj)
					destroyElement(obj)
					PhoneObject[thePlayer] = nil
				end
				local secid = getElementData(secPlayer, "ID")
				if(PhoneObject[secid] ~= nil) then
					local obj = PhoneObject[secid]
					exports.bone:detachElementFromBone(obj)
					destroyElement(obj)
					PhoneObject[secid] = nil
				end
			else
				local secPlayer = getElementData(thePlayer, "PhonePlayer")
				if(isElement(secPlayer) == true) then
					removeElementData(secPlayer, "PhonePlayer")
					removeElementData(secPlayer, "AcceptedCall")
					addBox(getElementData(thePlayer, "Name") .. " отказался от звонка.", secPlayer, 255, 255, 0)
				end
				addBox("Вы закончили разговор", thePlayer, 255, 255, 0)
				removeElementData(thePlayer, "PhonePlayer")
				removeElementData(thePlayer, "AcceptedCall")
				if(PhoneObject[thePlayer] ~= nil) then
					local obj = PhoneObject[thePlayer]
					exports.bone:detachElementFromBone(obj)
					destroyElement(obj)
					PhoneObject[thePlayer] = nil
				end
				if(PhoneObject[secPlayer] ~= nil) then
					local obj = PhoneObject[secPlayer]
					exports.bone:detachElementFromBone(obj)
					destroyElement(obj)
					PhoneObject[secPlayer] = nil
				end
			end
		else
			addBox("У Вас нет предложений,\nОт которых можно отказаться.", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerSms( thePlayer, command, numbersms, ... )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "PhoneNumber") > 0) then
			if(numbersms ~= nil) then
				if(toch(numbersms) ~= nil) then
					numbersms = toch(numbersms)
					if(numbersms > 0) then
						if(PhoneNumbers[numbersms] ~= nil) then
							local secPlayer = PhoneNumbers[numbersms]
							if(isElement(secPlayer) == true) then
								if(secPlayer ~= thePlayer) then
									if(getElementData(thePlayer, "Mute") == 0) then
										local arg = {...}
										local a = #arg
										if(a > 0) then
											local num = math.floor(toch(getElementData(thePlayer, "PhoneNumber")) / 1000)
											local num2 = math.floor(toch(getElementData(thePlayer, "PhoneNumber")) % 1000)
											if(num2 < 100) then
												if(num2 < 10) then
													num2 = "00" .. num2
												else
													num2 = "0" .. num2
												end
											end
											local num1 = math.floor(toch(getElementData(secPlayer, "PhoneNumber")) / 1000)
											local num12 = math.floor(toch(getElementData(secPlayer, "PhoneNumber")) % 1000)
											if(num12 < 100) then
												if(num12 < 10) then
													num12 = "00" .. num12
												else
													num12 = "0" .. num12
												end
											end
											local string = "СМС от " .. num .. "-" .. num2 .. ": " .. table.concat(arg, " ")
											local string1 = "СМС для " .. num1 .. "-" .. num12 .. ": " .. table.concat(arg, " ")
											sendClientMessage(string, secPlayer, 255, 255, 0)
											sendClientMessage(string1, thePlayer, 255, 255, 0)
										else
											addBox("Вы не набрали текст сообщения.", thePlayer, 255, 255, 0)
										end
									else
										addBox("У Вас затычка.", thePlayer, 255, 255, 0)
									end
								else
									addBox("Вы не можете отправить СМС самому себе.", thePlayer, 255, 255, 0)
								end
							else
								addBox("Номер находится вне зоны действия сети.", thePlayer, 255, 255, 0)
							end
						else
							addBox("Номер находится вне зоны действия сети.", thePlayer, 255, 255, 0)
						end
					else
						addBox("Номер набран некорректно", thePlayer, 255, 255, 0)
					end
				else
					addBox("/sms [номер] [текст]", thePlayer, 255, 255, 0)
				end
			else
				addBox("Вы не набрали номер для смс.", thePlayer, 255, 255, 0)
			end
		else
			addBox("У Вас нет мобильного телефона.", thePlayer, 255, 255, 0)
		end
	end
end

function onPlayerAns( thePlayer, command, id, ... )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			if(id ~= nil) then
				if(toch(id) ~= nil) then
					id = toch(id)
					if(ServerPerem["Reports"][id] ~= nil) then
						if(isElement(ServerPerem["Reports"][id]["Player"])) then
							local arg = {...}
							local a = #arg
							if(a > 0) then
								ServerPerem["Reports"][id]["Otvet"] = true
								local string = "Адм. " .. getElementData(thePlayer, "Name") .. " [" .. getElementData(thePlayer, "ID") .. "] ответил Вам: " .. table.concat(arg, " ")
								sendClientMessage(string, ServerPerem["Reports"][id]["Player"], 255, 207, 158)
								local str = "Адм. " .. getElementData(thePlayer, "Name") .. " [" .. getElementData(thePlayer, "ID") .. "] для " .. getElementData(ServerPerem["Reports"][id]["Player"], "Name") .. " [" .. getElementData(ServerPerem["Reports"][id]["Player"], "ID") .. "] : " .. table.concat(arg, " ")
								for i, n in pairs(IDS) do
									if(getElementData(n, "Login") == true) then
										if(getElementData(n, "Admin") > 0) then
											sendClientMessage(str, n, 255, 207, 158)
										end
									end
								end
							else
								addBox("Ошибка: Вы не указали текст для ответа.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: Данный игрок не найден.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: Данный репорт не найден.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: Вы указали некорректный ID игрока.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: Вы не указали ID игрока.", thePlayer, 255, 0, 0)
			end
		end
	end
end

function onPlayerGetId( thePlayer, command, text )
	if(getElementData(thePlayer, "Login") == true) then
		if(text ~= nil) then
			local integ = 0
			local text = string.lower(text)
			for i, n in pairs(IDS) do
				local name = getElementData(n, "Name")
				name = string.lower(name)
				if(string.find(name, text) ~= nil) then
					integ = integ + 1
					if(integ == 0) then
						sendClientMessage("Игроки с похожими никами:", thePlayer, 180, 180, 0)
					end
					sendClientMessage(integ .. ": " .. getElementData(n, "Name") .. " (" .. getElementData(n, "ID") .. ")", thePlayer, 180, 180, 0)
				end
			end
			if(integ == 0) then
				addBox("Игроков с такими никами не найдено.", thePlayer, 180, 180, 0)
			end
		else
			addBox("Ошибка: Вы не ввели имя игрока.", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerTriggerAdminDamage( thePlayer )
	for i, n in pairs(IDS) do
		if(isElement(thePlayer) == true) then
			if(getElementType(thePlayer) == "player") then
				if(getElementData(n, "Login") == true) then
					if(getElementData(n, "Admin") > 0) then
						sendClientMessage(getElementData(thePlayer, "Name") .. " (" .. getElementData(thePlayer, "ID") .. ") наносит урон в зелёной зоне.", n, 255, 60, 0)
					end
				end
			end
		end
	end
end

function trigCheckMenu( arg1 )
	if(arg1 == client) then
		onPlayerCheckMenu(arg1)
	end
end

addEvent("trigCheckMenu", true)
addEventHandler("trigCheckMenu", root, trigCheckMenu)

function onPlayerCheckMenu( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		local id = getElementData(thePlayer, "ID")
		if(TimerMenu[id] == nil) then
			local query = dbQuery(mysql, "SELECT `Donate` FROM `Accounts` WHERE `Name` = ?", getElementData(thePlayer, "Name"))
			local result = dbPoll(query, -1)
			SED(thePlayer, "Donate", result[1]["Donate"])
			local fact = getElementData(thePlayer, "Faction")
			local fname = ""
			local frank = ""
			local house = getElementData(thePlayer, "House")
			local bus = getElementData(thePlayer, "BusOwnID")
			if(bus == 0) then
				bus = "Отсутствует"
			end
			if(house == 0) then
				house = "Отсутствует"
			end
			if(fact > 0 and fact < 10) then
				fname = FactionName[fact][2]
				frank = FactionRankName[fact][getElementData(thePlayer, "Rank")]
			else
				fname = "Отсутствует"
				frank = "Отсутствует"
			end
			triggerClientEvent(thePlayer, "onPlayerCheckMenu", thePlayer, getElementData(thePlayer, "Lvl"), getElementData(thePlayer, "Exp"), getElementData(thePlayer, "Sex"), getElementData(thePlayer, "PhoneNumber"), fname, fact, frank, getElementData(thePlayer, "Money"), house, bus, getElementData(thePlayer, "PWork"), getElementData(thePlayer, "Rank"), getElementData(thePlayer, "Warn"), getElementData(thePlayer, "Donate"), getElementData(thePlayer, "Bank"), coefmoney)		
		end
	end
end

function onAdminUseSpawn( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") ~= false) then
		if(getElementData(thePlayer, "Admin") > 0) then
			if(id ~= nil) then
				if(toch(id) ~= nil) then
					id = toch(id)
					if(IDS[id] ~= nil) then
						local secPlayer = IDS[id]
						if(secPlayer ~= thePlayer) then
							if(getElementData(secPlayer, "Login") == true) then
								if(getElementData(thePlayer, "Admin") > 2) then
									customSpawnPlayer(secPlayer)
									addBox("Вы заспавнили " .. getElementData(secPlayer, "Name") .. " (" .. getElementData(secPlayer, "ID") .. ")", thePlayer, 255, 255, 0)
									addBox("Администратор " .. getElementData(thePlayer, "Name") .. " заспавнил Вас.", secPlayer, 255, 255, 0)
								else
									addBox("Недоступно.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: Данный игрок не авторизован.", thePlayer, 255, 0, 0)
							end
						else
							customSpawnPlayer(thePlayer)
							addBox("Вы заспавнили себя.", thePlayer, 255, 255, 0)
						end
					else
						addBox("Ошбика: Данный игрок не найден.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: ID введён некорректно", thePlayer, 255, 0, 0)
				end
			else
				customSpawnPlayer(thePlayer)
				addBox("Вы заспавнили себя.", thePlayer, 0, 60, 255)
			end
		end
	end
end

function onAdminUseMute( thePlayer, command, id, time, ... )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 1) then
			if(id ~= nil) then
				if(toch(id) ~= nil) then
					id = toch(id)
					local reason = {...}
					if(IDS[id] ~= nil) then
						local secPlayer = IDS[id]
						if(getElementData(secPlayer, "Login") == true) then
							if(secPlayer ~= thePlayer) then
								local adm = getElementData(secPlayer, "Admin")
								if(adm < getElementData(thePlayer, "Admin")) then
									if(time ~= nil) then
										if(toch(time) ~= nil) then
											time = toch(time)
											local a = #reason
											if(a > 0) then
												reason = table.concat( reason, " " )
												local secTime = getElementData(secPlayer, "Mute")
												if(string.len(reason) > 0) then
													if(time > 0 and time <= 180) then
														if(secTime == 0) then
															SED(secPlayer, "Mute", time * 60)
															addBox("Вы выдали затычку игроку " .. getElementData(secPlayer, "Name") .. " (" .. getElementData(secPlayer, "ID") .. ")\nНа " .. time .. " мин по причине: " .. reason, thePlayer, 255, 0, 0)
															addBox("Администратор " .. getElementData(thePlayer, "Name") .. " выдал\nВам затычку на " .. time .. " мин по причине: " .. reason, secPlayer, 255, 0, 0)
															dbExec(mysql, "UPDATE `Accounts` set `Mute` = ? WHERE `ID` = ?", time, getElementData(secPlayer, "AccID"))
															aid = aid + 1
															dbExec(mysql, "INSERT into `alllogs` (`ID`, `AccID`, `Reason`, `SecID`, `Type`, `Value`) VALUES (?, ?, ?, ?, 8, ?)", aid, getElementData(secPlayer, "AccID"), reason, getElementData(thePlayer, "AccID"), time)
															local str = "Администратор " .. getElementData(thePlayer, "Name") .. " выдал затычку " .. getElementData(secPlayer, "Name") .. " [" .. getElementData(secPlayer, "ID") .. "] на " .. time .. " мин. Причина: " .. reason
															for i,n in pairs(IDS) do
																if(getElementData(n, "Login") == true) then
																	sendClientMessage(str, n, 255, 30, 30)
																end
															end
														else
															addBox("У данного игрока уже есть затычка.", thePlayer, 255, 0, 0)
														end
													elseif(time == 0) then
														if(secTime > 0) then
															SED(secPlayer, "Mute", 0)
															addBox("Администратор " .. getElementData(thePlayer, "Name") .. "\nСнял с Вас затычку по причине: " .. reason, secPlayer, 255, 0, 0)
															addBox("Вы сняли затычку с игрока " .. getElementData(secPlayer, "Name") .. "(" .. getElementData(secPlayer, "ID") .. ")\nПо причине: " .. reason, thePlayer, 255, 0, 0)
															dbExec(mysql, "UPDATE `Accounts` set `Mute` = ? WHERE `ID` = ?", time, getElementData(secPlayer, "AccID"))
															aid = aid + 1
															dbExec(mysql, "INSERT into `alllogs` (`ID`, `AccID`, `Reason`, `SecID`, `Type`) VALUES (?, ?, ?, ?, 9)", aid, getElementData(secPlayer, "AccID"), reason, getElementData(thePlayer, "AccID"))
															local str = "Администратор " .. getElementData(thePlayer, "Name") .. " снял затычку с " .. getElementData(secPlayer, "Name") .. " [" .. getElementData(secPlayer, "ID") .. "]. Причина: " .. reason
															for i,n in pairs(IDS) do
																if(getElementData(n, "Login") == true) then
																	sendClientMessage(str, n, 255, 30, 30)
																end
															end
														else
															addBox("Данный игрок не находится в муте.", thePlayer, 255, 0, 0)
														end
													else
														addBox("Ошибка: Время мута введено некорректно.", thePlayer, 255, 0, 0)
													end
												else
													addBox("Ошибка: Вы не ввели причину.", thePlayer, 255, 0, 0)
												end
											else
												addBox("Ошибка: Вы не ввели причину.", thePlayer, 255, 0, 0)
											end
										else
											addBox("Ошибка: Время мута введено\nНекорректно.", thePlayer, 255, 0, 0)
										end
									else
										addBox("Ошибка: Вы не ввели время мута.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Ошибка: Данный игрок является\nАдминистратором выше Вас.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: Вы не можете выдать затычку\nСамому себе.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: Данный игрок не авторизован.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: Данный игрок не найден.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: ID игрока введён\nНекорректно.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: Вы не ввели id игрока.", thePlayer, 255, 0, 0)
			end
		else
			addBox("У Вас нет доступа к данной команде.", thePlayer, 255, 0, 0)
		end
	end
end

function onAdminRepair( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 1) then
			local veh = getPedOccupiedVehicle(thePlayer)
			if(veh ~= false) then
				setElementHealth(veh, 1000)
				setVehicleDoorState(veh, 0, 0)
				setVehicleDoorState(veh, 1, 0)
				setVehicleDoorState(veh, 2, 0)
				setVehicleDoorState(veh, 3, 0)
				setVehicleDoorState(veh, 4, 0)
				setVehicleDoorState(veh, 5, 0)
				setVehicleLightState(veh, 0, 0)
				setVehicleLightState(veh, 1, 0)
				setVehicleLightState(veh, 2, 0)
				setVehicleLightState(veh, 3, 0)
				fixVehicle(veh)
				addBox("Вы отремонтировали Ваш транспорт.", thePlayer, 0, 200, 80)
			else
				addBox("Ошибка: Вы не находитесь в машине.", thePlayer, 255, 0, 0)
			end
		end
	end
end

function onAdminWarn( thePlayer, command, id, ... )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 1) then
			if(id ~= nil) then
				if(toch(id) ~= nil) then
					id = toch(id)
					local arg = {...}
					local a = #arg
					if(a > 0) then
						if(IDS[id] ~= nil) then
							local secPlayer = IDS[id]
							if(getElementData(secPlayer, "Login") == true) then
								if(secPlayer ~= thePlayer) then
									if(getElementData(secPlayer, "Admin") < getElementData(thePlayer, "Admin")) then
										local Warn = getElementData(secPlayer, "Warn")
										aid = aid + 1
										if(Warn == 0) then
											dbExec(mysql, "UPDATE `Accounts` SET `Warn` = 1, `WarnDays` = 14, `Faction` = 0, `Rank` = 0, `WorkSkin` = 0 WHERE `Name` = ?", getElementData(secPlayer, "Name"))
										elseif(Warn == 1) then
											dbExec(mysql, "UPDATE `Accounts` SET `Warn` = 2, `WarnDays` = `WarnDays` + 14 WHERE `Name` = ?", getElementData(secPlayer, "Name"))
										elseif(Warn == 2) then
											dbExec(mysql, "UPDATE `Accounts` SET `Warn` = 0, `Ban` = 30 WHERE `Name` = ?", getElementData(secPlayer, "Name"))
										end
										dbExec(mysql, "INSERT into `alllogs` (`ID`, `AccID`, `Reason`, `SecID`, `Type`) VALUES (?, ?, ?, ?, 4)", aid, getElementData(secPlayer, "AccID"), table.concat(arg, " "), getElementData(thePlayer, "AccID"))
										sendClientMessage("Администратор " .. getElementData(thePlayer, "Name") .. " выдал предупреждение [" .. Warn + 1 .. "/3] игроку " .. getElementData(secPlayer, "Name") .. ". Причина: " .. table.concat(arg, " "), getRootElement(), 255, 30, 0)
										kickPlayer(secPlayer, "Warn")
									else
										addBox("Ошибка: Вы не можете выдать\nПредупреждение администратору.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Ошибка: Вы не можете выдать\nПредупреждение самому себе.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: Данный игрок не авторизован", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: Данный игрок не найден.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: Вы не ввели причину предупреждения", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: ID игрока введён некорректно.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: Вы не ввели ID игрока.", thePlayer, 255, 0, 0)
			end
		end
	end
end

function onAdminUseArmor( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 1) then
			setPedArmor(thePlayer, 100)
		end
	end
end

function onPlayerBuyBusiness( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "BusinessID") ~= false) then
			local id = toch(getElementData(thePlayer, "BusinessID"))
			if(id ~= nil) then
				if(id >= 10) then
					local bus = toch(getElementData(thePlayer, "BusOwnID"))
					if(bus == 0) then
						if(BusinessTable[id]["Owner"] == 0) then
							showPlayerDialog(thePlayer, 60, 1, "Покупка бизнеса", "Действительно ли Вы хотите приобрести данный бизнес?\nСтоимость: 90.000$", "Купить", "Отмена")
						else
							addBox("Ошибка: У данного бизнеса уже есть владелец.", thePlayer, 255, 0, 0)
						end
					elseif(id == toch(getElementData(thePlayer, "BusOwnID"))) then
						addBox("Ошибка: Вы уже владеете этим бизнесом.", thePlayer, 255, 0, 0)
					else
						addBox("Ошибка: Вы не можете приобрести данный\nБизнес.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: Вы не находитесь в бизнесе.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: Вы не находитесь в бизнесе.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: Вы не находитесь в бизнесе.", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerBuyMenu( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "BusOwnID") >= 10) then
			local id = toch(getElementData(thePlayer, "BusOwnID"))
			if(BusinessTable[id]["Type"] == 1) then
				showPlayerDialog(thePlayer, 61, 3, "Управление 24/7", "Пункт управления\nПродать бизнес государству\nПродать бизнес игроку\nОткрыть/закрыть бизнес\nВывесить заказ продуктов\nПополнить счёт бизнеса\nВывести деньги со счёта\nОплатить налог\nСтатистика\nФин. статистика", "Выбор", "Отмена")
			elseif(BusinessTable[id]["Type"] == 3) then
				showPlayerDialog(thePlayer, 61, 3, "Управление пиццерией", "Пункт управления\nПродать бизнес государству\nПродать бизнес игроку\nОткрыть/закрыть бизнес\nВывесить заказ продуктов\nПополнить счёт бизнеса\nВывести деньги со счёта\nОплатить налог\nСтатистика\nФин. статистика", "Выбор", "Отмена")
			elseif(BusinessTable[id]["Type"] == 4) then
				showPlayerDialog(thePlayer, 61, 3, "Управление магазином одежды", "Пункт управления\nПродать бизнес государству\nПродать бизнес игроку\nОткрыть/закрыть бизнес\nВывесить заказ продуктов\nПополнить счёт бизнеса\nВывести деньги со счёта\nОплатить налог\nСтатистика\nФин. статистика", "Выбор", "Отмена")
			elseif(BusinessTable[id]["Type"] == 5) then
				showPlayerDialog(thePlayer, 61, 3, "Управление магазином оружия", "Пункт управления\nПродать бизнес государству\nПродать бизнес игроку\nОткрыть/закрыть бизнес\nВывесить заказ продуктов\nПополнить счёт бизнеса\nВывести деньги со счёта\nОплатить налог\nСтатистика\nФин. статистика", "Выбор", "Отмена")
			elseif(BusinessTable[id]["Type"] == 6) then
				showPlayerDialog(thePlayer, 61, 3, "Управление клубом Малибу", "Пункт управления\nПродать бизнес государству\nПродать бизнес игроку\nОткрыть/закрыть бизнес (недоступно)\nВывесить заказ продуктов\nПополнить счёт бизнеса\nВывести деньги со счёта\nОплатить налог\nСтатистика\nФин. статистика", "Выбор", "Отмена")
			elseif(BusinessTable[id]["Type"] == 7) then
				showPlayerDialog(thePlayer, 61, 3, "Сеть ремонта автомобилей", "Пункт управления\nПродать бизнес государству\nПродать бизнес игроку\nОткрыть/закрыть бизнес (недоступно)\nВывесить заказ продуктов\nПополнить счёт бизнеса\nВывести деньги со счёта\nОплатить налог\nСтатистика\nФин. статистика", "Выбор", "Отмена")
			end
		else
			addBox("Ошибка: У Вас нет магазина для управления.", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerTpAPark2( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			SEP(thePlayer, -883.9658203125, 571.0732421875, 11.060119628906)
		end
	end
end

function onAdminKick( thePlayer, command, id, ... )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") >= 2) then
			if(id ~= nil) then
				if(toch(id) ~= nil) then
					id = toch(id)
					if(IDS[id] ~= nil) then
						local secPlayer = IDS[id]
						if(getElementData(secPlayer, "Login") == true) then
							if(secPlayer ~= thePlayer) then
								if(getElementData(secPlayer, "Admin") < getElementData(thePlayer, "Admin")) then
									local arg = {...}
									local a = #arg
									if(a > 0) then
										local string = "Администратор " .. getElementData(thePlayer, "Name") .. " кикнул игрока " .. getElementData(secPlayer, "Name") .. ". Причина: " .. table.concat(arg, " ")
										sendClientMessage(string, getRootElement(), 255, 30, 0)
										aid = aid + 1
										dbExec(mysql, "INSERT into `alllogs` (`ID`, `AccID`, `Reason`, `SecID`, `Type`) VALUES (?, ?, ?, ?, 10)", aid, getElementData(secPlayer, "AccID"), table.concat(arg, " "), getElementData(thePlayer, "AccID"))
										kickPlayer(secPlayer, "Kick")
									else
										addBox("Ошибка: Вы не ввели причину кика.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Ошибка: Вы не можете кикнуть данного игрока.",  thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: Вы не можете кикнуть самого себя.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: Данный игрок не авторизован.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: Данный игрок не найден.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: ID введен некорректно.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: Вы не ввели ID игрока.", thePlayer, 255, 0, 0)
			end
		end
	end
end

function onAdminBan( thePlayer, command, id, day, ... )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") >= 3) then
			if(id ~= nil) then
				if(toch(id) ~= nil) then
					id = toch(id)
					if(IDS[id] ~= nil) then
						local secPlayer = IDS[id]
						if(getElementData(secPlayer, "Login") == true) then
							if(secPlayer ~= thePlayer) then
								if(getElementData(secPlayer, "Admin") < getElementData(thePlayer, "Admin")) then
									if(day ~= nil) then
										if(toch(day) ~= nil) then
											day = toch(day)
											if(day > 0) then
												local arg = {...}
												local a = #arg
												if(a > 0) then
													local string = "Администратор " .. getElementData(thePlayer, "Name") .. " заблокировал игрока " .. getElementData(secPlayer, "Name") .. " на " .. day .. " дней. Причина: " .. table.concat(arg, " ")
													sendClientMessage(string, getRootElement(), 255, 30, 0)
													aid = aid + 1
													dbExec(mysql, "UPDATE `Accounts` SET `Ban` = ?, `Reason` = ? WHERE `Name` = ?", day, table.concat(arg, " "), getElementData(secPlayer, "Name"))
													dbExec(mysql, "INSERT into `alllogs` (`ID`, `AccID`, `Reason`, `SecID`, `Type`, `Value`) VALUES (?, ?, ?, ?, 3, ?)", aid, getElementData(secPlayer, "AccID"), table.concat(arg, " "), getElementData(thePlayer, "AccID"), day)
													kickPlayer(secPlayer, "Ban " .. day .. ". Reason: " .. table.concat(arg, " "))
												else
													addBox("Ошибка: Вы не ввели причину бана.", thePlayer, 255, 0, 0)
												end
											else
												addBox("Ошибка: количество дней введено некорректно.", thePlayer, 255, 0, 0)
											end
										else
											addBox("Ошибка: количество дней введено некорректно.", thePlayer, 255, 0, 0)
										end
									else
										addBox("Ошибка: Вы не ввели количество дней.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Ошибка: Вы не можете заблокировать данного игрока.",  thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: Вы не можете забанить самого себя.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: Данный игрок не авторизован.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: Данный игрок не найден.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: ID введен некорректно.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: Вы не ввели ID игрока.", thePlayer, 255, 0, 0)
			end
		end
	end
end

function onAdminUnwarn( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") >= 4) then
			if(id ~= nil) then
				if(toch(id) ~= nil) then
					id = toch(id)
					if(IDS[id] ~= nil) then
						local secPlayer = IDS[id]
						if(getElementData(secPlayer, "Login") == true) then
							if(getElementData(secPlayer, "Warn") > 0) then
								local warn = toch(getElementData(secPlayer, "Warn"))
								SED(secPlayer, "Warn", warn - 1)
								addBox("Вы сняли предупреждение игроку " .. getElementData(secPlayer, "Name") .. ".\nОсталось ещё: " .. warn - 1, thePlayer, 255, 255, 0)
								addBox("Администратор " .. getElementData(thePlayer, "Name") .. " снял с Вас предупреждение.\nОсталось ещё: " .. warn - 1, secPlayer, 255, 255, 0)
								dbExec(mysql, "UPDATE `Accounts` SET `Warn` = ? WHERE `Name` = ?", warn - 1, getElementData(secPlayer, "Name"))
							else
								addBox("Ошибка: У этого игрока нет предупреждений.", thePlayer, 255, 255, 0)
							end
						else
							addBox("Ошибка: Данный игрок не авторизован.", thePlayer, 255, 255, 0)
						end
					else
						addBox("Ошибка: Данный игрок не найден.", thePlayer, 255, 255, 0)
					end
				else
					addBox("Ошибка: ID игрока введено некорректно.", thePlayer, 255, 255, 0)
				end
			else
				addBox("Ошибка: Вы не ввели ID игрока.", thePlayer, 255, 255, 0)
			end
		end
	end
end

function addBox( text, thePlayer,  r, g, b )
	if(thePlayer ~= nil) then
		if(isElement(thePlayer) == true) then
			if(getElementType(thePlayer) == "player") then
				triggerClientEvent(thePlayer, "onBoxAdd", thePlayer, text, r, g, b)
			end
		end
	end
end

function hitBuyCar( hit, dim )
	if(getElementType(hit) == "player") then
		if(getElementData(hit, "Login") == true) then
			if(getElementData(hit, "House") > 0) then
				local dom = toch(getElementData(hit, "House"))
				local house = getElementData(hit, "House")
				local veh1, veh2, veh3, veh4 = HouseTable[house]["Car1"], HouseTable[house]["Car2"], HouseTable[house]["Car3"], HouseTable[house]["Car4"]
				local str = "Домашние автомобили"
				if(veh1 >= 400) then
					str = str .. "\n" .. veh1 .. " id"
				else
					str = str .. "\nОтсутствует."
				end
				if(veh2 >= 400) then
					str = str .. "\n" .. veh2 .. " id"
				else
					str = str .. "\nОтсутствует."
				end
				if(veh3 >= 400) then
					str = str .. "\n" .. veh3 .. " id"
				else
					str = str .. "\nОтсутствует."
				end
				if(veh4 >= 400) then
					str = str .. "\n" .. veh4 .. " id"
				else
					str = str .. "\nОтсутствует."
				end
				str = str .. "\nПросмотр авто (без покупки)"
				showPlayerDialog(hit, 121, 3, "Выберите слот для авто", str, "Выбор", "Отмена")
			else
				triggerClientEvent(hit, "onPlayerBuyCarMenu", hit, CarInfo, toch(getElementData(hit, "ID")))
				SIDP(hit, toch(getElementData(hit, "ID")))
			end
		end
	end
end

function onAdminTpCarBuy( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			SEP(thePlayer, -1004.224609375, -875.9716796875, 12.849883079529)
			SET(thePlayer, 0)
			SIDP(thePlayer, 0)
		end
	end
end

function hitWeaponArmy( hit, dim )
	if(isElement(hit) == true) then
		if(getElementType(hit) == "player") then
			if(getElementData(hit, "Login") == true) then
				local id = getElementData(hit, "ID")
				if(getElementData(hit, "Faction") == 9) then
					showPlayerDialog(hit, 74, 3, "Склад", "Вещь\tКоличество\nБронежилет\t1 шт\nАптечка\t1 штука\nDesert Eagle\t21 патрон\nShotgun\t8 патрон\nМ4\t60 патрон", "Выбор", "Отмена")
				else
					addBox("Ошибка: Вы не можете этого сделать.", hit, 255, 0, 0)
				end
			end
		end
	end
end

function leaveWeaponArmy( hit, dim )
	if(isElement(hit) == true) then
		if(getElementType(hit) == "player") then
			local id = getElementData(hit, "ID")
			if(PTTimer[id] ~= nil) then
				if(isTimer(PTTimer[id]) == true) then
					killTimer(PTTimer[id])
					PTTimer[id] = nil
				end
			end
		end
	end
end

function onAdminTpMall( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			SEP(thePlayer, 450.1708984375, 989.4169921875, 18.274263381958)
			SET(thePlayer, 0)
			SIDP(thePlayer, 0)
		end
	end
end

function onAdminSetHp( thePlayer, command, id, hp )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 2) then
			if(id ~= nil) then
				if(hp ~= nil) then
					if(toch(id) ~= nil) then
						if(toch(hp) ~= nil) then
							id = math.round(id)
							hp = math.round(hp)
							if(IDS[id] ~= nil) then
								local secPlayer = IDS[id]
								if(getElementData(secPlayer, "Login") == true) then
									if(hp >= 0 and hp <= 100) then
										setElementHealth(secPlayer, hp)
										addBox("Администратор изменил Вам здоровье.", secPlayer, 0, 255, 100)
										addBox("Вы изменили хп " .. getElementData(secPlayer, "Name"), thePlayer, 0, 255, 100)
									else
										addBox("Ошибка: ХП может быть от 0 до 100", thePlayer, 255, 0, 0)
									end
								else
									addBox("Ошибка: Данный игрок не авторизован.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: Данный игрок не найден.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: ХП введено некорректно.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: ID игрока введен некорректно.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: Вы не ввели хп.", thePlayer, 255, 0, 0)
				end
			else
				addBox("/sethp [id] [процент хп]", thePlayer, 255, 0, 0)
			end
		end
	end
end

function onAdminSetArmor( thePlayer, command, id, armor )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 2) then
			if(id ~= nil) then
				if(armor ~= nil) then
					if(toch(id) ~= nil) then
						if(toch(armor) ~= nil) then
							id = math.round(id)
							armor = math.round(armor)
							if(IDS[id] ~= nil) then
								local secPlayer = IDS[id]
								if(getElementData(secPlayer, "Login") == true) then
									if(armor >= 0 and armor <= 100) then
										setPedArmor(secPlayer, armor)
										addBox("Администратор изменил Вам броню.", secPlayer, 0, 255, 100)
										addBox("Вы изменили броню " .. getElementData(thePlayer, "Name"), thePlayer, 0, 255, 100)
									else
										addBox("Ошибка: Армор может быть от 0 до 100", thePlayer, 255, 0, 0)
									end
								else
									addBox("Ошибка: Данный игрок не авторизован.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: Данный игрок не найден.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: Армор введен некорректно.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: ID игрока введен некорректно.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: Вы не ввели армор.", thePlayer, 255, 0, 0)
				end
			else
				addBox("/setarmor [id] [процент армор]", thePlayer, 255, 0, 0)
			end
		end
	end
end

function onAdminRepair( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 1) then
			local veh = getPedOccupiedVehicle(thePlayer)
			if(veh ~= false) then
				setElementHealth(veh, 1000)
				setVehicleDoorState(veh, 0, 0)
				setVehicleDoorState(veh, 1, 0)
				setVehicleDoorState(veh, 2, 0)
				setVehicleDoorState(veh, 3, 0)
				setVehicleDoorState(veh, 4, 0)
				setVehicleDoorState(veh, 5, 0)
				addBox("Вы починили Ваш транспорт.", thePlayer, 0, 255, 100)
			end
		end
	end
end

function onPlayerShout( thePlayer, command, ... )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "NWork") == 0) then
			if(getElementData(thePlayer, "Lvl") > 1) then
				if(getElementData(thePlayer, "Mute") == 0) then
					local arg = {...}
					local a = #arg
					if(a > 0) then
						for i, n in pairs(IDS) do
							local x, y, z = getElementPosition(n)
							local x1, y1, z1 = getElementPosition(thePlayer)
							local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
							if(getPedOccupiedVehicle(thePlayer) == false) then
								if(getElementData(thePlayer, "Tazered") == false) then
									setPedAnimation(thePlayer, "on_lookers", "shout_01", -1, false, false, false, false)
								end
							end
							msgforcamera(getElementData(thePlayer, "Name") .. " [" .. getElementData(thePlayer, "ID") .. "] кричит: " .. table.concat(arg, " "), n, 255, 255, 255, x1, y1, z1, 60)
						end
					else
						addBox("Ошибка: Вы не ввели текст.", thePlayer, 255, 0, 0)
					end
				else
					addBox("У Вас затычка.\nВы не можете отправить репорт", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: Вы не можете это сделать.\nНеобходимо прожить лет в штате: 2", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: Вы не можете кричать\nНа работе.", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerWepot( thePlayer, command, ... )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Mute") == 0) then
			local arg = {...}
			local a = #arg
			if(a > 0) then
				for i, n in pairs(IDS) do
					local x, y, z = getElementPosition(n)
					local x1, y1, z1 = getElementPosition(thePlayer)
					local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
					if(getElementDimension(n) == getElementDimension(thePlayer)) then
						if(dist < 6) then
							sendClientMessage(getElementData(thePlayer, "Name") .. " [" .. getElementData(thePlayer, "ID") .. "] шепчет: " .. table.concat(arg, " "), n, 120, 120, 0)
						end
					end
				end
			else
				addBox("Ошибка: Вы не ввели текст.", thePlayer, 255, 0, 0)
			end
		else
			addBox("У Вас затычка.\nВы не можете отправить репорт", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerNChat( thePlayer, command, ... )
	if(getElementData(thePlayer, "Login") == true) then
		local arg = {...}
		local a = #arg
		if(a > 0) then
			if(getElementData(thePlayer, "Mute") == 0) then
				for i, n in pairs(IDS) do
					local x1, y1, z1 = getElementPosition(thePlayer)
					if(getElementInterior(n) == getElementInterior(thePlayer)) then
						if(getElementDimension(n) == getElementDimension(thePlayer)) then
							msgforcamera("(( " .. getElementData(thePlayer, "Name") .. " [" .. getElementData(thePlayer, "ID") .. "]: " .. table.concat(arg, " ") .. " ))", n, 240, 240, 240, x1, y1, z1)
						end
					end
				end
			end
		else
			addBox("Ошибка: Вы не ввели текст.", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerCheckHelp( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		showPlayerDialog(thePlayer, 64000, 1, "Помощь по серверу", "Сытость.\n \nНа сервере есть понятие сытости. Её необходимо пополнять\nпостоянно, чтобы не погибнуть.\nКогда Ваша сытость достигает нуля, здоровье начинает убавляться.\nПополнить сытость можно в некоторых пиццериях и магазинах.\n \nЗдоровье.\n \nЗдоровье на момент альфа-тестирования пополнить могут только администраторы.\n \nТопливо\n \nУ каждого транспортного средства есть топливо.\nЧтобы пополнить топливо, необходимо ввести /fuel,\nНаходясь возле заправки.", "Ок", "Отмена")
	end
end

function onPlayerCheckHouseMenu( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "House") > 0) then
			showPlayerDialog(thePlayer, 85, 3, "Меню управления домом", "Пункты управления\nСтатистика дома\nРеспавн авто\nОплатить налог\nПродать дом государству\nОткрыть/закрыть дом\nПродать машину игроку (если есть)\nПродать машину государству", "Выбор", "Отмена")
		else
			addBox("Ошибка: У Вас нет дома.", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerFish( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			SEP(thePlayer, -688.37109375, -1489.130859375, 12.260985374451)
			SIDP(thePlayer, 0)
			SET(thePlayer, 0)
		end
	end
end

function onPlayerLock( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		local id = getElementData(thePlayer, "ID")
		local veh = PrivateCar[id]
		if(veh ~= nil) then
			if(isElement(veh)) then
				local x, y, z = getElementPosition(thePlayer)
				local x1, y1, z1 = getElementPosition(veh)
				local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
				if(dist < 20) then
					local str = getElementData(thePlayer, "Name")
					if(isVehicleLocked(veh) == true) then
						addBox("Вы открыли Ваш домашний транспорт.", thePlayer, 0, 255, 100)
						str = str .. " открыл"
					else
						addBox("Вы закрыли Ваш домашний транспорт.", thePlayer, 0, 255, 100)
						str = str .. " закрыл"
					end
					str = str .. " своё домашнее авто"
					for i,n in pairs(IDS) do
						if(getElementData(n, "Login") == true) then
							if(getElementDimension(n) == getElementDimension(thePlayer)) then
								msgforcamera(str, n, 232, 183, 227, x, y, z, 30)
							end
						end
					end
					setVehicleLocked(veh, not isVehicleLocked(veh))
				else
					addBox("Вы слишком далеко от\nСвоего авто.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: У Вас нет личного авто.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: У Вас нет личного авто.", thePlayer, 255, 0, 0)
		end
	end
end

function onAdminTpMost( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			SEP(thePlayer, -837.888671875, 43.939453125, 9.5627288818359)
		end
	end
end

function onPlayerPutMaterial( thePlayer, command )
	if(getElementData(thePlayer, "Login") ~= false) then
		if(getElementData(thePlayer, "Faction") >= 1 and getElementData(thePlayer, "Faction") <= 4) then
			if(getElementData(thePlayer, "MafMat") ~= false) then
				local tveh = 0
				local maxrange = 15000
				local faction = getElementData(thePlayer, "Faction")
				local x, y, z = getElementPosition(thePlayer)
				if(faction == 1) then
					for i=5,6 do
						local x1, y1, z1 = getElementPosition(Maf1Car[i])
						local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
						if(dist <= maxrange and dist <= 6) then
							tveh = Maf1Car[i]
							maxrange = dist
						end
					end
				elseif(faction == 2) then
					for i=5,6 do
						local x1, y1, z1 = getElementPosition(Maf2Car[i])
						local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
						if(dist <= maxrange and dist <= 6) then
							tveh = Maf2Car[i]
							maxrange = dist
						end
					end
				elseif(faction == 3) then
					for i=5,6 do
						local x1, y1, z1 = getElementPosition(Maf3Car[i])
						local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
						if(dist <= maxrange and dist <= 6) then
							tveh = Maf3Car[i]
							maxrange = dist
						end
					end
				elseif(faction == 4) then
					for i=5,6 do
						local x1, y1, z1 = getElementPosition(Maf4Car[i])
						local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
						if(dist <= maxrange and dist <= 6) then
							tveh = Maf4Car[i]
							maxrange = dist
						end
					end
				end
				if(tveh ~= 0) then
					if(getElementData(tveh, "MafYash") ~= false) then
						if(getElementData(tveh, "MafYash") < 5) then
							local id = getElementData(thePlayer, "ID")
							exports.bone:detachElementFromBone(MatObject[id])
							destroyElement(MatObject[id])
							MatObject[id] = nil
							removeElementData(thePlayer, "MafMat")
							toggleControl(thePlayer, "enter_exit", true)
							toggleControl(thePlayer, "fire", true)
							toggleControl(thePlayer, "jump", true)
							toggleControl(thePlayer, "enter_passenger", true)
							toggleControl(thePlayer, "next_weapon", true)
							toggleControl(thePlayer, "previous_weapon", true)
							toggleControl(thePlayer, "aim_weapon", true)
							toggleControl(thePlayer, "sprint", true)
							toggleControl(thePlayer, "crouch", true)
							setPedAnimation(thePlayer, "BSKTBALL", "BBALL_idle_O", 1, false)
							addBox("Вы перенесли ящик с патронами\nВ машину своей мафии!", thePlayer, 0, 255, 60)
							SED(tveh, "MafYash", getElementData(tveh, "MafYash") + 1)
						else
							addBox("Машина мафии переполнена.", thePlayer, 255, 0, 0)
						end
					else
						local id = getElementData(thePlayer, "ID")
						exports.bone:detachElementFromBone(MatObject[id])
						destroyElement(MatObject[id])
						MatObject[id] = nil
						removeElementData(thePlayer, "MafMat")
						toggleControl(thePlayer, "enter_exit", true)
						toggleControl(thePlayer, "fire", true)
						toggleControl(thePlayer, "jump", true)
						toggleControl(thePlayer, "enter_passenger", true)
						toggleControl(thePlayer, "next_weapon", true)
						toggleControl(thePlayer, "previous_weapon", true)
						toggleControl(thePlayer, "aim_weapon", true)
						toggleControl(thePlayer, "sprint", true)
						toggleControl(thePlayer, "crouch", true)
						setPedAnimation(thePlayer, "BSKTBALL", "BBALL_idle_O", 1, false)
						addBox("Поблизости нет машин.\nВы выкинули ящик.", thePlayer, 255, 0, 0)
					end
				else
					local id = getElementData(thePlayer, "ID")
					exports.bone:detachElementFromBone(MatObject[id])
					destroyElement(MatObject[id])
					MatObject[id] = nil
					removeElementData(thePlayer, "MafMat")
					toggleControl(thePlayer, "enter_exit", true)
					toggleControl(thePlayer, "fire", true)
					toggleControl(thePlayer, "jump", true)
					toggleControl(thePlayer, "enter_passenger", true)
					toggleControl(thePlayer, "next_weapon", true)
					toggleControl(thePlayer, "previous_weapon", true)
					toggleControl(thePlayer, "aim_weapon", true)
					toggleControl(thePlayer, "sprint", true)
					toggleControl(thePlayer, "crouch", true)
					setPedAnimation(thePlayer, "BSKTBALL", "BBALL_idle_O", 1, false)
					addBox("Поблизости нет машин.\nВы выкинули ящик.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: Вам нечего класть в машину.", thePlayer, 255, 0, 0)
			end
		elseif(getElementData(thePlayer, "Faction") == 9) then
			if(getElementData(thePlayer, "ArmMat") == true) then
				local x, y, z = getElementPosition(thePlayer)
				local booleva = false
				for i, n in pairs(ArmyCar) do
					local x1, y1, z1 = getElementPosition(n)
					local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
					if(dist <= 7) then
						if(getElementData(n, "ArmyGruz") ~= false) then
							if(getElementData(n, "ArmyGruz") <= 225) then
								booleva = true
								addBox("Вы положили ящик\nС материалами в армейскую машину.", thePlayer, 0, 60, 255)
								local obj = getElementData(thePlayer, "ArmMatObj")
								exports.bone:detachElementFromBone(obj)
								destroyElement(obj)
								removeElementData(thePlayer, "ArmMatObj")
								toggleControl(thePlayer, "enter_exit", true)
								toggleControl(thePlayer, "fire", true)
								toggleControl(thePlayer, "jump", true)
								toggleControl(thePlayer, "enter_passenger", true)
								toggleControl(thePlayer, "next_weapon", true)
								toggleControl(thePlayer, "previous_weapon", true)
								toggleControl(thePlayer, "aim_weapon", true)
								toggleControl(thePlayer, "sprint", true)
								toggleControl(thePlayer, "crouch", true)
								setPedAnimation(thePlayer, "BSKTBALL", "BBALL_idle_O", 1, false)
								removeElementData(thePlayer, "ArmMat")
								SED(n, "ArmyGruz", getElementData(n, "ArmyGruz") + 25)
								local secPlayer = getVehicleOccupant(n, 0)
								if(secPlayer ~= false) then
									if(getElementData(secPlayer, "Faction") == 9) then
										addBox("Машина загружена на " .. getElementData(n, "ArmyGruz") .. "/250 мат.", secPlayer, 255, 0, 0)
									end
								end
								break
							else
								addBox("Машина заполнена.", thePlayer, 255, 0, 0)
							end
						else
							booleva = true
							addBox("Вы положили ящик\nС материалами в армейскую машину.", thePlayer, 0, 60, 255)
							local obj = getElementData(thePlayer, "ArmMatObj")
							exports.bone:detachElementFromBone(obj)
							destroyElement(obj)
							removeElementData(thePlayer, "ArmMatObj")
							toggleControl(thePlayer, "enter_exit", true)
							toggleControl(thePlayer, "fire", true)
							toggleControl(thePlayer, "jump", true)
							toggleControl(thePlayer, "enter_passenger", true)
							toggleControl(thePlayer, "next_weapon", true)
							toggleControl(thePlayer, "previous_weapon", true)
							toggleControl(thePlayer, "aim_weapon", true)
							toggleControl(thePlayer, "sprint", true)
							toggleControl(thePlayer, "crouch", true)
							setPedAnimation(thePlayer, "BSKTBALL", "BBALL_idle_O", 1, false)
							removeElementData(thePlayer, "ArmMat")
							SED(n, "ArmyGruz", 25)
							local secPlayer = getVehicleOccupant(n, 0)
							if(secPlayer ~= false) then
								if(getElementData(secPlayer, "Faction") == 9) then
									addBox("Машина загружена на " .. getElementData(n, "ArmyGruz") .. "/250 мат.", secPlayer, 255, 0, 0)
								end
							end
							break
						end
					end
				end
			end
		else
			addBox("Ошибка: Вы не находитесь в мафии.", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerRatio( thePlayer, command, ... )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") > 0) then
			local arg = {...}
			local factsp = getElementData(thePlayer, "Faction")
			if(#arg > 0) then
				local str = ""
				if(getElementData(thePlayer, "AdmChat") == false) then
					str = "(( Рация || " .. FactionName[factsp][2] .. " " .. getElementData(thePlayer, "Name") .. " (" .. getElementData(thePlayer, "ID") .. ") : " .. table.concat(arg, " ") .. " ))"
				else
					str = "(( Рация || " .. FactionName[factsp][2] .. " [АДМ] " .. getElementData(thePlayer, "Name") .. " (" .. getElementData(thePlayer, "ID") .. ") : " .. table.concat(arg, " ") .. " ))"
				end
				for i, n in pairs(IDS) do
					if(getElementData(IDS[i], "Login") == true) then
						if(getElementData(thePlayer, "Faction") == getElementData(IDS[i], "Faction")) then
							sendClientMessage(str, IDS[i], 20, 180, 255)
						end
					end
				end
			else
				addBox("Ошибка: Вы не ввели сообщение.", thePlayer, 255, 0, 0)
			end
		end
	end
end

function onPlayerChangeSkin( thePlayer, command, playerid )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") > 0) then
			if(getElementData(thePlayer, "Rank") > 7) then
				playerid = toch(playerid)
				if(playerid ~= nil) then
					playerid = math.floor(playerid)
					if(IDS[playerid] ~= nil) then
						local secPlayer = IDS[playerid]
						if(getElementData(secPlayer, "Login") == true) then
							if(getElementData(secPlayer, "Faction") == getElementData(thePlayer, "Faction")) then
								if(getElementData(thePlayer, "Rank") >= getElementData(secPlayer, "Rank")) then
									local faction = getElementData(thePlayer, "Faction")
									local tableba = FactionSkins[faction]
									local str = "ID скина"
									for i, n in pairs(tableba) do
										str = str .. "\n" .. tableba[i] .. " id."
									end
									SED(thePlayer, "SkinPlayer", secPlayer)
									showPlayerDialog(thePlayer, 95, 3, "Выберите одежду", str, "Выбор", "Отмена")
								else
									addBox("Ошибка: Вы не можете\nСменить скин " .. getElementData(secPlayer, "Name"), thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: Данный игрок не в вашей фракции.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: Данный игрок не авторизован.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: Данный игрок не в сети.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: /changeskin [id]", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: Данная команда Вам недоступна.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: Данная команда Вам недоступна.", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerAddChs( thePlayer, command, id, ... )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") > 0) then
			if(getElementData(thePlayer, "Rank") > 8) then
				id = toch(id)
				if(id ~= nil) then
					id = math.floor(id)
					if(IDS[id] ~= nil) then
						local secPlayer = IDS[id]
						if(getElementData(secPlayer, "Login") == true) then
							if(getElementData(secPlayer, "Faction") ~= getElementData(thePlayer, "Faction")) then
								local arg = {...}
								local tablo = getElementData(secPlayer, "TableFactionBans")
								local fact = getElementData(thePlayer, "Faction")
								if(tablo[fact] == false) then
									if(#arg > 0) then
										local reason = table.concat(arg, " ")
										aid = aid + 1
										dbExec(mysql, "INSERT into `AllLogs` (`ID`, `AccID`, `SecID`, `Type`, `Reason`) VALUES (?, ?, ?, 1, ?)", aid, getElementData(secPlayer, "AccID"), getElementData(thePlayer, "AccID"), reason)
										tablo[fact] = true
										SED(secPlayer, "TableFactionBans", tablo)
										updatePlayerAccount(secPlayer, "Fact" .. fact, 1)
										sendClientMessage(getElementData(thePlayer, "Name") .. " (" .. getElementData(thePlayer, "ID") .. ") добавил Вас в черный список " .. FactionName[fact][1] .. ".", secPlayer, 255, 0, 0)
										sendClientMessage("Вы добавили " .. getElementData(secPlayer, "Name") .. " (" .. getElementData(secPlayer, "ID") .. ") в черный список организации " .. FactionName[fact][1] .. ".", thePlayer, 255, 0, 0)
										dbFree(query)
									else
										addBox("Ошибка: /blackadd [id] [причина]", thePlayer, 255, 0, 0)
									end
								else
									addBox("Ошибка: Данный игрок уже\nВ черном списке.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: Данный игрок находится\nВ вашей организации.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: Данный игрок не авторизован.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: Данный игрок не найден.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: /blackadd [id] [причина]", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: Данная команда Вам недоступна.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: Данная команда Вам недоступна.", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerRemoveChs( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") > 0) then
			if(getElementData(thePlayer, "Rank") > 8) then
				id = toch(id)
				if(id ~= nil) then
					id = math.floor(id)
					if(IDS[id] ~= nil) then
						local secPlayer = IDS[id]
						if(getElementData(secPlayer, "Login") == true) then
							local tablo = getElementData(secPlayer, "TableFactionBans")
							local faction = getElementData(thePlayer, "Faction")
							if(tablo[faction] == true) then
								tablo[faction] = false
								SED(secPlayer, "TableFactionBans", tablo)
								aid = aid + 1
								updatePlayerAccount(secPlayer, "Fact" .. faction, 0)
								sendClientMessage(getElementData(thePlayer, "Name") .. " (" .. getElementData(thePlayer, "ID") .. ") убрал Вас из черного списка " .. FactionName[fact][1] .. ".", secPlayer, 255, 0, 0)
								sendClientMessage("Вы убрали " .. getElementData(thePlayer, "Name") .. " (" .. getElementData(thePlayer, "ID") .. ") из черного списка организации " .. FactionName[fact][1] .. ".", thePlayer, 255, 0, 0)
								dbExec(mysql, "INSERT into `AllLogs` (`ID`, `AccID`, `SecID`, `Type`, `Reason`) VALUES (?, ?, ?, 2, ?)", aid, getElementData(secPlayer, "ID"), getElementData(thePlayer, "ID"), reason)
							else
								addBox("Данный игрок не находится в черном\nСписке Вашей организации.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: Данный игрок не авторизован.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: Данный игрок не найден.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: /blackremove [id]", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: Данная команда Вам недоступна.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: Данная команда Вам недоступна.", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerCheckBlackList( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") > 0) then
			if(getElementData(thePlayer, "Rank") >= 9) then
				local faction = getElementData(thePlayer, "Faction")
				local query = dbQuery(mysql, "SELECT `Name` FROM `Accounts` WHERE `Fact" .. faction .. "` = 1 ORDER BY `ID` DESC LIMIT 0, 25")
				local result = dbPoll(query, -1)
				local str = "Имя"
				local iter = 0
				for i,n in pairs(result) do
					iter = iter + 1
					str = str .. "\n" .. result[1]["Name"]
				end
				if(iter == 0) then
					str = str .. "\nСписок пуст"
				end
				showPlayerDialog(thePlayer, 94, 3, "Черный список фракции", str, "Ок", "Отмена")
				dbFree(query)
			else
				addBox("Ошибка: Данная команда Вам недоступна.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: Данная команда Вам недоступна.", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerCheckMembers( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") > 0) then
			local tablo = {}
			iter = 0
			for i, n in pairs(IDS) do
				if(getElementData(n, "Faction") == getElementData(thePlayer, "Faction")) then
					iter = iter + 1
					tablo[iter] = {}
					tablo[iter][1] = getElementData(n, "Name")
					tablo[iter][2] = getElementData(n, "ID")
					tablo[iter][3] = getElementData(n, "Rank")
				end
			end
			local str = "Имя\tID\tРанг"
			for i,n in pairs(tablo) do
				str = str .. "\n" .. tablo[i][1] .. "\t" .. tablo[i][2] .. "\t" .. tablo[i][3]
			end
			showPlayerDialog(thePlayer, 94, 3, "Игроки во фракции", str, "Ок", "Отмена")
		else
			addBox("Ошибка: Данная команда Вам недоступна.", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerCheckAllMembers( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") > 0) then
			if(getElementData(thePlayer, "Rank") >= 9) then
				local faction = getElementData(thePlayer, "Faction")
				local query = dbQuery(mysql, "SELECT `Name`, `Rank`, `LastAuth`, `WHours` FROM `Accounts` WHERE `Faction` = ?", faction)
				local result = dbPoll(query, -1)
				local str = "Имя\tРанг\tПоследняя авторизация\tЧасов за посл. неделю"
				for i, n in pairs(result) do
					if(n["LastAuth"] ~= false) then
						str = str .. "\n" .. n["Name"] .. "\t" .. n["Rank"] .. "\t" .. n["LastAuth"] .. "\t" .. n["WHours"]
					else
						str = str .. "\n" .. n["Name"] .. "\t" .. n["Rank"] .. "\tНе был" .. "\t" .. n["WHours"]
					end
				end
				showPlayerDialog(thePlayer, 94, 3, "Все игроки в организации:", str, "Ок", "Отмена")
				dbFree(query)
			else
				addBox("Ошибка: Данная команда Вам недоступна.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: Данная команда Вам недоступна.", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerCloseSkl( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") >= 1 and getElementData(thePlayer, "Faction") <= 4) then
			if(getElementData(thePlayer, "Rank") >= 8) then
				local faction = getElementData(thePlayer, "Faction")
				if(AFOS[faction] == true) then
					if(FactOpenSkl[faction] == true) then
						FactOpenSkl[faction] = false
						dbExec(mysql, "UPDATE `Server` set `Integ` = '0' WHERE `Name` = ?", "FactOpenSkl" .. faction)
						addBox("Вы успешно закрыли склад мафии.", thePlayer, 255, 0, 0)
						for i, n in pairs(IDS) do
							if(getElementData(n, "Login") == true) then
								if(getElementData(n, "Faction") == getElementData(thePlayer, "Faction")) then
									sendClientMessage(getElementData(thePlayer, "Name") .. " закрыл склад фракции.", n, 255, 0, 0)
								end
							end
						end
					else
						addBox("Склад уже закрыт.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Функция выключена администрацией.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: Данная команда Вам недоступна.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: Данная команда Вам недоступна.", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerACloseW( thePlayer, command, fact )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") >= 4) then
			if(fact ~= nil) then
				fact = toch(fact)
				if(fact ~= nil) then
					fact = math.floor(fact)
					if(AFOS[fact] ~= nil) then
						if(AFOS[fact] == true) then
							AFOS[fact] = false
							addBox("Вы успешно закрыли склад\n" .. FactionName[fact][1], thePlayer, 0, 60, 255)
						else
							addBox("Данный склад уже закрыт администрацией.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Организация не найдена.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: /aclosew [1-4]", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: /aclosew [1-4]", thePlayer, 255, 0, 0)
			end
		end
	end
end

for i,n in pairs(ServerPerem["MechSpawns"]) do
	local veh = createVeh(525, n["x"],n["y"], n["z"], 0, 0, 270)
	SED(veh, "MechCar", i)
end

function onPlayerCheckWHistory( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") >= 1 and getElementData(thePlayer, "Faction") <= 4) then
			if(getElementData(thePlayer, "Rank") >= 9) then
				if(getElementData(thePlayer, "CheckSlkad") == false) then
					local faction = getElementData(thePlayer, "Faction")
					local query = dbQuery(mysql, "SELECT * from `skllogs` WHERE `Faction` = ? ORDER BY `ID` DESC LIMIT 0, 25", faction)
					local str = "Имя\tДействитие\tСумма"
					local result = dbPoll(query, -1)
					local booleva = false
					for i, n in pairs(result) do
						booleva = true
						if(n["Type"] == 1) then
							str = str .. "\n" .. n["Name"] .. "\tСнял со склада\t" .. n["Ed"] .. "$."
						elseif(n["Type"] == 2) then
							str = str .. "\n" .. n["Name"] .. "\tПоложил на склад\t" .. n["Ed"] .. "$."
						elseif(n["Type"] == 3) then
							str = str .. "\n" .. n["Name"] .. "\tСнял со склада\t" .. n["Ed"] .. " г. наркотиков."
						elseif(n["Type"] == 4) then
							str = str .. "\n" .. n["Name"] .. "\tПоложил на склад\t" .. n["Ed"] .. " г. наркотиков."
						elseif(n["Type"] == 5) then
							str = str .. "\n" .. n["Name"] .. "\tСнял со склада\t" .. n["Ed"] .. " материалов."
						elseif(n["Type"] == 6) then
							str = str .. "\n" .. n["Name"] .. "\tПоложил на склад\t" .. n["Ed"] .. " материалов."
						end
					end				
					if(booleva == false) then
						str = str .. "\nПоследних\tДействий\tНет"
					end
					showPlayerDialog(thePlayer, 64000, 3, "Последние операции со складом", str, "Ок", "Отмена")
					dbFree(query)
					SED(thePlayer, "CheckSlkad", true)
					setTimer(function ( player )
						if(isElement(player)) then
							removeElementData(thePlayer, "CheckSlkad")
						end
					end, 5000, 1, thePlayer)
				else
					addBox("Пожалуйста, подождите.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: У Вас нет доступа.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: У Вас нет доступа.", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerCheckAWHistory( thePlayer, command, faction )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") >= 3) then
			local faction = toch(faction)
			if(faction ~= nil) then
				faction = math.floor(faction)
				if(faction >= 1 and faction <= 4) then
					local query = dbQuery(mysql, "SELECT * from `skllogs` WHERE `Faction` = ? ORDER BY `ID` DESC LIMIT 0, 25", faction)
					local str = "Имя\tДействитие\tСумма"
					local result = dbPoll(query, -1)
					local booleva = false
					for i, n in pairs(result) do
						booleva = true
						if(n["Type"] == 1) then
							str = str .. "\n" .. n["Name"] .. "\tСнял со склада\t" .. n["Ed"] .. "$."
						elseif(n["Type"] == 2) then
							str = str .. "\n" .. n["Name"] .. "\tПоложил на склад\t" .. n["Ed"] .. "$."
						elseif(n["Type"] == 3) then
							str = str .. "\n" .. n["Name"] .. "\tСнял со склада\t" .. n["Ed"] .. " г. наркотиков."
						elseif(n["Type"] == 4) then
							str = str .. "\n" .. n["Name"] .. "\tПоложил на склад\t" .. n["Ed"] .. " г. наркотиков."
						elseif(n["Type"] == 5) then
							str = str .. "\n" .. n["Name"] .. "\tСнял со склада\t" .. n["Ed"] .. " материалов."
						elseif(n["Type"] == 6) then
							str = str .. "\n" .. n["Name"] .. "\tПоложил на склад\t" .. n["Ed"] .. " материалов."
						end
					end				
					if(booleva == false) then
						str = str .. "\nПоследних\tДействий\tНет"
					end
					showPlayerDialog(thePlayer, 64000, 3, "Последние операции со складом", str, "Ок", "Отмена")
					dbFree(query)
				else
					addBox("Ошибка: /awhistory [1-4]", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: /awhistory [1-4]", thePlayer, 255, 0, 0)
			end
		end
	end
end

function onPlayerSellGun( thePlayer, command, id, ammo, price )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") >= 1 and getElementData(thePlayer, "Faction") <= 4) then
			if(id ~= nil) then
				if(ammo ~= nil) then
					if(price ~= nil) then
						if(toch(id) ~= nil) then
							if(toch(ammo) ~= nil) then
								if(toch(price) ~= nil) then
									id = toch(id)
									ammo = toch(ammo)
									price = toch(price)
									id = math.floor(id)
									ammo = math.floor(ammo)
									price = math.floor(price)
									if(IDS[id] ~= nil) then
										local secPlayer = IDS[id]
										if(getElementData(secPlayer, "Login") == true) then
											if(ammo > 0) then
												if(price > 0) then
													local x, y, z = getElementPosition(thePlayer)
													local x1, y1, z1 = getElementPosition(secPlayer)
													local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
													if(dist < 7) then													
														if(getPedWeapon(thePlayer) == 24 or getPedWeapon(thePlayer) == 25 or getPedWeapon(thePlayer) == 30 or getPedWeapon(thePlayer) == 31) then
															if(getPedTotalAmmo(thePlayer) >= ammo) then
																if(getElementData(secPlayer, "Money") >= price) then
																	if(secPlayer ~= thePlayer) then
																		SED(secPlayer, "WeaponSeller", thePlayer)
																		SED(secPlayer, "WeaponSellID", getPedWeapon(thePlayer))
																		SED(secPlayer, "WeaponSellPrice", price)
																		SED(secPlayer, "WeaponSellAmmo", ammo)
																		SED(secPlayer, "WeaponSlot", getPedWeaponSlot(thePlayer))
																		local weapon = getPedWeapon(thePlayer)
																		addBox("Вы предложили " .. getElementData(secPlayer, "Name") .. "\nПриобрести " .. WeaponTable[weapon] .. " с " .. ammo .. " пт за " .. price .. "$.", thePlayer, 0, 255, 60)
																		local str = "Игрок " .. getElementData(thePlayer, "Name") .. " (" .. getElementData(thePlayer, "ID") .. ") предлагает Вам\nПриобрести " .. WeaponTable[weapon] .. " с " .. ammo .. " пт за " .. price .. "$.\n \nХотите ли Вы его приобрести?"
																		showPlayerDialog(secPlayer, 92, 1, "Покупка оружия", str, "Принять", "Отмена")
																	else
																		addBox("Вы не можете продать\nОружие самому себе.", thePlayer, 255, 0, 0)
																	end
																else
																	addBox("Ошибка: У игрока недостаточно\nДенег для покупки.", thePlayer, 255, 0, 0)
																end
															else
																addBox("Ошибка: Возьмите оружие для продажи в руки.", thePlayer, 255, 0, 0)
															end
														else
															addBox("Данный тип оружия не продается.", thePlayer, 255, 0, 0)
														end
													else
														addBox("Ошибка: Данный игрок слишком далеко.", thePlayer, 255, 0, 0)
													end
												else
													addBox("Ошибка: Сумма введена некорректно.", thePlayer, 255, 0, 0)
												end
											else
												addBox("Ошибка: Кол-во введено некорректно.", thePlayer, 255, 0, 0)
											end
										else
											addBox("Ошибка: Указанный игрок не авторизован.", thePlayer, 255, 0, 0)
										end
									else
										addBox("Ошибка: Данный игрок не найден.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Ошибка: /sellgun [id] [патроны] [цена]", thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: /sellgun [id] [патроны] [цена]", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: /sellgun [id] [патроны] [цена]", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: /sellgun [id] [патроны] [цена]", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: /sellgun [id] [патроны] [цена]", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: /sellgun [id] [патроны] [цена]", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: Данная команда Вам недоступна.", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerSellDrugs( thePlayer, command, id, value, price )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") >= 1 and getElementData(thePlayer, "Faction") <= 4) then
			if(id ~= nil) then
				if(value ~= nil) then
					if(price ~= nil) then
						id = toch(id)
						value = toch(value)
						price = toch(price)
						if(id ~= nil) then
							if(value ~= nil) then
								if(price ~= nil) then
									id = math.floor(id)
									value = math.floor(value)
									price = math.floor(price)
									if(IDS[id] ~= nil) then
										local secPlayer = IDS[id]
										if(getElementData(secPlayer, "Login") == true) then
											if(value >= 1 and value <= 100) then
												if(price >= 1) then
													if(getElementData(thePlayer, "Nrk") - value >= 0) then
														if(getElementData(secPlayer, "Nrk") + value <= 100) then
															if(getElementData(secPlayer, "Money") >= price) then
																local x, y, z = getElementPosition(thePlayer)
																local x1, y1, z1 = getElementPosition(secPlayer)
																local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
																if(dist < 10) then
																	SED(secPlayer, "SellNrkPlayer", thePlayer)
																	SED(secPlayer, "SellNrkValue", value)
																	SED(secPlayer, "SellNrkPrice", price)
																	local str = getElementData(thePlayer, "Name") .. " (" .. getElementData(thePlayer, "ID") .. ") предложил Вам\nПриобрести " .. value .. " г. наркотиков за " .. price .. "$."  
																	showPlayerDialog(secPlayer, 91, 1, "Покупка наркотиков", str, "Принять", "Отмена")
																	addBox(str, secPlayer, 255, 255, 0)
																	local str1 = "Вы предложили " .. getElementData(secPlayer, "Name") .. " [" .. getElementData(secPlayer, "ID") .. "]\nПриобрести " .. value .. " г. наркотиков за " .. price .. "$." 
																	addBox(str1, thePlayer, 255, 255, 0)
																else
																	addBox("Данный игрок слишком далеко.", thePlayer, 255, 0, 0)
																end
															else
																addBox("У данного игрока недостаточно денег для покупки.", thePlayer, 255, 0, 0)
															end
														else
															addBox("У данного игрока нет места.", thePlayer, 255, 0, 0)
														end
													else
														addBox("У Вас нет столько грамм.", thePlayer, 255, 0, 0)
													end
												else
													addBox("Сумма введена некорректно.", thePlayer, 255, 0, 0)
												end
											else
												addBox("Ошибка: /selldrugs [id] [1-100] [сумма]", thePlayer, 255, 0, 0)
											end
										else
											addBox("Данный игрок не авторизован.", thePlayer, 255, 0, 0)
										end
									else
										addBox("Данный игрок не найден.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Ошибка: /selldrugs [id] [1-100] [сумма]", thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: /selldrugs [id] [1-100] [сумма]", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: /selldrugs [id] [1-100] [сумма]", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: /selldrugs [id] [1-100] [сумма]", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: /selldrugs [id] [1-100] [сумма]", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: /selldrugs [id] [1-100] [сумма]", thePlayer, 255, 0, 0)
			end
		else
			addBox("У Вас нет доступа к этой команде.", thePlayer, 255, 0, 0)
		end
	end
end

function onMafiaCapture( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") >= 1 and getElementData(thePlayer, "Faction") <= 4) then
			if(getElementData(thePlayer, "Rank") >= 8) then
				if(id ~= nil) then
					if(toch(id) ~= nil) then
						id = toch(id)
						id = math.floor(id)
						if(id > 0) then
							if(BusinessTable[id] ~= nil) then
								local x, y, z = getElementPosition(thePlayer)
								local x1, y1, z1 = BusinessTable[id]["px"], BusinessTable[id]["py"], BusinessTable[id]["pz"]
								local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
								if(dist < 75) then
									local faction = getElementData(thePlayer, "Faction")
									if(MafiaCapture[faction]["MC"] == true) then
										if(BusinessTable[id]["Roof"] == 0) then
											BusinessTable[id]["Roof"] = getElementData(thePlayer, "Faction")
											dbExec(mysql, "UPDATE `Business` SET `Roof` = ? WHERE `ID` = ?", BusinessTable[id]["Roof"], id)
											MafiaCapture[faction]["MC"] = false
											addBox("Вы успешно захватили бизнес.", thePlayer, 0, 255, 60)
										elseif(BusinessTable[id]["Roof"] == faction) then
											addBox("Данный бизнес уже захвачен\nВашей мафией!", thePlayer, 255, 0, 0)
										else
											local roof = BusinessTable[id]["Roof"]
											if(MafiaCapture[roof]["MC"] == true) then
												triggerClientEvent(thePlayer, "onStartCapture", thePlayer, id, FactionName[BusinessTable[id]["Roof"]][1])
											else
												addBox("Крыша данной мафии уже\nС кем-то на встрече." ,thePlayer, 255, 0, 0)
											end
										end
									else
										addBox("Ваша мафия больше не может\nВоевать в этом часу!", thePlayer, 255, 0, 0)
									end
								else
									addBox("Вы слишком далеко от\nУказанного Вами бизнеса.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Указанный Вами бизнес не найден.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Указанный Вами бизнес не найден.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Указанный Вами бизнес не найден.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Указанный Вами бизнес не найден.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Данная команда Вам недоступна!", thePlayer, 255, 0, 0)
			end
		else
			addBox("Данная команда Вам недоступна!", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerSellOwn( thePlayer, command, plid, biz, price )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") >= 1 and getElementData(thePlayer, "Faction") <= 4) then
			if(plid ~= nil) then
				if(biz ~= nil) then
					if(price ~= nil) then
						if(toch(price) ~= nil) then
							if(toch(plid) ~= nil) then
								if(toch(biz) ~= nil) then
									plid = toch(plid)
									biz = toch(biz)
									plid = math.floor(plid)
									biz = math.floor(biz)
									if(plid > 0) then
										if(biz > 0) then
											if(price > 0) then
												if(IDS[plid] ~= nil) then
													if(BusinessTable[biz] ~= nil) then
														local fact1 = getElementData(thePlayer, "Faction")
														local secPlayer = IDS[plid]
														if(getElementData(secPlayer, "Login") == true) then
															local secfact = getElementData(thePlayer, "Faction")
															if(fact1 ~= fact2) then
																if(BusinessTable[biz]["Roof"] == fact1) then
																	SED(secPlayer, "bizselleb", biz)
																	SED(secPlayer, "bizsellfacteb", getElementData(thePlayer, "Faction"))
																	SED(secPlayer, "bizsellpriceeb", price)
																	local str = getElementData(thePlayer, "Name") .. " предложил Вам приобрести крышу\nНад бизнесом #" .. biz .. ".\nСтоимость: " .. price .. "$.\n \nДействительно ли Вы хотите приобрести её?"
																	showPlayerDialog(secPlayer, 106, 1, "Приобретение крыши над бизнесом", str, "Купить", "Отмена")
																else
																	addBox("Данный бизнес не принадлежит\nВашей мафии.", thePlayer, 255, 0, 0)
																end
															else
																addBox("Вы не можете продать бизнес\nИгроку со своей фракции.", thePlayer, 255, 0, 0)
															end
														else
															addBox("Ошибка: Игрок не авторизован.", thePlayer, 255, 0, 0)
														end
													else
														addBox("Ошибка: Бизнес не найден.", thePlayer, 255, 0, 0)
													end
												else
													addBox("Ошибка: Игрок не найден.", thePlayer, 255, 0, 0)
												end
											else
												addBox("Ошибка: Сумма введена некорректно.", thePlayer, 255, 0, 0)
											end
										else
											addBox("Ошибка: Бизнес указан неверно.", thePlayer, 255, 0, 0)
										end
									else
										addBox("Ошибка: Игрок указан некорректно.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Ошибка: Бизнес указан неверно.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: Игрок указан некорректно.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: Суммы указана некорректно.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: /sellown [id] [biz] [price]", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: /sellown [id] [biz] [price]", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: /sellown [id] [biz] [price]", thePlayer, 255, 0, 0)
			end
		else
			addBox("Данная функция Вам недоступна.", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerCheckBank( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		local veh = getPedOccupiedVehicle(thePlayer)
		if(veh == false) then
			if(getElementData(thePlayer, "Lvl") > 1) then
				local x, y, z = getElementPosition(thePlayer)
				local maxdist = 15000
				for i, n in pairs(BankomatsTable) do
					local x1, y1, z1 = n["x"], n["y"], n["z"]
					local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
					if(dist <= maxdist) then
						maxdist = dist
					end
				end
				if(maxdist <= 1.5) then
					local house = getElementData(thePlayer, "House")
					local biz = getElementData(thePlayer, "BusOwnID")
					local tip = 0
					local dengi = 0
					local dbe = 0
					if(house > 0) then
						dengi = HouseTable[house]["PayDay"]
					end
					if(biz > 0) then
						tip = BusinessTable[biz]["Type"]
						dbe = BusinessTable[biz]["PayDay"]
					end
					triggerClientEvent(thePlayer, "onPlayerCheckBank", thePlayer, getElementData(thePlayer, "Bank"), getElementData(thePlayer, "Name"), house, dengi, dbe, biz, tip, getElementData(thePlayer, "PhoneMoney"), getElementData(thePlayer, "PhoneNumber"))
				else
					addBox("Поблизости нет банкоматов.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Данная функция доступна со 2 уровня.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: Вы не можете воспользоваться\nБанкоматом, находясь в машине", thePlayer, 255, 0, 0)
		end
	end
end

function onTryPayHouse( arg1, arg2 )
	if(isElement(arg1) == true) then
		if(arg1 == client) then
			if(arg2 > 0) then
				if(getElementData(client, "House") > 0) then
					local house = getElementData(client, "House")
					if(HouseTable[house]["PayDay"] + arg2 <= 720) then
						if(getElementData(client, "Bank") >= arg2 * 50) then
							HouseTable[house]["PayDay"] = HouseTable[house]["PayDay"] + arg2
							SED(client, "Bank", getElementData(client, "Bank") - arg2 * 50)
							dbExec(mysql, "UPDATE `House` SET `PayDay` = ? WHERE `ID` = ?", HouseTable[house]["PayDay"], house)
							dbExec(mysql, "UPDATE `Accounts` SET `Bank` = ? WHERE `ID` = ?", getElementData(client, "Bank"), getElementData(client, "AccID"))
							addBox("Вы успешно оплатили дом до:\n" .. HouseTable[house]["PayDay"] .. "/720 PayDay", client, 0, 60, 255)
						else
							addBox("У Вас недостаточно денег\nНа банковском счету для оплаты.", client, 255, 0, 0)
						end
					else
						addBox("Ошибка: Вы ввели сумму\nВыше лимита хранения.", client, 255, 0, 0)
					end
				else
					addBox("Повторите попытку.", client, 255, 0, 0)
				end
			end
		end
	end
end

function onPlayerAOpenW( thePlayer, command, fact )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") >= 4) then
			if(fact ~= nil) then
				fact = toch(fact)
				if(fact ~= nil) then
					fact = math.floor(fact)
					if(AFOS[fact] ~= nil) then
						if(AFOS[fact] == false) then
							AFOS[fact] = true
							addBox("Вы успешно открыли склад\n" .. FactionName[fact][1], thePlayer, 0, 60, 255)
							for i, n in pairs(IDS) do
							if(getElementData(n, "Login") == true) then
								if(getElementData(n, "Faction") == getElementData(thePlayer, "Faction")) then
									sendClientMessage(getElementData(thePlayer, "Name") .. " открыл склад фракции.", n, 0, 255, 60)
								end
							end
						end
						else
							addBox("Данный склад уже открыт администрацией.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Организация не найдена.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: /aclosew [1-4]", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: /aclosew [1-4]", thePlayer, 255, 0, 0)
			end
		end
	end
end

function onOffMakeAdmin( thePlayer, command, name, lvl )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") == 6) then
			if(name ~= nil) then
				if(lvl ~= nil) then
					if(toch(lvl) ~= nil) then
						lvl = toch(lvl)
						if(lvl >= 0 and lvl <= 6) then
							local query = dbQuery(mysql, "SELECT `Name` FROM `Accounts` WHERE `Name` = ?", name)
							local result = dbPoll(query, -1)
							if(result ~= nil) then
								if(result[1] ~= nil) then
									local player = 0
									for i, n in pairs(IDS) do
										if(getElementData(n, "Name") == name) then
											player = n
										end
									end
									if(player ~= 0) then
										SED(player, "Admin", lvl)
										addBox("Ваш уровень админ. привилегий\nИзменен на " .. lvl, player, 255, 255, 0)
										addBox("Вы изменили уровень адм. привилегий\nИгроку " .. name .. " на " .. lvl, thePlayer, 255, 255, 0)
										dbExec(mysql, "UPDATE `Accounts` SET `Admin` = ? WHERE `Name` = ?", lvl, name)
									else
										addBox("Вы изменили уровень адм. привилегий\nИгроку " .. name .. " на " .. lvl, thePlayer, 255, 255, 0)
										dbExec(mysql, "UPDATE `Accounts` SET `Admin` = ? WHERE `Name` = ?", lvl, name)
									end
								else
									addBox("Ошибка: Такой игрок не найден.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: Такой игрок не найден.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: /offmakeadm [Name] [0-6]", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: /offmakeadm [Name] [0-6]", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: /offmakeadm [Name] [0-6]", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: /offmakeadm [Name] [0-6]", thePlayer, 255, 0, 0)
			end
		end
	end
end

function onOffBan( thePlayer, command, name, day, ... )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") >= 3) then
			if(name ~= nil) then
				if(day ~= nil) then
					if(toch(day) ~= nil) then
						day = toch(day)
						if(day >= 1 and day <= 10000) then
							local query = dbQuery(mysql, "SELECT COUNT(*) FROM `Accounts` WHERE `Name` = ?", name)
							local result = dbPoll(query, -1)
							if(result[1]["COUNT(*)"] > 0) then
								local reason = {...}
								day = toch(day)
								local player = 0
								for i, n in pairs(IDS) do
									if(getElementData(n, "Name") == name) then
										player = n
									end
								end
								if(player ~= 0) then
									kickPlayer(player, "ban")
								end
								dbExec(mysql, "UPDATE `Accounts` SET `Ban` = ? WHERE `Name` = ?", day, name)
								local query = dbQuery(mysql, "SELECT `ID` from `accounts` WHERE `Name` = ?", name)
								local result = dbPoll(query, -1)
								aid = aid + 1
								dbExec(mysql, "INSERT INTO `AllLogs` (`ID`, `AccID`, `Reason`, `SecID`, `Type`, `Value`) values (?, ?, ?, ?, 5, ?)", aid, result[1]["ID"], table.concat(reason, " "), getElementData(thePlayer, "AccID"), day)
								for i,n in pairs(IDS) do
									sendClientMessage("Администратор " .. getElementData(thePlayer, "Name") .. " [" .. getElementData(thePlayer, "ID") .. "] заблокировал в оффлайне " .. name .. " на " .. day .. " д. по причине: " .. table.concat(reason, " "), n, 255, 0, 0)
								end
							else
								addBox("Аккаунт не найден.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Количество дней может быть от 1.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: /offban [name] [day (0-30)] [причина]", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: /offban [name] [day (0-30)] [причина]", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: /offban [name] [day (0-30)] [причина]", thePlayer, 255, 0, 0)
			end
		end
	end
end

function onAllAdmins( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 2) then
			local query = dbQuery(mysql, "SELECT `Name`, `Admin`, `LastAuth`, `WHours` from `Accounts` WHERE `Admin` > 0")
			local result = dbPoll(query, -1)
			local str = "Имя\tУровень адм\tПоследняя авторизация\tЧасов за посл. неделю"
			for i,n in pairs(result) do
				if(n["LastAuth"] ~= false) then
					if(n["WHours"] < 2) then
						str = str .. "\n" .. n["Name"] .. "\t" .. n["Admin"] .. "\t" .. n["LastAuth"] .. "\t#ff0000" .. n["WHours"]
					else
						str = str .. "\n" .. n["Name"] .. "\t" .. n["Admin"] .. "\t" .. n["LastAuth"] .. "\t#00dd33" .. n["WHours"]
					end
				else
					if(n["WHours"] < 2) then
						str = str .. "\n" .. n["Name"] .. "\t" .. n["Admin"] .. "\tНе был." .. "\t#ff0000" .. n["WHours"]
					else
						str = str .. "\n" .. n["Name"] .. "\t" .. n["Admin"] .. "\tНе был." .. "\t#00dd33" .. n["WHours"]
					end
				end
			end
			showPlayerDialog(thePlayer, 64000, 3, "Список админов", str, "Ок", "Отмена")
		end
	end
end

function onWareHouse( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") >= 1 and getElementData(thePlayer, "Faction") <= 4) then
			local str1 = "Maf" .. getElementData(thePlayer, "Faction") .. "NRK"
			local str2 = "Maf" .. getElementData(thePlayer, "Faction") .. "Money"
			local str3 = "Maf" .. getElementData(thePlayer, "Faction") .. "Mat"
			local str = "Название\tЗначение\nНарко\t" .. Server[str1] .. "\nДеньги\t" .. Server[str2] .. "\nМаты\t" .. Server[str3]
			showPlayerDialog(thePlayer, 64000, 3, "Склад мафии", str, "Ок", "Отмена")
		elseif(getElementData(thePlayer, "Faction") == 7) then
			local str1 = "HospitalGruz"
			local str = "Название\tЗначение\nМатериалы\t" .. Server[str1]
			showPlayerDialog(thePlayer, 64000, 3, "Склад госпиталя", str, "Ок", "Отмена")
		elseif(getElementData(thePlayer, "Faction") == 8) then
			local str1 = "PoliceGruz"
			local str = "Название\tЗначение\nМатериалы\t" .. Server[str1]
			showPlayerDialog(thePlayer, 64000, 3, "Склад полиции", str, "Ок", "Отмена")
		elseif(getElementData(thePlayer, "Faction") == 9) then
			local str1 = "ArmyGruz"
			local str = "Название\tЗначение\nМатериалы\t" .. Server[str1]
			showPlayerDialog(thePlayer, 64000, 3, "Склад армии", str, "Ок", "Отмена")
		else
			addBox("У Вас нет доступа к данной команде.", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerQuest( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		local client = thePlayer
		if(getElementData(client, "Quest") == -1) then
			addBox("Вы уже прошли или отказались\nОт квеста в самом начале.", client, 255, 0, 0)
		elseif(getElementData(client, "Quest") == 0) then
			showPlayerDialog(client, 107, 1, "Начало истории", "После прилета Вы решили проверить сумку и нашли письмо следующего содержания:\n\"Привет, я слышал что ты в Вайс-Сити прилетел\nЧто ж, хороший выбор, лучше чем куда-нибудь в холодную Россию.\nТебе нужно купить телефон в ближайшем магазине 24\\7,\n(/gps - Ближайший 24\\7)\nТебе позвонит мой знакомый и расскажет че к чему.\nА добраться можешь на такси, либо на автобусе,\nА если хочешь можешь и сам педали покрутить на велосипеде\n(/gps - Ближайшая аренда авто).\nВ общем, давай, мой человек тебе все расскажет.\"\nПодпись: Mr. CJ.", "Ок", "Отмена")
		elseif(getElementData(client, "Quest") == 1) then
			if(getElementData(client, "PhoneNumber") == 0) then
				addBox("Вам необходимо приобрести телефон,\nЧтобы продолжить историю.\n \nЕго можно приобрести в 24/7\n(( /GPS - Ближайший 24/7))", client, 0, 60, 255)
			else
				toggleControl(client, "enter_exit", false)
			toggleControl(client, "fire", false)
			toggleControl(client, "jump", false)
			toggleControl(client, "enter_passenger", false)
			toggleControl(client, "next_weapon", false)
			toggleControl(client, "previous_weapon", false)
			toggleControl(client, "aim_weapon", false)
			toggleControl(client, "sprint", false)
			toggleControl(client, "crouch", false)
			SED(client, "AcceptedCall", true)
			addBox("Звонок на телефон.", client, 255, 255, 0)
			setPedAnimation(client, "ped", "phone_talk", 1, true, true, false, true)
			local id = getElementData(client, "ID")
			PhoneObject[id] = createObject(16097, 0, 0, 0)
			exports.bone:attachElementToBone(PhoneObject[id], client, 12,0.03,0.02,0.12,0,90,90)
			setTimer(function ( player )
				if(isElement(player)) then
					local id = getElementData(player, "ID")
					sendClientMessage("[ТЕЛ] Ken_Rozenberg: Хей, привет, это Кен Розенберг", player, 255, 255, 0)
					sendClientMessage("[ТЕЛ] Ken_Rozenberg: Я вообще туда позвонил?", player, 255, 255, 0)
					addBox("Звонок сброшен.", player, 255, 255, 0)
					setPedAnimation(player, "BSKTBALL", "BBALL_idle_O", 1, false)
					exports.bone:detachElementFromBone(PhoneObject[id])
					destroyElement(PhoneObject[id])
					setTimer(function ( neplayer )
						if(isElement(neplayer)) then
							addBox("Звонок на телефон.", neplayer, 255, 255, 0)
							setPedAnimation(neplayer, "ped", "phone_talk", 1, true, true, false, true)
							local id = getElementData(neplayer, "ID")
							PhoneObject[id] = createObject(16097, 0, 0, 0)
							exports.bone:attachElementToBone(PhoneObject[id], neplayer, 12,0.03,0.02,0.12,0,90,90)
							sendClientMessage("[ТЕЛ] Ken_Rozenberg: Это Кен, да... В общем, меня попросили тебе помочь, хотя мне не очень сильно хочется, но ладно. В общем, смотри.", neplayer, 255, 255, 0)
							sendClientMessage("[ТЕЛ] Ken_Rozenberg: Для начала езжай в мэрию, получи там паспорт... Бла-бла-бла, долбанные бюрократы с кучей бумаг...", neplayer, 255, 255, 0)
							setTimer(function ( hzpe )
								if(isElement(hzpe)) then
									sendClientMessage("[ТЕЛ] Ken_Rozenberg: Ладно, как получишь паспорт, я скажу тебе, что делать дальше. И без тебя проблем хватает. Езжай давай.", hzpe, 255, 255, 0)
									sendClientMessage("(( /GPS - Гос. учреждения - Мэрия))", hzpe, 255, 255, 0)
									setTimer(function ( notplayer )
										if(isElement(notplayer)) then
											local id = getElementData(notplayer, "ID")
											addBox("Звонок сброшен.", notplayer, 255, 255, 0)
											exports.bone:detachElementFromBone(PhoneObject[id])
											destroyElement(PhoneObject[id])
											removeElementData(notplayer, "AcceptedCall", false)
											setPedAnimation(notplayer, "BSKTBALL", "BBALL_idle_O", 1, false)
											toggleControl(notplayer, "enter_exit", true)
											toggleControl(notplayer, "fire", true)
											toggleControl(notplayer, "jump", true)
											toggleControl(notplayer, "enter_passenger", true)
											toggleControl(notplayer, "next_weapon", true)
											toggleControl(notplayer, "previous_weapon", true)
											toggleControl(notplayer, "aim_weapon", true)
											toggleControl(notplayer, "sprint", true)
											toggleControl(notplayer, "crouch", true)
											SED(notplayer, "Quest", 3)
											dbExec(mysql, "UPDATE `Accounts` SET `Quest` = ? WHERE `Name` = ?", getElementData(notplayer, "Quest"), getElementData(notplayer, "Name"))
										else
										end
									end, 5000, 1, hzpe)
								else
								end
							end, 7000, 1, neplayer)
						else
						end
					end, 5000, 1, player)
				end
			end, 5000, 1, client)
			end
		elseif(getElementData(client, "Quest") == 2) then
			toggleControl(client, "enter_exit", false)
			toggleControl(client, "fire", false)
			toggleControl(client, "jump", false)
			toggleControl(client, "enter_passenger", false)
			toggleControl(client, "next_weapon", false)
			toggleControl(client, "previous_weapon", false)
			toggleControl(client, "aim_weapon", false)
			toggleControl(client, "sprint", false)
			toggleControl(client, "crouch", false)
			SED(client, "AcceptedCall", true)
			addBox("Звонок на телефон.", client, 255, 255, 0)
			setPedAnimation(client, "ped", "phone_talk", 1, true, true, false, true)
			local id = getElementData(client, "ID")
			PhoneObject[id] = createObject(16097, 0, 0, 0)
			exports.bone:attachElementToBone(PhoneObject[id], client, 12,0.03,0.02,0.12,0,90,90)
			setTimer(function ( player )
				if(isElement(player)) then
					local id = getElementData(player, "ID")
					sendClientMessage("[ТЕЛ] Ken_Rozenberg: Хей, привет, это Кен Розенберг", player, 255, 255, 0)
					sendClientMessage("[ТЕЛ] Ken_Rozenberg: Я вообще туда позвонил?", player, 255, 255, 0)
					addBox("Звонок сброшен.", player, 255, 255, 0)
					setPedAnimation(player, "BSKTBALL", "BBALL_idle_O", 1, false)
					exports.bone:detachElementFromBone(PhoneObject[id])
					destroyElement(PhoneObject[id])
					setTimer(function ( neplayer )
						if(isElement(neplayer)) then
							addBox("Звонок на телефон.", neplayer, 255, 255, 0)
							setPedAnimation(neplayer, "ped", "phone_talk", 1, true, true, false, true)
							local id = getElementData(neplayer, "ID")
							PhoneObject[id] = createObject(16097, 0, 0, 0)
							exports.bone:attachElementToBone(PhoneObject[id], neplayer, 12,0.03,0.02,0.12,0,90,90)
							sendClientMessage("[ТЕЛ] Ken_Rozenberg: Это Кен, да... В общем, меня попросили тебе помочь, хотя мне не очень сильно хочется, но ладно. В общем, смотри.", neplayer, 255, 255, 0)
							sendClientMessage("[ТЕЛ] Ken_Rozenberg: Для начала езжай в мэрию, получи там паспорт... Бла-бла-бла, долбанные бюрократы с кучей бумаг...", neplayer, 255, 255, 0)
							setTimer(function ( hzpe )
								if(isElement(hzpe)) then
									sendClientMessage("[ТЕЛ] Ken_Rozenberg: Ладно, как получишь паспорт, я скажу тебе, что делать дальше. И без тебя проблем хватает. Езжай давай.", hzpe, 255, 255, 0)
									sendClientMessage("(( /GPS - Гос. учреждения - Мэрия))", hzpe, 255, 255, 0)
									setTimer(function ( notplayer )
										if(isElement(notplayer)) then
											local id = getElementData(notplayer, "ID")
											addBox("Звонок сброшен.", notplayer, 255, 255, 0)
											if(isElement(PhoneObject[id]) ~= nil) then
												exports.bone:detachElementFromBone(PhoneObject[id])
												destroyElement(PhoneObject[id])
											end
											removeElementData(notplayer, "AcceptedCall", false)
											setPedAnimation(notplayer, "BSKTBALL", "BBALL_idle_O", 1, false)
											toggleControl(notplayer, "enter_exit", true)
											toggleControl(notplayer, "fire", true)
											toggleControl(notplayer, "jump", true)
											toggleControl(notplayer, "enter_passenger", true)
											toggleControl(notplayer, "next_weapon", true)
											toggleControl(notplayer, "previous_weapon", true)
											toggleControl(notplayer, "aim_weapon", true)
											toggleControl(notplayer, "sprint", true)
											toggleControl(notplayer, "crouch", true)
											SED(notplayer, "Quest", 3)
											dbExec(mysql, "UPDATE `Accounts` SET `Quest` = ? WHERE `Name` = ?", getElementData(notplayer, "Quest"), getElementData(notplayer, "Name"))
										else
										end
									end, 5000, 1, hzpe)
								else
								end
							end, 7000, 1, neplayer)
						else
						end
					end, 5000, 1, player)
				end
			end, 5000, 1, client)
		elseif(getElementData(client, "Quest") == 3) then
			if(getElementData(client, "Passport") == 0) then
				addBox("Подсказка: Чтобы продолжить цепочку истории\nПожалуйста, получите паспорт в мэрии.\n(/GPS - Гос. учреждения - Мэрия)", client, 0, 60, 255)
			else
				SED(client, "Quest", 4)
				dbExec(mysql, "UPDATE `Accounts` set `Quest` = ? WHERE `Name` = ?", 4, getElementData(client, "Name"))
				sendClientMessage("SMS от Ken_Rozenberg: Ты там все сделал? Не забудь поесть, а то мне дохляка еще на своей шее не хватало, можешь перекусить в забегаловке\n(/gps - ближайшая закусочная).", client, 255, 255, 0)
			end
		elseif(getElementData(client, "Quest") == 4) then
			sendClientMessage("SMS от Ken_Rozenberg: Ты там все сделал? Не забудь поесть, а то мне дохляка еще на своей шее не хватало, можешь перекусить в забегаловке\n(/gps - ближайшая закусочная).", client, 255, 255, 0)
		elseif(getElementData(client, "Quest") == 5) then
			addBox("Подсказка: Чтобы продолжить цепочку истории\nПожалуйста, направляйтесь на начальную работу\nСтроителем или грузчиком и перенесите\nЛибо 30 упаковок,\nЛибо 350 кг материалов соответственно.\n(GPS - Начальные работы)", client, 255, 0, 0)
		elseif(getElementData(client, "Quest") == 6) then
			if(getElementData(client, "AutoLicense") == 0) then
				addBox("Подсказка: Чтобы продолжить цепочку истории\nПожалуйста, сдайте на права.\n (/gps - важные места - Автошкола)", client, 255, 0, 0)	
			else
				dbExec(mysql, "UPDATE `Accounts` SET `Quest` = ? WHERE `Name` = ?", -1, getElementData(client, "Name"))
				SED(client, "Quest", -1)
				getExp(thePlayer, 1)
				setElementMoney(thePlayer, 250, "Бонус квест")
				SED(thePlayer, "AcceptedCall", true)
				addBox("Звонок на телефон.", player, 255, 255, 0)
				setPedAnimation(thePlayer, "ped", "phone_talk", 1, true, true, false, true)
				local id = getElementData(thePlayer, "ID")
				PhoneObject[id] = createObject(16097, 0, 0, 0)
				exports.bone:attachElementToBone(PhoneObject[id], thePlayer, 12,0.03,0.02,0.12,0,90,90)
				showPlayerDialog(thePlayer, 113, 1, "Кен Розенберг по телефону", "Отлично, надо же ты смог все сделать, теперь мне пора идти по делам...\nА ты займись чем-нибудь, город там осмотри…\nМожет вольешься в какой-то коллектив. Да в конце концов, на работу устройся,\nТам еще деньжат подзаработаешь, Кен Розенберг херни не скажет, а то был тут один в голубой рубашке с пальмами,\nНе слушал меня и кончил плохо…\nЛадно, бывай, я позвоню позже.", "Ок", "Отмена")
			end
		end
	end
end

function onPolicePutPlayer( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") == 8) then
			if(getElementData(thePlayer, "Rank") >= 3) then
				if(id ~= nil) then
					if(toch(id) ~= nil) then
						id = toch(id)
						if(IDS[id] ~= nil) then
							local secPlayer = IDS[id]
							if(getElementData(secPlayer, "Wanted") > 0) then
								if(getElementData(secPlayer, "Cuffed") == true) then
									local veh = getPedOccupiedVehicle(thePlayer)
									if(veh ~= false) then
										if(getElementData(veh, "PoliceID") ~= false) then
											if(getElementData(veh, "PoliceID") == 1 or getElementData(veh, "PoliceID") == 2 or getElementData(veh, "PoliceID") == 5 or getElementData(veh, "PoliceID") == 6 or getElementData(veh, "PoliceID") == 7 or getElementData(veh, "PoliceID") == 8) then
												local x, y, z = getElementPosition(thePlayer)
												local x1, y1, z1 = getElementPosition(secPlayer)
												local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
												if(dist < 7) then
													local nyam = -1
													local max = getVehicleMaxPassengers(veh) - 1
													if(getVehicleOccupant(veh, 2) == false) then
														nyam = 2
													elseif(getVehicleOccupant(veh, 3) == false) then
														nyam = 3
													end
													if(nyam ~= -1) then
														warpPedIntoVehicle(secPlayer, veh, nyam)
														addBox("Полицейский " .. getElementData(thePlayer, "Name") .. " посадил Вас\nВ полицейское авто.", secPlayer, 255, 255, 0)
														addBox("Вы посадили " .. getElementData(secPlayer, "Name") .. " \nВ полицейское авто.", thePlayer, 255, 255, 0)
													else
														addBox("В машине нет свободного места.", thePlayer, 255, 0, 0)
													end
												else
													addBox("Данный игрок слишком далеко.", thePlayer, 255, 0, 0)
												end
											else
												addBox("Вы не можете посадить игрока\nВ данное авто.", thePlayer, 255, 0, 0)
											end
										else
											addBox("Вы не в полицейской машине.", thePlayer, 255, 0, 0)
										end
									else
										addBox("Вы не в полицейской машине.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Данный игрок не в наручниках.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Данный игрок не в розыске", thePlayer, 255, 0, 0)
							end
						else
							addBox("Игрок не найден.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: /putpl [id]", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: /putpl [id]", thePlayer, 255, 0, 0)
				end
			else
				addBox("Данная команда Вам недоступна.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Данная команда Вам недоступна.", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerTaxiPrice( thePlayer, command, id, summ )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "PWork") == 2) then
			if(getElementData(thePlayer, "TaxiVehicle") ~= false) then
				local veh = getPedOccupiedVehicle(thePlayer)
				if(veh == getElementData(thePlayer, "TaxiVehicle")) then
					if(id ~= nil) then
						if(toch(id) ~= nil) then
							id = toch(id)
							if(summ ~= nil) then
								if(toch(summ) ~= nil) then
									summ = toch(summ)
									if(summ > 0) then
										local secPlayer = IDS[id]
										if(IDS[id] ~= nil) then
											if(getElementData(secPlayer, "Login") == true) then
												local secVeh = getPedOccupiedVehicle(secPlayer)
												if(secVeh == veh) then
													local id = getElementData(secPlayer, "ID")
													if(TaxiAbuseTimer[id] == nil) then
														if(getElementData(secPlayer, "Lvl") == 1) then
															if(summ <= 250) then
																if(getElementData(secPlayer, "Money") >= summ) then
																	SED(secPlayer, "TaxiPrice", summ)
																	SED(secPlayer, "TaxiVod", thePlayer)
																	showPlayerDialog(secPlayer, 118, 1, "Чек от таксиста.", getElementData(thePlayer, "Name") .. " [" .. getElementData(thePlayer, "ID") .. "] предложил Вам\nЗаплатить за проезд " .. summ .. "$. Если Вы не согласны, то Вы автоматически покинете авто.", "Оплата", "Отмена")
																else
																	addBox("У данного игрока недостаточно денег.", thePlayer, 255, 0, 0)
																end
															else
																addBox("Новичку нельзя выписать чек\nБолее чем на 250$.", thePlayer, 255, 0, 0)
															end
														else
															if(getElementData(secPlayer, "Money") >= summ) then
																SED(secPlayer, "TaxiPrice", summ)
																SED(secPlayer, "TaxiVod", thePlayer)
																showPlayerDialog(secPlayer, 118, 1, "Чек от таксиста.", getElementData(thePlayer, "Name") .. " [" .. getElementData(thePlayer, "ID") .. "] предложил Вам\nЗаплатить за проезд " .. summ .. "$. Если Вы не согласны, то Вы автоматически покинете авто.", "Оплата", "Отмена")
															else
																addBox("У данного игрока недостаточно денег.", thePlayer, 255, 0, 0)
															end
														end
													else
														addBox("Данный игрок не может оплатить чек\nВ ближайшие 5 минут.", thePlayer, 255, 0, 0)
													end
												else
													addBox("Данный игрок не находится\nВ ваше такси!", thePlayer, 255, 0, 0)
												end
											else
												addBox("Данный игрок не авторизован.", thePlayer, 255, 0, 0)
											end
										else
											addBox("Данный игрок не найден.", thePlayer, 255, 0, 0)
										end
									else
										addBox("Сумма введена некорректно.", thePlayer, 255, 0, 0)
									end
								else
									addBox("/taxiprice [id] [Сумма].", thePlayer, 255, 0, 0)
								end
							else
								addBox("/taxiprice [id] [Сумма].", thePlayer, 255, 0, 0)
							end
						else
							addBox("/taxiprice [id] [Сумма].", thePlayer, 255, 0, 0)
						end
					else
						addBox("/taxiprice [id] [Сумма].", thePlayer, 255, 0, 0)
					end
				else
					addBox("Вы не находитесь в такси.", thePlayer, 255, 0, 0)
				end
			end
		end
	end
end

function onEjectPlayer( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true) then
		local veh = getPedOccupiedVehicle(thePlayer)
		if(veh ~= false) then
			if(getPedOccupiedVehicleSeat(thePlayer) == 0) then
				if(id ~= nil) then
					if(toch(id) ~= nil) then
						id = toch(id)
						if(IDS[id] ~= nil) then
							local secPlayer = IDS[id]
							if(getPedOccupiedVehicle(secPlayer) == veh) then
								if(getElementData(thePlayer, "ToggleVeh") == true) then
									removePedFromVehicle(secPlayer)
									addBox(getElementData(thePlayer, "Name") .. " [" .. getElementData(thePlayer, "ID") .. "]\nВыкинул Вас из авто!", secPlayer, 255, 0, 0)
									addBox("Вы выкинули " .. getElementData(secPlayer, "Name") .. " [" .. getElementData(secPlayer, "ID") .. "]\nИз авто", thePlayer, 255, 255, 0)
								else
									addBox("Произошла системная ошибка.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Данный игрок не Вашем авто.", thePlayer, 255, 0, 0)
							end
						else
							addBox("/eject [id]", thePlayer, 255, 0, 0)
						end
					else
						addBox("/eject [id]", thePlayer, 255, 0, 0)
					end
				else
					addBox("/eject [id]", thePlayer, 255, 0, 0)
				end
			else
				addBox("Вы не за рулем.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Вы не находитесь в авто", thePlayer, 255, 0, 0)
		end
	end
end

function onAdminChangeName( thePlayer, command, id, nick )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") >= 3) then
			if(id ~= nil) then
				if(toch(id) ~= nil) then
					id = toch(id)
					if(IDS[id] ~= nil) then
						local secPlayer = IDS[id]
						if(getElementData(secPlayer, "Login") == true) then
							if(nick ~= nil) then
								if(string.len(nick) >= 4 and string.len(nick) <= 20) then
									query = dbQuery(mysql, "SELECT COUNT(*) FROM `Accounts` WHERE `Name` = ?", nick)
									local result = dbPoll(query, -1)
									if(result[1] ~= nil) then
										if(result[1]["COUNT(*)"] > 0) then
											addBox("Ошибка: Данный ник занят.", thePlayer, 255, 0, 0)
										elseif(result[1]["COUNT(*)"] == 0) then
											dbExec(mysql, "UPDATE `Accounts` SET `Name` = ? WHERE `Name` = ?", nick, getElementData(secPlayer, "Name"))
											if(getElementData(secPlayer, "BusOwnID") > 0) then
												bus = toch(getElementData(secPlayer, "BusOwnID"))
												dbExec(mysql, "UPDATE `Business` SET `OwnerName` = ?, `Owner` = ? WHERE `ID` = ?", nick, getElementData(secPlayer, "AccID"), getElementData(secPlayer, "BusOwnID"))
												BusinessTable[bus]["OwnerName"] = nick
											end
											if(getElementData(secPlayer, "House") > 0) then
												dbExec(mysql, "UPDATE `House` set `PName` = ?, `PID` = ? WHERE `ID` = ?", nick, getElementData(secPlayer, "AccID"), getElementData(secPlayer, "House"))
												local ho = toch(getElementData(secPlayer, "House"))
												HouseTable[ho]["PName"] = nick
											end
											for i,n in pairs(IDS) do
												if(getElementData(n, "Login") == true) then
													sendClientMessage("Администратор " .. getElementData(thePlayer, "Name") .. " изменил нон-рп имя игроку " .. getElementData(secPlayer, "Name") .. " [" .. getElementData(secPlayer, "ID") .. "] на " .. nick .. ".", n, 255, 30, 0)
												end
											end
											kickPlayer(secPlayer, "new name: " .. nick)
										end
									else
										addBox("Ошибка: Данный ник занят.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Ошибка: Ник должен быть от 4 до 20 символов.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: Ник должен быть от 4 до 20 символов.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: Данный игрок не авторизован.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: Данный игрок не найден.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: /changename [id] [name]", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: /changename [id] [name]", thePlayer, 255, 0, 0)
			end
		end
	end
end

function onOffMembers( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") >= 1) then
			if(getElementData(thePlayer, "Rank") >= 9) then
				local query = dbQuery(mysql, "SELECT `Name`, `Rank` FROM `Accounts` WHERE `Faction` = ?", getElementData(thePlayer, "Faction"))
				local result = dbPoll(query, -1)
				local str = "Имя\tНомер ранга"
				for i,n in pairs(result) do
					str = str .. "\n" .. n["Name"] .. "\t" .. n["Rank"]
				end
				showPlayerDialog(thePlayer, 64000, 3, "Список во фракции оффлайн", str, "Ок", "Отмена")
			else
				addBox("У Вас нет доступа к данной функции.", thePlayer, 255, 0, 0)
			end
		else
			addBox("У Вас нет доступа к данной функции.", thePlayer, 255, 0, 0)
		end
	end
end

function onOffUninvite( thePlayer, command, name )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") >= 1) then
			if(getElementData(thePlayer, "Rank") >= 9) then
				if(name ~= nil) then
					if(string.len(name) > 3) then
						local query = dbQuery(mysql, "SELECT `Faction`, `Rank`, `Name`, `ID` FROM `Accounts` WHERE `Name` = ?", name)
						local result = dbPoll(query, -1)
						if(result ~= nil) then
							if(result[1] ~= nil) then
								if(result[1]["Faction"] ~= nil) then
									if(result[1]["Faction"] == getElementData(thePlayer, "Faction")) then
										if(result[1]["Rank"] < getElementData(thePlayer, "Rank")) then
											for i,n in pairs(IDS) do
												if(getElementData(n, "Login") ~= false) then
													if(getElementData(n, "Name") == name) then
														setElementData(n, "Faction", 0)
														setElementData(n, "Rank", 0)
														customSpawnPlayer(n)
														addBox("Вы были уволены игроком\n" .. getElementData(thePlayer, "Name") .. " из организации.", n, 255, 0, 0)
														break
													end
												end
											end 
											dbExec(mysql, "UPDATE `Accounts` SET `Faction` = 0, `Rank` = 0 WHERE `ID` = ?", result[1]["ID"])
											addBox("Вы успешно уволили\n" .. result[1]["Name"] .. " из организации.", thePlayer, 255, 0, 0)
										else
											addBox("Вы не можете уволить данного игрока.", thePlayer, 255, 0, 0)
										end
									else
										addBox("Вы не можете уволить данного игрока.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Данный игрок не найден.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Данный игрок не найден.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Данный игрок не найден.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Данный игрок не найден.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: /offuninvite [Имя]", thePlayer, 255, 0, 0)
				end
			else
				addBox("Вы не можете воспользоваться\nДанной командой.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Вы не можете воспользоваться\nДанной командой.", thePlayer, 255, 0, 0)
		end
	end
end

addCommandHandler("offuninvite",	onOffUninvite)
addCommandHandler("offmembers",		onOffMembers)
addCommandHandler("changename",		onAdminChangeName)
addCommandHandler("eject",			onEjectPlayer)
addCommandHandler("taxiprice", 		onPlayerTaxiPrice)
addCommandHandler("putpl",			onPolicePutPlayer)
addCommandHandler("quest",			onPlayerQuest)
addCommandHandler("warehouse", 		onWareHouse)
addCommandHandler("alladmins",		onAllAdmins)
addCommandHandler("offban",			onOffBan)
addCommandHandler("offmakeadm",		onOffMakeAdmin)
addCommandHandler("bank",			onPlayerCheckBank)
addCommandHandler("sellown",		onPlayerSellOwn)
addCommandHandler("selldrugs",		onPlayerSellDrugs)
addCommandHandler("sellgun",		onPlayerSellGun)
addCommandHandler("awhistory",		onPlayerCheckAWHistory)
addCommandHandler("whistory",		onPlayerCheckWHistory)
addCommandHandler("aopenw",			onPlayerAOpenW)
addCommandHandler("aclosew",		onPlayerACloseW)
addCommandHandler("closew",			onPlayerCloseSkl)
addCommandHandler("allmembers",		onPlayerCheckAllMembers)
addCommandHandler("members", 		onPlayerCheckMembers)
addCommandHandler("blacklist",		onPlayerCheckBlackList)
addCommandHandler("blackremove",	onPlayerRemoveChs)
addCommandHandler("blackadd",		onPlayerAddChs)
addCommandHandler("changeskin",		onPlayerChangeSkin)
addCommandHandler("putm",			onPlayerPutMaterial)
addCommandHandler("most", 			onAdminTpMost)
addCommandHandler("lock",			onPlayerLock)
addCommandHandler("fish",			onPlayerFish)
addCommandHandler("hmenu",			onPlayerCheckHouseMenu)
addCommandHandler("shelp",			onPlayerCheckHelp)
addCommandHandler("b",				onPlayerNChat)
addCommandHandler("w",				onPlayerWepot)
addCommandHandler("s",				onPlayerShout)
addCommandHandler("setarmor",		onAdminSetArmor, false)
addCommandHandler("sethp",			onAdminSetHp, false)
addCommandHandler("mall",			onAdminTpMall)
addCommandHandler("carbuy",			onAdminTpCarBuy)
addCommandHandler("unwarn",			onAdminUnwarn)
addCommandHandler("akick",			onAdminKick)
addCommandHandler("aban",			onAdminBan)
addCommandHandler("capture",		onMafiaCapture)
addCommandHandler("bus2",			onPlayerTpAPark2)
addCommandHandler("bmenu",			onPlayerBuyMenu)
addCommandHandler("armor",			onAdminUseArmor)
addCommandHandler("warn",			onAdminWarn)
addCommandHandler("arepair",		onAdminRepair)
addCommandHandler("amute",			onAdminUseMute)
addCommandHandler("spawn", 			onAdminUseSpawn)
addCommandHandler("mm",				onPlayerCheckMenu)
addCommandHandler("mainmenu",		onPlayerCheckMenu)
addCommandHandler("menu",			onPlayerCheckMenu)
addCommandHandler("mn",				onPlayerCheckMenu)
addCommandHandler("id",				onPlayerGetId)
addCommandHandler("pm",				onAdminPm)
addCommandHandler("ans",			onPlayerAns)
addCommandHandler("answer",			onPlayerAns)
addCommandHandler("otvet",			onPlayerAns)
addCommandHandler("sms",			onPlayerSms)
addCommandHandler("refuse",			onPlayerRefuse)
addCommandHandler("accept",			onPlayerAccept)
addCommandHandler("call",			onPlayerPhoneCall)
addCommandHandler("c",				onPlayerPhoneCall)
addCommandHandler("unarrest",		onPlayerUnarrest)
addCommandHandler("arrest",			onPlayerArrest)
addCommandHandler("live",			onPlayerLive)
addCommandHandler("news",			onPlayerNews)
addCommandHandler("asay", 			onAdminAsay)
addCommandHandler("changesex", 		onMedicChangeSex)
addCommandHandler("fmenu",			onPlayerUseFMenu)
addCommandHandler("vcn", 			onAdminTpVCN)
addCommandHandler("makeadmin", 		onAdminSetAdmin)
addCommandHandler("agivevehlic",	onPlayerAGL)
addCommandHandler("army", 			onAdminTpArmy)
addCommandHandler("ash",			onAdminTpAsh)
addCommandHandler("amail",			onAdminTpMail)
addCommandHandler("sellgoscar",		onSellGosCar)
addCommandHandler("aero", 			onTpAero)
addCommandHandler("shotel", 		onPlayerSHotel)
addCommandHandler("sethvs",			onPlayerSetHVS)
addCommandHandler("ahelp",			onAdminACommands)
addCommandHandler("a",				onPlayerAdminChat)
addCommandHandler("sethint",		onAdminSetHInt)
addCommandHandler("gps",			onPlayerGPS)
addCommandHandler("anim", 			onPlayerAnimList)
addCommandHandler("animlist",		onPlayerAnimList)
addCommandHandler("repairveh",		onAdminRepair)
addCommandHandler("licsell",		onLicSell)
addCommandHandler("mer",			onTpMer)
addCommandHandler("sellgoshouse",	onPlayerSellGosHouse)
addCommandHandler("sellhouse",		onPlayerSellHouse)
addCommandHandler("hp",				onPlayerAHeal)
addCommandHandler("int",			onPlayerInt)
addCommandHandler("builder",		onTpBuilder)
addCommandHandler("giveexp", 		onPlayerGiveExp)
addCommandHandler("afuel",			onPlayerAFuel)
addCommandHandler("d",				onPlayerChatDepart)
addCommandHandler("r",				onPlayerUseTalkie)
addCommandHandler("rb",				onPlayerRatio)
addCommandHandler("setlic", 		onPlayerSetLic)
addCommandHandler("aeat",			onPlayerAEat)
addCommandHandler("sethouseprice",	onSetHousePrice)
addCommandHandler("stopspec",		onStopSpectating)
addCommandHandler("spoff",			onStopSpectating)
addCommandHandler("specoff",		onStopSpectating)
addCommandHandler("report",			onPlayerReport)
addCommandHandler("try",			onPlayerTry)
addCommandHandler("do",				onPlayerDo)
addCommandHandler("commands",		onPlayerGetCommands)
addCommandHandler("setleader", 		onSetLeader)
addCommandHandler("pay",			onPlayerPay)
addCommandHandler("taxipark", 		onTaxiPark)
addCommandHandler("addel",			onPlayerDeleteAd)
addCommandHandler("edit", 			onPlayerEditAd)
addCommandHandler("ads",			onPlayerAds)
addCommandHandler("ad",				onPlayerAdvert)
addCommandHandler("templeader", 	tempLeader)
addCommandHandler("su",				suspectPolicePlayer)
addCommandHandler("heal", 			healMedPlayer)
addCommandHandler("ch", 			onPlayerCreateHouse)
addCommandHandler("gov", 			onPlayerGov)
addCommandHandler("elit", 			tpAutobus)
addCommandHandler("bus", 			tpAutopark)
addCommandHandler("fuel", 			fuelBuy)

setTimer( updateTime, 1800000, 0)
setTimer( pulseTime, 1000, 0)

addEventHandler("onPlayerChangeNick", root, function ( old, new, change )
	cancelEvent()
end)

function hitWeapMaf1( hit, dim )
	if(getElementType(hit) == "player") then
		if(getElementData(hit, "Faction") == 1) then
			if(getElementData(hit, "MafMat") == false) then
				if(AFOS[1] == true) then
					if(FactOpenSkl[1] == true) then
						if(getElementData(hit, "Material") > 0) then
							local mat = toch(getElementData(hit, "Material"))
							SED(hit, "Material", 0)
							addBox("Вы положили на склад " .. mat .. " мат.", hit, 0, 100, 255)
							Server["Maf1Mat"] = Server["Maf1Mat"]  + mat
							dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = ?", Server["Maf1Mat"], "Maf1Mat")
						else
							showPlayerDialog(hit, 73, 3, "Выбор оружия", "Оружие\tКол-во\nDesert Eagle\t21 патрон\nShotgun\t8 патрон\nAK-47\t60 патрон", "Выбор", "Отмена")
						end
					else
						addBox("Склад закрыт лидером организации.", hit, 255, 0, 0)
					end
				else
					addBox("Склад закрыт администрацией.", hit, 255, 0, 0)
				end
			else
				if(Server["Maf1Mat"] + 25 <= 100000) then
					local id = getElementData(hit, "ID")
					exports.bone:detachElementFromBone(MatObject[id])
					destroyElement(MatObject[id])
					MatObject[id] = nil
					removeElementData(hit, "MafMat")
					toggleControl(hit, "enter_exit", true)
					toggleControl(hit, "fire", true)
					toggleControl(hit, "jump", true)
					toggleControl(hit, "enter_passenger", true)
					toggleControl(hit, "next_weapon", true)
					toggleControl(hit, "previous_weapon", true)
					toggleControl(hit, "aim_weapon", true)
					toggleControl(hit, "sprint", true)
					toggleControl(hit, "crouch", true)
					Server["Maf1Mat"] = Server["Maf1Mat"]  + 25
					dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = ?", Server["Maf1Mat"], "Maf1Mat")
					addBox("Вы положили 25 материалов.\nНа склад мафии.", hit, 0, 60, 255)
					setPedAnimation(hit, "BSKTBALL", "BBALL_idle_O", 1, false)
					local fact = getElementData(hit, "Faction")
					local query = dbQuery(mysql, "SELECT COUNT(*) from `skllogs`")
					local result = dbPoll(query, -1)
					dbExec(mysql, "INSERT into `skllogs` (`ID`, `AccID`, `Name`, `Faction`, `Type`, `Ed`) VALUES (?, ?, ?, ?, 6, ?)", result[1]["COUNT(*)"], getElementData(hit, "AccID"), getElementData(hit, "Name"), fact, 25)
					local str = getElementData(hit, "Name") .. " (" .. getElementData(hit, "ID") .. ") принес ящик материалов (25 штук) на склад."
					for i,n in pairs(IDS) do
						if(getElementData(n, "Login") == true) then
							if(getElementData(n, "Faction") == getElementData(hit, "Faction")) then
								sendClientMessage(str, n, 180, 120, 180)
							end
						end
					end
					dbFree(query)
				else
					addBox("Ошибка: Склад переполнен.", hit, 255, 0, 0)
				end
			end
		else
			addBox("Ошибка: Вы не можете этого сделать.", hit, 255, 0, 0)
		end
	end
end

function hitWeapMaf2( hit, dim )
	if(getElementType(hit) == "player") then
		if(getElementData(hit, "Faction") == 2) then
			if(getElementData(hit, "MafMat") == false) then
				if(AFOS[2] == true) then
					if(FactOpenSkl[2] == true) then
						if(getElementData(hit, "Material") > 0) then
							local mat = toch(getElementData(hit, "Material"))
							SED(hit, "Material", 0)
							addBox("Вы положили на склад " .. mat .. " мат.",hit, 0, 100, 255)
							Server["Maf2Mat"] = Server["Maf2Mat"]  + mat
						else
							showPlayerDialog(hit, 73, 3, "Выбор оружия", "Оружие\tКол-во\nDesert Eagle\t21 патрон\nShotgun\t8 патрон\nAK-47\t60 патрон", "Выбор", "Отмена")
						end
					else
						addBox("Склад закрыт лидером организации.", hit, 255, 0, 0)
					end
				else
					addBox("Склад закрыт лидером администрацией.", hit, 255, 0, 0)
				end
			else
				if(Server["Maf2Mat"] + 25 <= 100000) then
					local id = getElementData(hit, "ID")
					exports.bone:detachElementFromBone(MatObject[id])
					destroyElement(MatObject[id])
					MatObject[id] = nil
					removeElementData(hit, "MafMat")
					toggleControl(hit, "enter_exit", true)
					toggleControl(hit, "fire", true)
					toggleControl(hit, "jump", true)
					toggleControl(hit, "enter_passenger", true)
					toggleControl(hit, "next_weapon", true)
					toggleControl(hit, "previous_weapon", true)
					toggleControl(hit, "aim_weapon", true)
					toggleControl(hit, "sprint", true)
					toggleControl(hit, "crouch", true)
					Server["Maf2Mat"] = Server["Maf2Mat"]  + 25
					dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = ?", Server["Maf2Mat"], "Maf2Mat")
					addBox("Вы положили 25 материалов.\nНа склад мафии.", hit, 0, 60, 255)
					setPedAnimation(hit, "BSKTBALL", "BBALL_idle_O", 1, false)
					local fact = getElementData(hit, "Faction")
					local query = dbQuery(mysql, "SELECT COUNT(*) from `skllogs`")
					local result = dbPoll(query, -1)
					dbExec(mysql, "INSERT into `skllogs` (`ID`, `AccID`, `Name`, `Faction`, `Type`, `Ed`) VALUES (?, ?, ?, ?, 6, ?)", result[1]["COUNT(*)"], getElementData(hit, "AccID"), getElementData(hit, "Name"), fact, 25)
					dbFree(query)
				else
					addBox("Ошибка: Склад переполнен.", hit, 255, 0, 0)
				end
			end
		else
			addBox("Ошибка: Вы не можете этого сделать.", hit, 255, 0, 0)
		end
	end
end

function hitWeapMaf3( hit, dim )
	if(getElementType(hit) == "player") then
		if(getElementData(hit, "Faction") == 3) then
			if(getElementData(hit, "MafMat") == false) then
				if(AFOS[3] == true) then
					if(FactOpenSkl[3] == true) then
						if(getElementData(hit, "Material") > 0) then
								local mat = toch(getElementData(hit, "Material"))
								SED(hit, "Material", 0)
								addBox("Вы положили на склад " .. mat .. " мат.",hit, 0, 100, 255)
								Server["Maf3Mat"] = Server["Maf3Mat"]  + mat
						else
							showPlayerDialog(hit, 73, 3, "Выбор оружия", "Оружие\tКол-во\nDesert Eagle\t21 патрон\nShotgun\t8 патрон\nAK-47\t60 патрон", "Выбор", "Отмена")
						end
					else
						addBox("Склад закрыт лидером организации.", hit, 255, 0, 0)
					end
				else
					addBox("Склад закрыт лидером администрацией.", hit, 255, 0, 0)
				end
			else
				if(Server["Maf3Mat"] + 25 <= 100000) then
					local id = getElementData(hit, "ID")
					exports.bone:detachElementFromBone(MatObject[id])
					destroyElement(MatObject[id])
					MatObject[id] = nil
					removeElementData(hit, "MafMat")
					toggleControl(hit, "enter_exit", true)
					toggleControl(hit, "fire", true)
					toggleControl(hit, "jump", true)
					toggleControl(hit, "enter_passenger", true)
					toggleControl(hit, "next_weapon", true)
					toggleControl(hit, "previous_weapon", true)
					toggleControl(hit, "aim_weapon", true)
					toggleControl(hit, "sprint", true)
					toggleControl(hit, "crouch", true)
					Server["Maf3Mat"] = Server["Maf3Mat"]  + 25
					dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = ?", Server["Maf3Mat"], "Maf3Mat")
					addBox("Вы положили 25 материалов.\nНа склад мафии.", hit, 0, 60, 255)
					setPedAnimation(hit, "BSKTBALL", "BBALL_idle_O", 1, false)
					local fact = getElementData(hit, "Faction")
					local query = dbQuery(mysql, "SELECT COUNT(*) from `skllogs`")
					local result = dbPoll(query, -1)
					dbExec(mysql, "INSERT into `skllogs` (`ID`, `AccID`, `Name`, `Faction`, `Type`, `Ed`) VALUES (?, ?, ?, ?, 6, ?)", result[1]["COUNT(*)"], getElementData(hit, "AccID"), getElementData(hit, "Name"), fact, 25)
					dbFree(query)
				else
					addBox("Ошибка: Склад переполнен.", hit, 255, 0, 0)
				end
			end
		else
			addBox("Ошибка: Вы не можете этого сделать.", hit, 255, 0, 0)
		end
	end
end

function hitWeapMaf4( hit, dim )
	if(getElementType(hit) == "player") then
		if(getElementData(hit, "Faction") == 4) then
			if(getElementData(hit, "MafMat") == false) then
				if(AFOS[4] == true) then
					if(FactOpenSkl[4] == true) then
						if(getElementData(hit, "Material") > 0) then
							local mat = toch(getElementData(hit, "Material"))
							SED(hit, "Material", 0)
							addBox("Вы положили на склад " .. mat .. " мат.",hit, 0, 100, 255)
							Server["Maf4Mat"] = Server["Maf4Mat"]  + mat
						else
							showPlayerDialog(hit, 73, 3, "Выбор оружия", "Оружие\tКол-во\nDesert Eagle\t21 патрон\nShotgun\t8 патрон\nAK-47\t60 патрон", "Выбор", "Отмена")
						end
					else
						addBox("Склад закрыт лидером организации.", hit, 255, 0, 0)
					end
				else
					addBox("Склад закрыт лидером администрацией.", hit, 255, 0, 0)
				end
			else
				if(Server["Maf4Mat"] + 25 <= 100000) then
					local id = getElementData(hit, "ID")
					exports.bone:detachElementFromBone(MatObject[id])
					destroyElement(MatObject[id])
					MatObject[id] = nil
					removeElementData(hit, "MafMat")
					toggleControl(hit, "enter_exit", true)
					toggleControl(hit, "fire", true)
					toggleControl(hit, "jump", true)
					toggleControl(hit, "enter_passenger", true)
					toggleControl(hit, "next_weapon", true)
					toggleControl(hit, "previous_weapon", true)
					toggleControl(hit, "aim_weapon", true)
					toggleControl(hit, "sprint", true)
					toggleControl(hit, "crouch", true)
					Server["Maf4Mat"] = Server["Maf4Mat"]  + 25
					dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = ?", Server["Maf4Mat"], "Maf4Mat")
					addBox("Вы положили 25 материалов.\nНа склад мафии.", hit, 0, 60, 255)
					setPedAnimation(hit, "BSKTBALL", "BBALL_idle_O", 1, false)
					local fact = getElementData(hit, "Faction")
					local query = dbQuery(mysql, "SELECT COUNT(*) from `skllogs`")
					local result = dbPoll(query, -1)
					dbExec(mysql, "INSERT into `skllogs` (`ID`, `AccID`, `Name`, `Faction`, `Type`, `Ed`) VALUES (?, ?, ?, ?, 6, ?)", result[1]["COUNT(*)"], getElementData(hit, "AccID"), getElementData(hit, "Name"), fact, 25)
					dbFree(query)
				else
					addBox("Ошибка: Склад переполнен.", hit, 255, 0, 0)
				end
			end
		else
			addBox("Ошибка: Вы не можете этого сделать.", hit, 255, 0, 0)
		end
	end
end

function onPlayerHPay( thePlayer, command, payday )
	if(getElementData(thePlayer, "Login")) then
		if(getElementData(thePlayer, "House") > 0) then
			if(payday ~= nil) then
				if(toch(payday) ~= nil) then
					payday = math.round(payday)
					local house = getElementData(thePlayer, "House")
					local money = getElementData(thePlayer, "Money")
					if(money >= payday * 50) then
						if(HouseTable[house]["PayDay"] < 720) then
							if(HouseTable[house]["PayDay"] + payday <= 720) then
								setElementMoney(thePlayer, -payday * 50, "Оплата дома")
								addBox("Вы оплатили дом на " .. payday .. " PayDay.", thePlayer, 0, 255, 100)
								HouseTable[house]["PayDay"] = HouseTable[house]["PayDay"] + payday
								dbExec(mysql, "UPDATE `House` SET `PayDay` = ? WHERE `ID` = ?", HouseTable[house]["PayDay"], house)
							else
								payday = 720 - HouseTable[house]["PayDay"]
								setElementMoney(thePlayer, -payday * 50, "Оплата дома")
								addBox("Вы оплатили дом на максимум.", thePlayer, 0, 255, 100)
								HouseTable[house]["PayDay"] = HouseTable[house]["PayDay"] + payday
								dbExec(mysql, "UPDATE `House` SET `PayDay` = ? WHERE `ID` = ?", HouseTable[house]["PayDay"], house)
							end
						else
							addBox("Ваш дом уже оплачен на максимум.", thePlayer, 255, 255, 0)
						end
					else
						addBox("Ошибка: У Вас недостаточно денег.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: Количество введено некорректно.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: Вы не ввели количество.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: У Вас нет дома.", thePlayer, 255, 0, 0)
		end
	end
end

function updatePlayerAccount( thePlayer, name, value )
	if(getElementData(thePlayer, "Login") == true) then
		local accid = toch(getElementData(thePlayer, "AccID"))
		dbExec(mysql, "UPDATE `Accounts` SET `" .. name .. "` = ? WHERE `ID` = ?", value, accid)
	end
end

function hitSkinShop( hit, dim )
	if(getElementType(hit) == "player") then
		if(getElementData(hit, "Login") == true) then
			local x, y, z = getElementPosition(source)
			local x1, y1, z1 = getElementPosition(hit)
			local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
			if(dist < 2) then
				triggerClientEvent(hit, "onPlayerEnterSkinShop", hit, SkinTable)
				SEP(hit, 422.779296875, 1018.189453125, 18.92015838623)
				setElementRotation(hit, 0, 0, 0)
				toggleAllControls(hit, false)
				SIDP(hit, getElementData(hit, "ID"))
			end
		end
	end
end

function onPlayerSetSpawn(thePlayer, command)
	if(getElementData(thePlayer, "Login") == true) then
		showPlayerDialog(thePlayer, 78, 3, "Выбор спавна", "Место при появлении\nСтандартный спавн\nДом\nФракция", "Выбор", "Отмена")
	end
end

function onVipChat( thePlayer, command, ... )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "VipType") > 0 or getElementData(thePlayer, "Admin") > 0) then
			local arg = {...}
			if(#arg > 0) then
				local str = table.concat(arg, " ")
				if(string.len(str) > 0) then
					local arga = string.find(str, "#")
					if(arga == nil) then
						local str = "[VIP] " .. getElementData(thePlayer, "Name") .. " [" .. getElementData(thePlayer, "ID") .. "]: " .. str
						for i,n in pairs(IDS) do
							if(getElementData(n, "Login") == true) then
								if(getElementData(n, "VipType") > 0 or getElementData(n, "Admin") > 0) then
									sendClientMessage(str, n, 130, 220, 70)
								end
							end
						end
					else
						addBox("Ошибка: /vc [Текст]", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: /vc [Текст]", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: /vc [Текст]", thePlayer, 255, 0, 0)
			end
		end
	end
end

addCommandHandler("vc",	onVipChat)

function onAdminJail( thePlayer, command, id, min, ... )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 1) then
			if(id ~= nil) then
				if(toch(id) ~= nil) then
					id = math.round(id)
					if(min ~= nil) then
						if(toch(min) ~= nil) then
							min = math.round(min)
							local arg = {...}
							local a = #arg
							if(a > 0) then
								local reason = table.concat(arg, " ")
								if(string.len(reason) > 0) then
									if(min > 0) then
										if(IDS[id] ~= nil) then
											local secPlayer = IDS[id]
											if(getElementData(secPlayer, "Login") == true) then
												if(secPlayer ~= thePlayer) then
													SED(secPlayer, "AdminJail", min * 60)
													dbExec(mysql, "UPDATE `Accounts` set `AdminJail` = ? WHERE `Name` = ?", min * 60, getElementData(secPlayer, "Name"))
													addBox("Вы посадили игрока " .. getElementData(secPlayer, "Name") .. "\nНа " .. min .. " мин.", thePlayer, 255, 255, 0)
													addBox("Вы были посажены в тюрьму на " .. min .. " минут.", secPlayer, 255, 255, 0)
													sendClientMessage("Администратор " .. getElementData(thePlayer, "Name") .. " посадил игрока " .. getElementData(secPlayer, "Name") .. "(" .. id .. ") на " .. min .. " мин.", getRootElement(), 255, 60, 0)
													sendClientMessage("Причина: " .. reason, getRootElement(), 255, 60, 0)
													setPlayerWantedLevel(secPlayer, 0)
													updatePlayerAccount(secPlayer, "Wanted", 0)
													updatePlayerAccount(secPlayer, "AdminJail", min * 60)
													customSpawnPlayer(secPlayer)
													aid = aid + 1
													dbExec(mysql, "INSERT into `alllogs` (`ID`, `AccID`, `Reason`, `SecID`, `Type`) VALUES (?, ?, ?, ?, 6)", aid, getElementData(secPlayer, "AccID"), reason, getElementData(thePlayer, "AccID"), min)
												else
													addBox("Ошибка: Вы не можете посадить себя.", thePlayer, 255, 0, 0)
												end
											else
												addBox("Ошибка: Данный игрок не авторизован.", thePlayer, 255, 0, 0)
											end
										else
											addBox("Ошибка: Данный игрок не найден.", thePlayer, 255, 0, 0)
										end
									elseif(min == 0) then
										if(IDS[id] ~= nil) then
											local secPlayer = IDS[id]
											if(getElementData(secPlayer, "Login") == true) then 
												if(getElementData(secPlayer, "AdminJail") > 0) then
													if(secPlayer ~= thePlayer) then
														removeElementData(secPlayer, "AdminJail")
														addBox("Вы были освобождены досрочно.", secPlayer, 0, 100, 255)
														addBox("Вы освободили игрока " .. getElementData(secPlayer, "Name"), thePlayer, 0, 100, 255)
														updatePlayerAccount(secPlayer, "Wanted", 0)
														updatePlayerAccount(secPlayer, "AdminJail", 0)
														customSpawnPlayer(secPlayer)
														aid = aid + 1
														dbExec(mysql, "INSERT into `alllogs` (`ID`, `AccID`, `Reason`, `SecID`, `Type`) VALUES (?, ?, ?, ?, 7)", aid, getElementData(secPlayer, "AccID"), reason, getElementData(thePlayer, "AccID"))
													else
														addBox("Ошибка: Вы не можете освободить себя", thePlayer, 255, 0, 0)
													end
												else
													addBox("Ошибка: Данный игрок не находится в тюрьме.", thePlayer, 255, 0, 0)
												end
											else
												addBox("Ошибка: Данный игрок не авторизован.", thePlayer, 255, 0, 0)
											end
										else
											addBox("Ошибка: Данный игрок не найден.", thePlayer, 255, 0, 0)
										end
									else
										addBox("Ошибка: Время указано некорректно.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Ошибка: Причина не указана.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: Причина не указана.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: Время указано неверно.", thePlayer, 255, 0, 0)
						end 
					else
						addBox("Ошибка: Время не указано.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: ID указан неверно.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: /jail [id] [min] [reason]", thePlayer, 255, 0, 0)
			end
		end
	end
end

function onAdminUnJail( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 2) then
			if(id ~= nil) then
				if(toch(id) ~= nil) then
					id = math.round(id)
					if(IDS[id] ~= nil) then
						local secPlayer = IDS[id]
						if(getElementData(secPlayer, "Login") == true) then
							if(getElementData(secPlayer, "AdminJail") ~= false) then
								removeElementData(secPlayer, "AdminJail")
								addBox("Вы были досрочно освобождены", secPlayer, 255, 255, 0)
								addBox("Вы досрочно освободили " .. getElementData(secPlayer, "Name") .. "(" .. id .. ")", thePlayer, 255, 255, 0)
								customSpawnPlayer(secPlayer)
								updatePlayerAccount(secPlayer, "AdminJail", 0)
							else
								addBox("Ошибка: Данный игрок не находится в тюрьме.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: Данный игрок не авторизован.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: Данный игрок не найден.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: ID введен некорректно.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: Вы не ввели ID.", thePlayer, 255, 0, 0)
			end
		end
	end
end

function onPlayerUpSkill( weapon )
	if(getElementData(client, "Login") == true) then
		if(weapon == 1) then
			if(getElementData(client, "SkillDeagle") ~= 100) then
				local weaponskill = toch(getElementData(client, "SkillDeagle")) + 5
				local weaponid = 24
				if(weaponskill < 100) then
					if(weaponskill % 5 == 0) then
						SED(client, "SkillDeagle", weaponskill)
						addBox("Навык владения Desert Eagle повышен.", client, 0, 255, 100)
						dbExec(mysql, "UPDATE `Accounts` SET `SkillDeagle` = ? WHERE `Name` = ?", weaponskill, getElementData(client, "Name"))
					end
				elseif(weaponskill == 100) then
					setPedStat(client, 71, 1000)
					SED(client, "SkillDeagle", 100)
					addBox("Навык владения Desert Eagle максимален.", client, 0, 255, 100)
					dbExec(mysql, "UPDATE `Accounts` SET `SkillDeagle` = ? WHERE `Name` = ?", 100, getElementData(client, "Name"))
				end
			end
		elseif(weapon == 2) then
			if(getElementData(client, "SkillShotgun") ~= 100) then
				local weaponskill = toch(getElementData(client, "SkillShotgun")) + 5
				local weaponid = 25
				if(weaponskill < 100) then
					if(weaponskill % 5 == 0) then
						SED(client, "SkillShotgun", weaponskill)
						addBox("Навык владения Shotgun повышен.", client, 0, 255, 100)
						dbExec(mysql, "UPDATE `Accounts` SET `SkillShotgun` = ? WHERE `Name` = ?", weaponskill, getElementData(client, "Name"))
					end
				elseif(weaponskill == 100) then
					setPedStat(client, 72, 1000)
					SED(client, "SkillShotgun", 100)
					addBox("Навык владения Shotgun максимален.", client, 0, 255, 100)
					dbExec(mysql, "UPDATE `Accounts` SET `SkillShotgun` = ? WHERE `Name` = ?", weaponskill, getElementData(client, "Name"))
				end
			end
		elseif(weapon == 3) then
			if(getElementData(client, "SkillAk47") ~= 100) then
				local weaponskill = toch(getElementData(client, "SkillAk47")) + 5
				local weaponid = 30
				if(weaponskill < 100) then
					if(weaponskill % 5 == 0) then
						SED(client, "SkillAk47", weaponskill)
						addBox("Навык владения Ak-47 повышен.", client, 0, 255, 100)
						dbExec(mysql, "UPDATE `Accounts` SET `SkillAk47` = ? WHERE `Name` = ?", weaponskill, getElementData(client, "Name"))
					end
				elseif(weaponskill == 100) then
					setPedStat(client, 77, 1000)
					SED(client, "SkillAk47", 100)
					addBox("Навык владения Ak-47 максимален.", client, 0, 255, 100)
					dbExec(mysql, "UPDATE `Accounts` SET `SkillAk47` = ? WHERE `Name` = ?", weaponskill, getElementData(client, "Name"))
				end
			end
		elseif(weapon == 4) then
			if(getElementData(client, "SkillM4") ~= 100) then
				local weaponskill = toch(getElementData(client, "SkillM4")) + 5
				local weaponid = 31
				if(weaponskill < 100) then
					if(weaponskill % 5 == 0) then
						SED(client, "SkillM4", weaponskill)
						addBox("Навык владения M4 повышен.", client, 0, 255, 100)
						dbExec(mysql, "UPDATE `Accounts` SET `SkillM4` = ? WHERE `Name` = ?", weaponskill, getElementData(client, "Name"))
					end
				elseif(weaponskill == 100) then
					setPedStat(client, 78, 1000)
					SED(client, "SkillM4", 100)
					addBox("Навык владения M4 максимален.", client, 0, 255, 100)
					dbExec(mysql, "UPDATE `Accounts` SET `SkillM4` = ? WHERE `Name` = ?", weaponskill, getElementData(client, "Name"))
				end
			end
		end
	end
end

function onAdminSetEat( thePlayer, command, id, eat )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 2) then
			if(id ~= nil) then
				if(eat ~= nil) then
					if(toch(id) ~= nil) then
						if(toch(eat) ~= nil) then
							id = math.round(id)
							eat = math.round(eat)
							if(IDS[id] ~= nil) then
								local secPlayer = IDS[id]
								if(getElementData(secPlayer, "Login") == true) then
									if(eat >= 0 and eat <= 100) then
										SED(secPlayer, "Food", eat)
										UpdateFood(secPlayer)
										addBox("Администратор изменил Вам сытость.", secPlayer, 0, 255, 100)
										addBox("Вы изменили сытость " .. getElementData(secPlayer, "Name"), thePlayer, 0, 255, 100)
									else
										addBox("Ошибка: Сытость может быть от 0 до 100", thePlayer, 255, 0, 0)
									end
								else
									addBox("Ошибка: Данный игрок не авторизован.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: Данный игрок не найден.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: Сытость введена некорректно.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: ID игрока введен некорректно.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: Вы не ввели сытость.", thePlayer, 255, 0, 0)
				end
			else
				addBox("/seteat [id] [процент сытости]", thePlayer, 255, 0, 0)
			end
		end
	end
end

function onClientFished( kg, name, arg3 )
	if(client ~= nil) then
		if(client == arg3) then
			if(getElementData(client, "Login") == true) then
				if(getElementData(client, "FishBoat") ~= false) then
					local veh = getElementData(client, "FishBoat")
					if(isElement(veh) == true) then
						local kgtemp = toch(getElementData(client, "FishKG"))
						if(kgtemp == nil) then
							kgtemp = kg
						else
							kgtemp = kgtemp + kg
						end
						SED(client, "FishKG", kgtemp)
						addBox("Вы успешно поймали:\n" .. name .. ", " .. kg .. " кг.\nНа лодке уже " .. kgtemp .. " кг.", client, 0, 255, 60)
					end
				end
			end
		end
	end
end

function modeStop( stoppedRes, wasDeleted )
	for i, n in pairs(IDS) do
		if(getElementData(n, "Login") == true) then
			local hun = getElementData(n, "Food")
			local hp = getElementHealth(n)
			local name = getElementData(n, "Name")
			if(hun ~= false) then
				dbExec(mysql, "UPDATE `Accounts` SET `Food` = ?, `Health` = ? WHERE `Name` = ?", hun, hp, name)
			end
		end
	end
end

function onClientTryBuySkin( check )
	local tid = check
	if(SkinTable[tid] ~= nil) then
		local skin = SkinTable[tid]["ID"]
		local price = SkinTable[tid]["Price"]
		if(toch(getElementData(client, "Money")) >= price) then
			if(BusinessTable[120]["Owner"] > 0) then
				if(BusinessTable[120]["Products"] >= price * 0.5) then
					addBox("Вы приобрели одежду.", client, 0, 255, 60)
					triggerClientEvent(client, "onClientSkinShopEnd", client, skin)
					setElementMoney(client, -price, "Покупка скина")
					SED(client, "Skin", skin)
					updatePlayerAccount(client, "Skin", skin)
					setElementModel(client, skin)
					BusinessTable[120]["Products"] = BusinessTable[120]["Products"] - price * 0.25
					setBusinessMoney(120, price)
					dbExec(mysql, "UPDATE `Business` SET `Products` = ?  WHERE `ID` = ?", BusinessTable[120]["Products"], 120)
					SIDP(client, 0)

				else
					addBox("В магазине закончились продукты :(", client, 255, 0, 0)
				end
			else
				addBox("Вы приобрели одежду.", client, 0, 255, 60)
				triggerClientEvent(client, "onClientSkinShopEnd", client, skin)
				setElementMoney(client, -price, "Покупка скина")
				SED(client, "Skin", skin)
				updatePlayerAccount(client, "Skin", skin)
				setElementModel(client, skin)
				SIDP(client, 0)
			end
		else
			addBox("У Вас недостаточно денег для покупки.", client, 255, 0, 0)
		end
	else
		addBox("Произошла ошибка, повторите попытку.", client, 255, 0, 0)
	end
end

function onClientTryBuyCar( id, color )
	if(id <= table.getn(CarInfo)) then
		local price = CarInfo[id]["GosPrice"]
		if(price <= getElementData(client, "Money")) then
			local dom = toch(getElementData(client, "House"))
			if(dom > 0) then
				if(HouseTable[dom]["x"] ~= 0) then
					local vehslot = getElementData(client, "CarBuySlot")
					local veh = toch(HouseTable[dom]["Car" .. vehslot])
					if(veh == 0) then
						local listitem = id
						local price = CarInfo[listitem]["GosPrice"]
						if(price <= getElementData(client, "Money")) then
							if(HouseTable[dom]["Car" .. vehslot] == 0) then
								local playerid = getElementData(client, "ID")
								HouseTable[dom]["Car" .. vehslot] = CarInfo[listitem]["ID"]
								setElementMoney(client, -CarInfo[listitem]["GosPrice"], "Покупка кар в магазине")
								dbExec(mysql, "UPDATE `House` SET `Car" .. vehslot .. "` = ?, `ColorID" .. vehslot .. "` = ?, `Fuel" .. vehslot .. "` = '100' WHERE `ID` = ?", HouseTable[dom]["Car" .. vehslot], color, dom)
								if(isElement(PrivateCar[playerid]) ~= nil) then
									customDestroyVehicle(PrivateCar[playerid])
									PrivateCar[playerid] = nil
								end
								local id = toch(getElementData(client, "ID"))
								PrivateCar[playerid] = createVeh(CarInfo[listitem]["ID"], -1280.5849609375, -695.056640625, 999.578125, 0, 0, 90)
								SET(PrivateCar[playerid], 8)
								SED(PrivateCar[playerid], "Lists", vehslot)
								SIDP(PrivateCar[playerid], getElementData(client, "House"))
								HouseTable[dom]["Color" .. vehslot] = color
								SED(PrivateCar[playerid], "PrivatePlayer", id)
								addBox("Приобретено: " .. CarInfo[listitem]["Name"] .. "\nСтоимость: " .. CarInfo[listitem]["GosPrice"] .. "$.", client, 0, 255, 100)
								triggerClientEvent(client, "onClientBoughtCar", client)
								if(HouseTable[dom]["Color" .. vehslot] == 0) then
									setVehicleColor(PrivateCar[playerid], 125, 125, 125, 125, 125, 125)
								elseif(HouseTable[dom]["Color" .. vehslot] == 1) then
									setVehicleColor(PrivateCar[playerid], 60, 60, 60, 60, 60, 60)
								elseif(HouseTable[dom]["Color" .. vehslot] == 2) then
									setVehicleColor(PrivateCar[playerid], 15, 15, 15, 15, 15, 15)
								elseif(HouseTable[dom]["Color" .. vehslot] == 3) then
									setVehicleColor(PrivateCar[playerid], 80, 0, 0, 80, 0, 0)
								elseif(HouseTable[dom]["Color" .. vehslot] == 4) then
									setVehicleColor(PrivateCar[playerid], 125, 125, 0, 125, 125, 0)
								elseif(HouseTable[dom]["Color" .. vehslot] == 5) then
									setVehicleColor(PrivateCar[playerid], 0, 30, 125, 0, 30, 125)
								end
							else
								addBox("Произошла ошибка, повторите попытку.", client, 255, 0, 0)
							end
						else
							addBox("Ошибка:\nУ Вас недостаточно денег для покупки.", client, 255, 0, 0)
						end
					else
						addBox("Ошибка: У Вас уже есть машина.", client, 255, 0, 0)
					end
				else
					addBox("Ошибка: У Вас нет гаража.", client, 255, 0, 0)
				end
			else
				addBox("Ошибка: У Вас нет дома.", client, 255, 0, 0)
			end
		else
			addBox("Ошибка: У Вас недостаточно денег.", client, 255, 0, 0)
		end
	else
		addBox("Произошла ошибка, повторите попытку.", client, 255, 0, 0)
	end
end

function onPlayerReportFromMenu( text )
	if(getElementData(client, "Mute") == 0) then
		local name = getElementData(client, "Name")
		local arg = text
		local b = #arg
		local str = text
		if(b > 0) then
			if(getElementData(client, "cdr") == false) then
				SED(client, "cdr", true)
				setTimer(function ( pl )
					if(isElement(pl)) then
						removeElementData(pl, "cdr")
					end
				end, 30 * 1000, 1, client)
				local maxreport = 1
				for i,n in pairs(ServerPerem["Reports"]) do
					if(i >= maxreport) then
						maxreport = i + 1
					end
				end
				ServerPerem["Reports"][maxreport] = {}
				ServerPerem["Reports"][maxreport]["Name"] = getElementData(client, "Name")
				ServerPerem["Reports"][maxreport]["Text"] = str
				ServerPerem["Reports"][maxreport]["Player"] = client
				ServerPerem["Reports"][maxreport]["Otvet"] = false
				if(table.getn(ServerPerem["Reports"]) >= 5) then
					str = "[ID жалобы: " .. maxreport .. "] " .. name .. " (" .. getElementData(client, "ID") ..  "): " .. str .. ". Жалоб уже " .. #ServerPerem["Reports"] .. ". Посмотреть список жалоб: /reports." 
				else
					str = "[ID жалобы: " .. maxreport .. "] " .. name .. " (" .. getElementData(client, "ID") ..  "): " .. str .. ". Ответ: /ans " .. maxreport .. " [Text]"
				end
				setTimer(function ( ds )
					if(ServerPerem["Reports"][ds]["Otvet"] == false) then
						if(isElement(ServerPerem["Reports"][ds]["Player"])) then
							addBox("Ни один из администраторов\nНе смог Вам ответить", ServerPerem["Reports"][ds]["Player"], 255, 255, 0)
						end
					end
					ServerPerem["Reports"][ds] = nil
				end, 120 * 1000, 1, maxreport)
				addBox("Ваш запрос администрации отправлен", client, 255, 255, 0)
				for i, n in pairs(IDS) do
					if(getElementData(n, "Login") == true) then
						if(getElementData(n, "Admin") > 0) then
							sendClientMessage(str, n, 255, 240, 0)
						end
					end
				end
			else
				addBox("Пожалуйста, подождите 30 секунд.", client, 255, 0, 0)
			end
		end
	else
		addBox("У Вас затычка.\nВы не можете отправить репорт", client, 255, 0, 0)
	end
end

function onPlayerDonateServerTrade( mon )
	if(client == source) then
		if(mon ~= nil) then
			mon = toch(mon)
			mon = math.floor(mon)
			local don = toch(getElementData(client, "Donate"))
			if(mon > 0) then
				if(don >= mon) then
					don = don - mon
					local query = dbQuery(mysql, "SELECT `Donate` FROM `Accounts` WHERE `Name` = ?", getElementData(client, "Name"))
					local result = dbPoll(query, -1)
					if(result[1] ~= nil) then
						if(result[1]["Donate"] ~= nil) then
							if(result[1]["Donate"] >= mon) then
								local don = result[1]["Donate"] - mon
								setElementMoney(client, mon * ServerPerem["Donate"] * coefmoney, "Донат")
								addBox("Вы обменяли\n" .. mon .. " VC на " .. mon * ServerPerem["Donate"] * coefmoney .. "$.", client, 0, 255, 60)
								SED(client, "Donate", don)
								updatePlayerAccount(client, "Donate", don)
								SED(client, "Donate", don)
							else
								addBox("Ошибка: У Вас недостаточно VC.", client, 255, 0, 0)
							end
						else
							addBox("Ошибка: У Вас недостаточно VC.", client, 255, 0, 0)
						end
					else
						addBox("Ошибка: У Вас недостаточно VC.", client, 255, 0, 0)
					end
					dbFree(query)
				else
					addBox("Ошибка: У Вас недостаточно VC.", client, 255, 0, 0)
				end
			else
				addBox("Ошибка: Вы не ввели сумму обмена.", client, 255, 0, 0)
			end
		end
	end
end

function onPlayersChangeNick( arg1, Namer )
	if(arg1 == client) then
		if(Namer ~= nil) then
			if(type(Namer) == "string") then
				if(Namer ~= "") then
					if(string.len(Namer) > 3 and string.len(Namer) < 21) then
						local query = dbQuery(mysql, "SELECT `Donate` FROM `Accounts` WHERE `Name` = ?", getElementData(client, "Name"))
						local result = dbPoll(query, -1)
						if(result[1] ~= nil) then
							if(result[1]["Donate"] ~= nil) then
								local don = result[1]["Donate"]
								if(don >= 25) then
									dbFree(query)
									query = dbQuery(mysql, "SELECT COUNT(*) FROM `Accounts` WHERE `Name` = ?", Namer)
									local result = dbPoll(query, -1)
									if(result[1] ~= nil) then
										if(result[1]["COUNT(*)"] > 0) then
											addBox("Ошибка: Данный ник занят.", client, 255, 0, 0)
										elseif(result[1]["COUNT(*)"] == 0) then
											don = don - 25
											SED(client, "Donate", don)
											updatePlayerAccount(client, "Donate", don)
											dbExec(mysql, "UPDATE `Accounts` SET `Name` = ? WHERE `Name` = ?", Namer, getElementData(client, "Name"))
											if(getElementData(client, "BusOwnID") > 0) then
												bus = toch(getElementData(client, "BusOwnID"))
												dbExec(mysql, "UPDATE `Business` SET `OwnerName` = ?, `Owner` = ? WHERE `ID` = ?", Namer, getElementData(client, "AccID"), getElementData(client, "BusOwnID"))
												BusinessTable[bus]["OwnerName"] = Namer
											end
											if(getElementData(client, "House") > 0) then
												dbExec(mysql, "UPDATE `House` set `PName` = ?, `PID` = ? WHERE `ID` = ?", Namer, getElementData(client, "AccID"), getElementData(client, "House"))
												local ho = toch(getElementData(client, "House"))
												HouseTable[ho]["PName"] = Namer
											end
											kickPlayer(client, "new name: " .. Namer)
										end
									else
										addBox("Ошибка: Данный ник занят.", client, 255, 0, 0)
									end
								else
									addBox("Ошибка: У Вас недостаточно денег\nЧтобы сменить своё имя.", client, 255, 0, 0)
								end
							end
						end
						dbFree(query)
					end
				end
			end
		end
	end
end

function onPlayerBuyLicense( arg1, arg2 )
	if(client == arg1) then
		if(arg2 ~= nil) then
			if(type(arg2) == "number") then
				arg2 = math.floor(arg2)
				if(arg2 > 0 and arg2 < 4) then
					local query = dbQuery(mysql, "SELECT `Donate` from `Accounts` WHERE `Name` = ?", getElementData(client, "Name"))
					local result = dbPoll(query, -1)
					if(result ~= nil) then
						if(result[1] ~= nil) then
							if(result[1]["Donate"] ~= nil) then
								local don = result[1]["Donate"]
								if(don >= 50) then
									if(arg2 == 1) then
										if(getElementData(client, "AutoLicense") == 0) then
											don = don - 50
											dbExec(mysql, "UPDATE `Accounts` SET `AutoLicense` = 1, `Donate` = ? WHERE `Name` = ?", don, getElementData(client, "Name"))
											SED(client, "AutoLicense", 1)
											SED(client, "Donate", don)
											addBox("Вы успешно приобрели\nЛицензию на вождение.", client, 0, 255, 60)
										else
											addBox("Ошибка: У Вас уже есть права.", client, 255, 0, 0)
										end
									elseif(arg2 == 2) then
										addBox("В разработке.", client, 255, 0, 0)
									elseif(arg2 == 3) then
										if(getElementData(client, "WeaponLicense") == false) then
											don = don - 50
											dbExec(mysql, "UPDATE `Accounts` SET `WeaponLicense` = 1, `Donate` = ? WHERE `Name` = ?", don, getElementData(client, "Name"))
											SED(client, "WeaponLicense", true)
											SED(client, "Donate", don)
											addBox("Вы успешно приобрели\nЛицензию на оружие.", client, 0, 255, 60)
										else
											addBox("Ошибка: У Вас уже есть\nЛицензия на оружие.", client, 255, 0, 0)
										end
									end
								else
									addBox("Ошибка: У Вас недостаточно VC.", client, 255, 0, 0)
								end
							end
						end
					end
					dbFree(query)
				end
			end
		end
	end
end

function onPlayerDonateUnwarn( arg1 )
	if(client) then
		if(arg1 == client) then
			local query = dbQuery(mysql, "SELECT `Donate` from `Accounts` WHERE `Name` = ?", getElementData(client, "Name"))
			local result = dbPoll(query, -1)
			if(result ~= nil) then
				if(result[1] ~= nil) then
					if(result[1]["Donate"] ~= nil) then
						local don = result[1]["Donate"]
						if(don >= 75) then
							don = don - 75
							local warn = toch(getElementData(client, "Warn"))
							if(warn > 0) then
								warn = warn - 1
								dbExec(mysql, "UPDATE `Accounts` SET `Warn` = ?, `Donate` = ? WHERE `Name` = ?", warn, don, getElementData(client, "Name"))
								SED(client, "Warn", warn)
								SED(client, "Donate", don)
								addBox("Вы успешно сняли предупреждение.", client, 0, 255, 60)
							else
								addBox("Ошибка: У Вас нет предупреждений.", client, 255, 0, 0)
							end
						else
							addBox("Ошибка: У Вас недостаточно VC.", client, 255, 0, 0)
						end
					else
						addBox("Произошла системная ошибка.", client, 255, 0, 0)
					end
				else
					addBox("Произошла системная ошибка.", client, 255, 0, 0)
				end
			else
				addBox("Произошла системная ошибка.", client, 255, 0, 0)
			end
			dbFree(query)
		end
	end
end

function onPlayerDonateSkills( arg1, arg2 )
	if(client) then
		if(client == arg1) then
			if(type(arg2) == "number") then
				arg2 = math.floor(arg2)
				if(arg2 > 0) then
					if(arg2 == 1) then
						if(getElementData(client, "SkillAk47") < 100) then
							local query = dbQuery(mysql, "SELECT `Donate` from `Accounts` WHERE `Name` = ?", getElementData(client, "Name"))
							local result = dbPoll(query, -1)
							if(result ~= nil) then
								if(result[1] ~= nil) then
									if(result[1]["Donate"] ~= nil) then
										if(result[1]["Donate"] >= 15) then
											local don = result[1]["Donate"]
											don = don - 15
											SED(client, "SkillAk47", 100)
											updatePlayerAccount(client, "SkillAk47", 100)
											updatePlayerAccount(client, "Donate", don)
											SED(client, "Donate", don)
											addBox("Вы успешно приобрели\nНавыки владением АК-47.", client, 0, 255, 60)
											setPedStat(client, 77, 1000)
										else
											addBox("Ошибка: У Вас недостаточно VC.", client, 255, 0, 0)
										end
									else
										addBox("Произошла системная ошибка", client, 255, 0, 0)
									end
								else
									addBox("Произошла системная ошибка", client, 255, 0, 0)
								end
							else
								addBox("Произошла системная ошибка", client, 255, 0, 0)
							end
							dbFree(query)
						else
							addBox("Ошибка: У Вас уже есть данные навыки.", client, 255, 0, 0)
						end
					elseif(arg2 == 2) then
						if(getElementData(client, "SkillDeagle") < 100) then
							local query = dbQuery(mysql, "SELECT `Donate` from `Accounts` WHERE `Name` = ?", getElementData(client, "Name"))
							local result = dbPoll(query, -1)
							if(result ~= nil) then
								if(result[1] ~= nil) then
									if(result[1]["Donate"] ~= nil) then
										if(result[1]["Donate"] >= 15) then
											local don = result[1]["Donate"]
											don = don - 15
											SED(client, "SkillDeagle", 100)
											updatePlayerAccount(client, "SkillDeagle", 100)
											updatePlayerAccount(client, "Donate", don)
											SED(client, "Donate", don)
											addBox("Вы успешно приобрели\nНавыки владением Desert Eagle.", client, 0, 255, 60)
											setPedStat(client, 71, 1000)
										else
											addBox("Ошибка: У Вас недостаточно VC.", client, 255, 0, 0)
										end
									else
										addBox("Произошла системная ошибка", client, 255, 0, 0)
									end
								else
									addBox("Произошла системная ошибка", client, 255, 0, 0)
								end
							else
								addBox("Произошла системная ошибка", client, 255, 0, 0)
							end
							dbFree(query)
						else
							addBox("Ошибка: У Вас уже есть данные навыки.", client, 255, 0, 0)
						end
					elseif(arg2 == 3) then
						if(getElementData(client, "SkillM4") < 100) then
							local query = dbQuery(mysql, "SELECT `Donate` from `Accounts` WHERE `Name` = ?", getElementData(client, "Name"))
							local result = dbPoll(query, -1)
							if(result ~= nil) then
								if(result[1] ~= nil) then
									if(result[1]["Donate"] ~= nil) then
										if(result[1]["Donate"] >= 15) then
											local don = result[1]["Donate"]
											don = don - 15
											SED(client, "SkillM4", 100)
											updatePlayerAccount(client, "SkillM4", 100)
											updatePlayerAccount(client, "Donate", don)
											SED(client, "Donate", don)
											addBox("Вы успешно приобрели\nНавыки владением M4.", client, 0, 255, 60)
											setPedStat(client, 78, 1000)
										else
											addBox("Ошибка: У Вас недостаточно VC.", client, 255, 0, 0)
										end
									else
										addBox("Произошла системная ошибка", client, 255, 0, 0)
									end
								else
									addBox("Произошла системная ошибка", client, 255, 0, 0)
								end
							else
								addBox("Произошла системная ошибка", client, 255, 0, 0)
							end
							dbFree(query)
						else
							addBox("Ошибка: У Вас уже есть данные навыки.", client, 255, 0, 0)
						end
					elseif(arg2 == 4) then
						if(getElementData(client, "SkillShotgun") < 100) then
							local query = dbQuery(mysql, "SELECT `Donate` from `Accounts` WHERE `Name` = ?", getElementData(client, "Name"))
							local result = dbPoll(query, -1)
							if(result ~= nil) then
								if(result[1] ~= nil) then
									if(result[1]["Donate"] ~= nil) then
										if(result[1]["Donate"] >= 15) then
											local don = result[1]["Donate"]
											don = don - 15
											SED(client, "SkillShotgun", 100)
											updatePlayerAccount(client, "SkillShotgun", 100)
											updatePlayerAccount(client, "Donate", don)
											SED(client, "Donate", don)
											addBox("Вы успешно приобрели\nНавыки владением Shotgun.", client, 0, 255, 60)
											setPedStat(client, 72, 1000)
										else
											addBox("Ошибка: У Вас недостаточно VC.", client, 255, 0, 0)
										end
									else
										addBox("Произошла системная ошибка", client, 255, 0, 0)
									end
								else
									addBox("Произошла системная ошибка", client, 255, 0, 0)
								end
							else
								addBox("Произошла системная ошибка", client, 255, 0, 0)
							end
							dbFree(query)
						else
							addBox("Ошибка: У Вас уже есть данные навыки.", client, 255, 0, 0)
						end
					elseif(arg2 == 5) then
						if(getElementData(client, "SkillFish") < 100) then
							local query = dbQuery(mysql, "SELECT `Donate` from `Accounts` WHERE `Name` = ?", getElementData(client, "Name"))
							local result = dbPoll(query, -1)
							if(result ~= nil) then
								if(result[1] ~= nil) then
									if(result[1]["Donate"] ~= nil) then
										if(result[1]["Donate"] >= 15) then
											local don = result[1]["Donate"]
											don = don - 15
											SED(client, "SkillFish", 100)
											updatePlayerAccount(client, "SkillFish", 100)
											updatePlayerAccount(client, "Donate", don)
											SED(client, "Donate", don)
											addBox("Вы успешно приобрели\nНавыки рыболовства.", client, 0, 255, 60)
										else
											addBox("Ошибка: У Вас недостаточно VC.", client, 255, 0, 0)
										end
									else
										addBox("Произошла системная ошибка", client, 255, 0, 0)
									end
								else
									addBox("Произошла системная ошибка", client, 255, 0, 0)
								end
							else
								addBox("Произошла системная ошибка", client, 255, 0, 0)
							end
							dbFree(query)
						else
							addBox("Ошибка: У Вас уже есть данные навыки.", client, 255, 0, 0)
						end
					end
				end
			end
		end
	end
end

function onPlayerBuySub( arg1, arg2 )
	if(client) then
		if(arg1 == client) then
			if(arg2 ~= nil) then
				arg2 = toch(arg2)
				if(arg2 ~= nil) then
					if(arg2 > 0 and arg2 < 5) then
						local query = dbQuery(mysql, "SELECT `Donate` from `Accounts` WHERE `Name` = ?", getElementData(client, "Name"))
						local result = dbPoll(query, -1)
						if(result ~= nil) then
							if(result[1] ~= nil) then
								if(result[1]["Donate"] ~= nil) then
									local don = result[1]["Donate"]
									if(don >= arg2 * 200) then
										if(getElementData(client, "VipType") <= arg2) then
											don = don - arg2 * 200
											SED(client, "Donate", don)
											updatePlayerAccount(client, "Donate", don)
											SED(client, "VipDay", 30)
											SED(client, "VipType", arg2)
											updatePlayerAccount(client, "VipDay", 30)
											updatePlayerAccount(client, "VipType", arg2)
											if(arg2 == 1) then
												addBox("Вы успешно приобрели\nБазовую подписку!", client, 0, 255, 60)
											elseif(arg2 == 2) then
												addBox("Вы успешно приобрели\nПродвинутую подписку!", client, 0, 255, 60)
											elseif(arg2 == 3) then
												addBox("Вы успешно приобрели\nРасширенную подписку!", client, 0, 255, 60)
											elseif(arg2 == 4) then
												addBox("Вы успешно приобрели\nПремиальную подписку!", client, 0, 255, 60)
											end
										else
											addBox("Ошибка: У Вас уже приобретена\nПодписка, выше выбранного уровня", client, 255, 0, 0)
										end
									else
										addBox("Ошибка: У Вас недостаточно денег\nДля покупки премиума.", client, 255, 0, 0)
									end
								end
							end
						end
						dbFree(query)
					end
				end
			end
		end
	end
end

function onPlayerTryPromo( arg1, arg2 )
	if(client) then
		if(arg1 == client) then
			if(type(arg2) == "string") then
				if(string.len(arg2) > 2 and string.len(arg2) < 25) then
					local drf = false
					for i,n in pairs(PromoTable) do
						if(string.lower(n["Name"]) == string.lower(arg2)) then
							if(n["Toggle"] == 1) then
								local query = dbQuery(mysql, "SELECT COUNT(*) FROM `PromoTable` WHERE `AccID` = ?", getElementData(client, "AccID"))
								local result = dbPoll(query, -1)
								if(result[1]["COUNT(*)"] > 0) then
									addBox("Вы уже вводили промокод ранее!", client, 255, 0, 0)
								else
									local times = getRealTime()
									dbExec(mysql, "INSERT into `PromoTable` (`AccID`, `Name`, `Promo`, `Day`, `Month`, `Year`, `Exp`, `SExp`, `Money`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)", getElementData(arg1, "AccID"), getElementData(arg1, "Name"), arg2, times.monthday, times.month+1, times.year - 100, n["Exp"], n["Exp"], n["Value"])
									addBox("Вы успешно ввели промокод.\nВам необходимо отыграть " .. n["Exp"] .. " ч.\nЧтобы получить бонус в размере " .. n["Value"] .. "$.", client, 0, 60, 255)
									SED(client, "PromoExp", n["Exp"])
									SED(client, "PromoMoney", n["Value"])
									SED(client, "NeedExp", n["Exp"])
									PromoTable[i]["Activations"] = PromoTable[i]["Activations"] + 1
								end
								drf = true
							end
							break
						end
					end
					if(drf == false) then
						addBox("Данный промокод не найден!\nПовторите попытку!", client, 255, 255, 0)
					end
				end
			end
		end
	end
end

function setPedAnimationSpeed(player,anim,speed)
	triggerClientEvent(player, "animSped", player, player,anim,speed)
end

function onPoliceCuff(  thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") == 8) then
			if(getElementData(thePlayer, "Rank") >= 3) then
				if(id ~= nil) then
					if(toch(id) ~= nil) then
						id = toch(id)
						if(IDS[id] ~= nil) then
							local secPlayer = IDS[id]
							local x, y, z = getElementPosition(thePlayer)
							local x1, y1, z1 = getElementPosition(secPlayer)
							local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
							if(dist < 6) then
								if(secPlayer ~= thePlayer) then								
									if(getElementData(secPlayer, "Wanted") > 0) then
										local veh = getPedOccupiedVehicle(secPlayer)
										if(veh == false) then
											toggleAllControls(secPlayer, false, true, false)
											toggleControl(secPlayer, "enter_passenger", false)
											setPedAnimation(secPlayer,'ped', 'pass_Smoke_in_car', 0, true, true, true)
											setTimer(setPedAnimationSpeed, 60, 1, secPlayer, 'pass_Smoke_in_car', 0)
											addBox("Вы успешно надели наручники\nНа " .. getElementData(secPlayer, "Name"), thePlayer, 255, 255, 0)
											addBox(getElementData(thePlayer, "Name") .. " надел на Вас наручники.", secPlayer, 255, 255, 0)
											SED(secPlayer, "Cuffed", true)
											setElementFrozen(secPlayer, true)
										else
											if(getElementData(veh, "PoliceID") ~= false) then
												toggleAllControls(secPlayer, false, true, false)
												toggleControl(secPlayer, "enter_passenger", false)
												setPedAnimation(secPlayer,'ped', 'pass_Smoke_in_car', 0, true, true, true)
												setTimer(setPedAnimationSpeed, 60, 1, secPlayer, 'pass_Smoke_in_car', 0)
												addBox("Вы успешно надели наручники\nНа " .. getElementData(secPlayer, "Name"), thePlayer, 255, 255, 0)
												addBox(getElementData(thePlayer, "Name") .. " надел на Вас наручники.", secPlayer, 255, 255, 0)
												SED(secPlayer, "Cuffed", true)
												setElementFrozen(secPlayer, true)
											else
												addBox("Невозможно одеть наручники\nНа игрока, находящегося в машине.", thePlayer, 255, 0, 0)
											end
										end
									else
										addBox("Данный игрок не находится в розыске.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Вы не можете надеть на себя наручники.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Данный игрок слишком далеко.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Данный игрок не найден.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: /cuff [id]", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: /cuff [id]", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: Данная команда Вам недоступна.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: Данная команда Вам недоступна.", thePlayer, 255, 0, 0)
		end
	end
end

function AnimFromClient( arg1, arg2, arg3, arg4 )
	if(client ~= nil) then
		if(getElementType(arg1) == "player") then
			if(client == arg1) then
				if(type(arg2) == "string") then
					if(type(arg3) == "string") then
						if(string.len(arg2) > 0) then
							if(string.len(arg3) > 0) then
								if(arg4 == true) then
									setPedAnimation(arg1, arg2, arg3, 1, true)
								else
									setPedAnimation(arg1, arg2, arg3, 1, false)
								end
							end
						end
					end
				end
			end
		end
	end
end


function onToggleUsk( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 4) then
			triggerClientEvent(thePlayer, "onUskToggle", thePlayer)
			addBox("Ускорение переключено.", thePlayer, 255, 255, 0)
		end
	end
end

function onPlayerRefreshCars( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") > 0) then
			if(getElementData(thePlayer, "Rank") >= 9) then
				local fact = getElementData(thePlayer, "Faction")
				if(fact == 1) then
					for i,n in pairs(Maf1Car) do
						if(getVehicleOccupant(n, 0) == false) then
							customSpawnVehicle(n)
							if(getElementData(n, "MafYash") ~= false) then
								if(getElementData(n, "MafYash") > 0) then
									SED(n, "MafYash", 0)
								end
							end
						end
					end
				elseif(fact == 2) then
					for i,n in pairs(Maf2Car) do
						if(getVehicleOccupant(n, 0) == false) then
							customSpawnVehicle(n)
							if(getElementData(n, "MafYash") ~= false) then
								if(getElementData(n, "MafYash") > 0) then
									SED(n, "MafYash", 0)
								end
							end
						end
					end
				elseif(fact == 3) then
					for i,n in pairs(Maf3Car) do
						if(getVehicleOccupant(n, 0) == false) then
							customSpawnVehicle(n)
							if(getElementData(n, "MafYash") ~= false) then
								if(getElementData(n, "MafYash") > 0) then
									SED(n, "MafYash", 0)
								end
							end
						end
					end
				elseif(fact == 4) then
					for i,n in pairs(Maf4Car) do
						if(getVehicleOccupant(n, 0) == false) then
							customSpawnVehicle(n)
							if(getElementData(n, "MafYash") ~= false) then
								if(getElementData(n, "MafYash") > 0) then
									SED(n, "MafYash", 0)
								end
							end
						end
					end
				elseif(fact == 5) then
					for i,n in pairs(MerCar) do
						if(getVehicleOccupant(n, 0) == false) then
							customSpawnVehicle(n)
						end
					end
				elseif(fact == 6) then
					for i,n in pairs(VCNCar) do
						if(getVehicleOccupant(n, 0) == false) then
							customSpawnVehicle(n)
						end
					end
				elseif(fact == 7) then
					for i,n in pairs(MedicCar) do
						if(getVehicleOccupant(n, 0) == false) then
							customSpawnVehicle(n)
						end
					end
				elseif(fact == 8) then
					for i,n in pairs(PoliceCar) do
						if(getVehicleOccupant(n, 0) == false) then
							customSpawnVehicle(n)
						end
					end
				elseif(fact == 9) then
					for i,n in pairs(ArmyCar) do
						if(getVehicleOccupant(n, 0) == false) then
							customSpawnVehicle(n)
							if(getElementData(n, "ArmyGruz") ~= false) then
								removeElementData(n, "ArmyGruz")
							end
						end
					end
					for i,n in pairs(ArmyVeh) do
						if(getVehicleOccupant(n, 0) == false) then
							customSpawnVehicle(n)
						end
					end
				end
				addBox("Вы успешно зареспавнили\nВсё незанятое авто.", thePlayer, 0, 60, 255)
			else
			end
		else
		end
	end
end

function hitMrkNrk( hit, dim )
	if(getElementType(hit) == "player") then
		if(getElementData(hit, "Login") == true) then
			local faction = getElementData(hit, "Faction")
			if(faction >= 1 and faction <= 4) then
				local nrk = getElementData(hit, "Nrk")
				if(nrk < 100) then
					local mb = 100 - nrk
					local str = "Введите количество грамм,\nКоторое Вы хотите приобрести.\nСтоимость: 90$/г.\n \nВы можете приобрести ещё: " .. mb .. " г."
					showPlayerDialog(hit, 93, 2, "Покупка наркотиков", str, "Приобрести", "Отмена")
				else
					addBox("У Вас уже полные карманы...", hit, 255, 0, 0)
				end
			else
				addBox("Вам недоступен данный \"магазин\".", hit, 255, 0, 0)
			end
		end
	end
end

function onPlayerTpSvalka( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			SEP(thePlayer, -1236.2978515625, 7.923828125, 11.391407966614)
		end
	end
end

function onPlayerPutDrugs( thePlayer, command, kolvo )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") >= 1 and getElementData(thePlayer, "Faction") <= 4) then
			local faction = getElementData(thePlayer, "Faction")
			local x, y, z = getElementPosition(thePlayer)
			if(faction == 1) then
				local x1, y1, z1 = 296.7392578125, 292.1826171875, 17.683990478516
				local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
				if(dist <= 5) then
					local nrk = getElementData(thePlayer, "Nrk")
					kolvo = toch(kolvo)
					if(kolvo ~= nil) then
						kolvo = math.floor(kolvo)
						if(kolvo > 0 and kolvo <= 100) then
							if(nrk - kolvo >= 0) then
								if(Server["Maf1NRK"] + kolvo <= 10000) then
									SED(thePlayer, "Nrk", nrk - kolvo)
									updatePlayerAccount(thePlayer, "NRK", nrk-kolvo)
									Server["Maf1NRK"] = Server["Maf1NRK"] + kolvo
									dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = ?", Server["Maf1NRK"], "Maf1NRK")
									addBox("Вы положили " .. kolvo .. " г наркотиков на склад.", thePlayer, 0, 255, 60)
									local query = dbQuery(mysql, "SELECT COUNT(*) from `skllogs`")
									local result = dbPoll(query, -1)
									dbExec(mysql, "INSERT into `skllogs` (`ID`, `AccID`, `Name`, `Faction`, `Type`, `Ed`) VALUES (?, ?, ?, ?, 4, ?)", result[1]["COUNT(*)"], getElementData(thePlayer, "AccID"), getElementData(thePlayer, "Name"), faction, kolvo)	
									local str = getElementData(thePlayer, "Name") .. " (" .. getElementData(thePlayer, "ID") .. ") положил " .. kolvo .. " г. наркотиков на склад."
									for i,n in pairs(IDS) do
										if(getElementData(n, "Login") == true) then
											if(getElementData(n, "Faction") == getElementData(thePlayer, "Faction")) then
												sendClientMessage(str, n, 180, 120, 180)
											end
										end
									end
								else
									addBox("На складе может быть не более\n10 кг наркотиков.", thePlayer, 255, 0, 0)
								end
							else
								addBox("У Вас недостаточно наркотиков", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: Количество введено некорректно.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: /putdrugs [1-100]", thePlayer, 255, 0, 0)
					end
				else
					addBox("Вы слишком далеко от склада\nВашей организации.", thePlayer, 255, 0, 0)
				end
			elseif(faction == 2) then
				local x1, y1, z1 = -1062.4267578125, -261.9091796875, 12.05069732666
				local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
				if(dist <= 5) then
					local nrk = getElementData(thePlayer, "Nrk")
					kolvo = toch(kolvo)
					if(kolvo ~= nil) then
						kolvo = math.floor(kolvo)
						if(kolvo > 0 and kolvo <= 100) then
							if(nrk - kolvo >= 0) then
								if(Server["Maf2NRK"] + kolvo <= 10000) then
									SED(thePlayer, "Nrk", nrk - kolvo)
									updatePlayerAccount(thePlayer, "NRK", nrk-kolvo)
									Server["Maf2NRK"] = Server["Maf2NRK"] + kolvo
									dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = ?", Server["Maf2NRK"], "Maf2NRK")
									addBox("Вы положили " .. kolvo .. " г наркотиков на склад.", thePlayer, 0, 255, 60)
									local query = dbQuery(mysql, "SELECT COUNT(*) from `skllogs`")
									local result = dbPoll(query, -1)
									dbExec(mysql, "INSERT into `skllogs` (`ID`, `AccID`, `Name`, `Faction`, `Type`, `Ed`) VALUES (?, ?, ?, ?, 4, ?)", result[1]["COUNT(*)"], getElementData(thePlayer, "AccID"), getElementData(thePlayer, "Name"), faction, kolvo)	
									local str = getElementData(thePlayer, "Name") .. " (" .. getElementData(thePlayer, "ID") .. ") положил " .. kolvo .. " г. наркотиков на склад."
									for i,n in pairs(IDS) do
										if(getElementData(n, "Login") == true) then
											if(getElementData(n, "Faction") == getElementData(thePlayer, "Faction")) then
												sendClientMessage(str, n, 180, 120, 180)
											end
										end
									end
								else
									addBox("На складе может быть не более\n10 кг наркотиков.", thePlayer, 255, 0, 0)
								end
							else
								addBox("У Вас недостаточно наркотиков", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: Количество введено некорректно.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: /putdrugs [1-100]", thePlayer, 255, 0, 0)
					end
				else
					addBox("Вы слишком далеко от склада\nВашей организации.", thePlayer, 255, 0, 0)
				end
			elseif(faction == 3) then
				local x1, y1, z1 = -1097.123046875, 348.3984375, 11.441700935364
				local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
				if(dist <= 5) then
					local nrk = getElementData(thePlayer, "Nrk")
					kolvo = toch(kolvo)
					if(kolvo ~= nil) then
						kolvo = math.floor(kolvo)
						if(kolvo > 0 and kolvo <= 100) then
							if(nrk - kolvo >= 0) then
								if(Server["Maf3NRK"] + kolvo <= 10000) then
									SED(thePlayer, "Nrk", nrk - kolvo)
									updatePlayerAccount(thePlayer, "NRK", nrk-kolvo)
									Server["Maf3NRK"] = Server["Maf3NRK"] + kolvo
									dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = ?", Server["Maf3NRK"], "Maf3NRK")
									addBox("Вы положили " .. kolvo .. " г наркотиков на склад.", thePlayer, 0, 255, 60)
									local query = dbQuery(mysql, "SELECT COUNT(*) from `skllogs`")
									local result = dbPoll(query, -1)
									dbExec(mysql, "INSERT into `skllogs` (`ID`, `AccID`, `Name`, `Faction`, `Type`, `Ed`) VALUES (?, ?, ?, ?, 4, ?)", result[1]["COUNT(*)"], getElementData(thePlayer, "AccID"), getElementData(thePlayer, "Name"), faction, kolvo)	
									local str = getElementData(thePlayer, "Name") .. " (" .. getElementData(thePlayer, "ID") .. ") положил " .. kolvo .. " г. наркотиков на склад."
									for i,n in pairs(IDS) do
										if(getElementData(n, "Login") == true) then
											if(getElementData(n, "Faction") == getElementData(thePlayer, "Faction")) then
												sendClientMessage(str, n, 180, 120, 180)
											end
										end
									end
								else
									addBox("На складе может быть не более\n10 кг наркотиков.", thePlayer, 255, 0, 0)
								end
							else
								addBox("У Вас недостаточно наркотиков", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: Количество введено некорректно.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: /putdrugs [1-100]", thePlayer, 255, 0, 0)
					end
				else
					addBox("Вы слишком далеко от склада\nВашей организации.", thePlayer, 255, 0, 0)
				end
			elseif(faction == 4) then
				local x1, y1, z1 = -123.197265625, -1391.619140625, 10.419187545776
				local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
				if(dist <= 5) then
					local nrk = getElementData(thePlayer, "Nrk")
					kolvo = toch(kolvo)
					if(kolvo ~= nil) then
						kolvo = math.floor(kolvo)
						if(kolvo > 0 and kolvo <= 100) then
							if(nrk - kolvo >= 0) then
								if(Server["Maf4NRK"] + kolvo <= 10000) then
									SED(thePlayer, "Nrk", nrk - kolvo)
									updatePlayerAccount(thePlayer, "NRK", nrk-kolvo)
									Server["Maf4NRK"] = Server["Maf4NRK"] + kolvo
									dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = ?", Server["Maf4NRK"], "Maf4NRK")
									addBox("Вы положили " .. kolvo .. " г наркотиков на склад.", thePlayer, 0, 255, 60)
									local query = dbQuery(mysql, "SELECT COUNT(*) from `skllogs`")
									local result = dbPoll(query, -1)
									dbExec(mysql, "INSERT into `skllogs` (`ID`, `AccID`, `Name`, `Faction`, `Type`, `Ed`) VALUES (?, ?, ?, ?, 4, ?)", result[1]["COUNT(*)"], getElementData(thePlayer, "AccID"), getElementData(thePlayer, "Name"), faction, kolvo)	
									local str = getElementData(thePlayer, "Name") .. " (" .. getElementData(thePlayer, "ID") .. ") положил " .. kolvo .. " г. наркотиков на склад."
									for i,n in pairs(IDS) do
										if(getElementData(n, "Login") == true) then
											if(getElementData(n, "Faction") == getElementData(thePlayer, "Faction")) then
												sendClientMessage(str, n, 180, 120, 180)
											end
										end
									end
								else
									addBox("На складе может быть не более\n10 кг наркотиков.", thePlayer, 255, 0, 0)
								end
							else
								addBox("У Вас недостаточно наркотиков", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: Количество введено некорректно.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: /putdrugs [1-100]", thePlayer, 255, 0, 0)
					end
				else
					addBox("Вы слишком далеко от склада\nВашей организации.", thePlayer, 255, 0, 0)
				end
			end
		else
			addBox("Ошибка: Данная команда Вам недоступна.", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerGetDrugs( thePlayer, command, kolvo )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") >= 1 and getElementData(thePlayer, "Faction") <= 4) then
			if(getElementData(thePlayer, "Rank") >= 2) then
				kolvo = toch(kolvo)
				if(kolvo ~= nil) then
					kolvo = math.floor(kolvo)
					if(kolvo >= 1 and kolvo <= 100) then
						local faction = getElementData(thePlayer, "Faction")
						local x, y, z = getElementPosition(thePlayer)
						if(faction == 1) then
							local x1, y1, z1 = 296.7392578125, 292.1826171875, 17.683990478516
							local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
							if(dist <= 5) then
								if(Server["Maf1NRK"] - kolvo >= 0) then
									if(getElementData(thePlayer, "Nrk") + kolvo <= 100) then
										if(AFOS[faction] == true) then
											if(FactOpenSkl[faction] == true) then
												Server["Maf1NRK"] = Server["Maf1NRK"] - kolvo
												SED(thePlayer, "Nrk", getElementData(thePlayer, "Nrk") + kolvo)
												updatePlayerAccount(thePlayer, "NRK", getElementData(thePlayer, "Nrk"))
												dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = ?", Server["Maf1NRK"], "Maf1NRK")
												addBox("Вы успешно забрали со склада\n" .. kolvo .. " г. наркотиков.", thePlayer, 0, 255, 60)
												local query = dbQuery(mysql, "SELECT COUNT(*) from `skllogs`")
												local result = dbPoll(query, -1)
												dbExec(mysql, "INSERT into `skllogs` (`ID`, `AccID`, `Name`, `Faction`, `Type`, `Ed`) VALUES (?, ?, ?, ?, 3, ?)", result[1]["COUNT(*)"], getElementData(thePlayer, "AccID"), getElementData(thePlayer, "Name"), faction, -kolvo)	
												local str = getElementData(thePlayer, "Name") .. " (" .. getElementData(thePlayer, "ID") .. ") забрал " .. kolvo .. " г. наркотиков со склада."
												for i,n in pairs(IDS) do
													if(getElementData(n, "Login") == true) then
														if(getElementData(n, "Faction") == getElementData(thePlayer, "Faction")) then
															sendClientMessage(str, n, 180, 120, 180)
														end
													end
												end
											else
												addBox("Склад закрыт лидером организации.", thePlayer, 255, 0, 0)
											end
										else
											addBox("Склад закрыт администрацией.", thePlayer, 255, 0, 0)
										end
									else
										addBox("Ошибка: Вы не можете унести больше 100 г.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Ошибка: Вы не можете взять столько.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: Вы слишком далеко от склада.", thePlayer, 255, 0, 0)
							end
						elseif(faction == 2) then
							local x1, y1, z1 = -1062.4267578125, -261.9091796875, 12.05069732666
							local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
							if(dist <= 5) then
								if(Server["Maf2NRK"] - kolvo >= 0) then
									if(getElementData(thePlayer, "Nrk") + kolvo <= 100) then
										if(AFOS[faction] == true) then
											if(FactOpenSkl[faction] == true) then
												Server["Maf2NRK"] = Server["Maf2NRK"] - kolvo
												SED(thePlayer, "Nrk", getElementData(thePlayer, "Nrk") + kolvo)
												updatePlayerAccount(thePlayer, "NRK", getElementData(thePlayer, "Nrk"))
												dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = ?", Server["Maf2NRK"], "Maf2NRK")
												addBox("Вы успешно забрали со склада\n" .. kolvo .. " г. наркотиков.", thePlayer, 0, 255, 60)
												local query = dbQuery(mysql, "SELECT COUNT(*) from `skllogs`")
												local result = dbPoll(query, -1)
												dbExec(mysql, "INSERT into `skllogs` (`ID`, `AccID`, `Name`, `Faction`, `Type`, `Ed`) VALUES (?, ?, ?, ?, 3, ?)", result[1]["COUNT(*)"], getElementData(thePlayer, "AccID"), getElementData(thePlayer, "Name"), faction, -kolvo)	
												local str = getElementData(thePlayer, "Name") .. " (" .. getElementData(thePlayer, "ID") .. ") забрал " .. kolvo .. " г. наркотиков со склада."
												for i,n in pairs(IDS) do
													if(getElementData(n, "Login") == true) then
														if(getElementData(n, "Faction") == getElementData(thePlayer, "Faction")) then
															sendClientMessage(str, n, 180, 120, 180)
														end
													end
												end
											else
												addBox("Склад закрыт лидером организации.", thePlayer, 255, 0, 0)
											end
										else
											addBox("Склад закрыт администрацией.", thePlayer, 255, 0, 0)
										end
									else
										addBox("Ошибка: Вы не можете унести больше 100 г.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Ошибка: Вы не можете взять столько.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: Вы слишком далеко от склада.", thePlayer, 255, 0, 0)
							end
						elseif(faction == 3) then
							local x1, y1, z1 = -1097.123046875, 348.3984375, 11.441700935364
							local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
							if(dist <= 5) then
								if(Server["Maf3NRK"] - kolvo >= 0) then
									if(getElementData(thePlayer, "Nrk") + kolvo <= 100) then
										if(AFOS[faction] == true) then
											if(FactOpenSkl[faction] == true) then
												Server["Maf3NRK"] = Server["Maf3NRK"] - kolvo
												SED(thePlayer, "Nrk", getElementData(thePlayer, "Nrk") + kolvo)
												updatePlayerAccount(thePlayer, "NRK", getElementData(thePlayer, "Nrk"))
												dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = ?", Server["Maf3NRK"], "Maf3NRK")
												addBox("Вы успешно забрали со склада\n" .. kolvo .. " г. наркотиков.", thePlayer, 0, 255, 60)
												local query = dbQuery(mysql, "SELECT COUNT(*) from `skllogs`")
												local result = dbPoll(query, -1)
												dbExec(mysql, "INSERT into `skllogs` (`ID`, `AccID`, `Name`, `Faction`, `Type`, `Ed`) VALUES (?, ?, ?, ?, 3, ?)", result[1]["COUNT(*)"], getElementData(thePlayer, "AccID"), getElementData(thePlayer, "Name"), faction, -kolvo)	
												local str = getElementData(thePlayer, "Name") .. " (" .. getElementData(thePlayer, "ID") .. ") забрал " .. kolvo .. " г. наркотиков со склада."
												for i,n in pairs(IDS) do
													if(getElementData(n, "Login") == true) then
														if(getElementData(n, "Faction") == getElementData(thePlayer, "Faction")) then
															sendClientMessage(str, n, 180, 120, 180)
														end
													end
												end
											else
												addBox("Склад закрыт лидером организации.", thePlayer, 255, 0, 0)
											end
										else
											addBox("Склад закрыт администрацией.", thePlayer, 255, 0, 0)
										end
									else
										addBox("Ошибка: Вы не можете унести больше 100 г.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Ошибка: Вы не можете взять столько.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: Вы слишком далеко от склада.", thePlayer, 255, 0, 0)
							end
						elseif(faction == 4) then
							local x1, y1, z1 = -123.197265625, -1391.619140625, 10.419187545776
							local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
							if(dist <= 5) then
								if(Server["Maf4NRK"] - kolvo >= 0) then
									if(getElementData(thePlayer, "Nrk") + kolvo <= 100) then
										if(AFOS[faction] == true) then
											if(FactOpenSkl[faction] == true) then
												Server["Maf4NRK"] = Server["Maf4NRK"] - kolvo
												SED(thePlayer, "Nrk", getElementData(thePlayer, "Nrk") + kolvo)
												updatePlayerAccount(thePlayer, "NRK", getElementData(thePlayer, "Nrk"))
												dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = ?", Server["Maf4NRK"], "Maf4NRK")
												addBox("Вы успешно забрали со склада\n" .. kolvo .. " г. наркотиков.", thePlayer, 0, 255, 60)
												local query = dbQuery(mysql, "SELECT COUNT(*) from `skllogs`")
												local result = dbPoll(query, -1)
												dbExec(mysql, "INSERT into `skllogs` (`ID`, `AccID`, `Name`, `Faction`, `Type`, `Ed`) VALUES (?, ?, ?, ?, 3, ?)", result[1]["COUNT(*)"], getElementData(thePlayer, "AccID"), getElementData(thePlayer, "Name"), faction, -kolvo)	
												local str = getElementData(thePlayer, "Name") .. " (" .. getElementData(thePlayer, "ID") .. ") забрал " .. kolvo .. " г. наркотиков со склада."
												for i,n in pairs(IDS) do
													if(getElementData(n, "Login") == true) then
														if(getElementData(n, "Faction") == getElementData(thePlayer, "Faction")) then
															sendClientMessage(str, n, 180, 120, 180)
														end
													end
												end
											else
												addBox("Склад закрыт лидером организации.", thePlayer, 255, 0, 0)
											end
										else
											addBox("Склад закрыт администрацией.", thePlayer, 255, 0, 0)
										end
									else
										addBox("Ошибка: Вы не можете унести больше 100 г.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Ошибка: Вы не можете взять столько.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: Вы слишком далеко от склада.", thePlayer, 255, 0, 0)
							end
						end
					else
						addBox("Ошибка: /getdrugs [1-100].", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: /getdrugs [1-100].", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: Данная команда Вам недоступна.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: Данная команда Вам недоступна.", thePlayer, 255, 0, 0)
		end
	end
end

function onPlayerPutMoney( thePlayer, command, money )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") >= 1 and getElementData(thePlayer, "Faction") <= 4) then
			money = toch(money)
			if(money ~= nil) then
				money = math.floor(money)
				if(money >= 1 and money <= 250000) then
					if(getElementData(thePlayer, "Money") >= money) then
						local faction = getElementData(thePlayer, "Faction")
						local x, y, z = getElementPosition(thePlayer)
						if(faction == 1) then
							local x1, y1, z1 = 296.7392578125, 292.1826171875, 17.683990478516
							local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
							if(dist <= 5) then
								Server["Maf1Money"] = Server["Maf1Money"] + money
								setElementMoney(thePlayer, -money, "На склад мафии")
								dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = ?", Server["Maf1Money"], "Maf1Money")
								addBox("Вы положили на склад мафии " .. money .. "$.", thePlayer, 0, 255, 60)
								local query = dbQuery(mysql, "SELECT COUNT(*) from `skllogs`")
								local result = dbPoll(query, -1)
								dbExec(mysql, "INSERT into `skllogs` (`ID`, `AccID`, `Name`, `Faction`, `Type`, `Ed`) VALUES (?, ?, ?, ?, 2, ?)", result[1]["COUNT(*)"], getElementData(thePlayer, "AccID"), getElementData(thePlayer, "Name"), faction, money)	
								local str = getElementData(thePlayer, "Name") .. " (" .. getElementData(thePlayer, "ID") .. ") положил " .. money .. "$ на склад."
								for i,n in pairs(IDS) do
									if(getElementData(n, "Login") == true) then
										if(getElementData(n, "Faction") == getElementData(thePlayer, "Faction")) then
											sendClientMessage(str, n, 180, 120, 180)
										end
									end
								end	
							else
								addBox("Ошибка: Вы слишком далеко от склада.", thePlayer, 255, 0, 0)
							end
						elseif(faction == 2) then
							local x1, y1, z1 = -1062.4267578125, -261.9091796875, 12.05069732666
							local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
							if(dist <= 5) then
								Server["Maf2Money"] = Server["Maf2Money"] + money
								setElementMoney(thePlayer, -money, "На склад мафии")
								dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = ?", Server["Maf2Money"], "Maf2Money")
								addBox("Вы положили на склад мафии " .. money .. "$.", thePlayer, 0, 255, 60)
								local query = dbQuery(mysql, "SELECT COUNT(*) from `skllogs`")
								local result = dbPoll(query, -1)
								dbExec(mysql, "INSERT into `skllogs` (`ID`, `AccID`, `Name`, `Faction`, `Type`, `Ed`) VALUES (?, ?, ?, ?, 2, ?)", result[1]["COUNT(*)"], getElementData(thePlayer, "AccID"), getElementData(thePlayer, "Name"), faction, money)	
								local str = getElementData(thePlayer, "Name") .. " (" .. getElementData(thePlayer, "ID") .. ") положил " .. money .. "$ на склад."
								for i,n in pairs(IDS) do
									if(getElementData(n, "Login") == true) then
										if(getElementData(n, "Faction") == getElementData(thePlayer, "Faction")) then
											sendClientMessage(str, n, 180, 120, 180)
										end
									end
								end	
							else
								addBox("Ошибка: Вы слишком далеко от склада.", thePlayer, 255, 0, 0)
							end
						elseif(faction == 3) then
							local x1, y1, z1 = -1097.123046875, 348.3984375, 11.441700935364
							local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
							if(dist <= 5) then
								Server["Maf3Money"] = Server["Maf3Money"] + money
								setElementMoney(thePlayer, -money, "На склад мафии")
								dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = ?", Server["Maf3Money"], "Maf3Money")
								addBox("Вы положили на склад мафии " .. money .. "$.", thePlayer, 0, 255, 60)
								local query = dbQuery(mysql, "SELECT COUNT(*) from `skllogs`")
								local result = dbPoll(query, -1)
								dbExec(mysql, "INSERT into `skllogs` (`ID`, `AccID`, `Name`, `Faction`, `Type`, `Ed`) VALUES (?, ?, ?, ?, 2, ?)", result[1]["COUNT(*)"], getElementData(thePlayer, "AccID"), getElementData(thePlayer, "Name"), faction, money)	
								local str = getElementData(thePlayer, "Name") .. " (" .. getElementData(thePlayer, "ID") .. ") положил " .. money .. "$ на склад."
								for i,n in pairs(IDS) do
									if(getElementData(n, "Login") == true) then
										if(getElementData(n, "Faction") == getElementData(thePlayer, "Faction")) then
											sendClientMessage(str, n, 180, 120, 180)
										end
									end
								end	
							else
								addBox("Ошибка: Вы слишком далеко от склада.", thePlayer, 255, 0, 0)
							end
						elseif(faction == 4) then
							local x1, y1, z1 = -123.197265625, -1391.619140625, 10.419187545776
							local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
							if(dist <= 5) then
								Server["Maf4Money"] = Server["Maf4Money"] + money
								setElementMoney(thePlayer, -money, "На склад мафии")
								dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = ?", Server["Maf4Money"], "Maf4Money")
								addBox("Вы положили на склад мафии " .. money .. "$.", thePlayer, 0, 255, 60)
								local query = dbQuery(mysql, "SELECT COUNT(*) from `skllogs`")
								local result = dbPoll(query, -1)
								dbExec(mysql, "INSERT into `skllogs` (`ID`, `AccID`, `Name`, `Faction`, `Type`, `Ed`) VALUES (?, ?, ?, ?, 2, ?)", result[1]["COUNT(*)"], getElementData(thePlayer, "AccID"), getElementData(thePlayer, "Name"), faction, money)	
								local str = getElementData(thePlayer, "Name") .. " (" .. getElementData(thePlayer, "ID") .. ") положил " .. money .. "$ на склад."
								for i,n in pairs(IDS) do
									if(getElementData(n, "Login") == true) then
										if(getElementData(n, "Faction") == getElementData(thePlayer, "Faction")) then
											sendClientMessage(str, n, 180, 120, 180)
										end
									end
								end
							else
								addBox("Ошибка: Вы слишком далеко от склада.", thePlayer, 255, 0, 0)
							end
						end
					else
						addBox("Ошибка: У Вас недостаточно денег.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: /putmoney [1-250000]$.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: /putmoney [1-250000]$.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Данная команда Вам недоступна.", thePlayer, 255, 0, 0)
		end
	end
end

function onLeaderGetMoney( thePlayer, command, money )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") >= 1 and getElementData(thePlayer, "Faction") <= 4) then
			if(getElementData(thePlayer, "Rank") == 10) then
				money = toch(money)
				if(money ~= nil) then
					money = math.floor(money)
					if(money >= 1 and money <= 250000) then
						local faction = getElementData(thePlayer, "Faction")
						local x, y, z = getElementPosition(thePlayer)
						if(AFOS[faction] == true) then
							if(faction == 1) then
								local x1, y1, z1 = 296.7392578125, 292.1826171875, 17.683990478516
								local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
								if(dist <= 5) then
									if(FactOpenSkl[faction] == true) then
										if(Server["Maf1Money"] - money >= 0) then
											Server["Maf1Money"] = Server["Maf1Money"] - money
											setElementMoney(thePlayer, money, "Со склада мафии")
											dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = ?", Server["Maf1Money"], "Maf1Money")
											addBox("Вы сняли со склада мафии " .. money .. "$.", thePlayer, 0, 255, 60)
											local query = dbQuery(mysql, "SELECT COUNT(*) from `skllogs`")
											local result = dbPoll(query, -1)
											dbExec(mysql, "INSERT into `skllogs` (`ID`, `AccID`, `Name`, `Faction`, `Type`, `Ed`) VALUES (?, ?, ?, ?, 1, ?)", result[1]["COUNT(*)"], getElementData(thePlayer, "AccID"), getElementData(thePlayer, "Name"), faction, -money)
											local str = getElementData(thePlayer, "Name") .. " (" .. getElementData(thePlayer, "ID") .. ") снял " .. money .. "$ со склада."
											for i,n in pairs(IDS) do
												if(getElementData(n, "Login") == true) then
													if(getElementData(n, "Faction") == getElementData(thePlayer, "Faction")) then
														sendClientMessage(str, n, 180, 120, 180)
													end
												end
											end
										else
											addBox("Ошибка: На складе недостаточно денег.", thePlayer, 255, 0, 0)
										end
									else
										addBox("Склад закрыт лидером организации.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Вы слишком далеко от склада своей мафии.", thePlayer, 255, 0, 0)
								end
							elseif(faction == 2) then
								local x1, y1, z1 = -1062.4267578125, -261.9091796875, 12.05069732666
								local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
								if(dist <= 5) then
									if(FactOpenSkl[faction] == true) then
										if(Server["Maf2Money"] - money >= 0) then
											Server["Maf2Money"] = Server["Maf2Money"] - money
											setElementMoney(thePlayer, money, "Со склада мафии")
											dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = ?", Server["Maf2Money"], "Maf2Money")
											addBox("Вы сняли со склада мафии " .. money .. "$.", thePlayer, 0, 255, 60)
											local query = dbQuery(mysql, "SELECT COUNT(*) from `skllogs`")
											local result = dbPoll(query, -1)
											dbExec(mysql, "INSERT into `skllogs` (`ID`, `AccID`, `Name`, `Faction`, `Type`, `Ed`) VALUES (?, ?, ?, ?, 1, ?)", result[1]["COUNT(*)"], getElementData(thePlayer, "AccID"), getElementData(thePlayer, "Name"), faction, -money)
											local str = getElementData(thePlayer, "Name") .. " (" .. getElementData(thePlayer, "ID") .. ") снял " .. money .. "$ со склада."
											for i,n in pairs(IDS) do
												if(getElementData(n, "Login") == true) then
													if(getElementData(n, "Faction") == getElementData(thePlayer, "Faction")) then
														sendClientMessage(str, n, 180, 120, 180)
													end
												end
											end
										else
											addBox("Ошибка: На складе недостаточно денег.", thePlayer, 255, 0, 0)
										end
									else
										addBox("Склад закрыт лидером организации.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Вы слишком далеко от склада своей мафии.", thePlayer, 255, 0, 0)
								end
							elseif(faction == 3) then
								local x1, y1, z1 = -1097.123046875, 348.3984375, 11.441700935364
								local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
								if(dist <= 5) then
									if(FactOpenSkl[faction] == true) then
										if(Server["Maf3Money"] - money >= 0) then
											Server["Maf3Money"] = Server["Maf3Money"] - money
											setElementMoney(thePlayer, money, "Со склада мафии")
											dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = ?", Server["Maf3Money"], "Maf3Money")
											addBox("Вы сняли со склада мафии " .. money .. "$.", thePlayer, 0, 255, 60)
											local query = dbQuery(mysql, "SELECT COUNT(*) from `skllogs`")
											local result = dbPoll(query, -1)
											dbExec(mysql, "INSERT into `skllogs` (`ID`, `AccID`, `Name`, `Faction`, `Type`, `Ed`) VALUES (?, ?, ?, ?, 1, ?)", result[1]["COUNT(*)"], getElementData(thePlayer, "AccID"), getElementData(thePlayer, "Name"), faction, -money)
											local str = getElementData(thePlayer, "Name") .. " (" .. getElementData(thePlayer, "ID") .. ") снял " .. money .. "$ со склада."
											for i,n in pairs(IDS) do
												if(getElementData(n, "Login") == true) then
													if(getElementData(n, "Faction") == getElementData(thePlayer, "Faction")) then
														sendClientMessage(str, n, 180, 120, 180)
													end
												end
											end
										else
											addBox("Ошибка: На складе недостаточно денег.", thePlayer, 255, 0, 0)
										end
									else
										addBox("Склад закрыт лидером организации.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Вы слишком далеко от склада своей мафии.", thePlayer, 255, 0, 0)
								end
							elseif(faction == 4) then
								local x1, y1, z1 = -123.197265625, -1391.619140625, 10.419187545776
								local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
								if(dist <= 5) then
									if(FactOpenSkl[faction] == true) then
										if(Server["Maf4Money"] - money >= 0) then
											Server["Maf4Money"] = Server["Maf4Money"] - money
											setElementMoney(thePlayer, money, "Со склада мафии")
											dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = ?", Server["Maf4Money"], "Maf4Money")
											addBox("Вы сняли со склада мафии " .. money .. "$.", thePlayer, 0, 255, 60)
											local query = dbQuery(mysql, "SELECT COUNT(*) from `skllogs`")
											local result = dbPoll(query, -1)
											dbExec(mysql, "INSERT into `skllogs` (`ID`, `AccID`, `Name`, `Faction`, `Type`, `Ed`) VALUES (?, ?, ?, ?, 1, ?)", result[1]["COUNT(*)"], getElementData(thePlayer, "AccID"), getElementData(thePlayer, "Name"), faction, -money)
											local str = getElementData(thePlayer, "Name") .. " (" .. getElementData(thePlayer, "ID") .. ") снял " .. money .. "$ со склада."
											for i,n in pairs(IDS) do
												if(getElementData(n, "Login") == true) then
													if(getElementData(n, "Faction") == getElementData(thePlayer, "Faction")) then
														sendClientMessage(str, n, 180, 120, 180)
													end
												end
											end
										else
											addBox("Ошибка: На складе недостаточно денег.", thePlayer, 255, 0, 0)
										end
									else
										addBox("Склад закрыт лидером организации.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Вы слишком далеко от склада своей мафии.", thePlayer, 255, 0, 0)
								end
							end
						else
							addBox("Склад закрыт администрацией.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: /getmoney [1-250000]$.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: /getmoney [1-250000]$.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: Данная команда Вам недоступна.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: Данная команда Вам недоступна.", thePlayer, 255, 0, 0)
		end
	end
end

function onLeaderOpenW( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") >= 1 and getElementData(thePlayer, "Faction") <= 4) then
			if(getElementData(thePlayer, "Rank") >= 8) then
				local faction = getElementData(thePlayer, "Faction")
				if(AFOS[faction] == true) then
					if(FactOpenSkl[faction] == false) then
						FactOpenSkl[faction] = true
						dbExec(mysql, "UPDATE `Server` SET `Integ` = '1' WHERE `Name` = ?", "FactOpenSkl" .. faction)
						addBox("Вы успешно открыли склад мафии.", thePlayer, 255, 0, 0)
					else
						addBox("Склад уже открыт.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Функция выключена администрацией.", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: Данная команда Вам недоступна.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: Данная команда Вам недоступна.", thePlayer, 255, 0, 0)
		end
	end
end

function onMrkArmyGruzchikHit( hit, dim )
	if(getElementType(hit) == "player") then
		if(getElementData(hit, "Faction") == 9) then
			if(getElementData(hit, "ArmMat") == false) then
				local veh = getPedOccupiedVehicle(hit)
				if(veh == false) then
					local obj = createObject(12969, 0, 0, 0)
					exports.bone:attachElementToBone(obj, thePlayer, 12,0.2,0.1,0,90,180,-25)
					addBox("Вы подобрали ящик с материалами.", hit, 0, 60, 255)
					SED(hit, "ArmMat", true)
					SED(hit, "ArmMatObj", obj)
					setTimer(setPedAnimation, 200, 1, hit, "carry", "crry_prtial", 1, true, true, false, true)
					exports.bone:attachElementToBone(obj, hit, 12,0.2,0.1,0,90,180,-25)
					toggleControl(hit, "enter_exit", false)
					toggleControl(hit, "fire", false)
					toggleControl(hit, "jump", false)
					toggleControl(hit, "enter_passenger", false)
					toggleControl(hit, "next_weapon", false)
					toggleControl(hit, "previous_weapon", false)
					toggleControl(hit, "aim_weapon", false)
					toggleControl(hit, "sprint", false)
					toggleControl(hit, "crouch", false)
				else
					addBox("Вы не можете взять ящик в транспорте.", hit, 255, 0, 0)
				end
			else
				addBox("Вы вернули ящик с материалами.", hit, 0, 60, 255)
				removeElementData(hit, "ArmMat")
				local obj = getElementData(hit, "ArmMatObj")
				toggleControl(hit, "enter_exit", true)
				toggleControl(hit, "fire", true)
				toggleControl(hit, "jump", true)
				toggleControl(hit, "enter_passenger", true)
				toggleControl(hit, "next_weapon", true)
				toggleControl(hit, "previous_weapon", true)
				toggleControl(hit, "aim_weapon", true)
				toggleControl(hit, "sprint", true)
				toggleControl(hit, "crouch", true)
				setPedAnimation(hit, "BSKTBALL", "BBALL_idle_O", 1, false)
				if(obj ~= false) then
					exports.bone:detachElementFromBone(obj)
					destroyElement(obj)
				end
				removeElementData(hit, "ArmMatObj")
			end
		else
			addBox("Данный склад Вам недоступен.", hit, 255, 0, 0)
		end
	end
end

function checkCapt( pos, r )
	if(MafiaCapture[pos]["Frag1"] > MafiaCapture[pos]["Frag2"] or (MafiaCapture[pos]["Frag1"] == MafiaCapture[pos]["Frag2"] and MafiaCapture[pos]["Frag1"] == 0) ) then
		local maf1 = MafiaCapture[pos]["Maf1"]
		local maf2 = MafiaCapture[pos]["Maf2"]
		for i, n in pairs(IDS) do
			if(getElementData(n, "Faction") == maf1) then
				addBox("Вы успешно завоевали\nБизнес: #" .. MafiaCapture[pos]["Bus"], n, 0, 255, 60)
			elseif(getElementData(n, "Faction") == maf2) then
				addBox("Вы проиграли войну\nЗа бизнес: #" .. MafiaCapture[pos]["Bus"], n, 255, 0, 0)
			end
		end
		local biz = MafiaCapture[pos]["Bus"]
		BusinessTable[biz]["Roof"] = maf1
		dbExec(mysql, "UPDATE `Business` SET `Roof` = ? WHERE `ID` = ?", BusinessTable[biz]["Roof"], biz)
		MafiaCapture[maf1]["Pole"] = nil
		MafiaCapture[maf2]["Pole"] = nil
		MafiaCapture[pos] = {}
	else
		local maf1 = MafiaCapture[pos]["Maf1"]
		local maf2 = MafiaCapture[pos]["Maf2"]
		for i, n in pairs(IDS) do
			if(getElementData(n, "Faction") == maf1) then
				addBox("Вы проиграли битву\nЗа бизнес: #" .. MafiaCapture[pos]["Bus"], n, 0, 255, 60)
				triggerClientEvent(n, "captureToggle", n, false)
			elseif(getElementData(n, "Faction") == maf2) then
				addBox("Вы успешно защитили\nБизнес: #" .. MafiaCapture[pos]["Bus"], n, 255, 0, 0)
				triggerClientEvent(n, "captureToggle", n, false)
			end
		end
		local biz = MafiaCapture[pos]["Bus"]
		MafiaCapture[maf1]["Pole"] = nil
		MafiaCapture[maf2]["Pole"] = nil
		MafiaCapture[pos] = {}
	end
	setRadarAreaFlashing(radararea[r], false)
	setRadarAreaColor(radararea[r], 120, 120, 120, 180)
end

function onTriggerCapt( arg1, arg2, arg3 )
	if(arg1 == client) then
		if(arg2 ~= nil) then
			if(arg3 ~= nil) then
				if(arg2 > 0) then
					if(arg3 > 0) then
						local arg4 = toch(getElementData(client, "Faction"))
						if(arg4 >= 1 and arg4 <= 4) then
							local biz = arg2
							local pos = arg3
							if(BusinessTable[biz]["Roof"] ~= arg4) then
								pos = pos + 4
								if(MafiaCapture[pos]["Capture"] == nil) then
									local secMafia = BusinessTable[biz]["Roof"]
									if(MafiaCapture[secMafia]["MC"] == true) then
										MafiaCapture[secMafia]["MC"] = false
										MafiaCapture[arg4]["MC"] = false
										local ded = ""
										if(arg3 == 1) then
											ded = "свалке\n(( GPS - интересные места ))\n"
										elseif(arg3 == 2) then
											ded = "пляже\n(( GPS - интересные места ))\n"
										else
											ded = "киностудии\n(( GPS - интересные места ))\n"
										end
										local str = "Мафия " .. FactionName[arg4][1] .. " забила\nВам встречу на " .. ded .. "\nЗа бизнес #" .. arg2 .. "\n \nУ Вас есть 5 минут, чтобы подготовиться\nИ приехать к зоне встречи!\n(Отмечено на GPS)"
										local str2 = "Ваша мафия забила встречу\n" .. FactionName[secMafia][1] .. " на " .. ded .. "\nЗа бизнес #" .. arg2 .. "\n \nУ Вас есть 5 минут, чтобы подготовиться\nИ приехать к зоне встречи!\n(Отмечено на GPS)"
										for i,n in pairs(IDS) do
											if(getElementData(n, "Faction") == secMafia) then
												addBox(str, n, 255, 255, 0)
												if(getElementData(n, "Faction") == arg4 or getElementData(n, "Faction") == secMafia) then
													local id = toch(getElementData(n, "ID"))
													if(GPST[id] ~= nil) then
														if(GPST[id]["Pickup"] ~= nil) then
															if(getElementType(GPST[id]["Pickup"]) == "marker") then
																removeEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
																destroyElement(GPST[id]["Pickup"])
																destroyElement(GPST[id]["Blip"])
																GPST[id] = nil
															end
														end
													end
													GPST[id] = {}
													if(arg3 == 1) then
														GPST[id]["Pickup"] = createMarker(-1236.2978515625, 7.923828125, 11.391411781311, "checkpoint", 4, 220, 0, 0, 220, n)
														GPST[id]["Blip"]	= createBlip(-1236.2978515625, 7.923828125, 11.391411781311, 0, 2, 220, 0, 0, 220, 0, 64000, n)
													elseif(arg3 == 2) then
														GPST[id]["Pickup"] = createMarker(817.0771484375, 782.5595703125, 17.963611602783, "checkpoint", 4, 220, 0, 0, 220, n)
														GPST[id]["Blip"]	= createBlip(817.0771484375, 782.5595703125, 17.963611602783, 0, 2, 220, 0, 0, 220, 0, 64000, n)
													elseif(arg3 == 3) then
														GPST[id]["Pickup"] = createMarker(-26.3671875, 964.310546875, 10.899536132813, "checkpoint", 4, 220, 0, 0, 220, n)
														GPST[id]["Blip"]	= createBlip(-26.3671875, 964.310546875, 10.899536132813, 0, 2, 220, 0, 0, 220, 0, 64000, n)
													end
													SED(GPST[id]["Pickup"], "Player", n)
													addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
												end
											elseif(getElementData(n, "Faction") == arg4) then
												addBox(str2, n, 255, 255, 0)
												if(getElementData(n, "Faction") == arg4 or getElementData(n, "Faction") == secMafia) then
													local id = toch(getElementData(n, "ID"))
													if(GPST[id] ~= nil) then
														if(GPST[id]["Pickup"] ~= nil) then
															if(getElementType(GPST[id]["Pickup"]) == "marker") then
																removeEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
																destroyElement(GPST[id]["Pickup"])
																destroyElement(GPST[id]["Blip"])
																GPST[id] = nil
															end
														end
													end
													GPST[id] = {}
													if(arg3 == 1) then
														GPST[id]["Pickup"] = createMarker(-1236.2978515625, 7.923828125, 11.391411781311, "checkpoint", 4, 220, 0, 0, 220, n)
														GPST[id]["Blip"]	= createBlip(-1236.2978515625, 7.923828125, 11.391411781311, 0, 2, 220, 0, 0, 220, 0, 64000, n)
													elseif(arg3 == 2) then
														GPST[id]["Pickup"] = createMarker(817.0771484375, 782.5595703125, 17.963611602783, "checkpoint", 4, 220, 0, 0, 220, n)
														GPST[id]["Blip"]	= createBlip(817.0771484375, 782.5595703125, 17.963611602783, 0, 2, 220, 0, 0, 220, 0, 64000, n)
													elseif(arg3 == 3) then
														GPST[id]["Pickup"] = createMarker(-26.3671875, 964.310546875, 10.899536132813, "checkpoint", 4, 220, 0, 0, 220, n)
														GPST[id]["Blip"]	= createBlip(-26.3671875, 964.310546875, 10.899536132813, 0, 2, 220, 0, 0, 220, 0, 64000, n)
													end
													SED(GPST[id]["Pickup"], "Player", n)
													addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
												end
											end
										end
										MafiaCapture[pos]["Bus"] = arg2
										MafiaCapture[pos]["Capture"] = true
										MafiaCapture[pos]["Maf1"] = arg4
										MafiaCapture[pos]["Maf2"] = secMafia
										MafiaCapture[pos]["Frag1"] = 0
										MafiaCapture[pos]["Frag2"] = 0
										MafiaCapture[pos]["Bitva"] = false
										MafiaCapture[arg4]["Pole"] = pos
										MafiaCapture[secMafia]["Pole"] = pos
										if(MafiaCapture[pos]["Maf1"] == 1) then
											setRadarAreaColor(radararea[arg3], 170, 102, 204, 220)
										elseif(MafiaCapture[pos]["Maf1"]== 2) then
											setRadarAreaColor(radararea[arg3], 220, 120, 20, 220)
										elseif(MafiaCapture[pos]["Maf1"] == 3) then
											setRadarAreaColor(radararea[arg3], 0, 160, 30, 220)
										elseif(MafiaCapture[pos]["Maf1"] == 4) then
											setRadarAreaColor(radararea[arg3], 40, 10, 0, 220)
										end
										setRadarAreaFlashing(radararea[arg3], true)
										setTimer(function ( der, f )
											for i, n in pairs(IDS) do
												if(getElementData(n, "Login") == true) then
													if(getElementData(n, "Faction") == MafiaCapture[der]["Maf1"] or getElementData(n, "Faction") == MafiaCapture[der]["Maf2"]) then
														addBox("Битва за бизнес началась!", n, 255, 0, 0)
														triggerClientEvent(n, "captureToggle", n, true, MafiaCapture[der]["Maf1"], MafiaCapture[der]["Maf2"])
													end
												end
											end
											MafiaCapture[pos]["Bitva"] = true
											setTimer(checkCapt, 10 * 60 * 1000, 1, der, f)
										end, 5 * 60 * 1000, 1, pos, arg3)
										setTimer(function ( a, b, c, d, e, f )
											local str = "Мафия " .. a .. " забила\nВам встречу на " .. c .. "За бизнес #" .. d .. "\nБитва скоро начнется!"
											local str2 = "Ваша мафия забила встречу\n" .. b .. " на " .. c .. "За бизнес #" .. d .. "\nБитва скоро начнется!"
											for i,n in pairs(IDS) do
												if(getElementData(n, "Faction") == f) then
													addBox(str, n, 255, 255, 0)
												elseif(getElementData(n, "Faction") == e) then
													addBox(str2, n, 255, 255, 0)
												end
											end
										end, 1 * 60 * 1000, 3, FactionName[arg4][1], FactionName[secMafia][1], ded, arg2, arg4, secMafia)
									else
										addBox("Данная мафия уже воюет.", client, 255, 0, 0)
									end
								else
									addBox("Данное место встречи\nУже занято!", client, 255, 0, 0)
								end
							else
								addBox("Данный бизнес уже захвачен.", client, 255, 0, 0)
							end
						else
							addBox("Системная ошибка.5", client, 255, 0, 0)
						end
					else
						addBox("Системная ошибка.4", client, 255, 0, 0)
					end
				else
					addBox("Системная ошибка.3", client, 255, 0, 0)
				end
			else
				addBox("Системная ошибка.2", client, 255, 0, 0)
			end
		else
			addBox("Системная ошибка.1", client, 255, 0, 0)
		end
	end
end

function onTryGetMoney( arg1, arg2 )
	if(arg1 == client) then
		if(arg2 ~= nil) then
			if(arg2 > 0) then
				local query = dbQuery(mysql, "SELECT `Bank` FROM `Accounts` WHERE `Name` = ?", getElementData(client, "Name"))
				local result = dbPoll(query, -1)
				if(result[1]["Bank"] >= arg2) then
					arg42 = math.floor(arg2 * 0.99)
					setElementMoney(client, arg42, "Снято с банкомата")
					SED(client, "Bank", result[1]["Bank"] - arg2)
					dbExec(mysql, "UPDATE `Accounts` SET `Bank` = ?, `Money` = ? WHERE `Name` = ?", result[1]["Bank"] - arg2, getElementData(client, "Money"), getElementData(client, "Name"))
					addBox("Вы успешно сняли " .. arg2 .. "$\nСо своего банковского счета.", client, 0, 255, 60)
				else
					addBox("У Вас недостаточно денег на счету\nЧтобы снять указанную сумму.", client, 255, 0, 0)
				end
				dbFree(query)
			end
		end
	end
end

function onTryEnterMoney( arg1, arg2 )
	if(arg1 == client) then
		if(arg2 ~= nil) then
			if(arg2 > 0) then
				local query = dbQuery(mysql, "SELECT `Bank`, `Money` FROM `Accounts` WHERE `ID` = ?", getElementData(client, "AccID"))
				local result = dbPoll(query, -1)
				if(result[1]["Money"] >= arg2) then
					setElementMoney(client, -arg2, "Пополнено в банкомате")
					SED(client, "Bank", result[1]["Bank"] + arg2)
					dbExec(mysql, "UPDATE `Accounts` SET `Bank` = ? WHERE `Name` = ?", result[1]["Bank"] + arg2, getElementData(client, "Name"))
					addBox("Вы успешно положили " .. arg2 .. "$\nНа свой банковский счет.", client, 0, 255, 60)
				else
					addBox("У Вас недостаточно денег\nЧтобы положить указанную сумму.", client, 255, 0, 0)
				end
				dbFree(query)
			end
		end
	end
end

function onTryTrans( arg1, arg2, arg3 )
	if(arg1 == client) then
		if(arg2 ~= nil) then
			if(arg2 > 0) then
				local query = dbQuery(mysql, "SELECT `Bank`, `Money`, `ID` FROM `Accounts` WHERE `Name` = ?", getElementData(client, "Name"))
				local result = dbPoll(query, -1)
				if(result[1]["Bank"] >= arg2) then
					local secQuery = dbQuery(mysql, "SELECT `Bank`, `Money`, `ID` FROM `Accounts` WHERE `Name` = ?", arg3)
					local poll = dbPoll(secQuery, -1)
					if(poll ~= nil) then
						if(poll[1] ~= nil) then
							if(poll[1]["ID"] ~= nil) then
								local secPlayer = ""
								for i, n in pairs(IDS) do
									if(getElementData(n, "Name") == arg3) then
										secPlayer = n
									end
								end
								local arg42 = math.floor(arg2 * 0.99)
								if(isElement(secPlayer) == true) then
									if(getElementType(secPlayer) == "player") then
										SED(arg1, "Bank", getElementData(arg1, "Bank") - arg2)
										SED(secPlayer, "Bank", getElementData(secPlayer, "Bank") + arg42)
										addBox(getElementData(arg1, "Name") .. " перевёл на Ваш\nБанковский счет " .. arg42 .. "$.", secPlayer, 0, 60, 255)
										addBox("Вы перевели " .. getElementData(secPlayer, "Name") .. "\nНа банковский счет " .. arg42 .. "$.", arg1, 0, 60, 255)
										dbExec(mysql, "UPDATE `Accounts` set `Bank` = ? WHERE `Name` = ?", getElementData(secPlayer, "Bank"), getElementData(secPlayer, "Name"))
										dbExec(mysql, "UPDATE `Accounts` set `Bank` = ? WHERE `Name` = ?", getElementData(arg1, "Bank"), getElementData(arg1, "Name"))
										dbExec(mysql, "INSERT INTO `MoneyLogs` (`ID`, `PID`, `Name`, `Reason`, `Summ`, `SecID`) VALUES (?, ?, ?, ?, ?, ?)", maxquery, getElementData(client, "AccID"), getElementData(client, "Name"), "Передано в банке", arg42, poll[1]["ID"])
									else
										addBox("Вы перевели " .. arg3 .. "\nНа банковский счет " .. arg42 .. "$.", arg1, 0, 60, 255)
										SED(arg1, "Bank", getElementData(arg1, "Bank") - arg2)
										dbExec(mysql, "UPDATE `Accounts` set `Bank` = ? WHERE `Name` = ?", getElementData(arg1, "Bank"), getElementData(arg1, "Name"))
										dbExec(mysql, "UPDATE `Accounts` SET `Bank` = `Bank` + ? WHERE `Name` = ?", arg42, arg3)
										dbExec(mysql, "INSERT INTO `MoneyLogs` (`ID`, `PID`, `Name`, `Reason`, `Summ`, `SecID`) VALUES (?, ?, ?, ?, ?, ?)", maxquery, getElementData(client, "AccID"), getElementData(client, "Name"), "Передано в банке", arg42, poll[1]["ID"])	
									end
								else
									addBox("Вы перевели " .. arg3 .. "\nНа банковский счет " .. arg42 .. "$.", arg1, 0, 60, 255)
									SED(arg1, "Bank", getElementData(arg1, "Bank") - arg2)
									dbExec(mysql, "UPDATE `Accounts` set `Bank` = ? WHERE `Name` = ?", getElementData(arg1, "Bank"), getElementData(arg1, "Name"))
									dbExec(mysql, "UPDATE `Accounts` SET `Bank` = `Bank` + ? WHERE `Name` = ?", arg42, arg3)
									dbExec(mysql, "INSERT INTO `MoneyLogs` (`ID`, `PID`, `Name`, `Reason`, `Summ`, `SecID`) VALUES (?, ?, ?, ?, ?, ?)", maxquery, getElementData(client, "AccID"), getElementData(client, "Name"), "Передано в банке", arg42, poll[1]["ID"])
								end
								maxquery = maxquery + 1
							else
								addBox("Указанный Вами владелец счета\nНе найден.\n \nПроверьте корректность введённых данных.", client, 255, 0, 0)
							end
						else
							addBox("Указанный Вами владелец счета\nНе найден.\n \nПроверьте корректность введённых данных.", client, 255, 0, 0)
						end
					else
						addBox("Указанный Вами владелец счета\nНе найден.\n \nПроверьте корректность введённых данных.", client, 255, 0, 0)
					end
				else
					addBox("У Вас недостаточно денег\nЧтобы положить указанную сумму.", client, 255, 0, 0)
				end
				dbFree(query)
			end
		end
	end
end

function onTryPayBiz( arg1, arg2 )
	if(arg1 == client) then
		if(arg2 > 0) then
			local query = dbQuery(mysql, "SELECT `Bank`, `Money` FROM `Accounts` WHERE `Name` = ?", getElementData(client, "Name"))
			local result = dbPoll(query, -1)
			if(result[1]["Bank"] >= arg2 * 50) then
				local biz = getElementData(client, "BusOwnID")
				if(biz > 0) then
					if(BusinessTable[biz]["PayDay"] + arg2 <= 720) then
						BusinessTable[biz]["PayDay"] = BusinessTable[biz]["PayDay"] + arg2
						SED(client, "Bank", getElementData(client, "Bank") - arg2 * 50)
						addBox("Вы оплатили бизнес до:\n" .. BusinessTable[biz]["PayDay"] .. "/720", client, 0, 60, 255)
						dbExec(mysql, "UPDATE `Accounts` SET `Bank` = ? WHERE `Name` = ?", getElementData(client, "Bank"), getElementData(client, "Name"))
						dbExec(mysql, "UPDATE `Business` SET `PayDay` = ? WHERE `ID` = ?", BusinessTable[biz]["PayDay"], biz)
					else
						addBox("Ошибка: Вы ввели слишком\nБольшую сумму.", client, 255, 0, 0)
					end
				else
					addBox("Произошла ошибка", client, 255, 0, 0)
				end
			else
				addBox("У Вас недостаточно денег\nНа счету банка.", client, 255, 0, 0)
			end
		end
	end
end

function onTryPayPhone( arg1, arg2 )
	if(arg1 == client) then
		if(arg2 > 0) then
			local query = dbQuery(mysql, "SELECT `Bank`, `Money` FROM `Accounts` WHERE `Name` = ?", getElementData(client, "Name"))
			local result = dbPoll(query, -1)
			if(result[1]["Bank"] >= arg2) then
				SED(client, "Bank", getElementData(client, "Bank") - arg2)
				SED(client, "PhoneMoney", getElementData(client, "PhoneMoney") + arg2)
				addBox("Вы пополнили баланс телефона на " .. arg2 .. "$.", client, 0, 60, 255)
				dbExec(mysql, "UPDATE `Accounts` SET `Bank` = ?, `PhoneMoney` = ? WHERE `Name` = ?", getElementData(client, "Bank"), getElementData(client, "PhoneMoney"), getElementData(client, "Name"))
			else
				addBox("У вас недостаточно денег\nНа банковском счету.", client, 255, 0, 0)
			end
		end
	end
end

function onAdminGetSerial( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") == 6) then
			id = toch(id)
			local secPlayer = IDS[id]
			local serial = getPlayerSerial(secPlayer)
			sendClientMessage(serial, thePlayer, 255, 0, 0)
		end
	end
end


function onPoliceUncuff( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") == 8) then
			if(getElementData(thePlayer, "Rank") >= 3) then
				if(id ~= nil) then
					if(toch(id) ~= nil) then
						id = toch(id)
						if(IDS[id] ~= nil) then
							local secPlayer = IDS[id]
							if(getElementData(secPlayer, "Login") ~= false) then
								local x, y, z = getElementPosition(secPlayer)
								local x1, y1, z1 = getElementPosition(thePlayer)
								local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
								if(dist < 7) then
									if(secPlayer ~= thePlayer) then
										if(getElementData(secPlayer, "Cuffed") ~= false) then
											removeElementData(secPlayer, "Cuffed")
											setPedAnimation(secPlayer, "BSKTBALL", "BBALL_idle_O", 1, false)
											addBox("Вы сняли наручники с " .. getElementData(secPlayer, "Name"), thePlayer, 255, 255, 0)
											addBox(getElementData(thePlayer, "Name") .. " снял с Вас наручники", secPlayer, 255, 255, 0)
											toggleAllControls(secPlayer, true)
											setElementFrozen(secPlayer, false)
										else
											addBox("Данный игрок не в наручниках.", thePlayer, 255, 0, 0)
										end
									else
										addBox("Вы не можете снять наручники.", thePlayer, 255, 0, 0)
									end
								else
									addBox("Данный игрок слишком далеко.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Данный игрок не авторизован.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Данный игрок не найден.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: /uncuff [id].", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: /uncuff [id].", thePlayer, 255, 0, 0)
				end
			else
				addBox("Данная функция Вам недоступна.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Данная функция Вам недоступна.", thePlayer, 255, 0, 0)
		end
	end
end

function onPoliceTicket( thePlayer, command, id, summ )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") == 8) then
			if(getElementData(thePlayer, "Rank") >= 3) then
				if(id ~= nil) then
					if(toch(id) ~= nil) then
						id = toch(id)
						if(summ ~= nil) then
							if(toch(summ) ~= nil) then
								summ = toch(summ)
								if(summ > 0 and summ <= 1000) then
									if(IDS[id] ~= nil) then
										local secPlayer = IDS[id]
										if(getElementData(secPlayer, "Login") == true) then
											local x, y, z = getElementPosition(thePlayer)
											local x1, y1, z1 = getElementPosition(secPlayer)
											local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
											if(dist < 10) then
												if(getElementData(secPlayer, "Money") >= summ) then
													setElementMoney(secPlayer, -summ, "Штраф")
													addBox("Полицейский " .. getElementData(thePlayer, "Name") .. "\nВыписал Вам штраф в размере " .. summ .. "$.", secPlayer, 255, 255, 0)
													addBox("Вы выписали штраф" .. getElementData(secPlayer, "Name") .. "\nВ размере " .. summ .. "$.", thePlayer, 255, 255, 0)
												else
													addBox("У " .. getElementData(secPlayer, "Name") .. " недостаточно денег.", thePlayer, 255, 0, 0)
												end
											else
												addBox("Данный игрок слишком далеко.", thePlayer, 255, 0, 0)
											end
										else
											addBox("Данный игрок не авторизован.", thePlayer, 255, 0, 0)
										end
									else
										addBox("Данный игрок не найден.", thePlayer, 255, 0, 0)
									end
								else
									addBox("/ticket [id] [1-1000]", thePlayer, 255, 0, 0)
								end
							else
								addBox("/ticket [id] [1-1000]", thePlayer, 255, 0, 0)
							end
						else
							addBox("/ticket [id] [1-1000]", thePlayer, 255, 0, 0)
						end
					else
						addBox("/ticket [id] [1-1000]", thePlayer, 255, 0, 0)
					end
				else
					addBox("/ticket [id] [1-1000]", thePlayer, 255, 0, 0)
				end
			else
				addBox("Данная команда доступна с 4 ранга.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Данная команда Вам недоступна.", thePlayer, 255, 0, 0)
		end
	end
end

function onPoliceFrisk( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Faction") == 8) then
			if(getElementData(thePlayer, "Rank") >= 3) then
				if(id ~= nil) then
					if(toch(id) ~= nil) then
						id = toch(id)
						if(IDS[id] ~= nil) then
							local secPlayer = IDS[id]
							if(getElementData(secPlayer, "Login") == true) then
								local x, y, z = getElementPosition(thePlayer)
								local x1, y1, z1 = getElementPosition(secPlayer)
								local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
								if(dist <= 7) then
									local str = getElementData(secPlayer, "Name")
									local str1 = ""
									if(getElementData(secPlayer, "AutoLicense") == false) then
										str1 = str1 .. "Водительское удостоверение: отсутствует"
									else
										str1 = str1 .. "Водительское удостоверение: есть"
									end
									if(getElementData(secPlayer, "WeaponLicense") == false) then
										str1 = str1 .. "\nОружейное удостоверение: отсутствует"
									else
										str1 = str1 .. "\nОружейное удостоверение: есть"
									end
									local wep = false
									if(getPedWeapon(secPlayer, 2) > 0) then
										wep = true
									elseif(getPedWeapon(secPlayer, 3) > 0) then
										wep = true
									elseif(getPedWeapon(secPlayer, 5) > 0) then
										wep = true
									end
									if(wep == false) then
										str1 = str1 .. "\nОружие: нет"
									else
										str1 = str1 .. "\nОружие: есть"	
									end
									if(getElementData(secPlayer, "Nrk") == 0) then
										str1 = str1 .. "\nНаркотики: нет"
									else
										str1 = str1 .. "\nНаркотики: " .. getElementData(secPlayer, "Nrk")
									end
									showPlayerDialog(thePlayer, 64000, 1, str, str1, "Ок", "Отмена")
									local x, y, z = getElementPosition(thePlayer)
									for i,n in pairs(IDS) do
										if(getElementData(n, "Login") == true) then
											if(dist < 20) then
												msgforcamera(getElementData(thePlayer, "Name") .. " [" .. getElementData(thePlayer, "ID") .. "] обыcкал " .. getElementData(secPlayer, "Name") .. " [" .. getElementData(secPlayer, "ID") .. "].", n, 232, 183, 227, x, y, z)
											end
										end
									end
								else
									addBox("Данный игрок слишком далеко.", thePlayer, 255, 0, 0)
								end
							else
								addBox("Данный игрок не авторизован.", thePlayer, 255, 0, 0)
							end
						else
							addBox("Данный игрок не найден.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: /frisk [id]", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: /frisk [id]", thePlayer, 255, 0, 0)
				end
			else
				addBox("Данная команда доступна с 5 ранга.", thePlayer, 255, 0, 0)
			end
		else
			addBox("Данная команда Вам недоступна.", thePlayer, 255, 0, 0)
		end
	end
end

function onAdminCheckDonate( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") >= 5) then
			if(id ~= nil) then
				if(toch(id) ~= nil) then
					id = toch(id)
					if(IDS[id] ~= nil) then
						local secPlayer = IDS[id]
						if(getElementData(secPlayer, "Login") == true) then
							local accid = getElementData(secPlayer, "AccID")
							local query = dbQuery(mysql, "SELECT SUM(`payersum`) FROM `donatelogs` WHERE `account` = ?", accid)
							local result = dbPoll(query, -1)
							if(result ~= false) then
								sendClientMessage(result[1]["SUM(`payersum`)"], thePlayer, 255, 255, 0)
							else
								sendClientMessage("Данный игрок не донатил", thePlayer, 255, 255, 0)
							end
						else
							addBox("Данный игрок не найден", thePlayer, 255, 0, 0)
						end
					else
						addBox("Данный игрок не найден", thePlayer, 255, 0, 0)
					end
				else
					addBox("/getdonate [id]", thePlayer, 255, 0, 0)
				end
			else
				addBox("/getdonate [id]", thePlayer, 255, 0, 0)
			end
		end
	end
end

function maybecheat( arg1 )
	if(client == arg1) then
		if(getElementData(client, "Admin") == 0) then
			if(getPlayerPing(client) < 200) then
				for i,n in pairs(IDS) do
					if(getElementData(n, "Login") == true) then
						if(getElementData(n, "Admin") > 0) then
							sendClientMessage(getElementData(client, "Name") .. " [" .. getElementData(client, "ID") .. "] подозревается в кар тп.", n, 255, 60, 0)
						end
					end
				end
			end
		end
	end
end

function maybetp( arg1 )
	if(client == arg1) then
		if(getElementData(client, "ByAdmin") == false) then
			if(getElementData(client, "ABB") == false) then
				if(getElementData(client, "Admin") < 1) then
					for i,n in pairs(IDS) do
						if(getElementData(n, "Login") == true) then
							if(getElementData(n, "Admin") > 0) then
								sendClientMessage(getElementData(client, "Name") .. " [" .. getElementData(client, "ID") .. "] подозревается в обычном телепорте/ускорении.", n, 255, 60, 0)
							end
						end
					end
				end
			end
		end
	end
end

function fakefish( arg1 )
	if(arg1 == client) then
		kickPlayer(client, "fishing")
	end
end

function onAdminCreatePromo( thePlayer, command, promo, summ, exp)
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") == 6) then
			if(promo ~= nil) then
				if(summ ~= nil) then
					if(exp ~= nil) then
						if(toch(summ) ~= nil) then
							if(toch(exp) ~= nil) then
								summ = toch(summ)
								if(summ > 0) then
									exp = toch(exp)
									if(exp >= 4) then
										for i,n in pairs(PromoTable) do
											if(n["Name"] == promo) then
												addBox("Данный промокод уже существует.", thePlayer, 255, 0, 0)
												return
											end
										end
										local query = dbQuery(mysql, "SELECT `ID` from `pnames` ORDER BY `ID` DESC")
										local result = dbPoll(query, -1)
										local id = 0
										if(result ~= nil) then
											if(result[1] ~= nil) then
												id = result[1]["ID"] + 1
											else
												id = 1
											end
										else
											id = 1
										end
										PromoTable[id] 				= {}
										PromoTable[id]["Name"]		= promo
										PromoTable[id]["Value"]		= summ
										PromoTable[id]["Exp"]		= exp
										PromoTable[id]["Toggle"]	= 1
										local date = getRealTime()
										PromoTable[id]["Day"] = date.monthday
										PromoTable[id]["Month"] = date.month + 1
										PromoTable[id]["Year"] = date.year + 1900
										PromoTable[id]["Activations"] = 0
										dbExec(mysql, "INSERT into `pnames` (`ID`, `Name`, `Value`, `Exp`, `Day`, `Month`, `Year`) VALUES (?, ?, ?, ?, ?, ?, ?)", id, promo, summ, exp, date.monthday, date.month+1, date.year + 1900)
										addBox("Вы успешно добавили промокод:\n\"" .. promo .. "\", " .. summ .. "$, " .. exp .. " EXP.", thePlayer, 0, 60, 255)
									else
										addBox("Ошибка: /createpromo [promo] [summ] [exp 4+]", thePlayer, 255, 0, 0)
									end
								else
									addBox("Ошибка: /createpromo [promo] [summ] [exp 4+]", thePlayer, 255, 0, 0)
								end
							else
								addBox("Ошибка: /createpromo [promo] [summ] [exp 4+]", thePlayer, 255, 0, 0)
							end
						else
							addBox("Ошибка: /createpromo [promo] [summ] [exp 4+]", thePlayer, 255, 0, 0)
						end
					else
						addBox("Ошибка: /createpromo [promo] [summ] [exp 4+]", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: /createpromo [promo] [summ] [exp 4+]", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: /createpromo [promo] [summ] [exp 4+]", thePlayer, 255, 0, 0)
			end
		end
	end
end

function onAdminJban( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") == 6) then
			if(id ~= nil) then
				if(toch(id) ~= nil) then
					id = toch(id)
					if(IDS[id] ~= nil) then
						local secPlayer = IDS[id]
						if(getElementData(secPlayer, "Login") == true) then
							local serial = getPlayerSerial(secPlayer)
							local query = dbQuery(mysql, "SELECT COUNT(*) FROM `ironban`")
							local result = dbPoll(query, -1)
							local id = 0
							if(result ~= nil) then
								if(result[1] ~= nil) then
									id = result[1]["COUNT(*)"]
								else
									id = 0
								end
							else
								id = 0
							end
							for i,n in pairs(IDS) do
								sendClientMessage("Администратор " .. getElementData(thePlayer, "Name") .. " заблокировал " .. getElementData(secPlayer, "Name") .. " [" .. getElementData(secPlayer, "ID") .. "] по железу.", n, 255, 30, 0)
							end
							dbExec(mysql, "INSERT into `IronBan` (`ID`, `Serial`, `AccID`, `Name`) values (?, ?, ?, ?)", id, serial, getElementData(secPlayer, "AccID"), getElementData(secPlayer, "Name"))
							local id = toch(getElementData(secPlayer, "ID"))
							local house = getElementData(secPlayer, "HouseTable")
							if(house ~= false) then
								if(house > 0) then
									dbExec(mysql, "UPDATE `Accounts` set `House` = ? WHERE `Name` = ?", 0, getElementData(secPlayer, "Name"))
									dbExec(mysql, "UPDATE `House` SET `PID` = ?, `PName` = '', `Car1` = 0, `Car2` = 0, `Car3` = 0, `Car4` = 0 WHERE `ID` = ?", 0, house)
									HouseTable[house]["PName"] = ""
									HouseTable[house]["PID"] = 0
									HouseTable[house]["OwnerPlayer"] = nil
									destroyElement(HouseTable[house]["Pickup"])
									destroyElement(HouseTable[house]["Blip"])
									HouseTable[house]["Pickup"] = createPickup(HouseTable[house]["x"], HouseTable[house]["y"], HouseTable[house]["z"], 3, 1273, 0)
									HouseTable[house]["Blip"] = createBlip(HouseTable[house]["x"], HouseTable[house]["y"], HouseTable[house]["z"], 31, 2, 0, 0, 0, 0, 0, 250)
									SED(HouseTable[house]["Pickup"], "ID", house)
									SED(secPlayer, "House", 0)
								end
							end
							if(PrivateCar[id] ~= nil) then
								local veh = PrivateCar[id]
								local vehid = getElementData(veh, "ID")
								VehicleTable[vehid] = nil
								destroyElement(veh)
							end
							kickPlayer(secPlayer, "IronBan")
						else
							addBox("Данный игрок не авторизован.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Данный игрок не найден.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: /jban [id]", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: /jban [id]", thePlayer, 255, 0, 0)
			end
		else
			addBox("Ошибка: /jban [id]", thePlayer, 255, 0, 0)
		end
	end
end

function onCheckId( arg1, arg2 )
	if(arg1 == client) then
		if(getElementData(arg1, "Admin") >= 3) then
			sendClientMessage("ID " .. getElementData(arg2, "ID") .. " авто.", arg1, 0, 255, 60)
		end
	end
end

function onAdminVResp( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") >= 3) then
			if(id ~= nil) then
				if(toch(id) ~= nil) then
					id = toch(id)
					if(VehicleTable[id] ~= nil) then
						id = toch(id)
						customSpawnVehicle(VehicleTable[id]["Vehicle"])
						addBox("Вы успешно зареспавнили " .. id .. " авто!", thePlayer, 0, 255, 60)
					else
						addBox("Ошибка: Данное авто не найдено.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: /vresp [id]", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: /vresp [id]", thePlayer, 255, 0, 0)
			end
		end
	end
end

function onAdminCheckAllPromos( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") == 6) then
			local str = "Промокод\tДеньги\tОпыт\tСостояние\tКоличество активаций\tДата создания"
			for i,n in pairs(PromoTable) do
				str = str .. "\n" .. n["Name"] .. "\t".. n["Value"] .. "\t" .. n["Exp"] 
				if(n["Toggle"] == 0) then
					str = str .. "\t" .. "Выключен"
				else
					str = str .. "\t" .. "Включен"
				end
				str = str .. "\t" .. n["Activations"]
				local day = n["Day"]
				if(day < 10) then
					day = "0" .. day
				end
				local month = n["Month"]
				if(month < 10) then
					month = "0" .. month
				end
				str = str .. "\t" .. day .. "." .. month .. "." .. n["Year"]
			end
			SED(thePlayer, "ptrt", PromoTable)
			showPlayerDialog(thePlayer, 125, 3, "Список активных промокодов", str, "Переключить", "Отмена")
		end
	end
end

function onPlayerCheckSkills( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true) then
		if(id ~= nil) then
			if(toch(id) ~= nil) then
				id = toch(id)
				if(IDS[id] ~= nil) then 
					local secPlayer = IDS[id]
					if(getElementData(secPlayer, "Login") == true) then
						local x, y, z = getElementPosition(secPlayer)
						local x1, y1, z1 = getElementPosition(thePlayer)
						local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
						if(dist < 6) then
							triggerClientEvent(secPlayer, "triggerSkills", secPlayer, getElementData(thePlayer, "SkillDeagle"), getElementData(thePlayer, "SkillShotgun"), getElementData(thePlayer, "SkillM4"), getElementData(thePlayer, "SkillAk47"))
							local str = getElementData(thePlayer, "Name") .. " [" .. getElementData(thePlayer, "ID") .. "] показывает навыки владения оружием " .. getElementData(secPlayer, "Name") .. " [" .. getElementData(secPlayer, "ID") .. "]."
							for i,n in pairs(IDS) do
								if(getElementData(n, "Login") == true) then
									msgforcamera(str, n, 232, 183, 227, x1, y1, z1)
								end
							end
						else
							addBox("Данный игрок слишком далеко.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Данный игрок не авторизован.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Данный игрок не найден.", thePlayer, 255, 0, 0)
				end
			else
				addBox("/skills [id]", thePlayer, 255, 0, 0)
			end
		else
			local str = getElementData(thePlayer, "Name") .. " [" .. getElementData(thePlayer, "ID") .. "] изучает свои навыки владения оружием."
			local x, y, z = getElementPosition(thePlayer)
			for i,n in pairs(IDS) do
				if(getElementData(n, "Login") == true) then
					msgforcamera(str, n, 232, 183, 227, x, y, z)
				end
			end
			triggerClientEvent(thePlayer, "triggerSkills", thePlayer, getElementData(thePlayer, "SkillDeagle"), getElementData(thePlayer, "SkillShotgun"), getElementData(thePlayer, "SkillM4"), getElementData(thePlayer, "SkillAk47"))
		end
	end
end

function onVehicleDamage( )
	if(getElementHealth(source) < 300) then
		local x, y, z = getElementRotation(source)
		setElementHealth(source, 300)
		SED(source, "Engine", false)
		setVehicleEngineState(source, false)
	end
end

function onPlayerTryRepair( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Remko") == true) then
			local veh = 0
			local x, y, z = getElementPosition(thePlayer)
			local maxdist = 50000
			for i,n in pairs(getElementsByType("vehicle")) do
				local x1, y1, z1 = getElementPosition(n)
				local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
				if(dist < 5) then
					veh = n
					addBox("Вы воспользовались рем. комплектом.", thePlayer, 0, 60, 255)
					removeElementData(thePlayer, "Remko")
					break
				end
			end
			if(veh ~= 0) then
				fixVehicle(veh)
			else
				addBox("Поблизости нет ни одного авто.", thePlayer, 255, 0, 0)
			end
		else
			addBox("У Вас нет комплекта для починки авто.", thePlayer, 255, 0, 0)
		end
	end
end

function onAdminCheckTvink( thePlayer, command, id )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") == 6) then
			if(id ~= nil) then
				if(toch(id) ~= nil) then
					id = toch(id)
					if(IDS[id] ~= nil) then
						local secPlayer = IDS[id]
						if(getElementData(secPlayer, "Login") == true) then
							local secname = getElementData(secPlayer, "Name")
							local query = dbQuery(mysql, "SELECT `Serial` FROM `Accounts` WHERE `Name` = ? and `ID` = ?", secname, getElementData(secPlayer, "AccID"))
							local result = dbPoll(query, -1)
							dbFree(query)
							local query = dbQuery(mysql, "SELECT `Name`, `ID` FROM `Accounts` WHERE `Serial` = ?", result[1]["Serial"])
							local result = dbPoll(query, -1)
							dbFree(query)
							local str = "Имя\tID аккаунта"
							for i,n in pairs(result) do
								str = str .. "\n" .. n["Name"] .. "\t" .. n["ID"]
							end

							showPlayerDialog(thePlayer, 64000, 3, "Аккаунты игрока", str, "Ок", "Отмена")
						else
							addBox("Данный игрок не авторизован.", thePlayer, 255, 0, 0)
						end
					else
						addBox("Данный игрок не найден.", thePlayer, 255, 0, 0)
					end
				else
					addBox("Ошибка: /tvink [id]", thePlayer, 255, 0, 0)
				end
			else
				addBox("Ошибка: /tvink [id]", thePlayer, 255, 0, 0)
			end
		end
	end
end

function onAdminCheckReports( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			local str = "ID жалобы\tИмя\tТекст"
			local iter = 0
			for i,n in pairs(ServerPerem["Reports"]) do
				iter = iter + 1
				str = str .. "\n" .. i .. "\t" .. n["Name"] .. "\t" .. n["Text"]
			end
			if(iter > 0) then
				showPlayerDialog(thePlayer, 64000, 3, "Список репортов", str, "Ок", "Отмена")
			else
				showPlayerDialog(thePlayer, 64000, 3, "Список репортов", "Репорт\tИмя\tid\nРепортов\t \tНет", "Ок", "Отмена")
			end
		end
	end
end

function checkqwf( arg1 )
	if(arg1 == client) then
		checkqw(client, 5)
	end
end

function onResourceStart( res )
	if(getThisResource() == res) then
		local res = getResourceFromName("browser")
		startResource(res)
		res = getResourceFromName("loaderWork")
		startResource(res)
		res = getResourceFromName("fishWork")
		startResource(res)
		res = getResourceFromName("carSystem")
		startResource(res)
		res = getResourceFromName("text3d")
		startResource(res)
		res = getResourceFromName("dialog")
		startResource(res)
		res = getResourceFromName("freeEat")
		startResource(res)
		res = getResourceFromName("voiceChat")
		startResource(res)
		res = getResourceFromName("svt")
		startResource(res)
		res = getResourceFromName("zavod")
		startResource(res)
	end
end

function onResourceStop( res )
	if(getThisResource() == res) then
		local res = getResourceFromName("browser")
		stopResource(res)
		res = getResourceFromName("loaderWork")
		stopResource(res)
		res = getResourceFromName("fishWork")
		stopResource(res)
		res = getResourceFromName("carSystem")
		stopResource(res)
		--res = getResourceFromName("boatBuy")
		--stopResource(res)
		res = getResourceFromName("text3d")
		stopResource(res)
		res = getResourceFromName("dialog")
		stopResource(res)
		res = getResourceFromName("freeEat")
		stopResource(res)
		res = getResourceFromName("voiceChat")
		stopResource(res)
		res = getResourceFromName("svt")
		stopResource(res)
		res = getResourceFromName("zavod")
		stopResource(res)
	else
		for i,n in pairs(text3dTable) do
			if(n["Resource"] == res) then
				edit3dtext(n["ID"], "")
			end
		end
	end
end

function setBusinessMoney( id, summ )
	if(BusinessTable[id] ~= nil) then
		if(summ > 0) then
			BusinessTable[id]["Money"] = BusinessTable[id]["Money"] + summ
			BusinessTable[id]["Finstat1"] = BusinessTable[id]["Finstat1"] + summ
			dbExec(mysql, "UPDATE `Business` SET `Money` = ?, `Finstat1` = ? WHERE `ID` = ?", BusinessTable[id]["Money"], BusinessTable[id]["Finstat1"], id)
		else
			outputServerLog("[BUG] Business summ 0 or less.")
		end
	else
		outputServerLog("[BUG] No business selected.")
	end
end

function onPlayerCheckFinStat( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "BusOwnID") > 0) then
			local str = "id\tДата\tСумма"
			local biz = toch(getElementData(thePlayer, "BusOwnID"))
			for i=1,7 do
				if(BusinessTable[biz]["Date" .. i] ~= false) then
					if(string.len(BusinessTable[biz]["Date" .. i]) > 0) then
						str = str .. "\n" .. i .. "\t" .. BusinessTable[biz]["Date" .. i]  .. "\t" .. BusinessTable[biz]["Finstat" .. i]
					else
						break
					end
				else
					break
				end
			end
			showPlayerDialog(thePlayer, 64000, 3, "Финансовая статистика бизнеса", str, "Ок", "Отмена")
		else
			addBox("У Вас нет бизнеса.", thePlayer, 255, 0, 0)
		end
	end
end

addCommandHandler("bizfp",		onPlayerCheckFinStat)
addCommandHandler("reports",	onAdminCheckReports)
addCommandHandler("tvink",		onAdminCheckTvink)
addCommandHandler("repair",		onPlayerTryRepair)
addCommandHandler("skills",		onPlayerCheckSkills)
addCommandHandler("allpromo",	onAdminCheckAllPromos)
addCommandHandler("vresp",		onAdminVResp)
addCommandHandler("jban",		onAdminJban)
addCommandHandler("createpromo",onAdminCreatePromo)
addCommandHandler("getdonate",	onAdminCheckDonate)
addCommandHandler("frisk",		onPoliceFrisk)
addCommandHandler("ticket",		onPoliceTicket)
addCommandHandler("uncuff",		onPoliceUncuff)
addCommandHandler("getserial", onAdminGetSerial)
addEventHandler("maybecheat", root, maybecheat)
addEvent("checkqwf", true)
addEventHandler("checkqwf", root, checkqwf)
addEvent("onCheckId", true)
addEventHandler("onCheckId", root, onCheckId)
addEvent("maybetp", true)
addEventHandler("maybetp", root, maybetp)
addEvent("onTryPayBiz", true)
addEventHandler("onTryPayBiz", root, onTryPayBiz)
addEvent("onTryPayPhone", true)
addEventHandler("onTryPayPhone", root, onTryPayPhone)
addCommandHandler("cuff", 		onPoliceCuff)
addCommandHandler("openw",		onLeaderOpenW)
addCommandHandler("getmoney",	onLeaderGetMoney)
addCommandHandler("putmoney",	onPlayerPutMoney)
addCommandHandler("getdrugs",	onPlayerGetDrugs)
addCommandHandler("putdrugs",	onPlayerPutDrugs)
addCommandHandler("svalka",		onPlayerTpSvalka)
addCommandHandler("rfracveh",	onPlayerRefreshCars)
addCommandHandler("usk", onToggleUsk)
addEvent("onTryPayHouse", true)
addEventHandler("onTryPayHouse", root, onTryPayHouse)
addEvent("onTryTrans", true)
addEventHandler("onTryTrans", root, onTryTrans)
addEvent("onTryEnterMoney", true)
addEventHandler("onTryEnterMoney", root, onTryEnterMoney)
addEvent("onTryGetMoney", true)
addEventHandler("onTryGetMoney", root, onTryGetMoney)
addEvent("onTriggerCapt", true)
addEventHandler("onTriggerCapt", root, onTriggerCapt)
addEvent("TryEndWork", true)
addEventHandler("TryEndWork", root, endPlayerWork)
addEvent("AnimFromClient", true)
addEventHandler("AnimFromClient", root, AnimFromClient)
addEvent("onPlayerTryPromo", true)
addEventHandler("onPlayerTryPromo", root, onPlayerTryPromo)
addEventHandler("onResourceStop", root, onResourceStop)
addEventHandler("onResourceStop", resourceRoot, modeStop)
addCommandHandler("seteat", onAdminSetEat)
addCommandHandler("unjail", onAdminUnJail)
addCommandHandler("jail", onAdminJail)
addCommandHandler("setspawn", onPlayerSetSpawn)
addCommandHandler("hpay", onPlayerHPay)
addEventHandler("onMarkerHit", mrkNrk,	hitMrkNrk)
addEventHandler("onMarkerHit", mrkSkinShop,	hitSkinShop)
addEventHandler("onMarkerHit", mrkWeaponMaf[1], hitWeapMaf1)
addEventHandler("onMarkerHit", mrkWeaponMaf[2], hitWeapMaf2)
addEventHandler("onMarkerHit", mrkWeaponMaf[3], hitWeapMaf3)
addEventHandler("onMarkerHit", mrkWeaponMaf[4], hitWeapMaf4)
addEventHandler("onMarkerHit", mrkWeaponArmy, hitWeaponArmy)
addEventHandler("onMarkerLeave", mrkWeaponArmy, leaveWeaponArmy)
addEvent("fakefish", true)
addEventHandler("fakefish", root, fakefish)
addEvent("onPlayerBuySub", true) 
addEventHandler("onPlayerBuySub", root, onPlayerBuySub)
addEvent("onPlayerDonateSkills", true)
addEventHandler("onPlayerDonateSkills", root, onPlayerDonateSkills)
addEvent("onPlayerDonateUnwarn", true)
addEventHandler("onPlayerDonateUnwarn", root, onPlayerDonateUnwarn)
addEvent("onPlayerBuyLicense", true)
addEventHandler("onPlayerBuyLicense", root, onPlayerBuyLicense)
addEvent("onPlayersChangeNick", true)
addEventHandler("onPlayersChangeNick", root, onPlayersChangeNick)
addEvent("onPlayerDonateServerTrade", true)
addEventHandler("onPlayerDonateServerTrade", root, onPlayerDonateServerTrade)
addEvent("onPlayerReportFromMenu", true)
addEventHandler("onPlayerReportFromMenu", root, onPlayerReportFromMenu)
addEvent("onClientTryBuyCar", true) 
addEventHandler("onClientTryBuyCar", root, onClientTryBuyCar)
addEvent("onClientTryBuySkin", true)
addEventHandler("onClientTryBuySkin", root, onClientTryBuySkin)
addEvent("onClientFished", true)
addEventHandler("onClientFished", root, onClientFished)
addEvent("onPlayerUpSkill", true)
addEventHandler("onPlayerUpSkill", root, onPlayerUpSkill)
addEvent("AdminTriggerDamage", true)
addEventHandler("AdminTriggerDamage", root, onPlayerTriggerAdminDamage)
addEvent("BuilderEndGruz", true)
addEventHandler("BuilderEndGruz", root, BuilderEndGruz)
addEvent("ClearBuilderGruz", true)
addEventHandler("ClearBuilderGruz", root, ClearBuilderGruz)
addEvent("BuilderZP", true)
addEventHandler("BuilderZP", root, BuilderZp)
addEvent("Avtorizovalsya", true)
addEventHandler("Avtorizovalsya", root, Avtorizovalsya)
addEvent("Regaru", true)
addEventHandler("Regaru", root, Regaru)
addEvent("sendClientMessage", true)
addEventHandler("sendClientMessage", root, sendClientMessage)
addEvent("mrkBuildStart", true)
addEventHandler ( "onResourceStart", getRootElement(), onResourceStart )
addEventHandler("mrkBuildStart", root, mrkBuildStart)
addEventHandler("onPlayerCommand", root, onPlayerCommand)
addEventHandler("onChooseSpawn", root, chooseSpawn)
addEventHandler ( "onPlayerQuit", root, onPlayerDisconnect )
addEventHandler("onPlayerPickupHit", root, pickupPickUp)
addEventHandler("OnStartWorkingLoader", root, StartWorkingLoader)
addEventHandler("OnEndWorkingLoader", root, EndWorkingLoader)
addEventHandler("OnLoaderEnd", root, LoaderEnd)
addEventHandler("OnLoaderStart", root, LoaderStart)
addEventHandler("onPlayerVehicleEnter", root, havelic)
addEventHandler("onVehicleStartEnter", root, clearEnter)
addEventHandler("onPlayerChat", root, playerInChat)
addEventHandler("onCourierWorkStart", root, startCourierWork)
addEventHandler("onVehicleExplode", root, onVehicleDeath )
addEventHandler("onVehicleDamage", root, onVehicleDamage)
addEventHandler("onCourierOrderEnd", root, onCourierOrderEnd)
addEventHandler("onResourceStart", root, updateTime)
addEventHandler("onDialogResponse", root, onDialogResponse)
addEventHandler("onPlayerJoin", getRootElement(), onPlayerConnect)
addEventHandler( "onPlayerWasted", root, onPlayerDeath)
addEventHandler("onClientLoginStart", root, onClientLoginStart)
addEventHandler("onMarkerHit", mrkWorkMer, onWorkMer)
addEventHandler("onMarkerHit", mrkAsh, hitMrkAsh)
addEventHandler("onVehicleExit", root, onPlayerExitVehicle)
addEventHandler("onMarkerHit", mrkBuyCar, hitBuyCar)
setFPSLimit(60)

function setPlayerCamHackEnabled( thePlayer, state )
	return triggerClientEvent( thePlayer,"onClientEnableCamMode", root, state )
end

function setPlayerCamHackDisabled( thePlayer )
	return triggerClientEvent( thePlayer,"onClientDisableCamMode", root )
end

addEventHandler( "onResourceStop", resourceRoot, 
	function( )
		for i,thePlayer in pairs( getElementsByType( "player" ) ) do
			if getElementData( thePlayer, "isPlayerInCamHackMode" ) then 
				setElementAlpha( thePlayer, 255 )
				setElementFrozen( thePlayer, false ) 
				setElementCollisionsEnabled( thePlayer, true ) 	
			end
		end
	end
)

addCommandHandler( "camhack", 
	function( thePlayer )
		if(getElementData(thePlayer, "Login") == true) then
			if(getElementData(thePlayer, "Admin") > 3) then
				if isPedInVehicle( thePlayer ) then
					if getVehicleOccupant( getPedOccupiedVehicle( thePlayer ) ) ~= thePlayer then
						if getElementData( thePlayer, "isPlayerInCamHackMode" ) then 
							setElementAlpha( thePlayer, 255 )
							setPlayerCamHackDisabled( thePlayer )
						else
							setElementAlpha( thePlayer, 0 )
							setPlayerCamHackEnabled( thePlayer, false )
						end
					end
				else
					if getElementData( thePlayer, "isPlayerInCamHackMode" ) then 
						setElementAlpha( thePlayer, 255 )
						setPlayerCamHackDisabled( thePlayer )
						setElementFrozen( thePlayer, false ) 
						setElementCollisionsEnabled( thePlayer, true ) 		
					else
						setElementAlpha( thePlayer, 0 )
						setPlayerCamHackEnabled( thePlayer, true )
						setElementFrozen( thePlayer, true ) 
						setElementCollisionsEnabled( thePlayer, false ) 			
					end
				end
			end
		end
	end
)

function onPlayerPutPoliceSkl( hit, dim )
	if(getElementType(hit) == "player") then
		if(getElementData(hit, "Login") == true) then
			if(getPedOccupiedVehicle(hit) == false) then
				if(getElementData(hit, "Faction") == 9) then
					if(getElementData(hit, "ArmMat") == true) then
						if(Server["PoliceGruz"] + 25 <= 100000) then
							local obj = getElementData(hit, "ArmMatObj")
							if(obj ~= false) then
								if(isElement(obj) == true) then
									exports.bone:detachElementFromBone(obj)
									destroyElement(obj)
								end
								removeElementData(hit, "ArmMatObj")
							end
							removeElementData(hit, "ArmMat")
							setPedAnimation(hit, "BSKTBALL", "BBALL_idle_O", 1, false)
							toggleControl(hit, "enter_exit", true)
							toggleControl(hit, "fire", true)
							toggleControl(hit, "jump", true)
							toggleControl(hit, "enter_passenger", true)
							toggleControl(hit, "next_weapon", true)
							toggleControl(hit, "previous_weapon", true)
							toggleControl(hit, "aim_weapon", true)
							toggleControl(hit, "sprint", true)
							toggleControl(hit, "crouch", true)
							addBox("Вы пополнили склад VCPD.", hit, 0, 255, 60)
							Server["PoliceGruz"] = Server["PoliceGruz"] + 25
							dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = ?", Server["PoliceGruz"], "PoliceGruz")
						else
							addBox("Склад переполнен.", hit, 255, 0, 0)
						end
					else
						addBox("У Вас нет с собой материалов.", hit, 255, 0, 0)
					end
				else
					addBox("У Вас нет доступа.", hit, 255, 0, 0)
				end
			end
		end
	end
end

function onPlayerPutHospitalSkl( hit, dim )
	if(getElementType(hit) == "player") then
		if(getElementData(hit, "Login") == true) then
			if(getPedOccupiedVehicle(hit) == false) then
				if(getElementData(hit, "Faction") == 9) then
					if(getElementData(hit, "ArmMat") == true) then
						if(Server["HospitalGruz"] + 25 <= 100000) then
							local obj = getElementData(hit, "ArmMatObj")
							if(obj ~= false) then
								if(isElement(obj) == true) then
									exports.bone:detachElementFromBone(obj)
									destroyElement(obj)
								end
								removeElementData(hit, "ArmMatObj")
							end
							removeElementData(hit, "ArmMat")
							setPedAnimation(hit, "BSKTBALL", "BBALL_idle_O", 1, false)
							toggleControl(hit, "enter_exit", true)
							toggleControl(hit, "fire", true)
							toggleControl(hit, "jump", true)
							toggleControl(hit, "enter_passenger", true)
							toggleControl(hit, "next_weapon", true)
							toggleControl(hit, "previous_weapon", true)
							toggleControl(hit, "aim_weapon", true)
							toggleControl(hit, "sprint", true)
							toggleControl(hit, "crouch", true)
							addBox("Вы пополнили склад EMS.", hit, 0, 255, 60)
							Server["HospitalGruz"] = Server["HospitalGruz"] + 25
							dbExec(mysql, "UPDATE `Server` SET `Integ` = ? WHERE `Name` = ?", Server["HospitalGruz"], "HospitalGruz")
						else
							addBox("Склад переполнен.", hit, 255, 0, 0)
						end
					else
						addBox("У Вас нет с собой материалов.", hit, 255, 0, 0)
					end
				else
					addBox("У Вас нет доступа.", hit, 255, 0, 0)
				end
			end
		end
	end
end

function tpHospital( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") > 0) then
			local veh = getPedOccupiedVehicle(thePlayer)
			if(veh == false) then
				SEP(thePlayer, -196.794921875, -959.9755859375, 10.423469543457)
			else
				SEP(veh, -196.794921875, -959.9755859375, 10.423469543457)
			end
		end
	end
end

function setHandling( thePlayer, commands, perem, ... )
	if(getElementData(thePlayer, "Login") == true) then
		if(getElementData(thePlayer, "Admin") == 6) then
			local arg = {...}
			local veh = getPedOccupiedVehicle(thePlayer)
			if(veh ~= false) then
				if(perem == "centerOfMass") then
					if(#arg > 2) then
						local tablo = {[1] = arg[1], [2] = arg[2], [3] = arg[3]}
						setVehicleHandling(veh, perem, tablo)
						sendClientMessage("установлено", thePlayer, 255, 255, 255)
						local query = dbQuery(mysql, "SELECT COUNT(*) FROM `HModel` WHERE `ID` = ? and `Property` = 'com1'", getElementModel(veh), perem)
						local result = dbPoll(query, -1)
						if(result[1]["COUNT(*)"] > 0) then
							dbExec(mysql, "UPDATE `HModel` set `Value` = ? WHERE `Property` = 'com1' AND `ID` = ?", arg[1], getElementModel(veh))
							dbExec(mysql, "UPDATE `HModel` set `Value` = ? WHERE `Property` = 'com2' AND `ID` = ?", arg[2], getElementModel(veh))
							dbExec(mysql, "UPDATE `HModel` set `Value` = ? WHERE `Property` = 'com3' AND `ID` = ?", arg[3], getElementModel(veh))
						else
							dbExec(mysql, "INSERT INTO `HModel` (`ID`, `Property`, `Value`) VALUES (?, 'com1', ?)", getElementModel(veh), arg[1])
							dbExec(mysql, "INSERT INTO `HModel` (`ID`, `Property`, `Value`) VALUES (?, 'com2', ?)", getElementModel(veh), arg[2])
							dbExec(mysql, "INSERT INTO `HModel` (`ID`, `Property`, `Value`) VALUES (?, 'com3', ?)", getElementModel(veh), arg[3])
						end
					else
						sendClientMessage("Введите все 3 значения.", thePlayer, 255, 255, 0)
					end
				elseif(perem == "modelFlags") then
					if(#arg == 0) then
						local tablo = getModelHandling(getElementModel(veh))
						local str = string.format("%x", tablo["modelFlags"])
					elseif(#arg == 1) then
						local tablo = getModelHandling(getElementModel(veh))
						setModelHandling(getElementModel(veh), perem, toch("0x" .. arg[1]))
						for i,n in pairs(getElementsByType("vehicle")) do
							if(getElementModel(n) == getElementModel(veh)) then
								setVehicleHandling(n, perem, toch("0x" .. arg[1]))
							end
						end
						local str = string.format("%x", tablo["modelFlags"])
						local query = dbQuery(mysql, "SELECT COUNT(*) FROM `HModel` WHERE `ID` = ? and `Property` = ?", getElementModel(veh), perem)
						local result = dbPoll(query, -1)
						if(result[1]["COUNT(*)"] > 0) then
							dbExec(mysql, "UPDATE `HModel` set `Value` = ? WHERE `Property` = ? AND `ID` = ?", arg[1], perem, getElementModel(veh))
						else
							dbExec(mysql, "INSERT INTO `HModel` (`ID`, `Property`, `Value`) VALUES (?, ?, ?)", getElementModel(veh), perem, arg[1])
						end
					else
						sendClientMessage("Всего должно быть написано не более 2 значений.", thePlayer, 255, 0, 0)
					end
				elseif(perem == "handlingFlags") then
					if(#arg == 0) then
						local tablo = getModelHandling(getElementModel(veh))
						local str = string.format("%x", tablo["handlingFlags"])
					elseif(#arg == 1) then
						local tablo = getModelHandling(getElementModel(veh))
						setModelHandling(getElementModel(veh), perem, toch("0x" .. arg[1]))
						for i,n in pairs(getElementsByType("vehicle")) do
							if(getElementModel(n) == getElementModel(veh)) then
								setVehicleHandling(n, perem, toch("0x" .. arg[1]))
							end
						end
						local str = string.format("%x", tablo["handlingFlags"])
						local query = dbQuery(mysql, "SELECT COUNT(*) FROM `HModel` WHERE `ID` = ? and `Property` = ?", getElementModel(veh), perem)
						local result = dbPoll(query, -1)
						if(result[1]["COUNT(*)"] > 0) then
							dbExec(mysql, "UPDATE `HModel` set `Value` = ? WHERE `Property` = ? AND `ID` = ?", arg[1], perem, getElementModel(veh))
						else
							dbExec(mysql, "INSERT INTO `HModel` (`ID`, `Property`, `Value`) VALUES (?, ?, ?)", getElementModel(veh), perem, arg[1])
						end
					else
						sendClientMessage("Всего должно быть написано не более 2 значений.", thePlayer, 255, 0, 0)
					end
				else
					setVehicleHandling(veh, perem, arg[1])
					sendClientMessage("установлено", thePlayer, 255, 255, 255)
					local query = dbQuery(mysql, "SELECT COUNT(*) FROM `HModel` WHERE `ID` = ? and `Property` = ?", getElementModel(veh), perem)
					local result = dbPoll(query, -1)
					if(result[1]["COUNT(*)"] > 0) then
						dbExec(mysql, "UPDATE `HModel` set `Value` = ? WHERE `Property` = ? AND `ID` = ?", arg[1], perem, getElementModel(veh))
					else
						dbExec(mysql, "INSERT INTO `HModel` (`ID`, `Property`, `Value`) VALUES (?, ?, ?)", getElementModel(veh), perem, arg[1])
					end
				end
			end
		end
	end
end
addEventHandler("etoPizdec3", root, etoPizdec3)
addEventHandler("etoPizdec2", root, etoPizdec2)
addCommandHandler("h", 				setHandling)
addCommandHandler("hospital",		tpHospital)
addEventHandler("onMarkerHit", mrkchello, onMrkArmyGruzchikHit)
create3dtextlabel(-662.0888671875, -1414.3330078125, 12.16068649292, "ЗАГРУЗКА БОЕПРИПАСОВ АРМИИ")
create3dtextlabel(-1646.451171875, -267.474609375, 14.827548980713, "ВЫГРУЗКА БОЕПРИПАСОВ АРМИИ")
addEventHandler("onMarkerHit", mrkArmySkl, onPlayerPutMaterialArmy)

create3dtextlabel(463.96875, -52.833984375, 16.053549194336, "Название стола: Золотая антилопа")
create3dtextlabel(463.96875, -52.833984375, 15.853549194336, "Игра: Бешеная лошадь")
create3dtextlabel(463.96875, -52.833984375, 15.666376113892, "Ставка: 100.000$")
create3dtextlabel(463.96875, -52.833984375, 15.466376113892, "Поставить ставку: /horse")
ServerPerem["Stols"][5]["Label1"] 	= create3dtextlabel(463.96875, -52.833984375, 15.266376113892, "Участников: 0/8.")
ServerPerem["Stols"][5]["Label"] 	= create3dtextlabel(463.96875, -52.833984375, 15.066376113892, "Состояние: ожидание")

create3dtextlabel(479.59375, -80.6279296875, 12.213080024719, "Название стола: Королевский конь")
create3dtextlabel(479.59375, -80.6279296875, 12.013080024719, "Игра: Бешеная лошадь")
create3dtextlabel(479.59375, -80.6279296875, 11.813080024719, "Ставка: 50.000$")
create3dtextlabel(479.59375, -80.6279296875, 11.613080024719, "Поставить ставку: /horse")
ServerPerem["Stols"][4]["Label1"] 	= create3dtextlabel(479.59375, -80.6279296875, 11.413080024719, "Участников: 0/8.")
ServerPerem["Stols"][4]["Label"] 	= create3dtextlabel(479.59375, -80.6279296875, 11.213080024719, "Состояние: ожидание")

create3dtextlabel(462.08203125, -63.5634765625, 12.245568084717, "Название стола: Игривая лошадка")
create3dtextlabel(462.08203125, -63.5634765625, 12.045568084717, "Игра: Бешеная лошадь")
create3dtextlabel(462.08203125, -63.5634765625, 11.845568084717, "Ставка: 10.000$")
create3dtextlabel(462.08203125, -63.5634765625, 11.645568084717, "Поставить ставку: /horse")
ServerPerem["Stols"][3]["Label1"] 	= create3dtextlabel(462.08203125, -63.5634765625, 11.445568084717, "Участников: 0/8.")
ServerPerem["Stols"][3]["Label"]	= create3dtextlabel(462.08203125, -63.5634765625, 11.245568084717, "Состояние: ожидание")

create3dtextlabel(475.2001953125, -50.6650390625, 12.245568084717, "Название стола: Стальная подкова")
create3dtextlabel(475.2001953125, -50.6650390625, 12.05568084717, "Игра: Бешеная лошадь")
create3dtextlabel(475.2001953125, -50.6650390625, 11.845568084717, "Ставка: 5.000$")
create3dtextlabel(475.2001953125, -50.6650390625, 11.645568084717, "Поставить ставку: /horse")
ServerPerem["Stols"][2]["Label1"] 	= create3dtextlabel(475.2001953125, -50.6650390625, 11.445568084717, "Участников: 0/8.")
ServerPerem["Stols"][2]["Label"]	= create3dtextlabel(475.2001953125, -50.6650390625, 11.245568084717, "Состояние: ожидание")

create3dtextlabel(479.533203125, -51.037109375, 12.245568084717, "Название стола: Хромое копыто")
create3dtextlabel(479.533203125, -51.037109375, 12.045568084717, "Игра: Бешеная лошадь")
create3dtextlabel(479.533203125, -51.037109375, 11.845568084717, "Ставка: 1.000$")
create3dtextlabel(479.533203125, -51.037109375, 11.645568084717, "Поставить ставку: /horse")
ServerPerem["Stols"][1]["Label1"] 	= create3dtextlabel(479.533203125, -51.037109375, 11.445568084717, "Участников: 0/8.")
ServerPerem["Stols"][1]["Label"]	= create3dtextlabel(479.533203125, -51.037109375, 11.245568084717, "Состояние: ожидание")

create3dtextlabel(-177.2509765625, -983.19921875, 9.923469543457, "МЕСТО ПОГРУЗКИ EMS")
create3dtextlabel(-889.677734375, -701.314453125, 11.553549194336, "МЕСТО ПОГРУЗКИ VCPD")

addEventHandler("onMarkerHit", mrkPoliceSkl, onPlayerPutPoliceSkl)
addEventHandler("onMarkerHit", mrkHospitalSkl, onPlayerPutHospitalSkl)

function onPlayerTryHorse( thePlayer, command )
	if(getElementData(thePlayer, "Login") == true) then
		local x, y, z = getElementPosition(thePlayer)
		local tablo = 
		{
			[1]={["x"]=479.23828125,	["y"]=-50.9853515625,	["z"]=11.445568084717	},
			[2]={["x"]=474.4208984375,	["y"]=-51.2607421875,	["z"]=11.445568084717	},
			[3]={["x"]=462.2685546875,	["y"]=-63.4580078125,	["z"]=11.445568084717	},
			[4]={["x"]=479.4443359375,	["y"]=-80.107421875,	["z"]=11.445568084717	},
			[5]={["x"]=463.900390625,	["y"]=-52.900390625,	["z"]=15.666376113892	}
		}
		local stol = 0
		local maxdist = 500000
		for i,n in pairs(tablo) do
			local x1, y1, z1 = n["x"], n["y"], n["z"]
			local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
			if(dist < maxdist and dist < 4) then
				maxdist = dist
				stol = i
			end
		end
		if(stol > 0) then
			if(stol == 1) then
				if(ServerPerem["Stols"][stol]["Sost"] == 0 or ServerPerem["Stols"][stol]["Sost"] == 1) then
					if(table.getn(ServerPerem["Stols"][stol]["Players"]) < 8) then
						showPlayerDialog(thePlayer, 137, 1, "Ставки на лошадей.", "Действительно ли Вы хотите поставить ставку на лошадь?\nЦвет лошади за столом выбирается случайно.\nЕсли Вы поставите ставку, отменить её уже будет нельзя.\n \nНазвание стола: Хромое копыто.\nСумма ставки: 1.000$.\nВы получите 90% от всего стола!", "Согласен", "Отмена")
					else
						addBox("Все игроки уже набраны :(", thePlayer, 255, 0, 0)
					end
				else
					addBox("Игра уже началась :(", thePlayer, 255, 0, 0)
				end
			elseif(stol == 2) then
				if(ServerPerem["Stols"][stol]["Sost"] == 0 or ServerPerem["Stols"][stol]["Sost"] == 1) then
					if(table.getn(ServerPerem["Stols"][stol]["Players"]) < 8) then
						showPlayerDialog(thePlayer, 138, 1, "Ставки на лошадей.", "Действительно ли Вы хотите поставить ставку на лошадь?\nЦвет лошади за столом выбирается случайно.\nЕсли Вы поставите ставку, отменить её уже будет нельзя.\n \nНазвание стола: Стальная подкова.\nСумма ставки: 5.000$.\nВы получите 90% от всего стола!", "Согласен", "Отмена")
					else
						addBox("Все игроки уже набраны :(", thePlayer, 255, 0, 0)
					end
				else
					addBox("Игра уже началась :(", thePlayer, 255, 0, 0)
				end
			elseif(stol == 3) then
				if(ServerPerem["Stols"][stol]["Sost"] == 0 or ServerPerem["Stols"][stol]["Sost"] == 1) then
					if(table.getn(ServerPerem["Stols"][stol]["Players"]) < 8) then
						showPlayerDialog(thePlayer, 139, 1, "Ставки на лошадей.", "Действительно ли Вы хотите поставить ставку на лошадь?\nЦвет лошади за столом выбирается случайно.\nЕсли Вы поставите ставку, отменить её уже будет нельзя.\n \nНазвание стола: Стальная подкова.\nСумма ставки: 10.000$.\nВы получите 90% от всего стола!", "Согласен", "Отмена")
					else
						addBox("Все игроки уже набраны :(", thePlayer, 255, 0, 0)
					end
				else
					addBox("Игра уже началась :(", thePlayer, 255, 0, 0)
				end
			elseif(stol == 4) then
				if(ServerPerem["Stols"][stol]["Sost"] == 0 or ServerPerem["Stols"][stol]["Sost"] == 1) then
					if(table.getn(ServerPerem["Stols"][stol]["Players"]) < 8) then
						showPlayerDialog(thePlayer, 140, 1, "Ставки на лошадей.", "Действительно ли Вы хотите поставить ставку на лошадь?\nЦвет лошади за столом выбирается случайно.\nЕсли Вы поставите ставку, отменить её уже будет нельзя.\n \nНазвание стола: Королевский конь.\nСумма ставки: 50.000$.\nВы получите 90% от всего стола!", "Согласен", "Отмена")
					else
						addBox("Все игроки уже набраны :(", thePlayer, 255, 0, 0)
					end
				else
					addBox("Игра уже началась :(", thePlayer, 255, 0, 0)
				end
			elseif(stol == 5) then
				if(ServerPerem["Stols"][stol]["Sost"] == 0 or ServerPerem["Stols"][stol]["Sost"] == 1) then
					if(table.getn(ServerPerem["Stols"][stol]["Players"]) < 8) then
						showPlayerDialog(thePlayer, 141, 1, "Ставки на лошадей.", "Действительно ли Вы хотите поставить ставку на лошадь?\nЦвет лошади за столом выбирается случайно.\nЕсли Вы поставите ставку, отменить её уже будет нельзя.\n \nНазвание стола: Золотая антилопа.\nСумма ставки: 100.000$.\nВы получите 90% от всего стола!", "Согласен", "Отмена")
					else
						addBox("Все игроки уже набраны :(", thePlayer, 255, 0, 0)
					end
				else
					addBox("Игра уже началась :(", thePlayer, 255, 0, 0)
				end
			end
		else
			addBox("Вы слишком далеко от стола.", thePlayer, 255, 0, 0)
		end
	end
end

addCommandHandler("horse",	onPlayerTryHorse)
for i, n in pairs(BankomatsTable) do
	create3dtextlabel(n["x"], n["y"], n["z"], "Введите /bank, чтобы воспользоваться банкоматом.")
end

function mrkFuel( hit, dim )
	if(isElement(hit)) then
		if(getElementType(hit) == "vehicle") then
			local player = getVehicleOccupant(hit, 0)
			if(player ~= false) then
				local station = getElementData(source, "Station")
				if(BusinessTable[station]["Owner"] == 0) then
					if(getElementModel(hit) ~= 481) then
						local price = 15
						showPlayerDialog(player, 49, 2, "Заправка транспортного средства", "Введите количество литров\nКоторое Вы хотите заправить.\nЦена за литр: " .. price .. "$", "Заправить", "Отмена")
						SED(player, "Fstation", station)
						SED(hit, "Engine", false)
						setVehicleEngineState(hit, false)
					end
				else
					if(BusinessTable[station]["Open"] == nil or BusinessTable[station]["Open"] == true) then
						if(getElementModel(hit) ~= 481) then
							local price = BusinessTable[station]["P1"]
							showPlayerDialog(player, 49, 2, "Заправка транспортного средства", "Введите количество литров\nКоторое Вы хотите заправить.\nЦена за литр: " .. price .. "$", "Заправить", "Отмена")
							SED(player, "Fstation", station)
							SED(hit, "Engine", false)
							setVehicleEngineState(hit, false)
						end
					elseif(BusinessTable[station]["Open"] == false) then
						addBox("Данная заправка закрыта.", player, 255, 0, 0)
					end
				end
			end
		end
	end
end

function onMrkColorVeh( hit, dim )
	if(isElement(hit)) then
		if(getElementType(hit) == "vehicle") then
			local player = getVehicleOccupant(hit, 0)
			if(player ~= false) then
				if(getElementData(hit, "FactionCar") == false) then
					showPlayerDialog(player, 126, 3, "Список доступных цветов", "Цвет\tЦена\nБелый\t300$\nСерый\t300$\nЧерный\t300$\nКрасный\t300$\nЖелтый\t300$\nГолубой\t300$", "Выбор", "Отмена")
				else
					addBox("Вы не можете покрасить\nРабочее авто организации.", player, 255, 0, 0)
				end
			end
		end
	end
end

for i,n in pairs(mrkColorVeh) do
	local mrk = createMarker(n["x"], n["y"], n["z"] - 1, "cylinder", 1.6, 255, 255, 0)
	create3dtextlabel(n["x"], n["y"], n["z"] + 0.5, "ПОКРАСОЧНАЯ")
	addEventHandler("onMarkerHit", mrk, onMrkColorVeh)
end

for i, n in pairs(mrkStation) do
	local mrk = createMarker(n["x"], n["y"], n["z"] - 1, "cylinder", 1.6, 0, 60, 255)
	SED(mrk, "Station", n["Zp"])
	addEventHandler("onMarkerHit", mrk, mrkFuel)
	create3dtextlabel(n["x"], n["y"], n["z"] + 0.5, "Колонка заправки")
end

function hitmafweap( hit, dim )
	if(getElementType(hit) == "player") then
		if(getElementData(hit, "Faction") == 5) then
			showPlayerDialog(hit, 131, 3, "Обмундирование мэрии", "Оружие\nDesert Eagle", "Выбор", "Отмена")
		end
	end
end

function onTrailerAttach( veh )
	if(veh ~= false) then
		local pedulya = getVehicleOccupant(veh, 0)
		if(pedulya ~= false) then
			if(getElementData(pedulya, "SVM") ~= false) then
				if(getElementData(pedulya, "SVM") == source) then
					addBox("Вы успешно прицепили транспортное средство.\nДоставьте его в гараж.", pedulya, 0, 60, 255)
				end
			end
		end
	end
end

function onTrailerDetach( veh )
	if(veh ~= false) then
		local pedulya = getVehicleOccupant(veh, 0)
		if(pedulya ~= false) then
			if(getElementData(pedulya, "SVM") ~= false) then
				if(getElementData(pedulya, "SVM") == source) then
					addBox("Вы отцепили ваше транспортное средство.\nПрицепите его и доставьте в гараж.", pedulya, 0, 60, 255)
				end
			end
		end
	end
end

function hitMrkMechFree( hit, dim )
	if(getElementType(hit) == "player") then
		local veh = getPedOccupiedVehicle(hit)
		if(veh ~= false) then
			if(getElementData(hit, "MechVeh") == veh) then
				if(getElementData(hit, "MechStage") == false) then
					SED(hit, "MechStage", true)
					local tablo = ServerPerem["MechCars"]
					local sectablo = {}
					local iter = 0
					for i,n in pairs(tablo) do
						if(n["veh"] == nil) then
							iter = iter + 1
							sectablo[iter] = n
							sectablo[iter]["i"] = i
						end
					end
					local tablesize = table.getn(sectablo)
					if(tablesize < 1) then
						for i,n in pairs(tablo) do
							if(n["veh"] ~= nil) then
								if(isElement(n["veh"]) == false) then
									for i,n in pairs(IDS) do
										if(getElementData(n, "SVM") == n["veh"]) then
											removeElementData(n, "SVM")
											break
										end
									end
									n["veh"] = nil
								end
							end
						end
						for i,n in pairs(tablo) do
							if(n["veh"] == nil) then
								iter = iter + 1
								sectablo[iter] = n
								sectablo[iter]["i"] = i
							end
						end
					end
					local vehulya = sectablo[math.random(1, tablesize)]
					local rand = math.random(1, 5)
					if(rand == 1) then
						rand = 400
					elseif(rand == 2) then
						rand = 401
					elseif(rand == 3) then
						rand = 402
					elseif(rand == 4) then
						rand = 405
					else
						rand = 560
					end
					local itur = vehulya["i"]
					ServerPerem["MechCars"][itur]["veh"] = createVeh(rand, vehulya["x"], vehulya["y"], vehulya["z"], vehulya["rx"], vehulya["ry"], vehulya["rz"])
					local id = getElementData(hit, "ID")
					setElementHealth(ServerPerem["MechCars"][itur]["veh"], 300)
					setVehicleLocked(ServerPerem["MechCars"][itur]["veh"], true)
					SED(hit, "SVM", ServerPerem["MechCars"][itur]["veh"])
					SED(ServerPerem["MechCars"][itur]["veh"], "Iter", itur)
					local x, y, z = getElementPosition(ServerPerem["MechCars"][itur]["veh"])
					local x1, y1, z1 = getElementPosition(hit)
					local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
					dist = dist * 8 / 14
					dist = math.ceil(dist) + 125
					addBox("Вы успешно достигли точки назначения.\nНа карте обозначена машина,\nКоторую необходимо прицепить и пригнать\nНа парковку\nСтоимость доставки: " .. dist .. "$.", hit, 0, 60, 255)
					SED(hit, "Zprt", dist)
					local id = toch(getElementData(hit, "ID"))
					if(GPST[id] ~= nil) then
						if(GPST[id]["Pickup"] ~= nil) then
							if(getElementType(GPST[id]["Pickup"]) == "marker") then
								removeEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
								destroyElement(GPST[id]["Pickup"])
								destroyElement(GPST[id]["Blip"])
								GPST[id] = nil
							end
						end
					end
					GPST[id] = {}
					GPST[id]["Pickup"] = createMarker(vehulya["x"], vehulya["y"], vehulya["z"], "checkpoint", 4, 220, 0, 0, 220, hit)
					GPST[id]["Blip"] = createBlip(vehulya["x"], vehulya["y"], vehulya["z"], 0, 2, 220, 0, 0, 220, 0, 64000, hit)
					SED(GPST[id]["Pickup"], "Player", hit)
					addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
				else
					local secveh = getElementData(hit, "SVM")
					local x, y, z = getElementPosition(hit)
					local x1, y1, z1 = getElementPosition(secveh)
					local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
					if(dist < 10) then
						local iter = getElementData(secveh, "Iter")
						iter = toch(iter)
						ServerPerem["MechCars"][iter]["veh"] = nil
						customDestroyVehicle(secveh)
						local zprt = getElementData(hit, "Zprt")
						setElementMoney(hit, zprt * coefmoney, "Доставка авто")
						addBox("Вы успешно доставили транспорт.", hit, 0, 60, 255)
						SED(hit, "MechStage", true)
						local tablo = ServerPerem["MechCars"]
						local sectablo = {}
						local iter = 0
						for i,n in pairs(tablo) do
							if(n["veh"] == nil) then
								iter = iter + 1
								sectablo[iter] = n
								sectablo[iter]["i"] = i
							end
						end
						local tablesize = table.getn(sectablo)
						if(tablesize < 1) then
							for i,n in pairs(tablo) do
								if(n["veh"] ~= nil) then
									if(isElement(n["veh"]) == false) then
										for i,n in pairs(IDS) do
											if(getElementData(n, "SVM") == n["veh"]) then
												removeElementData(n, "SVM")
												break
											end
										end
										n["veh"] = nil
									end
								end
							end
							for i,n in pairs(tablo) do
								if(n["veh"] == nil) then
									iter = iter + 1
									sectablo[iter] = n
									sectablo[iter]["i"] = i
								end
							end
						end
						local vehulya = sectablo[math.random(1, tablesize)]
						local rand = math.random(1, 5)
						if(rand == 1) then
							rand = 400
						elseif(rand == 2) then
							rand = 401
						elseif(rand == 3) then
							rand = 402
						elseif(rand == 4) then
							rand = 405
						else
							rand = 560
						end
						local itur = vehulya["i"]
						ServerPerem["MechCars"][itur]["veh"] = createVeh(rand, vehulya["x"], vehulya["y"], vehulya["z"], vehulya["rx"], vehulya["ry"], vehulya["rz"])
						local id = getElementData(hit, "ID")
						setElementHealth(ServerPerem["MechCars"][itur]["veh"], 300)
						setVehicleLocked(ServerPerem["MechCars"][itur]["veh"], true)
						SED(hit, "SVM", ServerPerem["MechCars"][itur]["veh"])
						SED(ServerPerem["MechCars"][itur]["veh"], "Iter", itur)
						local x, y, z = getElementPosition(ServerPerem["MechCars"][itur]["veh"])
						local x1, y1, z1 = getElementPosition(hit)
						local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
						dist = dist * 8 / 14
						dist = math.ceil(dist) + 125
						SED(hit, "Zprt", dist)
						addBox("Вы успешно доставили транспортное средство.\nСледующее отмечено на карте.\nСумма доставки: " .. dist .. "$.", hit, 0, 60, 255)
						local id = toch(getElementData(hit, "ID"))
						if(GPST[id] ~= nil) then
							if(GPST[id]["Pickup"] ~= nil) then
								if(getElementType(GPST[id]["Pickup"]) == "marker") then
									removeEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
									destroyElement(GPST[id]["Pickup"])
									destroyElement(GPST[id]["Blip"])
									GPST[id] = nil
								end
							end
						end
						GPST[id] = {}
						GPST[id]["Pickup"] = createMarker(vehulya["x"], vehulya["y"], vehulya["z"], "checkpoint", 4, 220, 0, 0, 220, hit)
						GPST[id]["Blip"] = createBlip(vehulya["x"], vehulya["y"], vehulya["z"], 0, 2, 220, 0, 0, 220, 0, 64000, hit)
						SED(GPST[id]["Pickup"], "Player", hit)
						addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
					else
						addBox("Ваша машина отмечена на карте.\nОтправляйтесь за ней и возвращайтесь.", hit, 255, 0, 0)
						local id = toch(getElementData(hit, "ID"))
						if(GPST[id] ~= nil) then
							if(GPST[id]["Pickup"] ~= nil) then
								if(getElementType(GPST[id]["Pickup"]) == "marker") then
									removeEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
									destroyElement(GPST[id]["Pickup"])
									destroyElement(GPST[id]["Blip"])
									GPST[id] = nil
								end
							end
						end
						GPST[id] = {}
						GPST[id]["Pickup"] = createMarker(x1, y1, z1, "checkpoint", 4, 220, 0, 0, 220, hit)
						GPST[id]["Blip"] = createBlip(x1, y1, z1, 0, 2, 220, 0, 0, 220, 0, 64000, hit)
						SED(GPST[id]["Pickup"], "Player", hit)
						addEventHandler("onMarkerHit", GPST[id]["Pickup"], gpsHit)
					end
				end
			end
		end
	end
end

function onArmyHit( hit, dim )
	if(isElement(hit) == true) then
		if(getElementType(hit) == "player") then
			if(getElementData(hit, "Login") == true) then
				local id = getElementData(hit, "ID")
				if(getElementData(hit, "Faction") >= 1 and getElementData(hit, "Faction") <= 4) then
					PTTimer[id] = setTimer(function ( player, idur, murk )
						if(isElement(player) == true) then
							local x, y, z = getElementPosition(player)
							local x1, y1, z1 = getElementPosition(murk)
							local dist = getDistanceBetweenPoints3D(x, y, z, x1, y1, z1)
							if(dist < 5) then
								local pt = math.random(1, 4)
								if(getElementData(hit, "Material") < 50) then
									if(Server["ArmyGruz"] > 0) then
										local ppt = toch(getElementData(player, "Material"))
										if(getElementData(player, "Material") < 50) then
											if(pt <= Server["ArmyGruz"]) then
												Server["ArmyGruz"] = Server["ArmyGruz"] - pt
												addBox("+" .. pt .. " мат.", player, 0, 255, 255)
											else
												pt = Server["ArmyGruz"]
												Server["ArmyGruz"] = 0
												addBox("+" .. pt .. " мат.", player, 0, 255, 255)
											end
											ppt = ppt + pt
											SED(player, "Material", ppt)
										else
											addBox("У Вас слишком много материалов.", player, 255, 0, 0)
											killTimer(PTTimer[idur])
											PTTimer[idur] = nil
										end
									else
										addBox("Склад пуст.", player, 255, 0, 0)
										killTimer(PTTimer[idur])
										PTTimer[idur] = nil
									end
								else
									killTimer(PTTimer[idur])
									PTTimer[idur] = nil
									addBox("У Вас слишком много материалов.", player, 255, 0, 0)
								end
							else
								killTimer(PTTimer[idur])
								PTTimer[idur] = nil
							end
						else
							killTimer(PTTimer[idur])
							PTTimer[idur] = nil
						end
					end, 2000, 0, hit, id, source)
				end
			end
		end
	end
end

function onArmyLeave( hit, dim )
	if(hit ~= false) then
		if(getElementType(hit) == "player") then
			local id = getElementData(hit, "ID")
			if(PTTimer[id] ~= nil) then
				killTimer(PTTimer[id])
				PTTimer[id] = nil
			end
		end
	end
end

function onMalibar( hit, dim )
	if(hit ~= false) then
		if(getElementType(hit) == "player") then
			local veh = getPedOccupiedVehicle(hit)
			if(veh == false) then
				showPlayerDialog(hit, 143, 3, "Покупка алкоголя", "Название напитка\tСтоимость\nНапиток Горящий Дэниел\t500$\nКоктейль Любезный Дизель\t1.000$\nЛенивый коктейль Джуга\t1.500$\nДэн Джекиелс\t2.500$\nХайт Ворст\t3.500$", "Выбор", "Отмена")
			end
		end
	end
end

function onOsnLoad( arg1 )
	if(arg1 == client) then
		for i, p in pairs(IDS) do
			if(isElement(p) == true) then
				if(isElement(client) == true) then
					triggerClientEvent(p, "onGridPlus", p, getElementData(client, "ID"), getElementData(client, "Name"), client)
				end
			end
		end
		for i, p in pairs(IDS) do
			if(isElement(p) == true) then
				if(isElement(client) == true) then
					triggerClientEvent(client, "onGridPlus", client, getElementData(p, "ID"), getElementData(p, "Name"), p)
				end
			end
		end
	end
end

addEvent("onOsnLoad", true)
addEventHandler("onOsnLoad", root, onOsnLoad)

function clearAnim( thePlayer )
	if(isElement(thePlayer)) then
		setPedAnimation(thePlayer, "BSKTBALL", "BBALL_idle_O", 1, false)
	end
end

function leftChooseEat( arg1 )
	if(arg1 == client) then
		if(getElementData(arg1, "Lvl") == 1) then
			setPedAnimation(arg1, "food", "eat_pizza", 2000, false)
			setElementData(arg1, "Food", 100)
			setTimer(clearAnim, 2050, 1, arg1)
			UpdateFood(arg1)
			addBox("Вы скушали кусочек пиццы.\nПриятного аппетита!", arg1, 0, 255, 60)
		else
			if(getElementData(arg1, "Money") >= 250) then
				setElementMoney(arg1, -250, "Еда у лавки")
				local eatpt = getElementData(arg1, "Food")
				if(eatpt > 50) then
					eatpt = 100
				else
					eatpt = eatpt + 50
				end
				setElementData(arg1, "Food", eatpt)
				setPedAnimation(arg1, "food", "eat_pizza", 2000, false)
				setTimer(clearAnim, 2050, 1, arg1)
				UpdateFood(arg1)
				addBox("Вы скушали кусочек пиццы.\nПриятного аппетита!", arg1, 0, 255, 60)
			else
				addBox("Ошибка: У Вас недостаточно денег\nЧтобы приобрести пиццу.", arg1, 255, 0, 0)
			end
		end
	end
end

function rightChooseEat( arg1 )
	if(arg1 == client) then
		if(getElementData(arg1, "Money") >= 350) then
			setElementMoney(arg1, -350, "Еда у лавки")
			setElementData(arg1, "Food", 100)
			setPedAnimation(arg1, "food", "eat_burger", 2000, false)
			setTimer(clearAnim, 2050, 1, arg1)
			UpdateFood(arg1)
			addBox("Вы скушали бургер.\nПриятного аппетита!", arg1, 0, 255, 60)
		else
			addBox("Ошибка: У Вас недостаточно денег\nЧтобы приобрести бургер.", arg1, 255, 0, 0)
		end
	end
end

addEvent("leftChooseEat", true)
addEventHandler("leftChooseEat", root, leftChooseEat)
addEvent("rightChooseEat", true)
addEventHandler("rightChooseEat", root, rightChooseEat)

local mrk = createMarker(-1635.302734375, -138.1572265625, 13.827547073364, "cylinder", 1.8, 220, 0, 0, 220, getRootElement())
addEventHandler("onMarkerHit", mrk, onArmyHit)
addEventHandler("onMarkerLeave", mrk, onArmyLeave)
local mrk = createMarker(-871.4296875, 78.8818359375, 8.1073589324951, "cylinder", 1.8, 220, 0, 0, 220, getRootElement())
create3dtextlabel(-871.4296875, 78.8818359375, 8.1073589324951, "ГАРАЖ ЭВАКУАТОРОВ")
addEventHandler("onMarkerHit", mrk, hitMrkMechFree)
addEventHandler("onTrailerDetach", root, onTrailerDetach)
addEventHandler("onTrailerAttach", root, onTrailerAttach)
local mrk = createMarker(470.70703125, -52.955078125, 10.453023910522, "cylinder", 1.2, 220, 0, 0, 220, getRootElement())
addEventHandler("onMarkerHit", mrk, onMalibar)
create3dtextlabel(470.70703125, -52.955078125, 10.653023910522, "[БАР]")
addEventHandler("onMarkerHit", ServerPerem["merweap"], hitmafweap)